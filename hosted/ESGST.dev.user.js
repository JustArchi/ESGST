/* @preserve
// ==UserScript==
// @name Enhanced SteamGifts & SteamTrades fork by JustArchi (A-ESGST)
// @namespace https://SquishedPotatoe.github.io/esgst
// @description Enhances SteamGifts and SteamTrades by adding some cool features to them.
// @icon https://github.com/JustArchi/ESGST/raw/master/src/assets/images/icon.png
// @version 8.10.7
// @author rafaelgomesxyz
// @contributor Revadike
// @updateURL https://github.com/JustArchi/ESGST/raw/master/hosted/ESGST.meta.js
// @downloadURL https://github.com/JustArchi/ESGST/raw/master/hosted/ESGST.user.js
// @match https://www.steamgifts.com/*
// @match https://www.steamtrades.com/*
// @connect steamtrades.com
// @connect steamgifts.com
// @connect sgtools.info
// @connect api.dropboxapi.com
// @connect api.imgur.com
// @connect api.steampowered.com
// @connect content.dropboxapi.com
// @connect files.1drv.com
// @connect github.com
// @connect googleapis.com
// @connect graph.microsoft.com
// @connect isthereanydeal.com
// @connect esgst.rafaelgomes.xyz
// @connect raw.githubusercontent.com
// @connect script.google.com
// @connect script.googleusercontent.com
// @connect steam-tracker.com
// @connect steamcommunity.com
// @connect store.steampowered.com
// @connect userstyles.org
// @grant GM_addValueChangeListener
// @grant GM_deleteValue
// @grant GM_getValue
// @grant GM_info
// @grant GM_listValues
// @grant GM_setValue
// @grant GM_xmlhttpRequest
// @grant GM_openInTab
// @grant GM_getResourceURL
// @grant GM.addValueChangeListener
// @grant GM.deleteValue
// @grant GM.getValue
// @grant GM.info
// @grant GM.listValues
// @grant GM.setValue
// @grant GM.xmlHttpRequest
// @grant GM.openInTab
// @grant GM.getResourceUrl
// @require https://greasemonkey.github.io/gm4-polyfill/gm4-polyfill.js
// @require https://cdn.jsdelivr.net/npm/interactjs@1.10.27/dist/interact.min.js
// @require https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js
// @require https://cdn.jsdelivr.net/npm/jQuery-QueryBuilder@3.0.0/dist/js/query-builder.standalone.js
// @require https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js
// @require https://cdn.jsdelivr.net/npm/jquery-ui@1.14.1/dist/jquery-ui.min.js
// @require https://cdn.jsdelivr.net/npm/jszip@3.2.2/dist/jszip.min.js
// @require https://cdn.jsdelivr.net/gh/rossengeorgiev/vdf-parser@0d210ec51a2be4d6186777addf8f98df59f9eb53/vdf.js
// @require https://cdn.jsdelivr.net/npm/emojis-utils@1.0.2/dist/emojis-utils.min.js
// @resource awesome-bootstrap-checkbox https://cdn.jsdelivr.net/npm/awesome-bootstrap-checkbox@2.0.1/awesome-bootstrap-checkbox.css
// @resource jquery-query-builder https://cdn.jsdelivr.net/npm/jQuery-QueryBuilder@3.0.0/dist/css/query-builder.default.min.css
// @run-at document-start
// @noframes
// ==/UserScript==
*/

/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(1);


/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _browser_gm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);
/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(133);


(async () => {
  if (!document.head) {
    await new Promise(resolve => {
      const check = () => {
        if (document.head) resolve();else requestAnimationFrame(check);
      };
      check();
    });
  }
  const awesomeBootstrapCheckboxCss = document.createElement('link');
  awesomeBootstrapCheckboxCss.rel = 'stylesheet';
  awesomeBootstrapCheckboxCss.href = await GM.getResourceUrl('awesome-bootstrap-checkbox');
  const jqueryQueryBuilderCss = document.createElement('link');
  jqueryQueryBuilderCss.rel = 'stylesheet';
  jqueryQueryBuilderCss.href = await GM.getResourceUrl('jquery-query-builder');
  document.head.appendChild(awesomeBootstrapCheckboxCss);
  document.head.appendChild(jqueryQueryBuilderCss);
})();

/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(90);
/* harmony import */ var _class_Queue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(91);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(132);





_class_Queue__WEBPACK_IMPORTED_MODULE_3__["RequestQueue"].init();
let tdsData = [];
const browser = {
  gm: null,
  runtime: {
    onMessage: {
      addListener: callback => browser.gm.listener = callback
    },
    getBrowserInfo: () => Promise.resolve({
      name: 'userscript'
    }),
    getManifest: () => Promise.resolve(browser.gm.info.script),
    sendMessage: obj => {
      return new Promise(async resolve => {
        switch (obj.action) {
          case 'get-tds':
            resolve(JSON.stringify(tdsData));
            break;
          case 'notify-tds':
            tdsData = JSON.parse(obj.data);
            browser.gm.listener(JSON.stringify({
              action: 'notify-tds',
              values: tdsData
            }));
            resolve();
            break;
          case 'permissions_contains':
            resolve(true);
            break;
          case 'getBrowserInfo':
            {
              const browserInfo = await browser.runtime.getBrowserInfo();
              resolve(JSON.stringify(browserInfo));
              break;
            }
          case 'queue_request':
            {
              await _class_Queue__WEBPACK_IMPORTED_MODULE_3__["RequestQueue"].enqueue(obj.key);
              resolve();
              break;
            }
          case 'do_lock':
            {
              const lock = JSON.parse(obj.lock);
              resolve(await browser.gm.doLock(lock));
              break;
            }
          case 'update_lock':
            {
              const lock = JSON.parse(obj.lock);
              const locked = JSON.parse(await browser.gm.getValue(lock.key, '{}'));
              if (locked.uuid === lock.uuid) {
                locked.timestamp = Date.now();
                await browser.gm.setValue(lock.key, JSON.stringify(locked));
              }
              resolve();
              break;
            }
          case 'do_unlock':
            {
              const lock = JSON.parse(obj.lock);
              await browser.gm.setValue(lock.key, '{}');
              resolve();
              break;
            }
          case 'fetch':
            {
              var _obj$timeout;
              const parameters = JSON.parse(obj.parameters);
              if (parameters.credentials === 'omit') {
                parameters.headers['Esgst-Cookie'] = '';
              }
              browser.gm.xmlHttpRequest({
                binary: !!obj.fileName,
                data: obj.fileName ? await _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.getZip(parameters.body, obj.fileName, 'binarystring') : parameters.body,
                headers: parameters.headers,
                method: parameters.method,
                overrideMimeType: obj.blob ? `text/plain; charset=x-user-defined` : '',
                timeout: (_obj$timeout = obj.timeout) !== null && _obj$timeout !== void 0 ? _obj$timeout : 10000,
                url: obj.url,
                onload: async response => {
                  if (obj.blob) {
                    response.responseText = (await _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.readZip(response.responseText))[0].value;
                  }
                  resolve({
                    status: response.status,
                    url: response.finalUrl,
                    redirected: typeof response.finalUrl !== 'undefined' && response.finalUrl !== obj.url,
                    text: response.responseText
                  });
                },
                onerror: response => resolve({
                  error: response.responseText
                })
              });
              break;
            }
          case 'open_tab':
            {
              browser.gm.openInTab(obj.url, false);
              resolve();
              break;
            }
          case 'register_tab':
            {
              resolve();
              break;
            }
          case 'update_adareqlim':
            {
              await _class_Queue__WEBPACK_IMPORTED_MODULE_3__["RequestQueue"].loadRequestThreshold();
              resolve();
              break;
            }
        }
      });
    }
  },
  storage: {
    local: {
      get: async () => {
        const keys = await browser.gm.listValues();
        const promises = [];
        const storage = {};
        for (const key of keys) {
          const promise = browser.gm.getValue(key);
          promise.then(value => storage[key] = value);
          promises.push(promise);
        }
        await Promise.all(promises);
        return storage;
      },
      remove: async keys => {
        const promises = [];
        for (const key of keys) {
          promises.push(browser.gm.deleteValue(key));
        }
        await Promise.all(promises);
        await browser.gm.setValue('storageChanged', JSON.stringify(Date.now()));
      },
      set: async values => {
        const promises = [];
        for (const key in values) {
          if (values.hasOwnProperty(key)) {
            promises.push(browser.gm.setValue(key, values[key]));
          }
        }
        await Promise.all(promises);
        await browser.gm.setValue('storageChanged', JSON.stringify(Date.now()));
      }
    },
    onChanged: {
      addListener: () => {}
    }
  }
};
browser.gm = GM;
browser.gm.lastUpdate = 0;
if (!browser.gm.addValueChangeListener) {
  browser.gm.hasValueChanged = async (key, oldValue, callback) => {
    const newValue = await browser.gm.getValue(key);
    if (newValue !== oldValue) {
      callback(key, oldValue, newValue, true);
      oldValue = newValue;
    }
    window.setTimeout(browser.gm.hasValueChanged, 5000, key, oldValue, callback);
  };
  browser.gm.addValueChangeListener = async (key, callback) => {
    const oldValue = await browser.gm.getValue(key);
    browser.gm.hasValueChanged(key, oldValue, callback);
  };
}
browser.gm.addValueChangeListener('storageChanged', async (name, oldValue, newValue, remote) => {
  if (!remote || !newValue || newValue === 'undefined') {
    return;
  }
  const lastUpdate = JSON.parse(newValue);
  if (lastUpdate > browser.gm.lastUpdate) {
    browser.gm.lastUpdate = lastUpdate;
    const storage = await browser.storage.local.get(null);
    const changes = {};
    for (const key in storage) {
      changes[key] = {
        newValue: storage[key]
      };
    }
    browser.gm.listener(JSON.stringify({
      action: 'storageChanged',
      values: {
        changes,
        areaName: 'local'
      }
    }));
  }
});
browser.gm.doLock = async lock => {
  let locked = JSON.parse(await browser.gm.getValue(lock.key, '{}'));
  if (!locked || !locked.uuid || locked.timestamp < Date.now() - (lock.threshold + lock.timeout)) {
    await browser.gm.setValue(lock.key, JSON.stringify({
      timestamp: Date.now(),
      uuid: lock.uuid
    }));
    await _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.timeout(lock.threshold / 2);
    locked = JSON.parse(await browser.gm.getValue(lock.key, '{}'));
    if (!locked || locked.uuid !== lock.uuid) {
      if (!lock.tryOnce) {
        return browser.gm.doLock(lock);
      }
      return 'false';
    }
    return 'true';
  }
  if (!lock.tryOnce) {
    await _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.timeout(lock.threshold / 3);
    return browser.gm.doLock(lock);
  }
  return 'false';
};
Object(_browser__WEBPACK_IMPORTED_MODULE_2__["setBrowser"])(browser);

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIndexedObject = __webpack_require__(4);
var addToUnscopables = __webpack_require__(12);
var Iterators = __webpack_require__(59);
var InternalStateModule = __webpack_require__(60);
var defineProperty = __webpack_require__(34).f;
var defineIterator = __webpack_require__(64);
var createIterResultObject = __webpack_require__(86);
var IS_PURE = __webpack_require__(18);
var DESCRIPTORS = __webpack_require__(32);

var ARRAY_ITERATOR = 'Array Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);

// `Array.prototype.entries` method
// https://tc39.es/ecma262/#sec-array.prototype.entries
// `Array.prototype.keys` method
// https://tc39.es/ecma262/#sec-array.prototype.keys
// `Array.prototype.values` method
// https://tc39.es/ecma262/#sec-array.prototype.values
// `Array.prototype[@@iterator]` method
// https://tc39.es/ecma262/#sec-array.prototype-@@iterator
// `CreateArrayIterator` internal method
// https://tc39.es/ecma262/#sec-createarrayiterator
module.exports = defineIterator(Array, 'Array', function (iterated, kind) {
  setInternalState(this, {
    type: ARRAY_ITERATOR,
    target: toIndexedObject(iterated), // target
    index: 0,                          // next index
    kind: kind                         // kind
  });
// `%ArrayIteratorPrototype%.next` method
// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next
}, function () {
  var state = getInternalState(this);
  var target = state.target;
  var index = state.index++;
  if (!target || index >= target.length) {
    state.target = null;
    return createIterResultObject(undefined, true);
  }
  switch (state.kind) {
    case 'keys': return createIterResultObject(index, false);
    case 'values': return createIterResultObject(target[index], false);
  } return createIterResultObject([index, target[index]], false);
}, 'values');

// argumentsList[@@iterator] is %ArrayProto_values%
// https://tc39.es/ecma262/#sec-createunmappedargumentsobject
// https://tc39.es/ecma262/#sec-createmappedargumentsobject
var values = Iterators.Arguments = Iterators.Array;

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');

// V8 ~ Chrome 45- bug
if (!IS_PURE && DESCRIPTORS && values.name !== 'values') try {
  defineProperty(values, 'name', { value: 'values' });
} catch (error) { /* empty */ }


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// toObject with fallback for non-array-like ES3 strings
var IndexedObject = __webpack_require__(5);
var requireObjectCoercible = __webpack_require__(10);

module.exports = function (it) {
  return IndexedObject(requireObjectCoercible(it));
};


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);
var fails = __webpack_require__(8);
var classof = __webpack_require__(9);

var $Object = Object;
var split = uncurryThis(''.split);

// fallback for non-array-like ES3 and non-enumerable old V8 strings
module.exports = fails(function () {
  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346
  // eslint-disable-next-line no-prototype-builtins -- safe
  return !$Object('z').propertyIsEnumerable(0);
}) ? function (it) {
  return classof(it) === 'String' ? split(it, '') : $Object(it);
} : $Object;


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_BIND = __webpack_require__(7);

var FunctionPrototype = Function.prototype;
var call = FunctionPrototype.call;
// eslint-disable-next-line es/no-function-prototype-bind -- safe
var uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);

module.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {
  return function () {
    return call.apply(fn, arguments);
  };
};


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(8);

module.exports = !fails(function () {
  // eslint-disable-next-line es/no-function-prototype-bind -- safe
  var test = (function () { /* empty */ }).bind();
  // eslint-disable-next-line no-prototype-builtins -- safe
  return typeof test != 'function' || test.hasOwnProperty('prototype');
});


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = function (exec) {
  try {
    return !!exec();
  } catch (error) {
    return true;
  }
};


/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);

var toString = uncurryThis({}.toString);
var stringSlice = uncurryThis(''.slice);

module.exports = function (it) {
  return stringSlice(toString(it), 8, -1);
};


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isNullOrUndefined = __webpack_require__(11);

var $TypeError = TypeError;

// `RequireObjectCoercible` abstract operation
// https://tc39.es/ecma262/#sec-requireobjectcoercible
module.exports = function (it) {
  if (isNullOrUndefined(it)) throw new $TypeError("Can't call method on " + it);
  return it;
};


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// we can't use just `it == null` since of `document.all` special case
// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec
module.exports = function (it) {
  return it === null || it === undefined;
};


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var wellKnownSymbol = __webpack_require__(13);
var create = __webpack_require__(27);
var defineProperty = __webpack_require__(34).f;

var UNSCOPABLES = wellKnownSymbol('unscopables');
var ArrayPrototype = Array.prototype;

// Array.prototype[@@unscopables]
// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
if (ArrayPrototype[UNSCOPABLES] === undefined) {
  defineProperty(ArrayPrototype, UNSCOPABLES, {
    configurable: true,
    value: create(null)
  });
}

// add a key to Array.prototype[@@unscopables]
module.exports = function (key) {
  ArrayPrototype[UNSCOPABLES][key] = true;
};


/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);
var shared = __webpack_require__(16);
var hasOwn = __webpack_require__(20);
var uid = __webpack_require__(22);
var NATIVE_SYMBOL = __webpack_require__(23);
var USE_SYMBOL_AS_UID = __webpack_require__(26);

var Symbol = globalThis.Symbol;
var WellKnownSymbolsStore = shared('wks');
var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;

module.exports = function (name) {
  if (!hasOwn(WellKnownSymbolsStore, name)) {
    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)
      ? Symbol[name]
      : createWellKnownSymbol('Symbol.' + name);
  } return WellKnownSymbolsStore[name];
};


/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {
var check = function (it) {
  return it && it.Math === Math && it;
};

// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
module.exports =
  // eslint-disable-next-line es/no-global-this -- safe
  check(typeof globalThis == 'object' && globalThis) ||
  check(typeof window == 'object' && window) ||
  // eslint-disable-next-line no-restricted-globals -- safe
  check(typeof self == 'object' && self) ||
  check(typeof global == 'object' && global) ||
  check(typeof this == 'object' && this) ||
  // eslint-disable-next-line no-new-func -- fallback
  (function () { return this; })() || Function('return this')();

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(15)))

/***/ }),
/* 15 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var store = __webpack_require__(17);

module.exports = function (key, value) {
  return store[key] || (store[key] = value || {});
};


/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IS_PURE = __webpack_require__(18);
var globalThis = __webpack_require__(14);
var defineGlobalProperty = __webpack_require__(19);

var SHARED = '__core-js_shared__';
var store = module.exports = globalThis[SHARED] || defineGlobalProperty(SHARED, {});

(store.versions || (store.versions = [])).push({
  version: '3.48.0',
  mode: IS_PURE ? 'pure' : 'global',
  copyright: '© 2013–2025 Denis Pushkarev (zloirock.ru), 2025–2026 CoreJS Company (core-js.io). All rights reserved.',
  license: 'https://github.com/zloirock/core-js/blob/v3.48.0/LICENSE',
  source: 'https://github.com/zloirock/core-js'
});


/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = false;


/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);

// eslint-disable-next-line es/no-object-defineproperty -- safe
var defineProperty = Object.defineProperty;

module.exports = function (key, value) {
  try {
    defineProperty(globalThis, key, { value: value, configurable: true, writable: true });
  } catch (error) {
    globalThis[key] = value;
  } return value;
};


/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);
var toObject = __webpack_require__(21);

var hasOwnProperty = uncurryThis({}.hasOwnProperty);

// `HasOwnProperty` abstract operation
// https://tc39.es/ecma262/#sec-hasownproperty
// eslint-disable-next-line es/no-object-hasown -- safe
module.exports = Object.hasOwn || function hasOwn(it, key) {
  return hasOwnProperty(toObject(it), key);
};


/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var requireObjectCoercible = __webpack_require__(10);

var $Object = Object;

// `ToObject` abstract operation
// https://tc39.es/ecma262/#sec-toobject
module.exports = function (argument) {
  return $Object(requireObjectCoercible(argument));
};


/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);

var id = 0;
var postfix = Math.random();
var toString = uncurryThis(1.1.toString);

module.exports = function (key) {
  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);
};


/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable es/no-symbol -- required for testing */
var V8_VERSION = __webpack_require__(24);
var fails = __webpack_require__(8);
var globalThis = __webpack_require__(14);

var $String = globalThis.String;

// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing
module.exports = !!Object.getOwnPropertySymbols && !fails(function () {
  var symbol = Symbol('symbol detection');
  // Chrome 38 Symbol has incorrect toString conversion
  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances
  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,
  // of course, fail.
  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||
    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances
    !Symbol.sham && V8_VERSION && V8_VERSION < 41;
});


/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);
var userAgent = __webpack_require__(25);

var process = globalThis.process;
var Deno = globalThis.Deno;
var versions = process && process.versions || Deno && Deno.version;
var v8 = versions && versions.v8;
var match, version;

if (v8) {
  match = v8.split('.');
  // in old Chrome, versions of V8 isn't V8 = Chrome / 10
  // but their correct versions are not interesting for us
  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);
}

// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`
// so check `userAgent` even if `.v8` exists, but 0
if (!version && userAgent) {
  match = userAgent.match(/Edge\/(\d+)/);
  if (!match || match[1] >= 74) {
    match = userAgent.match(/Chrome\/(\d+)/);
    if (match) version = +match[1];
  }
}

module.exports = version;


/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);

var navigator = globalThis.navigator;
var userAgent = navigator && navigator.userAgent;

module.exports = userAgent ? String(userAgent) : '';


/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable es/no-symbol -- required for testing */
var NATIVE_SYMBOL = __webpack_require__(23);

module.exports = NATIVE_SYMBOL &&
  !Symbol.sham &&
  typeof Symbol.iterator == 'symbol';


/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* global ActiveXObject -- old IE, WSH */
var anObject = __webpack_require__(28);
var definePropertiesModule = __webpack_require__(31);
var enumBugKeys = __webpack_require__(56);
var hiddenKeys = __webpack_require__(55);
var html = __webpack_require__(57);
var documentCreateElement = __webpack_require__(36);
var sharedKey = __webpack_require__(58);

var GT = '>';
var LT = '<';
var PROTOTYPE = 'prototype';
var SCRIPT = 'script';
var IE_PROTO = sharedKey('IE_PROTO');

var EmptyConstructor = function () { /* empty */ };

var scriptTag = function (content) {
  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
};

// Create object with fake `null` prototype: use ActiveX Object with cleared prototype
var NullProtoObjectViaActiveX = function (activeXDocument) {
  activeXDocument.write(scriptTag(''));
  activeXDocument.close();
  var temp = activeXDocument.parentWindow.Object;
  // eslint-disable-next-line no-useless-assignment -- avoid memory leak
  activeXDocument = null;
  return temp;
};

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var NullProtoObjectViaIFrame = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = documentCreateElement('iframe');
  var JS = 'java' + SCRIPT + ':';
  var iframeDocument;
  iframe.style.display = 'none';
  html.appendChild(iframe);
  // https://github.com/zloirock/core-js/issues/475
  iframe.src = String(JS);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(scriptTag('document.F=Object'));
  iframeDocument.close();
  return iframeDocument.F;
};

// Check for document.domain and active x support
// No need to use active x approach when document.domain is not set
// see https://github.com/es-shims/es5-shim/issues/150
// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346
// avoid IE GC bug
var activeXDocument;
var NullProtoObject = function () {
  try {
    activeXDocument = new ActiveXObject('htmlfile');
  } catch (error) { /* ignore */ }
  NullProtoObject = typeof document != 'undefined'
    ? document.domain && activeXDocument
      ? NullProtoObjectViaActiveX(activeXDocument) // old IE
      : NullProtoObjectViaIFrame()
    : NullProtoObjectViaActiveX(activeXDocument); // WSH
  var length = enumBugKeys.length;
  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
  return NullProtoObject();
};

hiddenKeys[IE_PROTO] = true;

// `Object.create` method
// https://tc39.es/ecma262/#sec-object.create
// eslint-disable-next-line es/no-object-create -- safe
module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    EmptyConstructor[PROTOTYPE] = anObject(O);
    result = new EmptyConstructor();
    EmptyConstructor[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = NullProtoObject();
  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);
};


/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isObject = __webpack_require__(29);

var $String = String;
var $TypeError = TypeError;

// `Assert: Type(argument) is Object`
module.exports = function (argument) {
  if (isObject(argument)) return argument;
  throw new $TypeError($String(argument) + ' is not an object');
};


/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isCallable = __webpack_require__(30);

module.exports = function (it) {
  return typeof it == 'object' ? it !== null : isCallable(it);
};


/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot
var documentAll = typeof document == 'object' && document.all;

// `IsCallable` abstract operation
// https://tc39.es/ecma262/#sec-iscallable
// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing
module.exports = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {
  return typeof argument == 'function' || argument === documentAll;
} : function (argument) {
  return typeof argument == 'function';
};


/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(32);
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(33);
var definePropertyModule = __webpack_require__(34);
var anObject = __webpack_require__(28);
var toIndexedObject = __webpack_require__(4);
var objectKeys = __webpack_require__(47);

// `Object.defineProperties` method
// https://tc39.es/ecma262/#sec-object.defineproperties
// eslint-disable-next-line es/no-object-defineproperties -- safe
exports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var props = toIndexedObject(Properties);
  var keys = objectKeys(Properties);
  var length = keys.length;
  var index = 0;
  var key;
  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);
  return O;
};


/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(8);

// Detect IE8's incomplete defineProperty implementation
module.exports = !fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;
});


/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(32);
var fails = __webpack_require__(8);

// V8 ~ Chrome 36-
// https://bugs.chromium.org/p/v8/issues/detail?id=3334
module.exports = DESCRIPTORS && fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty(function () { /* empty */ }, 'prototype', {
    value: 42,
    writable: false
  }).prototype !== 42;
});


/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(32);
var IE8_DOM_DEFINE = __webpack_require__(35);
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(33);
var anObject = __webpack_require__(28);
var toPropertyKey = __webpack_require__(37);

var $TypeError = TypeError;
// eslint-disable-next-line es/no-object-defineproperty -- safe
var $defineProperty = Object.defineProperty;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var ENUMERABLE = 'enumerable';
var CONFIGURABLE = 'configurable';
var WRITABLE = 'writable';

// `Object.defineProperty` method
// https://tc39.es/ecma262/#sec-object.defineproperty
exports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPropertyKey(P);
  anObject(Attributes);
  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {
    var current = $getOwnPropertyDescriptor(O, P);
    if (current && current[WRITABLE]) {
      O[P] = Attributes.value;
      Attributes = {
        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],
        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],
        writable: false
      };
    }
  } return $defineProperty(O, P, Attributes);
} : $defineProperty : function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPropertyKey(P);
  anObject(Attributes);
  if (IE8_DOM_DEFINE) try {
    return $defineProperty(O, P, Attributes);
  } catch (error) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError('Accessors not supported');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};


/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(32);
var fails = __webpack_require__(8);
var createElement = __webpack_require__(36);

// Thanks to IE8 for its funny defineProperty
module.exports = !DESCRIPTORS && !fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty(createElement('div'), 'a', {
    get: function () { return 7; }
  }).a !== 7;
});


/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);
var isObject = __webpack_require__(29);

var document = globalThis.document;
// typeof document.createElement is 'object' in old IE
var EXISTS = isObject(document) && isObject(document.createElement);

module.exports = function (it) {
  return EXISTS ? document.createElement(it) : {};
};


/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toPrimitive = __webpack_require__(38);
var isSymbol = __webpack_require__(40);

// `ToPropertyKey` abstract operation
// https://tc39.es/ecma262/#sec-topropertykey
module.exports = function (argument) {
  var key = toPrimitive(argument, 'string');
  return isSymbol(key) ? key : key + '';
};


/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__(39);
var isObject = __webpack_require__(29);
var isSymbol = __webpack_require__(40);
var getMethod = __webpack_require__(43);
var ordinaryToPrimitive = __webpack_require__(46);
var wellKnownSymbol = __webpack_require__(13);

var $TypeError = TypeError;
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');

// `ToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-toprimitive
module.exports = function (input, pref) {
  if (!isObject(input) || isSymbol(input)) return input;
  var exoticToPrim = getMethod(input, TO_PRIMITIVE);
  var result;
  if (exoticToPrim) {
    if (pref === undefined) pref = 'default';
    result = call(exoticToPrim, input, pref);
    if (!isObject(result) || isSymbol(result)) return result;
    throw new $TypeError("Can't convert object to primitive value");
  }
  if (pref === undefined) pref = 'number';
  return ordinaryToPrimitive(input, pref);
};


/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_BIND = __webpack_require__(7);

var call = Function.prototype.call;
// eslint-disable-next-line es/no-function-prototype-bind -- safe
module.exports = NATIVE_BIND ? call.bind(call) : function () {
  return call.apply(call, arguments);
};


/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__(41);
var isCallable = __webpack_require__(30);
var isPrototypeOf = __webpack_require__(42);
var USE_SYMBOL_AS_UID = __webpack_require__(26);

var $Object = Object;

module.exports = USE_SYMBOL_AS_UID ? function (it) {
  return typeof it == 'symbol';
} : function (it) {
  var $Symbol = getBuiltIn('Symbol');
  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));
};


/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);
var isCallable = __webpack_require__(30);

var aFunction = function (argument) {
  return isCallable(argument) ? argument : undefined;
};

module.exports = function (namespace, method) {
  return arguments.length < 2 ? aFunction(globalThis[namespace]) : globalThis[namespace] && globalThis[namespace][method];
};


/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);

module.exports = uncurryThis({}.isPrototypeOf);


/***/ }),
/* 43 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var aCallable = __webpack_require__(44);
var isNullOrUndefined = __webpack_require__(11);

// `GetMethod` abstract operation
// https://tc39.es/ecma262/#sec-getmethod
module.exports = function (V, P) {
  var func = V[P];
  return isNullOrUndefined(func) ? undefined : aCallable(func);
};


/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isCallable = __webpack_require__(30);
var tryToString = __webpack_require__(45);

var $TypeError = TypeError;

// `Assert: IsCallable(argument) is true`
module.exports = function (argument) {
  if (isCallable(argument)) return argument;
  throw new $TypeError(tryToString(argument) + ' is not a function');
};


/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $String = String;

module.exports = function (argument) {
  try {
    return $String(argument);
  } catch (error) {
    return 'Object';
  }
};


/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__(39);
var isCallable = __webpack_require__(30);
var isObject = __webpack_require__(29);

var $TypeError = TypeError;

// `OrdinaryToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-ordinarytoprimitive
module.exports = function (input, pref) {
  var fn, val;
  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;
  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;
  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;
  throw new $TypeError("Can't convert object to primitive value");
};


/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var internalObjectKeys = __webpack_require__(48);
var enumBugKeys = __webpack_require__(56);

// `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
// eslint-disable-next-line es/no-object-keys -- safe
module.exports = Object.keys || function keys(O) {
  return internalObjectKeys(O, enumBugKeys);
};


/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);
var hasOwn = __webpack_require__(20);
var toIndexedObject = __webpack_require__(4);
var indexOf = __webpack_require__(49).indexOf;
var hiddenKeys = __webpack_require__(55);

var push = uncurryThis([].push);

module.exports = function (object, names) {
  var O = toIndexedObject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (hasOwn(O, key = names[i++])) {
    ~indexOf(result, key) || push(result, key);
  }
  return result;
};


/***/ }),
/* 49 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIndexedObject = __webpack_require__(4);
var toAbsoluteIndex = __webpack_require__(50);
var lengthOfArrayLike = __webpack_require__(53);

// `Array.prototype.{ indexOf, includes }` methods implementation
var createMethod = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIndexedObject($this);
    var length = lengthOfArrayLike(O);
    if (length === 0) return !IS_INCLUDES && -1;
    var index = toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare -- NaN check
    if (IS_INCLUDES && el !== el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare -- NaN check
      if (value !== value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) {
      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};

module.exports = {
  // `Array.prototype.includes` method
  // https://tc39.es/ecma262/#sec-array.prototype.includes
  includes: createMethod(true),
  // `Array.prototype.indexOf` method
  // https://tc39.es/ecma262/#sec-array.prototype.indexof
  indexOf: createMethod(false)
};


/***/ }),
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIntegerOrInfinity = __webpack_require__(51);

var max = Math.max;
var min = Math.min;

// Helper for a popular repeating case of the spec:
// Let integer be ? ToInteger(index).
// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).
module.exports = function (index, length) {
  var integer = toIntegerOrInfinity(index);
  return integer < 0 ? max(integer + length, 0) : min(integer, length);
};


/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var trunc = __webpack_require__(52);

// `ToIntegerOrInfinity` abstract operation
// https://tc39.es/ecma262/#sec-tointegerorinfinity
module.exports = function (argument) {
  var number = +argument;
  // eslint-disable-next-line no-self-compare -- NaN check
  return number !== number || number === 0 ? 0 : trunc(number);
};


/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ceil = Math.ceil;
var floor = Math.floor;

// `Math.trunc` method
// https://tc39.es/ecma262/#sec-math.trunc
// eslint-disable-next-line es/no-math-trunc -- safe
module.exports = Math.trunc || function trunc(x) {
  var n = +x;
  return (n > 0 ? floor : ceil)(n);
};


/***/ }),
/* 53 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toLength = __webpack_require__(54);

// `LengthOfArrayLike` abstract operation
// https://tc39.es/ecma262/#sec-lengthofarraylike
module.exports = function (obj) {
  return toLength(obj.length);
};


/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIntegerOrInfinity = __webpack_require__(51);

var min = Math.min;

// `ToLength` abstract operation
// https://tc39.es/ecma262/#sec-tolength
module.exports = function (argument) {
  var len = toIntegerOrInfinity(argument);
  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991
};


/***/ }),
/* 55 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = {};


/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// IE8- don't enum bug keys
module.exports = [
  'constructor',
  'hasOwnProperty',
  'isPrototypeOf',
  'propertyIsEnumerable',
  'toLocaleString',
  'toString',
  'valueOf'
];


/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__(41);

module.exports = getBuiltIn('document', 'documentElement');


/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var shared = __webpack_require__(16);
var uid = __webpack_require__(22);

var keys = shared('keys');

module.exports = function (key) {
  return keys[key] || (keys[key] = uid(key));
};


/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = {};


/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_WEAK_MAP = __webpack_require__(61);
var globalThis = __webpack_require__(14);
var isObject = __webpack_require__(29);
var createNonEnumerableProperty = __webpack_require__(62);
var hasOwn = __webpack_require__(20);
var shared = __webpack_require__(17);
var sharedKey = __webpack_require__(58);
var hiddenKeys = __webpack_require__(55);

var OBJECT_ALREADY_INITIALIZED = 'Object already initialized';
var TypeError = globalThis.TypeError;
var WeakMap = globalThis.WeakMap;
var set, get, has;

var enforce = function (it) {
  return has(it) ? get(it) : set(it, {});
};

var getterFor = function (TYPE) {
  return function (it) {
    var state;
    if (!isObject(it) || (state = get(it)).type !== TYPE) {
      throw new TypeError('Incompatible receiver, ' + TYPE + ' required');
    } return state;
  };
};

if (NATIVE_WEAK_MAP || shared.state) {
  var store = shared.state || (shared.state = new WeakMap());
  /* eslint-disable no-self-assign -- prototype methods protection */
  store.get = store.get;
  store.has = store.has;
  store.set = store.set;
  /* eslint-enable no-self-assign -- prototype methods protection */
  set = function (it, metadata) {
    if (store.has(it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    store.set(it, metadata);
    return metadata;
  };
  get = function (it) {
    return store.get(it) || {};
  };
  has = function (it) {
    return store.has(it);
  };
} else {
  var STATE = sharedKey('state');
  hiddenKeys[STATE] = true;
  set = function (it, metadata) {
    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    createNonEnumerableProperty(it, STATE, metadata);
    return metadata;
  };
  get = function (it) {
    return hasOwn(it, STATE) ? it[STATE] : {};
  };
  has = function (it) {
    return hasOwn(it, STATE);
  };
}

module.exports = {
  set: set,
  get: get,
  has: has,
  enforce: enforce,
  getterFor: getterFor
};


/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);
var isCallable = __webpack_require__(30);

var WeakMap = globalThis.WeakMap;

module.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));


/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(32);
var definePropertyModule = __webpack_require__(34);
var createPropertyDescriptor = __webpack_require__(63);

module.exports = DESCRIPTORS ? function (object, key, value) {
  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};


/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};


/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(65);
var call = __webpack_require__(39);
var IS_PURE = __webpack_require__(18);
var FunctionName = __webpack_require__(70);
var isCallable = __webpack_require__(30);
var createIteratorConstructor = __webpack_require__(77);
var getPrototypeOf = __webpack_require__(79);
var setPrototypeOf = __webpack_require__(82);
var setToStringTag = __webpack_require__(81);
var createNonEnumerableProperty = __webpack_require__(62);
var defineBuiltIn = __webpack_require__(68);
var wellKnownSymbol = __webpack_require__(13);
var Iterators = __webpack_require__(59);
var IteratorsCore = __webpack_require__(78);

var PROPER_FUNCTION_NAME = FunctionName.PROPER;
var CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;
var IteratorPrototype = IteratorsCore.IteratorPrototype;
var BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;
var ITERATOR = wellKnownSymbol('iterator');
var KEYS = 'keys';
var VALUES = 'values';
var ENTRIES = 'entries';

var returnThis = function () { return this; };

module.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {
  createIteratorConstructor(IteratorConstructor, NAME, next);

  var getIterationMethod = function (KIND) {
    if (KIND === DEFAULT && defaultIterator) return defaultIterator;
    if (!BUGGY_SAFARI_ITERATORS && KIND && KIND in IterablePrototype) return IterablePrototype[KIND];

    switch (KIND) {
      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };
      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };
      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };
    }

    return function () { return new IteratorConstructor(this); };
  };

  var TO_STRING_TAG = NAME + ' Iterator';
  var INCORRECT_VALUES_NAME = false;
  var IterablePrototype = Iterable.prototype;
  var nativeIterator = IterablePrototype[ITERATOR]
    || IterablePrototype['@@iterator']
    || DEFAULT && IterablePrototype[DEFAULT];
  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);
  var anyNativeIterator = NAME === 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;
  var CurrentIteratorPrototype, methods, KEY;

  // fix native
  if (anyNativeIterator) {
    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));
    if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {
      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {
        if (setPrototypeOf) {
          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);
        } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {
          defineBuiltIn(CurrentIteratorPrototype, ITERATOR, returnThis);
        }
      }
      // Set @@toStringTag to native iterators
      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);
      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;
    }
  }

  // fix Array.prototype.{ values, @@iterator }.name in V8 / FF
  if (PROPER_FUNCTION_NAME && DEFAULT === VALUES && nativeIterator && nativeIterator.name !== VALUES) {
    if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {
      createNonEnumerableProperty(IterablePrototype, 'name', VALUES);
    } else {
      INCORRECT_VALUES_NAME = true;
      defaultIterator = function values() { return call(nativeIterator, this); };
    }
  }

  // export additional methods
  if (DEFAULT) {
    methods = {
      values: getIterationMethod(VALUES),
      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
      entries: getIterationMethod(ENTRIES)
    };
    if (FORCED) for (KEY in methods) {
      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
        defineBuiltIn(IterablePrototype, KEY, methods[KEY]);
      }
    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);
  }

  // define iterator
  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {
    defineBuiltIn(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });
  }
  Iterators[NAME] = defaultIterator;

  return methods;
};


/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);
var getOwnPropertyDescriptor = __webpack_require__(66).f;
var createNonEnumerableProperty = __webpack_require__(62);
var defineBuiltIn = __webpack_require__(68);
var defineGlobalProperty = __webpack_require__(19);
var copyConstructorProperties = __webpack_require__(72);
var isForced = __webpack_require__(76);

/*
  options.target         - name of the target object
  options.global         - target is the global object
  options.stat           - export as static methods of target
  options.proto          - export as prototype methods of target
  options.real           - real prototype method for the `pure` version
  options.forced         - export even if the native feature is available
  options.bind           - bind methods to the target, required for the `pure` version
  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version
  options.unsafe         - use the simple assignment of property instead of delete + defineProperty
  options.sham           - add a flag to not completely full polyfills
  options.enumerable     - export as enumerable property
  options.dontCallGetSet - prevent calling a getter on target
  options.name           - the .name of the function if it does not match the key
*/
module.exports = function (options, source) {
  var TARGET = options.target;
  var GLOBAL = options.global;
  var STATIC = options.stat;
  var FORCED, target, key, targetProperty, sourceProperty, descriptor;
  if (GLOBAL) {
    target = globalThis;
  } else if (STATIC) {
    target = globalThis[TARGET] || defineGlobalProperty(TARGET, {});
  } else {
    target = globalThis[TARGET] && globalThis[TARGET].prototype;
  }
  if (target) for (key in source) {
    sourceProperty = source[key];
    if (options.dontCallGetSet) {
      descriptor = getOwnPropertyDescriptor(target, key);
      targetProperty = descriptor && descriptor.value;
    } else targetProperty = target[key];
    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);
    // contained in target
    if (!FORCED && targetProperty !== undefined) {
      if (typeof sourceProperty == typeof targetProperty) continue;
      copyConstructorProperties(sourceProperty, targetProperty);
    }
    // add a flag to not completely full polyfills
    if (options.sham || (targetProperty && targetProperty.sham)) {
      createNonEnumerableProperty(sourceProperty, 'sham', true);
    }
    defineBuiltIn(target, key, sourceProperty, options);
  }
};


/***/ }),
/* 66 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(32);
var call = __webpack_require__(39);
var propertyIsEnumerableModule = __webpack_require__(67);
var createPropertyDescriptor = __webpack_require__(63);
var toIndexedObject = __webpack_require__(4);
var toPropertyKey = __webpack_require__(37);
var hasOwn = __webpack_require__(20);
var IE8_DOM_DEFINE = __webpack_require__(35);

// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// `Object.getOwnPropertyDescriptor` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor
exports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
  O = toIndexedObject(O);
  P = toPropertyKey(P);
  if (IE8_DOM_DEFINE) try {
    return $getOwnPropertyDescriptor(O, P);
  } catch (error) { /* empty */ }
  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);
};


/***/ }),
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $propertyIsEnumerable = {}.propertyIsEnumerable;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// Nashorn ~ JDK8 bug
var NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);

// `Object.prototype.propertyIsEnumerable` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable
exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
  var descriptor = getOwnPropertyDescriptor(this, V);
  return !!descriptor && descriptor.enumerable;
} : $propertyIsEnumerable;


/***/ }),
/* 68 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isCallable = __webpack_require__(30);
var definePropertyModule = __webpack_require__(34);
var makeBuiltIn = __webpack_require__(69);
var defineGlobalProperty = __webpack_require__(19);

module.exports = function (O, key, value, options) {
  if (!options) options = {};
  var simple = options.enumerable;
  var name = options.name !== undefined ? options.name : key;
  if (isCallable(value)) makeBuiltIn(value, name, options);
  if (options.global) {
    if (simple) O[key] = value;
    else defineGlobalProperty(key, value);
  } else {
    try {
      if (!options.unsafe) delete O[key];
      else if (O[key]) simple = true;
    } catch (error) { /* empty */ }
    if (simple) O[key] = value;
    else definePropertyModule.f(O, key, {
      value: value,
      enumerable: false,
      configurable: !options.nonConfigurable,
      writable: !options.nonWritable
    });
  } return O;
};


/***/ }),
/* 69 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);
var fails = __webpack_require__(8);
var isCallable = __webpack_require__(30);
var hasOwn = __webpack_require__(20);
var DESCRIPTORS = __webpack_require__(32);
var CONFIGURABLE_FUNCTION_NAME = __webpack_require__(70).CONFIGURABLE;
var inspectSource = __webpack_require__(71);
var InternalStateModule = __webpack_require__(60);

var enforceInternalState = InternalStateModule.enforce;
var getInternalState = InternalStateModule.get;
var $String = String;
// eslint-disable-next-line es/no-object-defineproperty -- safe
var defineProperty = Object.defineProperty;
var stringSlice = uncurryThis(''.slice);
var replace = uncurryThis(''.replace);
var join = uncurryThis([].join);

var CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {
  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;
});

var TEMPLATE = String(String).split('String');

var makeBuiltIn = module.exports = function (value, name, options) {
  if (stringSlice($String(name), 0, 7) === 'Symbol(') {
    name = '[' + replace($String(name), /^Symbol\(([^)]*)\).*$/, '$1') + ']';
  }
  if (options && options.getter) name = 'get ' + name;
  if (options && options.setter) name = 'set ' + name;
  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {
    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });
    else value.name = name;
  }
  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {
    defineProperty(value, 'length', { value: options.arity });
  }
  try {
    if (options && hasOwn(options, 'constructor') && options.constructor) {
      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });
    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable
    } else if (value.prototype) value.prototype = undefined;
  } catch (error) { /* empty */ }
  var state = enforceInternalState(value);
  if (!hasOwn(state, 'source')) {
    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');
  } return value;
};

// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
// eslint-disable-next-line no-extend-native -- required
Function.prototype.toString = makeBuiltIn(function toString() {
  return isCallable(this) && getInternalState(this).source || inspectSource(this);
}, 'toString');


/***/ }),
/* 70 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(32);
var hasOwn = __webpack_require__(20);

var FunctionPrototype = Function.prototype;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;

var EXISTS = hasOwn(FunctionPrototype, 'name');
// additional protection from minified / mangled / dropped function names
var PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';
var CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));

module.exports = {
  EXISTS: EXISTS,
  PROPER: PROPER,
  CONFIGURABLE: CONFIGURABLE
};


/***/ }),
/* 71 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);
var isCallable = __webpack_require__(30);
var store = __webpack_require__(17);

var functionToString = uncurryThis(Function.toString);

// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper
if (!isCallable(store.inspectSource)) {
  store.inspectSource = function (it) {
    return functionToString(it);
  };
}

module.exports = store.inspectSource;


/***/ }),
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var hasOwn = __webpack_require__(20);
var ownKeys = __webpack_require__(73);
var getOwnPropertyDescriptorModule = __webpack_require__(66);
var definePropertyModule = __webpack_require__(34);

module.exports = function (target, source, exceptions) {
  var keys = ownKeys(source);
  var defineProperty = definePropertyModule.f;
  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
  for (var i = 0; i < keys.length; i++) {
    var key = keys[i];
    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {
      defineProperty(target, key, getOwnPropertyDescriptor(source, key));
    }
  }
};


/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__(41);
var uncurryThis = __webpack_require__(6);
var getOwnPropertyNamesModule = __webpack_require__(74);
var getOwnPropertySymbolsModule = __webpack_require__(75);
var anObject = __webpack_require__(28);

var concat = uncurryThis([].concat);

// all object keys, includes non-enumerable and symbols
module.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {
  var keys = getOwnPropertyNamesModule.f(anObject(it));
  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;
};


/***/ }),
/* 74 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var internalObjectKeys = __webpack_require__(48);
var enumBugKeys = __webpack_require__(56);

var hiddenKeys = enumBugKeys.concat('length', 'prototype');

// `Object.getOwnPropertyNames` method
// https://tc39.es/ecma262/#sec-object.getownpropertynames
// eslint-disable-next-line es/no-object-getownpropertynames -- safe
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return internalObjectKeys(O, hiddenKeys);
};


/***/ }),
/* 75 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe
exports.f = Object.getOwnPropertySymbols;


/***/ }),
/* 76 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(8);
var isCallable = __webpack_require__(30);

var replacement = /#|\.prototype\./;

var isForced = function (feature, detection) {
  var value = data[normalize(feature)];
  return value === POLYFILL ? true
    : value === NATIVE ? false
    : isCallable(detection) ? fails(detection)
    : !!detection;
};

var normalize = isForced.normalize = function (string) {
  return String(string).replace(replacement, '.').toLowerCase();
};

var data = isForced.data = {};
var NATIVE = isForced.NATIVE = 'N';
var POLYFILL = isForced.POLYFILL = 'P';

module.exports = isForced;


/***/ }),
/* 77 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IteratorPrototype = __webpack_require__(78).IteratorPrototype;
var create = __webpack_require__(27);
var createPropertyDescriptor = __webpack_require__(63);
var setToStringTag = __webpack_require__(81);
var Iterators = __webpack_require__(59);

var returnThis = function () { return this; };

module.exports = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {
  var TO_STRING_TAG = NAME + ' Iterator';
  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(+!ENUMERABLE_NEXT, next) });
  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);
  Iterators[TO_STRING_TAG] = returnThis;
  return IteratorConstructor;
};


/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(8);
var isCallable = __webpack_require__(30);
var isObject = __webpack_require__(29);
var create = __webpack_require__(27);
var getPrototypeOf = __webpack_require__(79);
var defineBuiltIn = __webpack_require__(68);
var wellKnownSymbol = __webpack_require__(13);
var IS_PURE = __webpack_require__(18);

var ITERATOR = wellKnownSymbol('iterator');
var BUGGY_SAFARI_ITERATORS = false;

// `%IteratorPrototype%` object
// https://tc39.es/ecma262/#sec-%iteratorprototype%-object
var IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;

/* eslint-disable es/no-array-prototype-keys -- safe */
if ([].keys) {
  arrayIterator = [].keys();
  // Safari 8 has buggy iterators w/o `next`
  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;
  else {
    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));
    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;
  }
}

var NEW_ITERATOR_PROTOTYPE = !isObject(IteratorPrototype) || fails(function () {
  var test = {};
  // FF44- legacy iterators case
  return IteratorPrototype[ITERATOR].call(test) !== test;
});

if (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};
else if (IS_PURE) IteratorPrototype = create(IteratorPrototype);

// `%IteratorPrototype%[@@iterator]()` method
// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator
if (!isCallable(IteratorPrototype[ITERATOR])) {
  defineBuiltIn(IteratorPrototype, ITERATOR, function () {
    return this;
  });
}

module.exports = {
  IteratorPrototype: IteratorPrototype,
  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS
};


/***/ }),
/* 79 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var hasOwn = __webpack_require__(20);
var isCallable = __webpack_require__(30);
var toObject = __webpack_require__(21);
var sharedKey = __webpack_require__(58);
var CORRECT_PROTOTYPE_GETTER = __webpack_require__(80);

var IE_PROTO = sharedKey('IE_PROTO');
var $Object = Object;
var ObjectPrototype = $Object.prototype;

// `Object.getPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.getprototypeof
// eslint-disable-next-line es/no-object-getprototypeof -- safe
module.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {
  var object = toObject(O);
  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];
  var constructor = object.constructor;
  if (isCallable(constructor) && object instanceof constructor) {
    return constructor.prototype;
  } return object instanceof $Object ? ObjectPrototype : null;
};


/***/ }),
/* 80 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(8);

module.exports = !fails(function () {
  function F() { /* empty */ }
  F.prototype.constructor = null;
  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing
  return Object.getPrototypeOf(new F()) !== F.prototype;
});


/***/ }),
/* 81 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var defineProperty = __webpack_require__(34).f;
var hasOwn = __webpack_require__(20);
var wellKnownSymbol = __webpack_require__(13);

var TO_STRING_TAG = wellKnownSymbol('toStringTag');

module.exports = function (target, TAG, STATIC) {
  if (target && !STATIC) target = target.prototype;
  if (target && !hasOwn(target, TO_STRING_TAG)) {
    defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });
  }
};


/***/ }),
/* 82 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable no-proto -- safe */
var uncurryThisAccessor = __webpack_require__(83);
var isObject = __webpack_require__(29);
var requireObjectCoercible = __webpack_require__(10);
var aPossiblePrototype = __webpack_require__(84);

// `Object.setPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.setprototypeof
// Works with __proto__ only. Old v8 can't work with null proto objects.
// eslint-disable-next-line es/no-object-setprototypeof -- safe
module.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {
  var CORRECT_SETTER = false;
  var test = {};
  var setter;
  try {
    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');
    setter(test, []);
    CORRECT_SETTER = test instanceof Array;
  } catch (error) { /* empty */ }
  return function setPrototypeOf(O, proto) {
    requireObjectCoercible(O);
    aPossiblePrototype(proto);
    if (!isObject(O)) return O;
    if (CORRECT_SETTER) setter(O, proto);
    else O.__proto__ = proto;
    return O;
  };
}() : undefined);


/***/ }),
/* 83 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);
var aCallable = __webpack_require__(44);

module.exports = function (object, key, method) {
  try {
    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));
  } catch (error) { /* empty */ }
};


/***/ }),
/* 84 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isPossiblePrototype = __webpack_require__(85);

var $String = String;
var $TypeError = TypeError;

module.exports = function (argument) {
  if (isPossiblePrototype(argument)) return argument;
  throw new $TypeError("Can't set " + $String(argument) + ' as a prototype');
};


/***/ }),
/* 85 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isObject = __webpack_require__(29);

module.exports = function (argument) {
  return isObject(argument) || argument === null;
};


/***/ }),
/* 86 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// `CreateIterResultObject` abstract operation
// https://tc39.es/ecma262/#sec-createiterresultobject
module.exports = function (value, done) {
  return { value: value, done: done };
};


/***/ }),
/* 87 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);
var DOMIterables = __webpack_require__(88);
var DOMTokenListPrototype = __webpack_require__(89);
var ArrayIteratorMethods = __webpack_require__(3);
var createNonEnumerableProperty = __webpack_require__(62);
var setToStringTag = __webpack_require__(81);
var wellKnownSymbol = __webpack_require__(13);

var ITERATOR = wellKnownSymbol('iterator');
var ArrayValues = ArrayIteratorMethods.values;

var handlePrototype = function (CollectionPrototype, COLLECTION_NAME) {
  if (CollectionPrototype) {
    // some Chrome versions have non-configurable methods on DOMTokenList
    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {
      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);
    } catch (error) {
      CollectionPrototype[ITERATOR] = ArrayValues;
    }
    setToStringTag(CollectionPrototype, COLLECTION_NAME, true);
    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {
      // some Chrome versions have non-configurable methods on DOMTokenList
      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {
        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);
      } catch (error) {
        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];
      }
    }
  }
};

for (var COLLECTION_NAME in DOMIterables) {
  handlePrototype(globalThis[COLLECTION_NAME] && globalThis[COLLECTION_NAME].prototype, COLLECTION_NAME);
}

handlePrototype(DOMTokenListPrototype, 'DOMTokenList');


/***/ }),
/* 88 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// iterable DOM collections
// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods
module.exports = {
  CSSRuleList: 0,
  CSSStyleDeclaration: 0,
  CSSValueList: 0,
  ClientRectList: 0,
  DOMRectList: 0,
  DOMStringList: 0,
  DOMTokenList: 1,
  DataTransferItemList: 0,
  FileList: 0,
  HTMLAllCollection: 0,
  HTMLCollection: 0,
  HTMLFormElement: 0,
  HTMLSelectElement: 0,
  MediaList: 0,
  MimeTypeArray: 0,
  NamedNodeMap: 0,
  NodeList: 1,
  PaintRequestList: 0,
  Plugin: 0,
  PluginArray: 0,
  SVGLengthList: 0,
  SVGNumberList: 0,
  SVGPathSegList: 0,
  SVGPointList: 0,
  SVGStringList: 0,
  SVGTransformList: 0,
  SourceBufferList: 0,
  StyleSheetList: 0,
  TextTrackCueList: 0,
  TextTrackList: 0,
  TouchList: 0
};


/***/ }),
/* 89 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// in old WebKit versions, `element.classList` is not an instance of global `DOMTokenList`
var documentCreateElement = __webpack_require__(36);

var classList = documentCreateElement('span').classList;
var DOMTokenListPrototype = classList && classList.constructor && classList.constructor.prototype;

module.exports = DOMTokenListPrototype === Object.prototype ? undefined : DOMTokenListPrototype;


/***/ }),
/* 90 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setBrowser", function() { return setBrowser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "browser", function() { return _browser; });
let _browser;
const setBrowser = __browser => {
  _browser = __browser;
};


/***/ }),
/* 91 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RequestQueue", function() { return RequestQueue; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _LocalStorage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(96);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);






class _RequestQueue {
  constructor() {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "queue", {});
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "isChecking", false);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "isCheckingLocalRequests", false);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "init", async () => {
      await this.loadRequestThreshold();
      this.continuouslyCheck();
      void this.continuouslyCheckLocalRequests();
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "continuouslyCheck", () => {
      this.check();
      setTimeout(this.continuouslyCheck, 100);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "check", () => {
      if (this.isChecking) {
        return;
      }
      this.isChecking = true;
      const now = Date.now();
      for (const [key, queue] of Object.entries(this.queue)) {
        if (queue.requests.length === 0) {
          continue;
        }
        const lastRequest = this.getLastRequest(key);
        if (lastRequest === 0 || now - queue.threshold > lastRequest) {
          this.setLastRequest(key, now);
          const request = queue.requests.shift();
          if (request) {
            request();
          }
        }
      }
      this.isChecking = false;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "getLastRequest", key => {
      return parseInt(_LocalStorage__WEBPACK_IMPORTED_MODULE_3__["LocalStorage"].get(`request_${key}`, '0'));
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setLastRequest", (key, lastRequest) => {
      _LocalStorage__WEBPACK_IMPORTED_MODULE_3__["LocalStorage"].set(`request_${key}`, lastRequest.toString());
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "continuouslyCheckLocalRequests", async () => {
      await this.checkLocalRequests();
      setTimeout(this.continuouslyCheckLocalRequests, 15000);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "checkLocalRequests", async () => {
      if (this.isCheckingLocalRequests || !this.queue.sg.wasRequesting) {
        return;
      }
      this.isCheckingLocalRequests = true;
      this.queue.sg.wasRequesting = false;
      if (!this.queue.sg.thresholds) {
        this.queue.sg.thresholds = await this.getRequestThresholds();
      }
      const currentDate = new Date();
      const now = currentDate.getTime();
      const currentDay = currentDate.getDate();
      const currentHour = currentDate.getHours();
      const currentMinute = currentDate.getMinutes();
      let minuteTotal = 0;
      let hourTotal = 0;
      let dayTotal = 0;
      let requestLog = await this.getRequestLog();
      requestLog = requestLog.filter(log => now - log.timestamp <= 86400000);
      for (const log of requestLog) {
        const date = new Date(log.timestamp);
        const day = date.getDate();
        const hour = date.getHours();
        const minute = date.getMinutes();
        if (day === currentDay) {
          dayTotal += 1;
          if (hour === currentHour) {
            hourTotal += 1;
            if (minute === currentMinute) {
              minuteTotal += 1;
            }
          }
        } else {
          break;
        }
      }
      if (dayTotal > this.queue.sg.day_limit * 0.75) {
        this.queue.sg.threshold = this.queue.sg.thresholds.daily75 * 1000;
      } else if (hourTotal > this.queue.sg.hour_limit * 0.75) {
        this.queue.sg.threshold = this.queue.sg.thresholds.hourly75 * 1000;
      } else if (minuteTotal > this.queue.sg.minute_limit * 0.75) {
        this.queue.sg.threshold = this.queue.sg.thresholds.minute75 * 1000;
      } else if (minuteTotal > this.queue.sg.minute_limit * 0.5) {
        this.queue.sg.threshold = this.queue.sg.thresholds.minute50 * 1000;
      } else {
        this.queue.sg.threshold = this.queue.sg.thresholds.default * 1000;
      }
      this.isCheckingLocalRequests = false;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "loadRequestThreshold", async () => {
      this.queue.sg.thresholds = await this.getRequestThresholds();
      this.queue.sg.threshold = this.queue.sg.thresholds.default * 1000;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "getRequestThresholds", async () => {
      if (_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('useCustomAdaReqLim')) {
        const thresholds = {};
        for (const [key, minThreshold] of Object.entries(this.queue.sg.minThresholds)) {
          var _Settings$get;
          thresholds[key] = parseFloat((_Settings$get = _Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get(`customAdaReqLim_${key}`)) !== null && _Settings$get !== void 0 ? _Settings$get : 0.0);
          if (thresholds[key] < minThreshold) {
            thresholds[key] = minThreshold;
          }
        }
        return thresholds;
      } else {
        return {
          ...this.queue.sg.minThresholds
        };
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "getRequestLog", async () => {
      return _Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.requestLog;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "enqueue", key => {
      const promise = new Promise(resolve => {
        var _this$queue$key;
        this.queue[key] = (_this$queue$key = this.queue[key]) !== null && _this$queue$key !== void 0 ? _this$queue$key : {
          threshold: 100,
          requests: [],
          wasRequesting: false
        };
        this.queue[key].requests.push(resolve);
        this.queue[key].wasRequesting = true;
      });
      this.check();
      return promise;
    });
    this.queue.sg = {
      threshold: 250,
      thresholds: null,
      minThresholds: {
        default: 0.25,
        minute50: 0.5,
        minute75: 1,
        hourly75: 1.5,
        daily75: 2
      },
      minute_limit: 120,
      hour_limit: 2400,
      day_limit: 14400,
      requests: [],
      wasRequesting: false
    };
  }
}
const RequestQueue = new _RequestQueue();

/***/ }),
/* 92 */
/***/ (function(module, exports, __webpack_require__) {

var toPropertyKey = __webpack_require__(93);
function _defineProperty(e, r, t) {
  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {
    value: t,
    enumerable: !0,
    configurable: !0,
    writable: !0
  }) : e[r] = t, e;
}
module.exports = _defineProperty, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),
/* 93 */
/***/ (function(module, exports, __webpack_require__) {

var _typeof = __webpack_require__(94)["default"];
var toPrimitive = __webpack_require__(95);
function toPropertyKey(t) {
  var i = toPrimitive(t, "string");
  return "symbol" == _typeof(i) ? i : i + "";
}
module.exports = toPropertyKey, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),
/* 94 */
/***/ (function(module, exports) {

function _typeof(o) {
  "@babel/helpers - typeof";

  return module.exports = _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
    return typeof o;
  } : function (o) {
    return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
  }, module.exports.__esModule = true, module.exports["default"] = module.exports, _typeof(o);
}
module.exports = _typeof, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),
/* 95 */
/***/ (function(module, exports, __webpack_require__) {

var _typeof = __webpack_require__(94)["default"];
function toPrimitive(t, r) {
  if ("object" != _typeof(t) || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r || "default");
    if ("object" != _typeof(i)) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r ? String : Number)(t);
}
module.exports = toPrimitive, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),
/* 96 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocalStorage", function() { return LocalStorage; });
class _LocalStorage {
  set(key, value) {
    window.localStorage.setItem(`esgst_${key}`, value);
  }
  get(key, value = undefined) {
    return window.localStorage.getItem(`esgst_${key}`) || value;
  }
  delete(key) {
    window.localStorage.removeItem(`esgst_${key}`);
  }
}
const LocalStorage = new _LocalStorage();


/***/ }),
/* 97 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Settings", function() { return Settings; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(122);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(132);







class _Settings {
  constructor() {
    this.enableByDefault = false;
    this.settings = {};
    this.fullSettings = {};
    this.aliases = {};
    this.defaultValues = {
      limitSteamStore_sg: true,
      customAdaReqLim_default: 0.25,
      customAdaReqLim_minute50: 0.5,
      customAdaReqLim_minute75: 1,
      customAdaReqLim_hourly75: 1.5,
      customAdaReqLim_daily75: 2,
      cgb_levelColors: [],
      ge_a_sg: true,
      glwc_mm_sg: false,
      glwc_checkMaxWishlists: false,
      glwc_maxWishlists: 500,
      es_g_sg: true,
      es_d_sg: true,
      es_c_sg: true,
      es_c_st: true,
      es_l_sg: true,
      es_l_st: true,
      es_t_st: true,
      tds_forums: {},
      tds_minutes: 10,
      ch_perLoad: 5,
      df_perLoad: 5,
      tf_perLoad: 5,
      gs_sent_sg: true,
      gs_received_sg: true,
      gs_giftDifference_sg: true,
      gs_valueDifference_sg: true,
      gs_lastGiveaway_sg: true,
      gs_users_sg: true,
      deleteOldBackups: false,
      deleteOldBackups_days: 90,
      sfi_icon: 'user',
      npth_previousRegex: 'back|last|less|prev|<|←',
      npth_nextRegex: 'forw|more|next|onwards?|►|>|→',
      permissionsDenied: [],
      egh_c_sg: true,
      cewgd_c_sg: true,
      cewgd_c_p_sg: true,
      cewgd_c_sl_sg: true,
      cewgd_c_t_sg: true,
      cewgd_c_l_sg: true,
      cewgd_c_w_sg: true,
      cewgd_e_sg: true,
      cewgd_e_p_sg: true,
      cewgd_e_sl_sg: true,
      cewgd_e_t_sg: true,
      cewgd_e_l_sg: true,
      cewgd_w_sg: true,
      cewgd_w_p_sg: true,
      cewgd_w_sl_sg: true,
      cewgd_w_t_sg: true,
      cewgd_w_l_sg: true,
      esgst_st: true,
      esgst_sgt: true,
      ge_extractOnward: false,
      ge_flushCache: false,
      ge_flushCacheHours: 24,
      ge_ignoreDiscussionComments: false,
      ge_ignoreGiveawayComments: false,
      cv_username: '%username%',
      cv_steamId: '%steamId%',
      cv_creator: '%creator%',
      cv_replyUser: '%replyUser%',
      cv_esgstFeature: '%esgst=(.+?)%',
      cgc_dateFormat: `M d, yy`,
      cgc_timeFormat: `H:mm`,
      cgc_index_0: 1,
      collapse_general: false,
      collapse_giveaways: false,
      collapse_discussions: false,
      collapse_trades: false,
      collapse_comments: false,
      collapse_users: false,
      collapse_groups: false,
      collapse_games: false,
      collapse_others: false,
      collapse_element_ordering: false,
      collapse_steam_api_key: false,
      gc_e_color: '#a59d7c',
      gc_e_bColor: '#e0e0a8',
      gc_e_bgColor: '#e9e9ca',
      at_format: `MMM d, yyyy, H:mm:ss`,
      plt_format: `MMM d, yyyy, H:mm:ss`,
      vgb_index: 1,
      vgb_wonFormat: `([FCV] FCV / [RCV] RCV / [NCV] NCV / [NR] NR)`,
      vgb_sentFormat: `([FCV] FCV / [RCV] RCV / [NCV] NCV / [A] A / [NR] NR)`,
      ul_links: [{
        label: `https://cdn.steamtrades.com/img/favicon.ico`,
        url: `https://www.steamtrades.com/user/%steamid%`
      }, {
        label: `https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/79/7967e1ee4973a92886fe737d90f0a0b20b6f94a1_full.jpg`,
        url: `https://www.backlog-assassins.net/users/+%steamid%`
      }, {
        label: `https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/91/91b23515a62b46eaa46cedab5bbe8085aa11ce1d_full.jpg`,
        url: `https://www.playingappreciated.com/profile.php?u=%steamid%`
      }, {
        label: `https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/0a/0a603fdbfb5d1283132c6558390ef71c1f48fc51_full.jpg`,
        url: `https://touhou.justarchi.net/user/%steamid%/profile`
      }, {
        label: `https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/1a/1ad341114c26138740b405595f9ecf140f6b647f_full.jpg`,
        url: `https://astats.astats.nl/astats/User_Info.php?steamID64=%steamid%`
      }, {
        label: `https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/41/41d0a0ca20c6b460c10e03c6ff8ef23bc6bb7f9d_full.jpg`,
        url: `https://barter.vg/steam/%steamid%`
      }, {
        label: 'SteamRep',
        url: `https://steamrep.com/profiles/%steamid%`
      }],
      cgb_b_bgColor: '#f2d9dc',
      cgb_p_bgColor: '#f2e6dc',
      cgb_io_bgColor: '#d8d9dc',
      cgb_rr_bgColor: '#e5d9f6',
      cgb_g_bgColor: '#d8f3dc',
      cgb_w_bgColor: '#d8e6f6',
      cgb_sgt_bgColor: '#d8f3e9',
      qgs_index: 0,
      lpv_barColor: '#609f60',
      lpv_projectedBarColor: `rgba(96, 159, 96, 0.5)`,
      lpv_barColorHover: '#6dac6d',
      lpv_projectedBarColorHover: `rgba(122, 185, 122, 0.5)`,
      lpv_barColorSelected: '#7ab97a',
      lpv_projectedBarColorSelected: `rgba(147, 210, 147, 0.5)`,
      pv_barColor: '#609f60',
      pv_barColorHover: '#6dac6d',
      pv_barColorSelected: '#7ab97a',
      giveawayLinks: ['entries', 'winners_count', 'comments'],
      giveawayLinks_gv: ['entries', 'winners_count', 'comments'],
      giveawayExtraPanel: ['ggl'],
      giveawayExtraPanel_gv: ['ggl'],
      giveawayHeading: ['gr', 'gb', 'gf', 'egh', 'name', 'points', 'copies', 'steam', 'screenshots-videos', 'search', 'hideGame', 'gt'],
      giveawayHeading_gv: ['gr', 'gb', 'gf', 'egh', 'name', 'points', 'copies', 'steam', 'screenshots-videos', 'search', 'hideGame', 'gt'],
      nrf_clearCache: false,
      dt_s_sg: true,
      gt_s_sg: true,
      gt_s_st: true,
      gpt_s_sg: true,
      gpt_s_st: true,
      ut_s_sg: true,
      ut_s_st: true,
      gc_si_sg: true,
      es_pages: 1,
      backupZip_sg: false,
      backupZip_st: false,
      gc_hltb_index_0: 0,
      gc_hltb_index_1: 0,
      gc_hltb_index_2: 0,
      gc_rt_sg: true,
      ugd_playtime: 0,
      ugd_achievements: 0,
      ct_o_sg: true,
      ct_o_st: true,
      ct_fop_sg: true,
      ct_fop_st: true,
      ct_f_sg: true,
      ct_f_st: true,
      gf_m_b_sg: false,
      gf_m_a_sg: false,
      df_m_b_sg: false,
      df_m_a_sg: false,
      tf_m_b_st: false,
      tf_m_a_st: false,
      cf_m_b_sg: false,
      cf_m_a_sg: false,
      gf_presets: [],
      df_presets: [],
      tf_presets: [],
      gmf_presets: [],
      gpf_presets: [],
      cf_presets: [],
      chfl_key: 'ctrlKey + e',
      getSyncGameNames_sg: false,
      getSyncGameNames_st: false,
      sgDarkGrey_startTime: `00:00`,
      sgDarkGrey_endTime: `23:59`,
      sgv2Dark_startTime: `00:00`,
      sgv2Dark_endTime: `23:59`,
      steamGiftiesBlack_startTime: `00:00`,
      steamGiftiesBlack_endTime: `23:59`,
      steamGiftiesBlue_startTime: `00:00`,
      steamGiftiesBlue_endTime: `23:59`,
      steamTradiesBlackBlue_startTime: `00:00`,
      steamTradiesBlackBlue_endTime: `23:59`,
      mm_useRegExp: false,
      mm_enableGiveaways: false,
      mm_enableDiscussions: false,
      mm_enableUsers: false,
      mm_enableGames: false,
      cs_limitPages: false,
      cs_minPage: '',
      cs_maxPage: '',
      ge_sgt_limit: 1,
      filter_os: 0,
      filter_giveaways_exist_in_account: 0,
      filter_giveaways_missing_base_game: 0,
      filter_giveaways_level: 0,
      filter_giveaways_additional_games: 0,
      dismissedOptions: [],
      hr_g_format: '🏆',
      hr_w_format: `(#❤)`,
      hr_p_format: `(#P)`,
      hr_fp_points: 400,
      ef_filters: '',
      gwc_h_width: '3px',
      gwr_h_width: '3px',
      chfl_giveaways_sg: ['createANewGiveaway', 'communityWishlist', 'viewCreated', 'viewEntered', 'viewWon', {
        color: 'grey',
        description: 'View your hidden games.',
        icon: 'fa-eye',
        id: 'hiddenGames',
        name: 'Hidden Games',
        url: '/account/settings/giveaways/filters'
      }, {
        color: 'grey',
        description: 'Check if a game receives reduced CV.',
        icon: 'fa-calendar-minus-o',
        id: 'reducedCvGames',
        name: 'Reduced CV Games',
        url: '/bundle-games'
      }, {
        id: `browseWishlistGiveaways`,
        name: 'Browse Wishlist Giveaways',
        url: `/giveaways/search?type=wishlist`
      }, {
        id: `browseFollowedGiveaways`,
        name: 'Browse Followed Giveaways',
        url: `/giveaways/search?esgst=fgp`
      }, {
        id: `browseRecommendedGiveaways`,
        name: 'Browse Recommended Giveaways',
        url: `/giveaways/search?type=recommended`
      }, {
        id: `browseGroupGiveaways`,
        name: 'Browse Group Giveaways',
        url: `/giveaways/search?type=group`
      }, {
        id: `browseNewGiveaways`,
        name: 'Browse New Giveaways',
        url: `/giveaways/search?type=new`
      }],
      chfl_discussions_sg: ['createANewDiscussion', 'viewCreated', 'viewBookmarked', {
        id: 'browseAdd',
        name: 'Browse Add-ons / Tools',
        url: '/discussions/addons-tools'
      }, {
        id: 'browseAnnouncements',
        name: 'Browse Announcements',
        url: '/discussions/announcements'
      }, {
        id: 'browseBugs',
        name: 'Browse Bugs / Suggestions',
        url: '/discussions/bugs-suggestions'
      }, {
        id: 'browseDeals',
        name: 'Browse Deals',
        url: '/discussions/deals'
      }, {
        id: 'browseGameShowcase',
        name: 'Browse Game Showcase',
        url: '/discussions/game-showcase'
      }, {
        id: 'browseGeneral',
        name: 'Browse General',
        url: '/discussions/general'
      }, {
        id: 'browseGroupRecruitment',
        name: 'Browse Group Recruitment',
        url: '/discussions/group-recruitment'
      }, {
        id: 'browseHardware',
        name: 'Browse Hardware',
        url: '/discussions/hardware'
      }, {
        id: 'browseHelp',
        name: 'Browse Help',
        url: '/discussions/help'
      }, {
        id: 'browseLet',
        name: "Browse Let's Play Together",
        url: '/discussions/lets-play-together'
      }, {
        id: 'browseMovies',
        name: 'Browse Movies / TV',
        url: '/discussions/movies-tv'
      }, {
        id: 'browseOffTopic',
        name: 'Browse Off Topic',
        url: '/discussions/off-topic'
      }, {
        id: 'browsePuzzles',
        name: 'Browse Puzzles / Events',
        url: '/discussions/puzzles-events'
      }, {
        id: 'browseUncategorized',
        name: 'Browse Uncategorized',
        url: '/discussions/uncategorized'
      }, {
        id: 'browseUserProjects',
        name: 'Browse User Projects',
        url: '/discussions/user-projects'
      }, {
        id: 'browseWhitelist',
        name: 'Browse Whitelist / Recruitment',
        url: '/discussions/whitelist-recruitment'
      }],
      chfl_support_sg: ['createANewTicket', {
        color: 'grey',
        description: 'Check a user`s real CV.',
        icon: 'fa-dollar',
        id: 'realCv',
        name: 'Real CV',
        url: `https://www.sgtools.info/real-cv`
      }, {
        color: 'red',
        description: 'Check if a user has not activated wins.',
        icon: 'fa-exchange',
        id: 'notActivatedWins',
        name: 'Not Activated Wins',
        url: `https://www.sgtools.info/activation`
      }, {
        color: 'red',
        description: 'Check if a user has multiple wins.',
        icon: 'fa-clone',
        id: 'multipleWins',
        name: 'Multiple Wins',
        url: `https://www.sgtools.info/multiple-wins`
      }, {
        color: 'grey',
        description: 'Check the last bundled games.',
        icon: 'fa-percent',
        id: 'lastBundled',
        name: 'Last Bundled',
        url: `https://www.sgtools.info/lastbundled`
      }],
      chfl_help_sg: ['commentFormatting', 'faq', 'guidelines', {
        color: 'grey',
        description: 'View SteamGifts` change log.',
        icon: 'fa-file-text-o',
        id: 'changeLog',
        name: 'Change Log',
        url: '/discussion/e9zDo/'
      }],
      chfl_account_sg: ['syncWithSteam', 'myStats', 'myEntryHistory', 'myCommentHistory', {
        color: 'blue',
        icon: 'fa-heart',
        id: 'whitelist',
        name: 'Whitelist',
        url: '/account/manage/whitelist'
      }, {
        color: 'red',
        icon: 'fa-ban',
        id: 'blacklist',
        name: 'Blacklist',
        url: '/account/manage/blacklist'
      }, {
        color: 'grey',
        icon: 'fa-folder',
        id: 'games',
        name: 'Games',
        url: '/account/steam/games'
      }, {
        color: 'grey',
        icon: 'fa-user',
        id: 'groups',
        name: 'Groups',
        url: '/account/steam/groups'
      }, {
        color: 'grey',
        icon: 'fa-star',
        id: 'wishlist',
        name: 'Wishlist',
        url: '/account/steam/wishlist'
      }],
      chfl_footer_sg: ['archive', 'stats', 'roles', 'users', 'steamGroup', 'chat', 'privacyPolicy', 'cookiePolicy', 'termsOfService', 'advertise'],
      chfl_trades_st: ['newTrade', 'myTrades'],
      chfl_account_st: ['reviews', 'comments', 'settings'],
      chfl_footer_st: ['guidelines', 'commentFormatting', 'privacyPolicy', 'cookiePolicy', 'termsOfService', 'advertise'],
      cdr_days: 7,
      cdr_aDays: 7,
      hgm_addOwned: false,
      hgm_addIgnored: false,
      hgm_addBanned: false,
      hgm_removeTextArea: false,
      hgm_removeOwned: false,
      hgm_removeWishlisted: false,
      hgm_removeFollowed: false,
      hgm_removeTagged: false,
      hgm_tags: [],
      hgm_removeBanned: false,
      giveawayColumns: ['ged', 'endTime', 'winners', 'startTime', 'touhou', 'inviteOnly', 'whitelist', 'group', 'regionRestricted', 'level'],
      giveawayPanel: ['ttec', 'gwc', 'gwr', 'gptw', 'gp', 'elgb', 'sgTools'],
      giveawayColumns_gv: ['sgTools', 'ged', 'time', 'touhou', 'inviteOnly', 'whitelist', 'group', 'regionRestricted', 'level'],
      giveawayPanel_gv: ['ttec', 'gwc', 'gwr', 'gptw', 'gp', 'elgb'],
      enableByDefault_sg: false,
      enableByDefault_st: false,
      cf_m_sg: true,
      collapseSections_sg: false,
      collapseSections_st: false,
      df_m_sg: true,
      elgb_d_sg: true,
      gb_ue_sg: true,
      gc_g_s_sg: false,
      ge_o_sg: false,
      gf_m_sg: true,
      gwc_a_b_sg: false,
      gwr_a_b_sg: false,
      hpg_sg: false,
      pm_a: false,
      radb_sg: true,
      adtd_sg: false,
      activeDiscussions_displayed: 7,
      showChangelog_sg: true,
      showChangelog_st: true,
      vai_i_sg: false,
      avatar: '',
      steamId: '',
      steamApiKey: '',
      username_sg: '',
      username_st: '',
      registrationDate_sg: 0,
      adots_index: 0,
      ags_type: '',
      ags_maxDate: '',
      ags_minDate: '',
      ags_maxScore: '',
      ags_minScore: '',
      ags_maxLevel: '',
      ags_minLevel: '',
      ags_maxEntries: '',
      ags_minEntries: '',
      ags_maxCopies: '',
      ags_minCopies: '',
      ags_maxPoints: '',
      ags_minPoints: '',
      ags_regionRestricted: false,
      ags_dlc: false,
      ags_app: false,
      ags_sub: false,
      ap_index: 0,
      plt_index: 0,
      as_searchAppId: false,
      autoBackup_days: 1,
      autoBackup_index: 0,
      autoSyncGroups: 0,
      autoSyncWhitelist: 0,
      autoSyncBlacklist: 0,
      autoSyncSteamFriends: 0,
      autoSyncHiddenGames: 0,
      autoSyncGames: 0,
      autoSyncFollowedGames: 0,
      autoSyncWonGames: 0,
      autoSyncReducedCvGames: 0,
      autoSyncNoCvGames: 0,
      autoSyncHltbTimes: 0,
      autoSyncDelistedGames: 0,
      autoSyncGiveaways: 0,
      autoSyncWonGiveaways: 0,
      calculateDelete: true,
      calculateExport: true,
      calculateImport: true,
      cf_enable: true,
      cf_preset: null,
      cfh_pasteFormatting: true,
      cfh_img_choice: 1,
      cfh_img_remember: false,
      cleanDiscussions: true,
      cleanEntries: true,
      cleanGiveaways: true,
      cleanSgCommentHistory: true,
      cleanStCommentHistory: true,
      cleanTickets: true,
      cleanTrades: true,
      cleanDuplicates: true,
      cleanDiscussions_days: 30,
      cleanEntries_days: 30,
      cleanGiveaways_days: 30,
      cleanSgCommentHistory_days: 30,
      cleanStCommentHistory_days: 30,
      cleanTickets_days: 30,
      cleanTrades_days: 30,
      df_enable: true,
      df_enableCreated: false,
      df_preset: null,
      df_presetCreated: null,
      tf_enable: true,
      tf_enableCreated: false,
      tf_preset: null,
      tf_presetCreated: null,
      gmf_enable: true,
      gmf_preset: null,
      gpf_enable: true,
      gpf_preset: null,
      ds_auto: false,
      ds_option: 'sortIndex_asc',
      elgb_filters: `.|(bestof|(g(ood)?)?)(l(uck)?)?(h(ave)?)?(f(un)?)?|enjoy|(h(umble)?)?(b(undle)?)?(g(ift)?)?(l(ink)?)?`,
      exportBackup: true,
      exportBackupIndex: 0,
      gas_auto: false,
      gas_option: 'sortIndex_asc',
      gas_autoWishlist: false,
      gas_optionWishlist: 'sortIndex_asc',
      gas_autoRecommended: false,
      gas_optionRecommended: 'sortIndex_asc',
      gas_autoGroup: false,
      gas_optionGroup: 'sortIndex_asc',
      gas_autoNew: false,
      gas_optionNew: 'sortIndex_asc',
      gas_autoEntered: false,
      gas_optionEntered: 'sortIndex_asc',
      gas_autoUser: false,
      gas_optionUser: 'sortIndex_asc',
      gas_autoGroups: false,
      gas_optionGroups: 'sortIndex_asc',
      gas_autoPopup: false,
      gas_optionPopup: 'sortIndex_asc',
      gb_hours: 1,
      gc_categories: ['gc_gi', 'gc_r', 'gc_hltb', 'gc_ocv', 'gc_fcv', 'gc_rcv', 'gc_ncv', 'gc_h', 'gc_i', 'gc_o', 'gc_w', 'gc_f', 'gc_pw', 'gc_a', 'gc_bd', 'gc_bvg', 'gc_sp', 'gc_mp', 'gc_sc', 'gc_tc', 'gc_l', 'gc_m', 'gc_ea', 'gc_lg', 'gc_rm', 'gc_dlc', 'gc_p', 'gc_rd', 'gc_g'],
      gc_categories_gv: ['gc_gi', 'gc_r', 'gc_hltb', 'gc_ocv', 'gc_fcv', 'gc_rcv', 'gc_ncv', 'gc_h', 'gc_i', 'gc_o', 'gc_w', 'gc_f', 'gc_pw', 'gc_a', 'gc_bd', 'gc_bvg', 'gc_sp', 'gc_mp', 'gc_sc', 'gc_tc', 'gc_l', 'gc_m', 'gc_ea', 'gc_lg', 'gc_rm', 'gc_dlc', 'gc_p', 'gc_rd', 'gc_g'],
      gc_o_altAccounts: [],
      gc_g_colors: [],
      gc_g_filters: '',
      gc_r_colors: [{
        bgColor: '#a34c25',
        color: '#ffffff',
        icon: 'thumbs-down',
        lower: 0,
        upper: 39
      }, {
        bgColor: '#b9a074',
        color: '#ffffff',
        icon: 'minus-circle',
        lower: 40,
        upper: 69
      }, {
        bgColor: '#66c0f4',
        color: '#ffffff',
        icon: 'thumbs-up',
        lower: 70,
        upper: 100
      }],
      gc_ocvIcon: 'history',
      gc_fcvIcon: 'calendar',
      gc_rcvIcon: 'calendar-minus-o',
      gc_ncvIcon: 'calendar-times-o',
      gc_hIcon: 'eye-slash',
      gc_iIcon: 'ban',
      gc_oIcon: 'folder',
      gc_wIcon: 'heart',
      gc_fIcon: 'plus',
      gc_pwIcon: 'gift',
      gc_aIcon: 'trophy',
      gc_bdIcon: 'times',
      gc_bvgIcon: 'retweet',
      gc_spIcon: 'user',
      gc_mpIcon: 'users',
      gc_scIcon: 'cloud',
      gc_tcIcon: 'clone',
      gc_lIcon: 'linux',
      gc_mIcon: 'apple',
      gc_eaIcon: 'unlock',
      gc_lgIcon: 'spinner',
      gc_rmIcon: 'trash',
      gc_dlcIcon: 'download',
      gc_pIcon: 'suitcase',
      gc_rdIcon: 'clock-o',
      gc_hltbIcon: 'gamepad',
      gc_ocvLabel: 'Was ',
      gc_fcvLabel: 'Full CV',
      gc_rcvLabel: 'Reduced CV',
      gc_ncvLabel: 'No CV',
      gc_hLabel: 'Hidden',
      gc_iLabel: 'Ignored',
      gc_oLabel: 'Owned',
      gc_wLabel: 'Wishlisted',
      gc_fLabel: 'Followed',
      gc_pwLabel: 'Previously Won',
      gc_aLabel: 'Achievements',
      gc_bdLabel: 'Banned',
      gc_bvgLabel: 'Barter.vg',
      gc_spLabel: 'Singleplayer',
      gc_mpLabel: 'Multiplayer',
      gc_scLabel: 'Steam Cloud',
      gc_tcLabel: 'Trading Cards',
      gc_lLabel: 'Linux',
      gc_mLabel: 'Mac',
      gc_eaLabel: 'Early Access',
      gc_lgLabel: 'Learning',
      gc_rmLabel: 'Removed',
      gc_dlcLabel: 'DLC',
      gc_pLabel: 'Package',
      gc_rdLabel: `Mon DD, YYYY`,
      gc_hltbLabel: 'HowLongToBeat: ',
      gc_ocvUrl: 'https://www.steamgifts.com/bundle-games/search?q=%game-search-name%',
      gc_fcvUrl: 'https://www.steamgifts.com/bundle-games/search?q=%game-search-name%',
      gc_rcvUrl: 'https://www.steamgifts.com/bundle-games/search?q=%game-search-name%',
      gc_ncvUrl: 'https://www.steamgifts.com/bundle-games/search?q=%game-search-name%',
      gc_hUrl: 'https://www.steamgifts.com/account/settings/giveaways/filters/search?q=%game-search-name%',
      gc_iUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_oUrl: 'https://www.steamgifts.com/account/steam/games/search?q=%game-search-name%',
      gc_o_aUrl: 'https://steamcommunity.com/profiles/%steam-id%/games',
      gc_wUrl: 'https://www.steamgifts.com/account/steam/wishlist/search?q=%game-search-name%',
      gc_fUrl: 'https://steamcommunity.com/my/followedgames/',
      gc_pwUrl: 'https://www.steamgifts.com/user/%username%/giveaways/won/search?q=%game-search-name%',
      gc_giUrl: 'https://www.steamgifts.com/user/%username%',
      gc_rUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_aUrl: 'https://steamcommunity.com/stats/%game-id%/achievements',
      gc_bdUrl: 'https://steamdb.info/app/%game-id%',
      gc_bvgUrl: 'https://barter.vg/steam/%game-type%/%game-id%',
      gc_spUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_mpUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_scUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_tcUrl: 'https://www.steamcardexchange.net/index.php?gamepage-%game-type%id-%game-id%',
      gc_lUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_mUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_eaUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_lgUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_rmUrl: 'https://steamdb.info/%game-type%/%game-id%',
      gc_dlcUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_pUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_rdUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_gUrl: 'https://store.steampowered.com/%game-type%/%game-id%',
      gc_hltbUrl: 'https://howlongtobeat.com/game.php?id=%hltb-id%',
      gc_h_color: '#ffffff',
      gc_hltb_color: '#ffffff',
      gc_gi_color: '#ffffff',
      gc_ocv_fcv_color: '#ffffff',
      gc_ocv_rcv_color: '#ffffff',
      gc_fcv_color: '#ffffff',
      gc_rcv_color: '#ffffff',
      gc_ncv_color: '#ffffff',
      gc_w_color: '#ffffff',
      gc_f_color: '#ffffff',
      gc_o_color: '#ffffff',
      gc_pw_color: '#ffffff',
      gc_i_color: '#ffffff',
      gc_lg_color: '#ffffff',
      gc_rm_color: '#ffffff',
      gc_ea_color: '#ffffff',
      gc_tc_color: '#ffffff',
      gc_a_color: '#ffffff',
      gc_bd_color: '#ffffff',
      gc_bvg_color: '#ffffff',
      gc_sp_color: '#ffffff',
      gc_mp_color: '#ffffff',
      gc_sc_color: '#ffffff',
      gc_l_color: '#ffffff',
      gc_m_color: '#ffffff',
      gc_dlc_color: '#ffffff',
      gc_p_color: '#ffffff',
      gc_rd_color: '#ffffff',
      gc_g_color: '#ffffff',
      gc_h_bgColor: '#e74c3c',
      gc_hltb_bgColor: '#328ed6',
      gc_gi_bgColor: '#555555',
      gc_ocv_fcv_bgColor: '#641e16',
      gc_ocv_rcv_bgColor: '#641e16',
      gc_fcv_bgColor: '#641e16',
      gc_rcv_bgColor: '#641e16',
      gc_ncv_bgColor: '#641e16',
      gc_o_bgColor: '#16a085',
      gc_o_t_bgColor: `rgba(22, 160, 133, 0.2)`,
      gc_o_a_t_bgColor: `rgba(100, 30, 22, 0.2)`,
      gc_w_bgColor: '#3498db',
      gc_w_t_bgColor: `rgba(52, 152, 219, 0.2)`,
      gc_f_bgColor: '#2084C7',
      gc_pw_bgColor: '#16a085',
      gc_i_bgColor: '#e74c3c',
      gc_i_t_bgColor: `rgba(231, 76, 60, 0.2)`,
      gc_lg_bgColor: '#555555',
      gc_rm_bgColor: '#e74c3c',
      gc_ea_bgColor: '#3498db',
      gc_tc_bgColor: '#2ecc71',
      gc_a_bgColor: '#145a32',
      gc_bd_bgColor: '#e74c3c',
      gc_bvg_bgColor: '#555555',
      gc_sp_bgColor: '#5eb2a1',
      gc_mp_bgColor: '#0e6251',
      gc_sc_bgColor: '#154360',
      gc_l_bgColor: '#f39c12',
      gc_m_bgColor: '#d35400',
      gc_dlc_bgColor: '#8e44ad',
      gc_p_bgColor: '#8e44ad',
      gc_p_t_bgColor: `rgba(142, 68, 173, 0.2)`,
      gc_rd_bgColor: '#7f8c8d',
      gc_g_bgColor: '#7f8c8d',
      gcl_index: 0,
      ged: true,
      gf_enable: true,
      gf_enableWishlist: true,
      gf_enableRecommended: true,
      gf_enableNew: true,
      gf_enableGroup: true,
      gf_enableCreated: true,
      gf_enableEntered: true,
      gf_enableWon: true,
      gf_enableGroups: true,
      gf_enableUser: true,
      gf_enableGb: true,
      gf_enableGe: true,
      gf_enableGed: true,
      cf_enableElgb: true,
      gf_preset: null,
      gf_presetWishlist: null,
      gf_presetRecommended: null,
      gf_presetNew: null,
      gf_presetGroup: null,
      gf_presetCreated: null,
      gf_presetEntered: null,
      gf_presetWon: null,
      gf_presetGroups: null,
      gf_presetUser: null,
      gf_presetGb: null,
      gf_presetGe: null,
      gf_presetGed: null,
      cf_presetElgb: null,
      ggl_index: 0,
      dt_colors: {},
      gpt_colors: {},
      gt_colors: {},
      gts_preciseStart: false,
      gts_preciseEnd: false,
      gts_preciseStartDate: false,
      gts_preciseEndDate: false,
      gv_spacing: 0,
      gch_colors: [],
      glh_colors: [],
      gwc_colors: [],
      gwr_colors: [],
      gptw_colors: [],
      geth_colors: [],
      hr_minutes: 1,
      hr_w_hours: 24,
      lastBackup: 0,
      lastSyncGroups: 0,
      lastSyncWhitelist: 0,
      lastPageWhitelist: 0,
      lastSyncBlacklist: 0,
      lastPageBlacklist: 0,
      lastSyncSteamFriends: 0,
      lastSyncHiddenGames: 0,
      lastPageHiddenGames: 0,
      lastSyncGames: 0,
      lastSyncFollowedGames: 0,
      lastSyncWonGames: 0,
      lastSyncReducedCvGames: 0,
      lastSyncNoCvGames: 0,
      lastSyncHltbTimes: 0,
      lastSyncDelistedGames: 0,
      lastSyncGiveaways: 0,
      lastSyncWonGiveaways: 0,
      leftMainPageHeadingIds: ['wbsDesc', 'wbsAsc', 'wbm', 'wbc', 'usc', 'ugs', 'uf_s_s', 'tf_s_s', 'tf', 'tb', 'sks', 'rbp', 'namwc', 'mpp', 'hgm', 'gv', 'gts', 'glwc', 'gf_s_s', 'gf', 'ge', 'gas', 'ds', 'df_s_s', 'df', 'ctUnread', 'ctRead', 'ctGo', 'cs', 'cf', 'cec', 'as', 'aic'],
      leftButtonIds: [],
      mgc_createTrain: true,
      mgc_bumpLast: true,
      mgc_groupKeys: false,
      mgc_groupAllKeys: false,
      mgc_reversePosition: false,
      mgc_removeLinks: true,
      namwc_checkNotActivated: false,
      namwc_checkMultiple: false,
      npth_previousKey: 'ArrowLeft',
      npth_nextKey: 'ArrowRight',
      nrf_searchMultiple: false,
      rightMainPageHeadingIds: ['esResume', 'esPause', 'esContinuous', 'esNext', 'esRefresh', 'esRefreshAll', 'stbb', 'sttb', 'mm'],
      rightButtonIds: [],
      sal_index: 2,
      sk_closePopups: 'escape',
      sk_searchBox: 'ctrlKey + q',
      sk_firstPage: 'ctrlKey + arrowup',
      sk_previousPage: 'ctrlKey + arrowleft',
      sk_nextPage: 'ctrlKey + arrowright',
      sk_lastPage: 'ctrlKey + arrowdown',
      sk_toggleFilters: 'altKey + q',
      sk_hideGame: 'altKey + g',
      sk_hideGiveaway: 'altKey + h',
      sk_giveawayEntry: 'ctrlKey + enter',
      sk_creator: 'altKey + c',
      sk_replyBox: 'ctrlKey +  ',
      sk_replyUser: 'altKey + u',
      sk_submitReply: 'ctrlKey + enter',
      sks_exportKeys: false,
      sks_searchCurrent: false,
      sks_limitDate: false,
      sks_limitPages: false,
      sks_minDate: '',
      sks_maxDate: '',
      sks_minPage: '',
      sks_maxPage: '',
      stbb_index: 0,
      sttb_index: 0,
      syncGroups: false,
      syncWhitelist: false,
      syncBlacklist: false,
      syncSteamFriends: false,
      syncHiddenGames: false,
      syncGames: false,
      syncFollowedGames: false,
      syncWonGames: false,
      syncReducedCvGames: false,
      syncNoCvGames: false,
      syncHltbTimes: false,
      syncDelistedGames: false,
      syncGiveaways: false,
      syncWonGiveaways: false,
      ugd_getPlaytime: true,
      ugd_getAchievements: false,
      ugd_clearCache: false,
      ugs_checkRules: false,
      ugs_checkWhitelist: false,
      ugs_checkBlacklist: false,
      ugs_checkMember: false,
      ugs_checkDifference: false,
      ugs_difference: 0,
      ut_colors: {},
      wbc_hb_sg: false,
      usc_checkSingle: false,
      usc_checkAll: false,
      usc_checkPages: false,
      usc_minPage: '',
      usc_maxPage: '',
      usc_checkSelected: false,
      wbc_checkSingle: false,
      wbc_checkBlacklist: false,
      wbc_checkAll: false,
      wbc_checkPages: false,
      wbc_minPage: '',
      wbc_maxPage: '',
      wbc_returnWhitelists: false,
      wbc_returnBlacklists: false,
      wbc_checkSelected: false,
      wbc_checkFromList: false,
      wbc_userList: [],
      wbc_pages: 0,
      wbc_skipUsers: false,
      wbm_clearTags: false,
      wbm_useCache: false,
      wbm_exportSteamIds: false,
      wbm_tags: [],
      wbc_checkNew: false,
      wbc_clearCache: false,
      wbh_w_color: '#ffffff',
      wbh_w_bgColor: '#228b22',
      wbh_b_color: '#ffffff',
      wbh_b_bgColor: '#ff4500'
    };
    this.oldValues = {
      df_puzzles_sg: 'df_puzzlesEvents_sg',
      gc_o_a_sg: () => this.settings.gc_o_altAccounts && this.settings.gc_o_altAccounts.length > 0 ? 1 : 0,
      idb_sg: 'dh_sg',
      idb_t_sg: 'dh_t_sg',
      cl_gc_index: () => (this.settings.gcl_index || 0) + 1,
      cl_gi_index: () => (this.settings.ap_index || 0) + 1,
      cl_ui_index: () => (this.settings.ap_index || 0) + 1,
      cl_sg: () => this.settings.ap_sg || this.settings.gcl_sg || this.settings.ggl_sg,
      cl_gc_sg: 'gcl_sg',
      cl_gi_sg: 'ggl_sg',
      cl_ui_sg: 'ap_sg',
      gs_type_sg: 'gs_t_sg',
      uf_gp_sg: 'uf_p_sg',
      uf_dp_sg: 'uf_p_sg',
      makeSectionsCollapsible_sg: 'makeSecionsCollapsible_sg',
      makeSectionsCollapsible_st: 'makeSecionsCollapsible_st',
      collapse_general: 'collapseSections_sg',
      collapse_giveaways: 'collapseSections_sg',
      collapse_discussions: 'collapseSections_sg',
      collapse_trades: 'collapseSections_sg',
      collapse_comments: 'collapseSections_sg',
      collapse_users: 'collapseSections_sg',
      collapse_groups: 'collapseSections_sg',
      collapse_games: 'collapseSections_sg',
      collapse_others: 'collapseSections_sg',
      collapse_element_ordering: 'collapseSections_sg',
      collapse_steam_api_key: 'collapseSections_sg',
      hgm_sg: 'hgr_sg',
      hgm_removeOwned: 'hgr_removeOwned',
      hgm_removeWishlisted: 'hgr_removeWishlisted',
      mm_useRegExp: 'gm_useRegExp',
      mm_enableGiveaways: 'gm_enable',
      mm_enableDiscussions: 'gm_enable',
      mm_enableUsers: 'gm_enable',
      mm_enableGames: 'gm_enable',
      pl_sg: 'wbl_sg',
      pl_w_sg: 'wbl_sg',
      pl_b_sg: 'wbl_sg',
      gdttt_vg_sg: 'gdttt_v_sg',
      gdttt_vd_sg: 'gdttt_v_sg',
      gdttt_vt_sg: 'gdttt_v_sg',
      gdttt_vts_st: 'gdttt_v_st',
      wbc_hb_sg: 'wbc_b_sg',
      wbc_checkBlacklist: 'wbc_checkWhitelist'
    };
  }
  init() {
    const settings = _Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.settings;
    const enableByDefaultSetting = settings[`enableByDefault_${_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.name}`];
    this.enableByDefault = !!(typeof enableByDefaultSetting === 'object' ? enableByDefaultSetting.enabled : enableByDefaultSetting);
    for (const key of Object.keys(settings)) {
      const match = key.match(/(.+?)_(sg|st|sgt)$/);
      if (match) {
        if (match[2] === _Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.name) {
          this.settings[key] = this.settings[match[1]] = settings[key];
        }
      } else {
        this.settings[key] = settings[key];
      }
    }
    for (const key of Object.keys(this.oldValues).concat(Object.keys(this.defaultValues))) {
      const localKey = key.replace(new RegExp(`(.+?)_${_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.name}$`), '$1');
      if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(this.settings[localKey])) {
        this.settings[key] = this.settings[localKey] = this.getSetting(key);
      }
    }
    for (const id of Object.keys(_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.featuresById)) {
      const feature = _Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.featuresById[id];
      _Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.dismissFeature(feature, id);
      if (feature.alias) {
        this.aliases[id] = feature.alias;
        this.aliases[`${id}_sg`] = `${feature.alias}_sg`;
        this.aliases[`${id}_st`] = `${feature.alias}_st`;
      }
      if (feature.sg) {
        const result = this.getFeatureSetting(feature, id, 'sg');
        this.settings[`${id}_sg`] = result.current;
        this.fullSettings[`${id}_sg`] = result.full;
      }
      if (feature.st) {
        const result = this.getFeatureSetting(feature, id, 'st');
        this.settings[`${id}_st`] = result.current;
        this.fullSettings[`${id}_st`] = result.full;
      }
      this.settings[id] = this.settings[`${id}_${_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.name}`];
      this.fullSettings[id] = this.fullSettings[`${id}_${_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.name}`];
    }
  }
  set(key, value) {
    var _this$aliases$key;
    this.settings[(_this$aliases$key = this.aliases[key]) !== null && _this$aliases$key !== void 0 ? _this$aliases$key : key] = value;
  }
  get(key) {
    var _this$aliases$key2;
    return this.settings[(_this$aliases$key2 = this.aliases[key]) !== null && _this$aliases$key2 !== void 0 ? _this$aliases$key2 : key];
  }
  setFull(key, value) {
    var _this$aliases$key3;
    this.fullSettings[(_this$aliases$key3 = this.aliases[key]) !== null && _this$aliases$key3 !== void 0 ? _this$aliases$key3 : key] = value;
  }
  getFull(key) {
    var _this$aliases$key4;
    return this.fullSettings[(_this$aliases$key4 = this.aliases[key]) !== null && _this$aliases$key4 !== void 0 ? _this$aliases$key4 : key];
  }
  getSetting(id) {
    let value = _Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.settings[id];
    if (typeof value === 'undefined') {
      const oldId = this.oldValues[id];
      if (typeof oldId === 'function') {
        value = oldId();
      } else if (typeof oldId !== 'undefined') {
        value = _Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.settings[oldId];
      }
      if (typeof value === 'undefined') {
        let defaultValue = this.defaultValues[id];
        if (typeof defaultValue === 'undefined') {
          defaultValue = this.enableByDefault || 0;
        }
        value = defaultValue;
      } else if (id.match(/^(wbc_checkBlacklist|wbc_hb_sg)$/)) {
        value = !value;
      }
    }
    return value;
  }
  getFeaturePath(feature, id, namespace) {
    if (!feature) {
      feature = _Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.featuresById[id];
    }
    const key = `${id}_${namespace}`;
    let setting = _Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.settings[key];
    if (typeof setting === 'undefined' || !setting.include || !Array.isArray(setting.include)) {
      setting = {
        enabled: this.getSetting(key) ? 1 : 0,
        include: [],
        exclude: [],
        new: typeof setting === 'undefined'
      };
      if (feature[namespace].include) {
        setting.include = feature[namespace].include;
        if (feature[namespace].exclude) {
          setting.exclude = feature[namespace].exclude;
        }
      } else {
        setting.include = [{
          enabled: setting.enabled,
          pattern: '.*'
        }];
      }
      if (setting.new && setting.enabled) {
        setting.include[0].enabled = 1;
      }
    }
    return setting;
  }
  getFeatureSetting(feature, id, namespace, path) {
    let setting = null;
    let value = false;
    if (feature[namespace]) {
      setting = this.getFeaturePath(feature, id, namespace);
      if (setting.enabled) {
        if (!path) {
          path = `${window.location.pathname}${window.location.search}`;
        }
        let i = setting.include.length - 1;
        while (i > -1 && (!setting.include[i].enabled || !path.match(new RegExp(setting.include[i].pattern)))) i--;
        if (i > -1) {
          value = setting.include[i] || true;
        }
        i = setting.exclude.length - 1;
        while (i > -1 && (!setting.exclude[i].enabled || !path.match(new RegExp(setting.exclude[i].pattern)))) i--;
        if (i > -1) {
          value = false;
        }
      }
    }
    return {
      full: setting,
      current: value
    };
  }
}
const Settings = new _Settings();


/***/ }),
/* 98 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(32);
var globalThis = __webpack_require__(14);
var uncurryThis = __webpack_require__(6);
var isForced = __webpack_require__(76);
var inheritIfRequired = __webpack_require__(99);
var createNonEnumerableProperty = __webpack_require__(62);
var create = __webpack_require__(27);
var getOwnPropertyNames = __webpack_require__(74).f;
var isPrototypeOf = __webpack_require__(42);
var isRegExp = __webpack_require__(100);
var toString = __webpack_require__(101);
var getRegExpFlags = __webpack_require__(104);
var stickyHelpers = __webpack_require__(107);
var proxyAccessor = __webpack_require__(108);
var defineBuiltIn = __webpack_require__(68);
var fails = __webpack_require__(8);
var hasOwn = __webpack_require__(20);
var enforceInternalState = __webpack_require__(60).enforce;
var setSpecies = __webpack_require__(109);
var wellKnownSymbol = __webpack_require__(13);
var UNSUPPORTED_DOT_ALL = __webpack_require__(111);
var UNSUPPORTED_NCG = __webpack_require__(112);

var MATCH = wellKnownSymbol('match');
var NativeRegExp = globalThis.RegExp;
var RegExpPrototype = NativeRegExp.prototype;
var SyntaxError = globalThis.SyntaxError;
var exec = uncurryThis(RegExpPrototype.exec);
var charAt = uncurryThis(''.charAt);
var replace = uncurryThis(''.replace);
var stringIndexOf = uncurryThis(''.indexOf);
var stringSlice = uncurryThis(''.slice);
// TODO: Use only proper RegExpIdentifierName
var IS_NCG = /^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/;
var re1 = /a/g;
var re2 = /a/g;

// "new" should create a new object, old webkit bug
var CORRECT_NEW = new NativeRegExp(re1) !== re1;

var MISSED_STICKY = stickyHelpers.MISSED_STICKY;
var UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;

var BASE_FORCED = DESCRIPTORS &&
  (!CORRECT_NEW || MISSED_STICKY || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG || fails(function () {
    re2[MATCH] = false;
    // RegExp constructor can alter flags and IsRegExp works correct with @@match
    // eslint-disable-next-line sonarjs/inconsistent-function-call -- required for testing
    return NativeRegExp(re1) !== re1 || NativeRegExp(re2) === re2 || String(NativeRegExp(re1, 'i')) !== '/a/i';
  }));

var handleDotAll = function (string) {
  var length = string.length;
  var index = 0;
  var result = '';
  var brackets = false;
  var chr;
  for (; index < length; index++) {
    chr = charAt(string, index);
    if (chr === '\\') {
      result += chr + charAt(string, ++index);
      continue;
    }
    if (!brackets && chr === '.') {
      result += '[\\s\\S]';
    } else {
      if (chr === '[') {
        brackets = true;
      } else if (chr === ']') {
        brackets = false;
      } result += chr;
    }
  } return result;
};

var handleNCG = function (string) {
  var length = string.length;
  var index = 0;
  var result = '';
  var named = [];
  var names = create(null);
  var brackets = false;
  var ncg = false;
  var groupid = 0;
  var groupname = '';
  var chr;
  for (; index < length; index++) {
    chr = charAt(string, index);
    if (chr === '\\') {
      chr += charAt(string, ++index);
    } else if (chr === ']') {
      brackets = false;
    } else if (!brackets) switch (true) {
      case chr === '[':
        brackets = true;
        break;
      case chr === '(':
        result += chr;
        // ignore non-capturing groups
        if (stringSlice(string, index + 1, index + 3) === '?:') {
          continue;
        }
        if (exec(IS_NCG, stringSlice(string, index + 1))) {
          index += 2;
          ncg = true;
        }
        groupid++;
        continue;
      case chr === '>' && ncg:
        if (groupname === '' || hasOwn(names, groupname)) {
          throw new SyntaxError('Invalid capture group name');
        }
        names[groupname] = true;
        named[named.length] = [groupname, groupid];
        ncg = false;
        groupname = '';
        continue;
    }
    if (ncg) groupname += chr;
    else result += chr;
  } return [result, named];
};

// `RegExp` constructor
// https://tc39.es/ecma262/#sec-regexp-constructor
if (isForced('RegExp', BASE_FORCED)) {
  var RegExpWrapper = function RegExp(pattern, flags) {
    var thisIsRegExp = isPrototypeOf(RegExpPrototype, this);
    var patternIsRegExp = isRegExp(pattern);
    var flagsAreUndefined = flags === undefined;
    var groups = [];
    var rawPattern = pattern;
    var rawFlags, dotAll, sticky, handled, result, state;

    if (!thisIsRegExp && patternIsRegExp && flagsAreUndefined && pattern.constructor === RegExpWrapper) {
      return pattern;
    }

    if (patternIsRegExp || isPrototypeOf(RegExpPrototype, pattern)) {
      pattern = pattern.source;
      if (flagsAreUndefined) flags = getRegExpFlags(rawPattern);
    }

    pattern = pattern === undefined ? '' : toString(pattern);
    flags = flags === undefined ? '' : toString(flags);
    rawPattern = pattern;

    if (UNSUPPORTED_DOT_ALL && 'dotAll' in re1) {
      dotAll = !!flags && stringIndexOf(flags, 's') > -1;
      if (dotAll) flags = replace(flags, /s/g, '');
    }

    rawFlags = flags;

    if (MISSED_STICKY && 'sticky' in re1) {
      sticky = !!flags && stringIndexOf(flags, 'y') > -1;
      if (sticky && UNSUPPORTED_Y) flags = replace(flags, /y/g, '');
    }

    if (UNSUPPORTED_NCG) {
      handled = handleNCG(pattern);
      pattern = handled[0];
      groups = handled[1];
    }

    result = inheritIfRequired(NativeRegExp(pattern, flags), thisIsRegExp ? this : RegExpPrototype, RegExpWrapper);

    if (dotAll || sticky || groups.length) {
      state = enforceInternalState(result);
      if (dotAll) {
        state.dotAll = true;
        state.raw = RegExpWrapper(handleDotAll(pattern), rawFlags);
      }
      if (sticky) state.sticky = true;
      if (groups.length) state.groups = groups;
    }

    if (pattern !== rawPattern) try {
      // fails in old engines, but we have no alternatives for unsupported regex syntax
      createNonEnumerableProperty(result, 'source', rawPattern === '' ? '(?:)' : rawPattern);
    } catch (error) { /* empty */ }

    return result;
  };

  for (var keys = getOwnPropertyNames(NativeRegExp), index = 0; keys.length > index;) {
    proxyAccessor(RegExpWrapper, NativeRegExp, keys[index++]);
  }

  RegExpPrototype.constructor = RegExpWrapper;
  RegExpWrapper.prototype = RegExpPrototype;
  defineBuiltIn(globalThis, 'RegExp', RegExpWrapper, { constructor: true });
}

// https://tc39.es/ecma262/#sec-get-regexp-@@species
setSpecies('RegExp');


/***/ }),
/* 99 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isCallable = __webpack_require__(30);
var isObject = __webpack_require__(29);
var setPrototypeOf = __webpack_require__(82);

// makes subclassing work correct for wrapped built-ins
module.exports = function ($this, dummy, Wrapper) {
  var NewTarget, NewTargetPrototype;
  if (
    // it can work only with native `setPrototypeOf`
    setPrototypeOf &&
    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this
    isCallable(NewTarget = dummy.constructor) &&
    NewTarget !== Wrapper &&
    isObject(NewTargetPrototype = NewTarget.prototype) &&
    NewTargetPrototype !== Wrapper.prototype
  ) setPrototypeOf($this, NewTargetPrototype);
  return $this;
};


/***/ }),
/* 100 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isObject = __webpack_require__(29);
var classof = __webpack_require__(9);
var wellKnownSymbol = __webpack_require__(13);

var MATCH = wellKnownSymbol('match');

// `IsRegExp` abstract operation
// https://tc39.es/ecma262/#sec-isregexp
module.exports = function (it) {
  var isRegExp;
  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) === 'RegExp');
};


/***/ }),
/* 101 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var classof = __webpack_require__(102);

var $String = String;

module.exports = function (argument) {
  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');
  return $String(argument);
};


/***/ }),
/* 102 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var TO_STRING_TAG_SUPPORT = __webpack_require__(103);
var isCallable = __webpack_require__(30);
var classofRaw = __webpack_require__(9);
var wellKnownSymbol = __webpack_require__(13);

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var $Object = Object;

// ES3 wrong here
var CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (error) { /* empty */ }
};

// getting tag from ES6+ `Object.prototype.toString`
module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {
  var O, tag, result;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag
    // builtinTag case
    : CORRECT_ARGUMENTS ? classofRaw(O)
    // ES3 arguments fallback
    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;
};


/***/ }),
/* 103 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var wellKnownSymbol = __webpack_require__(13);

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};
// eslint-disable-next-line unicorn/no-immediate-mutation -- ES3 syntax limitation
test[TO_STRING_TAG] = 'z';

module.exports = String(test) === '[object z]';


/***/ }),
/* 104 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__(39);
var hasOwn = __webpack_require__(20);
var isPrototypeOf = __webpack_require__(42);
var regExpFlagsDetection = __webpack_require__(105);
var regExpFlagsGetterImplementation = __webpack_require__(106);

var RegExpPrototype = RegExp.prototype;

module.exports = regExpFlagsDetection.correct ? function (it) {
  return it.flags;
} : function (it) {
  return (!regExpFlagsDetection.correct && isPrototypeOf(RegExpPrototype, it) && !hasOwn(it, 'flags'))
    ? call(regExpFlagsGetterImplementation, it)
    : it.flags;
};


/***/ }),
/* 105 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);
var fails = __webpack_require__(8);

// babel-minify and Closure Compiler transpiles RegExp('.', 'd') -> /./d and it causes SyntaxError
var RegExp = globalThis.RegExp;

var FLAGS_GETTER_IS_CORRECT = !fails(function () {
  var INDICES_SUPPORT = true;
  try {
    RegExp('.', 'd');
  } catch (error) {
    INDICES_SUPPORT = false;
  }

  var O = {};
  // modern V8 bug
  var calls = '';
  var expected = INDICES_SUPPORT ? 'dgimsy' : 'gimsy';

  var addGetter = function (key, chr) {
    // eslint-disable-next-line es/no-object-defineproperty -- safe
    Object.defineProperty(O, key, { get: function () {
      calls += chr;
      return true;
    } });
  };

  var pairs = {
    dotAll: 's',
    global: 'g',
    ignoreCase: 'i',
    multiline: 'm',
    sticky: 'y'
  };

  if (INDICES_SUPPORT) pairs.hasIndices = 'd';

  for (var key in pairs) addGetter(key, pairs[key]);

  // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
  var result = Object.getOwnPropertyDescriptor(RegExp.prototype, 'flags').get.call(O);

  return result !== expected || calls !== expected;
});

module.exports = { correct: FLAGS_GETTER_IS_CORRECT };


/***/ }),
/* 106 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__(28);

// `RegExp.prototype.flags` getter implementation
// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags
module.exports = function () {
  var that = anObject(this);
  var result = '';
  if (that.hasIndices) result += 'd';
  if (that.global) result += 'g';
  if (that.ignoreCase) result += 'i';
  if (that.multiline) result += 'm';
  if (that.dotAll) result += 's';
  if (that.unicode) result += 'u';
  if (that.unicodeSets) result += 'v';
  if (that.sticky) result += 'y';
  return result;
};


/***/ }),
/* 107 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(8);
var globalThis = __webpack_require__(14);

// babel-minify and Closure Compiler transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError
var $RegExp = globalThis.RegExp;

var UNSUPPORTED_Y = fails(function () {
  var re = $RegExp('a', 'y');
  re.lastIndex = 2;
  return re.exec('abcd') !== null;
});

// UC Browser bug
// https://github.com/zloirock/core-js/issues/1008
var MISSED_STICKY = UNSUPPORTED_Y || fails(function () {
  return !$RegExp('a', 'y').sticky;
});

var BROKEN_CARET = UNSUPPORTED_Y || fails(function () {
  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687
  var re = $RegExp('^r', 'gy');
  re.lastIndex = 2;
  return re.exec('str') !== null;
});

module.exports = {
  BROKEN_CARET: BROKEN_CARET,
  MISSED_STICKY: MISSED_STICKY,
  UNSUPPORTED_Y: UNSUPPORTED_Y
};


/***/ }),
/* 108 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var defineProperty = __webpack_require__(34).f;

module.exports = function (Target, Source, key) {
  key in Target || defineProperty(Target, key, {
    configurable: true,
    get: function () { return Source[key]; },
    set: function (it) { Source[key] = it; }
  });
};


/***/ }),
/* 109 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__(41);
var defineBuiltInAccessor = __webpack_require__(110);
var wellKnownSymbol = __webpack_require__(13);
var DESCRIPTORS = __webpack_require__(32);

var SPECIES = wellKnownSymbol('species');

module.exports = function (CONSTRUCTOR_NAME) {
  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);

  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
    defineBuiltInAccessor(Constructor, SPECIES, {
      configurable: true,
      get: function () { return this; }
    });
  }
};


/***/ }),
/* 110 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var makeBuiltIn = __webpack_require__(69);
var defineProperty = __webpack_require__(34);

module.exports = function (target, name, descriptor) {
  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });
  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });
  return defineProperty.f(target, name, descriptor);
};


/***/ }),
/* 111 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(8);
var globalThis = __webpack_require__(14);

// babel-minify and Closure Compiler transpiles RegExp('.', 's') -> /./s and it causes SyntaxError
var $RegExp = globalThis.RegExp;

module.exports = fails(function () {
  var re = $RegExp('.', 's');
  return !(re.dotAll && re.test('\n') && re.flags === 's');
});


/***/ }),
/* 112 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(8);
var globalThis = __webpack_require__(14);

// babel-minify and Closure Compiler transpiles RegExp('(?<a>b)', 'g') -> /(?<a>b)/g and it causes SyntaxError
var $RegExp = globalThis.RegExp;

module.exports = fails(function () {
  var re = $RegExp('(?<a>b)', 'g');
  return re.exec('b').groups.a !== 'b' ||
    'b'.replace(re, '$<a>c') !== 'bc';
});


/***/ }),
/* 113 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(65);
var exec = __webpack_require__(114);

// `RegExp.prototype.exec` method
// https://tc39.es/ecma262/#sec-regexp.prototype.exec
$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {
  exec: exec
});


/***/ }),
/* 114 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable regexp/no-empty-capturing-group, regexp/no-empty-group, regexp/no-lazy-ends -- testing */
/* eslint-disable regexp/no-useless-quantifier -- testing */
var call = __webpack_require__(39);
var uncurryThis = __webpack_require__(6);
var toString = __webpack_require__(101);
var regexpFlags = __webpack_require__(106);
var stickyHelpers = __webpack_require__(107);
var shared = __webpack_require__(16);
var create = __webpack_require__(27);
var getInternalState = __webpack_require__(60).get;
var UNSUPPORTED_DOT_ALL = __webpack_require__(111);
var UNSUPPORTED_NCG = __webpack_require__(112);

var nativeReplace = shared('native-string-replace', String.prototype.replace);
var nativeExec = RegExp.prototype.exec;
var patchedExec = nativeExec;
var charAt = uncurryThis(''.charAt);
var indexOf = uncurryThis(''.indexOf);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);

var UPDATES_LAST_INDEX_WRONG = (function () {
  var re1 = /a/;
  var re2 = /b*/g;
  call(nativeExec, re1, 'a');
  call(nativeExec, re2, 'a');
  return re1.lastIndex !== 0 || re2.lastIndex !== 0;
})();

var UNSUPPORTED_Y = stickyHelpers.BROKEN_CARET;

// nonparticipating capturing group, copied from es5-shim's String#split patch.
var NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;

var PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG;

if (PATCH) {
  patchedExec = function exec(string) {
    var re = this;
    var state = getInternalState(re);
    var str = toString(string);
    var raw = state.raw;
    var result, reCopy, lastIndex, match, i, object, group;

    if (raw) {
      raw.lastIndex = re.lastIndex;
      result = call(patchedExec, raw, str);
      re.lastIndex = raw.lastIndex;
      return result;
    }

    var groups = state.groups;
    var sticky = UNSUPPORTED_Y && re.sticky;
    var flags = call(regexpFlags, re);
    var source = re.source;
    var charsAdded = 0;
    var strCopy = str;

    if (sticky) {
      flags = replace(flags, 'y', '');
      if (indexOf(flags, 'g') === -1) {
        flags += 'g';
      }

      strCopy = stringSlice(str, re.lastIndex);
      // Support anchored sticky behavior.
      if (re.lastIndex > 0 && (!re.multiline || re.multiline && charAt(str, re.lastIndex - 1) !== '\n')) {
        source = '(?: ' + source + ')';
        strCopy = ' ' + strCopy;
        charsAdded++;
      }
      // ^(? + rx + ) is needed, in combination with some str slicing, to
      // simulate the 'y' flag.
      reCopy = new RegExp('^(?:' + source + ')', flags);
    }

    if (NPCG_INCLUDED) {
      reCopy = new RegExp('^' + source + '$(?!\\s)', flags);
    }
    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;

    match = call(nativeExec, sticky ? reCopy : re, strCopy);

    if (sticky) {
      if (match) {
        match.input = stringSlice(match.input, charsAdded);
        match[0] = stringSlice(match[0], charsAdded);
        match.index = re.lastIndex;
        re.lastIndex += match[0].length;
      } else re.lastIndex = 0;
    } else if (UPDATES_LAST_INDEX_WRONG && match) {
      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;
    }
    if (NPCG_INCLUDED && match && match.length > 1) {
      // Fix browsers whose `exec` methods don't consistently return `undefined`
      // for NPCG, like IE8. NOTE: This doesn't work for /(.?)?/
      call(nativeReplace, match[0], reCopy, function () {
        for (i = 1; i < arguments.length - 2; i++) {
          if (arguments[i] === undefined) match[i] = undefined;
        }
      });
    }

    if (match && groups) {
      match.groups = object = create(null);
      for (i = 0; i < groups.length; i++) {
        group = groups[i];
        object[group[0]] = match[group[1]];
      }
    }

    return match;
  };
}

module.exports = patchedExec;


/***/ }),
/* 115 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var apply = __webpack_require__(116);
var call = __webpack_require__(39);
var uncurryThis = __webpack_require__(6);
var fixRegExpWellKnownSymbolLogic = __webpack_require__(117);
var fails = __webpack_require__(8);
var anObject = __webpack_require__(28);
var isCallable = __webpack_require__(30);
var isObject = __webpack_require__(29);
var toIntegerOrInfinity = __webpack_require__(51);
var toLength = __webpack_require__(54);
var toString = __webpack_require__(101);
var requireObjectCoercible = __webpack_require__(10);
var advanceStringIndex = __webpack_require__(118);
var getMethod = __webpack_require__(43);
var getSubstitution = __webpack_require__(120);
var getRegExpFlags = __webpack_require__(104);
var regExpExec = __webpack_require__(121);
var wellKnownSymbol = __webpack_require__(13);

var REPLACE = wellKnownSymbol('replace');
var max = Math.max;
var min = Math.min;
var concat = uncurryThis([].concat);
var push = uncurryThis([].push);
var stringIndexOf = uncurryThis(''.indexOf);
var stringSlice = uncurryThis(''.slice);

var maybeToString = function (it) {
  return it === undefined ? it : String(it);
};

// IE <= 11 replaces $0 with the whole match, as if it was $&
// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0
var REPLACE_KEEPS_$0 = (function () {
  // eslint-disable-next-line regexp/prefer-escape-replacement-dollar-char -- required for testing
  return 'a'.replace(/./, '$0') === '$0';
})();

// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string
var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {
  if (/./[REPLACE]) {
    return /./[REPLACE]('a', '$0') === '';
  }
  return false;
})();

var REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {
  var re = /./;
  re.exec = function () {
    var result = [];
    result.groups = { a: '7' };
    return result;
  };
  // eslint-disable-next-line regexp/no-useless-dollar-replacements -- false positive
  return ''.replace(re, '$<a>') !== '7';
});

// @@replace logic
fixRegExpWellKnownSymbolLogic('replace', function (_, nativeReplace, maybeCallNative) {
  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';

  return [
    // `String.prototype.replace` method
    // https://tc39.es/ecma262/#sec-string.prototype.replace
    function replace(searchValue, replaceValue) {
      var O = requireObjectCoercible(this);
      var replacer = isObject(searchValue) ? getMethod(searchValue, REPLACE) : undefined;
      return replacer
        ? call(replacer, searchValue, O, replaceValue)
        : call(nativeReplace, toString(O), searchValue, replaceValue);
    },
    // `RegExp.prototype[@@replace]` method
    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace
    function (string, replaceValue) {
      var rx = anObject(this);
      var S = toString(string);

      if (
        typeof replaceValue == 'string' &&
        stringIndexOf(replaceValue, UNSAFE_SUBSTITUTE) === -1 &&
        stringIndexOf(replaceValue, '$<') === -1
      ) {
        var res = maybeCallNative(nativeReplace, rx, S, replaceValue);
        if (res.done) return res.value;
      }

      var functionalReplace = isCallable(replaceValue);
      if (!functionalReplace) replaceValue = toString(replaceValue);

      var flags = toString(getRegExpFlags(rx));
      var global = stringIndexOf(flags, 'g') !== -1;
      var fullUnicode;
      if (global) {
        fullUnicode = stringIndexOf(flags, 'u') !== -1;
        rx.lastIndex = 0;
      }

      var results = [];
      var result;
      while (true) {
        result = regExpExec(rx, S);
        if (result === null) break;

        push(results, result);
        if (!global) break;

        var matchStr = toString(result[0]);
        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);
      }

      var accumulatedResult = '';
      var nextSourcePosition = 0;
      for (var i = 0; i < results.length; i++) {
        result = results[i];

        var matched = toString(result[0]);
        var position = max(min(toIntegerOrInfinity(result.index), S.length), 0);
        var captures = [];
        var replacement;
        // NOTE: This is equivalent to
        //   captures = result.slice(1).map(maybeToString)
        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in
        // the slice polyfill when slicing native arrays) "doesn't work" in safari 9 and
        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.
        for (var j = 1; j < result.length; j++) push(captures, maybeToString(result[j]));
        var namedCaptures = result.groups;
        if (functionalReplace) {
          var replacerArgs = concat([matched], captures, position, S);
          if (namedCaptures !== undefined) push(replacerArgs, namedCaptures);
          replacement = toString(apply(replaceValue, undefined, replacerArgs));
        } else {
          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);
        }
        if (position >= nextSourcePosition) {
          accumulatedResult += stringSlice(S, nextSourcePosition, position) + replacement;
          nextSourcePosition = position + matched.length;
        }
      }

      return accumulatedResult + stringSlice(S, nextSourcePosition);
    }
  ];
}, !REPLACE_SUPPORTS_NAMED_GROUPS || !REPLACE_KEEPS_$0 || REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);


/***/ }),
/* 116 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_BIND = __webpack_require__(7);

var FunctionPrototype = Function.prototype;
var apply = FunctionPrototype.apply;
var call = FunctionPrototype.call;

// eslint-disable-next-line es/no-function-prototype-bind, es/no-reflect -- safe
module.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {
  return call.apply(apply, arguments);
});


/***/ }),
/* 117 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: Remove from `core-js@4` since it's moved to entry points
__webpack_require__(113);
var call = __webpack_require__(39);
var defineBuiltIn = __webpack_require__(68);
var regexpExec = __webpack_require__(114);
var fails = __webpack_require__(8);
var wellKnownSymbol = __webpack_require__(13);
var createNonEnumerableProperty = __webpack_require__(62);

var SPECIES = wellKnownSymbol('species');
var RegExpPrototype = RegExp.prototype;

module.exports = function (KEY, exec, FORCED, SHAM) {
  var SYMBOL = wellKnownSymbol(KEY);

  var DELEGATES_TO_SYMBOL = !fails(function () {
    // String methods call symbol-named RegExp methods
    var O = {};
    // eslint-disable-next-line unicorn/no-immediate-mutation -- ES3 syntax limitation
    O[SYMBOL] = function () { return 7; };
    return ''[KEY](O) !== 7;
  });

  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {
    // Symbol-named RegExp methods call .exec
    var execCalled = false;
    var re = /a/;

    if (KEY === 'split') {
      // We can't use real regex here since it causes deoptimization
      // and serious performance degradation in V8
      // https://github.com/zloirock/core-js/issues/306
      // RegExp[@@split] doesn't call the regex's exec method, but first creates
      // a new one. We need to return the patched regex when creating the new one.
      var constructor = {};
      // eslint-disable-next-line unicorn/no-immediate-mutation -- ES3 syntax limitation
      constructor[SPECIES] = function () { return re; };
      re = { constructor: constructor, flags: '' };
      // eslint-disable-next-line unicorn/no-immediate-mutation -- ES3 syntax limitation
      re[SYMBOL] = /./[SYMBOL];
    }

    re.exec = function () {
      execCalled = true;
      return null;
    };

    re[SYMBOL]('');
    return !execCalled;
  });

  if (
    !DELEGATES_TO_SYMBOL ||
    !DELEGATES_TO_EXEC ||
    FORCED
  ) {
    var nativeRegExpMethod = /./[SYMBOL];
    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {
      var $exec = regexp.exec;
      if ($exec === regexpExec || $exec === RegExpPrototype.exec) {
        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {
          // The native String method already delegates to @@method (this
          // polyfilled function), leasing to infinite recursion.
          // We avoid it by directly calling the native @@method method.
          return { done: true, value: call(nativeRegExpMethod, regexp, str, arg2) };
        }
        return { done: true, value: call(nativeMethod, str, regexp, arg2) };
      }
      return { done: false };
    });

    defineBuiltIn(String.prototype, KEY, methods[0]);
    defineBuiltIn(RegExpPrototype, SYMBOL, methods[1]);
  }

  if (SHAM) createNonEnumerableProperty(RegExpPrototype[SYMBOL], 'sham', true);
};


/***/ }),
/* 118 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var charAt = __webpack_require__(119).charAt;

// `AdvanceStringIndex` abstract operation
// https://tc39.es/ecma262/#sec-advancestringindex
module.exports = function (S, index, unicode) {
  return index + (unicode ? charAt(S, index).length : 1);
};


/***/ }),
/* 119 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);
var toIntegerOrInfinity = __webpack_require__(51);
var toString = __webpack_require__(101);
var requireObjectCoercible = __webpack_require__(10);

var charAt = uncurryThis(''.charAt);
var charCodeAt = uncurryThis(''.charCodeAt);
var stringSlice = uncurryThis(''.slice);

var createMethod = function (CONVERT_TO_STRING) {
  return function ($this, pos) {
    var S = toString(requireObjectCoercible($this));
    var position = toIntegerOrInfinity(pos);
    var size = S.length;
    var first, second;
    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;
    first = charCodeAt(S, position);
    return first < 0xD800 || first > 0xDBFF || position + 1 === size
      || (second = charCodeAt(S, position + 1)) < 0xDC00 || second > 0xDFFF
        ? CONVERT_TO_STRING
          ? charAt(S, position)
          : first
        : CONVERT_TO_STRING
          ? stringSlice(S, position, position + 2)
          : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;
  };
};

module.exports = {
  // `String.prototype.codePointAt` method
  // https://tc39.es/ecma262/#sec-string.prototype.codepointat
  codeAt: createMethod(false),
  // `String.prototype.at` method
  // https://github.com/mathiasbynens/String.prototype.at
  charAt: createMethod(true)
};


/***/ }),
/* 120 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);
var toObject = __webpack_require__(21);

var floor = Math.floor;
var charAt = uncurryThis(''.charAt);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);
// eslint-disable-next-line redos/no-vulnerable -- safe
var SUBSTITUTION_SYMBOLS = /\$([$&'`]|\d{1,2}|<[^>]*>)/g;
var SUBSTITUTION_SYMBOLS_NO_NAMED = /\$([$&'`]|\d{1,2})/g;

// `GetSubstitution` abstract operation
// https://tc39.es/ecma262/#sec-getsubstitution
module.exports = function (matched, str, position, captures, namedCaptures, replacement) {
  var tailPos = position + matched.length;
  var m = captures.length;
  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;
  if (namedCaptures !== undefined) {
    namedCaptures = toObject(namedCaptures);
    symbols = SUBSTITUTION_SYMBOLS;
  }
  return replace(replacement, symbols, function (match, ch) {
    var capture;
    switch (charAt(ch, 0)) {
      case '$': return '$';
      case '&': return matched;
      case '`': return stringSlice(str, 0, position);
      case "'": return stringSlice(str, tailPos);
      case '<':
        capture = namedCaptures[stringSlice(ch, 1, -1)];
        break;
      default: // \d\d?
        var n = +ch;
        if (n === 0) return match;
        if (n > m) {
          var f = floor(n / 10);
          if (f === 0) return match;
          if (f <= m) return captures[f - 1] === undefined ? charAt(ch, 1) : captures[f - 1] + charAt(ch, 1);
          return match;
        }
        capture = captures[n - 1];
    }
    return capture === undefined ? '' : capture;
  });
};


/***/ }),
/* 121 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__(39);
var anObject = __webpack_require__(28);
var isCallable = __webpack_require__(30);
var classof = __webpack_require__(9);
var regexpExec = __webpack_require__(114);

var $TypeError = TypeError;

// `RegExpExec` abstract operation
// https://tc39.es/ecma262/#sec-regexpexec
module.exports = function (R, S) {
  var exec = R.exec;
  if (isCallable(exec)) {
    var result = call(exec, R, S);
    if (result !== null) anObject(result);
    return result;
  }
  if (classof(R) === 'RegExp') return call(regexpExec, R, S);
  throw new $TypeError('RegExp#exec called on incompatible receiver');
};


/***/ }),
/* 122 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Utils", function() { return Utils; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_object_from_entries_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(123);
/* harmony import */ var core_js_modules_es_object_from_entries_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_from_entries_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__);






class _Utils {
  constructor() {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "getPlural", (count, singular, plural) => {
      if (count === 1) {
        return singular;
      }
      return plural !== null && plural !== void 0 ? plural : `${singular}s`;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "getQueryParams", (str = window.location.search) => {
      return Object.fromEntries(str.replace(/^\?/, '').split(/&/).map(pair => pair.split(/=/)));
    });
  }
  /**
   * @param {*} obj
   * @param {string} type
   * @returns {boolean}
   */
  _compareTypes(obj, type) {
    return Object.prototype.toString.call(obj).toLowerCase() === `[object ${type}]`;
  }

  /**
   * @param {string} pathString
   * @returns {string[]}
   */
  _getPath(pathString) {
    return pathString.split(/\.|\[|]/).filter(x => x);
  }

  /**
   * @param {any} obj1
   * @param {any} obj2
   * @returns {boolean}
   */
  isDeepEqual(obj1, obj2) {
    if (Array.isArray(obj1) && Array.isArray(obj2)) {
      if (obj1.length === obj2.length) {
        return !obj1.find(([value, index]) => !this.isDeepEqual(value, obj2[index]));
      }
      return false;
    }
    if (typeof obj1 === 'object' && typeof obj2 === 'object' && !(obj1 instanceof Node) && !(obj2 instanceof Node)) {
      const obj1Entries = Object.entries(obj1);
      const obj2Entries = Object.entries(obj2);
      if (obj1Entries.length === obj2Entries.length) {
        return !obj1Entries.find(([key, value]) => !this.isDeepEqual(value, obj2[key]));
      }
      return false;
    }
    return obj1 === obj2;
  }

  /**
   * @param {*} obj
   * @param {string | string[]} path
   * @returns {object}
   */
  getProperty(obj, path) {
    if (!Array.isArray(path)) {
      path = this._getPath(path);
    }
    return path.reduce((obj, key) => obj && obj[key] ? obj[key] : null, obj);
  }
  /**
   * @param {string} hex
   * @param {string} alpha
   * @returns {string}
   */
  hex2Rgba(hex, alpha) {
    const alphaNumber = parseFloat(alpha);
    if (alphaNumber === 1.0) {
      return hex;
    }
    const match = hex.match(/[\dA-Fa-f]{2}/g);
    if (!match) {
      return '';
    }
    const red = parseInt(match[0], 16);
    const green = parseInt(match[1], 16);
    const blue = parseInt(match[2], 16);
    return `rgba(${red}, ${green}, ${blue}, ${alpha})`;
  }

  /**
   * @param {*} obj
   * @param {string} type
   * @returns {boolean}
   */
  is(obj, type) {
    if (!this.isSet(obj)) {
      return false;
    }
    switch (type) {
      case 'number':
        {
          return this._compareTypes(obj, 'number') && !isNaN(obj);
        }
      case 'object':
        {
          return this._compareTypes(obj, 'object');
        }
      case 'string':
        {
          return this._compareTypes(obj, 'string');
        }
    }
  }

  /**
   * @param {*} obj
   * @returns {boolean}
   */
  isSet(obj) {
    return typeof obj !== 'undefined' && obj !== null;
  }

  /**
   * @param {string} string
   * @returns {object}
   */
  rgba2Hex(string) {
    const match = string.match(/rgba?\((\d+?),\s*(\d+?),\s*(\d+?)(,\s*(.+?))?\)/);
    if (!match) {
      return {
        hex: string,
        alpha: 1.0
      };
    }
    const red = `0${parseInt(match[1]).toString(16)}`.slice(-2);
    const green = `0${parseInt(match[2]).toString(16)}`.slice(-2);
    const blue = `0${parseInt(match[3]).toString(16)}`.slice(-2);
    const alpha = match[5] && parseFloat(match[5]) || 1.0;
    return {
      hex: `#${red}${green}${blue}`,
      alpha
    };
  }

  /**
   * @param {*} obj
   * @param {string | string[]} path
   * @param {*} value
   */
  setProperty(obj, path, value) {
    if (!Array.isArray(path)) {
      path = this._getPath(path);
    }
    const key = path.pop();
    const property = this.getProperty(obj, path);
    property[key] = value;
  }

  /**
   * @param {*[]} array
   * @param {boolean} desc
   * @param {string} key
   * @returns {*[]}
   */
  sortArray(array, desc, key) {
    if (!this.isSet(array) || !Array.isArray(array)) {
      throw 'The "array" argument is not an array';
    }
    const modifier = desc ? -1 : 1;
    return array.sort((a, b) => {
      if (this.is(a, 'object') && this.is(b, 'object')) {
        if (this.is(key, 'string') && this.isSet(a[key]) && this.isSet(b[key])) {
          if (this.is(a[key], 'number') && this.is(b[key], 'number')) {
            if (a[key] < b[key]) {
              return -1 * modifier;
            }
            if (a[key] > b[key]) {
              return modifier;
            }
            return 0;
          }
          return a[key].localeCompare(b[key], {
            sensitivity: 'base'
          }) * modifier;
        }
        return 0;
      }
      if (this.is(a, 'number') && this.is(b, 'number')) {
        if (a < b) {
          return -1 * modifier;
        }
        if (a > b) {
          return modifier;
        }
        return 0;
      }
      return a.localeCompare(b, {
        sensitivity: 'base'
      }) * modifier;
    });
  }
}
const Utils = new _Utils();


/***/ }),
/* 123 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(65);
var iterate = __webpack_require__(124);
var createProperty = __webpack_require__(131);

// `Object.fromEntries` method
// https://tc39.es/ecma262/#sec-object.fromentries
$({ target: 'Object', stat: true }, {
  fromEntries: function fromEntries(iterable) {
    var obj = {};
    iterate(iterable, function (k, v) {
      createProperty(obj, k, v);
    }, { AS_ENTRIES: true });
    return obj;
  }
});


/***/ }),
/* 124 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var bind = __webpack_require__(125);
var call = __webpack_require__(39);
var anObject = __webpack_require__(28);
var tryToString = __webpack_require__(45);
var isArrayIteratorMethod = __webpack_require__(127);
var lengthOfArrayLike = __webpack_require__(53);
var isPrototypeOf = __webpack_require__(42);
var getIterator = __webpack_require__(128);
var getIteratorMethod = __webpack_require__(129);
var iteratorClose = __webpack_require__(130);

var $TypeError = TypeError;

var Result = function (stopped, result) {
  this.stopped = stopped;
  this.result = result;
};

var ResultPrototype = Result.prototype;

module.exports = function (iterable, unboundFunction, options) {
  var that = options && options.that;
  var AS_ENTRIES = !!(options && options.AS_ENTRIES);
  var IS_RECORD = !!(options && options.IS_RECORD);
  var IS_ITERATOR = !!(options && options.IS_ITERATOR);
  var INTERRUPTED = !!(options && options.INTERRUPTED);
  var fn = bind(unboundFunction, that);
  var iterator, iterFn, index, length, result, next, step;

  var stop = function (condition) {
    if (iterator) iteratorClose(iterator, 'normal');
    return new Result(true, condition);
  };

  var callFn = function (value) {
    if (AS_ENTRIES) {
      anObject(value);
      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);
    } return INTERRUPTED ? fn(value, stop) : fn(value);
  };

  if (IS_RECORD) {
    iterator = iterable.iterator;
  } else if (IS_ITERATOR) {
    iterator = iterable;
  } else {
    iterFn = getIteratorMethod(iterable);
    if (!iterFn) throw new $TypeError(tryToString(iterable) + ' is not iterable');
    // optimisation for array iterators
    if (isArrayIteratorMethod(iterFn)) {
      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {
        result = callFn(iterable[index]);
        if (result && isPrototypeOf(ResultPrototype, result)) return result;
      } return new Result(false);
    }
    iterator = getIterator(iterable, iterFn);
  }

  next = IS_RECORD ? iterable.next : iterator.next;
  while (!(step = call(next, iterator)).done) {
    try {
      result = callFn(step.value);
    } catch (error) {
      iteratorClose(iterator, 'throw', error);
    }
    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;
  } return new Result(false);
};


/***/ }),
/* 125 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(126);
var aCallable = __webpack_require__(44);
var NATIVE_BIND = __webpack_require__(7);

var bind = uncurryThis(uncurryThis.bind);

// optional / simple context binding
module.exports = function (fn, that) {
  aCallable(fn);
  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};


/***/ }),
/* 126 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var classofRaw = __webpack_require__(9);
var uncurryThis = __webpack_require__(6);

module.exports = function (fn) {
  // Nashorn bug:
  //   https://github.com/zloirock/core-js/issues/1128
  //   https://github.com/zloirock/core-js/issues/1130
  if (classofRaw(fn) === 'Function') return uncurryThis(fn);
};


/***/ }),
/* 127 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var wellKnownSymbol = __webpack_require__(13);
var Iterators = __webpack_require__(59);

var ITERATOR = wellKnownSymbol('iterator');
var ArrayPrototype = Array.prototype;

// check on default Array iterator
module.exports = function (it) {
  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);
};


/***/ }),
/* 128 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__(39);
var aCallable = __webpack_require__(44);
var anObject = __webpack_require__(28);
var tryToString = __webpack_require__(45);
var getIteratorMethod = __webpack_require__(129);

var $TypeError = TypeError;

module.exports = function (argument, usingIterator) {
  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;
  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));
  throw new $TypeError(tryToString(argument) + ' is not iterable');
};


/***/ }),
/* 129 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var classof = __webpack_require__(102);
var getMethod = __webpack_require__(43);
var isNullOrUndefined = __webpack_require__(11);
var Iterators = __webpack_require__(59);
var wellKnownSymbol = __webpack_require__(13);

var ITERATOR = wellKnownSymbol('iterator');

module.exports = function (it) {
  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)
    || getMethod(it, '@@iterator')
    || Iterators[classof(it)];
};


/***/ }),
/* 130 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__(39);
var anObject = __webpack_require__(28);
var getMethod = __webpack_require__(43);

module.exports = function (iterator, kind, value) {
  var innerResult, innerError;
  anObject(iterator);
  try {
    innerResult = getMethod(iterator, 'return');
    if (!innerResult) {
      if (kind === 'throw') throw value;
      return value;
    }
    innerResult = call(innerResult, iterator);
  } catch (error) {
    innerError = true;
    innerResult = error;
  }
  if (kind === 'throw') throw value;
  if (innerError) throw innerResult;
  anObject(innerResult);
  return value;
};


/***/ }),
/* 131 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(32);
var definePropertyModule = __webpack_require__(34);
var createPropertyDescriptor = __webpack_require__(63);

module.exports = function (object, key, value) {
  if (DESCRIPTORS) definePropertyModule.f(object, key, createPropertyDescriptor(0, value));
  else object[key] = value;
};


/***/ }),
/* 132 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Shared", function() { return Shared; });
class _Shared {
  constructor() {
    /**
     * @type {import('../modules/Common').common}
     */
    this.common = null;

    /**
     * @type {import('./Esgst').esgst}
     */
    this.esgst = null;

    /**
     * @type {import('../components/Header').IHeader}
     */
    this.header = null;

    /**
     * @type {import('../components/Footer').IFooter}
     */
    this.footer = null;
  }
  add(objs) {
    for (let name in objs) {
      if (!objs.hasOwnProperty(name)) {
        continue;
      }
      this[name] = objs[name];
    }
  }
}
const Shared = new _Shared();


/***/ }),
/* 133 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _assets_styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(134);
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(90);
/* harmony import */ var _class_Esgst__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(141);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(208);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(210);
/* harmony import */ var _class_PersistentStorage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(248);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(132);
/* harmony import */ var _components_Footer__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(508);
/* harmony import */ var _components_Header__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(249);
/* harmony import */ var _modules_Style__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(509);
/* harmony import */ var _modules_Sync__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(241);


// that will append styles to page in runtime

















(() => {
  const common = _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].modules.common;
  // @ts-ignore
  if (!window.NodeList.prototype[Symbol.iterator]) {
    // @ts-ignore
    window.NodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];
  }

  // @ts-ignore
  if (!window.HTMLCollection.prototype[Symbol.iterator]) {
    // @ts-ignore
    window.HTMLCollection.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];
  }

  // initialize esgst
  async function init() {
    if (document.getElementById('esgst')) {
      // esgst is already running
      return;
    }
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].markdownParser.setBreaksEnabled(true);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].markdownParser.setMarkupEscaped(true);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].name = _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].sg ? 'sg' : 'st';
    _browser__WEBPACK_IMPORTED_MODULE_5__["browser"].runtime.onMessage.addListener(message => {
      message = JSON.parse(message);
      switch (message.action) {
        case 'notify-tds':
          _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.modules.generalThreadSubscription.updateItems(message.values);
          break;
        case 'storageChanged':
          _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.getChanges(message.values.changes, message.values.areaName);
          break;
        case 'update':
          common.createConfirmation(`Hi! A new version of ESGST (${message.values.version}) is available. Do you want to force an update now? If you choose to force an update, ESGST will stop working in any SteamGifts/SteamTrades tab that is open, along with any operation that you might be performing (such as syncing, checking something etc), so you will have to refresh them. If you choose not to force an update, your browser will automatically update the extension when you are not using it (for example, when you restart the browser).`, () => {
            _browser__WEBPACK_IMPORTED_MODULE_5__["browser"].runtime.sendMessage({
              action: 'reload'
            }).then(() => {});
          }, () => {});
          break;
      }
    });

    // set default values or correct values
    await _browser__WEBPACK_IMPORTED_MODULE_5__["browser"].runtime.sendMessage({
      action: 'register_tab',
      url: window.location.href
    });
    /**
     * @property {object} esgst.storage.Emojis
     * @property {object} esgst.storage.filterPresets
     * @property {object} esgst.storage.dfPresets
     */
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage = await _browser__WEBPACK_IMPORTED_MODULE_5__["browser"].storage.local.get(null);
    _browser__WEBPACK_IMPORTED_MODULE_5__["browser"].storage.onChanged.addListener(_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.getChanges.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common));
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].features = common.getFeatures();
    [_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].featuresById, _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].featuresAncestors] = common.getFeaturesById();
    await _class_PersistentStorage__WEBPACK_IMPORTED_MODULE_9__["persistentStorage"].upgrade(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage, _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.v);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].decryptedGiveaways = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.decryptedGiveaways);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].delistedGames = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.delistedGames);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].discussions = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.discussions);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].emojis = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.emojis);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].games = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.games);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].giveaways = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.giveaways);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].groups = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.groups);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].requestLog = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.requestLog);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].rerolls = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.rerolls);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.settings);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].tickets = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.tickets);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].trades = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.trades);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].users = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.users);
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].winners = JSON.parse(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].storage.winners);
    function initializeOnDOMReady() {
      load();
      document.removeEventListener('DOMContentLoaded', initializeOnDOMReady);
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeOnDOMReady);
    } else {
      load();
    }
  }
  async function load() {
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].bodyLoaded = true;
    let settingsChanged = false;
    if (_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].sg) {
      try {
        const avatar = document.getElementsByClassName('nav__avatar-inner-wrap')[0].style.backgroundImage.match(/\("(.+)"\)/)[1];
        if (_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.avatar !== avatar) {
          _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.avatar = avatar;
          settingsChanged = true;
        }
        const username = document.getElementsByClassName('nav__avatar-outer-wrap')[0].href.match(/\/user\/(.+)/)[1];
        if (_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.username_sg !== username) {
          _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.username_sg = username;
          settingsChanged = true;
        }
        if (!_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.registrationDate_sg || !_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.steamId) {
          const responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].get(`https://www.steamgifts.com/user/${_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.username_sg}`)).html;
          const elements = responseHtml.getElementsByClassName('featured__table__row__left');
          for (const element of elements) {
            if (element.textContent === 'Registered') {
              _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.registrationDate_sg = parseInt(element.nextElementSibling.firstElementChild.getAttribute('data-timestamp'));
              break;
            }
          }
          _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.steamId = responseHtml.querySelector(`a[href*="/profiles/"]`).getAttribute('href').match(/\d+/)[0];
          settingsChanged = true;
        }
      } catch (e) {}
    } else {
      try {
        const avatar = document.getElementsByClassName('nav_avatar')[0].style.backgroundImage.match(/\("(.+)"\)/)[1];
        if (_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.avatar !== avatar) {
          _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.avatar = avatar;
          settingsChanged = true;
        }
        const username = document.querySelector(`.author_name[href*="/user/${_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.steamId}"], .underline[href*="/user/${_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.steamId}"]`).textContent;
        if (_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.username_st !== username) {
          _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings.username_st = username;
          settingsChanged = true;
        }
      } catch (e) {}
    }
    if (settingsChanged) {
      await common.setValue('settings', JSON.stringify(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].settings));
    }
    _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].init();

    // now that all values are set esgst can begin to load

    if (_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].sg) {
      _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].headerSize = 39;
      _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].footerSize = 44;
    } else {
      _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].headerSize = document.querySelector('header').classList.contains('small') ? 88 : 284;
      _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].footerSize = _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ff') ? 44 : 245;
    }
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].mainPageHeadingSize = 45;
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].pageTop = _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('fh') ? _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].headerSize : 0;
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].commentsTop = _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].pageTop + (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('fmph') ? _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].mainPageHeadingSize : 0);
    Object(_modules_Style__WEBPACK_IMPORTED_MODULE_15__["addStyle"])();

    /* [URLR] URL Redirector */
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('urlr') && window.location.pathname.match(/^\/(giveaway|discussion|support\/ticket|trade)\/.{5}$/)) {
      window.location.href = `${window.location.origin}${window.location.pathname.match(/\/(giveaway|discussion|support\/ticket|trade)\/.{5}$/)[0]}/`;
    }
    for (const key in _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].paths) {
      for (const item of _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].paths[key]) {
        item.pattern = item.pattern.replace(/%steamId%/, _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('steamId'));
      }
    }
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].currentPaths = [];
    const effectivePath = common.getPath(window.location.href);
    for (const pathObj of _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].paths[_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].name]) {
      if (effectivePath.match(pathObj.pattern)) {
        _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].currentPaths.push(pathObj.name);
      }
    }
    if (common.isCurrentPath('Account')) {
      if (window.location.href.match(/state=dropbox/)) {
        await common.setValue('dropboxToken', window.location.hash.match(/access_token=(.+?)&/)[1]);
        window.close();
      } else if (window.location.href.match(/state=google-drive/)) {
        await common.setValue('googleDriveToken', window.location.hash.match(/access_token=(.+?)&/)[1]);
        window.close();
      } else if (window.location.href.match(/state=onedrive/)) {
        await common.setValue('oneDriveToken', window.location.hash.match(/access_token=(.+?)&/)[1]);
        window.close();
      } else if (window.location.href.match(/state=imgur/)) {
        await common.setValue('imgurToken', window.location.hash.match(/access_token=(.+?)&/)[1]);
        window.close();
      }
    }
    _class_Session__WEBPACK_IMPORTED_MODULE_10__["Session"].init();
    try {
      _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].header = new _components_Header__WEBPACK_IMPORTED_MODULE_14__["Header"]();
      _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].header.parse(document.body);
      _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].footer = new _components_Footer__WEBPACK_IMPORTED_MODULE_13__["Footer"]();
      _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].footer.parse(document.body);
    } catch (e) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_8__["Logger"].error(e.message);
    }
    if (!_class_Session__WEBPACK_IMPORTED_MODULE_10__["Session"].isLoggedIn) {
      return;
    }
    if (_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].st && !_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('esgst_st')) {
      // esgst is not enabled for steamtrades
      return;
    }
    _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].lastPage = _class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].modules.generalLastPageLink.lpl_getLastPage(document, true);
    await common.getElements();
    if (_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].sg) {
      // noinspection JSIgnoredPromiseFromCall
      common.checkSync();
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('autoBackup')) {
      common.checkBackup();
    }
    if (_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].profilePath && _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('autoSync')) {
      const el = document.getElementsByClassName('form__sync-default')[0];
      if (el) {
        el.addEventListener('click', () => Object(_modules_Sync__WEBPACK_IMPORTED_MODULE_16__["runSilentSync"])(`Games=1&Groups=1`));
      }
    }
    await common.addHeaderMenu();
    common.checkNewVersion();
    await common.loadFeatures(_class_Esgst__WEBPACK_IMPORTED_MODULE_6__["esgst"].modules);
    if (common.isCurrentPath('Browse Giveaways') && !_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get(`es`).enabled) {
      common.moveAdsDown(document.body);
    }
  }
  init().catch(err => console.log(err));
})();

/***/ }),
/* 134 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _bootstrap_index_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(135);
/* harmony import */ var _bootstrap_index_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_bootstrap_index_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _patches_query_builder_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(139);
/* harmony import */ var _patches_query_builder_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_patches_query_builder_css__WEBPACK_IMPORTED_MODULE_1__);
// That's custom build, so we import local version



/***/ }),
/* 135 */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(136);
            var content = __webpack_require__(137);

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {"injectType":"singletonStyleTag","insert":"html"};

options.insert = "html";
options.singleton = true;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),
/* 136 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : undefined;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),
/* 137 */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(138);
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".btn-group > .btn-group,\n.btn-toolbar .btn,\n.btn-toolbar .btn-group,\n.btn-toolbar .input-group {\n\tfloat: left;\n}\n.btn-group > .btn-group:first-child:not(:last-child) > .btn:last-child,\n.btn-group > .btn-group:first-child:not(:last-child) > .dropdown-toggle,\n.btn-group > .btn:first-child:not(:last-child):not(.dropdown-toggle) {\n\tborder-bottom-right-radius: 0;\n\tborder-top-right-radius: 0;\n}\n.btn-group > .btn-group:last-child:not(:first-child) > .btn:first-child,\n.btn-group > .btn:last-child:not(:first-child),\n.btn-group > .dropdown-toggle:not(:first-child) {\n\tborder-bottom-left-radius: 0;\n\tborder-top-left-radius: 0;\n}\n.btn-group-vertical > .btn:not(:first-child):not(:last-child),\n.btn-group > .btn-group:not(:first-child):not(:last-child) > .btn,\n.btn-group > .btn:not(:first-child):not(:last-child):not(.dropdown-toggle) {\n\tborder-radius: 0;\n}\n.btn,\n.btn-link {\n\tfont-weight: 400;\n}\n.btn,\n.btn-danger.active,\n.btn-danger:active,\n.btn-default.active,\n.btn-default:active,\n.btn-info.active,\n.btn-info:active,\n.btn-primary.active,\n.btn-primary:active,\n.btn-warning.active,\n.btn-warning:active,\n.btn.active,\n.btn:active,\n.dropdown-menu > .disabled > a:focus,\n.dropdown-menu > .disabled > a:hover,\n.form-control,\n.open > .dropdown-toggle.btn-danger,\n.open > .dropdown-toggle.btn-default,\n.open > .dropdown-toggle.btn-info,\n.open > .dropdown-toggle.btn-primary,\n.open > .dropdown-toggle.btn-warning {\n\tbackground-image: none;\n}\n.btn-group,\n.btn-group-vertical {\n\tposition: relative;\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n.btn-group-vertical > .btn,\n.btn-group > .btn {\n\tposition: relative;\n\tfloat: left;\n}\n.btn-group-vertical > .btn.active,\n.btn-group-vertical > .btn:active,\n.btn-group-vertical > .btn:focus,\n.btn-group-vertical > .btn:hover,\n.btn-group > .btn.active,\n.btn-group > .btn:active,\n.btn-group > .btn:focus,\n.btn-group > .btn:hover {\n\tz-index: 2;\n}\n.btn-group .btn + .btn,\n.btn-group .btn + .btn-group,\n.btn-group .btn-group + .btn,\n.btn-group .btn-group + .btn-group {\n\tmargin-left: -1px;\n}\n.btn-toolbar {\n\tmargin-left: -5px;\n}\n.btn-toolbar > .btn,\n.btn-toolbar > .btn-group,\n.btn-toolbar > .input-group {\n\tmargin-left: 5px;\n}\n.btn .caret,\n.btn-group > .btn:first-child {\n\tmargin-left: 0;\n}\n.btn-group .dropdown-toggle:active,\n.btn-group.open .dropdown-toggle {\n\toutline: 0;\n}\n.btn-group > .btn + .dropdown-toggle {\n\tpadding-left: 8px;\n\tpadding-right: 8px;\n}\n.btn-group > .btn-lg + .dropdown-toggle {\n\tpadding-left: 12px;\n\tpadding-right: 12px;\n}\n.btn-group.open .dropdown-toggle {\n\t-webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\n\tbox-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\n}\n.btn-group.open .dropdown-toggle.btn-link {\n\t-webkit-box-shadow: none;\n\tbox-shadow: none;\n}\n.btn-lg .caret {\n\tborder-width: 5px 5px 0;\n}\n.dropup .btn-lg .caret {\n\tborder-width: 0 5px 5px;\n}\n.btn-group-vertical > .btn,\n.btn-group-vertical > .btn-group,\n.btn-group-vertical > .btn-group > .btn {\n\tdisplay: block;\n\tfloat: none;\n\twidth: 100%;\n\tmax-width: 100%;\n}\n.btn-group-vertical > .btn-group > .btn {\n\tfloat: none;\n}\n.btn-group-vertical > .btn + .btn,\n.btn-group-vertical > .btn + .btn-group,\n.btn-group-vertical > .btn-group + .btn,\n.btn-group-vertical > .btn-group + .btn-group {\n\tmargin-top: -1px;\n\tmargin-left: 0;\n}\n.btn-group-vertical > .btn:first-child:not(:last-child) {\n\tborder-radius: 4px 4px 0 0;\n}\n.btn-group-vertical > .btn:last-child:not(:first-child) {\n\tborder-radius: 0 0 4px 4px;\n}\n.btn-group-vertical > .btn-group:not(:first-child):not(:last-child) > .btn {\n\tborder-radius: 0;\n}\n.btn-group-vertical > .btn-group:first-child:not(:last-child) > .btn:last-child,\n.btn-group-vertical > .btn-group:first-child:not(:last-child) > .dropdown-toggle {\n\tborder-bottom-right-radius: 0;\n\tborder-bottom-left-radius: 0;\n}\n.btn-group-vertical > .btn-group:last-child:not(:first-child) > .btn:first-child {\n\tborder-top-right-radius: 0;\n\tborder-top-left-radius: 0;\n}\n.btn-group-justified {\n\tdisplay: table;\n\twidth: 100%;\n\ttable-layout: fixed;\n\tborder-collapse: separate;\n}\n.btn-group-justified > .btn,\n.btn-group-justified > .btn-group {\n\tfloat: none;\n\tdisplay: table-cell;\n\twidth: 1%;\n}\n.btn-block,\n.btn-group-justified > .btn-group .btn,\n.form-control,\ninput[type='submit'].btn-block,\ninput[type='reset'].btn-block,\ninput[type='button'].btn-block,\nlegend {\n\twidth: 100%;\n}\n.btn-group-justified > .btn-group .dropdown-menu {\n\tleft: auto;\n}\n[data-toggle='buttons'] > .btn input[type='radio'],\n[data-toggle='buttons'] > .btn input[type='checkbox'],\n[data-toggle='buttons'] > .btn-group > .btn input[type='radio'],\n[data-toggle='buttons'] > .btn-group > .btn input[type='checkbox'] {\n\tposition: absolute;\n\tclip: rect(0, 0, 0, 0);\n\tpointer-events: none;\n}\n.btn {\n\tdisplay: inline-block;\n\tmargin-bottom: 0;\n\ttext-align: center;\n\tvertical-align: middle;\n\ttouch-action: manipulation;\n\tcursor: pointer;\n\tborder: 1px solid transparent;\n\twhite-space: nowrap;\n\tpadding: 6px 12px;\n\tfont-size: 14px;\n\tline-height: 1.428571429;\n\tborder-radius: 4px;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n}\n.btn.active.focus,\n.btn.active:focus,\n.btn.focus,\n.btn:active.focus,\n.btn:active:focus,\n.btn:focus {\n\toutline: -webkit-focus-ring-color auto 5px;\n\toutline-offset: -2px;\n}\n.btn.focus,\n.btn:focus,\n.btn:hover {\n\tcolor: #333;\n\ttext-decoration: none;\n}\n.btn.active,\n.btn:active {\n\toutline: 0;\n\t-webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\n\tbox-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\n}\n.btn.disabled,\n.btn[disabled],\nfieldset[disabled] .btn {\n\tcursor: not-allowed;\n\topacity: 0.65;\n\tfilter: alpha(opacity=65);\n\t-webkit-box-shadow: none;\n\tbox-shadow: none;\n}\na.btn.disabled,\nfieldset[disabled] a.btn {\n\tpointer-events: none;\n}\n.btn-default {\n\tcolor: #333;\n\tbackground-color: #fff;\n\tborder-color: #ccc;\n}\n.btn-default.focus,\n.btn-default:focus {\n\tcolor: #333;\n\tbackground-color: #e6e6e6;\n\tborder-color: #8c8c8c;\n}\n.btn-default.active,\n.btn-default:active,\n.btn-default:hover,\n.open > .dropdown-toggle.btn-default {\n\tcolor: #333;\n\tbackground-color: #e6e6e6;\n\tborder-color: #adadad;\n}\n.btn-default.active.focus,\n.btn-default.active:focus,\n.btn-default.active:hover,\n.btn-default:active.focus,\n.btn-default:active:focus,\n.btn-default:active:hover,\n.open > .dropdown-toggle.btn-default.focus,\n.open > .dropdown-toggle.btn-default:focus,\n.open > .dropdown-toggle.btn-default:hover {\n\tcolor: #333;\n\tbackground-color: #d4d4d4;\n\tborder-color: #8c8c8c;\n}\n.btn-default.disabled.focus,\n.btn-default.disabled:focus,\n.btn-default.disabled:hover,\n.btn-default[disabled].focus,\n.btn-default[disabled]:focus,\n.btn-default[disabled]:hover,\nfieldset[disabled] .btn-default.focus,\nfieldset[disabled] .btn-default:focus,\nfieldset[disabled] .btn-default:hover {\n\tbackground-color: #fff;\n\tborder-color: #ccc;\n}\n.btn-default .badge {\n\tcolor: #fff;\n\tbackground-color: #333;\n}\n.btn-primary {\n\tcolor: #fff;\n\tbackground-color: #337ab7;\n\tborder-color: #2e6da4;\n}\n.btn-primary.focus,\n.btn-primary:focus {\n\tcolor: #fff;\n\tbackground-color: #286090;\n\tborder-color: #122b40;\n}\n.btn-primary.active,\n.btn-primary:active,\n.btn-primary:hover,\n.open > .dropdown-toggle.btn-primary {\n\tcolor: #fff;\n\tbackground-color: #286090;\n\tborder-color: #204d74;\n}\n.btn-primary.active.focus,\n.btn-primary.active:focus,\n.btn-primary.active:hover,\n.btn-primary:active.focus,\n.btn-primary:active:focus,\n.btn-primary:active:hover,\n.open > .dropdown-toggle.btn-primary.focus,\n.open > .dropdown-toggle.btn-primary:focus,\n.open > .dropdown-toggle.btn-primary:hover {\n\tcolor: #fff;\n\tbackground-color: #204d74;\n\tborder-color: #122b40;\n}\n.btn-primary.disabled.focus,\n.btn-primary.disabled:focus,\n.btn-primary.disabled:hover,\n.btn-primary[disabled].focus,\n.btn-primary[disabled]:focus,\n.btn-primary[disabled]:hover,\nfieldset[disabled] .btn-primary.focus,\nfieldset[disabled] .btn-primary:focus,\nfieldset[disabled] .btn-primary:hover {\n\tbackground-color: #337ab7;\n\tborder-color: #2e6da4;\n}\n.btn-primary .badge {\n\tcolor: #337ab7;\n\tbackground-color: #fff;\n}\n.btn-success {\n\tcolor: #fff;\n\tbackground-color: #5cb85c;\n\tborder-color: #4cae4c;\n}\n.btn-success.focus,\n.btn-success:focus {\n\tcolor: #fff;\n\tbackground-color: #449d44;\n\tborder-color: #255625;\n}\n.btn-success.active,\n.btn-success:active,\n.btn-success:hover,\n.open > .dropdown-toggle.btn-success {\n\tcolor: #fff;\n\tbackground-color: #449d44;\n\tborder-color: #398439;\n}\n.btn-success.active.focus,\n.btn-success.active:focus,\n.btn-success.active:hover,\n.btn-success:active.focus,\n.btn-success:active:focus,\n.btn-success:active:hover,\n.open > .dropdown-toggle.btn-success.focus,\n.open > .dropdown-toggle.btn-success:focus,\n.open > .dropdown-toggle.btn-success:hover {\n\tcolor: #fff;\n\tbackground-color: #398439;\n\tborder-color: #255625;\n}\n.btn-success.active,\n.btn-success:active,\n.open > .dropdown-toggle.btn-success {\n\tbackground-image: none;\n}\n.btn-success.disabled.focus,\n.btn-success.disabled:focus,\n.btn-success.disabled:hover,\n.btn-success[disabled].focus,\n.btn-success[disabled]:focus,\n.btn-success[disabled]:hover,\nfieldset[disabled] .btn-success.focus,\nfieldset[disabled] .btn-success:focus,\nfieldset[disabled] .btn-success:hover {\n\tbackground-color: #5cb85c;\n\tborder-color: #4cae4c;\n}\n.btn-success .badge {\n\tcolor: #5cb85c;\n\tbackground-color: #fff;\n}\n.btn-info {\n\tcolor: #fff;\n\tbackground-color: #5bc0de;\n\tborder-color: #46b8da;\n}\n.btn-info.focus,\n.btn-info:focus {\n\tcolor: #fff;\n\tbackground-color: #31b0d5;\n\tborder-color: #1b6d85;\n}\n.btn-info.active,\n.btn-info:active,\n.btn-info:hover,\n.open > .dropdown-toggle.btn-info {\n\tcolor: #fff;\n\tbackground-color: #31b0d5;\n\tborder-color: #269abc;\n}\n.btn-info.active.focus,\n.btn-info.active:focus,\n.btn-info.active:hover,\n.btn-info:active.focus,\n.btn-info:active:focus,\n.btn-info:active:hover,\n.open > .dropdown-toggle.btn-info.focus,\n.open > .dropdown-toggle.btn-info:focus,\n.open > .dropdown-toggle.btn-info:hover {\n\tcolor: #fff;\n\tbackground-color: #269abc;\n\tborder-color: #1b6d85;\n}\n.btn-info.disabled.focus,\n.btn-info.disabled:focus,\n.btn-info.disabled:hover,\n.btn-info[disabled].focus,\n.btn-info[disabled]:focus,\n.btn-info[disabled]:hover,\nfieldset[disabled] .btn-info.focus,\nfieldset[disabled] .btn-info:focus,\nfieldset[disabled] .btn-info:hover {\n\tbackground-color: #5bc0de;\n\tborder-color: #46b8da;\n}\n.btn-info .badge {\n\tcolor: #5bc0de;\n\tbackground-color: #fff;\n}\n.btn-warning {\n\tcolor: #fff;\n\tbackground-color: #f0ad4e;\n\tborder-color: #eea236;\n}\n.btn-warning.focus,\n.btn-warning:focus {\n\tcolor: #fff;\n\tbackground-color: #ec971f;\n\tborder-color: #985f0d;\n}\n.btn-warning.active,\n.btn-warning:active,\n.btn-warning:hover,\n.open > .dropdown-toggle.btn-warning {\n\tcolor: #fff;\n\tbackground-color: #ec971f;\n\tborder-color: #d58512;\n}\n.btn-warning.active.focus,\n.btn-warning.active:focus,\n.btn-warning.active:hover,\n.btn-warning:active.focus,\n.btn-warning:active:focus,\n.btn-warning:active:hover,\n.open > .dropdown-toggle.btn-warning.focus,\n.open > .dropdown-toggle.btn-warning:focus,\n.open > .dropdown-toggle.btn-warning:hover {\n\tcolor: #fff;\n\tbackground-color: #d58512;\n\tborder-color: #985f0d;\n}\n.btn-warning.disabled.focus,\n.btn-warning.disabled:focus,\n.btn-warning.disabled:hover,\n.btn-warning[disabled].focus,\n.btn-warning[disabled]:focus,\n.btn-warning[disabled]:hover,\nfieldset[disabled] .btn-warning.focus,\nfieldset[disabled] .btn-warning:focus,\nfieldset[disabled] .btn-warning:hover {\n\tbackground-color: #f0ad4e;\n\tborder-color: #eea236;\n}\n.btn-warning .badge {\n\tcolor: #f0ad4e;\n\tbackground-color: #fff;\n}\n.btn-danger {\n\tcolor: #fff;\n\tbackground-color: #d9534f;\n\tborder-color: #d43f3a;\n}\n.btn-danger.focus,\n.btn-danger:focus {\n\tcolor: #fff;\n\tbackground-color: #c9302c;\n\tborder-color: #761c19;\n}\n.btn-danger.active,\n.btn-danger:active,\n.btn-danger:hover,\n.open > .dropdown-toggle.btn-danger {\n\tcolor: #fff;\n\tbackground-color: #c9302c;\n\tborder-color: #ac2925;\n}\n.btn-danger.active.focus,\n.btn-danger.active:focus,\n.btn-danger.active:hover,\n.btn-danger:active.focus,\n.btn-danger:active:focus,\n.btn-danger:active:hover,\n.open > .dropdown-toggle.btn-danger.focus,\n.open > .dropdown-toggle.btn-danger:focus,\n.open > .dropdown-toggle.btn-danger:hover {\n\tcolor: #fff;\n\tbackground-color: #ac2925;\n\tborder-color: #761c19;\n}\n.btn-danger.disabled.focus,\n.btn-danger.disabled:focus,\n.btn-danger.disabled:hover,\n.btn-danger[disabled].focus,\n.btn-danger[disabled]:focus,\n.btn-danger[disabled]:hover,\nfieldset[disabled] .btn-danger.focus,\nfieldset[disabled] .btn-danger:focus,\nfieldset[disabled] .btn-danger:hover {\n\tbackground-color: #d9534f;\n\tborder-color: #d43f3a;\n}\n.btn-danger .badge {\n\tcolor: #d9534f;\n\tbackground-color: #fff;\n}\n.btn-link {\n\tcolor: #337ab7;\n\tborder-radius: 0;\n}\n.btn-link,\n.btn-link.active,\n.btn-link:active,\n.btn-link[disabled],\nfieldset[disabled] .btn-link {\n\tbackground-color: transparent;\n\t-webkit-box-shadow: none;\n\tbox-shadow: none;\n}\n.btn-link,\n.btn-link:active,\n.btn-link:focus,\n.btn-link:hover {\n\tborder-color: transparent;\n}\n.btn-link:focus,\n.btn-link:hover {\n\tcolor: #23527c;\n\ttext-decoration: underline;\n\tbackground-color: transparent;\n}\n.btn-link[disabled]:focus,\n.btn-link[disabled]:hover,\nfieldset[disabled] .btn-link:focus,\nfieldset[disabled] .btn-link:hover {\n\tcolor: #777;\n\ttext-decoration: none;\n}\n.btn-group-lg > .btn,\n.btn-lg {\n\tpadding: 10px 16px;\n\tfont-size: 18px;\n\tline-height: 1.3333333;\n\tborder-radius: 6px;\n}\n.btn-group-sm > .btn,\n.btn-sm {\n\tpadding: 5px 10px;\n\tfont-size: 12px;\n\tline-height: 1.5;\n\tborder-radius: 3px;\n}\n.btn-group-xs > .btn,\n.btn-xs {\n\tpadding: 1px 5px;\n\tfont-size: 12px;\n\tline-height: 1.5;\n\tborder-radius: 3px;\n}\n.btn-block {\n\tdisplay: block;\n}\n.btn-block + .btn-block {\n\tmargin-top: 5px;\n}\n.caret {\n\tdisplay: inline-block;\n\twidth: 0;\n\theight: 0;\n\tmargin-left: 2px;\n\tvertical-align: middle;\n\tborder-top: 4px dashed;\n\tborder-top: 4px solid\\9;\n\tborder-right: 4px solid transparent;\n\tborder-left: 4px solid transparent;\n}\n.dropdown,\n.dropup {\n\tposition: relative;\n}\n.dropdown-toggle:focus {\n\toutline: 0;\n}\n.dropdown-menu {\n\tposition: absolute;\n\ttop: 100%;\n\tleft: 0;\n\tz-index: 1000;\n\tdisplay: none;\n\tfloat: left;\n\tmin-width: 160px;\n\tpadding: 5px 0;\n\tmargin: 2px 0 0;\n\tlist-style: none;\n\tfont-size: 14px;\n\ttext-align: left;\n\tbackground-color: #fff;\n\tborder: 1px solid #ccc;\n\tborder: 1px solid rgba(0, 0, 0, 0.15);\n\tborder-radius: 4px;\n\t-webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n\tbox-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n\tbackground-clip: padding-box;\n}\n.dropdown-menu-right,\n.dropdown-menu.pull-right {\n\tleft: auto;\n\tright: 0;\n}\n.dropdown-header,\n.dropdown-menu > li > a {\n\tpadding: 3px 20px;\n\tline-height: 1.428571429;\n\tdisplay: block;\n\twhite-space: nowrap;\n}\n.dropdown-menu .divider {\n\theight: 1px;\n\tmargin: 9px 0;\n\toverflow: hidden;\n\tbackground-color: #e5e5e5;\n}\n.dropdown-menu > li > a {\n\tclear: both;\n\tfont-weight: 400;\n\tcolor: #333;\n}\n.dropdown-menu > li > a:focus,\n.dropdown-menu > li > a:hover {\n\ttext-decoration: none;\n\tcolor: #262626;\n\tbackground-color: #f5f5f5;\n}\n.dropdown-menu > .active > a,\n.dropdown-menu > .active > a:focus,\n.dropdown-menu > .active > a:hover {\n\tcolor: #fff;\n\ttext-decoration: none;\n\toutline: 0;\n\tbackground-color: #337ab7;\n}\n.dropdown-menu > .disabled > a,\n.dropdown-menu > .disabled > a:focus,\n.dropdown-menu > .disabled > a:hover {\n\tcolor: #777;\n}\n.dropdown-menu > .disabled > a:focus,\n.dropdown-menu > .disabled > a:hover {\n\ttext-decoration: none;\n\tbackground-color: transparent;\n\tfilter: progid:DXImageTransform.Microsoft.gradient(enabled=false);\n\tcursor: not-allowed;\n}\n.open > .dropdown-menu {\n\tdisplay: block;\n}\n.open > a {\n\toutline: 0;\n}\n.dropdown-menu-left {\n\tleft: 0;\n\tright: auto;\n}\n.dropdown-header {\n\tfont-size: 12px;\n\tcolor: #777;\n}\n.dropdown-backdrop {\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\ttop: 0;\n\tz-index: 990;\n}\n.pull-right > .dropdown-menu {\n\tright: 0;\n\tleft: auto;\n}\n.dropup .caret,\n.navbar-fixed-bottom .dropdown .caret {\n\tborder-top: 0;\n\tborder-bottom: 4px dashed;\n\tborder-bottom: 4px solid\\9;\n\tcontent: '';\n}\nfieldset,\nlegend {\n\tpadding: 0;\n\tborder: 0;\n}\n.dropup .dropdown-menu,\n.navbar-fixed-bottom .dropdown .dropdown-menu {\n\ttop: auto;\n\tbottom: 100%;\n\tmargin-bottom: 2px;\n}\n@media (min-width: 768px) {\n\t.navbar-right .dropdown-menu {\n\t\tleft: auto;\n\t\tright: 0;\n\t}\n\t.navbar-right .dropdown-menu-left {\n\t\tleft: 0;\n\t\tright: auto;\n\t}\n}\nfieldset {\n\tmargin: 0;\n\tmin-width: 0;\n}\nlegend {\n\tdisplay: block;\n\tmargin-bottom: 20px;\n\tfont-size: 21px;\n\tline-height: inherit;\n\tcolor: #333;\n\tborder-bottom: 1px solid #e5e5e5;\n}\nlabel {\n\tdisplay: inline-block;\n\tmax-width: 100%;\n\tmargin-bottom: 5px;\n\tfont-weight: 700;\n}\n.checkbox label,\n.checkbox-inline,\n.radio label,\n.radio-inline {\n\tfont-weight: 400;\n\tpadding-left: 20px;\n\tcursor: pointer;\n\tmargin-bottom: 0;\n}\ninput[type='search'] {\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tbox-sizing: border-box;\n\t-webkit-appearance: none;\n}\ninput[type='radio'],\ninput[type='checkbox'] {\n\tmargin: 4px 0 0;\n\tmargin-top: 1px\\9;\n\tline-height: normal;\n}\n.form-control,\noutput {\n\tfont-size: 14px;\n\tline-height: 1.428571429;\n\tcolor: #555;\n\tdisplay: block;\n}\ninput[type='file'] {\n\tdisplay: block;\n}\ninput[type='range'] {\n\tdisplay: block;\n\twidth: 100%;\n}\nselect[multiple],\nselect[size] {\n\theight: auto;\n}\ninput[type='radio']:focus,\ninput[type='checkbox']:focus,\ninput[type='file']:focus {\n\toutline: -webkit-focus-ring-color auto 5px;\n\toutline-offset: -2px;\n}\noutput {\n\tpadding-top: 7px;\n}\n.form-control {\n\theight: 34px;\n\tpadding: 6px 12px;\n\tbackground-color: #fff;\n\tborder: 1px solid #ccc;\n\tborder-radius: 4px;\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n\tbox-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n\t-webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n\t-o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n\ttransition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n}\n.form-control:focus {\n\tborder-color: #66afe9;\n\toutline: 0;\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6);\n\tbox-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6);\n}\n.form-control::-moz-placeholder {\n\tcolor: #999;\n\topacity: 1;\n}\n.form-control:-ms-input-placeholder {\n\tcolor: #999;\n}\n.form-control::-webkit-input-placeholder {\n\tcolor: #999;\n}\n.has-success .checkbox,\n.has-success .checkbox-inline,\n.has-success .control-label,\n.has-success .form-control-feedback,\n.has-success .help-block,\n.has-success .radio,\n.has-success .radio-inline,\n.has-success.checkbox label,\n.has-success.checkbox-inline label,\n.has-success.radio label,\n.has-success.radio-inline label {\n\tcolor: #3c763d;\n}\n.form-control::-ms-expand {\n\tborder: 0;\n\tbackground-color: transparent;\n}\n.form-control[disabled],\n.form-control[readonly],\nfieldset[disabled] .form-control {\n\tbackground-color: #eee;\n\topacity: 1;\n}\n.form-control[disabled],\nfieldset[disabled] .form-control {\n\tcursor: not-allowed;\n}\ntextarea.form-control {\n\theight: auto;\n}\n@media screen and (-webkit-min-device-pixel-ratio: 0) {\n\tinput[type='date'].form-control,\n\tinput[type='time'].form-control,\n\tinput[type='datetime-local'].form-control,\n\tinput[type='month'].form-control {\n\t\tline-height: 34px;\n\t}\n\t.input-group-sm input[type='date'],\n\t.input-group-sm input[type='time'],\n\t.input-group-sm input[type='datetime-local'],\n\t.input-group-sm input[type='month'],\n\tinput[type='date'].input-sm,\n\tinput[type='time'].input-sm,\n\tinput[type='datetime-local'].input-sm,\n\tinput[type='month'].input-sm {\n\t\tline-height: 30px;\n\t}\n\t.input-group-lg input[type='date'],\n\t.input-group-lg input[type='time'],\n\t.input-group-lg input[type='datetime-local'],\n\t.input-group-lg input[type='month'],\n\tinput[type='date'].input-lg,\n\tinput[type='time'].input-lg,\n\tinput[type='datetime-local'].input-lg,\n\tinput[type='month'].input-lg {\n\t\tline-height: 46px;\n\t}\n}\n.form-group {\n\tmargin-bottom: 15px;\n}\n.checkbox,\n.radio {\n\tposition: relative;\n\tdisplay: inline;\n\tmargin-top: 10px;\n\tmargin-bottom: 10px;\n}\n.checkbox label,\n.radio label {\n\tmin-height: 20px;\n}\n.checkbox input[type='checkbox'],\n.checkbox-inline input[type='checkbox'],\n.radio input[type='radio'],\n.radio-inline input[type='radio'] {\n\tposition: absolute;\n\tmargin-left: -20px;\n\tmargin-top: 4px\\9;\n}\n.checkbox + .checkbox,\n.radio + .radio {\n\tmargin-top: -5px;\n}\n.checkbox-inline,\n.radio-inline {\n\tposition: relative;\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n.checkbox-inline + .checkbox-inline,\n.radio-inline + .radio-inline {\n\tmargin-top: 0;\n\tmargin-left: 10px;\n}\n.checkbox-inline.disabled,\n.checkbox.disabled label,\n.radio-inline.disabled,\n.radio.disabled label,\nfieldset[disabled] .checkbox label,\nfieldset[disabled] .checkbox-inline,\nfieldset[disabled] .radio label,\nfieldset[disabled] .radio-inline,\nfieldset[disabled] input[type='radio'],\nfieldset[disabled] input[type='checkbox'],\ninput[type='radio'].disabled,\ninput[type='radio'][disabled],\ninput[type='checkbox'].disabled,\ninput[type='checkbox'][disabled] {\n\tcursor: not-allowed;\n}\n.form-control-static {\n\tpadding-top: 7px;\n\tpadding-bottom: 7px;\n\tmargin-bottom: 0;\n\tmin-height: 34px;\n}\n.form-control-static.input-lg,\n.form-control-static.input-sm {\n\tpadding-left: 0;\n\tpadding-right: 0;\n}\n.form-group-sm .form-control,\n.input-sm {\n\tpadding: 5px 10px;\n\tborder-radius: 3px;\n\tfont-size: 12px;\n}\n.input-sm {\n\theight: 30px;\n\tline-height: 1.5;\n}\nselect.input-sm {\n\theight: 30px;\n\tline-height: 30px;\n}\nselect[multiple].input-sm,\ntextarea.input-sm {\n\theight: auto;\n}\n.form-group-sm .form-control {\n\theight: 30px;\n\tline-height: 1.5;\n}\n.form-group-lg .form-control,\n.input-lg {\n\tborder-radius: 6px;\n\tpadding: 10px 16px;\n\tfont-size: 18px;\n}\n.form-group-sm select.form-control {\n\theight: 30px;\n\tline-height: 30px;\n}\n.form-group-sm select[multiple].form-control,\n.form-group-sm textarea.form-control {\n\theight: auto;\n}\n.form-group-sm .form-control-static {\n\theight: 30px;\n\tmin-height: 32px;\n\tpadding: 6px 10px;\n\tfont-size: 12px;\n\tline-height: 1.5;\n}\n.input-lg {\n\theight: 46px;\n\tline-height: 1.3333333;\n}\nselect.input-lg {\n\theight: 46px;\n\tline-height: 46px;\n}\nselect[multiple].input-lg,\ntextarea.input-lg {\n\theight: auto;\n}\n.form-group-lg .form-control {\n\theight: 46px;\n\tline-height: 1.3333333;\n}\n.form-group-lg select.form-control {\n\theight: 46px;\n\tline-height: 46px;\n}\n.form-group-lg select[multiple].form-control,\n.form-group-lg textarea.form-control {\n\theight: auto;\n}\n.form-group-lg .form-control-static {\n\theight: 46px;\n\tmin-height: 38px;\n\tpadding: 11px 16px;\n\tfont-size: 18px;\n\tline-height: 1.3333333;\n}\n.has-feedback {\n\tposition: relative;\n}\n.has-feedback .form-control {\n\tpadding-right: 42.5px;\n}\n.form-control-feedback {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tz-index: 2;\n\tdisplay: block;\n\twidth: 34px;\n\theight: 34px;\n\tline-height: 34px;\n\ttext-align: center;\n\tpointer-events: none;\n}\n.input-group,\n.input-group-btn,\n.input-group-btn > .btn {\n\tposition: relative;\n}\n.form-group-lg .form-control + .form-control-feedback,\n.input-group-lg + .form-control-feedback,\n.input-lg + .form-control-feedback {\n\twidth: 46px;\n\theight: 46px;\n\tline-height: 46px;\n}\n.form-group-sm .form-control + .form-control-feedback,\n.input-group-sm + .form-control-feedback,\n.input-sm + .form-control-feedback {\n\twidth: 30px;\n\theight: 30px;\n\tline-height: 30px;\n}\n.has-success .form-control {\n\tborder-color: #3c763d;\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n\tbox-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n}\n.has-success .form-control:focus {\n\tborder-color: #2b542c;\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;\n\tbox-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;\n}\n.has-success .input-group-addon {\n\tcolor: #3c763d;\n\tborder-color: #3c763d;\n\tbackground-color: #dff0d8;\n}\n.has-warning .checkbox,\n.has-warning .checkbox-inline,\n.has-warning .control-label,\n.has-warning .form-control-feedback,\n.has-warning .help-block,\n.has-warning .radio,\n.has-warning .radio-inline,\n.has-warning.checkbox label,\n.has-warning.checkbox-inline label,\n.has-warning.radio label,\n.has-warning.radio-inline label {\n\tcolor: #8a6d3b;\n}\n.has-warning .form-control {\n\tborder-color: #8a6d3b;\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n\tbox-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n}\n.has-warning .form-control:focus {\n\tborder-color: #66512c;\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;\n\tbox-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;\n}\n.has-warning .input-group-addon {\n\tcolor: #8a6d3b;\n\tborder-color: #8a6d3b;\n\tbackground-color: #fcf8e3;\n}\n.has-error .checkbox,\n.has-error .checkbox-inline,\n.has-error .control-label,\n.has-error .form-control-feedback,\n.has-error .help-block,\n.has-error .radio,\n.has-error .radio-inline,\n.has-error.checkbox label,\n.has-error.checkbox-inline label,\n.has-error.radio label,\n.has-error.radio-inline label {\n\tcolor: #a94442;\n}\n.has-error .form-control {\n\tborder-color: #a94442;\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n\tbox-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n}\n.has-error .form-control:focus {\n\tborder-color: #843534;\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;\n\tbox-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;\n}\n.has-error .input-group-addon {\n\tcolor: #a94442;\n\tborder-color: #a94442;\n\tbackground-color: #f2dede;\n}\n.has-feedback label ~ .form-control-feedback {\n\ttop: 25px;\n}\n.has-feedback label.sr-only ~ .form-control-feedback {\n\ttop: 0;\n}\n.help-block {\n\tdisplay: block;\n\tmargin-top: 5px;\n\tmargin-bottom: 10px;\n\tcolor: #737373;\n}\n@media (min-width: 768px) {\n\t.form-inline .form-control-static,\n\t.form-inline .form-group {\n\t\tdisplay: inline-block;\n\t}\n\t.form-inline .control-label,\n\t.form-inline .form-group {\n\t\tmargin-bottom: 0;\n\t\tvertical-align: middle;\n\t}\n\t.form-inline .form-control {\n\t\tdisplay: inline-block;\n\t\twidth: auto;\n\t\tvertical-align: middle;\n\t}\n\t.form-inline .input-group {\n\t\tdisplay: inline-table;\n\t\tvertical-align: middle;\n\t}\n\t.form-inline .input-group .form-control,\n\t.form-inline .input-group .input-group-addon,\n\t.form-inline .input-group .input-group-btn {\n\t\twidth: auto;\n\t}\n\t.form-inline .input-group > .form-control {\n\t\twidth: 100%;\n\t}\n\t.form-inline .checkbox,\n\t.form-inline .radio {\n\t\tdisplay: inline-block;\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tvertical-align: middle;\n\t}\n\t.form-inline .checkbox label,\n\t.form-inline .radio label {\n\t\tpadding-left: 0;\n\t}\n\t.form-inline .checkbox input[type='checkbox'],\n\t.form-inline .radio input[type='radio'] {\n\t\tposition: relative;\n\t\tmargin-left: 0;\n\t}\n\t.form-inline .has-feedback .form-control-feedback {\n\t\ttop: 0;\n\t}\n\t.form-horizontal .control-label {\n\t\ttext-align: right;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: 7px;\n\t}\n}\n.form-horizontal .checkbox,\n.form-horizontal .checkbox-inline,\n.form-horizontal .radio,\n.form-horizontal .radio-inline {\n\tmargin-top: 0;\n\tmargin-bottom: 0;\n\tpadding-top: 7px;\n}\n.form-horizontal .checkbox,\n.form-horizontal .radio {\n\tmin-height: 27px;\n}\n.form-horizontal .form-group {\n\tmargin-left: -15px;\n\tmargin-right: -15px;\n}\n.form-horizontal .has-feedback .form-control-feedback {\n\tright: 15px;\n}\n@media (min-width: 768px) {\n\t.form-horizontal .form-group-lg .control-label {\n\t\tpadding-top: 11px;\n\t\tfont-size: 18px;\n\t}\n\t.form-horizontal .form-group-sm .control-label {\n\t\tpadding-top: 6px;\n\t\tfont-size: 12px;\n\t}\n}\n.input-group {\n\tdisplay: table;\n\tborder-collapse: separate;\n}\n.input-group[class*='col-'] {\n\tfloat: none;\n\tpadding-left: 0;\n\tpadding-right: 0;\n}\n.input-group .form-control {\n\tposition: relative;\n\tz-index: 2;\n\tfloat: left;\n\twidth: 100%;\n\tmargin-bottom: 0;\n}\n.input-group .form-control:focus {\n\tz-index: 3;\n}\n.input-group-lg > .form-control,\n.input-group-lg > .input-group-addon,\n.input-group-lg > .input-group-btn > .btn {\n\theight: 46px;\n\tpadding: 10px 16px;\n\tfont-size: 18px;\n\tline-height: 1.3333333;\n\tborder-radius: 6px;\n}\nselect.input-group-lg > .form-control,\nselect.input-group-lg > .input-group-addon,\nselect.input-group-lg > .input-group-btn > .btn {\n\theight: 46px;\n\tline-height: 46px;\n}\nselect[multiple].input-group-lg > .form-control,\nselect[multiple].input-group-lg > .input-group-addon,\nselect[multiple].input-group-lg > .input-group-btn > .btn,\ntextarea.input-group-lg > .form-control,\ntextarea.input-group-lg > .input-group-addon,\ntextarea.input-group-lg > .input-group-btn > .btn {\n\theight: auto;\n}\n.input-group-sm > .form-control,\n.input-group-sm > .input-group-addon,\n.input-group-sm > .input-group-btn > .btn {\n\theight: 30px;\n\tpadding: 5px 10px;\n\tfont-size: 12px;\n\tline-height: 1.5;\n\tborder-radius: 3px;\n}\nselect.input-group-sm > .form-control,\nselect.input-group-sm > .input-group-addon,\nselect.input-group-sm > .input-group-btn > .btn {\n\theight: 30px;\n\tline-height: 30px;\n}\nselect[multiple].input-group-sm > .form-control,\nselect[multiple].input-group-sm > .input-group-addon,\nselect[multiple].input-group-sm > .input-group-btn > .btn,\ntextarea.input-group-sm > .form-control,\ntextarea.input-group-sm > .input-group-addon,\ntextarea.input-group-sm > .input-group-btn > .btn {\n\theight: auto;\n}\n.input-group .form-control,\n.input-group-addon,\n.input-group-btn {\n\tdisplay: table-cell;\n}\n.input-group .form-control:not(:first-child):not(:last-child),\n.input-group-addon:not(:first-child):not(:last-child),\n.input-group-btn:not(:first-child):not(:last-child) {\n\tborder-radius: 0;\n}\n.input-group-addon,\n.input-group-btn {\n\twidth: 1%;\n\twhite-space: nowrap;\n\tvertical-align: middle;\n}\n.input-group-addon {\n\tpadding: 6px 12px;\n\tfont-size: 14px;\n\tfont-weight: 400;\n\tline-height: 1;\n\tcolor: #555;\n\ttext-align: center;\n\tbackground-color: #eee;\n\tborder: 1px solid #ccc;\n\tborder-radius: 4px;\n}\n.input-group-addon.input-sm {\n\tpadding: 5px 10px;\n\tfont-size: 12px;\n\tborder-radius: 3px;\n}\n.input-group-addon.input-lg {\n\tpadding: 10px 16px;\n\tfont-size: 18px;\n\tborder-radius: 6px;\n}\n.input-group-addon input[type='radio'],\n.input-group-addon input[type='checkbox'] {\n\tmargin-top: 0;\n}\n.input-group .form-control:first-child,\n.input-group-addon:first-child,\n.input-group-btn:first-child > .btn,\n.input-group-btn:first-child > .btn-group > .btn,\n.input-group-btn:first-child > .dropdown-toggle,\n.input-group-btn:last-child > .btn-group:not(:last-child) > .btn,\n.input-group-btn:last-child > .btn:not(:last-child):not(.dropdown-toggle) {\n\tborder-bottom-right-radius: 0;\n\tborder-top-right-radius: 0;\n}\n.input-group-addon:first-child {\n\tborder-right: 0;\n}\n.input-group .form-control:last-child,\n.input-group-addon:last-child,\n.input-group-btn:first-child > .btn-group:not(:first-child) > .btn,\n.input-group-btn:first-child > .btn:not(:first-child),\n.input-group-btn:last-child > .btn,\n.input-group-btn:last-child > .btn-group > .btn,\n.input-group-btn:last-child > .dropdown-toggle {\n\tborder-bottom-left-radius: 0;\n\tborder-top-left-radius: 0;\n}\n.input-group-addon:last-child {\n\tborder-left: 0;\n}\n.input-group-btn {\n\tfont-size: 0;\n\twhite-space: nowrap;\n}\n.input-group-btn > .btn + .btn {\n\tmargin-left: -1px;\n}\n.input-group-btn > .btn:active,\n.input-group-btn > .btn:focus,\n.input-group-btn > .btn:hover {\n\tz-index: 2;\n}\n.input-group-btn:first-child > .btn,\n.input-group-btn:first-child > .btn-group {\n\tmargin-right: -1px;\n}\n.input-group-btn:last-child > .btn,\n.input-group-btn:last-child > .btn-group {\n\tz-index: 2;\n\tmargin-left: -1px;\n}\n.hidden,\n.hide {\n\tdisplay: none !important;\n}\n", ""]);
// Exports
module.exports = exports;


/***/ }),
/* 138 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (useSourceMap) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item, useSourceMap);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

function cssWithMappingToString(item, useSourceMap) {
  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring

  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (useSourceMap && typeof btoa === 'function') {
    var sourceMapping = toComment(cssMapping);
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
} // Adapted from convert-source-map (MIT)


function toComment(sourceMap) {
  // eslint-disable-next-line no-undef
  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
  return "/*# ".concat(data, " */");
}

/***/ }),
/* 139 */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(136);
            var content = __webpack_require__(140);

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {"injectType":"singletonStyleTag","insert":"html"};

options.insert = "html";
options.singleton = true;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),
/* 140 */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(138);
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".rules-group-container {\n\tborder: 1px solid #ccc !important;\n\tbackground: none !important;\n}\n\n.query-builder .btn-primary {\n\ttext-shadow: none !important;\n}\n\n.query-builder .form-control {\n\theight: 22px !important;\n\tfont-size: 12px !important;\n\tpadding: 2px !important;\n}\n\n.query-builder .rule-value-container label {\n\tposition: relative;\n\tleft: 5px;\n\twidth: 40px;\n\ttop: 3px;\n}\n\n.query-builder .radio-default input {\n\tdisplay: inline !important;\n}\n\n.query-builder .rules-group-container[data-esgst-paused='true'] [data-resume='group'] {\n\tdisplay: block !important;\n}\n\n.query-builder .rules-group-container [data-resume='group'],\n.query-builder .rules-group-container[data-esgst-paused='true'] [data-pause='group']\n.query-builder .rule-container [data-resume='rule'],\n.query-builder .rule-container[data-esgst-paused='true'] [data-pause='rule'],\n.rule-operator-container > span {\n\tdisplay: none !important;\n}\n\n.query-builder .rule-container[data-esgst-paused=\"true\"] [data-resume=\"rule\"] {\n  display: block !important;\n  border-radius: 3px 0 0 3px !important;\n}\n\n.query-builder .rule-container[data-esgst-paused='true'],\n.query-builder .rules-group-container[data-esgst-paused='true'] {\n\topacity: 0.5 !important;\n}\n", ""]);
// Exports
module.exports = exports;


/***/ }),
/* 141 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "esgst", function() { return esgst; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(122);
/* harmony import */ var _lib_parsedown__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(142);
/* harmony import */ var _modules__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(143);
/* harmony import */ var _LocalStorage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(96);
/* harmony import */ var _Scope__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(219);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(132);










class Esgst {
  constructor() {
    this.CURRENT_GIVEAWAY_VERSION = 2;
    this.gmf = undefined;
    this.es_loadNext = undefined;
    this.es_refresh = undefined;
    this.es_refreshAll = undefined;
    this.gpf = undefined;
    this.es = undefined;
    this.mgc_createTrainSwitch = undefined;
    this.mgc_removeLinksSwitch = undefined;
    this.gas = undefined;
    this.ged_addIcons = undefined;
    this.cf = undefined;
    this.cfh = undefined;
    this.qiv = undefined;
    this.mm_enable = undefined;
    this.mm_disable = undefined;
    this.tf = undefined;
    this.df = undefined;
    this.gf = undefined;
    this.wbcButton = undefined;
    this.minimizePanel = undefined;
    this.leftMainPageHeadingButtons = undefined;
    this.rightMainPageHeadingButtons = undefined;
    this.cvLevels = [0, 0.01, 25, 50, 100, 250, 500, 1000, 2000, 3000, 5000];
    this.currentPaths = undefined;
    this.winners = undefined;
    this.emojis = undefined;
    this.uscButton = undefined;
    this.isSyncing = undefined;
    this.giveawayExtraPanel = undefined;
    this.giveawayExtraPanel_gv = undefined;
    this.mmSelectionStart = undefined;
    this.lpvStyleArray = undefined;
    this.pvStyleArray = undefined;
    this.currentPage = undefined;
    this.itemsPerPage = undefined;
    this.delistedGames = undefined;
    this.featuresById = undefined;
    this.featuresAncestors = undefined;
    this.gc_queue = [];
    this.gc_queue_index = 0;
    this.is_gc_running_queue = false;
    this.settingsUrl = `https://www.steamgifts.com/account/settings/profile?esgst=settings`;
    this.syncUrl = `https://www.steamgifts.com/account/settings/profile?esgst=sync`;
    this.backupUrl = `https://www.steamgifts.com/account/settings/profile?esgst=backup`;
    this.restoreUrl = `https://www.steamgifts.com/account/settings/profile?esgst=restore`;
    this.deleteUrl = `https://www.steamgifts.com/account/settings/profile?esgst=delete`;
    this.cleanUrl = `https://www.steamgifts.com/account/settings/profile?esgst=clean`;
    this.dataManagementUrl = `https://www.steamgifts.com/account/settings/profile?esgst=data-management`;
    this.path = window.location.pathname.replace(/\/search/, '');
    this.customPages = {};
    this.sidebarGroups = [];
    this.paths = {
      sg: [{
        name: 'Everywhere',
        pattern: '.*'
      }, {
        name: 'Giveaways',
        pattern: `^/($|giveaways)`
      }, {
        name: 'Browse Giveaways',
        pattern: `^/($|giveaways($|/search))`
      }, {
        name: 'Browse Giveaways - All',
        pattern: `^/($|giveaways($|/search\\?(?!type)))`
      }, {
        name: 'Browse Giveaways - Wishlist',
        pattern: `^/giveaways/search\\?type=wishlist`
      }, {
        name: 'Browse Giveaways - Recommended',
        pattern: `^/giveaways/search\\?type=recommended`
      }, {
        name: 'Browse Giveaways - Group',
        pattern: `^/giveaways/search\\?type=group`
      }, {
        name: 'Browse Giveaways - New',
        pattern: `^/giveaways/search\\?type=new`
      }, {
        name: 'Community Wishlist',
        pattern: '^/giveaways/wishlist'
      }, {
        name: 'My Giveaways - New',
        pattern: '^/giveaways/new'
      }, {
        name: 'My Giveaways - Created',
        pattern: '^/giveaways/created'
      }, {
        name: 'My Giveaways - Entered',
        pattern: '^/giveaways/entered'
      }, {
        name: 'My Giveaways - Won',
        pattern: '^/giveaways/won'
      }, {
        name: 'Archive',
        pattern: '^/archive'
      }, {
        name: 'Archive - All',
        pattern: `^/archive($|/search)`
      }, {
        name: 'Archive - Coming Soon',
        pattern: '^/archive/coming-soon'
      }, {
        name: 'Archive - Open',
        pattern: '^/archive/open'
      }, {
        name: 'Archive - Closed',
        pattern: '^/archive/closed'
      }, {
        name: 'Archive - Deleted',
        pattern: '^/archive/deleted'
      }, {
        name: 'Bundle Games',
        pattern: '^/bundle-games'
      }, {
        name: 'Giveaway',
        pattern: '^/giveaway/'
      }, {
        name: 'Giveaway - Comments',
        pattern: `^/giveaway/.+?/[^/]+($|/search)`
      }, {
        name: 'Giveaway - Entries',
        pattern: `^/giveaway/.+?/[^/]+/entries`
      }, {
        name: 'Giveaway - Winners',
        pattern: `^/giveaway/.+?/[^/]+/winners`
      }, {
        name: 'Giveaway - Groups',
        pattern: `^/giveaway/.+?/[^/]+/groups`
      }, {
        name: 'Giveaway - Region Restrictions',
        pattern: `^/giveaway/.{5}/[A-Za-z0-9-]+/region-restrictions`
      }, {
        name: 'Game',
        pattern: '^/game/'
      }, {
        name: 'Game - Giveaways',
        pattern: `^/game/.+?/[^/]+($|/search)`
      }, {
        name: 'Game - Coming Soon',
        pattern: `^/game/.+?/[^/]+/coming-soon`
      }, {
        name: 'Game - Open',
        pattern: `^/game/.+?/[^/]+/open`
      }, {
        name: 'Game - Closed',
        pattern: `^/game/.+?/[^/]+/closed`
      }, {
        name: 'Game - Deleted',
        pattern: `^/game/.+?/[^/]+/deleted`
      }, {
        name: 'Game - Stats',
        pattern: `^/game/.+?/[^/]+/stats`
      }, {
        name: 'Group',
        pattern: '^/group/'
      }, {
        name: 'Group - Giveaways',
        pattern: `^/group/.+?/[^/]+($|/search)`
      }, {
        name: 'Group - Users',
        pattern: `^/group/.+?/[^/]+/users`
      }, {
        name: 'Group - Stats',
        pattern: `^/group/.+?/[^/]+/stats`
      }, {
        name: 'Group - Wishlist',
        pattern: `^/group/.+?/[^/]+/wishlist`
      }, {
        name: 'Discussions',
        pattern: '^/discussions'
      }, {
        name: 'Discussions - All',
        pattern: `^/discussions($|/search)`
      }, {
        name: 'Discussions - Add-ons / Tools',
        pattern: '^/discussions/addons-tools'
      }, {
        name: 'Discussions - Announcements',
        pattern: '^/discussions/announcements'
      }, {
        name: 'Discussions - Bugs / Suggestions',
        pattern: '^/discussions/bugs-suggestions'
      }, {
        name: 'Discussions - Deals',
        pattern: '^/discussions/deals'
      }, {
        name: 'Discussions - Game Showcase',
        pattern: '^/discussions/game-showcase'
      }, {
        name: 'Discussions - General',
        pattern: '^/discussions/general'
      }, {
        name: 'Discussions - Group Recruitment',
        pattern: '^/discussions/group-recruitment'
      }, {
        name: 'Discussions - Hardware',
        pattern: '^/discussions/hardware'
      }, {
        name: 'Discussions - Help',
        pattern: '^/discussions/help'
      }, {
        name: "Discussions - Let's Play Together",
        pattern: '^/discussions/lets-play-together'
      }, {
        name: 'Discussions - Movies / TV',
        pattern: '^/discussions/movies-tv'
      }, {
        name: 'Discussions - Off Topic',
        pattern: '^/discussions/off-topic'
      }, {
        name: 'Discussions - Puzzles / Events',
        pattern: '^/discussions/puzzles-events'
      }, {
        name: 'Discussions - Uncategorized',
        pattern: '^/discussions/uncategorized'
      }, {
        name: 'Discussions - User Projects',
        pattern: '^/discussions/user-projects'
      }, {
        name: 'Discussions - Whitelist Recruitment',
        pattern: '^/discussions/whitelist-recruitment'
      }, {
        name: 'My Discussions - New',
        pattern: '^/discussions/new'
      }, {
        name: 'My Discussions - Edit',
        pattern: '^/discussions/edit'
      }, {
        name: 'My Discussions - Subscribed',
        pattern: '^/discussions/subscribed'
      }, {
        name: 'My Discussions - Bookmarked',
        pattern: '^/discussions/bookmarked'
      }, {
        name: 'My Discussions - Created',
        pattern: '^/discussions/created'
      }, {
        name: 'Discussion',
        pattern: '^/discussion/'
      }, {
        name: 'Tickets',
        pattern: '^/support/tickets'
      }, {
        name: 'Tickets - All',
        pattern: `^/support/tickets($|/search)`
      }, {
        name: 'Tickets - Change Giveaway Game',
        pattern: '^/support/tickets/change-giveaway-game'
      }, {
        name: 'Tickets - Delete Giveaway',
        pattern: '^/support/tickets/delete-giveaway'
      }, {
        name: 'Tickets - Other',
        pattern: '^/support/tickets/other'
      }, {
        name: 'Tickets - Request New Winner',
        pattern: '^/support/tickets/request-new-winner'
      }, {
        name: 'Tickets - Unsuspend Request',
        pattern: '^/support/tickets/unsuspend-request'
      }, {
        name: 'Tickets - User Report',
        pattern: '^/support/tickets/user-report'
      }, {
        name: 'Ticket',
        pattern: '^/support/ticket/'
      }, {
        name: 'User',
        pattern: '^/user'
      }, {
        name: 'User - Giveaways - Sent',
        pattern: `^/user/\\w+?($|/search)`
      }, {
        name: 'User - Giveaways - Won',
        pattern: '^/user/\\w+?/giveaways/won'
      }, {
        name: 'Messages',
        pattern: '^/messages'
      }, {
        name: 'Messages - All',
        pattern: `^/messages($|/search)`
      }, {
        name: 'Messages - Giveaways',
        pattern: '^/messages/giveaways'
      }, {
        name: 'Messages - Discussions',
        pattern: '^/messages/discussions'
      }, {
        name: 'Messages - Tickets',
        pattern: '^/messages/tickets'
      }, {
        name: 'Manage - Whitelist',
        pattern: '^/account/manage/whitelist'
      }, {
        name: 'Manage - Blacklist',
        pattern: '^/account/manage/blacklist'
      }, {
        name: 'Steam - Games',
        pattern: '^/account/steam/games'
      }, {
        name: 'Steam - Groups',
        pattern: '^/account/steam/groups'
      }, {
        name: 'Steam - Wishlist',
        pattern: '^/account/steam/wishlist'
      }, {
        name: 'About - Brand Assets',
        pattern: '^/about/brand-assets'
      }, {
        name: 'About - Comment Formatting',
        pattern: '^/about/comment-formatting'
      }, {
        name: 'About - FAQ',
        pattern: '^/about/faq'
      }, {
        name: 'About - Guidelines',
        pattern: '^/about/guidelines'
      }, {
        name: 'Legal - Privacy Policy',
        pattern: '^/legal/privacy-policy'
      }, {
        name: 'Legal - Cookie Policy',
        pattern: '^/legal/cookie-policy'
      }, {
        name: 'Legal - Terms Of Service',
        pattern: '^/legal/terms-of-service'
      }, {
        name: 'Account',
        pattern: '^/account'
      }, {
        name: 'Settings - Profile',
        pattern: '^/account/settings/profile'
      }, {
        name: 'Settings - Patreon',
        pattern: '^/account/settings/patreon'
      }, {
        name: 'Settings - Giveaways',
        pattern: '^/account/settings/giveaways'
      }, {
        name: 'Settings - Giveaways - Filters',
        pattern: '^/account/settings/giveaways/filters'
      }, {
        name: 'Settings - Email Notifications',
        pattern: '^/account/settings/email-notifications'
      }, {
        name: 'Settings - Referrals',
        pattern: '^/account/settings/referrals'
      }, {
        name: 'Privacy - Delete Account',
        pattern: '^/account/privacy/delete-account'
      }, {
        name: 'Stats - Personal - Community',
        pattern: '^/stats/personal/community'
      }, {
        name: 'Stats - Personal - Steam',
        pattern: '^/stats/personal/steam'
      }, {
        name: 'Stats - Community - Giveaways',
        pattern: '^/stats/community/giveaways'
      }, {
        name: 'Stats - Community - Discussions',
        pattern: '^/stats/community/discussions'
      }, {
        name: 'Stats - Community - Comments',
        pattern: '^/stats/community/comments'
      }, {
        name: 'Stats - Community - Support',
        pattern: '^/stats/community/support'
      }, {
        name: 'Stats - Community - Users',
        pattern: '^/stats/community/users'
      }, {
        name: 'Stats - Steam - Games',
        pattern: '^/stats/steam/games'
      }, {
        name: 'ESGST - Settings',
        pattern: `^/account/settings/profile\\?esgst=settings`
      }, {
        name: 'ESGST - Sync',
        pattern: `^/account/settings/profile\\?esgst=sync`
      }, {
        name: 'ESGST - Backup',
        pattern: `^/account/settings/profile\\?esgst=backup`
      }, {
        name: 'ESGST - Restore',
        pattern: `^/account/settings/profile\\?esgst=restore`
      }, {
        name: 'ESGST - Delete',
        pattern: `^/account/settings/profile\\?esgst=delete`
      }, {
        name: 'ESGST - Clean',
        pattern: `^/account/settings/profile\\?esgst=clean`
      }, {
        name: 'ESGST - Data Management',
        pattern: `^/account/settings/profile\\?esgst=data-management`
      }, {
        name: 'ESGST - Archive Searcher',
        pattern: `^/account/settings/profile\\?esgst=as`
      }, {
        name: 'ESGST - Comment / Entry Checker',
        pattern: `^/account/settings/profile\\?esgst=cec`
      }, {
        name: 'ESGST - Giveaway Bookmarks',
        pattern: `^/account/settings/profile\\?esgst=gb`
      }, {
        name: 'ESGST - Giveaway Encryptor / Decryptor',
        pattern: `^/account/settings/profile\\?esgst=ged`
      }, {
        name: 'ESGST - Giveaway Extractor',
        pattern: `^/account/settings/profile\\?esgst=ge`
      }, {
        name: 'ESGST - Group Library / Wishlist Checker',
        pattern: `^/account/settings/profile\\?esgst=glwc`
      }],
      st: [{
        name: 'Everywhere',
        pattern: '.*'
      }, {
        name: 'Trades',
        pattern: `^/($|trades)`
      }, {
        name: 'Browse Trades',
        pattern: `^/($|trades($|/search))`
      }, {
        name: 'My Trades - New',
        pattern: '^/trades/new'
      }, {
        name: 'My Trades - Created',
        pattern: `^/trades/search\\?user=%steamId%`
      }, {
        name: 'Trade',
        pattern: '^/trade/'
      }, {
        name: 'Vote',
        pattern: '^/vote/'
      }, {
        name: 'Messages',
        pattern: '^/messages'
      }, {
        name: 'User',
        pattern: '^/user'
      }, {
        name: 'Reviews',
        pattern: '^/reviews'
      }, {
        name: 'Comments',
        pattern: '^/comments'
      }, {
        name: 'Settings',
        pattern: '^/settings'
      }, {
        name: 'About - Comment Formatting',
        pattern: '^/about/comment-formatting'
      }, {
        name: 'About - Guidelines',
        pattern: '^/about/guidelines'
      }, {
        name: 'Legal - Privacy Policy',
        pattern: '^/legal/privacy-policy'
      }, {
        name: 'Legal - Cookie Policy',
        pattern: '^/legal/cookie-policy'
      }, {
        name: 'Legal - Terms Of Service',
        pattern: '^/legal/terms-of-service'
      }]
    };
    this.formatDistanceLocale = {
      formatDistance: (token, count) => {
        switch (token) {
          case 'xSeconds':
            return `${count}s`;
          case 'xMinutes':
            return `${count}m`;
          case 'xHours':
            return `${count}h`;
          case 'xDays':
            return `${count}d`;
          case 'xMonths':
            return `${count}mo`;
          case 'xYears':
            return `${count}y`;
        }
      }
    };
    this.newGiveawayDateFormat = `MMM d, yyyy h:mm a`;
    this.documentEvents = {
      click: null,
      keydown: null
    };
    this.windowEvents = {};

    /**
     * @property {string} level_min
     * @property {string} level_max
     * @property {string} entry_min
     * @property {string} entry_max
     * @property {string} copy_min
     * @property {string} copy_max
     * @property {string} point_min
     * @property {string} point_max
     * @property {string} release_date_min
     * @property {string} release_date_max
     * @property {string} region_restricted
     */
    this.parameters = {};

    /**
     * @property {Parsedown} markdownParser
     */
    this.markdownParser = null;
    this.sg = null;
    this.st = null;

    // noinspection SpellCheckingInspection
    this.icon = `data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAqv8DCbP/Hgeq+CQIrf8iCK3/Igit/yIIrf8iB6//Iwit9x8Aqv8DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKr0GAa2/c0DvfzfA7f83QO3/N0Dt/zdA7f83QO+/d4Gs/3OAKP1GQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACm/xQFs/n2Bcf//wW///8FwP//BcD//wW///8Fx///BbP69gC2/xUAAAAAAAAAAAAAAAAA/1UDFptOFxSZMxkLpJktAq720QW1+ugEsfvjA7b92wO2/dsEsfvjBbX66Aau/dEoiO4tUlLWGU5k3hdVVf8DEJxKHxWqT8cVrU7uE6VN0guqny0Apv8XAJfQGwBAVywAQFcsAJfQGwCx/xcogugtS2Lk0lBl6u5Qae7ISmPeHxagSSMVr07jF7lV/xOiSu0brgATAAAAAAAAAA8AAAC/AAAAwAAAABAAAAAAYznjEkth4OxWb/3/T2jv40lf4iMXnksiEq1O3RayUv8UpEnkEo0+HQAAABkAAABBAAAA8QAAAPEAAABBAAAAGUBSvxxOYeDjU2v0/05m7d1LYuEiF55LIhKtTt0Ws1L/FahN2gU1FTAAAADAAAAA7AAAAP0AAAD9AAAA7AAAAMAVG0owUGPm2lNr9P9OZu3dS2LhIheeSyISrU7dFrNS/xWoTdoFNRswAAAAvwAAAOsAAAD9AAAA/QAAAOsAAADAFRtKMFBj6NpTa/T/Tmbt3Uti4SIXnksiEq1O3RayUv8UpEnkEo0+HQAAABgAAABAAAAA8QAAAPEAAABBAAAAGT5PuR1OYeDjU2v0/05m7d1LYuEiFqBJIxWuT+QXuVX/E6JL7QC8XhMAAAAAAAAADwAAAL8AAAC/AAAAEAAAAAAOR/8SSWLh7FZv/f9PaO/jSV/iIxCUSh8Vrk7HFqxN7ROlS9JskzMt1XULGK12EhxGLgYsRy8GK612EhzVgAsYgmxxLU1i39JNZ+vtT2fwx0pj1h8AqlUDF65GFgqZUhlsiC0txH0T0s5/EujJgBPkz4QR28+EEdvJgBPkzn8Q6Md+E9KLdHosM1LWGUZo6BZVVf8DAAAAAAAAAAAAAAAA/2YAFMl9EvbgjRb/14gV/9eIFf/XiBX/14gV/9+NFv/KgBD254YAFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAL91FRjKgRHN1IgU3s+EEt3PhBLdz4QS3c+EEt3UiBTezYMRzcJ6FBkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACqqgADxIARHr18FiO8eA8ivHgPIrx4DyK8eA8ivXwPI8SAER7/VQADAAAAAAAAAAAAAAAA78cAAPA3AAD4FwAABCAAADGOAAAE+AAAkBEAAJ55AACYOQAAlgEAAER4AAAXaAAATnoAAPgXAAD0JwAA69cAAA==`;
    // noinspection SpellCheckingInspection
    this.sgIcon = `data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAQAQAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIUAAAD5AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAPoAAACFAAAAAAAAAAAAAAD8AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA+QAAAAAAAAAAAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAAAAAAAAAAAAP8AAAD/AAAA/wAAABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAA/wAAAP8AAAD/AAAAAAAAAAAAAAD/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAAAAAAA/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAA/wAAAP8AAAAAAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAAD/AAAAAAAAAAAAAAD/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAAAAAAA/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAA/wAAAP8AAAAAAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAAD/AAAAAAAAAAAAAAD/AAAA/wAAAP8AAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAP8AAAD/AAAA/wAAAAAAAAAAAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAAAAAAAAAAAAPwAAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD5AAAAAAAAAAAAAACFAAAA+QAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD5AAAAhQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAP//AADAAwAAwAMAAMfjAADP8wAAz/MAAM/zAADP8wAAz/MAAM/zAADH4wAAwAMAAMADAAD//wAA//8AAA==`;
    // noinspection SpellCheckingInspection
    this.stIcon = `data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAQAQAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABbD6SgWw+ucFsPrkBbD6SgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWw+uYFsPr/BbD6/wWw+ucAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFsPrmBbD6/wWw+v8FsPrmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABbD6SQWw+uYFsPrmBbD6SQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFKRLShSkS+cUpEvkFKRLSgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAExi4EpMYuDnTGLg5Exi4EoAAAAAAAAAABSkS+YUpEv/FKRL/xSkS+cAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMYuDmTGLg/0xi4P9MYuDnAAAAAAAAAAAUpEvmFKRL/xSkS/8UpEvmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATGLg5kxi4P9MYuD/TGLg5gAAAAAAAAAAFKRLSRSkS+YUpEvmFKRLSQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAExi4ElMYuDmTGLg5kxi4EkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMZ9E0rGfRPnxn0T5MZ9E0oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADGfRPmxn0T/8Z9E//GfRPnAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxn0T5sZ9E//GfRP/xn0T5gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMZ9E0nGfRPmxn0T5sZ9E0kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAPw/AAD8PwAA/D8AAPw/AAD//wAAh+EAAIfhAACH4QAAh+EAAP//AAD8PwAA/D8AAPw/AAD8PwAA//8AAA==`;
    this.attachedImages = [];
    this.popups = [];
    this.openPopups = 0;
    this.elgbCache = {};
    this.originalHash = window.location.hash;
    this.userPath = false;
    this.gamePath = false;
    this.groupPath = false;
    this.regionsPath = false;
    this.groupWishlistPath = false;
    this.mainPath = false;
    this.winnersPath = false;
    this.giveawaysPath = false;
    this.giveawayCommentsPath = false;
    this.discussionsTicketsPath = false;
    this.ticketsPath = false;
    this.tradesPath = false;
    this.discussionsTicketsTradesPath = false;
    this.discussionTicketTradeCommentsPath = false;
    this.archivePath = false;
    this.profilePath = false;
    this.giveawayPath = false;
    this.discussionPath = false;
    this.ticketPath = false;
    this.tradePath = false;
    this.discussionsPath = false;
    this.newDiscussionPath = false;
    this.editDiscussionPath = false;
    this.createdDiscussionsPath = false;
    this.newGiveawayPath = false;
    this.newTicketPath = false;
    this.wishlistPath = false;
    this.createdPath = false;
    this.wonPath = false;
    this.enteredPath = false;
    this.commentsPath = false;
    this.aboutPath = false;
    this.whitelistPath = false;
    this.blacklistPath = false;
    this.headerSize = 0;
    this.mainPageHeadingSize = 0;
    this.footerSize = 0;
    this.pageTop = 0;
    this.commentsTop = 0;
    this.apPopouts = {};
    this.tsTables = [];
    this.currentUsers = {};
    this.currentGroups = {};
    this.mmWbcUsers = [];
    this.gameFeatures = [];
    this.groupFeatures = [];
    this.giveawayFeatures = [];
    this.commentFeatures = [];
    this.commentV2Features = [];
    this.discussionFeatures = [];
    this.tradeFeatures = [];
    this.profileFeatures = [];
    this.userFeatures = [];
    this.endlessFeatures = [];
    this.games = {};
    this.minimizeList = null;
    this.sidebar = null;

    /** @type {string} */
    this.currentVersion = undefined;
    this.previousVersion = undefined;
    this.isFirstRun = false;
    this.isUpdate = false;
    this.storage = undefined;
    this.settings = undefined;
    this.groups = null;
    this.features = null;

    /** @type {boolean} */
    this.firstInstall = undefined;

    /** @type {{ url: string, timestamp: number }[]} */
    this.requestLog = [];
    this.giveaways = null;
    this.mainContext = null;
    this.pageOuterWrap = null;
    this.leftButtons = null;
    this.rightButtons = null;
    this.hidingGame = undefined;
    this.mainPageHeading = null;

    /** @type {string} */
    this.pageOuterWrapClass = '';

    /** @type {string} */
    this.pageHeadingClass = '';

    /** @type {string} */
    this.pageHeadingBreadcrumbsClass = '';
    this.replyBox = null;

    /** @type {string} */
    this.cancelButtonClass = '';

    /** @type {string} */
    this.paginationNavigationClass = '';

    /** @type {string} */
    this.hiddenClass = '';

    /** @type {string} */
    this.selectedClass = '';

    /** @type {string} */
    this.originalUrl = '';
    this.favicon = null;

    /** @type {string} */
    this.originalTitle = '';

    /** @type {string} */
    this.searchUrl = '';
    this.pagination = null;
    this.featuredContainer = null;
    this.paginationNavigation = null;
    this.enterGiveawayButton = null;
    this.leaveGiveawayButton = null;
    this.activeDiscussions = null;
    this.pinnedGiveaways = null;
    this.discussions = null;
    this.tickets = null;
    this.trades = null;
    this.users = null;

    /** @type {boolean} */
    this.busy = false;
    this.showChangelog = null;

    /** @type {"sg"|"st"} */
    this.name = undefined;
    this.style = null;
    this.ustButton = null;
    this.modules = null;
    this.decryptedGiveaways = null;
    this.gfPopup = null;
    this.cfPopup = null;
    this.gc_categories_ids = ['gc_gi', 'gc_r', 'gc_hltb', 'gc_ocv', 'gc_fcv', 'gc_rcv', 'gc_ncv', 'gc_h', 'gc_i', 'gc_o', 'gc_w', 'gc_f', 'gc_pw', 'gc_a', 'gc_bd', 'gc_bvg', 'gc_sp', 'gc_mp', 'gc_sc', 'gc_tc', 'gc_l', 'gc_m', 'gc_ea', 'gc_lg', 'gc_rm', 'gc_dlc', 'gc_p', 'gc_rd', 'gc_g'];
    this.giveawayErrorButton = null;
    this.gcToFetch = null;
    this.rerolls = null;
    this.lastPageLink = null;
    this.stopEs = false;
    this.lastPage = null;
    this.lpvStyle = null;
    this.pvStyle = null;
    this.toDismiss = [];
    this.draggable = {};
    this.modules = _modules__WEBPACK_IMPORTED_MODULE_6__["modules"];
    for (const key in this.modules) {
      if (this.modules.hasOwnProperty(key) && this.modules[key].setEsgst) {
        this.modules[key].setEsgst.call(this.modules[key], this);
      }
    }
    this.documentEvents.click = new Set();
    this.documentEvents.keydown = new Set();
    _Scope__WEBPACK_IMPORTED_MODULE_8__["Scope"].create('main', document);
    _Scope__WEBPACK_IMPORTED_MODULE_8__["Scope"].setCurrent('main');
    this.parameters = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_4__["Utils"].getQueryParams();
    this.locationHref = window.location.href;
    this.markdownParser = new _lib_parsedown__WEBPACK_IMPORTED_MODULE_5__["Parsedown"]();
    this.sg = window.location.hostname.match(/www.steamgifts.com/);
    this.st = window.location.hostname.match(/www.steamtrades.com/);
    this.elgbCache = JSON.parse(_LocalStorage__WEBPACK_IMPORTED_MODULE_7__["LocalStorage"].get('elgbCache', `{"descriptions": {}, "timestamp": ${Date.now()}}`));
    this.userPath = window.location.pathname.match(/^\/user\//);
    this.userWonPath = this.userPath && window.location.pathname.match(/\/giveaways\/won/);
    this.gamePath = window.location.pathname.match(/^\/game\//);
    this.groupPath = window.location.pathname.match(/^\/group\//);
    this.regionsPath = window.location.pathname.match(/^\/regions\//);
    this.groupWishlistPath = window.location.pathname.match(/^\/group\/(.*?)\/wishlist/);
    this.mainPath = window.location.pathname.match(/^\/$/);
    this.winnersPath = window.location.pathname.match(/^\/giveaway\/.+\/winners/);
    this.giveawaysPath = this.locationHref.match(/steamgifts.com($|\/$|\/giveaways(?!.*\/(new|wishlist|created|entered|won)))/);
    this.giveawayCommentsPath = window.location.pathname.match(/^\/giveaway\/(?!.+\/(entries|winners|groups|region-restrictions|stats))/);
    this.discussionsTicketsPath = window.location.pathname.match(/^\/(discussions|support\/tickets)/);
    this.ticketsPath = window.location.pathname.match(/^\/support\/tickets/);
    this.tradesPath = this.locationHref.match(/steamtrades.com($|\/$|\/trades(?!\/(new|edit)))/);
    this.discussionsTicketsTradesPath = this.locationHref.match(/steamtrades.com($|\/$)/) || window.location.pathname.match(/^\/(discussions|support\/tickets|trades)/);
    this.discussionTicketTradeCommentsPath = window.location.pathname.match(/^\/(discussion|support\/ticket|trade)\//);
    this.archivePath = window.location.pathname.match(/^\/archive/);
    this.profilePath = window.location.pathname.match(/^\/account\/settings\/profile/);
    this.giveawayPath = window.location.pathname.match(/^\/giveaway\//);
    this.discussionPath = window.location.pathname.match(/^\/discussion\//);
    this.ticketPath = window.location.pathname.match(/^\/support\/ticket\//);
    this.tradePath = window.location.pathname.match(/^\/trade\//);
    this.discussionsPath = window.location.pathname.match(/^\/discussions(?!\/(new|edit))/);
    this.newDiscussionPath = window.location.pathname.match(/^\/discussions\/new/);
    this.editDiscussionPath = window.location.pathname.match(/^\/discussions\/edit/);
    this.newTradePath = window.location.pathname.match(/^\/trades\/new/);
    this.editTradePath = window.location.pathname.match(/^\/trades\/edit/);
    this.createdDiscussionsPath = window.location.pathname.match(/^\/discussions\/created/);
    this.newGiveawayPath = window.location.pathname.match(/^\/giveaways\/new/);
    this.newTicketPath = window.location.pathname.match(/^\/support\/tickets\/new/);
    this.wishlistPath = window.location.pathname.match(/^\/giveaways\/wishlist/);
    this.createdPath = window.location.pathname.match(/^\/giveaways\/created/);
    this.wonPath = window.location.pathname.match(/^\/giveaways\/won/);
    this.enteredPath = window.location.pathname.match(/^\/giveaways\/entered/);
    this.commentsPath = window.location.pathname.match(/^\/(giveaway\/(?!.*\/(entries|winners|groups|region-restrictions|stats))|discussion\/|support\/ticket\/|trade\/)/);
    this.aboutPath = window.location.pathname.match(/^\/(about|legal)/);
    this.whitelistPath = window.location.pathname.match(/^\/account\/manage\/whitelist/);
    this.blacklistPath = window.location.pathname.match(/^\/account\/manage\/blacklist/);
    this.appList = undefined;
    this.pageHeadings = undefined;
    this.hasAddedFilterContainer = undefined;
  }
}
const esgst = new Esgst();
_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].add({
  esgst,
  modules: _modules__WEBPACK_IMPORTED_MODULE_6__["modules"]
});


/***/ }),
/* 142 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Parsedown", function() { return Parsedown; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);





// TODO: an external project and link it through package.json
// Parsedown (Javascript version of https://github.com/erusev/parsedown made specifically for SteamGifts)
// functions taken from http://locutus.io/

function rtrim(string, charList) {
  charList = !charList ? ' \\s\u00A0' : `${charList}`.replace(/([[\]().?/*{}+$^:])/g, `\\$1`);
  return `${string}`.replace(new RegExp(`[' + charList + ']+$`, 'g'), '');
}
function trim(string, charList) {
  let i, n, whiteSpace;
  string += '';
  whiteSpace = ' \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000';
  if (charList) {
    whiteSpace = `${charList}`.replace(/([[\]().?/*{}+$^:])/g, `$1`);
  }
  for (i = 0, n = string.length; i < n; ++i) {
    if (whiteSpace.indexOf(string.charAt(i)) === -1) {
      string = string.substring(i);
      break;
    }
  }
  for (i = string.length - 1; i > -1; --i) {
    if (whiteSpace.indexOf(string.charAt(i)) === -1) {
      string = string.substring(0, i + 1);
      break;
    }
  }
  return whiteSpace.indexOf(string.charAt(0)) === -1 ? string : '';
}
function strlen(string) {
  string = `${string}`;
  let getWholeChar = (string, i) => {
    let code, next, prev;
    code = string.charCodeAt(i);
    next = prev = '';
    if (code >= 0xd800 && code <= 0xdbff) {
      if (string.length <= i + 1) {
        throw new Error('High surrogate without following low surrogate');
      }
      next = string.charCodeAt(i + 1);
      if (next < 0xdc00 || next > 0xdfff) {
        throw new Error('High surrogate without following low surrogate');
      }
      return string.charAt(i) + string.charAt(i + 1);
    } else if (code >= 0xdc00 && code <= 0xdfff) {
      if (i === 0) {
        throw new Error('Low surrogate without preceding high surrogate');
      }
      prev = string.charCodeAt(i - 1);
      if (prev < 0xd800 || prev > 0xdbff) {
        throw new Error('Low surrogate without preceding high surrogate');
      }
      return false;
    }
    return string.charAt(i);
  };
  let i, length, n;
  length = 0;
  for (i = 0, n = string.length; i < n; ++i) {
    if (getWholeChar(string, i) === false) {
      continue;
    }
    length += 1;
  }
  return length;
}

/**
 * @param {String} string
 * @param {String} charList
 */
function strpbrk(string, charList) {
  let i, n;
  for (i = 0, n = string.length; i < n; ++i) {
    if (charList.indexOf(string.charAt(i)) >= 0) {
      return string.slice(i);
    }
  }
  return false;
}
let methods, variables;
variables = {
  blockTypes: {
    ['#']: ['Header'],
    ['*']: ['Rule', 'List'],
    ['+']: ['List'],
    ['-']: ['SetextHeader', 'Table', 'Rule', 'List'],
    ['0']: ['List'],
    ['1']: ['List'],
    ['2']: ['List'],
    ['3']: ['List'],
    ['4']: ['List'],
    ['5']: ['List'],
    ['6']: ['List'],
    ['7']: ['List'],
    ['8']: ['List'],
    ['9']: ['List'],
    [`:`]: ['Table'],
    ['<']: ['Comment', 'Markup'],
    [`=`]: ['SetextHeader'],
    ['>']: ['Quote'],
    [`[`]: ['Reference'],
    ['_']: ['Rule'],
    ['`']: ['FencedCode'],
    ['|']: ['Table'],
    ['~']: ['FencedCode']
  },
  breaksEnabled: false,
  definitionData: {},
  emRegex: {
    ['*']: /^[*]((?:\\\\\*|[^*]|[*][*][^*]+?[*][*])+?)[*](?![*])/,
    ['_']: /^_((?:\\\\_|[^_]|__[^_]*__)+?)_(?!_)\b/u
  },
  inlineMarkerList: '!"*_&[:<>`~\\',
  inlineTypes: {
    ['"']: ['SpecialCharacter'],
    ['!']: ['Image'],
    ['&']: ['SpecialCharacter'],
    ['*']: ['Emphasis'],
    [`:`]: ['Url'],
    ['<']: ['UrlTag', 'EmailTag', 'Markup', 'SpecialCharacter'],
    ['>']: ['SpecialCharacter'],
    [`[`]: ['Link'],
    ['_']: ['Emphasis'],
    ['`']: ['Code'],
    ['~']: ['Strikethrough'],
    ['\\']: ['EscapeSequence']
  },
  markupEscaped: false,
  regexHtmlAttribute: `[a-zA-Z_:][:.-\\w]*(?:\\s*=\\s*(?:[^"'=<>\`\\s]+|"[^"]*"|'[^']*'))?`,
  specialCharacters: ['\\', '`', '*', '_', '{', '}', `[`, `]`, `(`, `)`, '>', '#', '+', '-', '.', '!', '|'],
  strongRegex: {
    ['*']: /^[*]{2}((?:\\\\\*|[^*]|[*][^*]*[*])+?)[*]{2}(?![*])/,
    ['_']: /^__((?:\\\\_|[^_]|_[^_]*_)+?)__(?!_)/u
  },
  textLevelElements: ['a', 'br', 'bdo', 'abbr', 'blink', 'nextid', 'acronym', 'basefont', 'b', 'em', 'big', 'cite', 'small', 'spacer', 'listing', 'i', 'rp', 'del', 'code', 'strike', 'marquee', 'q', 'rt', 'ins', 'font', 'strong', 's', 'tt', 'kbd', 'mark', 'u', 'xm', 'sub', 'nobr', 'sup', 'ruby', 'var', 'span', 'wbr', 'time'],
  unmarkedBlockTypes: ['Code'],
  urlsLinked: true,
  voidElements: ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input', 'link', 'meta', 'param', 'source']
};
// noinspection JSUnusedGlobalSymbols
methods = {
  lines: lines => {
    let block, blocks, blockType, blockTypes, currentBlock, i, j, indent, line, marker, markup, n1, n2, parts, text;
    currentBlock = null;
    blocks = [];
    main: for (i = 0, n1 = lines.length; i < n1; ++i) {
      line = lines[i];
      if (rtrim(line) === '') {
        if (methods.isSet(currentBlock)) {
          currentBlock.interrupted = true;
        }
        continue;
      }
      if (line.indexOf('\t') > -1) {
        parts = line.split('\t');
        line = parts.shift();
        parts.forEach(part => {
          line += `${' '.repeat(4 - line.length % 4)}${part}`; // original method: mb_strlen with UTF-8
        });
      }
      indent = 0;
      while (methods.isSet(line[indent]) && line[indent] === ' ') {
        indent += 1;
      }
      text = indent > 0 ? line.slice(indent) : line;
      line = {
        body: line,
        indent,
        text
      };
      if (methods.isSet(currentBlock) && methods.isSet(currentBlock.continuable)) {
        // @ts-ignore
        block = methods[`block${currentBlock.type}Continue`](line, currentBlock);
        if (methods.isSet(block)) {
          currentBlock = block;
          continue;
        } else if (methods.isBlockCompletable(currentBlock.type)) {
          currentBlock = methods[`block${currentBlock.type}Complete`](currentBlock);
        }
      }
      marker = text[0];
      blockTypes = variables.unmarkedBlockTypes.slice(0);
      if (methods.isSet(variables.blockTypes[marker])) {
        variables.blockTypes[marker].forEach(blockType => blockTypes.push(blockType));
      }
      for (j = 0, n2 = blockTypes.length; j < n2; ++j) {
        blockType = blockTypes[j];
        block = methods[`block${blockType}`](line, currentBlock);
        if (methods.isSet(block)) {
          block.type = blockType;
          if (!methods.isSet(block.identified)) {
            blocks.push(currentBlock);
            block.identified = true;
          }
          if (methods.isBlockContinuable(blockType)) {
            block.continuable = true;
          }
          currentBlock = block;
          continue main;
        }
      }
      if (methods.isSet(currentBlock) && !methods.isSet(currentBlock.type) && !methods.isSet(currentBlock.interrupted)) {
        currentBlock.element.text += `\n${text}`;
      } else {
        blocks.push(currentBlock);
        currentBlock = methods.paragraph(line);
        currentBlock.identified = true;
      }
    }
    if (methods.isSet(currentBlock) && methods.isSet(currentBlock.continuable) && methods.isBlockCompletable(currentBlock.type)) {
      currentBlock = methods[`block${currentBlock.type}Complete`](currentBlock);
    }
    blocks.push(currentBlock);
    blocks.shift();
    markup = '';
    for (i = 0, n1 = blocks.length; i < n1; ++i) {
      block = blocks[i];
      if (methods.isSet(block.hidden)) {
        continue;
      }
      markup += `\n${methods.isSet(block.markup) ? block.markup : methods.element(block.element)}`;
    }
    markup += '\n';
    return markup;
  },
  isBlockContinuable: type => typeof methods[`block${type}Continue`] !== 'undefined',
  isBlockCompletable: type => typeof methods[`block${type}Complete`] !== 'undefined',
  isSet: element => typeof element !== 'undefined' && element !== null,
  blockCode: (line, block = null) => {
    if (methods.isSet(block) && !methods.isSet(block.type) && !methods.isSet(block.interrupted)) {
      return;
    }
    if (line.indent >= 4) {
      return {
        element: {
          handler: 'element',
          name: 'pre',
          text: {
            name: 'code',
            text: line.body.slice(4)
          }
        }
      };
    }
  },
  blockCodeContinue: (line, block) => {
    if (line.indent >= 4) {
      if (methods.isSet(block.interrupted)) {
        // noinspection JSPrimitiveTypeWrapperUsage
        block.element.text.text += '\n';
        delete block.interrupted;
      }
      // noinspection JSPrimitiveTypeWrapperUsage
      block.element.text.text += `\n${line.body.slice(4)}`;
      return block;
    }
  },
  blockCodeComplete: block => {
    block.element.text.text = block.element.text.text.replace(/</g, '&lt;').replace(/>/g, '&gt;');
    return block;
  },
  blockComment: line => {
    if (variables.markupEscaped) {
      return;
    }
    if (methods.isSet(line.text[3]) && line.text[3] === '-' && line.text[2] === '-' && line.text[1] === '!') {
      let block = {
        markup: line.body
      };
      if (line.text.match(/-->$/)) {
        block.closed = true;
      }
      return block;
    }
  },
  blockCommentContinue: (line, block) => {
    if (methods.isSet(block.closed)) {
      return;
    }
    block.markup += `\n${line.body}`;
    if (line.text.match(/-->$/)) {
      block.closed = true;
    }
    return block;
  },
  blockFencedCode: line => {
    let matches = line.text.match(new RegExp(`^[` + line.text[0] + `]{3,}[ ]*([\\w-]+)?[ ]*$`));
    if (matches) {
      let element = {
        name: 'code',
        text: ''
      };
      if (methods.isSet(matches[1])) {
        element.attributes = {
          class: `language-${matches[1]}`
        };
      }
      return {
        char: line.text[0],
        element: {
          handler: 'element',
          name: 'pre',
          text: element
        }
      };
    }
  },
  blockFencedCodeContinue: (line, block) => {
    if (methods.isSet(block.complete)) {
      return;
    }
    if (methods.isSet(block.interrupted)) {
      block.element.text.text += '\n';
      delete block.interrupted;
    }
    if (line.text.match(new RegExp(`^${block.char}{3,}[ ]*$`))) {
      block.element.text.text = block.element.text.text.slice(1);
      block.complete = true;
      return block;
    }
    block.element.text.text += `\n${line.body}`;
    return block;
  },
  blockFencedCodeComplete: block => {
    block.element.text.text = block.element.text.text.replace(/</g, '&lt;').replace(/>/g, '&gt;');
    return block;
  },
  blockHeader: line => {
    if (methods.isSet(line.text[1])) {
      let level = 1;
      while (methods.isSet(line.text[level]) && line.text[level] === '#') {
        level += 1;
      }
      if (level > 6) {
        return;
      }
      return {
        element: {
          handler: 'line',
          name: `h${Math.min(6, level)}`,
          text: trim(line.text, '# ')
        }
      };
    }
  },
  blockList: line => {
    let matches, name, pattern;
    [name, pattern] = line.text[0] <= '-' ? ['ul', `[*+-]`] : ['ol', `[0-9]+[.]`];
    matches = line.text.match(new RegExp(`^(${pattern}[ ]+)(.*)`));
    if (matches) {
      let block = {
        element: {
          handler: 'elements',
          name
        },
        indent: line.indent,
        pattern
      };
      if (name === 'ol') {
        let listStart = matches[0].slice(0, matches[0].indexOf('.'));
        if (listStart !== '1') {
          block.element.attributes = {
            start: listStart
          };
        }
      }
      block.li = {
        handler: 'li',
        name: 'li',
        text: [matches[2]]
      };
      block.element.text = [block.li]; // original attribution: []= &
      return block;
    }
  },
  blockListContinue: (line, block) => {
    let matches = line.text.match(new RegExp(`^${block.pattern}(?:[ ]+(.*)|$)`));
    if (block.indent === line.indent && matches) {
      if (methods.isSet(block.interrupted)) {
        block.li.text.push('');
        delete block.interrupted;
      }
      delete block.li;
      block.li = {
        handler: 'li',
        name: 'li',
        text: [methods.isSet(matches[1]) ? matches[1] : '']
      };
      block.element.text.push(block.li);
      return block;
    }
    if (line.text[0] === `[` && methods.blockReference(line)) {
      return block;
    }
    if (!methods.isSet(block.interrupted)) {
      block.li.text.push(line.body.replace(/^[ ]{0,4}/, ''));
      return block;
    }
    if (line.indent > 0) {
      block.li.text.push('');
      block.li.text.push(line.body.replace(/^[ ]{0,4}/, ''));
      delete block.interrupted;
      return block;
    }
  },
  blockQuote: line => {
    let matches = line.text.match(/^>[ ]?(.*)/);
    if (matches) {
      return {
        element: {
          handler: 'lines',
          name: 'blockquote',
          text: [matches[1]]
        }
      };
    }
  },
  blockQuoteContinue: (line, block) => {
    let matches = line.text.match(/^>[ ]?(.*)/);
    if (line.text[0] === '>' && matches) {
      if (methods.isSet(block.interrupted)) {
        block.element.text.push('');
        delete block.interrupted;
      }
      block.element.text.push(matches[1]);
      return block;
    }
    if (!methods.isSet(block.interrupted)) {
      block.element.text.push(line.text);
      return block;
    }
  },
  blockRule: line => {
    if (line.text.match(new RegExp(`^([` + line.text[0] + `])([ ]*\\1){2,}[ ]*$`))) {
      return {
        element: {
          name: 'hr'
        }
      };
    }
  },
  blockSetextHeader: (line, block = null) => {
    if (!methods.isSet(block) || methods.isSet(block.type) || methods.isSet(block.interrupted)) {
      return;
    }
    if (rtrim(line.text, line.text[0]) === '') {
      block.element.name = line.text[0] === `=` ? 'h1' : 'h2';
      return block;
    }
  },
  blockMarkup: line => {
    if (variables.markupEscaped) {
      return;
    }
    let matches = line.text.match(new RegExp(`^<(\\w*)(?:[ ]*${variables.regexHtmlAttribute})*[ ]*(/)?>`));
    if (matches) {
      if (variables.textLevelElements.indexOf(matches[1].toLowerCase()) > -1) {
        return;
      }
      let block, remainder;
      block = {
        depth: 0,
        markup: line.text,
        name: matches[1],
        closed: false,
        void: false
      };
      remainder = line.text.slice(strlen(matches[0]));
      if (trim(remainder) === '') {
        if (methods.isSet(matches[2]) || variables.voidElements.indexOf(matches[1]) > -1) {
          block.closed = true;
          block.void = true;
        }
      } else {
        if (methods.isSet(matches[2]) || variables.voidElements.indexOf(matches[1]) > -1) {
          return;
        }
        if (remainder.match(new RegExp(`</${matches[1]}>[ ]*$`, 'i'))) {
          block.closed = true;
        }
      }
      return block;
    }
  },
  blockMarkupContinue: (line, block) => {
    if (methods.isSet(block.closed)) {
      return;
    }
    if (line.text.match(new RegExp(`^<${block.name}(?:[ ]*${variables.regexHtmlAttribute})*[ ]*>`, 'i'))) {
      block.depth += 1;
    }
    let matches = line.text.match(new RegExp(`(.*?)</${block.name}>[ ]*$`, 'i'));
    if (matches) {
      if (block.depth > 0) {
        block.depth -= 1;
      } else {
        block.closed = true;
      }
    }
    if (methods.isSet(block.interrupted)) {
      block.markup += '\n';
      delete block.interrupted;
    }
    block.markup += `\n${line.body}`;
    return block;
  },
  blockReference: line => {
    let matches = line.text.match(/^\[(.+?)]:[ ]*<?(\S+?)>?(?:[ ]+["'(](.+)["')])?[ ]*$/);
    if (matches) {
      let data = {
        title: null,
        url: matches[2]
      };
      if (methods.isSet(matches[3])) {
        data.title = matches[3];
      }
      variables.definitionData.Reference[matches[1].toLowerCase()] = data;
      return {
        hidden: true
      };
    }
  },
  blockTable: (line, block = null) => {
    if (!methods.isSet(block) || methods.isSet(block.type) || methods.isSet(block.interrupted)) {
      return;
    }
    if (block.element.text.indexOf('|') > -1 && rtrim(line.text, ` -:|`) === '') {
      let alignment, alignments, dividerCell, dividerCells, headerCell, headerCells, headerElement, headerElements, i, n;
      alignments = [];
      dividerCells = trim(trim(line.text), '|').split('|');
      for (i = 0, n = dividerCells.length; i < n; ++i) {
        dividerCell = trim(dividerCells[i]);
        if (dividerCell === '') {
          continue;
        }
        alignment = null;
        if (dividerCell[0] === `:`) {
          alignment = 'left';
        }
        if (dividerCell.slice(-1) === `:`) {
          alignment = alignment === 'left' ? 'center' : 'right';
        }
        alignments.push(alignment);
      }
      headerElements = [];
      headerCells = trim(trim(block.element.text), '|').split('|');
      for (i = 0, n = headerCells.length; i < n; ++i) {
        headerCell = trim(headerCells[i]);
        headerElement = {
          handler: 'line',
          name: 'th',
          text: headerCell,
          attributes: {}
        };
        if (methods.isSet(alignments[i])) {
          alignment = alignments[i];
          headerElement.attributes = {
            style: `text-align: ${alignment};`
          };
        }
        headerElements.push(headerElement);
      }
      block = {
        alignments,
        element: {
          handler: 'elements',
          name: 'table',
          text: []
        },
        identified: true
      };
      block.element.text.push({
        handler: 'elements',
        name: 'thead',
        text: []
      });
      block.element.text.push({
        handler: 'elements',
        name: 'tbody',
        text: []
      });
      block.element.text[0].text.push({
        handler: 'elements',
        name: 'tr',
        text: headerElements
      });
      return block;
    }
  },
  blockTableContinue: (line, block) => {
    if (methods.isSet(block.interrupted)) {
      return;
    }
    if (line.text[0] === '|' || line.text.indexOf('|') > -1) {
      let element, elements, i, matches, n;
      elements = [];
      matches = trim(trim(line.text), '|').match(/(?:(\\\\[|])|[^|`]|`[^`]+'|')+/g);
      for (i = 0, n = matches.length; i < n; ++i) {
        element = {
          handler: 'line',
          name: 'td',
          text: trim(matches[i]),
          attributes: {}
        };
        if (methods.isSet(block.alignments[i])) {
          element.attributes = {
            style: `text-align: ${block.alignments[i]};`
          };
        }
        elements.push(element);
      }
      element = {
        handler: 'elements',
        name: 'tr',
        text: elements
      };
      block.element.text[1].text.push(element);
      return block;
    }
  },
  paragraph: line => ({
    element: {
      handler: 'line',
      name: 'p',
      text: line.text
    }
  }),
  line: text => {
    let excerpt, i, inline, inlineType, marker, markerPosition, markup, n;
    markup = '';
    main: while (excerpt = strpbrk(text, variables.inlineMarkerList)) {
      // eslint-disable-line
      marker = excerpt[0];
      markerPosition = text.indexOf(marker);
      excerpt = {
        context: text,
        text: excerpt
      };
      for (i = 0, n = variables.inlineTypes[marker].length; i < n; ++i) {
        inlineType = variables.inlineTypes[marker][i];
        inline = methods[`inline${inlineType}`](excerpt);
        if (!methods.isSet(inline)) {
          continue;
        }
        if (methods.isSet(inline.position) && inline.position > markerPosition) {
          continue;
        }
        if (!methods.isSet(inline.position)) {
          inline.position = markerPosition;
        }
        markup += `${methods.unmarkedText(text.slice(0, inline.position))}${methods.isSet(inline.markup) ? inline.markup : methods.element(inline.element)}`;
        text = text.slice(inline.position + inline.extent);
        continue main;
      }
      markup += methods.unmarkedText(text.slice(0, markerPosition + 1));
      text = text.slice(markerPosition + 1);
    }
    markup += methods.unmarkedText(text);
    return markup;
  },
  inlineCode: excerpt => {
    let marker, matches;
    marker = excerpt.text[0];
    matches = excerpt.text.match(new RegExp(`^(${marker}+)[ ]*([\\S\\s]+?)[ ]*(${marker})?\\1`)); // original regex: /^('.$marker.'+)[ ]*(.+?)[ ]*(?<!'.$marker.')\1(?!'.$marker.')/s
    if (matches && !matches[3]) {
      return {
        element: {
          name: 'code',
          text: matches[2].replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/[ ]*\n/, '')
        },
        extent: strlen(matches[0])
      };
    }
  },
  inlineEmailTag: excerpt => {
    let matches = excerpt.text.match(/^<((mailto:)?\S+?@\S+?)>/i);
    if (excerpt.text.indexOf('>') > -1 && matches) {
      let url = matches[1];
      if (!methods.isSet(matches[2])) {
        url = `mailto:${url}`;
      }
      return {
        element: {
          name: 'a',
          text: matches[1],
          attributes: {
            href: url
          }
        },
        extent: strlen(matches[0])
      };
    }
  },
  inlineEmphasis: excerpt => {
    if (!methods.isSet(excerpt.text[1])) {
      return;
    }
    let emphasis, marker, matches;
    marker = excerpt.text[0];
    if (excerpt.text[1] === marker && (matches = excerpt.text.match(variables.strongRegex[marker]))) {
      emphasis = 'strong';
    } else if (matches = excerpt.text.match(variables.emRegex[marker])) {
      // eslint-disable-line
      emphasis = 'em';
    } else {
      return;
    }
    return {
      element: {
        handler: 'line',
        name: emphasis,
        text: matches[1]
      },
      extent: strlen(matches[0])
    };
  },
  inlineEscapeSequence: excerpt => {
    if (methods.isSet(excerpt.text[1]) && variables.specialCharacters.indexOf(excerpt.text[1]) > -1) {
      return {
        extent: 2,
        markup: excerpt.text[1]
      };
    }
  },
  inlineImage: excerpt => {
    if (!methods.isSet(excerpt.text[1]) || excerpt.text[1] !== `[`) {
      return;
    }
    excerpt.text = excerpt.text.slice(1);
    let inline, link;
    link = methods.inlineLink(excerpt);
    if (!methods.isSet(link)) {
      return;
    }
    inline = {
      element: {
        attributes: {
          src: link.element.attributes.href,
          alt: link.element.text,
          title: link.element.text
        },
        name: 'img'
      },
      extent: link.extent + 1
    };
    let key;
    for (key in link.element.attributes) {
      if (link.element.attributes.hasOwnProperty(key) && link.element.attributes[key]) {
        inline.element.attributes[key] = link.element.attributes[key];
      }
    }
    delete inline.element.attributes.href;
    return inline;
  },
  inlineLink: excerpt => {
    let element, extent, matches, remainder;
    element = {
      attributes: {
        href: null,
        title: null
      },
      handler: 'line',
      name: 'a',
      text: null
    };
    extent = 0;
    remainder = excerpt.text;
    matches = remainder.match(/\[(.*?)]/);
    if (matches) {
      matches = matches[0].match(/\[(?:(.*\[)*)(.*?)]/); // original regex: /\[((?:[^][]++|(?R))*+)\]/
      if (matches) {
        element.text = matches[2];
        extent += strlen(matches[2]) + 2;
        remainder = remainder.slice(extent);
      } else {
        return;
      }
    } else {
      return;
    }
    matches = remainder.match(/^\(\s*([^\s]+?)\s*\)/); // original regex: /^[(]\s*+((?:[^ ()]++|[(][^ )]+[)])++)(?:[ ]+("[^"]*"|\'[^\']*\'))?\s*[)]/
    if (matches) {
      element.attributes.href = matches[1];
      if (methods.isSet(matches[2])) {
        element.attributes.title = matches[2].slice(1, -1);
      }
      extent += strlen(matches[0]);
    } else {
      matches = remainder.match(/^\s*\[(.*?)]/);
      let definition;
      if (matches) {
        definition = (strlen(matches[1]) ? matches[1] : element.text).toLowerCase();
        extent += strlen(matches[0]);
      } else {
        definition = element.text.toLowerCase();
      }
      if (!methods.isSet(variables.definitionData.Reference[definition])) {
        return;
      }
      definition = variables.definitionData.Reference[definition];
      element.attributes.href = definition.url;
      element.attributes.title = definition.title;
    }
    element.attributes.href = element.attributes.href.replace(/&/g, '&amp;').replace(/</g, '&lt;');
    return {
      element,
      extent
    };
  },
  inlineMarkup: excerpt => {
    if (variables.markupEscaped || excerpt.text.indexOf('>') < 0) {
      return;
    }
    let matches = excerpt.text.match(/^<\/\w*[ ]*>/);
    if (excerpt.text[1] === '/' && matches) {
      return {
        extent: strlen(matches[0]),
        markup: matches[0]
      };
    }
    matches = excerpt.text.match(/^<!---?[^>-](?:-?[^-])*-->/);
    if (excerpt.text[1] === '!' && matches) {
      return {
        extent: strlen(matches[0]),
        markup: matches[0]
      };
    }
    matches = excerpt.text.match(new RegExp(`^<\\w*(?:[ ]*${variables.regexHtmlAttribute})*[ ]*/?>`));
    if (excerpt.text[1] !== ' ' && matches) {
      return {
        extent: strlen(matches[0]),
        markup: matches[0]
      };
    }
  },
  inlineSpecialCharacter: excerpt => {
    if (excerpt.text[0] === '&' && !excerpt.text.match(/^&#?\w+;/)) {
      return {
        extent: 1,
        markup: '&amp;'
      };
    }
    let specialCharacter = {
      ['>']: 'gt',
      ['<']: 'lt',
      ['"']: 'quot'
    };
    if (methods.isSet(specialCharacter[excerpt.text[0]])) {
      return {
        extent: 1,
        markup: `&${specialCharacter[excerpt.text[0]]};`
      };
    }
  },
  inlineStrikethrough: excerpt => {
    if (!methods.isSet(excerpt.text[1])) {
      return;
    }
    let matches, name, text;
    if ((matches = excerpt.text.match(/^~([^~]+?)(~+)/)) && matches[2].length === 1) {
      name = 'span';
      text = matches[1];
    } else if ((matches = excerpt.text.match(/^~~([^~]+?)(~+)/)) && matches[2].length === 2) {
      name = 'del';
      text = matches[1];
    } else if (matches = excerpt.text.match(/^~~~([^~]+?)(~+)/)) {
      // eslint-disable-line
      switch (matches[2].length) {
        case 3:
          name = 'span';
          text = `~~${matches[1]}~~`;
          break;
        case 4:
          name = 'del';
          text = `~${matches[1]}~~`;
          break;
        default:
          break;
      }
    }
    if (name) {
      switch (name) {
        case 'del':
          return {
            element: {
              handler: 'line',
              name: 'del',
              text
            },
            extent: strlen(matches[0])
          };
        case 'span':
          return {
            element: {
              attributes: {
                class: 'spoiler'
              },
              handler: 'line',
              name: 'span',
              text
            },
            extent: strlen(matches[0])
          };
      }
    } else {}
  },
  inlineUrl: excerpt => {
    if (variables.urlsLinked !== true || !methods.isSet(excerpt.text[2]) || excerpt.text[2] !== '/') {
      return;
    }
    let match = /\bhttps?:[/]{2}[^\s<]+\b\/*/iu.exec(excerpt.context);
    if (match) {
      return {
        element: {
          attributes: {
            href: match[0]
          },
          name: 'a',
          text: match[0]
        },
        extent: strlen(match[0]),
        position: match.index
      };
    }
  },
  inlineUrlTag: excerpt => {
    let matches = excerpt.text.match(/^<(\w+:\/{2}[^ >]+)>/i);
    if (excerpt.text.indexOf('>') > -1 && matches) {
      let url = matches[1].replace(/&/g, '&amp;').replace(/</g, '&lt;');
      return {
        element: {
          name: 'a',
          text: url,
          attributes: {
            href: url
          }
        },
        extent: strlen(matches[0])
      };
    }
  },
  unmarkedText: text => {
    if (!text) {
      return '';
    }
    if (variables.breaksEnabled) {
      return text.replace(/[ ]*\n/g, '<br />\n');
    } else {
      return text.replace(/(?:[ ][ ]+|[ ]*\\\\)\n/g, '<br />\n').replace(/\s\n/g, '\n');
    }
  },
  element: element => {
    let markup = `<${element.name}`;
    if (methods.isSet(element.attributes)) {
      let key, value;
      for (key in element.attributes) {
        if (element.attributes.hasOwnProperty(key)) {
          value = element.attributes[key];
          if (value === null) {
            continue;
          }
          markup += ` ${key}="${value}"`;
        }
      }
    }
    if (methods.isSet(element.text)) {
      markup += '>';
      if (methods.isSet(element.handler)) {
        markup += methods[element.handler](element.text);
      } else {
        markup += element.text;
      }
      markup += `</${element.name}>`;
    } else {
      markup += ' />';
    }
    return markup;
  },
  elements: elements => {
    let markup = '';
    elements.forEach(element => markup += `\n${methods.element(element)}`);
    markup += '\n';
    return markup;
  },
  li: lines => {
    let markup, trimmedMarkup, i;
    markup = methods.lines(lines);
    trimmedMarkup = trim(markup);
    if (lines.indexOf('') < 0 && trimmedMarkup.slice(0, 3) === '<p>') {
      markup = trimmedMarkup.slice(3);
      i = markup.indexOf('</p>');
      markup = `${markup.slice(0, i)}${markup.slice(i + 4)}`;
    }
    return markup;
  }
};
class Parsedown {
  text(text) {
    variables.definitionData = {
      Reference: {}
    };
    let markup = methods.lines(trim(text.replace(/\r\n|\r/g, '\n'), '\n').split('\n'));
    markup = trim(markup, '\n');
    return markup;
  }
  setBreaksEnabled(breaksEnabled) {
    variables.breaksEnabled = breaksEnabled;
    return this;
  }
  setMarkupEscaped(markupEscaped) {
    variables.markupEscaped = markupEscaped;
    return this;
  }

  // noinspection JSUnusedGlobalSymbols
  setUrlsLinked(urlsLinked) {
    variables.urlsLinked = urlsLinked;
    return this;
  }
}


/***/ }),
/* 143 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modules", function() { return modules; });
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(144);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(234);
/* harmony import */ var _Storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(247);
/* harmony import */ var _General_PageLoadTimestamp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(258);
/* harmony import */ var _General_VisibleFullLevel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(259);
/* harmony import */ var _Giveaways_BlacklistGiveawayLoader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(260);
/* harmony import */ var _General_NarrowSidebar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(261);
/* harmony import */ var _General_HiddenCommunityPoll__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(262);
/* harmony import */ var _Discussions_ReversedActiveDiscussions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(263);
/* harmony import */ var _Discussions_OldActiveDiscussionsDesign__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(264);
/* harmony import */ var _Discussions_ActiveDiscussionsOnTopSidebar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(265);
/* harmony import */ var _General_ElementFilters__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(266);
/* harmony import */ var _Giveaways_addToStorage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(267);
/* harmony import */ var _General_AttachedImageCarousel__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(268);
/* harmony import */ var _Giveaways_FollowedGamesPage__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(269);
/* harmony import */ var _Giveaways_ArchiveSearcher__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(270);
/* harmony import */ var _General_CakeDayReminder__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(271);
/* harmony import */ var _Giveaways_CommentEntryChecker__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(274);
/* harmony import */ var _Discussions_CloseOpenDiscussionButton__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(275);
/* harmony import */ var _Comments_CommentReverser__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(277);
/* harmony import */ var _Comments_CommentSearcher__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(278);
/* harmony import */ var _Comments_CommentTracker__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(280);
/* harmony import */ var _Giveaways_CommunityWishlistSearchLink__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(281);
/* harmony import */ var _Discussions_ImprovedDiscussionBookmarks__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(282);
/* harmony import */ var _Discussions_DiscussionsSorter__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(283);
/* harmony import */ var _Games_EnteredGameHighlighter__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(284);
/* harmony import */ var _Giveaways_EntryTracker__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(285);
/* harmony import */ var _Comments_CommentHistory__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(288);
/* harmony import */ var _General_CustomHeaderFooterLinks__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(252);
/* harmony import */ var _General_FixedFooter__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(289);
/* harmony import */ var _General_FixedHeader__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(290);
/* harmony import */ var _General_FixedMainPageHeading__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(291);
/* harmony import */ var _Comments_CollapseExpandReplyButton__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(292);
/* harmony import */ var _Comments_ReplyBoxOnTop__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(293);
/* harmony import */ var _General_FixedSidebar__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(294);
/* harmony import */ var _Giveaways_GiveawaysSorter__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(295);
/* harmony import */ var _Giveaways_GiveawayBookmarks__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(296);
/* harmony import */ var _Games_GameCategories__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(297);
/* harmony import */ var _Giveaways_GiveawayCopyHighlighter__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(298);
/* harmony import */ var _Giveaways_GiveawayLevelHighlighter__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(299);
/* harmony import */ var _Giveaways_CustomGiveawayBackground__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(300);
/* harmony import */ var _Giveaways_CustomGiveawayCalendar__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(301);
/* harmony import */ var _Giveaways_EnteredGiveawaysStats__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(302);
/* harmony import */ var _General_GiveawayDiscussionTicketTradeTracker__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(303);
/* harmony import */ var _General_ThreadSubscription__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(304);
/* harmony import */ var _Giveaways_GiveawayExtractor__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(305);
/* harmony import */ var _Giveaways_GiveawayEncrypterDecrypter__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(308);
/* harmony import */ var _Giveaways_GiveawayErrorSearchLinks__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(309);
/* harmony import */ var _Comments_CommentFilters__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(310);
/* harmony import */ var _Discussions_DiscussionFilters__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(312);
/* harmony import */ var _Trades_TradeFilters__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(313);
/* harmony import */ var _Groups_GroupFilters__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(314);
/* harmony import */ var _Giveaways_GiveawayFilters__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(315);
/* harmony import */ var _Games_GameFilters__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(316);
/* harmony import */ var _Groups_GroupLibraryWishlistChecker__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(317);
/* harmony import */ var _Giveaways_GiveawayRecreator__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(320);
/* harmony import */ var _Groups_GroupStats__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(321);
/* harmony import */ var _Discussions_DiscussionTags__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(322);
/* harmony import */ var _Games_GameTags__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(324);
/* harmony import */ var _Groups_GroupTags__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(325);
/* harmony import */ var _Giveaways_NewGiveawayDescriptionChecker__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(326);
/* harmony import */ var _Giveaways_GiveawayTemplates__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(327);
/* harmony import */ var _Giveaways_GridView__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(328);
/* harmony import */ var _General_HiddenBlacklistStats__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(329);
/* harmony import */ var _Giveaways_HiddenGamesEnterButtonDisabler__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(330);
/* harmony import */ var _Giveaways_HiddenGamesManager__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(331);
/* harmony import */ var _General_HeaderRefresher__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(332);
/* harmony import */ var _Trades_HeaderTradesButton__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(333);
/* harmony import */ var _Trades_HaveWantListChecker__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(334);
/* harmony import */ var _General_LastPageLink__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(335);
/* harmony import */ var _General_LevelProgressVisualizer__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(336);
/* harmony import */ var _Giveaways_MultipleGiveawayCreator__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(337);
/* harmony import */ var _General_MultiManager__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(338);
/* harmony import */ var _Discussions_MainPostPopup__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(339);
/* harmony import */ var _Discussions_MainPostSkipper__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(340);
/* harmony import */ var _General_NotificationMerger__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(341);
/* harmony import */ var _Giveaways_NextPreviousTrainHotkeys__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(342);
/* harmony import */ var _General_PaginationNavigationOnTop__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(343);
/* harmony import */ var _Giveaways_PinnedGiveawaysButton__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(344);
/* harmony import */ var _Discussions_PuzzleMarker__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(345);
/* harmony import */ var _General_PointsVisualizer__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(346);
/* harmony import */ var _Giveaways_QuickGiveawaySearch__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(347);
/* harmony import */ var _Giveaways_AdvancedGiveawaySearch__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(348);
/* harmony import */ var _General_SearchMagnifyingGlassButton__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(349);
/* harmony import */ var _Discussions_RefreshActiveDiscussionsButton__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(350);
/* harmony import */ var _Discussions_ActiveDiscussionsToDisplay__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(351);
/* harmony import */ var _Comments_ReplyBoxPopup__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(352);
/* harmony import */ var _Comments_CommentFormattingHelper__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(353);
/* harmony import */ var _Comments_CommentVariables__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(354);
/* harmony import */ var _Giveaways_RealCVCalculator__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(355);
/* harmony import */ var _Giveaways_StickiedGiveawayCountries__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(356);
/* harmony import */ var _General_ShortcutKeys__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(357);
/* harmony import */ var _Giveaways_SentKeySearcher__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(358);
/* harmony import */ var _General_ScrollToBottomButton__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(359);
/* harmony import */ var _General_ScrollToTopButton__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(360);
/* harmony import */ var _Trades_TradeBumper__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(361);
/* harmony import */ var _General_TimeToPointCapCalculator__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(362);
/* harmony import */ var _Giveaways_UnsentGiftSender__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(363);
/* harmony import */ var _Users_UserSuspensionChecker__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(364);
/* harmony import */ var _Users_WhitelistBlacklistChecker__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(365);
/* harmony import */ var _Users_WhitelistBlacklistHighlighter__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(366);
/* harmony import */ var _Users_WhitelistBlacklistSorter__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(367);
/* harmony import */ var _Users_WhitelistBlacklistManager__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(368);
/* harmony import */ var _General_URLRedirector__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(369);
/* harmony import */ var _Users_UserTags__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(370);
/* harmony import */ var _Users_SteamFriendsIndicator__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(371);
/* harmony import */ var _General_AccurateTimestamp__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(372);
/* harmony import */ var _General_EmbeddedVideos__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(378);
/* harmony import */ var _General_ImageBorders__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(379);
/* harmony import */ var _General_VisibleAttachedImages__WEBPACK_IMPORTED_MODULE_109__ = __webpack_require__(380);
/* harmony import */ var _General_AttachedImageLoader__WEBPACK_IMPORTED_MODULE_110__ = __webpack_require__(381);
/* harmony import */ var _Giveaways_CreatedEnteredWonGiveawayDetails__WEBPACK_IMPORTED_MODULE_111__ = __webpack_require__(382);
/* harmony import */ var _Giveaways_DeleteKeyConfirmation__WEBPACK_IMPORTED_MODULE_112__ = __webpack_require__(383);
/* harmony import */ var _Giveaways_GiveawayWinningChance__WEBPACK_IMPORTED_MODULE_113__ = __webpack_require__(384);
/* harmony import */ var _Giveaways_GiveawayWinningRatio__WEBPACK_IMPORTED_MODULE_114__ = __webpack_require__(385);
/* harmony import */ var _Giveaways_GiveawayPointsToWin__WEBPACK_IMPORTED_MODULE_115__ = __webpack_require__(386);
/* harmony import */ var _Giveaways_GiveawayEndTimeHighlighter__WEBPACK_IMPORTED_MODULE_116__ = __webpack_require__(387);
/* harmony import */ var _Giveaways_SteamActivationLinks__WEBPACK_IMPORTED_MODULE_117__ = __webpack_require__(388);
/* harmony import */ var _Giveaways_UnfadedEnteredGiveaway__WEBPACK_IMPORTED_MODULE_118__ = __webpack_require__(389);
/* harmony import */ var _Giveaways_StickiedGiveawayGroups__WEBPACK_IMPORTED_MODULE_119__ = __webpack_require__(390);
/* harmony import */ var _Comments_MultiReply__WEBPACK_IMPORTED_MODULE_120__ = __webpack_require__(391);
/* harmony import */ var _Comments_ReplyFromInbox__WEBPACK_IMPORTED_MODULE_121__ = __webpack_require__(392);
/* harmony import */ var _Comments_ReplyMentionLink__WEBPACK_IMPORTED_MODULE_122__ = __webpack_require__(393);
/* harmony import */ var _Users_InboxWinnerHighlighter__WEBPACK_IMPORTED_MODULE_123__ = __webpack_require__(394);
/* harmony import */ var _Users_UserStats__WEBPACK_IMPORTED_MODULE_124__ = __webpack_require__(395);
/* harmony import */ var _Groups_GroupHighlighter__WEBPACK_IMPORTED_MODULE_125__ = __webpack_require__(396);
/* harmony import */ var _Giveaways_GiveawayPopup__WEBPACK_IMPORTED_MODULE_126__ = __webpack_require__(397);
/* harmony import */ var _Giveaways_EnterLeaveGiveawayButton__WEBPACK_IMPORTED_MODULE_127__ = __webpack_require__(398);
/* harmony import */ var _Giveaways_IsThereAnyDealInfo__WEBPACK_IMPORTED_MODULE_128__ = __webpack_require__(399);
/* harmony import */ var _Giveaways_UnhideGiveawayButton__WEBPACK_IMPORTED_MODULE_129__ = __webpack_require__(400);
/* harmony import */ var _Giveaways_OneClickHideGiveawayButton__WEBPACK_IMPORTED_MODULE_130__ = __webpack_require__(401);
/* harmony import */ var _Giveaways_VisibleInviteOnlyGiveaways__WEBPACK_IMPORTED_MODULE_131__ = __webpack_require__(402);
/* harmony import */ var _Giveaways_GiveawayWinnersLink__WEBPACK_IMPORTED_MODULE_132__ = __webpack_require__(403);
/* harmony import */ var _Giveaways_TimeToEnterCalculator__WEBPACK_IMPORTED_MODULE_133__ = __webpack_require__(404);
/* harmony import */ var _General_ContentLoader__WEBPACK_IMPORTED_MODULE_134__ = __webpack_require__(405);
/* harmony import */ var _Comments_ReceivedReplyBoxPopup__WEBPACK_IMPORTED_MODULE_135__ = __webpack_require__(406);
/* harmony import */ var _Giveaways__WEBPACK_IMPORTED_MODULE_136__ = __webpack_require__(407);
/* harmony import */ var _Discussions__WEBPACK_IMPORTED_MODULE_137__ = __webpack_require__(408);
/* harmony import */ var _DiscussionPanels__WEBPACK_IMPORTED_MODULE_138__ = __webpack_require__(409);
/* harmony import */ var _Comments__WEBPACK_IMPORTED_MODULE_139__ = __webpack_require__(410);
/* harmony import */ var _Games__WEBPACK_IMPORTED_MODULE_140__ = __webpack_require__(413);
/* harmony import */ var _Groups__WEBPACK_IMPORTED_MODULE_141__ = __webpack_require__(414);
/* harmony import */ var _Users__WEBPACK_IMPORTED_MODULE_142__ = __webpack_require__(415);
/* harmony import */ var _General_TableSorter__WEBPACK_IMPORTED_MODULE_143__ = __webpack_require__(416);
/* harmony import */ var _General_SameTabOpener__WEBPACK_IMPORTED_MODULE_144__ = __webpack_require__(479);
/* harmony import */ var _Users_UsernameHistory__WEBPACK_IMPORTED_MODULE_145__ = __webpack_require__(480);
/* harmony import */ var _Users_UserNotes__WEBPACK_IMPORTED_MODULE_146__ = __webpack_require__(481);
/* harmony import */ var _Users_UserFilters__WEBPACK_IMPORTED_MODULE_147__ = __webpack_require__(482);
/* harmony import */ var _Users_SharedGroupChecker__WEBPACK_IMPORTED_MODULE_148__ = __webpack_require__(483);
/* harmony import */ var _Users_UserLinks__WEBPACK_IMPORTED_MODULE_149__ = __webpack_require__(484);
/* harmony import */ var _Users_RealWonSentCVLink__WEBPACK_IMPORTED_MODULE_150__ = __webpack_require__(485);
/* harmony import */ var _Users_UserGiveawayData__WEBPACK_IMPORTED_MODULE_151__ = __webpack_require__(486);
/* harmony import */ var _Users_NotActivatedMultipleWinChecker__WEBPACK_IMPORTED_MODULE_152__ = __webpack_require__(487);
/* harmony import */ var _Users_NotReceivedFinder__WEBPACK_IMPORTED_MODULE_153__ = __webpack_require__(488);
/* harmony import */ var _Users_SentWonRatio__WEBPACK_IMPORTED_MODULE_154__ = __webpack_require__(489);
/* harmony import */ var _Users_VisibleGiftsBreakdown__WEBPACK_IMPORTED_MODULE_155__ = __webpack_require__(490);
/* harmony import */ var _Users_VisibleRealCV__WEBPACK_IMPORTED_MODULE_156__ = __webpack_require__(491);
/* harmony import */ var _Users_LevelUpCalculator__WEBPACK_IMPORTED_MODULE_157__ = __webpack_require__(492);
/* harmony import */ var _Users_SteamGiftsProfileButton__WEBPACK_IMPORTED_MODULE_158__ = __webpack_require__(493);
/* harmony import */ var _Users_ProfileLinks__WEBPACK_IMPORTED_MODULE_159__ = __webpack_require__(494);
/* harmony import */ var _General_SearchClearButton__WEBPACK_IMPORTED_MODULE_160__ = __webpack_require__(495);
/* harmony import */ var _Profile__WEBPACK_IMPORTED_MODULE_161__ = __webpack_require__(496);
/* harmony import */ var _General_QuickInboxView__WEBPACK_IMPORTED_MODULE_162__ = __webpack_require__(497);
/* harmony import */ var _General_EndlessScrolling__WEBPACK_IMPORTED_MODULE_163__ = __webpack_require__(498);




































































































































































const modules = {
  common: _Common__WEBPACK_IMPORTED_MODULE_0__["common"],
  settingsModule: _Settings__WEBPACK_IMPORTED_MODULE_1__["settingsModule"],
  loadDataCleaner: _Storage__WEBPACK_IMPORTED_MODULE_2__["loadDataCleaner"],
  loadDataManagement: _Storage__WEBPACK_IMPORTED_MODULE_2__["loadDataManagement"],
  manageData: _Storage__WEBPACK_IMPORTED_MODULE_2__["manageData"],
  generalPageLoadTimestamp: _General_PageLoadTimestamp__WEBPACK_IMPORTED_MODULE_3__["generalPageLoadTimestamp"],
  generalVisibleFullLevel: _General_VisibleFullLevel__WEBPACK_IMPORTED_MODULE_4__["generalVisibleFullLevel"],
  giveawaysBlacklistGiveawayLoader: _Giveaways_BlacklistGiveawayLoader__WEBPACK_IMPORTED_MODULE_5__["giveawaysBlacklistGiveawayLoader"],
  giveawaysVisibleInviteOnlyGiveaways: _Giveaways_VisibleInviteOnlyGiveaways__WEBPACK_IMPORTED_MODULE_131__["giveawaysVisibleInviteOnlyGiveaways"],
  generalNarrowSidebar: _General_NarrowSidebar__WEBPACK_IMPORTED_MODULE_6__["generalNarrowSidebar"],
  generalHiddenCommunityPoll: _General_HiddenCommunityPoll__WEBPACK_IMPORTED_MODULE_7__["generalHiddenCommunityPoll"],
  discussionsReversedActiveDiscussions: _Discussions_ReversedActiveDiscussions__WEBPACK_IMPORTED_MODULE_8__["discussionsReversedActiveDiscussions"],
  discussionsOldActiveDiscussionsDesign: _Discussions_OldActiveDiscussionsDesign__WEBPACK_IMPORTED_MODULE_9__["discussionsOldActiveDiscussionsDesign"],
  discussionsActiveDiscussionsOnTopSidebar: _Discussions_ActiveDiscussionsOnTopSidebar__WEBPACK_IMPORTED_MODULE_10__["discussionsActiveDiscussionsOnTopSidebar"],
  generalElementFilters: _General_ElementFilters__WEBPACK_IMPORTED_MODULE_11__["generalElementFilters"],
  giveaways_addToStorage: _Giveaways_addToStorage__WEBPACK_IMPORTED_MODULE_12__["giveaways_addToStorage"],
  generalAttachedImageCarousel: _General_AttachedImageCarousel__WEBPACK_IMPORTED_MODULE_13__["generalAttachedImageCarousel"],
  giveawaysFollowedGamesPage: _Giveaways_FollowedGamesPage__WEBPACK_IMPORTED_MODULE_14__["giveawaysFollowedGamesPage"],
  giveawaysArchiveSearcher: _Giveaways_ArchiveSearcher__WEBPACK_IMPORTED_MODULE_15__["giveawaysArchiveSearcher"],
  giveawaysCommentEntryChecker: _Giveaways_CommentEntryChecker__WEBPACK_IMPORTED_MODULE_17__["giveawaysCommentEntryChecker"],
  discussionsCloseOpenDiscussionButton: _Discussions_CloseOpenDiscussionButton__WEBPACK_IMPORTED_MODULE_18__["discussionsCloseOpenDiscussionButton"],
  commentsCommentReverser: _Comments_CommentReverser__WEBPACK_IMPORTED_MODULE_19__["commentsCommentReverser"],
  commentsCommentSearcher: _Comments_CommentSearcher__WEBPACK_IMPORTED_MODULE_20__["commentsCommentSearcher"],
  commentsCommentTracker: _Comments_CommentTracker__WEBPACK_IMPORTED_MODULE_21__["commentsCommentTracker"],
  giveawaysCommunityWishlistSearchLink: _Giveaways_CommunityWishlistSearchLink__WEBPACK_IMPORTED_MODULE_22__["giveawaysCommunityWishlistSearchLink"],
  discussionsImprovedDiscussionBookmarks: _Discussions_ImprovedDiscussionBookmarks__WEBPACK_IMPORTED_MODULE_23__["discussionsImprovedDiscussionBookmarks"],
  discussionsDiscussionsSorter: _Discussions_DiscussionsSorter__WEBPACK_IMPORTED_MODULE_24__["discussionsDiscussionsSorter"],
  gamesEnteredGameHighlighter: _Games_EnteredGameHighlighter__WEBPACK_IMPORTED_MODULE_25__["gamesEnteredGameHighlighter"],
  giveawaysEntryTracker: _Giveaways_EntryTracker__WEBPACK_IMPORTED_MODULE_26__["giveawaysEntryTracker"],
  commentsCommentHistory: _Comments_CommentHistory__WEBPACK_IMPORTED_MODULE_27__["commentsCommentHistory"],
  generalCustomHeaderFooterLinks: _General_CustomHeaderFooterLinks__WEBPACK_IMPORTED_MODULE_28__["generalCustomHeaderFooterLinks"],
  generalFixedFooter: _General_FixedFooter__WEBPACK_IMPORTED_MODULE_29__["generalFixedFooter"],
  generalFixedHeader: _General_FixedHeader__WEBPACK_IMPORTED_MODULE_30__["generalFixedHeader"],
  generalFixedMainPageHeading: _General_FixedMainPageHeading__WEBPACK_IMPORTED_MODULE_31__["generalFixedMainPageHeading"],
  commentsCollapseExpandReplyButton: _Comments_CollapseExpandReplyButton__WEBPACK_IMPORTED_MODULE_32__["commentsCollapseExpandReplyButton"],
  commentsReplyBoxOnTop: _Comments_ReplyBoxOnTop__WEBPACK_IMPORTED_MODULE_33__["commentsReplyBoxOnTop"],
  generalFixedSidebar: _General_FixedSidebar__WEBPACK_IMPORTED_MODULE_34__["generalFixedSidebar"],
  giveawaysGiveawaysSorter: _Giveaways_GiveawaysSorter__WEBPACK_IMPORTED_MODULE_35__["giveawaysGiveawaysSorter"],
  giveawaysQuickGiveawaySearch: _Giveaways_QuickGiveawaySearch__WEBPACK_IMPORTED_MODULE_81__["giveawaysQuickGiveawaySearch"],
  giveawaysGiveawayBookmarks: _Giveaways_GiveawayBookmarks__WEBPACK_IMPORTED_MODULE_36__["giveawaysGiveawayBookmarks"],
  gamesGameCategories: _Games_GameCategories__WEBPACK_IMPORTED_MODULE_37__["gamesGameCategories"],
  giveawaysGiveawayCopyHighlighter: _Giveaways_GiveawayCopyHighlighter__WEBPACK_IMPORTED_MODULE_38__["giveawaysGiveawayCopyHighlighter"],
  giveawaysGiveawayLevelHighlighter: _Giveaways_GiveawayLevelHighlighter__WEBPACK_IMPORTED_MODULE_39__["giveawaysGiveawayLevelHighlighter"],
  giveawaysCustomGiveawayBackground: _Giveaways_CustomGiveawayBackground__WEBPACK_IMPORTED_MODULE_40__["giveawaysCustomGiveawayBackground"],
  giveawaysCustomGiveawayCalendar: _Giveaways_CustomGiveawayCalendar__WEBPACK_IMPORTED_MODULE_41__["giveawaysCustomGiveawayCalendar"],
  generalGiveawayDiscussionTicketTradeTracker: _General_GiveawayDiscussionTicketTradeTracker__WEBPACK_IMPORTED_MODULE_43__["generalGiveawayDiscussionTicketTradeTracker"],
  generalThreadSubscription: _General_ThreadSubscription__WEBPACK_IMPORTED_MODULE_44__["generalThreadSubscription"],
  giveawaysGiveawayExtractor: _Giveaways_GiveawayExtractor__WEBPACK_IMPORTED_MODULE_45__["giveawaysGiveawayExtractor"],
  giveawaysGiveawayEncrypterDecrypter: _Giveaways_GiveawayEncrypterDecrypter__WEBPACK_IMPORTED_MODULE_46__["giveawaysGiveawayEncrypterDecrypter"],
  giveawaysGiveawayErrorSearchLinks: _Giveaways_GiveawayErrorSearchLinks__WEBPACK_IMPORTED_MODULE_47__["giveawaysGiveawayErrorSearchLinks"],
  commentsCommentFilters: _Comments_CommentFilters__WEBPACK_IMPORTED_MODULE_48__["commentsCommentFilters"],
  discussionsDiscussionFilters: _Discussions_DiscussionFilters__WEBPACK_IMPORTED_MODULE_49__["discussionsDiscussionFilters"],
  tradesTradeFilters: _Trades_TradeFilters__WEBPACK_IMPORTED_MODULE_50__["tradesTradeFilters"],
  groupsGroupFilters: _Groups_GroupFilters__WEBPACK_IMPORTED_MODULE_51__["groupsGroupFilters"],
  giveawaysGiveawayFilters: _Giveaways_GiveawayFilters__WEBPACK_IMPORTED_MODULE_52__["giveawaysGiveawayFilters"],
  gamesGameFilters: _Games_GameFilters__WEBPACK_IMPORTED_MODULE_53__["gamesGameFilters"],
  groupsGroupLibraryWishlistChecker: _Groups_GroupLibraryWishlistChecker__WEBPACK_IMPORTED_MODULE_54__["groupsGroupLibraryWishlistChecker"],
  giveawaysGiveawayRecreator: _Giveaways_GiveawayRecreator__WEBPACK_IMPORTED_MODULE_55__["giveawaysGiveawayRecreator"],
  groupsGroupStats: _Groups_GroupStats__WEBPACK_IMPORTED_MODULE_56__["groupsGroupStats"],
  discussionsDiscussionTags: _Discussions_DiscussionTags__WEBPACK_IMPORTED_MODULE_57__["discussionsDiscussionTags"],
  gamesGameTags: _Games_GameTags__WEBPACK_IMPORTED_MODULE_58__["gamesGameTags"],
  groupsGroupTags: _Groups_GroupTags__WEBPACK_IMPORTED_MODULE_59__["groupsGroupTags"],
  giveawaysNewGiveawayDescriptionChecker: _Giveaways_NewGiveawayDescriptionChecker__WEBPACK_IMPORTED_MODULE_60__["giveawaysNewGiveawayDescriptionChecker"],
  giveawaysGiveawayTemplates: _Giveaways_GiveawayTemplates__WEBPACK_IMPORTED_MODULE_61__["giveawaysGiveawayTemplates"],
  giveawaysGridView: _Giveaways_GridView__WEBPACK_IMPORTED_MODULE_62__["giveawaysGridView"],
  generalHiddenBlacklistStats: _General_HiddenBlacklistStats__WEBPACK_IMPORTED_MODULE_63__["generalHiddenBlacklistStats"],
  giveawaysHiddenGamesEnterButtonDisabler: _Giveaways_HiddenGamesEnterButtonDisabler__WEBPACK_IMPORTED_MODULE_64__["giveawaysHiddenGamesEnterButtonDisabler"],
  giveawaysHiddenGamesManager: _Giveaways_HiddenGamesManager__WEBPACK_IMPORTED_MODULE_65__["giveawaysHiddenGamesManager"],
  generalHeaderRefresher: _General_HeaderRefresher__WEBPACK_IMPORTED_MODULE_66__["generalHeaderRefresher"],
  tradesHeaderTradesButton: _Trades_HeaderTradesButton__WEBPACK_IMPORTED_MODULE_67__["tradesHeaderTradesButton"],
  tradesHaveWantListChecker: _Trades_HaveWantListChecker__WEBPACK_IMPORTED_MODULE_68__["tradesHaveWantListChecker"],
  generalLastPageLink: _General_LastPageLink__WEBPACK_IMPORTED_MODULE_69__["generalLastPageLink"],
  generalLevelProgressVisualizer: _General_LevelProgressVisualizer__WEBPACK_IMPORTED_MODULE_70__["generalLevelProgressVisualizer"],
  giveawaysMultipleGiveawayCreator: _Giveaways_MultipleGiveawayCreator__WEBPACK_IMPORTED_MODULE_71__["giveawaysMultipleGiveawayCreator"],
  generalMultiManager: _General_MultiManager__WEBPACK_IMPORTED_MODULE_72__["generalMultiManager"],
  discussionsMainPostPopup: _Discussions_MainPostPopup__WEBPACK_IMPORTED_MODULE_73__["discussionsMainPostPopup"],
  discussionsMainPostSkipper: _Discussions_MainPostSkipper__WEBPACK_IMPORTED_MODULE_74__["discussionsMainPostSkipper"],
  generalNotificationMerger: _General_NotificationMerger__WEBPACK_IMPORTED_MODULE_75__["generalNotificationMerger"],
  giveawaysNextPreviousTrainHotkeys: _Giveaways_NextPreviousTrainHotkeys__WEBPACK_IMPORTED_MODULE_76__["giveawaysNextPreviousTrainHotkeys"],
  generalPaginationNavigationOnTop: _General_PaginationNavigationOnTop__WEBPACK_IMPORTED_MODULE_77__["generalPaginationNavigationOnTop"],
  giveawaysPinnedGiveawaysButton: _Giveaways_PinnedGiveawaysButton__WEBPACK_IMPORTED_MODULE_78__["giveawaysPinnedGiveawaysButton"],
  discussionsPuzzleMarker: _Discussions_PuzzleMarker__WEBPACK_IMPORTED_MODULE_79__["discussionsPuzzleMarker"],
  generalPointsVisualizer: _General_PointsVisualizer__WEBPACK_IMPORTED_MODULE_80__["generalPointsVisualizer"],
  giveawaysAdvancedGiveawaySearch: _Giveaways_AdvancedGiveawaySearch__WEBPACK_IMPORTED_MODULE_82__["giveawaysAdvancedGiveawaySearch"],
  generalSearchMagnifyingGlassButton: _General_SearchMagnifyingGlassButton__WEBPACK_IMPORTED_MODULE_83__["generalSearchMagnifyingGlassButton"],
  discussionsRefreshActiveDiscussionsButton: _Discussions_RefreshActiveDiscussionsButton__WEBPACK_IMPORTED_MODULE_84__["discussionsRefreshActiveDiscussionsButton"],
  discussionsActiveDiscussionsToDisplay: _Discussions_ActiveDiscussionsToDisplay__WEBPACK_IMPORTED_MODULE_85__["discussionsActiveDiscussionsToDisplay"],
  commentsReplyBoxPopup: _Comments_ReplyBoxPopup__WEBPACK_IMPORTED_MODULE_86__["commentsReplyBoxPopup"],
  commentsCommentFormattingHelper: _Comments_CommentFormattingHelper__WEBPACK_IMPORTED_MODULE_87__["commentsCommentFormattingHelper"],
  commentsCommentVariables: _Comments_CommentVariables__WEBPACK_IMPORTED_MODULE_88__["commentsCommentVariables"],
  giveawaysRealCVCalculator: _Giveaways_RealCVCalculator__WEBPACK_IMPORTED_MODULE_89__["giveawaysRealCVCalculator"],
  giveawaysStickiedGiveawayCountries: _Giveaways_StickiedGiveawayCountries__WEBPACK_IMPORTED_MODULE_90__["giveawaysStickiedGiveawayCountries"],
  generalShortcutKeys: _General_ShortcutKeys__WEBPACK_IMPORTED_MODULE_91__["generalShortcutKeys"],
  giveawaysSentKeySearcher: _Giveaways_SentKeySearcher__WEBPACK_IMPORTED_MODULE_92__["giveawaysSentKeySearcher"],
  generalScrollToBottomButton: _General_ScrollToBottomButton__WEBPACK_IMPORTED_MODULE_93__["generalScrollToBottomButton"],
  generalScrollToTopButton: _General_ScrollToTopButton__WEBPACK_IMPORTED_MODULE_94__["generalScrollToTopButton"],
  tradesTradeBumper: _Trades_TradeBumper__WEBPACK_IMPORTED_MODULE_95__["tradesTradeBumper"],
  generalTimeToPointCapCalculator: _General_TimeToPointCapCalculator__WEBPACK_IMPORTED_MODULE_96__["generalTimeToPointCapCalculator"],
  giveawaysUnsentGiftSender: _Giveaways_UnsentGiftSender__WEBPACK_IMPORTED_MODULE_97__["giveawaysUnsentGiftSender"],
  usersUserSuspensionChecker: _Users_UserSuspensionChecker__WEBPACK_IMPORTED_MODULE_98__["usersUserSuspensionChecker"],
  usersWhitelistBlacklistChecker: _Users_WhitelistBlacklistChecker__WEBPACK_IMPORTED_MODULE_99__["usersWhitelistBlacklistChecker"],
  usersWhitelistBlacklistHighlighter: _Users_WhitelistBlacklistHighlighter__WEBPACK_IMPORTED_MODULE_100__["usersWhitelistBlacklistHighlighter"],
  usersWhitelistBlacklistSorter: _Users_WhitelistBlacklistSorter__WEBPACK_IMPORTED_MODULE_101__["usersWhitelistBlacklistSorter"],
  usersWhitelistBlacklistManager: _Users_WhitelistBlacklistManager__WEBPACK_IMPORTED_MODULE_102__["usersWhitelistBlacklistManager"],
  generalURLRedirector: _General_URLRedirector__WEBPACK_IMPORTED_MODULE_103__["generalURLRedirector"],
  usersUserTags: _Users_UserTags__WEBPACK_IMPORTED_MODULE_104__["usersUserTags"],
  usersSteamFriendsIndicator: _Users_SteamFriendsIndicator__WEBPACK_IMPORTED_MODULE_105__["usersSteamFriendsIndicator"],
  generalAccurateTimestamp: _General_AccurateTimestamp__WEBPACK_IMPORTED_MODULE_106__["generalAccurateTimestamp"],
  generalEmbeddedVideos: _General_EmbeddedVideos__WEBPACK_IMPORTED_MODULE_107__["generalEmbeddedVideos"],
  generalImageBorders: _General_ImageBorders__WEBPACK_IMPORTED_MODULE_108__["generalImageBorders"],
  generalVisibleAttachedImages: _General_VisibleAttachedImages__WEBPACK_IMPORTED_MODULE_109__["generalVisibleAttachedImages"],
  generalAttachedImageLoader: _General_AttachedImageLoader__WEBPACK_IMPORTED_MODULE_110__["generalAttachedImageLoader"],
  giveawaysCreatedEnteredWonGiveawayDetails: _Giveaways_CreatedEnteredWonGiveawayDetails__WEBPACK_IMPORTED_MODULE_111__["giveawaysCreatedEnteredWonGiveawayDetails"],
  giveawaysDeleteKeyConfirmation: _Giveaways_DeleteKeyConfirmation__WEBPACK_IMPORTED_MODULE_112__["giveawaysDeleteKeyConfirmation"],
  giveawaysGiveawayWinningChance: _Giveaways_GiveawayWinningChance__WEBPACK_IMPORTED_MODULE_113__["giveawaysGiveawayWinningChance"],
  giveawaysGiveawayWinningRatio: _Giveaways_GiveawayWinningRatio__WEBPACK_IMPORTED_MODULE_114__["giveawaysGiveawayWinningRatio"],
  giveawaysEnteredGiveawaysStats: _Giveaways_EnteredGiveawaysStats__WEBPACK_IMPORTED_MODULE_42__["giveawaysEnteredGiveawaysStats"],
  giveawaysGiveawayPointsToWin: _Giveaways_GiveawayPointsToWin__WEBPACK_IMPORTED_MODULE_115__["giveawaysGiveawayPointsToWin"],
  giveawaysGiveawayEndTimeHighlighter: _Giveaways_GiveawayEndTimeHighlighter__WEBPACK_IMPORTED_MODULE_116__["giveawaysGiveawayEndTimeHighlighter"],
  giveawaysSteamActivationLinks: _Giveaways_SteamActivationLinks__WEBPACK_IMPORTED_MODULE_117__["giveawaysSteamActivationLinks"],
  giveawaysUnfadedEnteredGiveaway: _Giveaways_UnfadedEnteredGiveaway__WEBPACK_IMPORTED_MODULE_118__["giveawaysUnfadedEnteredGiveaway"],
  giveawaysStickiedGiveawayGroups: _Giveaways_StickiedGiveawayGroups__WEBPACK_IMPORTED_MODULE_119__["giveawaysStickiedGiveawayGroups"],
  commentsMultiReply: _Comments_MultiReply__WEBPACK_IMPORTED_MODULE_120__["commentsMultiReply"],
  commentsReplyFromInbox: _Comments_ReplyFromInbox__WEBPACK_IMPORTED_MODULE_121__["commentsReplyFromInbox"],
  commentsReplyMentionLink: _Comments_ReplyMentionLink__WEBPACK_IMPORTED_MODULE_122__["commentsReplyMentionLink"],
  usersInboxWinnerHighlighter: _Users_InboxWinnerHighlighter__WEBPACK_IMPORTED_MODULE_123__["usersInboxWinnerHighlighter"],
  usersUserStats: _Users_UserStats__WEBPACK_IMPORTED_MODULE_124__["usersUserStats"],
  generalContentLoader: _General_ContentLoader__WEBPACK_IMPORTED_MODULE_134__["generalContentLoader"],
  groupsGroupHighlighter: _Groups_GroupHighlighter__WEBPACK_IMPORTED_MODULE_125__["groupsGroupHighlighter"],
  giveawaysGiveawayPopup: _Giveaways_GiveawayPopup__WEBPACK_IMPORTED_MODULE_126__["giveawaysGiveawayPopup"],
  giveawaysEnterLeaveGiveawayButton: _Giveaways_EnterLeaveGiveawayButton__WEBPACK_IMPORTED_MODULE_127__["giveawaysEnterLeaveGiveawayButton"],
  giveawaysIsThereAnyDealInfo: _Giveaways_IsThereAnyDealInfo__WEBPACK_IMPORTED_MODULE_128__["giveawaysIsThereAnyDealInfo"],
  giveawaysUnhideGiveawayButton: _Giveaways_UnhideGiveawayButton__WEBPACK_IMPORTED_MODULE_129__["giveawaysUnhideGiveawayButton"],
  giveawaysOneClickHideGiveawayButton: _Giveaways_OneClickHideGiveawayButton__WEBPACK_IMPORTED_MODULE_130__["giveawaysOneClickHideGiveawayButton"],
  giveawaysGiveawayWinnersLink: _Giveaways_GiveawayWinnersLink__WEBPACK_IMPORTED_MODULE_132__["giveawaysGiveawayWinnersLink"],
  giveawaysTimeToEnterCalculator: _Giveaways_TimeToEnterCalculator__WEBPACK_IMPORTED_MODULE_133__["giveawaysTimeToEnterCalculator"],
  commentsReceivedReplyBoxPopup: _Comments_ReceivedReplyBoxPopup__WEBPACK_IMPORTED_MODULE_135__["commentsReceivedReplyBoxPopup"],
  giveaways: _Giveaways__WEBPACK_IMPORTED_MODULE_136__["giveawaysModule"],
  discussions: _Discussions__WEBPACK_IMPORTED_MODULE_137__["discussionsModule"],
  discussionPanels: _DiscussionPanels__WEBPACK_IMPORTED_MODULE_138__["discussionPanelsModule"],
  comments: _Comments__WEBPACK_IMPORTED_MODULE_139__["commentsModule"],
  games: _Games__WEBPACK_IMPORTED_MODULE_140__["gamesModule"],
  groups: _Groups__WEBPACK_IMPORTED_MODULE_141__["groupsModule"],
  users: _Users__WEBPACK_IMPORTED_MODULE_142__["usersModule"],
  generalTableSorter: _General_TableSorter__WEBPACK_IMPORTED_MODULE_143__["generalTableSorter"],
  generalSameTabOpener: _General_SameTabOpener__WEBPACK_IMPORTED_MODULE_144__["generalSameTabOpener"],
  usersUsernameHistory: _Users_UsernameHistory__WEBPACK_IMPORTED_MODULE_145__["usersUsernameHistory"],
  usersUserNotes: _Users_UserNotes__WEBPACK_IMPORTED_MODULE_146__["usersUserNotes"],
  usersUserFilters: _Users_UserFilters__WEBPACK_IMPORTED_MODULE_147__["usersUserFilters"],
  usersSharedGroupChecker: _Users_SharedGroupChecker__WEBPACK_IMPORTED_MODULE_148__["usersSharedGroupChecker"],
  generalCakeDayReminder: _General_CakeDayReminder__WEBPACK_IMPORTED_MODULE_16__["generalCakeDayReminder"],
  usersUserLinks: _Users_UserLinks__WEBPACK_IMPORTED_MODULE_149__["usersUserLinks"],
  usersRealWonSentCVLink: _Users_RealWonSentCVLink__WEBPACK_IMPORTED_MODULE_150__["usersRealWonSentCVLink"],
  usersUserGiveawayData: _Users_UserGiveawayData__WEBPACK_IMPORTED_MODULE_151__["usersUserGiveawayData"],
  usersNotActivatedMultipleWinChecker: _Users_NotActivatedMultipleWinChecker__WEBPACK_IMPORTED_MODULE_152__["usersNotActivatedMultipleWinChecker"],
  usersNotReceivedFinder: _Users_NotReceivedFinder__WEBPACK_IMPORTED_MODULE_153__["usersNotReceivedFinder"],
  usersSentWonRatio: _Users_SentWonRatio__WEBPACK_IMPORTED_MODULE_154__["usersSentWonRatio"],
  usersVisibleGiftsBreakdown: _Users_VisibleGiftsBreakdown__WEBPACK_IMPORTED_MODULE_155__["usersVisibleGiftsBreakdown"],
  usersVisibleRealCV: _Users_VisibleRealCV__WEBPACK_IMPORTED_MODULE_156__["usersVisibleRealCV"],
  usersLevelUpCalculator: _Users_LevelUpCalculator__WEBPACK_IMPORTED_MODULE_157__["usersLevelUpCalculator"],
  usersSteamGiftsProfileButton: _Users_SteamGiftsProfileButton__WEBPACK_IMPORTED_MODULE_158__["usersSteamGiftsProfileButton"],
  usersProfileLinks: _Users_ProfileLinks__WEBPACK_IMPORTED_MODULE_159__["usersProfileLinks"],
  generalSearchClearButton: _General_SearchClearButton__WEBPACK_IMPORTED_MODULE_160__["generalSearchClearButton"],
  profile: _Profile__WEBPACK_IMPORTED_MODULE_161__["profileModule"],
  generalQuickInboxView: _General_QuickInboxView__WEBPACK_IMPORTED_MODULE_162__["generalQuickInboxView"],
  generalEndlessScrolling: _General_EndlessScrolling__WEBPACK_IMPORTED_MODULE_163__["generalEndlessScrolling"]
};


/***/ }),
/* 144 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "common", function() { return common; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(146);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(147);
/* harmony import */ var core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_web_url_to_json_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(166);
/* harmony import */ var core_js_modules_web_url_to_json_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_url_to_json_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(167);
/* harmony import */ var core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(168);
/* harmony import */ var date_fns_isSameWeek__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(204);
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(90);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(207);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(208);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(96);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(209);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(210);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(221);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(222);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(211);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(219);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(97);
/* harmony import */ var _class_SettingsWizard__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(223);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(132);
/* harmony import */ var _class_Tabs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(231);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(212);
/* harmony import */ var _components_Collapsible__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(233);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(218);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(224);
/* harmony import */ var _constants_ClassNames__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(215);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(216);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(122);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(234);
/* harmony import */ var _Storage__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(247);
/* harmony import */ var _Sync__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(241);









































const SHORT_MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
class Common extends _class_Module__WEBPACK_IMPORTED_MODULE_20__["Module"] {
  constructor() {
    super();
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "openRequestLog", async () => {
      const limits = {
        minute: 120,
        hour: 2400,
        day: 14400
      };
      const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
        icon: 'fa-history',
        title: 'SteamGifts Request Log',
        isTemp: true
      });
      const [buttonGroup] = _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(popup.description, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "esgst-button-group"
      }, "View: "));
      _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create({
        color: 'green',
        name: 'Default',
        onClick: async () => {
          await _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].common.setSetting('sgRequestLog_view', 'default');
          this.loadRequestLog(limits, scrollableArea);
        }
      }).insert(buttonGroup, 'beforeend');
      _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create({
        color: 'green',
        name: 'Minutes',
        onClick: async () => {
          await _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].common.setSetting('sgRequestLog_view', 'minute');
          this.loadRequestLog(limits, scrollableArea);
        }
      }).insert(buttonGroup, 'beforeend');
      _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create({
        color: 'green',
        name: 'Hours',
        onClick: async () => {
          await _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].common.setSetting('sgRequestLog_view', 'hour');
          this.loadRequestLog(limits, scrollableArea);
        }
      }).insert(buttonGroup, 'beforeend');
      _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create({
        color: 'green',
        name: 'Days',
        onClick: async () => {
          await _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].common.setSetting('sgRequestLog_view', 'day');
          this.loadRequestLog(limits, scrollableArea);
        }
      }).insert(buttonGroup, 'beforeend');
      const scrollableArea = popup.getScrollable(null);
      scrollableArea.className = 'markdown';
      popup.open();
      do {
        this.loadRequestLog(limits, scrollableArea);
        await _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].common.timeout(10000);
      } while (popup.isOpen);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "loadRequestLog", async (limits, scrollableArea) => {
      const currentDate = new Date();
      const now = currentDate.getTime();
      const currentDay = currentDate.getDate();
      const currentHour = currentDate.getHours();
      const currentMinute = currentDate.getMinutes();
      currentDate.setDate(currentDay - 1);
      const lastDay = currentDate.getDate();
      currentDate.setHours(currentHour - 1);
      const lastHour = currentDate.getHours();
      currentDate.setMinutes(currentMinute - 1);
      const lastMinute = currentDate.getMinutes();
      const info = {
        minute: {
          title: 'Minute',
          items: []
        },
        hour: {
          title: 'Hour',
          items: []
        },
        day: {
          title: 'Day',
          items: []
        }
      };
      _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.requestLog = _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.requestLog.filter(log => now - log.timestamp <= 2592000000);
      for (const log of _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.requestLog) {
        const date = new Date(log.timestamp);
        const day = date.getDate();
        const hour = date.getHours();
        const minute = date.getMinutes();
        if (day === currentDay) {
          var _info$day$items$0$url, _info$hour$items$hInd;
          if (!info.day.items[0]) {
            info.day.items[0] = {
              count: 0,
              urls: {}
            };
          }
          info.day.items[0].urls[log.url] = ((_info$day$items$0$url = info.day.items[0].urls[log.url]) !== null && _info$day$items$0$url !== void 0 ? _info$day$items$0$url : 0) + 1;
          info.day.items[0].count += 1;
          const hIndex = currentHour - hour;
          if (!info.hour.items[hIndex]) {
            info.hour.items[hIndex] = {
              count: 0,
              urls: {}
            };
          }
          info.hour.items[hIndex].urls[log.url] = ((_info$hour$items$hInd = info.hour.items[hIndex].urls[log.url]) !== null && _info$hour$items$hInd !== void 0 ? _info$hour$items$hInd : 0) + 1;
          info.hour.items[hIndex].count += 1;
          const mIndex = hour === currentHour ? currentMinute - minute : 60 - minute + currentMinute;
          if (mIndex < 60) {
            var _info$minute$items$mI;
            if (!info.minute.items[mIndex]) {
              info.minute.items[mIndex] = {
                count: 0,
                urls: {}
              };
            }
            info.minute.items[mIndex].urls[log.url] = ((_info$minute$items$mI = info.minute.items[mIndex].urls[log.url]) !== null && _info$minute$items$mI !== void 0 ? _info$minute$items$mI : 0) + 1;
            info.minute.items[mIndex].count += 1;
          }
        } else if (day === lastDay) {
          var _info$day$items$1$url;
          if (!info.day.items[1]) {
            info.day.items[1] = {
              count: 0,
              urls: {}
            };
          }
          info.day.items[1].urls[log.url] = ((_info$day$items$1$url = info.day.items[1].urls[log.url]) !== null && _info$day$items$1$url !== void 0 ? _info$day$items$1$url : 0) + 1;
          info.day.items[1].count += 1;
          const hIndex = 24 - hour + currentHour;
          if (hIndex < 24) {
            var _info$hour$items$hInd2;
            if (!info.hour.items[hIndex]) {
              info.hour.items[hIndex] = {
                count: 0,
                urls: {}
              };
            }
            info.hour.items[hIndex].urls[log.url] = ((_info$hour$items$hInd2 = info.hour.items[hIndex].urls[log.url]) !== null && _info$hour$items$hInd2 !== void 0 ? _info$hour$items$hInd2 : 0) + 1;
            info.hour.items[hIndex].count += 1;
          }
          if (hour === lastHour) {
            const mIndex = 60 - minute + currentMinute;
            if (mIndex < 60) {
              var _info$minute$items$mI2;
              if (!info.minute.items[mIndex]) {
                info.minute.items[mIndex] = {
                  count: 0,
                  urls: {}
                };
              }
              info.minute.items[mIndex].urls[log.url] = ((_info$minute$items$mI2 = info.minute.items[mIndex].urls[log.url]) !== null && _info$minute$items$mI2 !== void 0 ? _info$minute$items$mI2 : 0) + 1;
              info.minute.items[mIndex].count += 1;
            }
          }
        } else {
          break;
        }
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].common.setValue('requestLog', JSON.stringify(_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.requestLog));
      for (const key in info) {
        for (let i = 0, n = info[key].items.length; i < n; i++) {
          if (info[key].items[i]) {
            info[key].items[i].urls = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].sortArray(Object.entries(info[key].items[i].urls).map(([url, count]) => ({
              url,
              count
            })), true, 'count');
          }
        }
      }
      const nodes = [];
      const view = _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('sgRequestLog_view');
      if (!view || view === 'default') {
        for (const i of [0, 1]) {
          for (const key in info) {
            var _info$key$items$i$cou, _info$key$items$i, _info$key$items$i$url, _info$key$items$i2;
            let title;
            const count = (_info$key$items$i$cou = (_info$key$items$i = info[key].items[i]) === null || _info$key$items$i === void 0 ? void 0 : _info$key$items$i.count) !== null && _info$key$items$i$cou !== void 0 ? _info$key$items$i$cou : 0;
            const countPercentage = Math.round(count / limits[key] * 10000) / 100;
            if (i === 0) {
              const countLeft = limits[key] - count;
              const countLeftPercentage = Math.round((100 - countPercentage) * 100) / 100;
              title = `This ${info[key].title} - Current: ${count} (${countPercentage}%) / Left: ${countLeft} (${countLeftPercentage}%) / Max: ${limits[key]}`;
            } else {
              title = `Last ${info[key].title} - ${count} (${countPercentage}%)`;
            }
            nodes.push(_components_Collapsible__WEBPACK_IMPORTED_MODULE_32__["Collapsible"].create(_class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("h3", null, title), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("ul", null, ((_info$key$items$i$url = (_info$key$items$i2 = info[key].items[i]) === null || _info$key$items$i2 === void 0 ? void 0 : _info$key$items$i2.urls) !== null && _info$key$items$i$url !== void 0 ? _info$key$items$i$url : []).map(({
              url,
              count
            }) => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("a", {
              href: url
            }, url), " (", count, ")"))), `sgRequestLog_${key}_${i}`));
          }
        }
      } else {
        const key = view;
        for (let i = 0, n = info[key].items.length; i < n; i++) {
          var _info$key$items$i$cou2, _info$key$items$i3, _info$key$items$i$url2, _info$key$items$i4;
          let title;
          const count = (_info$key$items$i$cou2 = (_info$key$items$i3 = info[key].items[i]) === null || _info$key$items$i3 === void 0 ? void 0 : _info$key$items$i3.count) !== null && _info$key$items$i$cou2 !== void 0 ? _info$key$items$i$cou2 : 0;
          const countPercentage = Math.round(count / limits[key] * 100) / 100;
          if (i === 0) {
            const countLeft = limits[key] - count;
            const countLeftPercentage = Math.round((100 - countPercentage) * 100) / 100;
            title = `This ${info[key].title} - Current: ${count} (${countPercentage}%) / Left: ${countLeft} (${countLeftPercentage}%) / Max: ${limits[key]}`;
          } else {
            title = `${i} ${_lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].getPlural(i, info[key].title)} Ago - ${count} (${countPercentage}%)`;
          }
          nodes.push(_components_Collapsible__WEBPACK_IMPORTED_MODULE_32__["Collapsible"].create(_class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("h3", null, title), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("ul", null, ((_info$key$items$i$url2 = (_info$key$items$i4 = info[key].items[i]) === null || _info$key$items$i4 === void 0 ? void 0 : _info$key$items$i4.urls) !== null && _info$key$items$i$url2 !== void 0 ? _info$key$items$i$url2 : []).map(({
            url,
            count
          }) => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("a", {
            href: url
          }, url), " (", count, ")"))), `sgRequestLog_${key}_${i}`));
        }
      }
      _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(scrollableArea, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("p", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("em", null, "Last updated ", currentDate.toLocaleString()), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("em", null, "Remember that this does not include the requests you make while browsing SteamGifts, so you don't want to reach 0 requests left, because that leaves exactly 0 requests for your browsing.")), nodes));
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "moveAdsDown", obj => {
      if (!_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].common.isCurrentPath('Browse Giveaways')) {
        return;
      }
      let adNode;
      obj.mainContext = this.esgst.pagination.previousElementSibling;
      for (const node of obj.mainContext.children) {
        if (node.classList.contains('giveaway__row-outer-wrap') || node.classList.contains('esgst-es-page-divider')) {
          continue;
        }
        if (!adNode) {
          adNode = node;
        }
        node.remove();
      }
      if (adNode) {
        obj.mainContext.appendChild(adNode);
      }
    });
    this.info = {
      id: 'common',
      name: 'Common',
      type: 'general'
    };
  }
  minimizePanel_add() {
    if (!this.esgst.pageOuterWrap) {
      return;
    }
    this.esgst.minimizePanel = this.createElements(this.esgst.pageOuterWrap, 'beforeend', [{
      attributes: {
        class: 'esgst-minimize-panel'
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'esgst-minimize-container markdown'
        },
        type: 'div',
        children: [{
          text: `Minimized Popups:`,
          type: 'h3'
        }, {
          type: 'hr'
        }, {
          attributes: {
            class: 'esgst-minimize-list'
          },
          type: 'ul'
        }]
      }]
    }]);
    this.esgst.minimizeList = this.esgst.minimizePanel.firstElementChild.lastElementChild;
  }
  minimizePanel_addItem(popup) {
    if (!this.esgst.minimizeList) {
      return;
    }
    popup.minimizeItem = this.createElements(this.esgst.minimizeList, 'beforeend', [{
      attributes: {
        class: 'esgst-minimize-item'
      },
      type: 'li',
      children: [{
        attributes: {
          href: `javascript:void(0);`
        },
        text: popup.title.textContent.replace(/:$/, ''),
        type: 'a'
      }]
    }]);
    popup.minimizeLink = popup.minimizeItem.firstElementChild;
    popup.minimizeItem.addEventListener('click', this.minimizePanel_openItem.bind(this, popup));
  }
  minimizePanel_openItem(popup) {
    popup.open();
    popup.minimizeItem.remove();
    popup.minimizeItem = null;
    if (!this.esgst.minimizePanel.getElementsByClassName('alert').length) {
      this.esgst.minimizePanel.classList.remove('alert');
    }
  }
  minimizePanel_alert(popup) {
    if (popup.minimizeItem) {
      popup.minimizeItem.classList.add('alert');
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('minimizePanel')) {
      this.esgst.minimizePanel.classList.add('alert');
    }
  }
  setSidebarActive(id) {
    const selected = this.esgst.sidebar.querySelector('.is-selected');
    selected.querySelector('.fa-caret-right').remove();
    selected.classList.remove('is-selected');
    const newSelected = document.querySelector(`#${id}`);
    newSelected.classList.add('is-selected');
    _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(newSelected.querySelector('.sidebar__navigation__item__link'), 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("i", {
      className: "fa fa-caret-right"
    }));
  }

  /**
   *
   * @param {Object} modules
   * @returns {Promise<void>}
   */
  async loadFeatures(modules) {
    //Logger.info(this.esgst.games.apps[269650]);
    if (this.isCurrentPath('Account')) {
      var _this$esgst$parameter;
      this.createSidebarNavigation(this.esgst.sidebar, 'beforeend', {
        name: 'ESGST',
        items: [{
          id: 'settings',
          name: 'Settings',
          url: this.esgst.settingsUrl
        }, {
          id: 'sync',
          name: 'Sync',
          url: this.esgst.syncUrl
        }, {
          id: 'backup',
          name: 'Backup',
          url: this.esgst.backupUrl
        }, {
          id: 'restore',
          name: 'Restore',
          url: this.esgst.restoreUrl
        }, {
          id: 'delete',
          name: 'Delete',
          url: this.esgst.deleteUrl
        }, {
          id: 'clean',
          name: 'Clean',
          url: this.esgst.cleanUrl
        }, {
          id: 'data-management',
          name: 'Data Management',
          url: this.esgst.dataManagementUrl
        }]
      });
      if ((_this$esgst$parameter = this.esgst.parameters.esgst) !== null && _this$esgst$parameter !== void 0 && _this$esgst$parameter.match(/^(settings|sync|backup|restore|delete|clean|data-management)$/)) {
        _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_15__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_36__["Events"].PAGE_HEADING_BUILD, builtHeading => builtHeading.nodes.outer.classList.add('esgst-fmph'));
      }
      if (this.esgst.parameters.esgst === 'debug') {
        let textArea;
        _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(document.body, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("textarea", {
          ref: ref => textArea = ref
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("button", {
          onclick: () => Function('"use strict";' + textArea.value + '').call(_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"])
        }, "Debug")));
        return;
      } else if (this.esgst.parameters.esgst === 'settings') {
        this.setSidebarActive('settings');
        _Settings__WEBPACK_IMPORTED_MODULE_38__["settingsModule"].loadMenu();
      } else if (this.esgst.parameters.esgst === 'sync') {
        this.setSidebarActive('sync');
        await Object(_Sync__WEBPACK_IMPORTED_MODULE_40__["setSync"])();
      } else if (this.esgst.parameters.esgst === 'backup') {
        this.setSidebarActive('backup');
        Object(_Storage__WEBPACK_IMPORTED_MODULE_39__["loadDataManagement"])('export');
      } else if (this.esgst.parameters.esgst === 'restore') {
        this.setSidebarActive('restore');
        Object(_Storage__WEBPACK_IMPORTED_MODULE_39__["loadDataManagement"])('import');
      } else if (this.esgst.parameters.esgst === 'delete') {
        this.setSidebarActive('delete');
        Object(_Storage__WEBPACK_IMPORTED_MODULE_39__["loadDataManagement"])('delete');
      } else if (this.esgst.parameters.esgst === 'clean') {
        this.setSidebarActive('clean');
        Object(_Storage__WEBPACK_IMPORTED_MODULE_39__["loadDataCleaner"])();
      } else if (this.esgst.parameters.esgst === 'data-management') {
        this.setSidebarActive('data-management');
        this.loadDM();
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('minimizePanel')) {
      this.minimizePanel_add();
    }
    if (this.esgst.mainPageHeading) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(this.esgst.mainPageHeading, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "esgst-page-heading esgst-page-heading-buttons",
        ref: ref => this.esgst.leftMainPageHeadingButtons = ref
      }));
      _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(this.esgst.mainPageHeading, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "esgst-page-heading esgst-page-heading-buttons",
        ref: ref => this.esgst.rightMainPageHeadingButtons = ref
      }));
    }
    let hideButtonsLeft, hideButtonsRight;
    hideButtonsLeft = document.createElement('div');
    hideButtonsLeft.className = 'esgst-heading-button';
    _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(hideButtonsLeft, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("i", {
      className: "fa fa-ellipsis-v"
    }));
    this.esgst.leftButtons = this.createElements(new _class_Popout__WEBPACK_IMPORTED_MODULE_22__["Popout"]('esgst-hidden-buttons', hideButtonsLeft, 0, true).popout, 'beforeend', [{
      attributes: {
        class: 'esgst-page-heading'
      },
      type: 'div'
    }]);
    hideButtonsRight = document.createElement('div');
    hideButtonsRight.className = 'esgst-heading-button';
    _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(hideButtonsRight, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("i", {
      className: "fa fa-ellipsis-v"
    }));
    this.esgst.rightButtons = this.createElements(new _class_Popout__WEBPACK_IMPORTED_MODULE_22__["Popout"]('esgst-hidden-buttons', hideButtonsRight, 0, true).popout, 'beforeend', [{
      attributes: {
        class: 'esgst-page-heading'
      },
      type: 'div'
    }]);
    this.isGiveawayHeadingDefault = this.areArraysEqual(_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('giveawayHeading'), _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].defaultValues.giveawayHeading);
    this.isGiveawayHeadingGvDefault = this.areArraysEqual(_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('giveawayHeading_gv'), _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].defaultValues.giveawayHeading_gv);
    this.isGiveawayColumnsDefault = this.areArraysEqual(_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('giveawayColumns'), _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].defaultValues.giveawayColumns);
    this.isGiveawayColumnsGvDefault = this.areArraysEqual(_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('giveawayColumns_gv'), _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].defaultValues.giveawayColumns_gv);
    this.isGiveawayPanelDefault = this.areArraysEqual(_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('giveawayPanel'), _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].defaultValues.giveawayPanel);
    this.isGiveawayPanelGvDefault = this.areArraysEqual(_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('giveawayPanel_gv'), _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].defaultValues.giveawayPanel_gv);
    this.isGiveawayLinksDefault = this.areArraysEqual(_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('giveawayLinks'), _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].defaultValues.giveawayLinks);
    this.isGiveawayLinksGvDefault = this.areArraysEqual(_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('giveawayLinks_gv'), _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].defaultValues.giveawayLinks_gv);
    this.isGiveawayExtraPanelDefault = this.areArraysEqual(_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('giveawayExtraPanel'), _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].defaultValues.giveawayExtraPanel);
    this.isGiveawayExtraPanelGvDefault = this.areArraysEqual(_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('giveawayExtraPanel_gv'), _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].defaultValues.giveawayExtraPanel_gv);
    const batchSize = 10;
    let currentBatchIndex = 0;
    for (const key in modules) {
      const mod = modules[key];
      if (!mod.info || !mod.info.endless && !_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get(mod.info.id)) {
        continue;
      }
      if (mod.info.featureMap) {
        for (const type in mod.info.featureMap) {
          if (!mod.info.featureMap.hasOwnProperty(type)) {
            continue;
          }
          const map = mod.info.featureMap[type];
          if (Array.isArray(map)) {
            for (const item of map) {
              this.esgst[`${type}Features`].push(item);
            }
          } else {
            this.esgst[`${type}Features`].push(map);
          }
        }
      }
      try {
        await mod.init();
        /*currentBatchIndex += 1;
        if (currentBatchIndex > batchSize) {
        	currentBatchIndex = 0;
        	await this.timeout(0);
        }*/
      } catch (e) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_19__["Logger"].warning(`${mod.info.name} failed to load:`);
        _class_Logger__WEBPACK_IMPORTED_MODULE_19__["Logger"].error(e.message);
      }
    }
    const customPage = this.esgst.parameters.esgst ? this.esgst.customPages[this.esgst.parameters.esgst] : null;
    if (customPage && customPage.check) {
      await customPage.load();
    } else if (!_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.parameters.esgst || _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.parameters.esgst !== 'ge') {
      await this.endless_load(document, !this.esgst.parameters.esgst);
    }
    if (this.esgst.wbcButton && !_class_Scope__WEBPACK_IMPORTED_MODULE_24__["Scope"].findData('main', 'users').length) {
      this.esgst.wbcButton.classList.add('esgst-hidden');
    }
    if (this.esgst.uscButton && !_class_Scope__WEBPACK_IMPORTED_MODULE_24__["Scope"].findData('main', 'users').length) {
      this.esgst.uscButton.classList.add('esgst-hidden');
    }
    this.esgst.style.insertAdjacentText('beforeend', `
			.esgst-menu-split-fixed {
				max-height: calc(100vh - ${this.esgst.commentsTop + 55 + (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('ff') ? 39 : 0)}px);
				top: ${this.esgst.commentsTop + 25}px;
			}
		`);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('lastSyncHiddenGames') > 0) {
      const hideButton = document.getElementsByClassName('js__submit-hide-games')[0];
      if (hideButton) {
        hideButton.addEventListener('click', () => this.updateHiddenGames(this.esgst.hidingGame.id, this.esgst.hidingGame.type, false));
      }
    }
    if (this.esgst.newGiveawayPath) {
      // when the user searches for a game in the new giveaway page, wait until the results appear and load the game features for them
      let rows = document.getElementsByClassName('form__rows')[0];
      if (rows) {
        window.setTimeout(() => this.checkNewGiveawayInput(document.getElementsByClassName('js__autocomplete-data')[0]), 1000);
      }
    }
    if (this.esgst.mainPageHeading) {
      if (!this.esgst.leftMainPageHeadingButtons.querySelector(`.esgst-heading-button:not(.esgst-hidden)`)) {
        this.esgst.leftMainPageHeadingButtons.classList.add('esgst-hidden');
      }
      if (!this.esgst.rightMainPageHeadingButtons.querySelector(`.esgst-heading-button:not(.esgst-hidden)`)) {
        this.esgst.rightMainPageHeadingButtons.classList.add('esgst-hidden');
      }
      if (!this.esgst.leftButtons.querySelector(`.esgst-heading-button:not(.esgst-hidden)`)) {
        hideButtonsLeft.classList.add('esgst-hidden');
      }
      if (!this.esgst.rightButtons.querySelector(`.esgst-heading-button:not(.esgst-hidden)`)) {
        hideButtonsRight.classList.add('esgst-hidden');
      }
      this.esgst.mainPageHeading.insertBefore(hideButtonsLeft, this.esgst.mainPageHeading.firstElementChild);
      this.esgst.mainPageHeading.appendChild(hideButtonsRight);
    }
    this.reorderButtons(this.esgst);
    this.processHash();
    window.addEventListener('beforeunload', this.checkBusy.bind(this));
    window.addEventListener('hashchange', this.goToComment.bind(this, null, null, false));
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.replyBox && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('jumpToReplyBox')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.replyBox.querySelector('textarea').focus();
    }
    for (const key in this.esgst.documentEvents) {
      if (this.esgst.documentEvents.hasOwnProperty(key)) {
        document.addEventListener(key, this.processEvent.bind(this, this.esgst.documentEvents[key]), true);
      }
    }
    this.esgst.modules = modules;
  }
  processHash() {
    this.goToComment(this.esgst.originalHash, null, false);
    if (this.esgst.parameters.esgst && this.esgst.parameters.id) {
      const element = document.querySelector(`[data-id="${this.esgst.parameters.id}"]`);
      if (element) {
        const hiddenSection = element.closest(`.esgst-form-row-indent.esgst-hidden:not(.SMFeatures)`);
        if (hiddenSection) {
          hiddenSection.previousElementSibling.firstElementChild.click();
        }
        this.goToComment(`#${this.esgst.parameters.id}`, element);
      }
    }
  }
  processEvent(functions, event) {
    for (const fun of functions) {
      fun(event);
    }
  }
  async getElements() {
    if (this.esgst.sg) {
      this.esgst.pageOuterWrapClass = 'page__outer-wrap';
      this.esgst.pageHeadingClass = 'page__heading';
      this.esgst.pageHeadingBreadcrumbsClass = 'page__heading__breadcrumbs';
      this.esgst.replyBox = document.querySelector('.comment--submit');
      this.esgst.cancelButtonClass = 'comment__cancel-button';
      this.esgst.paginationNavigationClass = 'pagination__navigation';
      this.esgst.hiddenClass = 'is-hidden';
      this.esgst.selectedClass = 'is-selected';
    } else {
      var _this$esgst$replyBox;
      this.esgst.pageOuterWrapClass = 'page_outer_wrap';
      this.esgst.pageHeadingClass = 'page_heading';
      this.esgst.pageHeadingBreadcrumbsClass = 'page_heading_breadcrumbs';
      this.esgst.replyBox = /** @type {HTMLElement} */document.querySelector('.reply_form');
      if ((_this$esgst$replyBox = this.esgst.replyBox) !== null && _this$esgst$replyBox !== void 0 && _this$esgst$replyBox.querySelector('.rating_checkbox')) {
        this.esgst.reviewBox = this.esgst.replyBox;
        this.esgst.replyBox = null;
      }
      this.esgst.cancelButtonClass = 'btn_cancel';
      this.esgst.paginationNavigationClass = 'pagination_navigation';
      this.esgst.hiddenClass = 'is_hidden';
      this.esgst.selectedClass = 'is_selected';
    }
    const pageMatch = _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.locationHref.match(/page=(\d+)/);
    if (pageMatch) {
      this.esgst.currentPage = parseInt(pageMatch[1]);
    } else {
      this.esgst.currentPage = 1;
    }
    let url = window.location.href.replace(window.location.search, '').replace(window.location.hash, '').replace('/search', '');
    this.esgst.originalUrl = url;
    this.esgst.favicon = document.querySelector(`[rel="shortcut icon"]`);
    this.esgst.originalTitle = document.title;
    if (this.esgst.mainPath) {
      url += this.esgst.sg ? 'giveaways' : 'trades';
    }
    url += '/search?';
    let parameters = window.location.search.replace(/^\?/, '').split(/&/);
    for (let i = 0, n = parameters.length; i < n; ++i) {
      if (parameters[i] && !parameters[i].match(/page/)) {
        url += `${parameters[i]}&`;
      }
    }
    if (window.location.search) {
      this.esgst.originalUrl = url.replace(/&$/, '');
      if (this.esgst.currentPage > 1) {
        this.esgst.originalUrl += `&page=${this.esgst.currentPage}`;
      }
    }
    url += `page=`;
    this.esgst.searchUrl = url;
    this.esgst.pagination = /** @type {HTMLElement} */document.getElementsByClassName('pagination')[0];
    this.esgst.featuredContainer = /** @type {HTMLElement} */document.getElementsByClassName('featured__container')[0];
    this.esgst.pageOuterWrap = /** @type {HTMLElement} */document.getElementsByClassName(this.esgst.pageOuterWrapClass)[0];
    this.esgst.paginationNavigation = /** @type {HTMLElement} */document.getElementsByClassName(this.esgst.paginationNavigationClass)[0];
    this.esgst.sidebar = /** @type {HTMLElement} */document.getElementsByClassName('sidebar')[0];
    if (this.esgst.sidebar) {
      this.esgst.enterGiveawayButton = /** @type {HTMLElement} */this.esgst.sidebar.getElementsByClassName('sidebar__entry-insert')[0];
      this.esgst.leaveGiveawayButton = /** @type {HTMLElement} */this.esgst.sidebar.getElementsByClassName('sidebar__entry-delete')[0];
      this.esgst.giveawayErrorButton = /** @type {HTMLElement} */this.esgst.sidebar.getElementsByClassName('sidebar__error')[0];
      const headings = document.querySelectorAll('.sidebar__heading');
      // @ts-ignore
      for (const heading of headings) {
        this.esgst.sidebarGroups.push({
          heading: heading,
          navigation: heading.nextElementSibling
        });
      }
    }
    const discussionHeading = document.querySelector(`.block_header > [href="/discussions"]`);
    this.esgst.activeDiscussions = /** @type {HTMLElement} */discussionHeading && discussionHeading.closest('.widget-container--margin-top');
    this.esgst.pinnedGiveaways = /** @type {HTMLElement} */document.getElementsByClassName('pinned-giveaways__outer-wrap')[0];
    let mainPageHeadingIndex;
    if (this.esgst.commentsPath) {
      mainPageHeadingIndex = 1;
    } else {
      mainPageHeadingIndex = 0;
    }
    this.esgst.pageHeadings = document.querySelectorAll(`.${this.esgst.pageHeadingClass}`);
    this.esgst.mainPageHeading = document.getElementsByClassName(this.esgst.pageHeadingClass)[mainPageHeadingIndex];
    if (!this.esgst.mainPageHeading && mainPageHeadingIndex === 1) {
      this.esgst.mainPageHeading = document.getElementsByClassName(this.esgst.pageHeadingClass)[0];
    }
  }
  async checkNewGiveawayInput(context) {
    if (context.style.opacity === '1') {
      if (!context.getAttribute('data-esgst')) {
        context.setAttribute('data-esgst', true);
        await this.loadNewGiveawayFeatures(context);
      }
    } else {
      context.removeAttribute('data-esgst');
    }
    window.setTimeout(() => this.checkNewGiveawayInput(context), 1000);
  }
  async loadNewGiveawayFeatures(context) {
    await this.esgst.modules.games.games_load(context, true);
  }
  async endless_load(context, main, source, endless, mainEndless) {
    this.purgeRemovedElements();
    for (let feature of this.esgst.endlessFeatures) {
      try {
        await feature(context, main, source, endless, mainEndless);
      } catch (e) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_19__["Logger"].error(feature.name, e.message, e.stack);
      }
    }
  }
  purgeRemovedElements() {
    // there are more elements that need to be purged,
    // but for now these are the most critical ones
    _class_Scope__WEBPACK_IMPORTED_MODULE_24__["Scope"].purge();
    const keys = ['attachedImages', 'tsTables'];
    for (const key of keys) {
      for (let i = this.esgst[key].length - 1; i > -1; i--) {
        if (document.contains(this.esgst[key][i].outerWrap)) continue;
        this.esgst[key].splice(i, 1);
      }
    }
    for (const key in this.esgst.apPopouts) {
      if (this.esgst.apPopouts.hasOwnProperty(key)) {
        if (document.contains(this.esgst.apPopouts[key].popout)) continue;
        delete this.esgst.apPopouts[key];
      }
    }
    for (const key in this.esgst.currentUsers) {
      if (this.esgst.currentUsers.hasOwnProperty(key)) {
        const elements = this.esgst.currentUsers[key].elements;
        for (let i = elements.length - 1; i > -1; i--) {
          if (document.contains(elements[i])) continue;
          elements.splice(i, 1);
        }
        if (elements.length) continue;
        delete this.esgst.currentUsers[key];
      }
    }
  }

  // Helper

  async saveComment(context, tradeCode, parentId, description, url, status, goToLocation) {
    const username = _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('username');
    const obj = {
      context,
      comment: description
    };
    await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_15__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_36__["Events"].BEFORE_COMMENT_SUBMIT, obj);
    description = obj.comment;
    const data = `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_25__["Session"].xsrfToken}&do=${this.esgst.sg ? 'comment_new' : 'comment_insert'}&trade_code=${tradeCode}&parent_id=${parentId}&description=${encodeURIComponent(description)}`;
    let id = null;
    let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].post(url, {
      data
    });
    let responseHtml = null;
    let success = true;
    if (this.esgst.sg) {
      if (response.redirected) {
        responseHtml = response.html;
        let commentEls;
        if (parentId) {
          var _responseHtml$querySe, _responseHtml$querySe2;
          commentEls = (_responseHtml$querySe = (_responseHtml$querySe2 = responseHtml.querySelector(`[data-comment-id="${parentId}"]`)) === null || _responseHtml$querySe2 === void 0 || (_responseHtml$querySe2 = _responseHtml$querySe2.querySelector('.comment__children')) === null || _responseHtml$querySe2 === void 0 ? void 0 : _responseHtml$querySe2.children) !== null && _responseHtml$querySe !== void 0 ? _responseHtml$querySe : [];
        } else {
          var _responseHtml$querySe3;
          const els = (_responseHtml$querySe3 = responseHtml.querySelectorAll('.comments')) !== null && _responseHtml$querySe3 !== void 0 ? _responseHtml$querySe3 : [];
          commentEls = els[els.length - 1].children;
        }
        commentEls = Array.from(commentEls).reverse();
        for (const commentEl of commentEls) {
          var _commentEl$querySelec, _commentEl$querySelec2;
          const author = (_commentEl$querySelec = (_commentEl$querySelec2 = commentEl.querySelector('.comment__username')) === null || _commentEl$querySelec2 === void 0 ? void 0 : _commentEl$querySelec2.textContent.trim()) !== null && _commentEl$querySelec !== void 0 ? _commentEl$querySelec : '';
          if (author === username) {
            var _commentEl$querySelec3, _commentEl$querySelec4;
            id = (_commentEl$querySelec3 = (_commentEl$querySelec4 = commentEl.querySelector('.comment__summary')) === null || _commentEl$querySelec4 === void 0 ? void 0 : _commentEl$querySelec4.id) !== null && _commentEl$querySelec3 !== void 0 ? _commentEl$querySelec3 : '';
            break;
          }
        }
      } else {
        success = false;
      }
    } else {
      const responseJson = response.json;
      if (responseJson.success) {
        var _responseHtml$querySe4, _responseHtml$querySe5;
        responseHtml = _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].parse(responseJson.html);
        id = (_responseHtml$querySe4 = (_responseHtml$querySe5 = responseHtml.querySelector('.comment_outer')) === null || _responseHtml$querySe5 === void 0 ? void 0 : _responseHtml$querySe5.id) !== null && _responseHtml$querySe4 !== void 0 ? _responseHtml$querySe4 : '';
      } else {
        success = false;
      }
    }
    if (!success) {
      if (status instanceof _components_NotificationBar__WEBPACK_IMPORTED_MODULE_33__["NotificationBar"]) {
        status.setError('Failed!').show();
      } else {
        this.createElements(status, 'atinner', [{
          attributes: {
            class: 'fa fa-times-circle'
          },
          type: 'i'
        }, {
          text: 'Failed!',
          type: 'span'
        }]);
      }
      return {
        id: null,
        response: null,
        status
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('ch')) {
      // noinspection JSIgnoredPromiseFromCall
      this.esgst.modules.commentsCommentHistory.ch_saveComment(id, Date.now());
    }
    if (!goToLocation) {
      return {
        id,
        response,
        status
      };
    }
    await this.esgst.modules.giveawaysGiveawayEncrypterDecrypter.ged_saveGiveaways(this.esgst.sg ? responseHtml.getElementById(id).closest('.comment') : responseHtml.getElementById(id), id);
    window.location.href = `/go/comment/${id}`;
  }
  getFeatures() {
    const features = {
      general: {
        features: {}
      },
      giveaways: {
        features: {}
      },
      discussions: {
        features: {}
      },
      trades: {
        features: {}
      },
      comments: {
        features: {}
      },
      users: {
        features: {}
      },
      groups: {
        features: {}
      },
      games: {
        features: {}
      },
      others: {
        features: {
          limitSteamStore: {
            description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "With this option enabled, requests to the Steam store will be limited to 1 per 200 milliseconds, to prevent the user from running into potential blocks, specially when using features like ", _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].common.getFeatureName(null, 'gc'), ".")),
            name: 'Limit Steam store requests.',
            sg: true
          },
          useCustomAdaReqLim: {
            name: 'Use custom adaptive request limits for SteamGifts.',
            sg: true,
            inputItems: [{
              id: 'customAdaReqLim_default',
              prefix: '1 request every ',
              suffix: ' seconds (default)',
              attributes: {
                type: 'number',
                min: '0.25',
                step: '0.01'
              }
            }, {
              id: 'customAdaReqLim_minute50',
              prefix: '1 request every ',
              suffix: ' seconds (after using 50% of the minute limit)',
              attributes: {
                type: 'number',
                min: '0.5',
                step: '0.01'
              }
            }, {
              id: 'customAdaReqLim_minute75',
              prefix: '1 request every ',
              suffix: ' seconds (after using 75% of the minute limit)',
              attributes: {
                type: 'number',
                min: '1',
                step: '0.01'
              }
            }, {
              id: 'customAdaReqLim_hourly75',
              prefix: '1 request every ',
              suffix: ' seconds (after using 75% of the hourly limit)',
              attributes: {
                type: 'number',
                min: '1.5',
                step: '0.01'
              }
            }, {
              id: 'customAdaReqLim_daily75',
              prefix: '1 request every ',
              suffix: ' seconds (after using 75% of the daily limit)',
              attributes: {
                type: 'number',
                min: '2',
                step: '0.01'
              }
            }]
          },
          notifyLogs: {
            name: 'Notify about console logs.',
            sg: true,
            st: true
          },
          jumpToReplyBox: {
            name: 'Jump to the reply box when loading a page that has one.',
            sg: true,
            st: true
          },
          removeSidebarInFeaturePages: {
            name: `Remove sidebar in feature pages (for example, Giveaway Extractor, Group/Library Wishlist Checker etc).`,
            sg: true
          },
          openSettingsInTab: {
            name: 'Open settings menu in a new tab.',
            sg: true,
            st: true
          },
          activateTab: {
            description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "When a browser session is restored, you have to activate a tab so that it can be loaded. With this option enabled, ESGST automatically activates the first SG/ST tab open so that the extension can be injected immediately.")),
            extensionOnly: true,
            name: 'Activate the first SG/ST tab if a browser session was restored.',
            sg: true,
            st: true
          },
          manipulateCookies: {
            description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "You should enable this option if you use a single Firefox container for the common sites requested by ESGST that require you to be logged in (SteamGifts, SteamTrades, Steam, SGTools, etc...) or if you block third-party cookies. With it enabled, ESGST will read your cookies and modify request headers to make sure that requests are sent using the cookies from the current container you are on."), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "For example: you are only logged in on SteamGifts and Steam in the personal container. With this option disabled, when you try to sync your owned games on ESGST it will fail because it will use the default cookies (where you are not logged in). With this option enabled, the sync will succeed because the container cookies will be used instead (where you are logged in)."), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "If you are concerned about what exactly is done, you can check out the source code of the eventPage.js file, where the process occurs. Basically what happens is: the ID of your current container is retrieved from the tab that initiated the request and used to retrieve the cookies from that container (using the cookies API), then ESGST sends the request with a custom header \"Esgst-Cookie\" and the request is intercepted by the webRequest API, where the custom header is renamed to \"Cookie\" so that the cookies can be sent with the request. This is not a pretty solution, but it does the job until a better and more permanent solution comes along.")),
            extensionOnly: true,
            name: 'Allow ESGST to read your cookies and modify request headers when using Firefox containers or when blocking third-party cookies.',
            sg: true,
            st: true,
            permissions: ['cookies']
          },
          askFileName: {
            name: 'Ask for file name when backing up data.',
            sg: true,
            st: true
          },
          autoBackup: {
            inputItems: [{
              id: 'autoBackup_days',
              prefix: `Days: `
            }],
            name: 'Automatically backup your data every specified number of days.',
            options: {
              title: `Backup to:`,
              values: ['Computer', 'Dropbox', 'Google Drive', 'OneDrive']
            },
            sg: true,
            st: true
          },
          openAutoBackupNewTab: {
            name: 'Open automatic backup in a new tab.',
            sg: true,
            st: true
          },
          autoSync: {
            name: 'Automatically sync games/groups when syncing through SteamGifts.',
            sg: true
          },
          openAutoSyncPopup: {
            name: 'Open sync popup when automatically syncing by default.',
            sg: true
          },
          openAutoSyncNewTab: {
            name: 'Open automatic sync in a new tab.',
            sg: true
          },
          calculateDelete: {
            name: 'Calculate and show data sizes when opening the delete menu.',
            sg: true,
            st: true
          },
          backupZip: {
            name: `Backup data as a .zip file (smaller, but slower) instead of a .json file (larger, but faster).`,
            sg: true,
            st: true
          },
          calculateExport: {
            name: 'Calculate and show data sizes when opening the backup menu.',
            sg: true,
            st: true
          },
          calculateImport: {
            name: 'Calculate and show data sizes when opening the restore menu.',
            sg: true,
            st: true
          },
          notifyNewVersion: {
            name: 'Notify when a new ESGST version is available.',
            extensionOnly: true,
            sg: true,
            st: true
          },
          makeSectionsCollapsible: {
            description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "The state of the sections is remembered if you save the settings after collapsing/expanding them.")),
            name: 'Make sections in the settings menu collapsible.',
            sg: true,
            st: true
          },
          esgst: {
            name: 'Enable ESGST for SteamTrades.',
            st: true
          },
          enableByDefault: {
            name: 'Enable new features and functionalities by default.',
            sg: true,
            st: true
          },
          fallbackSteamApi: {
            description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "With this option enabled, if you sync your games without being logged in to Steam, the Steam API will be used instead (less complete, so some of your games will be removed until you sync while logged in).")),
            name: 'Fallback to Steam API when syncing without being logged in.',
            sg: true,
            st: true
          },
          static_popups: {
            name: `Make popups static (they are fixed at the top left corner of the page instead of being automatically centered).`,
            sg: true,
            st: true
          },
          minimizePanel: {
            description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "When you close a non-temporary popup, it will be minimized to a panel that can be accessed by moving your mouse to the left corner of the window in any page. There you can quickly find and re-open all of the popups that you minimized."), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "A non-temporary popup is a popup that does not get destroyed when you close it. For example, the settings popup is a temporary popup - when you close it, the popup is destroyed, and when you click on the button to open the settings again, a new popup is created. The Whitelist/Blacklist Checker popup is an example of a non-temporary popup - if you close it and re-open it, it will be the exact same popup."), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "With this option enabled, the sync/backup popups become non-temporary, which allows you to close them and keep navigating through the page while ESGST is performing the sync/backup, without having to wait for it to finish."), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "Some popups will notify you when they are done. When this happens, a red bar will flash at the left side of the screen that only disappears when you open the minimize panel and re-open the popup that is requiring your attention.")),
            name: 'Minimize non-temporary popups to a panel when closing them.',
            sg: true,
            st: true
          },
          getSyncGameNames: {
            description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "With this disabled, only the app/sub ids of the games will appear."), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "This can lead to lots of requests to the Steam store, so only enable it if you truly need to see the names of the games that were added/removed.")),
            name: 'Retrieve game names when syncing.',
            sg: true,
            st: true
          },
          showChangelog: {
            name: 'Show changelog from the new version when updating.',
            sg: true,
            st: true
          },
          showFeatureNumber: {
            name: 'Show the feature number in the tooltips of elements added by ESGST.',
            sg: true,
            st: true
          }
        }
      }
    };
    for (const type in features) {
      if (features.hasOwnProperty(type)) {
        if (type === 'others') {
          continue;
        }
        const typeModules = Object.keys(this.esgst.modules).filter(x => this.esgst.modules[x].info && this.esgst.modules[x].info.type === type).sort((x, y) => {
          return this.esgst.modules[x].info.id.localeCompare(this.esgst.modules[y].info.id, {
            sensitivity: 'base'
          });
        });
        for (const key of typeModules) {
          const module = this.esgst.modules[key];
          features[type].features[module.info.id] = module.info;
        }
      }
    }
    return features;
  }
  getFeaturesById() {
    const featuresById = {};
    const featuresAncestors = {};
    for (const type in _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.features) {
      for (const id in _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.features[type].features) {
        const feature = _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.features[type].features[id];
        this.getFeatureById(feature, id, featuresById, featuresAncestors);
      }
    }
    for (const [id, feature] of Object.entries(featuresById)) {
      if (!feature.alias) {
        continue;
      }
      const aliasFeature = featuresById[feature.alias];
      for (const key in aliasFeature) {
        feature[key] = aliasFeature[key];
      }
      feature.id = id;
    }
    return [featuresById, featuresAncestors];
  }
  getFeatureById(feature, id, featuresById, featuresAncestors) {
    feature.id = id;
    featuresById[id] = feature;
    if (feature.features) {
      for (const subId in feature.features) {
        const subFeature = feature.features[subId];
        featuresAncestors[subId] = id;
        this.getFeatureById(subFeature, subId, featuresById, featuresAncestors);
      }
    }
  }
  checkBusy(event) {
    if (document.getElementsByClassName('esgst-busy')[0] || this.esgst.busy) {
      event.returnValue = true;
      return true;
    }
  }
  setMouseEvent(element, id, url, callback) {
    let isDragging = -1;
    let startingPos = [0, 0];
    element.addEventListener('mousedown', event => {
      if (event.button === 2) return; // right click, do nothing
      if (event.button === 1) {
        // middle click
        event.preventDefault();
      }
      isDragging = event.button;
      startingPos = [event.pageX, event.pageY];
    });
    element.addEventListener('mousemove', event => {
      if (isDragging === -1 || event.pageX === startingPos[0] && event.pageY === startingPos[1]) return;
      isDragging = -1;
    });
    element.addEventListener('mouseup', () => {
      if (isDragging === -1) return;
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get(id) || isDragging === 1) {
        _class_Tabs__WEBPACK_IMPORTED_MODULE_29__["Tabs"].open(url);
      } else {
        callback();
      }
      isDragging = -1;
      startingPos = [0, 0];
    });
  }
  createHeadingButton(details) {
    let context = details.context;
    const id = details.orderId || details.id;
    if (!context) {
      if (id === 'gmf' && _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.discussionPath) {
        context = document.querySelector('.page__heading__breadcrumbs');
        context.parentElement.insertBefore(details.element, context);
        return context.previousElementSibling;
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('leftButtonIds').indexOf(id) > -1) {
        context = this.esgst.leftButtons;
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('rightButtonIds').indexOf(id) > -1) {
        context = this.esgst.rightButtons;
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('leftMainPageHeadingIds').indexOf(id) > -1) {
        context = this.esgst.leftMainPageHeadingButtons;
      } else {
        context = this.esgst.rightMainPageHeadingButtons;
      }
    }
    if (details.element) {
      context.appendChild(details.element);
      return context.lastElementChild;
    }
    const children = [];
    if (details.isSwitch) {
      children.push({
        type: 'span'
      });
    }
    for (const icon of details.icons) {
      children.push({
        attributes: {
          class: `fa ${icon}`
        },
        type: 'i'
      });
    }
    const attributes = {
      class: 'esgst-heading-button',
      ['data-draggable-id']: id,
      id: `esgst-${details.id}`,
      title: this.getFeatureTooltip(details.featureId || details.id, details.title)
    };
    if (details.link) {
      attributes.href = details.link;
      attributes.target = '_blank';
    }
    return this.createElements(context, 'beforeend', [{
      attributes,
      type: details.link ? 'a' : 'div',
      children
    }]);
  }
  async checkNewVersion() {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.isFirstRun) {
      // noinspection JSIgnoredPromiseFromCall
      this.setSetting('dismissedOptions', this.esgst.toDismiss);
      const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
        addScrollable: true,
        icon: 'fa-smile-o',
        isTemp: true,
        title: _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("i", {
          className: "fa fa-circle-o-notch fa-spin"
        }), " Hi! ESGST is retrieving your avatar, username and Steam ID. This will not take long...")
      });
      popup.open();
      await this.checkSync(true);
      popup.close();
      _class_SettingsWizard__WEBPACK_IMPORTED_MODULE_27__["SettingsWizard"].run();
      _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.isFirstRun = false;
    } else if (_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.isUpdate && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('showChangelog')) {
      const hasPermission = await _class_Permissions__WEBPACK_IMPORTED_MODULE_21__["permissions"].contains([['github']]);
      if (!hasPermission) {
        new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
          addScrollable: true,
          icon: 'fa-check',
          isTemp: true,
          title: _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("fragment", null, "ESGST has updated from v", _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.previousVersion, " to v", _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.currentVersion, "! Please go to", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("a", {
            href: "https://github.com/SquishedPotatoe/esgst/-/releases"
          }, "https://github.com/SquishedPotatoe/esgst/-/releases"), ' ', "to view the changelog. If you want the changelog to be automatically retrieved from GitHub and shown in this popup when updating, then go to the settings menu and grant permission to \"github.com\"")
        }).open();
        _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.isUpdate = false;
        return;
      }
      const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
        addScrollable: true,
        icon: 'fa-circle-o-notch fa-spin',
        isTemp: true,
        title: `ESGST has updated from v${_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.previousVersion} to v${_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.currentVersion}! Please wait while the changelog is retrieved from GitHub.`
      });
      popup.open();
      try {
        let changelog = '';
        const refsResponse = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get('https://api.github.com/repos/SquishedPotatoe/esgst/git/matching-refs/tags');
        if (!refsResponse || !refsResponse.json) {
          return;
        }
        const refs = refsResponse.json;
        refs.reverse();
        let currentIndex = refs.findIndex(ref => ref.ref === `refs/tags/v${_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.currentVersion}`);
        const previousIndex = refs.findIndex(ref => ref.ref === `refs/tags/v${_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.previousVersion}`);
        if (currentIndex > -1 && previousIndex > -1) {
          while (currentIndex < previousIndex) {
            const version = refs[currentIndex].ref.split('/tags/')[1];
            const releaseResponse = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get(`https://api.github.com/repos/SquishedPotatoe/esgst/releases/tags/${version}`);
            if (releaseResponse && releaseResponse.json) {
              changelog = `${changelog}## ${version}\n\n${releaseResponse.json.body.replace(/#(\d+)/g, '[$1](https://github.com/SquishedPotatoe/esgst/issues/$1)')}\n\n`;
            }
            currentIndex += 1;
          }
        }
        popup.setIcon('fa-star');
        popup.setTitle(`ESGST has updated from v${_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.previousVersion} to v${_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.currentVersion}! Here's the changelog:`);
        popup.getScrollable(_class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
          className: "markdown"
        }, await this.parseMarkdown(popup.scrollable, changelog)));
      } catch (e) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_19__["Logger"].warning(e.message);
        popup.setIcon('fa-times');
        popup.setTitle(_class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("fragment", null, "ESGST has updated from v", _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.previousVersion, " to v", _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.currentVersion, "! An error occurred when retrieving the changelog from GitHub, please go to", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("a", {
          href: "https://github.com/SquishedPotatoe/esgst/releases"
        }, "https://github.com/SquishedPotatoe/esgst/releases"), ' ', "to view it."));
      }
      _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.isUpdate = false;
    }
  }
  async parseMarkdown(context, string) {
    const obj = {
      context,
      comment: string
    };
    await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_15__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_36__["Events"].BEFORE_COMMENT_SUBMIT, obj);
    string = obj.comment;
    return Array.from(_class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].parse(this.esgst.markdownParser.text(string)).body.children);
  }
  async addGiveawayToStorage() {
    let giveaway, ggiveaways, i, key, n, popup, ugd, user;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addScrollable: true,
      icon: 'fa-circle-o-notch fa-spin',
      isTemp: true,
      title: 'Please wait... ESGST is adding this giveaway to the storage...'
    });
    popup.open();
    const giveawaysres = await this.esgst.modules.giveaways.giveaways_get(document, true, _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.locationHref);
    if (giveawaysres.length) {
      giveaway = giveawaysres[0];
      ggiveaways = {};
      ggiveaways[giveaway.code] = giveaway;
      user = {
        steamId: _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('steamId'),
        username: _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('username'),
        values: {}
      };
      const savedUser = await this.getUser(null, user);
      let giveaways = null;
      if (savedUser) {
        giveaways = savedUser.giveaways;
      }
      if (!giveaways) {
        giveaways = {
          sent: {
            apps: {},
            subs: {}
          },
          won: {
            apps: {},
            subs: {}
          },
          sentTimestamp: 0,
          wonTimestamp: 0
        };
        if (savedUser) {
          ugd = savedUser.ugd;
          if (ugd) {
            if (ugd.sent) {
              for (key in ugd.sent.apps) {
                if (ugd.sent.apps.hasOwnProperty(key)) {
                  giveaways.sent.apps[key] = [];
                  for (i = 0, n = ugd.sent.apps[key].length; i < n; ++i) {
                    ggiveaways[ugd.sent.apps[key][i].code] = ugd.sent.apps[key][i];
                    giveaways.sent.apps[key].push(ugd.sent.apps[key][i].code);
                  }
                }
              }
              for (key in ugd.sent.subs) {
                if (ugd.sent.subs.hasOwnProperty(key)) {
                  giveaways.sent.subs[key] = [];
                  for (i = 0, n = ugd.sent.subs[key].length; i < n; ++i) {
                    ggiveaways[ugd.sent.subs[key][i].code] = ugd.sent.subs[key][i];
                    giveaways.sent.subs[key].push(ugd.sent.subs[key][i].code);
                  }
                }
              }
              giveaways.sentTimestamp = ugd.sentTimestamp;
            }
            if (ugd.won) {
              for (key in ugd.won.apps) {
                if (ugd.won.apps.hasOwnProperty(key)) {
                  giveaways.won.apps[key] = [];
                  for (i = 0, n = ugd.won.apps[key].length; i < n; ++i) {
                    ggiveaways[ugd.won.apps[key][i].code] = ugd.won.apps[key][i];
                    giveaways.won.apps[key].push(ugd.won.apps[key][i].code);
                  }
                }
              }
              for (key in ugd.won.subs) {
                if (ugd.won.subs.hasOwnProperty(key)) {
                  giveaways.won.subs[key] = [];
                  for (i = 0, n = ugd.won.subs[key].length; i < n; ++i) {
                    ggiveaways[ugd.won.subs[key][i].code] = ugd.won.subs[key][i];
                    giveaways.won.subs[key].push(ugd.won.subs[key][i].code);
                  }
                }
              }
              giveaways.wonTimestamp = ugd.wonTimestamp;
            }
          }
        }
      }
      if (!giveaways.sent[giveaway.gameType][giveaway.gameSteamId]) {
        giveaways.sent[giveaway.gameType][giveaway.gameSteamId] = [];
      }
      if (giveaways.sent[giveaway.gameType][giveaway.gameSteamId].indexOf(giveaway.code) < 0) {
        giveaways.sent[giveaway.gameType][giveaway.gameSteamId].push(giveaway.code);
      }
      user.values = {
        giveaways: giveaways
      };
      await this.lockAndSaveGiveaways(ggiveaways);
      await this.saveUser(null, null, user);
      popup.close();
    }
  }
  reorderButtons(obj) {
    const items = [{
      context: obj.leftButtons,
      id: 'leftButtonIds'
    }, {
      context: obj.rightButtons,
      id: 'rightButtonIds'
    }, {
      context: obj.leftMainPageHeadingButtons,
      id: 'leftMainPageHeadingIds'
    }, {
      context: obj.rightMainPageHeadingButtons,
      id: 'rightMainPageHeadingIds'
    }];
    for (const item of items) {
      if (!item.context) {
        continue;
      }
      for (const id of _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get(item.id)) {
        const elements = (obj.mainPageHeading || obj.outerWrap).querySelectorAll(`[data-draggable-id="${id}"]`);
        for (const element of elements) {
          item.context.appendChild(element);
        }
      }
    }
  }
  async lockAndSaveSettings(settingsObj) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('settings');
    await lock.lock();
    const settings = JSON.parse(this.getValue('settings', '{}'));
    for (const key in settingsObj) {
      if (settingsObj[key] === null) {
        if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].isSet(settings[key])) {
          delete settings[key];
        }
      } else {
        settings[key] = settingsObj[key];
      }
    }
    await this.setValue('settings', JSON.stringify(settings));
    await lock.unlock();
  }
  async setSetting() {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('settings');
    await lock.lock();
    const settings = JSON.parse(this.getValue('settings', '{}'));
    const values = Array.isArray(arguments[0]) ? arguments[0] : [{
      id: arguments[0],
      value: arguments[1],
      sg: arguments[2],
      st: arguments[3]
    }];
    for (const value of values) {
      if (value.sg) {
        value.id = `${value.id}_sg`;
      } else if (value.st) {
        value.id = `${value.id}_st`;
      }
      _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].set(value.id, value.value);
      settings[value.id] = value.value;
    }
    await this.setValue('settings', JSON.stringify(settings));
    await lock.unlock();
  }
  dismissFeature(feature, id) {
    this.esgst.toDismiss.push(id);
    if (id.match(/^(chfl|sk_)/)) {
      this.esgst.toDismiss.push(feature.inputItems);
    }
    if (id.match(/^hr_.+_s$/)) {
      this.esgst.toDismiss.push(`${id}_sound`);
    }
    if (Array.isArray(feature.inputItems)) {
      for (const item of feature.inputItems) {
        this.esgst.toDismiss.push(item.id);
      }
    }
    if (feature.features) {
      for (const subId in feature.features) {
        if (feature.features.hasOwnProperty(subId)) {
          this.dismissFeature(feature.features[subId], subId);
        }
      }
    }
  }
  toggleHeaderMenu(event) {
    event.stopPropagation();
    for (const id in _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].header.buttonContainers) {
      const buttonContainer = _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].header.buttonContainers[id];
      if (buttonContainer.data.id === 'esgst') {
        buttonContainer.nodes.relativeDropdown.classList.toggle(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_35__["ClassNames"][_class_Session__WEBPACK_IMPORTED_MODULE_25__["Session"].namespace].hidden);
        buttonContainer.nodes.arrow.classList.toggle(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_35__["ClassNames"][_class_Session__WEBPACK_IMPORTED_MODULE_25__["Session"].namespace].selected);
      } else if (buttonContainer.data.isDropdown) {
        buttonContainer.nodes.relativeDropdown.classList.add(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_35__["ClassNames"][_class_Session__WEBPACK_IMPORTED_MODULE_25__["Session"].namespace].hidden);
        buttonContainer.nodes.arrow.classList.remove(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_35__["ClassNames"][_class_Session__WEBPACK_IMPORTED_MODULE_25__["Session"].namespace].selected);
      }
    }
  }
  getFeatureTooltip(id, title = '') {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('showFeatureNumber')) {
      if (title) {
        return `${title}\n\nThis element was added by ESGST${id ? ` (${this.getFeatureNumber(id).number})` : ''}`;
      }
      return `This element was added by ESGST${id ? ` (${this.getFeatureNumber(id).number})` : ''}`;
    }
    return title;
  }
  getFeatureName(fullMatch, match) {
    let feature = this.getFeatureNumber(match);
    return `${feature.number} ${feature.name}`;
  }
  getFeatureNumber(queryId) {
    let n = _browser__WEBPACK_IMPORTED_MODULE_13__["browser"].runtime.getURL ? 2 : 1;
    for (let type in this.esgst.features) {
      if (this.esgst.features.hasOwnProperty(type)) {
        let i = 1;
        for (let id in this.esgst.features[type].features) {
          if (this.esgst.features[type].features.hasOwnProperty(id)) {
            let feature = this.esgst.features[type].features[id];
            let result = this.getFeatureNumber_2(feature, id, i, n, queryId);
            if (result) {
              return result;
            }
            if (feature.sg || _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('esgst_st')) {
              i += 1;
            }
          }
        }
        if (type !== 'trades' || _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('esgst_st')) {
          n += 1;
        }
      }
    }
    return {
      name: '',
      number: ''
    };
  }
  getFeatureNumber_2(feature, id, i, n, queryId) {
    if (id === queryId) {
      return {
        name: feature.name,
        number: `${n}.${i}`
      };
    }
    if (feature.features) {
      let j = 1;
      for (let id in feature.features) {
        if (feature.features.hasOwnProperty(id)) {
          let subFeature = feature.features[id];
          let result = this.getFeatureNumber_2(subFeature, id, j, `${n}.${i}`, queryId);
          if (result) {
            return result;
          }
          if (subFeature.sg || _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('esgst_st')) {
            j += 1;
          }
        }
      }
    }
    return null;
  }
  async getUser(savedUsers, user) {
    let savedUser = null;
    if (!savedUsers) {
      savedUsers = JSON.parse(this.getValue('users'));
    }
    if (user.steamId) {
      savedUser = savedUsers.users[user.steamId];
      if (savedUser) {
        if (!user.id) {
          user.id = savedUser.id;
        }
        if (!user.username) {
          user.username = savedUser.username;
        }
      }
    } else if (user.username) {
      let steamId = savedUsers.steamIds[user.username];
      if (steamId) {
        user.steamId = steamId;
        savedUser = savedUsers.users[steamId];
      }
    }
    return savedUser;
  }
  async saveUser(list, savedUsers, user) {
    if (!savedUsers) {
      savedUsers = JSON.parse(this.getValue('users'));
    }
    let savedUser = await this.getUser(savedUsers, user);
    if (savedUser) {
      if (list) {
        if (!user.steamId) {
          user.steamId = savedUsers.steamIds[user.username];
        }
        list.existing.push(user);
      } else {
        const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('user', {
          threshold: 300
        });
        await lock.lock();
        this.checkUsernameChange(savedUsers, user);
        for (let key in user.values) {
          if (user.values.hasOwnProperty(key)) {
            if (key !== 'tags') {
              if (user.values[key] === null) {
                delete savedUsers.users[user.steamId][key];
              } else {
                savedUsers.users[user.steamId][key] = user.values[key];
              }
            }
          }
        }
        await this.setValue('users', JSON.stringify(savedUsers));
        await lock.unlock();
      }
    } else {
      if (user.steamId && user.username) {
        if (list) {
          list.new.push(user);
        } else {
          await this.addUser(user);
        }
      } else if (user.steamId) {
        await this.getUsername(list, true, user);
      } else {
        await this.getSteamId(list, true, null, user);
      }
    }
  }
  checkUsernameChange(savedUsers, user) {
    let i, n;
    if (typeof savedUsers.users[user.steamId].username !== 'undefined' && savedUsers.users[user.steamId].username !== user.username) {
      delete savedUsers.steamIds[savedUsers.users[user.steamId].username];
      savedUsers.users[user.steamId].username = user.username;
      savedUsers.steamIds[user.username] = user.steamId;
      if (user.values.tags) {
        if (!savedUsers.users[user.steamId].tags) {
          savedUsers.users[user.steamId].tags = [];
        }
        for (i = 0, n = user.values.tags.length; i < n; ++i) {
          if (savedUsers.users[user.steamId].tags.indexOf(user.values.tags[i]) < 0) {
            savedUsers.users[user.steamId].tags.push(user.values.tags[i]);
          }
        }
      }
      return true;
    } else if (typeof user.values.tags !== 'undefined') {
      savedUsers.users[user.steamId].tags = user.values.tags;
    }
    if (!savedUsers.users[user.steamId].tags) {
      delete savedUsers.users[user.steamId].tags;
    }
  }
  async addUser(user) {
    let savedUser, savedUsers;
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('user', {
      threshold: 300
    });
    await lock.lock();
    savedUsers = JSON.parse(this.getValue('users'));
    savedUser = await this.getUser(savedUsers, user);
    if (!savedUser) {
      savedUsers.users[user.steamId] = {};
    }
    if (user.id) {
      savedUsers.users[user.steamId].id = user.id;
    }
    this.checkUsernameChange(savedUsers, user);
    if (user.username) {
      savedUsers.users[user.steamId].username = user.username;
      savedUsers.steamIds[user.username] = user.steamId;
    }
    for (let key in user.values) {
      if (user.values.hasOwnProperty(key)) {
        if (key !== 'tags') {
          if (user.values[key] === null) {
            delete savedUsers.users[user.steamId][key];
          } else {
            savedUsers.users[user.steamId][key] = user.values[key];
          }
        }
      }
    }
    await this.setValue('users', JSON.stringify(savedUsers));
    await lock.unlock();
  }
  async getUsername(list, save, user) {
    let match;
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get(`https://www.steamgifts.com/go/user/${user.steamId}`);
    match = response.url.match(/\/user\/(.+)/);
    if (match) {
      user.username = match[1];
      let input = response.html.querySelector(`[name="child_user_id"]`);
      if (input) {
        user.id = input.value;
      }
    }
    if (save) {
      if (list) {
        list.new.push(user);
      } else {
        await this.addUser(user);
      }
    }
  }
  async getSteamId(list, save, savedUsers, user) {
    let input;
    if (!save) {
      if (!savedUsers) {
        savedUsers = JSON.parse(this.getValue('users'));
      }
      let steamId = savedUsers.steamIds[user.username];
      if (steamId) {
        user.steamId = steamId;
        user.id = savedUsers.users[steamId].id;
        return;
      }
    }
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get(`https://www.steamgifts.com/user/${user.username}?format=json`);
    if (!response.url.includes('/user/') || !response.json.success) {
      return;
    }
    user.steamId = response.json.user.steam_id;
    user.id = response.json.user.id;
    if (save) {
      if (list) {
        list.new.push(user);
      } else {
        await this.addUser(user);
      }
    }
  }

  /**
   * @param users
   * @returns {Promise<void>}
   */
  async saveUsers(users) {
    let list, savedUsers;
    list = {
      existing: [],
      new: []
    };
    savedUsers = JSON.parse(this.getValue('users'));
    for (let i = 0, n = users.length; i < n; i++) {
      await this.saveUser(list, savedUsers, users[i]);
    }
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('user', {
      threshold: 300
    });
    await lock.lock();
    savedUsers = JSON.parse(this.getValue('users'));
    for (let i = 0, n = list.new.length; i < n; ++i) {
      let savedUser, user;
      user = list.new[i];
      savedUser = await this.getUser(savedUsers, user);
      if (!savedUser) {
        savedUsers.users[user.steamId] = {};
      }
      if (user.id) {
        savedUsers.users[user.steamId].id = user.id;
      }
      this.checkUsernameChange(savedUsers, user);
      if (user.username) {
        savedUsers.users[user.steamId].username = user.username;
        savedUsers.steamIds[user.username] = user.steamId;
      }
      for (let key in user.values) {
        if (user.values.hasOwnProperty(key)) {
          if (key !== 'tags') {
            if (user.values[key] === null) {
              delete savedUsers.users[user.steamId][key];
            } else {
              savedUsers.users[user.steamId][key] = user.values[key];
            }
          }
        }
      }
    }
    for (let i = 0, n = list.existing.length; i < n; ++i) {
      let user = list.existing[i];
      this.checkUsernameChange(savedUsers, user);
      for (let key in user.values) {
        if (user.values.hasOwnProperty(key)) {
          if (key !== 'tags') {
            if (user.values[key] === null) {
              delete savedUsers.users[user.steamId][key];
            } else {
              savedUsers.users[user.steamId][key] = user.values[key];
            }
          }
        }
      }
    }
    await this.setValue('users', JSON.stringify(savedUsers));
    await lock.unlock();
  }
  async deleteUserValues(values) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('user', {
      threshold: 300
    });
    await lock.lock();
    const savedUsers = JSON.parse(this.getValue('users'));
    for (let key in savedUsers.users) {
      if (savedUsers.users.hasOwnProperty(key)) {
        for (let i = 0, n = values.length; i < n; ++i) {
          delete savedUsers.users[key][values[i]];
        }
      }
    }
    await this.setValue('users', JSON.stringify(savedUsers));
    await lock.unlock();
  }
  async getUserId(user) {
    if (user.username) {
      await this.getSteamId(null, false, null, user);
    } else {
      await this.getUsername(null, false, user);
    }
  }
  async checkSync(menu) {
    let currentDate = Date.now();
    let isSyncing = _class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__["LocalStorage"].get('isSyncing');
    if (menu) {
      await Object(_Sync__WEBPACK_IMPORTED_MODULE_40__["setSync"])();
    } else if (!isSyncing || currentDate - isSyncing > 1800000) {
      let parameters = '';
      _class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__["LocalStorage"].set('isSyncing', currentDate);
      ['Groups', 'SteamFriends', 'Games', 'FollowedGames', 'WonGames', 'ReducedCvGames', 'NoCvGames', 'HltbTimes', 'DelistedGames', 'Giveaways', 'WonGiveaways'].forEach(key => {
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get(`autoSync${key}`) && currentDate - _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get(`lastSync${key}`) > _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get(`autoSync${key}`) * 86400000) {
          parameters += `${key}=1&`;
        }
      });
      if (parameters) {
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('openAutoSyncNewTab')) {
          _class_Tabs__WEBPACK_IMPORTED_MODULE_29__["Tabs"].open(`${_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.syncUrl}&autoSync=true&${parameters}`);
        } else {
          Object(_Sync__WEBPACK_IMPORTED_MODULE_40__["runSilentSync"])(parameters);
        }
      } else {
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__["LocalStorage"].delete('isSyncing');
      }
    }
  }
  async runSilentBackup() {
    const button = _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].header.addButtonContainer({
      buttonIcon: 'fa fa-sign-out fa-spin',
      buttonName: 'ESGST Backup',
      isActive: true,
      isNotification: true,
      side: 'right'
    });
    button.nodes.buttonIcon.title = 'ESGST is backing up your data... Please do not close this window.';
    this.esgst.parameters = Object.assign(this.esgst.parameters, {
      autoBackup: true
    });
    Object(_Storage__WEBPACK_IMPORTED_MODULE_39__["loadDataManagement"])('export', false, () => {
      button.nodes.outer.classList.remove('nav__button-container--active');
      button.nodes.outer.classList.add('nav__button-container--inactive');
      button.nodes.buttonIcon.className = 'fa fa-check';
      button.nodes.buttonIcon.title = 'ESGST has finished backing up.';
    });
  }
  async getGameNames(context) {
    const elements = context.getElementsByTagName('a');
    for (let i = elements.length - 1; i > -1; --i) {
      const element = elements[i],
        match = element.getAttribute('href').match(/\/(app|sub)\/(.+)/);
      if (!match) continue;
      const id = match[2];
      try {
        const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get(`http://store.steampowered.com/api/${match[1] === 'app' ? 'appdetails?appids' : 'packagedetails?packageids'}=${id}&filters=basic`);
        element.textContent = response.json[id].data.name;
      } catch (e) {
        element.classList.add('esgst-red');
        element.title = 'Unable to retrieve name for this game';
      }
    }
  }
  async lock_and_save_giveaways(giveaways, firstRun) {
    return this.lockAndSaveGiveaways(giveaways, firstRun);
  }
  async lockAndSaveGiveaways(giveaways, firstRun) {
    if (!Object.keys(giveaways).length) return;
    let lock;
    let savedGiveaways;
    if (firstRun) {
      savedGiveaways = this.esgst.giveaways;
    } else {
      lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('giveaway', {
        threshold: 300
      });
      await lock.lock();
      savedGiveaways = JSON.parse(this.getValue('giveaways', '{}'));
    }
    for (let key in giveaways) {
      if (giveaways.hasOwnProperty(key)) {
        if (savedGiveaways[key]) {
          for (let subKey in giveaways[key]) {
            if (giveaways[key].hasOwnProperty(subKey)) {
              if (subKey === null) {
                delete savedGiveaways[key][subKey];
              } else {
                savedGiveaways[key][subKey] = giveaways[key][subKey];
              }
            }
          }
        } else {
          savedGiveaways[key] = giveaways[key];
        }
      }
    }
    if (!firstRun) {
      await this.setValue('giveaways', JSON.stringify(savedGiveaways));
      if (lock) {
        await lock.unlock();
      }
    }
  }
  async lockAndSaveDiscussions(discussions) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('discussion', {
      threshold: 300
    });
    await lock.lock();
    const savedDiscussions = JSON.parse(this.getValue('discussions', '{}'));
    for (let key in discussions) {
      if (discussions.hasOwnProperty(key)) {
        if (savedDiscussions[key]) {
          for (let subKey in discussions[key]) {
            if (discussions[key].hasOwnProperty(subKey)) {
              if (discussions[key][subKey] === null) {
                delete savedDiscussions[key][subKey];
              } else {
                savedDiscussions[key][subKey] = discussions[key][subKey];
              }
            }
          }
        } else {
          savedDiscussions[key] = discussions[key];
        }
        if (!savedDiscussions[key].readComments) {
          savedDiscussions[key].readComments = {};
        }
      }
    }
    await this.setValue('discussions', JSON.stringify(savedDiscussions));
    await lock.unlock();
  }
  async lockAndSaveTickets(items) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('ticket', {
      threshold: 300
    });
    await lock.lock();
    const saved = JSON.parse(this.getValue('tickets', '{}'));
    for (const key in items) {
      if (items.hasOwnProperty(key)) {
        if (saved[key]) {
          for (const subKey in items[key]) {
            if (items[key].hasOwnProperty(subKey)) {
              if (items[key][subKey] === null) {
                delete saved[key][subKey];
              } else {
                saved[key][subKey] = items[key][subKey];
              }
            }
          }
        } else {
          saved[key] = items[key];
        }
        if (!saved[key].readComments) {
          saved[key].readComments = {};
        }
      }
    }
    await this.setValue('tickets', JSON.stringify(saved));
    await lock.unlock();
  }
  async lockAndSaveTrades(items) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('trade', {
      threshold: 300
    });
    await lock.lock();
    const saved = JSON.parse(this.getValue('trades', '{}'));
    for (const key in items) {
      if (items.hasOwnProperty(key)) {
        if (saved[key]) {
          for (const subKey in items[key]) {
            if (items[key].hasOwnProperty(subKey)) {
              if (items[key][subKey] === null) {
                delete saved[key][subKey];
              } else {
                saved[key][subKey] = items[key][subKey];
              }
            }
          }
        } else {
          saved[key] = items[key];
        }
        if (!saved[key].readComments) {
          saved[key].readComments = {};
        }
      }
    }
    await this.setValue('trades', JSON.stringify(saved));
    await lock.unlock();
  }
  async lockAndSaveGroups(groups, sync) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('group', {
      threshold: 300
    });
    await lock.lock();
    let savedGroups = JSON.parse(this.getValue('groups', '[]'));
    if (!Array.isArray(savedGroups)) {
      const newGroups = [];
      for (const key in savedGroups) {
        if (savedGroups.hasOwnProperty(key)) {
          newGroups.push(savedGroups[key]);
        }
      }
      savedGroups = newGroups;
    }
    if (sync) {
      for (const group of savedGroups) {
        if (group) {
          delete group.member;
        }
      }
    }
    for (const code in groups) {
      if (groups.hasOwnProperty(code)) {
        const group = groups[code];
        let savedGroup = savedGroups.filter(item => item.code === code)[0];
        if (savedGroup) {
          for (const key in group) {
            if (group.hasOwnProperty(key)) {
              savedGroup[key] = group[key];
            }
          }
        } else {
          savedGroup = group;
          savedGroups.push(savedGroup);
        }
        if (!savedGroup.avatar || !savedGroup.steamId) {
          const html = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get(`/group/${code}/`)).html;
          savedGroup.avatar = html.getElementsByClassName('global__image-inner-wrap')[0].style.backgroundImage.match(/url\("(.+)"\)/)[1];
          savedGroup.steamId = html.getElementsByClassName('sidebar__shortcut-inner-wrap')[0].firstElementChild.getAttribute('href').match(/\d+/)[0];
        }
      }
    }
    await this.setValue('groups', JSON.stringify(savedGroups));
    await lock.unlock();
  }
  lookForPopups(response) {
    const popup = response.html.querySelector(`.popup--gift-sent, .popup--gift-received`);
    if (!popup) {
      return;
    }
    document.body.appendChild(popup);
    new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addScrollable: true,
      icon: '',
      isTemp: true,
      title: '',
      popup: popup
    }).open();
    if (!this.esgst.st) {
      return;
    }
    const links = popup.querySelectorAll('a');
    for (const link of links) {
      const url = link.getAttribute('href');
      if (!url) {
        continue;
      }
      link.setAttribute('href', url.replace(/^\//, `https://www.steamgifts.com/`));
    }
  }
  async getWonGames(syncer) {
    const savedGames = JSON.parse(this.getValue('games'));
    const to_save = {
      apps: {},
      subs: {}
    };
    for (const id in savedGames.apps) {
      if (savedGames.apps.hasOwnProperty(id)) {
        if (savedGames.apps[id].won) {
          to_save.apps[id] = {
            won: null
          };
        }
      }
    }
    for (const id in savedGames.subs) {
      if (savedGames.subs.hasOwnProperty(id)) {
        if (savedGames.subs[id].won) {
          to_save.subs[id] = {
            won: null
          };
        }
      }
    }
    let lastPage = null,
      nextPage = 1,
      pagination = null;
    do {
      syncer.progressBar.setMessage(`Syncing your won games (page ${nextPage}${lastPage ? ` of ${lastPage}` : ''})...`);
      const responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get(`/giveaways/won/search?page=${nextPage}`)).html;
      const elements = responseHtml.getElementsByClassName('table__row-outer-wrap');
      if (!lastPage) {
        lastPage = this.esgst.modules.generalLastPageLink.lpl_getLastPage(responseHtml);
      }
      for (const element of elements) {
        if (element.querySelector(`.table__gift-feedback-not-received:not(.is-hidden)`)) {
          continue;
        }
        const info = await this.esgst.modules.games.games_getInfo(element);
        if (!info) {
          continue;
        }
        to_save[info.type][info.id] = {
          won: parseInt(element.querySelector(`[data-timestamp]`).getAttribute('data-timestamp')) * 1e3
        };
      }
      nextPage += 1;
      pagination = responseHtml.getElementsByClassName('pagination__navigation')[0];
    } while (!syncer.canceled && pagination && !pagination.lastElementChild.classList.contains('is-selected'));
    await this.lockAndSaveGames(to_save);
  }
  saveAndSortContent(array, key, options) {
    this.sortContent(array, options.value);
    // noinspection JSIgnoredPromiseFromCall
    this.setSetting(key, options.value);
  }
  observeChange(context, id, save = null, key = 'value', event = 'change') {
    context.addEventListener(event, () => {
      let value = context[key];
      _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].set(id, value);
      if (save) {
        if (typeof save === 'object') {
          save[id] = value;
        } else {
          this.setSetting(id, value);
        }
      }
    });
  }
  observeNumChange(context, id, save = null, key = 'value') {
    _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].set(id, parseFloat(_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get(id)));
    context.addEventListener('change', () => {
      let value = parseFloat(context[key]);
      // noinspection JSIgnoredPromiseFromCall
      _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].set(id, value);
      if (save) {
        if (typeof save === 'object') {
          save[id] = value;
        } else {
          this.setSetting(id, value);
        }
      }
    });
  }
  async checkMissingDiscussions(refresh, callback) {
    let rows = document.querySelectorAll('.table > .table__rows');
    let numDiscussions = 0;
    let numDeals = 0;
    let filteredDiscussions = 0;
    let filteredDeals = 0;
    let discussionsIndex = 1;
    let dealsIndex = 0;
    let NumToDisplay = 7;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get(`adtd_sg`).enabled) {
      NumToDisplay = _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('activeDiscussions_displayed');
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('oadd') || _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('rad')) {
      discussionsIndex = 0;
      dealsIndex = 1;
    }
    if (refresh) {
      rows[discussionsIndex].innerHTML = '';
      rows[dealsIndex].innerHTML = '';
    } else {
      let preset = null;
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df') && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_m') && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_enable')) {
        let name = _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_preset');
        if (name) {
          let i;
          for (i = _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_presets').length - 1; i > -1 && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_presets')[i].name !== name; i--) {}
          if (i > -1) {
            preset = _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_presets')[i];
          }
        }
      }
      if (preset) {
        const filters = this.esgst.modules.discussionsDiscussionFilters.getFilters();
        (await this.esgst.modules.discussions.discussions_get(rows[discussionsIndex], true)).forEach(discussion => {
          if (!this.esgst.modules.discussionsDiscussionFilters.filters_filterItem(filters, discussion, preset.rules)) {
            // @ts-ignore
            discussion.outerWrap.remove();
            filteredDiscussions += 1;
          } else {
            numDiscussions += 1;
          }
        });
        (await this.esgst.modules.discussions.discussions_get(rows[dealsIndex], true)).forEach(deal => {
          if (!this.esgst.modules.discussionsDiscussionFilters.filters_filterItem(filters, deal, preset.rules)) {
            // @ts-ignore
            deal.outerWrap.remove();
            filteredDeals += 1;
          } else {
            numDeals += 1;
          }
        });
      } else {
        numDiscussions = (await this.esgst.modules.discussions.discussions_get(rows[discussionsIndex], true)).length;
        numDeals = (await this.esgst.modules.discussions.discussions_get(rows[dealsIndex], true)).length;
      }
    }
    if (numDiscussions < NumToDisplay || numDeals < NumToDisplay) {
      let [response1, response2] = await Promise.all([_class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get('/discussions'), _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get('/discussions/deals')]);
      let revisedElements = [];
      let preset = null;
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df') && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_m') && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_enable')) {
        let name = _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_preset');
        if (name) {
          let i;
          for (i = _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_presets').length - 1; i > -1 && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_presets')[i].name !== name; i--) {}
          if (i > -1) {
            preset = _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_presets')[i];
          }
        }
      }
      (await this.esgst.modules.discussions.discussions_get(response1.html, true)).forEach(element => {
        // @ts-ignore
        if (element.category !== 'Deals') {
          revisedElements.push(element);
        }
      });
      const filters = this.esgst.modules.discussionsDiscussionFilters.getFilters();
      let i = revisedElements.length - (numDiscussions + filteredDiscussions + 1);
      while (numDiscussions < NumToDisplay && i > -1) {
        if (!preset || this.esgst.modules.discussionsDiscussionFilters.filters_filterItem(filters, revisedElements[i], preset.rules)) {
          this.setMissingDiscussion(revisedElements[i]);
          rows[discussionsIndex].appendChild(revisedElements[i].outerWrap);
          numDiscussions += 1;
        }
        i -= 1;
      }
      let elements = await this.esgst.modules.discussions.discussions_get(response2.html, true);
      i = elements.length - (numDeals + filteredDeals + 1);
      while (numDeals < NumToDisplay && i > -1) {
        if (!preset || this.esgst.modules.discussionsDiscussionFilters.filters_filterItem(filters, elements[i], preset.rules)) {
          this.setMissingDiscussion(elements[i]);
          // @ts-ignore
          rows[dealsIndex].appendChild(elements[i].outerWrap);
          numDeals += 1;
        }
        i -= 1;
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('adots')) {
        this.esgst.modules.discussionsActiveDiscussionsOnTopSidebar.adots_load(refresh);
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('radb') && !refresh) {
        this.esgst.modules.discussionsRefreshActiveDiscussionsButton.radb_addButtons();
      }
      if (refresh) {
        await this.endless_load(this.esgst.activeDiscussions);
      }
      if (callback) {
        callback();
      }
    } else {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('adots')) {
        this.esgst.modules.discussionsActiveDiscussionsOnTopSidebar.adots_load();
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('radb') && !refresh) {
        this.esgst.modules.discussionsRefreshActiveDiscussionsButton.radb_addButtons();
      }
      if (callback) {
        callback();
      }
    }
  }
  loadDM() {
    const options = {
      items: [{
        check: true,
        name: 'View recent username changes',
        callback: this.setSMRecentUsernameChanges.bind(this)
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('uf'),
        name: 'See list of filtered users',
        callback: this.setSMManageFilteredUsers.bind(this)
      }, {
        check: this.esgst.sg && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('gf') && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('gf_s'),
        name: 'Manage hidden giveaways',
        callback: this.setSMManageFilteredGiveaways.bind(this)
      }, {
        click: true,
        check: this.esgst.sg && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df') && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('df_s'),
        name: 'Manage hidden discussions',
        callback: this.esgst.modules.discussionsDiscussionFilters.df_menu.bind(this.esgst.modules.discussionsDiscussionFilters, {})
      }, {
        click: true,
        check: this.esgst.st && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('tf') && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('tf_s'),
        name: 'Manage hidden trades',
        callback: this.esgst.modules.tradesTradeFilters.tf_menu.bind(this.esgst.modules.tradesTradeFilters, {})
      }, {
        check: this.esgst.sg && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('dt'),
        name: 'Manage discussion tags',
        callback: this.openManageDiscussionTagsPopup.bind(this)
      }, {
        check: this.esgst.sg && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('ut'),
        name: 'Manage user tags',
        callback: this.openManageUserTagsPopup.bind(this)
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('gt'),
        name: 'Manage game tags',
        callback: this.openManageGameTagsPopup.bind(this)
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('gpt'),
        name: 'Manage group tags',
        callback: this.openManageGroupTagsPopup.bind(this)
      }, {
        click: true,
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('wbc'),
        name: 'Manage Whitelist / Blacklist Checker caches',
        callback: this.esgst.modules.usersWhitelistBlacklistChecker.wbc_addButton.bind(this.esgst.modules.usersWhitelistBlacklistChecker, false)
      }, {
        click: true,
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('namwc'),
        name: 'Manage Not Activated / Multiple Wins Checker caches',
        callback: this.esgst.modules.usersNotActivatedMultipleWinChecker.namwc_setPopup.bind(this.esgst.modules.usersNotActivatedMultipleWinChecker)
      }]
    };
    const context = this.esgst.sidebar.nextElementSibling;
    context.setAttribute('data-esgst-popup', true);
    context.innerHTML = '';
    this.esgst.mainPageHeading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_34__["PageHeading"].create('sm', [{
      name: 'ESGST',
      url: this.esgst.settingsUrl
    }, {
      name: 'Data Management',
      url: this.esgst.dataManagementUrl
    }]).insert(context, 'beforeend').nodes.outer;
    for (const item of options.items) {
      const button = _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create([{
        color: 'green',
        icons: [],
        name: 'Open',
        onClick: item.click ? null : () => item.callback(button)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Opening...'
      }]).build().nodes.outer;
      if (item.click) {
        item.callback(button);
      }
      item.content = [button];
    }
    this.createFormRows(context, 'beforeend', options);
  }
  async setSMManageFilteredGiveaways() {
    let gfGiveaways, giveaway, hidden, i, key, n, popup;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addScrollable: true,
      icon: 'fa-gift',
      isTemp: true,
      title: 'Hidden Giveaways'
    });
    hidden = [];
    const now = Date.now();
    for (key in this.esgst.giveaways) {
      if (this.esgst.giveaways.hasOwnProperty(key)) {
        giveaway = this.esgst.giveaways[key];
        if (giveaway.hidden && giveaway.code && giveaway.endTime) {
          if (now >= giveaway.endTime) {
            delete giveaway.hidden;
          } else {
            hidden.push(giveaway);
          }
        } else {
          delete giveaway.hidden;
        }
      }
    }
    hidden = hidden.sort((a, b) => {
      if (a.hidden > b.hidden) {
        return -1;
      } else if (a.hidden < b.hidden) {
        return 1;
      } else {
        return 0;
      }
    });
    // noinspection JSIgnoredPromiseFromCall
    this.setValue('giveaways', JSON.stringify(this.esgst.giveaways));
    i = 0;
    n = hidden.length;
    gfGiveaways = this.createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-text-left'
      },
      type: 'div'
    }]);
    if (n > 0) {
      const button = _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create([{
        color: 'green',
        icons: ['fa-plus'],
        name: 'Load more...',
        onClick: () => {
          return new Promise(resolve => {
            // noinspection JSIgnoredPromiseFromCall
            this.loadGfGiveaways(i, i + 5, hidden, gfGiveaways, popup, value => {
              i = value;
              if (i > n) {
                button.destroy();
              } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('es_gf') && popup.scrollable.scrollHeight <= popup.scrollable.offsetHeight) {
                button.onClick();
              }
              resolve();
            });
          });
        }
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Loading more...'
      }]).insert(popup.description, 'beforeend');
      popup.open();
      button.onClick();
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('es_gf')) {
        popup.scrollable.addEventListener('scroll', () => {
          if (popup.scrollable.scrollTop + popup.scrollable.offsetHeight >= popup.scrollable.scrollHeight && !button.isBusy) {
            button.onClick();
          }
        });
      }
    } else {
      gfGiveaways.textContent = 'No hidden giveaways found.';
      popup.open();
    }
  }
  async loadGfGiveaways(i, n, hidden, gfGiveaways, popup, callback) {
    let giveaway;
    if (i < n) {
      if (hidden[i]) {
        let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get(`https://www.steamgifts.com/giveaway/${hidden[i].code}/`, {
          queue: true
        });
        giveaway = await this.buildGiveaway(response.html, response.url);
        if (giveaway) {
          this.createElements(gfGiveaways, 'beforeend', giveaway.html);
          await this.endless_load(gfGiveaways.lastElementChild, false, 'gf');
          window.setTimeout(() => this.loadGfGiveaways(++i, n, hidden, gfGiveaways, popup, callback), 0);
        } else {
          window.setTimeout(() => this.loadGfGiveaways(++i, n, hidden, gfGiveaways, popup, callback), 0);
        }
      } else {
        callback(i + 1);
      }
    } else {
      callback(i);
    }
  }
  async openManageDiscussionTagsPopup() {
    let context, input, popup, savedDiscussion, savedDiscussions, discussions;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addScrollable: true,
      isTemp: true
    });
    const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_34__["PageHeading"].create('dt', ['Manage discussion tags']).insert(popup.description, 'afterbegin');
    input = this.createElements(popup.description, 'beforeend', [{
      attributes: {
        type: 'text'
      },
      type: 'input'
    }]);
    this.createElements(popup.description, 'beforeend', [{
      attributes: {
        class: 'esgst-description'
      },
      text: 'Type tags below to filter the discussions by.',
      type: 'div'
    }]);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('mm')) {
      this.esgst.modules.generalMultiManager.mm(heading.nodes.outer);
    }
    savedDiscussions = JSON.parse(this.getValue('discussions'));
    discussions = {};
    for (const key in savedDiscussions) {
      if (savedDiscussions.hasOwnProperty(key)) {
        savedDiscussion = savedDiscussions[key];
        if (savedDiscussion.tags && (savedDiscussion.tags.length > 1 || savedDiscussion.tags[0] && savedDiscussion.tags[0].trim())) {
          context = this.createElements(popup.scrollable, 'beforeend', [{
            type: 'div',
            children: [{
              attributes: {
                class: 'esgst-dt-menu',
                href: `https://www.steamgifts.com/discussion/${key}/`
              },
              text: savedDiscussion.name || key,
              type: 'a'
            }]
          }]);
          discussions[key] = {
            context: context
          };
        }
      }
    }
    await this.endless_load(popup.scrollable);
    input.addEventListener('input', this.filterDiscussionTags.bind(this, discussions));
    popup.open();
  }
  filterDiscussionTags(discussions, event) {
    let i, tags, key, userTags;
    if (event.currentTarget.value) {
      tags = event.currentTarget.value.replace(/,\s+/g, '').split(/,\s/);
      for (key in discussions) {
        if (discussions.hasOwnProperty(key)) {
          userTags = discussions[key].context.getElementsByClassName('esgst-tags')[0];
          for (i = tags.length - 1; i >= 0 && !userTags.innerHTML.match(new RegExp(`>${tags[i]}<`)); --i) {}
          if (i < 0) {
            discussions[key].context.classList.add('esgst-hidden');
          } else {
            discussions[key].context.classList.remove('esgst-hidden');
          }
        }
      }
    } else {
      for (key in discussions) {
        if (discussions.hasOwnProperty(key)) {
          discussions[key].context.classList.remove('esgst-hidden');
        }
      }
    }
  }
  async openManageUserTagsPopup() {
    let context, input, popup, savedUser, savedUsers, users;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addScrollable: true,
      isTemp: true
    });
    const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_34__["PageHeading"].create('ut', ['Manage user tags']).insert(popup.description, 'afterbegin');
    input = this.createElements(popup.description, 'beforeend', [{
      attributes: {
        type: 'text'
      },
      type: 'input'
    }]);
    this.createElements(popup.description, 'beforeend', [{
      attributes: {
        class: 'esgst-description'
      },
      text: 'Type tags below to filter the users by.',
      type: 'div'
    }]);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('mm')) {
      this.esgst.modules.generalMultiManager.mm(heading.nodes.outer);
    }
    savedUsers = JSON.parse(this.getValue('users'));
    users = {};
    for (const steamId in savedUsers.users) {
      if (savedUsers.users.hasOwnProperty(steamId)) {
        savedUser = savedUsers.users[steamId];
        if (savedUser.tags && (savedUser.tags.length > 1 || savedUser.tags[0] && savedUser.tags[0].trim())) {
          const attributes = {};
          if (savedUser.username) {
            attributes['data-sg'] = true;
            attributes.href = `https://www.steamgifts.com/user/${savedUser.username}`;
          } else {
            attributes['data-st'] = true;
            attributes.href = `https://www.steamtrades.com/user/${steamId}`;
          }
          context = this.createElements(popup.scrollable, 'beforeend', [{
            type: 'div',
            children: [{
              attributes,
              text: savedUser.username || steamId,
              type: 'a'
            }]
          }]);
          users[savedUser.username || steamId] = {
            context: context
          };
        }
      }
    }
    await this.endless_load(popup.scrollable);
    input.addEventListener('input', this.filterUserTags.bind(this, users));
    popup.open();
  }
  filterUserTags(users, event) {
    let i, tags, username, userTags;
    if (event.currentTarget.value) {
      tags = event.currentTarget.value.replace(/,\s+/g, '').split(/,\s/);
      for (username in users) {
        if (users.hasOwnProperty(username)) {
          userTags = users[username].context.getElementsByClassName('esgst-tags')[0];
          for (i = tags.length - 1; i >= 0 && !userTags.innerHTML.match(new RegExp(`>${tags[i]}<`)); --i) {}
          if (i < 0) {
            users[username].context.classList.add('esgst-hidden');
          } else {
            users[username].context.classList.remove('esgst-hidden');
          }
        }
      }
    } else {
      for (username in users) {
        if (users.hasOwnProperty(username)) {
          users[username].context.classList.remove('esgst-hidden');
        }
      }
    }
  }
  async openManageGameTagsPopup() {
    let context, games, input, popup, savedGame, savedGames;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addScrollable: true,
      isTemp: true
    });
    const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_34__["PageHeading"].create('gt', ['Manage game tags']).insert(popup.description, 'afterbegin');
    input = this.createElements(popup.description, 'beforeend', [{
      attributes: {
        type: 'text'
      },
      type: 'input'
    }]);
    this.createElements(popup.description, 'beforeend', [{
      attributes: {
        class: 'esgst-description'
      },
      text: 'Type tags below to filter the games by.',
      type: 'div'
    }]);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('mm')) {
      this.esgst.modules.generalMultiManager.mm(heading.nodes.outer);
    }
    savedGames = JSON.parse(this.getValue('games'));
    games = {
      apps: {},
      subs: {}
    };
    for (const id in savedGames.apps) {
      if (savedGames.apps.hasOwnProperty(id)) {
        savedGame = savedGames.apps[id];
        if (savedGame.tags && (savedGame.tags.length > 1 || savedGame.tags[0].trim())) {
          context = this.createElements(popup.scrollable, 'beforeend', [{
            attributes: {
              class: 'table__row-outer-wrap'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'table__column__heading',
                href: `http://store.steampowered.com/app/${id}`
              },
              text: `App - ${id}`,
              type: 'a'
            }]
          }]);
          games.apps[id] = {
            context: context
          };
        }
      }
    }
    for (const id in savedGames.subs) {
      if (savedGames.subs.hasOwnProperty(id)) {
        savedGame = savedGames.subs[id];
        if (savedGame.tags && (savedGame.tags.length > 1 || savedGame.tags[0].trim())) {
          context = this.createElements(popup.scrollable, 'beforeend', [{
            attributes: {
              class: 'table__row-outer-wrap'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'table__column__heading',
                href: `http://store.steampowered.com/sub/${id}`
              },
              text: `Sub - ${id}`,
              type: 'a'
            }]
          }]);
          games.subs[id] = {
            context: context
          };
        }
      }
    }
    await this.endless_load(popup.scrollable);
    input.addEventListener('input', this.filterGameTags.bind(this, games));
    popup.open();
  }
  filterGameTags(games, event) {
    let gameTags, i, id, tags;
    if (event.currentTarget.value) {
      tags = event.currentTarget.value.replace(/,\s+/g, '').split(/,\s/);
      for (id in games.apps) {
        if (games.apps.hasOwnProperty(id)) {
          gameTags = games.apps[id].context.getElementsByClassName('esgst-tags')[0];
          for (i = tags.length - 1; i >= 0 && !gameTags.innerHTML.match(new RegExp(`>${tags[i]}<`)); --i) {}
          if (i < 0) {
            games.apps[id].context.classList.add('esgst-hidden');
          } else {
            games.apps[id].context.classList.remove('esgst-hidden');
          }
        }
      }
      for (id in games.subs) {
        if (games.subs.hasOwnProperty(id)) {
          gameTags = games.subs[id].context.getElementsByClassName('esgst-tags')[0];
          for (i = tags.length - 1; i >= 0 && !gameTags.innerHTML.match(new RegExp(`>${tags[i]}<`)); --i) {}
          if (i < 0) {
            games.subs[id].context.classList.add('esgst-hidden');
          } else {
            games.subs[id].context.classList.remove('esgst-hidden');
          }
        }
      }
    } else {
      for (id in games.apps) {
        if (games.apps.hasOwnProperty(id)) {
          games.apps[id].context.classList.remove('esgst-hidden');
        }
      }
      for (id in games.subs) {
        if (games.subs.hasOwnProperty(id)) {
          games.subs[id].context.classList.remove('esgst-hidden');
        }
      }
    }
  }
  async openManageGroupTagsPopup() {
    let context, input, popup, savedGroups, groups;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addScrollable: true,
      isTemp: true
    });
    const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_34__["PageHeading"].create('gpt', ['Manage group tags']).insert(popup.description, 'afterbegin');
    input = this.createElements(popup.description, 'beforeend', [{
      attributes: {
        type: 'text'
      },
      type: 'input'
    }]);
    this.createElements(popup.description, 'beforeend', [{
      attributes: {
        class: 'esgst-description'
      },
      text: 'Type tags below to filter the groups by.',
      type: 'div'
    }]);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('mm')) {
      this.esgst.modules.generalMultiManager.mm(heading.nodes.outer);
    }
    savedGroups = JSON.parse(this.getValue('groups'));
    groups = {};
    for (const savedGroup of savedGroups) {
      if (!savedGroup || !savedGroup.tags || savedGroup.tags.length < 2 && (!savedGroup.tags[0] || !savedGroup.tags[0].trim())) {
        continue;
      }
      context = this.createElements(popup.scrollable, 'beforeend', [{
        type: 'div',
        children: [{
          attributes: {
            href: `https://www.steamgifts.com/group/${savedGroup.code}/`
          },
          text: savedGroup.name,
          type: 'a'
        }]
      }]);
      groups[savedGroup.code] = {
        context: context
      };
    }
    await this.endless_load(popup.scrollable);
    input.addEventListener('input', this.filterGroupTags.bind(this, groups));
    popup.open();
  }
  filterGroupTags(groups, event) {
    let i, tags, code, groupTags;
    if (event.currentTarget.value) {
      tags = event.currentTarget.value.replace(/,\s+/g, '').split(/,\s/);
      for (code in groups) {
        if (groups.hasOwnProperty(code)) {
          groupTags = groups[code].context.getElementsByClassName('esgst-tags')[0];
          for (i = tags.length - 1; i >= 0 && !groupTags.innerHTML.match(new RegExp(`>${tags[i]}<`)); --i) {}
          if (i < 0) {
            groups[code].context.classList.add('esgst-hidden');
          } else {
            groups[code].context.classList.remove('esgst-hidden');
          }
        }
      }
    } else {
      for (code in groups) {
        if (groups.hasOwnProperty(code)) {
          groups[code].context.classList.remove('esgst-hidden');
        }
      }
    }
  }
  async setSMRecentUsernameChanges() {
    const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addProgress: true,
      addScrollable: true,
      icon: 'fa-comments',
      title: 'Recent Username Changes'
    });
    const hasPermissions = await _class_Permissions__WEBPACK_IMPORTED_MODULE_21__["permissions"].contains([['server']]);
    if (!hasPermissions) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(popup.description, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("i", {
        className: "fa fa-times"
      }), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("span", null, "No permissions granted for https://esgst.rafaelgomes.xyz. Please grant the permissions on the settings menu so that the data can be retrieved from the ESGST API.")));
      popup.open();
      return;
    }
    popup.progressBar.setLoading('Loading recent username changes...').show();
    _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(popup.scrollable, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
      className: "esgst-uh-popup",
      ref: ref => popup.results = ref
    }));
    popup.open();
    try {
      const recentChanges = await this.getRecentChanges();
      popup.progressBar.reset().hide();
      _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(popup.results, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("fragment", null, recentChanges.map(change => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", null, `${change.usernames[1]} changed to `, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("a", {
        href: `/user/${change.usernames[0]}`,
        className: "esgst-bold"
      }, change.usernames[0])))));
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.sg) {
        // noinspection JSIgnoredPromiseFromCall
        this.endless_load(popup.results);
      }
    } catch (err) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_19__["Logger"].warning(err);
      popup.progressBar.setError('Failed to load recent changes. Please try again later.');
    }
  }
  async getRecentChanges() {
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get('https://esgst.rafaelgomes.xyz/api/users/uh?format_array=true&show_recent=true');
    return response.json.result.found;
  }
  updateWhitelistBlacklist(key, profile, event) {
    if (key === 'whitelisted' && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('lastSyncWhitelist') === 0 || key === 'blacklisted' && _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('lastSyncBlacklist') === 0) {
      return;
    }
    let user;
    user = {
      steamId: profile.steamId,
      id: profile.id,
      username: profile.username,
      values: {}
    };
    if (!event || event.currentTarget.classList.contains('is-selected')) {
      user.values[key] = false;
    } else {
      user.values[key] = true;
      user.values[`${key}Date`] = Date.now();
    }
    // noinspection JSIgnoredPromiseFromCall
    this.saveUser(null, null, user);
  }

  /**
   * @param id
   * @param type
   * @param [unhide]
   * @returns {Promise<void>}
   */
  async updateHiddenGames(id, type, unhide) {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('lastSyncHiddenGames') === 0) {
      return;
    }
    const games = {
      apps: {},
      subs: {}
    };
    games[type][id] = {
      hidden: unhide ? null : true
    };
    await this.lockAndSaveGames(games);
  }
  checkBackup() {
    console.log('Checking backup...');
    let currentDate = Date.now();
    let isBackingUp = parseInt(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__["LocalStorage"].get('isBackingUp'));
    console.log(currentDate, isBackingUp);
    if ((!isBackingUp || currentDate - isBackingUp > 1800000) && currentDate - _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('lastBackup') > _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('autoBackup_days') * 86400000) {
      _class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__["LocalStorage"].set('isBackingUp', currentDate);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('openAutoBackupNewTab')) {
        _class_Tabs__WEBPACK_IMPORTED_MODULE_29__["Tabs"].open(`${_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.backupUrl}&autoBackupIndex=${_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('autoBackup_index')}`);
      } else {
        this.runSilentBackup();
      }
    }
  }
  async downloadZip(data, fileName, zipName) {
    this.downloadFile(null, zipName, await this.getZip(JSON.stringify(data), fileName));
  }
  async getZip(data, fileName, type = 'blob') {
    const zip = new JSZip();
    zip.file(fileName, data);
    return await zip.generateAsync({
      compression: 'DEFLATE',
      compressionOptions: {
        level: 9
      },
      // @ts-ignore
      type: type
    });
  }
  async readZip(data) {
    const zip = new JSZip();

    //** @type {ZipFile} */
    const contents = await zip.loadAsync(data);
    const keys = Object.keys(contents.files),
      output = [];
    for (const key of keys) {
      output.push({
        name: key,
        value: await zip.file(key).async('text')
      });
    }
    return output;
  }
  downloadFile(data, fileName, blob) {
    const url = window.URL.createObjectURL(blob || new Blob([data])),
      file = document.createElement('a');
    file.download = fileName;
    file.href = url;
    document.body.appendChild(file);
    file.click();
    file.remove();
    window.URL.revokeObjectURL(url);
  }
  async lockAndSaveGames(games) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_18__["Lock"]('game', {
      threshold: 300
    });
    await lock.lock();
    let saved = JSON.parse(this.getValue('games'));
    if (games.apps) {
      for (let key in games.apps) {
        if (games.apps.hasOwnProperty(key)) {
          if (saved.apps[key]) {
            for (let subKey in games.apps[key]) {
              if (games.apps[key].hasOwnProperty(subKey)) {
                if (games.apps[key][subKey] === null) {
                  delete saved.apps[key][subKey];
                } else {
                  saved.apps[key][subKey] = games.apps[key][subKey];
                }
              }
            }
          } else {
            saved.apps[key] = games.apps[key];
          }
          if (!saved.apps[key].tags) {
            delete saved.apps[key].tags;
          }
        }
      }
    }
    if (games.subs) {
      for (let key in games.subs) {
        if (games.subs.hasOwnProperty(key)) {
          if (saved.subs[key]) {
            for (let subKey in games.subs[key]) {
              if (games.subs[key].hasOwnProperty(subKey)) {
                if (games.subs[key][subKey] === null) {
                  delete saved.subs[key][subKey];
                } else {
                  saved.subs[key][subKey] = games.subs[key][subKey];
                }
              }
            }
          } else {
            saved.subs[key] = games.subs[key];
          }
          if (!saved.subs[key].tags) {
            delete saved.subs[key].tags;
          }
        }
      }
    }
    await this.setValue('games', JSON.stringify(saved));
    await lock.unlock();
  }
  async setSMManageFilteredUsers() {
    /** @type {Popup} */
    let popup;
    if (popup) {
      popup.open();
    } else {
      popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
        addScrollable: true,
        icon: 'fa-eye-slash',
        title: 'Filtered Users'
      });
      let users = JSON.parse(this.getValue('users'));
      let filtered = [];
      for (let key in users.users) {
        if (users.users.hasOwnProperty(key)) {
          const data = _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.modules.usersUserFilters.fixData(users.users[key].uf);
          if (data && (data.giveawayPosts || data.giveaways || data.discussionPosts || data.discussions)) {
            filtered.push(users.users[key]);
          }
        }
      }
      filtered.sort((a, b) => {
        if (a.username > b.username) {
          return -1;
        } else {
          return 1;
        }
      });
      let table = this.createElements(popup.scrollable, 'beforeend', [{
        attributes: {
          class: 'table'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'table__heading'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'table__column--width-fill'
            },
            text: 'Username',
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: 'Discussions Hidden',
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: 'Discussion Posts Hidden',
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: 'Giveaways Hidden',
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: 'Giveaway Posts Hidden',
            type: 'div'
          }]
        }, {
          attributes: {
            class: 'table__rows'
          },
          type: 'div'
        }]
      }]);
      for (let i = 0, n = filtered.length; i < n; ++i) {
        const discussionsIcon = filtered[i].uf.discussions ? 'fa fa-check' : '';
        const discussionPostsIcon = filtered[i].uf.discussionPosts ? 'fa fa-check' : '';
        const giveawaysIcon = filtered[i].uf.giveaways ? 'fa fa-check' : '';
        const giveawayPostsIcon = filtered[i].uf.giveawayPosts ? 'fa fa-check' : '';
        this.createElements(table.lastElementChild, 'beforeend', [{
          attributes: {
            class: 'table__row-outer-wrap'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'table__row-inner-wrap'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'table__column--width-fill'
              },
              type: 'div',
              children: [{
                attributes: {
                  href: `/user/${filtered[i].username}`
                },
                text: filtered[i].username,
                type: 'a'
              }]
            }, {
              attributes: {
                class: 'table__column--width-small'
              },
              type: 'div',
              children: discussionsIcon ? [{
                attributes: {
                  class: discussionsIcon
                },
                type: 'i'
              }] : null
            }, {
              attributes: {
                class: 'table__column--width-small'
              },
              type: 'div',
              children: discussionPostsIcon ? [{
                attributes: {
                  class: discussionPostsIcon
                },
                type: 'i'
              }] : null
            }, {
              attributes: {
                class: 'table__column--width-small'
              },
              type: 'div',
              children: giveawaysIcon ? [{
                attributes: {
                  class: giveawaysIcon
                },
                type: 'i'
              }] : null
            }, {
              attributes: {
                class: 'table__column--width-small'
              },
              type: 'div',
              children: giveawayPostsIcon ? [{
                attributes: {
                  class: giveawayPostsIcon
                },
                type: 'i'
              }] : null
            }]
          }]
        }]);
      }
      popup.open();
    }
  }

  /**
   * @param {import('../constants/ClassNames').ButtonColor} choice1Color
   * @param {string} choice1Icon
   * @param {string} choice1Title
   * @param {import('../constants/ClassNames').ButtonColor} choice2Color
   * @param {string} choice2Icon
   * @param {string} choice2Title
   * @param {*} title
   * @param {*} onChoice1
   * @param {*} onChoice2
   */
  multiChoice(choice1Color, choice1Icon, choice1Title, choice2Color, choice2Icon, choice2Title, title, onChoice1, onChoice2) {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('cfh_img_remember')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('cfh_img_choice') === 1) {
        onChoice1();
      } else {
        onChoice2();
      }
    } else {
      let popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
        addScrollable: true,
        icon: 'fa-list',
        isTemp: true,
        title: title
      });
      new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_30__["ToggleSwitch"](popup.description, 'cfh_img_remember', false, 'Never ask again.', false, false, 'Remembers which option you choose forever.', _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('cfh_img_remember'));
      _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create({
        color: choice1Color,
        icons: [choice1Icon],
        name: choice1Title,
        onClick: () => {
          return new Promise(resolve => {
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('cfh_img_remember')) {
              // noinspection JSIgnoredPromiseFromCall
              this.setSetting('cfh_img_choice', 1);
            }
            resolve();
            popup.close();
            onChoice1();
          });
        }
      }).insert(popup.description, 'beforeend');
      _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create({
        color: choice2Color,
        icons: [choice2Icon],
        name: choice2Title,
        onClick: () => {
          return new Promise(resolve => {
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('cfh_img_remember')) {
              // noinspection JSIgnoredPromiseFromCall
              this.setSetting('cfh_img_choice', 2);
            }
            resolve();
            popup.close();
            onChoice2();
          });
        }
      }).insert(popup.description, 'beforeend');
      popup.open();
    }
  }
  async exportSettings() {
    //** @type {EsgstSettings} */
    let settings = JSON.parse(this.getValue('settings', '{}'));
    let data = {
      settings,
      v: this.getValue('v')
    };
    delete data.settings.avatar;
    delete data.settings.lastSync;
    delete data.settings.steamApiKey;
    delete data.settings.steamId;
    delete data.settings.syncFrequency;
    delete data.settings.username_sg;
    delete data.settings.username_st;
    const name = `${_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('askFileName') ? window.prompt(`Enter the name of the file:`, `esgst_settings_${new Date().toISOString().replace(/:/g, '_')}`) : `esgst_settings_${new Date().toISOString().replace(/:/g, '_')}`}.json`;
    if (name === 'null.json') return;
    this.downloadFile(JSON.stringify(data), name);
  }
  async selectSwitches(switches, type, settings) {
    const toSave = [];
    for (const key in switches) {
      if (switches.hasOwnProperty(key)) {
        const toggleSwitch = switches[key];
        if (Array.isArray(toggleSwitch)) {
          toSave.push({
            id: toggleSwitch[0].id,
            value: await toggleSwitch[0][type](settings),
            sg: toggleSwitch[0].sg,
            st: toggleSwitch[0].st
          });
        } else if (!toggleSwitch.checkbox || toggleSwitch.checkbox.offsetParent) {
          toSave.push({
            id: toggleSwitch.id,
            value: await toggleSwitch[type](settings),
            sg: toggleSwitch.sg,
            st: toggleSwitch.st
          });
        }
      }
    }
    if (settings) {
      let message;
      _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(settings, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "esgst-description esgst-bold",
        ref: ref => message = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("i", {
        className: "fa fa-circle-o-notch fa-spin",
        title: "Saving..."
      })));
      await this.setSetting(toSave);
      message.classList.add('esgst-green');
      _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(message, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("i", {
        className: "fa fa-check",
        title: "Saved!"
      }));
      window.setTimeout(() => message.remove(), 2500);
    }
  }
  hideGame(button, id, name, steamId, steamType) {
    let elements, i, popup;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addScrollable: true,
      icon: 'fa-eye-slash',
      title: _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("fragment", null, "Would you like to hide all giveaways for ", _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("span", {
        className: "esgst-bold"
      }, name), "?")
    });
    _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create([{
      template: 'success',
      name: 'Yes',
      onClick: async () => {
        await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].post('/ajax.php', {
          data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_25__["Session"].xsrfToken}&do=hide_giveaways_by_game_id&game_id=${id}`
        });
        await this.updateHiddenGames(steamId, steamType);
        elements = document.querySelectorAll(`.giveaway__row-outer-wrap[data-game-id="${id}"]`);
        for (i = elements.length - 1; i > -1; --i) {
          elements[i].remove();
        }
        button.remove();
        popup.close();
      }
    }, {
      color: 'white',
      isDisabled: true,
      icons: ['fa-refresh fa-spin'],
      name: 'Please wait...'
    }]).insert(popup.description, 'beforeend');
    this.createElements(popup.actions.firstElementChild, 'atouter', [{
      attributes: {
        href: '/account/settings/giveaways/filters'
      },
      text: 'View Hidden Games',
      type: 'a'
    }]);
    popup.open();
  }
  unhideGame(button, id, name, steamId, steamType) {
    let popup;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addScrollable: true,
      icon: 'fa-eye-slash',
      isTemp: true,
      title: _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("fragment", null, "Would you like to unhide all giveaways for ", _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("span", {
        className: "esgst-bold"
      }, name), "?")
    });
    _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create([{
      template: 'success',
      name: 'Yes',
      onClick: async () => {
        await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].post('/ajax.php', {
          data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_25__["Session"].xsrfToken}&do=remove_filter&game_id=${id}`
        });
        await this.updateHiddenGames(steamId, steamType, true);
        button.remove();
        popup.close();
      }
    }, {
      color: 'white',
      isDisabled: true,
      icons: ['fa-refresh fa-spin'],
      name: 'Please wait...'
    }]).insert(popup.description, 'beforeend');
    this.createElements(popup.actions.firstElementChild, 'atouter', [{
      attributes: {
        href: '/account/settings/giveaways/filters'
      },
      text: 'View Hidden Games',
      type: 'a'
    }]);
    popup.open();
  }
  draggable_set(obj) {
    if (!obj.history) {
      obj.history = [];
    }
    if (!obj.values) {
      obj.values = {};
    }
    obj.context.setAttribute('data-draggable-key', obj.id);
    for (const element of obj.context.children) {
      if (element.getAttribute('draggable') || !element.getAttribute('data-draggable-id')) {
        continue;
      }
      element.setAttribute('draggable', true);
      element.addEventListener('dragstart', this.draggable_start.bind(this, obj));
      element.addEventListener('dragenter', this.draggable_enter.bind(this, obj));
      element.addEventListener('dragend', this.draggable_end.bind(this, obj));
    }
  }
  async draggable_start(obj, event) {
    event.dataTransfer.setData('text/plain', '');
    this.esgst.draggable.dragged = event.currentTarget;
    this.esgst.draggable.source = this.esgst.draggable.dragged.parentElement;
    this.esgst.draggable.destination = null;
    if (obj.addTrash) {
      this.draggable_setTrash(obj);
      this.draggable_setRestoreButton(obj);
    }
  }
  draggable_enter(obj, event) {
    if (!this.esgst.draggable.dragged) {
      return;
    }
    const element = event.currentTarget;
    if (element === this.esgst.draggable.dragged || element.getAttribute('data-draggable-id') === this.esgst.draggable.dragged.getAttribute('data-draggable-id')) {
      return;
    }
    if (element === obj.context) {
      if (obj.context.children.length < 1) {
        obj.context.appendChild(this.esgst.draggable.dragged);
        this.esgst.draggable.destination = obj.context;
      }
      return;
    }
    if (element.getAttribute('data-draggable-group') !== this.esgst.draggable.dragged.getAttribute('data-draggable-group')) {
      window.alert('Cannot move this element to this group.');
      return;
    }
    let current = this.esgst.draggable.dragged;
    do {
      current = current.previousElementSibling;
      if (current && current === element) {
        element.parentElement.insertBefore(this.esgst.draggable.dragged, element);
        this.esgst.draggable.destination = this.esgst.draggable.dragged.parentElement;
        return;
      }
    } while (current);
    element.parentElement.insertBefore(this.esgst.draggable.dragged, element.nextElementSibling);
    this.esgst.draggable.destination = this.esgst.draggable.dragged.parentElement;
  }
  async draggable_end(obj) {
    if (this.esgst.draggable.awaitingConfirmation) {
      return;
    }
    if (this.esgst.draggable.trash) {
      this.esgst.draggable.trash.remove();
      this.esgst.draggable.trash = null;
    }
    if (this.esgst.draggable.restoreButton && obj.history.length === 0) {
      this.esgst.draggable.restoreButton.hide();
    }
    if (this.esgst.draggable.destination === obj.item.columns || this.esgst.draggable.destination === obj.item.gvIcons) {
      if (this.esgst.draggable.dragged.getAttribute('data-draggable-id').match(/elgb|gp/)) {
        this.esgst.draggable.dragged.classList.add('esgst-giveaway-column-button');
      }
      if (this.esgst.draggable.dragged.getAttribute('data-color')) {
        this.esgst.draggable.dragged.classList.add(this.esgst.giveawayPath ? 'featured__column' : 'giveaway__column');
        this.esgst.draggable.dragged.firstElementChild.style.color = this.esgst.draggable.dragged.getAttribute('data-bgColor');
        this.esgst.draggable.dragged.style.color = '';
        this.esgst.draggable.dragged.style.backgroundColor = '';
      }
    } else {
      if (this.esgst.draggable.dragged.getAttribute('data-draggable-id').match(/elgb|gp/)) {
        this.esgst.draggable.dragged.classList.remove('esgst-giveaway-column-button');
      }
      if (this.esgst.draggable.dragged.getAttribute('data-color')) {
        this.esgst.draggable.dragged.classList.remove(this.esgst.giveawayPath ? 'featured__column' : 'giveaway__column');
        this.esgst.draggable.dragged.style.color = this.esgst.draggable.dragged.getAttribute('data-color');
        this.esgst.draggable.dragged.style.backgroundColor = this.esgst.draggable.dragged.getAttribute('data-bgColor');
      }
    }
    if (this.esgst.draggable.destination === obj.item.heading) {
      if (this.esgst.draggable.dragged.getAttribute('data-draggable-id').match(/steam|search|hideGame/)) {
        this.esgst.draggable.dragged.classList.add('giveaway__icon');
      }
    } else if (this.esgst.draggable.dragged.getAttribute('data-draggable-id').match(/steam|search|hideGame/)) {
      this.esgst.draggable.dragged.classList.remove('giveaway__icon');
    }
    if (this.esgst.draggable.deleted) {
      this.esgst.draggable.dragged.remove();
      obj.history.push({
        dragged: this.esgst.draggable.dragged,
        source: this.esgst.draggable.source,
        destination: this.esgst.draggable.destination
      });
    } else if (this.esgst.draggable.restored) {
      this.esgst.draggable.destination.appendChild(this.esgst.draggable.dragged);
    }
    const sources = [this.esgst.draggable.source];
    if (this.esgst.draggable.source !== this.esgst.draggable.destination) {
      sources.push(this.esgst.draggable.destination);
    }
    for (const element of sources) {
      if (!element) {
        continue;
      }
      const key = `${element.getAttribute('data-draggable-key')}${obj.item.gvIcons ? '_gv' : ''}`;
      obj.values[key] = [];
      for (const child of element.children) {
        const id = child.getAttribute('data-draggable-id');
        if (id) {
          if (child.getAttribute('data-draggable-obj')) {
            obj.values[key].push(JSON.parse(child.getAttribute('data-draggable-obj')));
          } else {
            obj.values[key].push(id);
          }
        }
      }
      if (key === 'emojis') {
        await this.setValue(key, JSON.stringify(obj.values[key]));
      }
      if (key.startsWith('savedReplies')) {
        await this.setValue(key, JSON.stringify(obj.values[key]));
      }
    }
    if (obj.onDragEnd) {
      obj.onDragEnd(obj.values);
    }
    this.esgst.draggable.dragged = null;
    this.esgst.draggable.source = null;
    this.esgst.draggable.destination = null;
    if (this.esgst.draggable.restoreButton && obj.history.length > 0) {
      this.esgst.draggable.restoreButton.show();
    }
  }
  draggable_setTrash(obj) {
    if (this.esgst.draggable.trash) {
      this.esgst.draggable.trash.remove();
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(obj.trashContext || obj.context, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
      className: "esgst-draggable-trash",
      title: "Delete the element",
      ondragenter: this.draggable_delete.bind(this, obj),
      ref: ref => this.esgst.draggable.trash = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("i", {
      className: "fa fa-trash"
    })));
    this.esgst.draggable.trash.style.width = `${(obj.trashContext || obj.context).offsetWidth}px`;
  }
  async draggable_delete(obj) {
    this.esgst.draggable.awaitingConfirmation = true;
    this.esgst.draggable.deleted = false;
    if (!this.esgst.draggable.dragged || !window.confirm('Are you sure you want to delete this item?')) {
      this.esgst.draggable.awaitingConfirmation = false;
      this.esgst.draggable.trash.remove();
      this.esgst.draggable.trash = null;
      return;
    }
    this.esgst.draggable.awaitingConfirmation = false;
    this.esgst.draggable.deleted = true;
    await this.draggable_end(obj);
    this.esgst.draggable.deleted = false;
  }
  draggable_setRestoreButton(obj) {
    if (this.esgst.draggable.restoreButton) {
      this.esgst.draggable.restoreButton.destroy();
    }
    this.esgst.draggable.restoreButton = _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create({
      color: 'white',
      tooltip: 'Restore the latest deleted element (restored elements always appear at the end)',
      icons: ['fa-rotate-left'],
      name: '',
      onClick: this.draggable_restore.bind(this, obj)
    }).insert(obj.trashContext || obj.context, 'afterend').hide();
  }
  async draggable_restore(obj) {
    const itemToRestore = obj.history.pop();
    this.esgst.draggable.dragged = itemToRestore.dragged;
    this.esgst.draggable.source = itemToRestore.source;
    this.esgst.draggable.destination = itemToRestore.source;
    this.esgst.draggable.restored = true;
    await this.draggable_end(obj);
    this.esgst.draggable.restored = false;
  }
  setCountdown(context, totalSeconds, callback, initialDate = Date.now()) {
    const seconds = totalSeconds - Math.floor((Date.now() - initialDate) / 1000);
    const m = Math.floor(seconds / 60);
    const s = seconds % 60;
    context.textContent = `${`0${m}`.slice(-2)}:${`0${s}`.slice(-2)}`;
    if (seconds > -1) {
      window.setTimeout(this.setCountdown.bind(this), 1000, context, totalSeconds, callback, initialDate);
    } else if (callback) {
      callback();
    }
  }
  round(number, decimals = 2) {
    const multiplier = Math.pow(10, decimals);
    return Math.round(number * multiplier) / multiplier;
  }
  getTextNodesIn(elem, opt_fnFilter) {
    let textNodes = [];
    if (elem) {
      for (let nodes = elem.childNodes, i = 0, n = nodes.length; i < n; i++) {
        let node = nodes[i],
          nodeType = node.nodeType;
        if (nodeType === 3) {
          if (!opt_fnFilter || opt_fnFilter(node, elem)) {
            textNodes.push(node);
          }
        } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {
          textNodes = textNodes.concat(this.getTextNodesIn(node, opt_fnFilter));
        }
      }
    }
    return textNodes;
  }
  setClearButton(input) {
    const button = input.nextElementSibling;
    input.addEventListener('input', this.toggleClearButton.bind(this, button, input));
    input.addEventListener('change', this.toggleClearButton.bind(this, button, input));
    input.nextElementSibling.addEventListener('click', this.clearInput.bind(this, input));
  }
  toggleClearButton(button, input) {
    if (input.value) {
      if (button.classList.contains('esgst-hidden')) {
        button.classList.remove('esgst-hidden');
      }
    } else if (!button.classList.contains('esgst-hidden')) {
      button.classList.add('esgst-hidden');
    }
  }
  clearInput(input) {
    input.value = '';
    input.dispatchEvent(new Event('change'));
  }
  fixEmojis(emojis) {
    const matches = emojis.split(/<\/span>/);
    if (matches.length < 2) return emojis;
    matches.pop();
    return JSON.stringify(matches.map(this.fixEmoji));
  }
  fixEmoji(emoji) {
    const match = emoji.match(/title="(.+?)"/);
    emoji = emoji.replace(/<span.+?>/, '');
    if (match) {
      return this.getEmojiHtml(emoji);
    }
    let fixed = '';
    for (let i = 0, n = emoji.length; i < n; i++) {
      fixed += this.getEmojiHtml(emoji[i]);
    }
    return fixed;
  }
  getEmojiHtml(emoji) {
    return `&#x${this.getEmojiUnicode(emoji).toString('16').toUpperCase()}`;
  }
  getEmojiUnicode(emoji) {
    if (emoji.length === 1) {
      return emoji.charCodeAt(0);
    }
    const code = (emoji.charCodeAt(0) - 0xd800) * 0x400 + (emoji.charCodeAt(1) - 0xdc00) + 0x10000;
    if (code < 0) {
      return emoji.charCodeAt(0);
    }
    return code;
  }
  triggerOnEnter(callback, event) {
    if (event.key === 'Enter') {
      event.preventDefault();
      callback();
    }
  }
  getChildByClassName(element, className) {
    let i;
    if (!element) return;
    for (i = element.children.length - 1; i > -1 && !element.children[i].classList.contains(className); i--) {}
    if (i > -1) return element.children[i];
  }
  escapeMarkdown(string) {
    return string.replace(/([[\]()*~!.`\->#|])/g, `\\$1`);
  }
  removeDuplicateNotes(notes) {
    let output = [];
    notes.split(/\n/).forEach(part => {
      if (output.indexOf(part) < 0) {
        output.push(part);
      }
      output.push('\n');
    });
    return output.join('').trim().replace(/\n\n+/g, '\n\n');
  }
  capitalizeFirstLetter(string) {
    return `${string[0].toUpperCase()}${string.slice(1)}`;
  }
  getTimestamp(seconds, is24Clock, isShowSeconds) {
    return Object(date_fns_format__WEBPACK_IMPORTED_MODULE_11__["default"])(seconds, `MMM d, yyyy, ${is24Clock ? 'H' : 'h'}:mm${isShowSeconds ? `:ss` : ''}${is24Clock ? '' : ' a'}`);
  }

  /**
   * @param timestamp
   * @param [until]
   * @returns {string}
   */
  getTimeSince(timestamp, until) {
    let n, s;
    s = Math.floor((until ? timestamp - Date.now() : Date.now() - timestamp) / 1000);
    n = Math.floor(s / 31104000);
    if (n >= 1) {
      return `${n} year${n === 1 ? '' : 's'}`;
    }
    n = Math.floor(s / 2592000);
    if (n >= 1) {
      return `${n} month${n === 1 ? '' : 's'}`;
    }
    n = Math.floor(s / 86400);
    if (n >= 1) {
      return `${n} day${n === 1 ? '' : 's'}`;
    }
    n = Math.floor(s / 3600);
    if (n >= 1) {
      return `${n} hour${n === 1 ? '' : 's'}`;
    }
    n = Math.floor(s / 60);
    if (n >= 1) {
      return `${n} minute${n === 1 ? '' : 's'}`;
    }
    n = Math.floor(s);
    return `${n} second${n === 1 ? '' : 's'}`;
  }
  closeHeaderMenu(arrow, dropdown, menu, event) {
    if (!menu.contains(event.target) && arrow.classList.contains('selected')) {
      arrow.classList.remove('selected');
      dropdown.classList.add('esgst-hidden');
    }
  }
  setSiblingsOpacity(element, Opacity) {
    let Siblings, I, N;
    Siblings = element.parentElement.children;
    for (I = 0, N = Siblings.length; I < N; ++I) {
      if (Siblings[I] !== element) {
        Siblings[I].style.opacity = Opacity;
      }
    }
  }
  timeout(ms) {
    return new Promise(resolve => window.setTimeout(resolve, ms));
  }
  createTooltip(context, message, noMarkdown) {
    let popout;
    popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_22__["Popout"](`esgst-feature-description ${noMarkdown ? '' : 'markdown'}`, context, 100);
    popout.popout.style.maxHeight = '300px';
    popout.popout.style.overflow = 'auto';
    this.createElements(popout.popout, 'atinner', [...Array.from(_class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].parse(message).body.childNodes).map(x => {
      return {
        context: x
      };
    })]);
    return popout;
  }
  createOptions(options) {
    let context, elements, id, switches;
    context = document.createElement('div');
    elements = {};
    switches = {};
    options.forEach(option => {
      if (option.check) {
        id = option.id;
        elements[id] = this.createElements(context, 'beforeend', [{
          type: 'div'
        }]);
        switches[id] = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_30__["ToggleSwitch"](elements[id], id, false, option.description, false, false, option.tooltip, _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get(id));
      }
    });
    options.forEach(option => {
      let enabled = _class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get(option.id);
      if (switches[option.id]) {
        if (option.dependencies) {
          option.dependencies.forEach(dependency => {
            if (elements[dependency]) {
              switches[option.id].dependencies.push(elements[dependency]);
              if (!enabled) {
                elements[dependency].classList.add('esgst-hidden');
              }
            }
          });
        }
        if (option.exclusions) {
          option.exclusions.forEach(exclusion => {
            if (elements[exclusion]) {
              switches[option.id].exclusions.push(elements[exclusion]);
              if (enabled) {
                elements[exclusion].classList.add('esgst-hidden');
              }
            }
          });
        }
      }
    });
    return context;
  }
  createResults(context, element, results) {
    for (const result of results) {
      const key = result.Key;
      element[key] = this.createElements(context, 'beforeend', [{
        attributes: {
          class: 'esgst-hidden'
        },
        type: 'div',
        children: [{
          attributes: {
            class: result.Icon
          },
          type: 'i'
        }, {
          attributes: {
            class: 'esgst-bold'
          },
          type: 'span',
          children: [{
            text: `${result.Description} (`,
            type: 'node'
          }, {
            text: '0',
            type: 'span'
          }, {
            text: `):`,
            type: 'node'
          }]
        }, {
          attributes: {
            class: 'esgst-popup-actions'
          },
          type: 'span'
        }]
      }]);
      element[`${key}Count`] = element[key].firstElementChild.nextElementSibling.firstElementChild;
      element[`${key}Users`] = element[key].lastElementChild;
    }
  }
  goToComment(hash, element, noPermalink) {
    if (!hash) {
      hash = window.location.hash;
    }
    let id = hash.replace(/#/, '');
    if (!id && !element || window.location.pathname.match(/^\/account/) && !this.esgst.parameters.esgst) return;
    if (id && !element) {
      element = document.getElementById(id);
    }
    if (!element) return;
    window.scrollTo(0, element.offsetTop);
    window.scrollBy(0, -this.esgst.commentsTop);
    if (noPermalink) return;
    let permalink = document.querySelector(`.is_permalink, .author_permalink`);
    if (permalink) {
      permalink.remove();
    }
    element = element.querySelector(`.comment__username, .author_avatar`);
    if (!element) return;
    this.createElements(element, this.esgst.sg ? 'beforebegin' : 'afterend', [{
      attributes: {
        class: 'fa fa-share is_permalink author_permalink'
      },
      type: 'i'
    }]);
  }
  sortContent(array, option) {
    let after, before, divider, dividers, i, key, n, name;
    name = option.split(/_/);
    key = name[0];
    if (name[1] === 'asc') {
      before = -1;
      after = 1;
    } else {
      before = 1;
      after = -1;
    }
    array.sort((a, b) => {
      if (typeof a[key] === 'string' && typeof b[key] === 'string') {
        return a[key].toLowerCase().localeCompare(b[key].toLowerCase()) * after;
      } else {
        const aValue = a[key] || 0;
        const bValue = b[key] || 0;
        if (aValue < bValue) {
          return before;
        } else if (aValue > bValue) {
          return after;
        } else {
          return 0;
        }
      }
    });
    let context = null;
    if (array[0].outerWrap) {
      const popup = array[0].outerWrap.closest(`.esgst-popup, [data-esgst-popup]`);
      if (popup) {
        context = popup.getElementsByClassName('esgst-gv-view')[0] || array[0].outerWrap.parentElement.parentElement;
      }
    }
    for (i = 0, n = array.length; i < n; ++i) {
      if (!array[i].outerWrap.parentElement) continue;
      if (context) {
        context.appendChild(array[i].outerWrap.parentElement);
      } else {
        array[i].outerWrap.parentElement.appendChild(array[i].outerWrap);
      }
    }
    for (i = array.length - 1; i > -1; i--) {
      if (array[i].isPinned) {
        array[i].outerWrap.parentElement.insertBefore(array[i].outerWrap, array[i].outerWrap.parentElement.firstElementChild);
      }
    }
    if (key === 'sortIndex') {
      dividers = document.getElementsByClassName('esgst-es-page-divider');
      for (i = dividers.length - 1; i > -1; --i) {
        divider = dividers[i];
        divider.classList.remove('esgst-hidden');
        divider.parentElement.insertBefore(divider, document.getElementsByClassName(`esgst-es-page-${i + 2}`)[0]);
      }
    } else {
      dividers = document.querySelectorAll(`.esgst-es-page-divider:not(.esgst-hidden)`);
      for (i = dividers.length - 1; i > -1; --i) {
        dividers[i].classList.add('esgst-hidden');
      }
    }
  }
  rot(string, n) {
    return string.replace(/[a-zA-Z]/g, char => {
      return String.fromCharCode((char <= 'Z' ? 90 : 122) >= (char = char.charCodeAt(0) + n) ? char : char - 26);
    });
  }
  async buildGiveaway(context, url, errorMessage, blacklist) {
    let ended, avatar, code, column, columns, comments, counts, endTime, endTimeColumn, entered, entries, giveaway, heading, headingName, i, id, icons, image, n, removeEntryButton, started, startTimeColumn, thinHeadings;
    giveaway = context.getElementsByClassName('featured__outer-wrap--giveaway')[0];
    if (giveaway) {
      let match = url.match(/giveaway\/(.+?)\//),
        sgTools = false;
      if (match) {
        code = match[1];
      } else {
        match = url.match(/giveaways\/(.+)/);
        if (match) {
          code = match[1];
          sgTools = true;
        }
      }
      id = giveaway.getAttribute('data-game-id');
      heading = giveaway.getElementsByClassName('featured__heading')[0];
      icons = heading.getElementsByTagName('a');
      for (i = 0, n = icons.length; i < n; ++i) {
        icons[i].classList.add('giveaway__icon');
      }
      headingName = heading.firstElementChild;
      this.createElements(headingName, 'atouter', [{
        attributes: {
          class: 'giveaway__heading__name',
          href: url
        },
        type: 'a',
        children: [...Array.from(headingName.childNodes).map(x => {
          return {
            context: x
          };
        })]
      }]);
      thinHeadings = heading.getElementsByClassName('featured__heading__small');
      for (i = 0, n = thinHeadings.length; i < n; ++i) {
        this.createElements(thinHeadings[0], 'atouter', [{
          attributes: {
            class: 'giveaway__heading__thin'
          },
          type: 'span',
          children: [...Array.from(thinHeadings[0].childNodes).map(x => {
            return {
              context: x
            };
          })]
        }]);
      }
      columns = heading.nextElementSibling;
      endTimeColumn = columns.firstElementChild;
      endTimeColumn.classList.remove('featured__column');
      if (sgTools) {
        let info = await this.esgst.modules.games.games_getInfo(giveaway);
        if (info) {
          this.createElements(heading, 'beforeend', [{
            attributes: {
              class: 'giveaway__icon',
              href: `https://store.steampowered.com/${info.type.slice(0, -1)}/${info.id}/`,
              rel: 'nofollow',
              target: '_blank'
            },
            type: 'a',
            children: [{
              attributes: {
                class: 'fa fa-steam'
              },
              type: 'i'
            }]
          }, {
            attributes: {
              class: 'giveaway__icon',
              href: `/giveaways/search?${info.type.slice(0, -1)}=${info.id}`
            },
            type: 'a',
            children: [{
              attributes: {
                class: 'fa fa-search'
              },
              type: 'i'
            }]
          }]);
        }
        let date = new Date(`${endTimeColumn.lastElementChild.textContent}Z`).getTime();
        ended = Date.now() > date;
        const items = [];
        if (ended) {
          items.push({
            text: 'Ended',
            type: 'node'
          });
        }
        items.push({
          attributes: {
            ['data-timestamp']: date / 1e3
          },
          text: ended ? this.getTimeSince(date) : this.getTimeSince(date, true),
          type: 'span'
        }, {
          text: ended ? ' ago ' : ' remaining ',
          type: 'node'
        });
        this.createElements(endTimeColumn.lastElementChild, 'atouter', items);
      }
      endTime = parseInt(endTimeColumn.lastElementChild.getAttribute('data-timestamp')) * 1000;
      startTimeColumn = endTimeColumn.nextElementSibling;
      startTimeColumn.classList.remove('featured__column', 'featured__column--width-fill');
      startTimeColumn.classList.add('giveaway__column--width-fill');
      if (sgTools) {
        let date = new Date(`${startTimeColumn.firstElementChild.textContent}Z`).getTime();
        const items = [];
        if (ended) {
          items.push({
            text: 'Ended ',
            type: 'node'
          });
        }
        items.push({
          attributes: {
            ['data-timestamp']: date / 1e3
          },
          text: this.getTimeSince(date),
          type: 'span'
        }, {
          text: ' ago ',
          type: 'node'
        });
        this.createElements(startTimeColumn.firstElementChild, 'atouter', items);
      }
      startTimeColumn.lastElementChild.classList.add('giveaway__username');
      avatar = columns.lastElementChild;
      if (sgTools) {
        avatar.className = 'giveaway_image_avatar';
      }
      avatar.remove();
      startTimeColumn.querySelector(`[style]`).removeAttribute('style');
      column = startTimeColumn.nextElementSibling;
      while (column) {
        column.classList.remove('featured__column');
        column.className = column.className.replace(/featured/g, 'giveaway');
        column = column.nextElementSibling;
      }
      removeEntryButton = context.getElementsByClassName('sidebar__entry-delete')[0];
      if (removeEntryButton && !removeEntryButton.classList.contains('is-hidden')) {
        entered = 'is-faded';
      } else {
        entered = '';
      }
      counts = context.getElementsByClassName('sidebar__navigation__item__count');
      if (counts.length > 1) {
        entries = counts[1].textContent;
        comments = counts[0].textContent;
        started = true;
      } else if (counts.length > 0) {
        entries = 0;
        comments = counts[0].textContent;
        started = false;
      } else {
        entries = 0;
        comments = 0;
      }
      image = giveaway.getElementsByClassName('global__image-outer-wrap--game-large')[0].firstElementChild.getAttribute('src');
      const attributes = {
        class: 'giveaway__row-outer-wrap',
        ['data-game-id']: id
      };
      if (errorMessage) {
        attributes['data-error'] = errorMessage;
      }
      if (blacklist) {
        attributes['data-blacklist'] = true;
      }
      const errorButton = context.getElementsByClassName('sidebar__error is-disabled')[0];
      if (!errorButton || errorButton.textContent.trim() === 'Not Enough Points') {
        attributes['data-enterable'] = true;
      }
      if (context.getElementsByClassName('sidebar__entry-insert')[0]) {
        attributes['data-currently-enterable'] = true;
      }
      if (entered) {
        attributes['data-entered'] = true;
      }
      heading.className = 'giveaway__heading';
      columns.className = 'giveaway__columns';
      return {
        code,
        html: [{
          type: 'div',
          children: [{
            attributes,
            type: 'div',
            children: [{
              attributes: {
                class: `giveaway__row-inner-wrap ${entered}`
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'giveaway__summary'
                },
                children: [{
                  context: heading
                }, {
                  context: columns
                }, {
                  attributes: {
                    class: 'giveaway__links'
                  },
                  type: 'div',
                  children: [{
                    attributes: {
                      href: `${url}/entries`
                    },
                    type: 'a',
                    children: [{
                      attributes: {
                        class: 'fa fa-tag'
                      },
                      type: 'i'
                    }, {
                      text: `${entries} entries`,
                      type: 'span'
                    }]
                  }, {
                    attributes: {
                      href: `${url}/comments`
                    },
                    type: 'a',
                    children: [{
                      attributes: {
                        class: 'fa fa-comment'
                      },
                      type: 'i'
                    }, {
                      text: `${comments} comments`,
                      type: 'span'
                    }]
                  }]
                }],
                type: 'div'
              }, {
                context: avatar
              }, {
                attributes: {
                  class: 'giveaway_image_thumbnail',
                  href: url,
                  style: `background-image: url(${image})`
                },
                type: 'a'
              }]
            }]
          }]
        }],
        points: parseInt(heading.textContent.match(/\((\d+)P\)/)[1]),
        started,
        timestamp: endTime
      };
    } else {
      return null;
    }
  }
  getCopyIcon(value) {
    return _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("i", {
      className: "esgst-clickable fa fa-copy",
      title: "Copy",
      onclick: event => this.copyValue(event.currentTarget, value)
    });
  }
  copyValue(icon, value) {
    let textArea = this.createElements(document.body, 'beforeend', [{
      type: 'textarea'
    }]);
    textArea.value = value;
    textArea.select();
    document.execCommand('copy');
    textArea.remove();
    if (icon) {
      icon.classList.add('esgst-green');
      window.setTimeout(() => icon.classList.remove('esgst-green'), 2000);
    }
  }
  setMissingDiscussion(context) {
    if (context) {
      this.createElements(context.outerWrap, 'atinner', [{
        attributes: {
          class: 'table__row-outer-wrap',
          style: `padding: 10px 0;`
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'table__row-inner-wrap'
          },
          type: 'div',
          children: [{
            type: 'div',
            children: [{
              attributes: {
                class: 'table_image_avatar',
                href: `/user/${context.author}`,
                style: `background-image:${context.avatar.style.backgroundImage.replace(/"/g, "'")};`
              },
              type: 'a'
            }]
          }, {
            attributes: {
              class: 'table__column--width-fill'
            },
            type: 'div',
            children: [{
              attributes: {
                style: `margin-bottom: 2px;`
              },
              type: 'h3',
              children: [{
                attributes: {
                  class: 'homepage_table_column_heading',
                  href: context.url
                },
                text: context.title,
                type: 'a'
              }]
            }, {
              type: 'p',
              children: context.lastPostTime ? [{
                attributes: {
                  class: 'table__column__secondary-link',
                  href: context.url
                },
                text: `${context.comments} Comments`,
                type: 'a'
              }, {
                text: ' - Last post ',
                type: 'node'
              }, {
                attributes: {
                  ['data-timestamp']: context.lastPostTimestamp
                },
                text: context.lastPostTime,
                type: 'span'
              }, {
                text: ' ago by ',
                type: 'node'
              }, {
                attributes: {
                  class: 'table__column__secondary-link',
                  href: `/user/${context.lastPostAuthor}`
                },
                text: context.lastPostAuthor,
                type: 'a'
              }, {
                attributes: {
                  class: 'icon-green table__last-comment-icon',
                  href: `/go/comment/${context.lastPostCode}`
                },
                type: 'a',
                children: [{
                  attributes: {
                    class: 'fa fa-chevron-circle-right'
                  },
                  type: 'i'
                }]
              }] : [{
                attributes: {
                  class: 'table__column__secondary-link',
                  href: context.url
                },
                text: `${context.comments} Comments`,
                type: 'a'
              }, {
                text: ' - Created ',
                type: 'node'
              }, {
                attributes: {
                  ['data-timestamp']: context.createdTimestamp
                },
                text: context.createdTime,
                type: 'span'
              }, {
                text: ' ago by ',
                type: 'node'
              }, {
                attributes: {
                  class: 'table__column__secondary-link',
                  href: `/user/${context.author}`
                },
                text: context.author,
                type: 'a'
              }]
            }]
          }]
        }]
      }]);
      context.outerWrap = context.outerWrap.firstElementChild;
    }
  }
  escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, `\\$&`);
  }

  /**
   *
   * @param {import('../components/Button').Button} button
   * @param {*} event
   */
  triggerSetOnEnter(button, event) {
    if (event.key === 'Enter') {
      button.onClick();
      return true;
    }
  }
  formatTags(fullMatch, match1, offset, string) {
    return offset === 0 || offset === string.length - fullMatch.length ? '' : `, `;
  }
  animateScroll(y, callback) {
    // From https://stackoverflow.com/a/26808520/8115112

    let currentTime, time;
    currentTime = 0;
    if (y > 0) {
      y -= this.esgst.commentsTop;
    }
    time = Math.max(0.1, Math.min(Math.abs(window.scrollY - y) / 2000, 0.8));
    function tick() {
      let p;
      currentTime += 1 / 60;
      p = currentTime / time;
      if (p < 1) {
        window.requestAnimationFrame(tick);
        window.scrollTo(0, window.scrollY + (y - window.scrollY) * ((p /= 0.5) < 1 ? 0.5 * Math.pow(p, 5) : 0.5 * (Math.pow(p - 2, 5) + 2)));
      } else {
        window.scrollTo(0, y);
        if (callback) {
          callback();
        }
      }
    }
    tick();
  }
  reverseComments(context) {
    let i, n;
    let frag = document.createDocumentFragment();
    for (i = 0, n = context.children.length; i < n; ++i) {
      frag.appendChild(context.lastElementChild);
    }
    context.appendChild(frag);
  }
  createAlert(message) {
    let popup;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addScrollable: true,
      icon: 'fa-exclamation',
      isTemp: true,
      title: message
    });
    popup.open();
  }

  /**
   * @param message
   * @param {} [onYes]
   * @param {} [onNo]
   * @param {} [event]
   */
  createConfirmation(message, onYes, onNo, event) {
    //Logger.info(message);
    let callback, popup;
    callback = onNo;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      addScrollable: true,
      icon: 'fa-question',
      isTemp: true,
      title: message
    });
    _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create({
      template: 'success',
      name: 'Yes',
      onClick: () => {
        callback = onYes;
        popup.close();
      }
    }).insert(popup.description, 'beforeend');
    _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create({
      template: 'error',
      name: 'No',
      onClick: () => {
        callback = onNo;
        popup.close();
      }
    }).insert(popup.description, 'beforeend');
    popup.onClose = () => {
      if (callback) {
        callback(event);
      }
    };
    popup.open();
  }
  createConfirmationAsync(message) {
    return new Promise(resolve => this.createConfirmation(message, () => resolve(true), () => resolve(false)));
  }
  createFadeMessage(context, message) {
    context.textContent = message;
    window.setTimeout(() => {
      context.textContent = '';
    }, 10000);
  }
  openSmallWindow(url) {
    _class_Tabs__WEBPACK_IMPORTED_MODULE_29__["Tabs"].open(url);
  }
  convertBytes(bytes) {
    if (bytes < 1024) {
      return `${bytes} B`;
    } else {
      bytes /= 1024;
      if (bytes < 1024) {
        return `${Math.round(bytes * 100) / 100} KB`;
      } else {
        return `${Math.round(bytes / 1024 * 100) / 100} MB`;
      }
    }
  }
  createFormRows(context, position, options) {
    const items = [];
    let i = 1;
    for (const item of options.items) {
      if (!item.check) {
        continue;
      }
      items.push(_class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "form__row"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "form__heading"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "form__heading__number"
      }, i++), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "form__heading__text"
      }, item.name)), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "form__row__indent",
        id: item.id || ''
      }, item.content)));
    }
    let rows;
    _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
      className: "form__rows",
      ref: ref => rows = ref
    }, items));
    return rows;
  }
  createSidebarNavigation(context, position, options) {
    const items = [];
    for (const item of options.items) {
      const attributes = Object.assign({
        className: 'sidebar__navigation__item__link'
      }, item.url ? {
        href: item.url
      } : null);
      const children = _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "sidebar__navigation__item__name"
      }, item.name), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "sidebar__navigation__item__underline"
      }), _lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].isSet(item.count) ? _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", {
        className: "sidebar__navigation__item__count"
      }, item.count) : null);
      items.push(_class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", {
        className: "sidebar__navigation__item",
        id: item.id || ''
      }, item.url ? _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("a", attributes, children) : _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", attributes, children)));
    }
    let navigation;
    _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("h3", {
      className: "sidebar__heading"
    }, options.name), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("ul", {
      className: "sidebar__navigation",
      ref: ref => navigation = ref
    }, items)));
    return navigation;
  }
  createElements(context, position, items) {
    try {
      if (position === 'atinner') {
        context.innerHTML = '';
      }
      if (!items || !items.length) {
        return;
      }
      const fragment = document.createDocumentFragment();
      let element = null;
      this.buildElements(fragment, items);
      switch (position) {
        case 'beforebegin':
          context.parentElement.insertBefore(fragment, context);
          element = context.previousElementSibling;
          break;
        case 'afterbegin':
          context.insertBefore(fragment, context.firstElementChild);
          element = context.firstElementChild;
          break;
        case 'beforeend':
          context.appendChild(fragment);
          element = context.lastElementChild;
          break;
        case 'afterend':
          context.parentElement.insertBefore(fragment, context.nextElementSibling);
          element = context.nextElementSibling;
          break;
        case 'atinner':
          context.appendChild(fragment);
          element = context.firstElementChild;
          break;
        case 'atouter':
          context.parentElement.insertBefore(fragment, context);
          element = context.previousElementSibling;
          context.remove();
          break;
      }
      return element;
    } catch (error) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_19__["Logger"].error(error.message, error.stack);
    }
  }
  buildElements(context, items) {
    for (const item of items) {
      if (!item) {
        continue;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].isSet(item.context)) {
        context.appendChild(item.context);
        continue;
      }
      if (item.type === 'node') {
        const node = document.createTextNode(item.text);
        context.appendChild(node);
        continue;
      }
      const element = document.createElement(item.type);
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].isSet(item.attributes)) {
        for (const key in item.attributes) {
          if (item.attributes.hasOwnProperty(key)) {
            element.setAttribute(key, item.attributes[key]);
          }
        }
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].isSet(item.text)) {
        element.textContent = item.text;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].isSet(item.children)) {
        this.buildElements(element, item.children);
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].isSet(item.events)) {
        for (const key in item.events) {
          if (item.events.hasOwnProperty(key)) {
            element.addEventListener(key, item.events[key]);
          }
        }
      }
      if (item.type === 'i') {
        const node = document.createTextNode(' ');
        context.appendChild(node);
      }
      context.appendChild(element);
      if (item.type === 'i') {
        const node = document.createTextNode(' ');
        context.appendChild(node);
      }
    }
  }

  /**
   * @param appId
   * @param steamId
   * @returns {PlayerAchievementsSteamApiResponse}
   */
  async getPlayerAchievements(appId, steamId) {
    return (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get(`http://api.steampowered.com/ISteamUserStats/GetPlayerAchievements/v0001/?appid=${appId}&key=${_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('steamApiKey')}&steamid=${steamId}`)).json;
  }
  async submitComment(obj) {
    obj.status.innerHTML = '';
    if (!obj.commentUrl) {
      const result = await this.saveComment(obj.context, obj.tradeCode, typeof obj.parentId === 'string' ? obj.parentId : obj.parentId.value, obj.description.value, obj.url, obj.status, !obj.callback);
      if (obj.callback) {
        obj.callback(result.id, result.response, result.status);
      }
      return;
    }
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get(obj.commentUrl);
    const comment = response.html.getElementById(obj.commentUrl.match(/\/comment\/(.+)/)[1]);
    obj.parentId = this.esgst.sg ? comment.closest('.comment').getAttribute('data-comment-id') : comment.getAttribute('data-id');
    obj.tradeCode = this.esgst.sg ? '' : response.url.match(/\/trade\/(.+?)\//)[1];
    obj.url = this.esgst.sg ? response.url.match(/(.+?)(#.+?)?$/)[1] : '/ajax.php';
    if (obj.checked || !_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('rfi_c')) {
      const result = await this.saveComment(obj.context, obj.tradeCode, obj.parentId, obj.description.value, obj.url, obj.status, !obj.callback);
      if (obj.callback) {
        obj.callback(result.id, result.response, response.status);
      }
      return;
    }
    const comments = this.esgst.sg ? comment.closest('.comment').getElementsByClassName('comment__children')[0] : comment.getElementsByClassName('comment_children')[0];
    for (let i = comments.children.length - 1; i > -1; i--) {
      const comment = comments.children[i],
        id = comment.querySelector(`[href*="/go/comment/"]`).getAttribute('href').match(/\/go\/comment\/(.+)/)[1];
      if (obj.context.querySelector(`[href*="/go/comment/${id}"`)) {
        comment.remove();
      }
    }
    if (comments.children.length) {
      obj.context.appendChild(comments);
      await this.endless_load(comments);
      for (let i = comments.children.length - 1; i > -1; i--) {
        obj.context.appendChild(comments.children[i]);
      }
      comments.remove();
      obj.submitButton.build(3);
      this.createElements(obj.status, 'atinner', [{
        attributes: {
          class: 'esgst-bold esgst-warning'
        },
        type: 'span',
        children: [{
          text: 'Somebody beat you to it!',
          type: 'node'
        }, {
          type: 'br'
        }, {
          text: 'There are other replies to this comment.',
          type: 'node'
        }, {
          type: 'br'
        }, {
          text: 'You can review them below before confirming your reply.',
          type: 'node'
        }]
      }]);
      obj.checked = true;
    } else {
      const result = await this.saveComment(obj.context, obj.tradeCode, obj.parentId, obj.description.value, obj.url, obj.status, !obj.callback);
      if (obj.callback) {
        obj.callback(result.id, result.response, result.status);
      }
    }
  }
  addReplyButton(context, commentUrl, callback) {
    const obj = {
      callback,
      checked: false,
      commentUrl,
      context: context.parentElement,
      description: context.querySelector(`[name="description"]`),
      parentId: context.querySelector(`[name="parent_id"]`),
      tradeCode: (context.querySelector(`[name="trade_code"]`) || {
        value: ''
      }).value,
      url: this.esgst.sg ? _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.locationHref.match(/(.+?)(#.+?)?$/)[1] : '/ajax.php'
    };
    const container = context.getElementsByClassName(this.esgst.sg ? 'align-button-container' : 'btn_actions')[0];
    container.firstElementChild.remove();
    obj.button = this.createElements(container, 'afterbegin', [{
      attributes: {
        class: 'esgst-ded-button'
      },
      type: 'div'
    }]);
    obj.status = this.createElements(container, 'beforeend', [{
      attributes: {
        class: 'comment__actions action_list esgst-ded-status'
      },
      type: 'div'
    }]);
    obj.submitButton = _components_Button__WEBPACK_IMPORTED_MODULE_31__["Button"].create([{
      color: 'white',
      icons: ['fa-send'],
      name: 'Submit',
      switchTo: {
        onReturn: 1
      },
      onClick: this.submitComment.bind(this, obj)
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Saving...'
    }, {
      color: 'white',
      icons: ['fa-send'],
      name: 'Confirm',
      switchTo: {
        onReturn: 3
      },
      onClick: this.submitComment.bind(this, obj)
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Saving...'
    }]).insert(obj.button, 'beforeend');
  }
  async hideGames(obj, unhide) {
    const isUsingServer = await _class_Permissions__WEBPACK_IMPORTED_MODULE_21__["permissions"].contains([['server']]);
    let hasCacheChanged = false;
    let api = JSON.parse(this.getValue('sgdbCache', `{ "lastUpdate": 0 }`));
    if (!Object(date_fns_isSameWeek__WEBPACK_IMPORTED_MODULE_12__["default"])(Date.now(), api.lastUpdate)) {
      if (isUsingServer) {
        obj.update && obj.update('Updating API cache...');
        try {
          const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].get('https://esgst.rafaelgomes.xyz/api/games/sgids');
          api = {
            cache: {
              appids: response.json.result.found.apps,
              subids: response.json.result.found.subs
            },
            lastUpdate: Date.now()
          };
        } catch (err) {}
      } else {
        api = {
          cache: {
            appids: {},
            subids: {}
          },
          lastUpdate: Date.now()
        };
      }
      hasCacheChanged = true;
    }
    obj.update && obj.update('Retrieving ids from cache...');
    const games = {
      apps: {},
      subs: {}
    };
    const ids = [];
    const appsToFetch = [];
    const appsNotFound = [];
    const subsToFetch = [];
    const subsNotFound = [];
    for (const appId of obj.appIds) {
      const savedGame = this.esgst.games.apps[appId];
      if (savedGame && (unhide && !savedGame.hidden || !unhide && savedGame.hidden)) {
        continue;
      }
      const id = savedGame && savedGame.sgId || api.cache && api.cache.appids && api.cache.appids[appId];
      if (id) {
        ids.push(id);
        games.apps[appId] = {
          hidden: unhide ? null : true,
          sgId: id
        };
      } else if (id === 0) {
        appsNotFound.push(appId);
      } else {
        appsToFetch.push(appId);
      }
    }
    for (const subId of obj.subIds) {
      const savedGame = this.esgst.games.subs[subId];
      if (savedGame && (unhide && !savedGame.hidden || !unhide && savedGame.hidden)) {
        continue;
      }
      const id = savedGame && savedGame.sgId || api.cache && api.cache.subids && api.cache.subids[subId];
      if (id) {
        ids.push(id);
        games.subs[subId] = {
          hidden: unhide ? null : true,
          sgId: id
        };
      } else if (id === 0) {
        subsNotFound.push(subId);
      } else {
        subsToFetch.push(subId);
      }
    }
    for (let i = appsToFetch.length - 1; i > -1 && !obj.canceled; i--) {
      obj.update && obj.update(`Retrieving app ids from SteamGifts (${i} left)...`);
      const appId = appsToFetch[i];
      const id = await this.getGameSgId(appId, 'apps');
      if (id) {
        ids.push(id);
        games.apps[appId] = {
          hidden: unhide ? null : true,
          sgId: id
        };
      } else {
        api.cache.appids[appId] = 0;
        appsNotFound.push(appId);
      }
    }
    for (let i = subsToFetch.length - 1; i > -1 && !obj.canceled; i--) {
      obj.update && obj.update(`Retrieving sub ids from SteamGifts (${i} left)...`);
      const subId = subsToFetch[i];
      const id = await this.getGameSgId(subId, 'subs');
      if (id) {
        ids.push(id);
        games.subs[subId] = {
          hidden: unhide ? null : true,
          sgId: id
        };
      } else {
        api.cache.subids[subId] = 0;
        subsNotFound.push(subId);
      }
    }
    if (obj.canceled) {
      return;
    }
    if (hasCacheChanged) {
      await this.setValue('sgdbCache', JSON.stringify(api));
    }
    const title = unhide ? 'Unhiding' : 'Hiding';
    obj.update && obj.update(`${title} games...`);
    const total = ids.length;
    for (const [index, id] of ids.entries()) {
      if (obj.canceled) {
        return;
      }
      obj.update && obj.update(`${title} games (${index} of ${total})...`);
      await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].post('/ajax.php', {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_25__["Session"].xsrfToken}&do=${unhide ? 'remove_filter' : 'hide_giveaways_by_game_id'}&game_id=${id}`
      });
    }
    if (obj.canceled) {
      return;
    }
    obj.update && obj.update('Saving...');
    await this.lockAndSaveGames(games);
    obj.update && obj.update('');
    return {
      apps: appsNotFound,
      subs: subsNotFound
    };
  }
  async getGameSgId(id, type) {
    const elements = _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].parse((await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_16__["FetchRequest"].post('/ajax.php', {
      data: `do=autocomplete_giveaway_game&page_number=1&search_query=${encodeURIComponent(id)}`
    })).json.html).querySelectorAll('.table__row-outer-wrap');
    for (const element of elements) {
      const info = await this.esgst.modules.games.games_getInfo(element);
      if (info && info.type === type && info.id === id) {
        return element.getAttribute('data-autocomplete-id');
      }
    }
  }
  setDatePickerDate(target, date) {
    const script = document.createElement('script');
    script.textContent = `
			function setDatePickerDate() {
				const input = document.querySelector('input[name="${target}"]');
				const actualInput = input.previousElementSibling;

				const datepicker = actualInput && actualInput.classList.contains('hasDatepicker') ? actualInput : input;

				$(datepicker).datetimepicker("setDate", new Date(${date.getTime()}));
			}

			setDatePickerDate();
		`;
    document.body.appendChild(script);
    script.remove();
  }
  testPath(name, namespace, path) {
    const pathObj = this.esgst.paths[namespace].filter(x => x.name === name)[0];
    if (pathObj && this.getPath(path).match(pathObj.pattern)) {
      return true;
    }
    return false;
  }
  getPath(url) {
    return url.replace(/^https?:\/\/.+?\//, '/');
  }
  isCurrentPath(nameOrNames) {
    if (Array.isArray(nameOrNames)) {
      for (const name of nameOrNames) {
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.currentPaths.indexOf(name) > -1) {
          return true;
        }
      }
      return false;
    }
    return _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.currentPaths.indexOf(nameOrNames) > -1;
  }
  getBrowserInfo() {
    return new Promise(resolve => _browser__WEBPACK_IMPORTED_MODULE_13__["browser"].runtime.sendMessage({
      action: 'getBrowserInfo'
    }).then(result => resolve(JSON.parse(result))));
  }
  getTds() {
    return new Promise(resolve => _browser__WEBPACK_IMPORTED_MODULE_13__["browser"].runtime.sendMessage({
      action: 'get-tds'
    }).then(data => resolve(JSON.parse(data))));
  }
  notifyTds(data) {
    return new Promise(resolve => _browser__WEBPACK_IMPORTED_MODULE_13__["browser"].runtime.sendMessage({
      action: 'notify-tds',
      data: JSON.stringify(data)
    }).then(() => resolve()));
  }
  do_lock(lock) {
    return new Promise(resolve => _browser__WEBPACK_IMPORTED_MODULE_13__["browser"].runtime.sendMessage({
      action: 'do_lock',
      lock: JSON.stringify(lock)
    }).then(result => resolve(JSON.parse(result))));
  }
  updateLock(lock) {
    return new Promise(resolve => _browser__WEBPACK_IMPORTED_MODULE_13__["browser"].runtime.sendMessage({
      action: 'update_lock',
      lock: JSON.stringify(lock)
    }).then(() => resolve()));
  }
  do_unlock(lock) {
    return new Promise(resolve => _browser__WEBPACK_IMPORTED_MODULE_13__["browser"].runtime.sendMessage({
      action: 'do_unlock',
      lock: JSON.stringify(lock)
    }).then(() => resolve()));
  }
  setValues(values) {
    return new Promise(resolve => _browser__WEBPACK_IMPORTED_MODULE_13__["browser"].storage.local.set(values).then(() => {
      for (const key in values) {
        if (values.hasOwnProperty(key)) {
          this.esgst.storage[key] = values[key];
          try {
            this.esgst[key] = JSON.parse(values[key]);
          } catch (e) {
            this.esgst[key] = values[key];
          }
        }
      }
      resolve();
    }));
  }
  setValue(key, value) {
    return this.setValues({
      [key]: value
    });
  }
  getValue(key, value) {
    return _lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].isSet(this.esgst.storage[key]) ? this.esgst.storage[key] : value;
  }
  getValues(values) {
    const output = {};
    for (const key in values) {
      if (values.hasOwnProperty(key)) {
        output[key] = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].isSet(this.esgst.storage[key]) ? this.esgst.storage[key] : values[key];
      }
    }
    return output;
  }
  delValues(keys) {
    return new Promise(resolve => _browser__WEBPACK_IMPORTED_MODULE_13__["browser"].storage.local.remove(keys).then(() => {
      keys.forEach(key => delete this.esgst.storage[key]);
      resolve();
    }));
  }
  delValue(key) {
    return this.delValues([key]);
  }
  openDonationsPopup() {
    const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_23__["Popup"]({
      icon: 'fa-dollar',
      title: 'Donations',
      isTemp: true
    });
    popup.getScrollable(_class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("a", {
      class: "table__column__secondary-link",
      href: `https://www.buymeacoffee.com/rafaelgomesxyz`,
      target: "_blank"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("strong", null, "Buy Me A Coffee"))), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("a", {
      class: "table__column__secondary-link",
      href: `https://www.patreon.com/rafaelgomesxyz`,
      target: "_blank"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("strong", null, "Patreon"))), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("a", {
      class: "table__column__secondary-link",
      href: `https://steamcommunity.com/tradeoffer/new/?partner=214244550&token=LW6Selqp`,
      target: "_blank"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("strong", null, "Steam Trade"))), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("strong", null, "Paypal:"), " rafaelgomesxyz@gmail.com", ' ', this.getCopyIcon('rafaelgomesxyz@gmail.com')), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("strong", null, "Bitcoin:"), " 32WY96ch5MSZ3FNubL5f7QZ9K3WWNHNpV9", ' ', this.getCopyIcon('32WY96ch5MSZ3FNubL5f7QZ9K3WWNHNpV9')), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("strong", null, "Monero:"), ' ', "42Tw49nUAig3kk1tJh1y1ZP8vrkmY4EH3QW3SRijHxGggtBpDUn2TqJAVBJYBCybGXNninC4gGD9nhe3cttBaZ6u5NuhiLM", ' ', this.getCopyIcon('42Tw49nUAig3kk1tJh1y1ZP8vrkmY4EH3QW3SRijHxGggtBpDUn2TqJAVBJYBCybGXNninC4gGD9nhe3cttBaZ6u5NuhiLM')), _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("strong", null, "Humble Bundle Partner ID:"), " gsrafael01 ", this.getCopyIcon('gsrafael01'))));
    popup.open();
  }
  async addHeaderMenu() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].header) {
      return;
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].header.addButtonContainer({
      buttonImage: _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.icon,
      buttonName: ' ESGST',
      isDropdown: true,
      side: 'left',
      url: 'https://www.steamgifts.com/account/settings/profile?esgst=settings',
      dropdownItems: [{
        description: 'Visit the GitHub page.',
        icon: 'fa fa-fw fa-github icon-grey grey',
        name: 'GitHub',
        openInNewTab: true,
        url: 'https://github.com/SquishedPotatoe/esgst'
      }, {
        description: 'Report bugs and / or make suggestions.',
        icon: 'fa fa-fw fa-bug icon-red red',
        name: 'Bugs / Suggestions',
        openInNewTab: true,
        url: 'https://github.com/SquishedPotatoe/esgst/issues'
      }, {
        description: "Check out what's coming in the next versions.",
        icon: 'fa fa-fw fa-map-signs icon-blue blue',
        name: 'Milestones',
        openInNewTab: true,
        url: 'https://github.com/SquishedPotatoe/esgst/milestones'
      }, {
        description: 'Visit the discussion page.',
        icon: 'fa fa-fw fa-commenting icon-green green',
        name: 'Discussion',
        url: 'https://www.steamgifts.com/discussion/TDyzv/'
      }, {
        description: 'Visit / join the Steam group.',
        icon: 'fa fa-fw fa-steam icon-green green',
        name: 'Steam Group',
        openInNewTab: true,
        url: 'http://steamcommunity.com/groups/esgst'
      }, {
        description: 'Check out the changelog.',
        icon: 'fa fa-fw fa-file-text-o icon-yellow yellow',
        name: 'Changelog',
        openInNewTab: true,
        url: 'https://github.com/SquishedPotatoe/esgst/releases'
      }, {
        description: 'Help make ESGST better!',
        icon: 'fa fa-fw fa-dollar icon-green green',
        name: 'Donations',
        onClick: this.openDonationsPopup.bind(this)
      }, {
        description: 'Check out the SteamGifts request log.',
        icon: 'fa fa-fw fa-history icon-grey grey',
        name: 'SteamGifts Request Log',
        onClick: this.openRequestLog.bind(this)
      }, {
        icon: 'fa fa-fw fa-info-circle icon-grey grey',
        name: `Current Version: ${_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.versionName}`
      }],
      onClick: event => {
        if (!_class_Settings__WEBPACK_IMPORTED_MODULE_26__["Settings"].get('openSettingsInTab')) {
          event.preventDefault();
          try {
            _Settings__WEBPACK_IMPORTED_MODULE_38__["settingsModule"].loadMenu(true);
          } catch (err) {
            _class_Logger__WEBPACK_IMPORTED_MODULE_19__["Logger"].error(err.message);
          }
        }
      }
    });
    _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].header.buttonContainers['esgst'].nodes.outer.id = 'esgst';
    const arrow = _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].header.buttonContainers['esgst'].nodes.arrow;
    arrow.addEventListener('click', this.toggleHeaderMenu.bind(this), true);
  }
  getSelectors(endless, selectors) {
    if (endless) {
      const newSelectors = [];
      for (const selector of selectors) {
        newSelectors.push(selector.replace(/X/, `.esgst-es-page-${endless} `), selector.replace(/X/, `.esgst-es-page-${endless}`));
      }
      selectors = newSelectors.join(`, `);
    } else {
      selectors = selectors.map(x => x.replace(/X/, '')).join(`, `);
    }
    return selectors;
  }
  getLevelFromCv(cv) {
    for (const [index, value] of _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.cvLevels.entries()) {
      if (cv < value) {
        const prevValue = _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.cvLevels[index - 1];
        return this.round(index - 1 + (cv - prevValue) / (value - prevValue));
      }
    }
  }
  getChanges(changes, areaName) {
    if (areaName !== 'local') {
      return;
    }
    for (const key in changes) {
      if (!changes.hasOwnProperty(key)) {
        continue;
      }
      const change = changes[key];
      if (change.newValue === null) {
        delete _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.storage[key];
        delete _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst[key];
      }
      if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_37__["Utils"].isSet(change.newValue)) {
        continue;
      }
      _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.storage[key] = change.newValue;
      try {
        _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst[key] = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.storage[key]);
      } catch (e) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst[key] = _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.storage[key];
      }
    }
  }
  dateToServer(dateStr) {
    const date = new Date(dateStr);
    return `${date.getFullYear()}-${`0${date.getMonth() + 1}`.slice(-2)}-${`0${date.getDate()}`.slice(-2)}`;
  }
  dateFromServer(dateStr) {
    const dateParts = dateStr.split('-');
    const year = parseInt(dateParts[0]);
    const month = parseInt(dateParts[1]);
    const day = parseInt(dateParts[2]);
    return `${SHORT_MONTHS[month - 1]} ${day}, ${year}`;
  }
  areArraysEqual(arr1, arr2) {
    if (arr1.length !== arr2.length) {
      return false;
    }
    for (let i = 0, n = arr1.length; i < n; i++) {
      if (arr1[i] !== arr2[i]) {
        return false;
      }
    }
    return true;
  }
  findFeature(term) {
    term = term.toLowerCase();
    let feature = null;
    let score = 0;
    for (const id of Object.keys(_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.featuresById)) {
      const currentFeature = _class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].esgst.featuresById[id];
      let currentScore = 0;
      const name = currentFeature.name.toLowerCase();
      if (name === term) {
        return currentFeature;
      }
      const nameMatches = name.match(term);
      if (nameMatches) {
        currentScore += nameMatches[0].length / name.length;
      }
      if (currentScore > score) {
        feature = currentFeature;
        score = currentScore;
      }
    }
    return feature;
  }
}

// Singleton
const common = new Common();
_class_Shared__WEBPACK_IMPORTED_MODULE_28__["Shared"].add({
  common
});


/***/ }),
/* 145 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// `Symbol.prototype.description` getter
// https://tc39.es/ecma262/#sec-symbol.prototype.description

var $ = __webpack_require__(65);
var DESCRIPTORS = __webpack_require__(32);
var globalThis = __webpack_require__(14);
var uncurryThis = __webpack_require__(6);
var hasOwn = __webpack_require__(20);
var isCallable = __webpack_require__(30);
var isPrototypeOf = __webpack_require__(42);
var toString = __webpack_require__(101);
var defineBuiltInAccessor = __webpack_require__(110);
var copyConstructorProperties = __webpack_require__(72);

var NativeSymbol = globalThis.Symbol;
var SymbolPrototype = NativeSymbol && NativeSymbol.prototype;

if (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in SymbolPrototype) ||
  // Safari 12 bug
  NativeSymbol().description !== undefined
)) {
  var EmptyStringDescriptionStore = {};
  // wrap Symbol constructor for correct work with undefined description
  var SymbolWrapper = function Symbol() {
    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);
    var result = isPrototypeOf(SymbolPrototype, this)
      // eslint-disable-next-line sonarjs/inconsistent-function-call -- ok
      ? new NativeSymbol(description)
      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'
      : description === undefined ? NativeSymbol() : NativeSymbol(description);
    if (description === '') EmptyStringDescriptionStore[result] = true;
    return result;
  };

  copyConstructorProperties(SymbolWrapper, NativeSymbol);
  SymbolWrapper.prototype = SymbolPrototype;
  SymbolPrototype.constructor = SymbolWrapper;

  var NATIVE_SYMBOL = String(NativeSymbol('description detection')) === 'Symbol(description detection)';
  var thisSymbolValue = uncurryThis(SymbolPrototype.valueOf);
  var symbolDescriptiveString = uncurryThis(SymbolPrototype.toString);
  var regexp = /^Symbol\((.*)\)[^)]+$/;
  var replace = uncurryThis(''.replace);
  var stringSlice = uncurryThis(''.slice);

  defineBuiltInAccessor(SymbolPrototype, 'description', {
    configurable: true,
    get: function description() {
      var symbol = thisSymbolValue(this);
      if (hasOwn(EmptyStringDescriptionStore, symbol)) return '';
      var string = symbolDescriptiveString(symbol);
      var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');
      return desc === '' ? undefined : desc;
    }
  });

  $({ global: true, constructor: true, forced: true }, {
    Symbol: SymbolWrapper
  });
}


/***/ }),
/* 146 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(65);
var $includes = __webpack_require__(49).includes;
var fails = __webpack_require__(8);
var addToUnscopables = __webpack_require__(12);

// FF99+ bug
var BROKEN_ON_SPARSE = fails(function () {
  // eslint-disable-next-line es/no-array-prototype-includes -- detection
  return !Array(1).includes();
});

// `Array.prototype.includes` method
// https://tc39.es/ecma262/#sec-array.prototype.includes
$({ target: 'Array', proto: true, forced: BROKEN_ON_SPARSE }, {
  includes: function includes(el /* , fromIndex = 0 */) {
    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);
  }
});

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('includes');


/***/ }),
/* 147 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: Remove this module from `core-js@4` since it's replaced to module below
__webpack_require__(148);


/***/ }),
/* 148 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`
__webpack_require__(149);
var $ = __webpack_require__(65);
var DESCRIPTORS = __webpack_require__(32);
var USE_NATIVE_URL = __webpack_require__(150);
var globalThis = __webpack_require__(14);
var bind = __webpack_require__(125);
var uncurryThis = __webpack_require__(6);
var defineBuiltIn = __webpack_require__(68);
var defineBuiltInAccessor = __webpack_require__(110);
var anInstance = __webpack_require__(151);
var hasOwn = __webpack_require__(20);
var assign = __webpack_require__(152);
var arrayFrom = __webpack_require__(153);
var arraySlice = __webpack_require__(158);
var codeAt = __webpack_require__(119).codeAt;
var toASCII = __webpack_require__(159);
var $toString = __webpack_require__(101);
var setToStringTag = __webpack_require__(81);
var validateArgumentsLength = __webpack_require__(160);
var URLSearchParamsModule = __webpack_require__(161);
var InternalStateModule = __webpack_require__(60);

var setInternalState = InternalStateModule.set;
var getInternalURLState = InternalStateModule.getterFor('URL');
var URLSearchParams = URLSearchParamsModule.URLSearchParams;
var getInternalSearchParamsState = URLSearchParamsModule.getState;

var NativeURL = globalThis.URL;
var TypeError = globalThis.TypeError;
var parseInt = globalThis.parseInt;
var floor = Math.floor;
var pow = Math.pow;
var charAt = uncurryThis(''.charAt);
var exec = uncurryThis(/./.exec);
var join = uncurryThis([].join);
var numberToString = uncurryThis(1.1.toString);
var pop = uncurryThis([].pop);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var shift = uncurryThis([].shift);
var split = uncurryThis(''.split);
var stringSlice = uncurryThis(''.slice);
var toLowerCase = uncurryThis(''.toLowerCase);
var unshift = uncurryThis([].unshift);

var INVALID_AUTHORITY = 'Invalid authority';
var INVALID_SCHEME = 'Invalid scheme';
var INVALID_HOST = 'Invalid host';
var INVALID_PORT = 'Invalid port';

var ALPHA = /[a-z]/i;
// eslint-disable-next-line regexp/no-obscure-range -- safe
var ALPHANUMERIC = /[\d+-.a-z]/i;
var DIGIT = /\d/;
var HEX_START = /^0x/i;
var OCT = /^[0-7]+$/;
var DEC = /^\d+$/;
var HEX = /^[\da-f]+$/i;
/* eslint-disable regexp/no-control-character -- safe */
var FORBIDDEN_HOST_CODE_POINT = /[\0\t\n\r #%/:<>?@[\\\]^|]/;
var FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\0\t\n\r #/:<>?@[\\\]^|]/;
var LEADING_C0_CONTROL_OR_SPACE = /^[\u0000-\u0020]+/;
var TRAILING_C0_CONTROL_OR_SPACE = /(^|[^\u0000-\u0020])[\u0000-\u0020]+$/;
var TAB_AND_NEW_LINE = /[\t\n\r]/g;
/* eslint-enable regexp/no-control-character -- safe */
// eslint-disable-next-line no-unassigned-vars -- expected `undefined` value
var EOF;

// https://url.spec.whatwg.org/#ipv4-number-parser
var parseIPv4 = function (input) {
  var parts = split(input, '.');
  var partsLength, numbers, index, part, radix, number, ipv4;
  if (parts.length && parts[parts.length - 1] === '') {
    parts.length--;
  }
  partsLength = parts.length;
  if (partsLength > 4) return input;
  numbers = [];
  for (index = 0; index < partsLength; index++) {
    part = parts[index];
    if (part === '') return input;
    radix = 10;
    if (part.length > 1 && charAt(part, 0) === '0') {
      radix = exec(HEX_START, part) ? 16 : 8;
      part = stringSlice(part, radix === 8 ? 1 : 2);
    }
    if (part === '') {
      number = 0;
    } else {
      if (!exec(radix === 10 ? DEC : radix === 8 ? OCT : HEX, part)) return input;
      number = parseInt(part, radix);
    }
    push(numbers, number);
  }
  for (index = 0; index < partsLength; index++) {
    number = numbers[index];
    if (index === partsLength - 1) {
      if (number >= pow(256, 5 - partsLength)) return null;
    } else if (number > 255) return null;
  }
  ipv4 = pop(numbers);
  for (index = 0; index < numbers.length; index++) {
    ipv4 += numbers[index] * pow(256, 3 - index);
  }
  return ipv4;
};

// https://url.spec.whatwg.org/#concept-ipv6-parser
// eslint-disable-next-line max-statements -- TODO
var parseIPv6 = function (input) {
  var address = [0, 0, 0, 0, 0, 0, 0, 0];
  var pieceIndex = 0;
  var compress = null;
  var pointer = 0;
  var value, length, numbersSeen, ipv4Piece, number, swaps, swap;

  var chr = function () {
    return charAt(input, pointer);
  };

  if (chr() === ':') {
    if (charAt(input, 1) !== ':') return;
    pointer += 2;
    pieceIndex++;
    compress = pieceIndex;
  }
  while (chr()) {
    if (pieceIndex === 8) return;
    if (chr() === ':') {
      if (compress !== null) return;
      pointer++;
      pieceIndex++;
      compress = pieceIndex;
      continue;
    }
    value = length = 0;
    while (length < 4 && exec(HEX, chr())) {
      value = value * 16 + parseInt(chr(), 16);
      pointer++;
      length++;
    }
    if (chr() === '.') {
      if (length === 0) return;
      pointer -= length;
      if (pieceIndex > 6) return;
      numbersSeen = 0;
      while (chr()) {
        ipv4Piece = null;
        if (numbersSeen > 0) {
          if (chr() === '.' && numbersSeen < 4) pointer++;
          else return;
        }
        if (!exec(DIGIT, chr())) return;
        while (exec(DIGIT, chr())) {
          number = parseInt(chr(), 10);
          if (ipv4Piece === null) ipv4Piece = number;
          else if (ipv4Piece === 0) return;
          else ipv4Piece = ipv4Piece * 10 + number;
          if (ipv4Piece > 255) return;
          pointer++;
        }
        address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;
        numbersSeen++;
        if (numbersSeen === 2 || numbersSeen === 4) pieceIndex++;
      }
      if (numbersSeen !== 4) return;
      break;
    } else if (chr() === ':') {
      pointer++;
      if (!chr()) return;
    } else if (chr()) return;
    address[pieceIndex++] = value;
  }
  if (compress !== null) {
    swaps = pieceIndex - compress;
    pieceIndex = 7;
    while (pieceIndex !== 0 && swaps > 0) {
      swap = address[pieceIndex];
      address[pieceIndex--] = address[compress + swaps - 1];
      address[compress + --swaps] = swap;
    }
  } else if (pieceIndex !== 8) return;
  return address;
};

var findLongestZeroSequence = function (ipv6) {
  var maxIndex = null;
  var maxLength = 1;
  var currStart = null;
  var currLength = 0;
  var index = 0;
  for (; index < 8; index++) {
    if (ipv6[index] !== 0) {
      if (currLength > maxLength) {
        maxIndex = currStart;
        maxLength = currLength;
      }
      currStart = null;
      currLength = 0;
    } else {
      if (currStart === null) currStart = index;
      ++currLength;
    }
  }
  return currLength > maxLength ? currStart : maxIndex;
};

// https://url.spec.whatwg.org/#host-serializing
var serializeHost = function (host) {
  var result, index, compress, ignore0;

  // ipv4
  if (typeof host == 'number') {
    result = [];
    for (index = 0; index < 4; index++) {
      unshift(result, host % 256);
      host = floor(host / 256);
    }
    return join(result, '.');
  }

  // ipv6
  if (typeof host == 'object') {
    result = '';
    compress = findLongestZeroSequence(host);
    for (index = 0; index < 8; index++) {
      if (ignore0 && host[index] === 0) continue;
      if (ignore0) ignore0 = false;
      if (compress === index) {
        result += index ? ':' : '::';
        ignore0 = true;
      } else {
        result += numberToString(host[index], 16);
        if (index < 7) result += ':';
      }
    }
    return '[' + result + ']';
  }

  return host;
};

var C0ControlPercentEncodeSet = {};
var fragmentPercentEncodeSet = assign({}, C0ControlPercentEncodeSet, {
  ' ': 1, '"': 1, '<': 1, '>': 1, '`': 1
});
var pathPercentEncodeSet = assign({}, fragmentPercentEncodeSet, {
  '#': 1, '?': 1, '{': 1, '}': 1
});
var userinfoPercentEncodeSet = assign({}, pathPercentEncodeSet, {
  '/': 1, ':': 1, ';': 1, '=': 1, '@': 1, '[': 1, '\\': 1, ']': 1, '^': 1, '|': 1
});

var percentEncode = function (chr, set) {
  var code = codeAt(chr, 0);
  return code > 0x20 && code < 0x7F && !hasOwn(set, chr) ? chr : encodeURIComponent(chr);
};

// https://url.spec.whatwg.org/#special-scheme
var specialSchemes = {
  ftp: 21,
  file: null,
  http: 80,
  https: 443,
  ws: 80,
  wss: 443
};

// https://url.spec.whatwg.org/#windows-drive-letter
var isWindowsDriveLetter = function (string, normalized) {
  var second;
  return string.length === 2 && exec(ALPHA, charAt(string, 0))
    && ((second = charAt(string, 1)) === ':' || (!normalized && second === '|'));
};

// https://url.spec.whatwg.org/#start-with-a-windows-drive-letter
var startsWithWindowsDriveLetter = function (string) {
  var third;
  return string.length > 1 && isWindowsDriveLetter(stringSlice(string, 0, 2)) && (
    string.length === 2 ||
    ((third = charAt(string, 2)) === '/' || third === '\\' || third === '?' || third === '#')
  );
};

// https://url.spec.whatwg.org/#single-dot-path-segment
var isSingleDot = function (segment) {
  return segment === '.' || toLowerCase(segment) === '%2e';
};

// https://url.spec.whatwg.org/#double-dot-path-segment
var isDoubleDot = function (segment) {
  segment = toLowerCase(segment);
  return segment === '..' || segment === '%2e.' || segment === '.%2e' || segment === '%2e%2e';
};

// States:
var SCHEME_START = {};
var SCHEME = {};
var NO_SCHEME = {};
var SPECIAL_RELATIVE_OR_AUTHORITY = {};
var PATH_OR_AUTHORITY = {};
var RELATIVE = {};
var RELATIVE_SLASH = {};
var SPECIAL_AUTHORITY_SLASHES = {};
var SPECIAL_AUTHORITY_IGNORE_SLASHES = {};
var AUTHORITY = {};
var HOST = {};
var HOSTNAME = {};
var PORT = {};
var FILE = {};
var FILE_SLASH = {};
var FILE_HOST = {};
var PATH_START = {};
var PATH = {};
var CANNOT_BE_A_BASE_URL_PATH = {};
var QUERY = {};
var FRAGMENT = {};

var URLState = function (url, isBase, base) {
  var urlString = $toString(url);
  var baseState, failure, searchParams;
  if (isBase) {
    failure = this.parse(urlString);
    if (failure) throw new TypeError(failure);
    this.searchParams = null;
  } else {
    if (base !== undefined) baseState = new URLState(base, true);
    failure = this.parse(urlString, null, baseState);
    if (failure) throw new TypeError(failure);
    searchParams = getInternalSearchParamsState(new URLSearchParams());
    searchParams.bindURL(this);
    this.searchParams = searchParams;
  }
};

URLState.prototype = {
  type: 'URL',
  // https://url.spec.whatwg.org/#url-parsing
  // eslint-disable-next-line max-statements -- TODO
  parse: function (input, stateOverride, base) {
    var url = this;
    var state = stateOverride || SCHEME_START;
    var pointer = 0;
    var buffer = '';
    var seenAt = false;
    var seenBracket = false;
    var seenPasswordToken = false;
    var codePoints, chr, bufferCodePoints, failure;

    input = $toString(input);

    if (!stateOverride) {
      url.scheme = '';
      url.username = '';
      url.password = '';
      url.host = null;
      url.port = null;
      url.path = [];
      url.query = null;
      url.fragment = null;
      url.cannotBeABaseURL = false;
      input = replace(input, LEADING_C0_CONTROL_OR_SPACE, '');
      input = replace(input, TRAILING_C0_CONTROL_OR_SPACE, '$1');
    }

    input = replace(input, TAB_AND_NEW_LINE, '');

    codePoints = arrayFrom(input);

    while (pointer <= codePoints.length) {
      chr = codePoints[pointer];
      switch (state) {
        case SCHEME_START:
          if (chr && exec(ALPHA, chr)) {
            buffer += toLowerCase(chr);
            state = SCHEME;
          } else if (!stateOverride) {
            state = NO_SCHEME;
            continue;
          } else return INVALID_SCHEME;
          break;

        case SCHEME:
          if (chr && (exec(ALPHANUMERIC, chr) || chr === '+' || chr === '-' || chr === '.')) {
            buffer += toLowerCase(chr);
          } else if (chr === ':') {
            if (stateOverride && (
              (url.isSpecial() !== hasOwn(specialSchemes, buffer)) ||
              (buffer === 'file' && (url.includesCredentials() || url.port !== null)) ||
              (url.scheme === 'file' && !url.host)
            )) return;
            url.scheme = buffer;
            if (stateOverride) {
              if (url.isSpecial() && specialSchemes[url.scheme] === url.port) url.port = null;
              return;
            }
            buffer = '';
            if (url.scheme === 'file') {
              state = FILE;
            } else if (url.isSpecial() && base && base.scheme === url.scheme) {
              state = SPECIAL_RELATIVE_OR_AUTHORITY;
            } else if (url.isSpecial()) {
              state = SPECIAL_AUTHORITY_SLASHES;
            } else if (codePoints[pointer + 1] === '/') {
              state = PATH_OR_AUTHORITY;
              pointer++;
            } else {
              url.cannotBeABaseURL = true;
              push(url.path, '');
              state = CANNOT_BE_A_BASE_URL_PATH;
            }
          } else if (!stateOverride) {
            buffer = '';
            state = NO_SCHEME;
            pointer = 0;
            continue;
          } else return INVALID_SCHEME;
          break;

        case NO_SCHEME:
          if (!base || (base.cannotBeABaseURL && chr !== '#')) return INVALID_SCHEME;
          if (base.cannotBeABaseURL && chr === '#') {
            url.scheme = base.scheme;
            url.path = arraySlice(base.path);
            url.query = base.query;
            url.fragment = '';
            url.cannotBeABaseURL = true;
            state = FRAGMENT;
            break;
          }
          state = base.scheme === 'file' ? FILE : RELATIVE;
          continue;

        case SPECIAL_RELATIVE_OR_AUTHORITY:
          if (chr === '/' && codePoints[pointer + 1] === '/') {
            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
            pointer++;
          } else {
            state = RELATIVE;
            continue;
          } break;

        case PATH_OR_AUTHORITY:
          if (chr === '/') {
            state = AUTHORITY;
            break;
          } else {
            state = PATH;
            continue;
          }

        case RELATIVE:
          url.scheme = base.scheme;
          if (chr === EOF) {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.query = base.query;
          } else if (chr === '/' || (chr === '\\' && url.isSpecial())) {
            state = RELATIVE_SLASH;
          } else if (chr === '?') {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.query = '';
            state = QUERY;
          } else if (chr === '#') {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.query = base.query;
            url.fragment = '';
            state = FRAGMENT;
          } else {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            url.path = arraySlice(base.path);
            url.path.length--;
            state = PATH;
            continue;
          } break;

        case RELATIVE_SLASH:
          if (url.isSpecial() && (chr === '/' || chr === '\\')) {
            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
          } else if (chr === '/') {
            state = AUTHORITY;
          } else {
            url.username = base.username;
            url.password = base.password;
            url.host = base.host;
            url.port = base.port;
            state = PATH;
            continue;
          } break;

        case SPECIAL_AUTHORITY_SLASHES:
          state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
          if (chr !== '/' || charAt(buffer, pointer + 1) !== '/') continue;
          pointer++;
          break;

        case SPECIAL_AUTHORITY_IGNORE_SLASHES:
          if (chr !== '/' && chr !== '\\') {
            state = AUTHORITY;
            continue;
          } break;

        case AUTHORITY:
          if (chr === '@') {
            if (seenAt) buffer = '%40' + buffer;
            seenAt = true;
            bufferCodePoints = arrayFrom(buffer);
            for (var i = 0; i < bufferCodePoints.length; i++) {
              var codePoint = bufferCodePoints[i];
              if (codePoint === ':' && !seenPasswordToken) {
                seenPasswordToken = true;
                continue;
              }
              var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);
              if (seenPasswordToken) url.password += encodedCodePoints;
              else url.username += encodedCodePoints;
            }
            buffer = '';
          } else if (
            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||
            (chr === '\\' && url.isSpecial())
          ) {
            if (seenAt && buffer === '') return INVALID_AUTHORITY;
            pointer -= arrayFrom(buffer).length + 1;
            buffer = '';
            state = HOST;
          } else buffer += chr;
          break;

        case HOST:
        case HOSTNAME:
          if (stateOverride && url.scheme === 'file') {
            state = FILE_HOST;
            continue;
          } else if (chr === ':' && !seenBracket) {
            if (buffer === '') return INVALID_HOST;
            failure = url.parseHost(buffer);
            if (failure) return failure;
            buffer = '';
            state = PORT;
            if (stateOverride === HOSTNAME) return;
          } else if (
            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||
            (chr === '\\' && url.isSpecial())
          ) {
            if (url.isSpecial() && buffer === '') return INVALID_HOST;
            if (stateOverride && buffer === '' && (url.includesCredentials() || url.port !== null)) return;
            failure = url.parseHost(buffer);
            if (failure) return failure;
            buffer = '';
            state = PATH_START;
            if (stateOverride) return;
            continue;
          } else {
            if (chr === '[') seenBracket = true;
            else if (chr === ']') seenBracket = false;
            buffer += chr;
          } break;

        case PORT:
          if (exec(DIGIT, chr)) {
            buffer += chr;
          } else if (
            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||
            (chr === '\\' && url.isSpecial()) ||
            stateOverride
          ) {
            if (buffer !== '') {
              var port = parseInt(buffer, 10);
              if (port > 0xFFFF) return INVALID_PORT;
              url.port = (url.isSpecial() && port === specialSchemes[url.scheme]) ? null : port;
              buffer = '';
            }
            if (stateOverride) return;
            state = PATH_START;
            continue;
          } else return INVALID_PORT;
          break;

        case FILE:
          url.scheme = 'file';
          if (chr === '/' || chr === '\\') state = FILE_SLASH;
          else if (base && base.scheme === 'file') {
            switch (chr) {
              case EOF:
                url.host = base.host;
                url.path = arraySlice(base.path);
                url.query = base.query;
                break;
              case '?':
                url.host = base.host;
                url.path = arraySlice(base.path);
                url.query = '';
                state = QUERY;
                break;
              case '#':
                url.host = base.host;
                url.path = arraySlice(base.path);
                url.query = base.query;
                url.fragment = '';
                state = FRAGMENT;
                break;
              default:
                if (!startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {
                  url.host = base.host;
                  url.path = arraySlice(base.path);
                  url.shortenPath();
                }
                state = PATH;
                continue;
            }
          } else {
            state = PATH;
            continue;
          } break;

        case FILE_SLASH:
          if (chr === '/' || chr === '\\') {
            state = FILE_HOST;
            break;
          }
          if (base && base.scheme === 'file' && !startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {
            if (isWindowsDriveLetter(base.path[0], true)) push(url.path, base.path[0]);
            else url.host = base.host;
          }
          state = PATH;
          continue;

        case FILE_HOST:
          if (chr === EOF || chr === '/' || chr === '\\' || chr === '?' || chr === '#') {
            if (!stateOverride && isWindowsDriveLetter(buffer)) {
              state = PATH;
            } else if (buffer === '') {
              url.host = '';
              if (stateOverride) return;
              state = PATH_START;
            } else {
              failure = url.parseHost(buffer);
              if (failure) return failure;
              if (url.host === 'localhost') url.host = '';
              if (stateOverride) return;
              buffer = '';
              state = PATH_START;
            } continue;
          } else buffer += chr;
          break;

        case PATH_START:
          if (url.isSpecial()) {
            state = PATH;
            if (chr !== '/' && chr !== '\\') continue;
          } else if (!stateOverride && chr === '?') {
            url.query = '';
            state = QUERY;
          } else if (!stateOverride && chr === '#') {
            url.fragment = '';
            state = FRAGMENT;
          } else if (chr !== EOF) {
            state = PATH;
            if (chr !== '/') continue;
          } break;

        case PATH:
          if (
            chr === EOF || chr === '/' ||
            (chr === '\\' && url.isSpecial()) ||
            (!stateOverride && (chr === '?' || chr === '#'))
          ) {
            if (isDoubleDot(buffer)) {
              url.shortenPath();
              if (chr !== '/' && !(chr === '\\' && url.isSpecial())) {
                push(url.path, '');
              }
            } else if (isSingleDot(buffer)) {
              if (chr !== '/' && !(chr === '\\' && url.isSpecial())) {
                push(url.path, '');
              }
            } else {
              if (url.scheme === 'file' && !url.path.length && isWindowsDriveLetter(buffer)) {
                if (url.host) url.host = '';
                buffer = charAt(buffer, 0) + ':'; // normalize windows drive letter
              }
              push(url.path, buffer);
            }
            buffer = '';
            if (url.scheme === 'file' && (chr === EOF || chr === '?' || chr === '#')) {
              while (url.path.length > 1 && url.path[0] === '') {
                shift(url.path);
              }
            }
            if (chr === '?') {
              url.query = '';
              state = QUERY;
            } else if (chr === '#') {
              url.fragment = '';
              state = FRAGMENT;
            }
          } else {
            buffer += percentEncode(chr, pathPercentEncodeSet);
          } break;

        case CANNOT_BE_A_BASE_URL_PATH:
          if (chr === '?') {
            url.query = '';
            state = QUERY;
          } else if (chr === '#') {
            url.fragment = '';
            state = FRAGMENT;
          } else if (chr !== EOF) {
            url.path[0] += percentEncode(chr, C0ControlPercentEncodeSet);
          } break;

        case QUERY:
          if (!stateOverride && chr === '#') {
            url.fragment = '';
            state = FRAGMENT;
          } else if (chr !== EOF) {
            if (chr === "'" && url.isSpecial()) url.query += '%27';
            else if (chr === '#') url.query += '%23';
            else url.query += percentEncode(chr, C0ControlPercentEncodeSet);
          } break;

        case FRAGMENT:
          if (chr !== EOF) url.fragment += percentEncode(chr, fragmentPercentEncodeSet);
          break;
      }

      pointer++;
    }
  },
  // https://url.spec.whatwg.org/#host-parsing
  parseHost: function (input) {
    var result, codePoints, index;
    if (charAt(input, 0) === '[') {
      if (charAt(input, input.length - 1) !== ']') return INVALID_HOST;
      result = parseIPv6(stringSlice(input, 1, -1));
      if (!result) return INVALID_HOST;
      this.host = result;
    // opaque host
    } else if (!this.isSpecial()) {
      if (exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT, input)) return INVALID_HOST;
      result = '';
      codePoints = arrayFrom(input);
      for (index = 0; index < codePoints.length; index++) {
        result += percentEncode(codePoints[index], C0ControlPercentEncodeSet);
      }
      this.host = result;
    } else {
      input = toASCII(input);
      if (exec(FORBIDDEN_HOST_CODE_POINT, input)) return INVALID_HOST;
      result = parseIPv4(input);
      if (result === null) return INVALID_HOST;
      this.host = result;
    }
  },
  // https://url.spec.whatwg.org/#cannot-have-a-username-password-port
  cannotHaveUsernamePasswordPort: function () {
    return !this.host || this.cannotBeABaseURL || this.scheme === 'file';
  },
  // https://url.spec.whatwg.org/#include-credentials
  includesCredentials: function () {
    return this.username !== '' || this.password !== '';
  },
  // https://url.spec.whatwg.org/#is-special
  isSpecial: function () {
    return hasOwn(specialSchemes, this.scheme);
  },
  // https://url.spec.whatwg.org/#shorten-a-urls-path
  shortenPath: function () {
    var path = this.path;
    var pathSize = path.length;
    if (pathSize && (this.scheme !== 'file' || pathSize !== 1 || !isWindowsDriveLetter(path[0], true))) {
      path.length--;
    }
  },
  // https://url.spec.whatwg.org/#concept-url-serializer
  serialize: function () {
    var url = this;
    var scheme = url.scheme;
    var username = url.username;
    var password = url.password;
    var host = url.host;
    var port = url.port;
    var path = url.path;
    var query = url.query;
    var fragment = url.fragment;
    var output = scheme + ':';
    if (host !== null) {
      output += '//';
      if (url.includesCredentials()) {
        output += username + (password ? ':' + password : '') + '@';
      }
      output += serializeHost(host);
      if (port !== null) output += ':' + port;
    } else if (scheme === 'file') output += '//';
    output += url.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';
    if (query !== null) output += '?' + query;
    if (fragment !== null) output += '#' + fragment;
    return output;
  },
  // https://url.spec.whatwg.org/#dom-url-href
  setHref: function (href) {
    var failure = this.parse(href);
    if (failure) throw new TypeError(failure);
    this.searchParams.update();
  },
  // https://url.spec.whatwg.org/#dom-url-origin
  getOrigin: function () {
    var scheme = this.scheme;
    var port = this.port;
    if (scheme === 'blob') try {
      return new URLConstructor(scheme.path[0]).origin;
    } catch (error) {
      return 'null';
    }
    if (scheme === 'file' || !this.isSpecial()) return 'null';
    return scheme + '://' + serializeHost(this.host) + (port !== null ? ':' + port : '');
  },
  // https://url.spec.whatwg.org/#dom-url-protocol
  getProtocol: function () {
    return this.scheme + ':';
  },
  setProtocol: function (protocol) {
    this.parse($toString(protocol) + ':', SCHEME_START);
  },
  // https://url.spec.whatwg.org/#dom-url-username
  getUsername: function () {
    return this.username;
  },
  setUsername: function (username) {
    var codePoints = arrayFrom($toString(username));
    if (this.cannotHaveUsernamePasswordPort()) return;
    this.username = '';
    for (var i = 0; i < codePoints.length; i++) {
      this.username += percentEncode(codePoints[i], userinfoPercentEncodeSet);
    }
  },
  // https://url.spec.whatwg.org/#dom-url-password
  getPassword: function () {
    return this.password;
  },
  setPassword: function (password) {
    var codePoints = arrayFrom($toString(password));
    if (this.cannotHaveUsernamePasswordPort()) return;
    this.password = '';
    for (var i = 0; i < codePoints.length; i++) {
      this.password += percentEncode(codePoints[i], userinfoPercentEncodeSet);
    }
  },
  // https://url.spec.whatwg.org/#dom-url-host
  getHost: function () {
    var host = this.host;
    var port = this.port;
    return host === null ? ''
      : port === null ? serializeHost(host)
      : serializeHost(host) + ':' + port;
  },
  setHost: function (host) {
    if (this.cannotBeABaseURL) return;
    this.parse(host, HOST);
  },
  // https://url.spec.whatwg.org/#dom-url-hostname
  getHostname: function () {
    var host = this.host;
    return host === null ? '' : serializeHost(host);
  },
  setHostname: function (hostname) {
    if (this.cannotBeABaseURL) return;
    this.parse(hostname, HOSTNAME);
  },
  // https://url.spec.whatwg.org/#dom-url-port
  getPort: function () {
    var port = this.port;
    return port === null ? '' : $toString(port);
  },
  setPort: function (port) {
    if (this.cannotHaveUsernamePasswordPort()) return;
    port = $toString(port);
    if (port === '') this.port = null;
    else this.parse(port, PORT);
  },
  // https://url.spec.whatwg.org/#dom-url-pathname
  getPathname: function () {
    var path = this.path;
    return this.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';
  },
  setPathname: function (pathname) {
    if (this.cannotBeABaseURL) return;
    this.path = [];
    this.parse(pathname, PATH_START);
  },
  // https://url.spec.whatwg.org/#dom-url-search
  getSearch: function () {
    var query = this.query;
    return query ? '?' + query : '';
  },
  setSearch: function (search) {
    search = $toString(search);
    if (search === '') {
      this.query = null;
    } else {
      if (charAt(search, 0) === '?') search = stringSlice(search, 1);
      this.query = '';
      this.parse(search, QUERY);
    }
    this.searchParams.update();
  },
  // https://url.spec.whatwg.org/#dom-url-searchparams
  getSearchParams: function () {
    return this.searchParams.facade;
  },
  // https://url.spec.whatwg.org/#dom-url-hash
  getHash: function () {
    var fragment = this.fragment;
    return fragment ? '#' + fragment : '';
  },
  setHash: function (hash) {
    hash = $toString(hash);
    if (hash === '') {
      this.fragment = null;
      return;
    }
    if (charAt(hash, 0) === '#') hash = stringSlice(hash, 1);
    this.fragment = '';
    this.parse(hash, FRAGMENT);
  },
  update: function () {
    this.query = this.searchParams.serialize() || null;
  }
};

// `URL` constructor
// https://url.spec.whatwg.org/#url-class
var URLConstructor = function URL(url /* , base */) {
  var that = anInstance(this, URLPrototype);
  var base = validateArgumentsLength(arguments.length, 1) > 1 ? arguments[1] : undefined;
  var state = setInternalState(that, new URLState(url, false, base));
  if (!DESCRIPTORS) {
    that.href = state.serialize();
    that.origin = state.getOrigin();
    that.protocol = state.getProtocol();
    that.username = state.getUsername();
    that.password = state.getPassword();
    that.host = state.getHost();
    that.hostname = state.getHostname();
    that.port = state.getPort();
    that.pathname = state.getPathname();
    that.search = state.getSearch();
    that.searchParams = state.getSearchParams();
    that.hash = state.getHash();
  }
};

var URLPrototype = URLConstructor.prototype;

var accessorDescriptor = function (getter, setter) {
  return {
    get: function () {
      return getInternalURLState(this)[getter]();
    },
    set: setter && function (value) {
      return getInternalURLState(this)[setter](value);
    },
    configurable: true,
    enumerable: true
  };
};

if (DESCRIPTORS) {
  // `URL.prototype.href` accessors pair
  // https://url.spec.whatwg.org/#dom-url-href
  defineBuiltInAccessor(URLPrototype, 'href', accessorDescriptor('serialize', 'setHref'));
  // `URL.prototype.origin` getter
  // https://url.spec.whatwg.org/#dom-url-origin
  defineBuiltInAccessor(URLPrototype, 'origin', accessorDescriptor('getOrigin'));
  // `URL.prototype.protocol` accessors pair
  // https://url.spec.whatwg.org/#dom-url-protocol
  defineBuiltInAccessor(URLPrototype, 'protocol', accessorDescriptor('getProtocol', 'setProtocol'));
  // `URL.prototype.username` accessors pair
  // https://url.spec.whatwg.org/#dom-url-username
  defineBuiltInAccessor(URLPrototype, 'username', accessorDescriptor('getUsername', 'setUsername'));
  // `URL.prototype.password` accessors pair
  // https://url.spec.whatwg.org/#dom-url-password
  defineBuiltInAccessor(URLPrototype, 'password', accessorDescriptor('getPassword', 'setPassword'));
  // `URL.prototype.host` accessors pair
  // https://url.spec.whatwg.org/#dom-url-host
  defineBuiltInAccessor(URLPrototype, 'host', accessorDescriptor('getHost', 'setHost'));
  // `URL.prototype.hostname` accessors pair
  // https://url.spec.whatwg.org/#dom-url-hostname
  defineBuiltInAccessor(URLPrototype, 'hostname', accessorDescriptor('getHostname', 'setHostname'));
  // `URL.prototype.port` accessors pair
  // https://url.spec.whatwg.org/#dom-url-port
  defineBuiltInAccessor(URLPrototype, 'port', accessorDescriptor('getPort', 'setPort'));
  // `URL.prototype.pathname` accessors pair
  // https://url.spec.whatwg.org/#dom-url-pathname
  defineBuiltInAccessor(URLPrototype, 'pathname', accessorDescriptor('getPathname', 'setPathname'));
  // `URL.prototype.search` accessors pair
  // https://url.spec.whatwg.org/#dom-url-search
  defineBuiltInAccessor(URLPrototype, 'search', accessorDescriptor('getSearch', 'setSearch'));
  // `URL.prototype.searchParams` getter
  // https://url.spec.whatwg.org/#dom-url-searchparams
  defineBuiltInAccessor(URLPrototype, 'searchParams', accessorDescriptor('getSearchParams'));
  // `URL.prototype.hash` accessors pair
  // https://url.spec.whatwg.org/#dom-url-hash
  defineBuiltInAccessor(URLPrototype, 'hash', accessorDescriptor('getHash', 'setHash'));
}

// `URL.prototype.toJSON` method
// https://url.spec.whatwg.org/#dom-url-tojson
defineBuiltIn(URLPrototype, 'toJSON', function toJSON() {
  return getInternalURLState(this).serialize();
}, { enumerable: true });

// `URL.prototype.toString` method
// https://url.spec.whatwg.org/#URL-stringification-behavior
defineBuiltIn(URLPrototype, 'toString', function toString() {
  return getInternalURLState(this).serialize();
}, { enumerable: true });

if (NativeURL) {
  var nativeCreateObjectURL = NativeURL.createObjectURL;
  var nativeRevokeObjectURL = NativeURL.revokeObjectURL;
  // `URL.createObjectURL` method
  // https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL
  if (nativeCreateObjectURL) defineBuiltIn(URLConstructor, 'createObjectURL', bind(nativeCreateObjectURL, NativeURL));
  // `URL.revokeObjectURL` method
  // https://developer.mozilla.org/en-US/docs/Web/API/URL/revokeObjectURL
  if (nativeRevokeObjectURL) defineBuiltIn(URLConstructor, 'revokeObjectURL', bind(nativeRevokeObjectURL, NativeURL));
}

setToStringTag(URLConstructor, 'URL');

$({ global: true, constructor: true, forced: !USE_NATIVE_URL, sham: !DESCRIPTORS }, {
  URL: URLConstructor
});


/***/ }),
/* 149 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var charAt = __webpack_require__(119).charAt;
var toString = __webpack_require__(101);
var InternalStateModule = __webpack_require__(60);
var defineIterator = __webpack_require__(64);
var createIterResultObject = __webpack_require__(86);

var STRING_ITERATOR = 'String Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);

// `String.prototype[@@iterator]` method
// https://tc39.es/ecma262/#sec-string.prototype-@@iterator
defineIterator(String, 'String', function (iterated) {
  setInternalState(this, {
    type: STRING_ITERATOR,
    string: toString(iterated),
    index: 0
  });
// `%StringIteratorPrototype%.next` method
// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next
}, function next() {
  var state = getInternalState(this);
  var string = state.string;
  var index = state.index;
  var point;
  if (index >= string.length) return createIterResultObject(undefined, true);
  point = charAt(string, index);
  state.index += point.length;
  return createIterResultObject(point, false);
});


/***/ }),
/* 150 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(8);
var wellKnownSymbol = __webpack_require__(13);
var DESCRIPTORS = __webpack_require__(32);
var IS_PURE = __webpack_require__(18);

var ITERATOR = wellKnownSymbol('iterator');

module.exports = !fails(function () {
  // eslint-disable-next-line unicorn/relative-url-style -- required for testing
  var url = new URL('b?a=1&b=2&c=3', 'https://a');
  var params = url.searchParams;
  var params2 = new URLSearchParams('a=1&a=2&b=3');
  var result = '';
  url.pathname = 'c%20d';
  params.forEach(function (value, key) {
    params['delete']('b');
    result += key + value;
  });
  params2['delete']('a', 2);
  // `undefined` case is a Chromium 117 bug
  // https://bugs.chromium.org/p/v8/issues/detail?id=14222
  params2['delete']('b', undefined);
  return (IS_PURE && (!url.toJSON || !params2.has('a', 1) || params2.has('a', 2) || !params2.has('a', undefined) || params2.has('b')))
    || (!params.size && (IS_PURE || !DESCRIPTORS))
    || !params.sort
    || url.href !== 'https://a/c%20d?a=1&c=3'
    || params.get('c') !== '3'
    || String(new URLSearchParams('?a=1')) !== 'a=1'
    || !params[ITERATOR]
    // throws in Edge
    || new URL('https://a@b').username !== 'a'
    || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b'
    // not punycoded in Edge
    || new URL('https://тест').host !== 'xn--e1aybc'
    // not escaped in Chrome 62-
    || new URL('https://a#б').hash !== '#%D0%B1'
    // fails in Chrome 66-
    || result !== 'a1c3'
    // throws in Safari
    || new URL('https://x', undefined).host !== 'x';
});


/***/ }),
/* 151 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isPrototypeOf = __webpack_require__(42);

var $TypeError = TypeError;

module.exports = function (it, Prototype) {
  if (isPrototypeOf(Prototype, it)) return it;
  throw new $TypeError('Incorrect invocation');
};


/***/ }),
/* 152 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(32);
var uncurryThis = __webpack_require__(6);
var call = __webpack_require__(39);
var fails = __webpack_require__(8);
var objectKeys = __webpack_require__(47);
var getOwnPropertySymbolsModule = __webpack_require__(75);
var propertyIsEnumerableModule = __webpack_require__(67);
var toObject = __webpack_require__(21);
var IndexedObject = __webpack_require__(5);

// eslint-disable-next-line es/no-object-assign -- safe
var $assign = Object.assign;
// eslint-disable-next-line es/no-object-defineproperty -- required for testing
var defineProperty = Object.defineProperty;
var concat = uncurryThis([].concat);

// `Object.assign` method
// https://tc39.es/ecma262/#sec-object.assign
module.exports = !$assign || fails(function () {
  // should have correct order of operations (Edge bug)
  if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {
    enumerable: true,
    get: function () {
      defineProperty(this, 'b', {
        value: 3,
        enumerable: false
      });
    }
  }), { b: 2 })).b !== 1) return true;
  // should work with symbols and should have deterministic property order (V8 bug)
  var A = {};
  var B = {};
  // eslint-disable-next-line es/no-symbol -- safe
  var symbol = Symbol('assign detection');
  var alphabet = 'abcdefghijklmnopqrst';
  A[symbol] = 7;
  // eslint-disable-next-line es/no-array-prototype-foreach -- safe
  alphabet.split('').forEach(function (chr) { B[chr] = chr; });
  return $assign({}, A)[symbol] !== 7 || objectKeys($assign({}, B)).join('') !== alphabet;
}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`
  var T = toObject(target);
  var argumentsLength = arguments.length;
  var index = 1;
  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  var propertyIsEnumerable = propertyIsEnumerableModule.f;
  while (argumentsLength > index) {
    var S = IndexedObject(arguments[index++]);
    var keys = getOwnPropertySymbols ? concat(objectKeys(S), getOwnPropertySymbols(S)) : objectKeys(S);
    var length = keys.length;
    var j = 0;
    var key;
    while (length > j) {
      key = keys[j++];
      if (!DESCRIPTORS || call(propertyIsEnumerable, S, key)) T[key] = S[key];
    }
  } return T;
} : $assign;


/***/ }),
/* 153 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var bind = __webpack_require__(125);
var call = __webpack_require__(39);
var toObject = __webpack_require__(21);
var callWithSafeIterationClosing = __webpack_require__(154);
var isArrayIteratorMethod = __webpack_require__(127);
var isConstructor = __webpack_require__(155);
var lengthOfArrayLike = __webpack_require__(53);
var createProperty = __webpack_require__(131);
var setArrayLength = __webpack_require__(156);
var getIterator = __webpack_require__(128);
var getIteratorMethod = __webpack_require__(129);

var $Array = Array;

// `Array.from` method implementation
// https://tc39.es/ecma262/#sec-array.from
module.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {
  var O = toObject(arrayLike);
  var IS_CONSTRUCTOR = isConstructor(this);
  var argumentsLength = arguments.length;
  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;
  var mapping = mapfn !== undefined;
  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);
  var iteratorMethod = getIteratorMethod(O);
  var index = 0;
  var length, result, step, iterator, next, value;
  // if the target is not iterable or it's an array with the default iterator - use a simple case
  if (iteratorMethod && !(this === $Array && isArrayIteratorMethod(iteratorMethod))) {
    result = IS_CONSTRUCTOR ? new this() : [];
    iterator = getIterator(O, iteratorMethod);
    next = iterator.next;
    for (;!(step = call(next, iterator)).done; index++) {
      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;
      createProperty(result, index, value);
    }
  } else {
    length = lengthOfArrayLike(O);
    result = IS_CONSTRUCTOR ? new this(length) : $Array(length);
    for (;length > index; index++) {
      value = mapping ? mapfn(O[index], index) : O[index];
      createProperty(result, index, value);
    }
  }
  setArrayLength(result, index);
  return result;
};


/***/ }),
/* 154 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__(28);
var iteratorClose = __webpack_require__(130);

// call something on iterator step with safe closing on error
module.exports = function (iterator, fn, value, ENTRIES) {
  try {
    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);
  } catch (error) {
    iteratorClose(iterator, 'throw', error);
  }
};


/***/ }),
/* 155 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);
var fails = __webpack_require__(8);
var isCallable = __webpack_require__(30);
var classof = __webpack_require__(102);
var getBuiltIn = __webpack_require__(41);
var inspectSource = __webpack_require__(71);

var noop = function () { /* empty */ };
var construct = getBuiltIn('Reflect', 'construct');
var constructorRegExp = /^\s*(?:class|function)\b/;
var exec = uncurryThis(constructorRegExp.exec);
var INCORRECT_TO_STRING = !constructorRegExp.test(noop);

var isConstructorModern = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  try {
    construct(noop, [], argument);
    return true;
  } catch (error) {
    return false;
  }
};

var isConstructorLegacy = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  switch (classof(argument)) {
    case 'AsyncFunction':
    case 'GeneratorFunction':
    case 'AsyncGeneratorFunction': return false;
  }
  try {
    // we can't check .prototype since constructors produced by .bind haven't it
    // `Function#toString` throws on some built-it function in some legacy engines
    // (for example, `DOMQuad` and similar in FF41-)
    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));
  } catch (error) {
    return true;
  }
};

isConstructorLegacy.sham = true;

// `IsConstructor` abstract operation
// https://tc39.es/ecma262/#sec-isconstructor
module.exports = !construct || fails(function () {
  var called;
  return isConstructorModern(isConstructorModern.call)
    || !isConstructorModern(Object)
    || !isConstructorModern(function () { called = true; })
    || called;
}) ? isConstructorLegacy : isConstructorModern;


/***/ }),
/* 156 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(32);
var isArray = __webpack_require__(157);

var $TypeError = TypeError;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// Safari < 13 does not throw an error in this case
var SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {
  // makes no sense without proper strict mode support
  if (this !== undefined) return true;
  try {
    // eslint-disable-next-line es/no-object-defineproperty -- safe
    Object.defineProperty([], 'length', { writable: false }).length = 1;
  } catch (error) {
    return error instanceof TypeError;
  }
}();

module.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {
  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {
    throw new $TypeError('Cannot set read only .length');
  } return O.length = length;
} : function (O, length) {
  return O.length = length;
};


/***/ }),
/* 157 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var classof = __webpack_require__(9);

// `IsArray` abstract operation
// https://tc39.es/ecma262/#sec-isarray
// eslint-disable-next-line es/no-array-isarray -- safe
module.exports = Array.isArray || function isArray(argument) {
  return classof(argument) === 'Array';
};


/***/ }),
/* 158 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);

module.exports = uncurryThis([].slice);


/***/ }),
/* 159 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// based on https://github.com/bestiejs/punycode.js/blob/master/punycode.js
var uncurryThis = __webpack_require__(6);

var maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1
var base = 36;
var tMin = 1;
var tMax = 26;
var skew = 38;
var damp = 700;
var initialBias = 72;
var initialN = 128; // 0x80
var delimiter = '-'; // '\x2D'
var regexNonASCII = /[^\0-\u007E]/; // non-ASCII chars
var regexSeparators = /[.\u3002\uFF0E\uFF61]/g; // RFC 3490 separators
var OVERFLOW_ERROR = 'Overflow: input needs wider integers to process';
var baseMinusTMin = base - tMin;

var $RangeError = RangeError;
var exec = uncurryThis(regexSeparators.exec);
var floor = Math.floor;
var fromCharCode = String.fromCharCode;
var charCodeAt = uncurryThis(''.charCodeAt);
var join = uncurryThis([].join);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var split = uncurryThis(''.split);
var toLowerCase = uncurryThis(''.toLowerCase);

/**
 * Creates an array containing the numeric code points of each Unicode
 * character in the string. While JavaScript uses UCS-2 internally,
 * this function will convert a pair of surrogate halves (each of which
 * UCS-2 exposes as separate characters) into a single code point,
 * matching UTF-16.
 */
var ucs2decode = function (string) {
  var output = [];
  var counter = 0;
  var length = string.length;
  while (counter < length) {
    var value = charCodeAt(string, counter++);
    if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
      // It's a high surrogate, and there is a next character.
      var extra = charCodeAt(string, counter++);
      if ((extra & 0xFC00) === 0xDC00) { // Low surrogate.
        push(output, ((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
      } else {
        // It's an unmatched surrogate; only append this code unit, in case the
        // next code unit is the high surrogate of a surrogate pair.
        push(output, value);
        counter--;
      }
    } else {
      push(output, value);
    }
  }
  return output;
};

/**
 * Converts a digit/integer into a basic code point.
 */
var digitToBasic = function (digit) {
  //  0..25 map to ASCII a..z or A..Z
  // 26..35 map to ASCII 0..9
  return digit + 22 + 75 * (digit < 26);
};

/**
 * Bias adaptation function as per section 3.4 of RFC 3492.
 * https://tools.ietf.org/html/rfc3492#section-3.4
 */
var adapt = function (delta, numPoints, firstTime) {
  var k = 0;
  delta = firstTime ? floor(delta / damp) : delta >> 1;
  delta += floor(delta / numPoints);
  while (delta > baseMinusTMin * tMax >> 1) {
    delta = floor(delta / baseMinusTMin);
    k += base;
  }
  return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
};

/**
 * Converts a string of Unicode symbols (e.g. a domain name label) to a
 * Punycode string of ASCII-only symbols.
 */
var encode = function (input) {
  var output = [];

  // Convert the input in UCS-2 to an array of Unicode code points.
  input = ucs2decode(input);

  // Cache the length.
  var inputLength = input.length;

  // Initialize the state.
  var n = initialN;
  var delta = 0;
  var bias = initialBias;
  var i, currentValue;

  // Handle the basic code points.
  for (i = 0; i < input.length; i++) {
    currentValue = input[i];
    if (currentValue < 0x80) {
      push(output, fromCharCode(currentValue));
    }
  }

  var basicLength = output.length; // number of basic code points.
  var handledCPCount = basicLength; // number of code points that have been handled;

  // Finish the basic string with a delimiter unless it's empty.
  if (basicLength) {
    push(output, delimiter);
  }

  // Main encoding loop:
  while (handledCPCount < inputLength) {
    // All non-basic code points < n have been handled already. Find the next larger one:
    var m = maxInt;
    for (i = 0; i < input.length; i++) {
      currentValue = input[i];
      if (currentValue >= n && currentValue < m) {
        m = currentValue;
      }
    }

    // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>, but guard against overflow.
    var handledCPCountPlusOne = handledCPCount + 1;
    if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
      throw new $RangeError(OVERFLOW_ERROR);
    }

    delta += (m - n) * handledCPCountPlusOne;
    n = m;

    for (i = 0; i < input.length; i++) {
      currentValue = input[i];
      if (currentValue < n && ++delta > maxInt) {
        throw new $RangeError(OVERFLOW_ERROR);
      }
      if (currentValue === n) {
        // Represent delta as a generalized variable-length integer.
        var q = delta;
        var k = base;
        while (true) {
          var t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;
          if (q < t) break;
          var qMinusT = q - t;
          var baseMinusT = base - t;
          push(output, fromCharCode(digitToBasic(t + qMinusT % baseMinusT)));
          q = floor(qMinusT / baseMinusT);
          k += base;
        }

        push(output, fromCharCode(digitToBasic(q)));
        bias = adapt(delta, handledCPCountPlusOne, handledCPCount === basicLength);
        delta = 0;
        handledCPCount++;
      }
    }

    delta++;
    n++;
  }
  return join(output, '');
};

module.exports = function (input) {
  var encoded = [];
  var labels = split(replace(toLowerCase(input), regexSeparators, '\u002E'), '.');
  var i, label;
  for (i = 0; i < labels.length; i++) {
    label = labels[i];
    push(encoded, exec(regexNonASCII, label) ? 'xn--' + encode(label) : label);
  }
  return join(encoded, '.');
};


/***/ }),
/* 160 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $TypeError = TypeError;

module.exports = function (passed, required) {
  if (passed < required) throw new $TypeError('Not enough arguments');
  return passed;
};


/***/ }),
/* 161 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`
__webpack_require__(3);
__webpack_require__(162);
var $ = __webpack_require__(65);
var globalThis = __webpack_require__(14);
var safeGetBuiltIn = __webpack_require__(163);
var getBuiltIn = __webpack_require__(41);
var call = __webpack_require__(39);
var uncurryThis = __webpack_require__(6);
var DESCRIPTORS = __webpack_require__(32);
var USE_NATIVE_URL = __webpack_require__(150);
var defineBuiltIn = __webpack_require__(68);
var defineBuiltInAccessor = __webpack_require__(110);
var defineBuiltIns = __webpack_require__(164);
var setToStringTag = __webpack_require__(81);
var createIteratorConstructor = __webpack_require__(77);
var InternalStateModule = __webpack_require__(60);
var anInstance = __webpack_require__(151);
var isCallable = __webpack_require__(30);
var hasOwn = __webpack_require__(20);
var bind = __webpack_require__(125);
var classof = __webpack_require__(102);
var anObject = __webpack_require__(28);
var isObject = __webpack_require__(29);
var $toString = __webpack_require__(101);
var create = __webpack_require__(27);
var createPropertyDescriptor = __webpack_require__(63);
var getIterator = __webpack_require__(128);
var getIteratorMethod = __webpack_require__(129);
var createIterResultObject = __webpack_require__(86);
var validateArgumentsLength = __webpack_require__(160);
var wellKnownSymbol = __webpack_require__(13);
var arraySort = __webpack_require__(165);

var ITERATOR = wellKnownSymbol('iterator');
var URL_SEARCH_PARAMS = 'URLSearchParams';
var URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + 'Iterator';
var setInternalState = InternalStateModule.set;
var getInternalParamsState = InternalStateModule.getterFor(URL_SEARCH_PARAMS);
var getInternalIteratorState = InternalStateModule.getterFor(URL_SEARCH_PARAMS_ITERATOR);

var nativeFetch = safeGetBuiltIn('fetch');
var NativeRequest = safeGetBuiltIn('Request');
var Headers = safeGetBuiltIn('Headers');
var RequestPrototype = NativeRequest && NativeRequest.prototype;
var HeadersPrototype = Headers && Headers.prototype;
var TypeError = globalThis.TypeError;
var encodeURIComponent = globalThis.encodeURIComponent;
var fromCharCode = String.fromCharCode;
var fromCodePoint = getBuiltIn('String', 'fromCodePoint');
var $parseInt = parseInt;
var charAt = uncurryThis(''.charAt);
var join = uncurryThis([].join);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var shift = uncurryThis([].shift);
var splice = uncurryThis([].splice);
var split = uncurryThis(''.split);
var stringSlice = uncurryThis(''.slice);
var exec = uncurryThis(/./.exec);

var plus = /\+/g;
var FALLBACK_REPLACER = '\uFFFD';
var VALID_HEX = /^[0-9a-f]+$/i;

var parseHexOctet = function (string, start) {
  var substr = stringSlice(string, start, start + 2);
  if (!exec(VALID_HEX, substr)) return NaN;

  return $parseInt(substr, 16);
};

var getLeadingOnes = function (octet) {
  var count = 0;
  for (var mask = 0x80; mask > 0 && (octet & mask) !== 0; mask >>= 1) {
    count++;
  }
  return count;
};

var utf8Decode = function (octets) {
  var codePoint = null;

  switch (octets.length) {
    case 1:
      codePoint = octets[0];
      break;
    case 2:
      codePoint = (octets[0] & 0x1F) << 6 | (octets[1] & 0x3F);
      break;
    case 3:
      codePoint = (octets[0] & 0x0F) << 12 | (octets[1] & 0x3F) << 6 | (octets[2] & 0x3F);
      break;
    case 4:
      codePoint = (octets[0] & 0x07) << 18 | (octets[1] & 0x3F) << 12 | (octets[2] & 0x3F) << 6 | (octets[3] & 0x3F);
      break;
  }

  return codePoint > 0x10FFFF ? null : codePoint;
};

var decode = function (input) {
  input = replace(input, plus, ' ');
  var length = input.length;
  var result = '';
  var i = 0;

  while (i < length) {
    var decodedChar = charAt(input, i);

    if (decodedChar === '%') {
      if (charAt(input, i + 1) === '%' || i + 3 > length) {
        result += '%';
        i++;
        continue;
      }

      var octet = parseHexOctet(input, i + 1);

      // eslint-disable-next-line no-self-compare -- NaN check
      if (octet !== octet) {
        result += decodedChar;
        i++;
        continue;
      }

      i += 2;
      var byteSequenceLength = getLeadingOnes(octet);

      if (byteSequenceLength === 0) {
        decodedChar = fromCharCode(octet);
      } else {
        if (byteSequenceLength === 1 || byteSequenceLength > 4) {
          result += FALLBACK_REPLACER;
          i++;
          continue;
        }

        var octets = [octet];
        var sequenceIndex = 1;

        while (sequenceIndex < byteSequenceLength) {
          i++;
          if (i + 3 > length || charAt(input, i) !== '%') break;

          var nextByte = parseHexOctet(input, i + 1);

          // eslint-disable-next-line no-self-compare -- NaN check
          if (nextByte !== nextByte) {
            i += 3;
            break;
          }
          if (nextByte > 191 || nextByte < 128) break;

          push(octets, nextByte);
          i += 2;
          sequenceIndex++;
        }

        if (octets.length !== byteSequenceLength) {
          result += FALLBACK_REPLACER;
          continue;
        }

        var codePoint = utf8Decode(octets);
        if (codePoint === null) {
          result += FALLBACK_REPLACER;
        } else {
          decodedChar = fromCodePoint(codePoint);
        }
      }
    }

    result += decodedChar;
    i++;
  }

  return result;
};

var find = /[!'()~]|%20/g;

var replacements = {
  '!': '%21',
  "'": '%27',
  '(': '%28',
  ')': '%29',
  '~': '%7E',
  '%20': '+'
};

var replacer = function (match) {
  return replacements[match];
};

var serialize = function (it) {
  return replace(encodeURIComponent(it), find, replacer);
};

var URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {
  setInternalState(this, {
    type: URL_SEARCH_PARAMS_ITERATOR,
    target: getInternalParamsState(params).entries,
    index: 0,
    kind: kind
  });
}, URL_SEARCH_PARAMS, function next() {
  var state = getInternalIteratorState(this);
  var target = state.target;
  var index = state.index++;
  if (!target || index >= target.length) {
    state.target = null;
    return createIterResultObject(undefined, true);
  }
  var entry = target[index];
  switch (state.kind) {
    case 'keys': return createIterResultObject(entry.key, false);
    case 'values': return createIterResultObject(entry.value, false);
  } return createIterResultObject([entry.key, entry.value], false);
}, true);

var URLSearchParamsState = function (init) {
  this.entries = [];
  this.url = null;

  if (init !== undefined) {
    if (isObject(init)) this.parseObject(init);
    else this.parseQuery(typeof init == 'string' ? charAt(init, 0) === '?' ? stringSlice(init, 1) : init : $toString(init));
  }
};

URLSearchParamsState.prototype = {
  type: URL_SEARCH_PARAMS,
  bindURL: function (url) {
    this.url = url;
    this.update();
  },
  parseObject: function (object) {
    var entries = this.entries;
    var iteratorMethod = getIteratorMethod(object);
    var iterator, next, step, entryIterator, entryNext, first, second;

    if (iteratorMethod) {
      iterator = getIterator(object, iteratorMethod);
      next = iterator.next;
      while (!(step = call(next, iterator)).done) {
        entryIterator = getIterator(anObject(step.value));
        entryNext = entryIterator.next;
        if (
          (first = call(entryNext, entryIterator)).done ||
          (second = call(entryNext, entryIterator)).done ||
          !call(entryNext, entryIterator).done
        ) throw new TypeError('Expected sequence with length 2');
        push(entries, { key: $toString(first.value), value: $toString(second.value) });
      }
    } else for (var key in object) if (hasOwn(object, key)) {
      push(entries, { key: key, value: $toString(object[key]) });
    }
  },
  parseQuery: function (query) {
    if (query) {
      var entries = this.entries;
      var attributes = split(query, '&');
      var index = 0;
      var attribute, entry;
      while (index < attributes.length) {
        attribute = attributes[index++];
        if (attribute.length) {
          entry = split(attribute, '=');
          push(entries, {
            key: decode(shift(entry)),
            value: decode(join(entry, '='))
          });
        }
      }
    }
  },
  serialize: function () {
    var entries = this.entries;
    var result = [];
    var index = 0;
    var entry;
    while (index < entries.length) {
      entry = entries[index++];
      push(result, serialize(entry.key) + '=' + serialize(entry.value));
    } return join(result, '&');
  },
  update: function () {
    this.entries.length = 0;
    this.parseQuery(this.url.query);
  },
  updateURL: function () {
    if (this.url) this.url.update();
  }
};

// `URLSearchParams` constructor
// https://url.spec.whatwg.org/#interface-urlsearchparams
var URLSearchParamsConstructor = function URLSearchParams(/* init */) {
  anInstance(this, URLSearchParamsPrototype);
  var init = arguments.length > 0 ? arguments[0] : undefined;
  var state = setInternalState(this, new URLSearchParamsState(init));
  if (!DESCRIPTORS) this.size = state.entries.length;
};

var URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;

defineBuiltIns(URLSearchParamsPrototype, {
  // `URLSearchParams.prototype.append` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-append
  append: function append(name, value) {
    var state = getInternalParamsState(this);
    validateArgumentsLength(arguments.length, 2);
    push(state.entries, { key: $toString(name), value: $toString(value) });
    if (!DESCRIPTORS) this.size++;
    state.updateURL();
  },
  // `URLSearchParams.prototype.delete` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-delete
  'delete': function (name /* , value */) {
    var state = getInternalParamsState(this);
    var length = validateArgumentsLength(arguments.length, 1);
    var entries = state.entries;
    var key = $toString(name);
    var $value = length < 2 ? undefined : arguments[1];
    var value = $value === undefined ? $value : $toString($value);
    var index = 0;
    while (index < entries.length) {
      var entry = entries[index];
      if (entry.key === key && (value === undefined || entry.value === value)) {
        splice(entries, index, 1);
        if (value !== undefined) break;
      } else index++;
    }
    if (!DESCRIPTORS) this.size = entries.length;
    state.updateURL();
  },
  // `URLSearchParams.prototype.get` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-get
  get: function get(name) {
    var entries = getInternalParamsState(this).entries;
    validateArgumentsLength(arguments.length, 1);
    var key = $toString(name);
    var index = 0;
    for (; index < entries.length; index++) {
      if (entries[index].key === key) return entries[index].value;
    }
    return null;
  },
  // `URLSearchParams.prototype.getAll` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-getall
  getAll: function getAll(name) {
    var entries = getInternalParamsState(this).entries;
    validateArgumentsLength(arguments.length, 1);
    var key = $toString(name);
    var result = [];
    var index = 0;
    for (; index < entries.length; index++) {
      if (entries[index].key === key) push(result, entries[index].value);
    }
    return result;
  },
  // `URLSearchParams.prototype.has` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-has
  has: function has(name /* , value */) {
    var entries = getInternalParamsState(this).entries;
    var length = validateArgumentsLength(arguments.length, 1);
    var key = $toString(name);
    var $value = length < 2 ? undefined : arguments[1];
    var value = $value === undefined ? $value : $toString($value);
    var index = 0;
    while (index < entries.length) {
      var entry = entries[index++];
      if (entry.key === key && (value === undefined || entry.value === value)) return true;
    }
    return false;
  },
  // `URLSearchParams.prototype.set` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-set
  set: function set(name, value) {
    var state = getInternalParamsState(this);
    validateArgumentsLength(arguments.length, 1);
    var entries = state.entries;
    var found = false;
    var key = $toString(name);
    var val = $toString(value);
    var index = 0;
    var entry;
    for (; index < entries.length; index++) {
      entry = entries[index];
      if (entry.key === key) {
        if (found) splice(entries, index--, 1);
        else {
          found = true;
          entry.value = val;
        }
      }
    }
    if (!found) push(entries, { key: key, value: val });
    if (!DESCRIPTORS) this.size = entries.length;
    state.updateURL();
  },
  // `URLSearchParams.prototype.sort` method
  // https://url.spec.whatwg.org/#dom-urlsearchparams-sort
  sort: function sort() {
    var state = getInternalParamsState(this);
    arraySort(state.entries, function (a, b) {
      return a.key > b.key ? 1 : -1;
    });
    state.updateURL();
  },
  // `URLSearchParams.prototype.forEach` method
  forEach: function forEach(callback /* , thisArg */) {
    var entries = getInternalParamsState(this).entries;
    var boundFunction = bind(callback, arguments.length > 1 ? arguments[1] : undefined);
    var index = 0;
    var entry;
    while (index < entries.length) {
      entry = entries[index++];
      boundFunction(entry.value, entry.key, this);
    }
  },
  // `URLSearchParams.prototype.keys` method
  keys: function keys() {
    return new URLSearchParamsIterator(this, 'keys');
  },
  // `URLSearchParams.prototype.values` method
  values: function values() {
    return new URLSearchParamsIterator(this, 'values');
  },
  // `URLSearchParams.prototype.entries` method
  entries: function entries() {
    return new URLSearchParamsIterator(this, 'entries');
  }
}, { enumerable: true });

// `URLSearchParams.prototype[@@iterator]` method
defineBuiltIn(URLSearchParamsPrototype, ITERATOR, URLSearchParamsPrototype.entries, { name: 'entries' });

// `URLSearchParams.prototype.toString` method
// https://url.spec.whatwg.org/#urlsearchparams-stringification-behavior
defineBuiltIn(URLSearchParamsPrototype, 'toString', function toString() {
  return getInternalParamsState(this).serialize();
}, { enumerable: true });

// `URLSearchParams.prototype.size` getter
// https://github.com/whatwg/url/pull/734
if (DESCRIPTORS) defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {
  get: function size() {
    return getInternalParamsState(this).entries.length;
  },
  configurable: true,
  enumerable: true
});

setToStringTag(URLSearchParamsConstructor, URL_SEARCH_PARAMS);

$({ global: true, constructor: true, forced: !USE_NATIVE_URL }, {
  URLSearchParams: URLSearchParamsConstructor
});

// Wrap `fetch` and `Request` for correct work with polyfilled `URLSearchParams`
if (!USE_NATIVE_URL && isCallable(Headers)) {
  var headersHas = uncurryThis(HeadersPrototype.has);
  var headersSet = uncurryThis(HeadersPrototype.set);

  var wrapRequestOptions = function (init) {
    if (isObject(init)) {
      var body = init.body;
      var headers;
      if (classof(body) === URL_SEARCH_PARAMS) {
        headers = init.headers ? new Headers(init.headers) : new Headers();
        if (!headersHas(headers, 'content-type')) {
          headersSet(headers, 'content-type', 'application/x-www-form-urlencoded;charset=UTF-8');
        }
        return create(init, {
          body: createPropertyDescriptor(0, $toString(body)),
          headers: createPropertyDescriptor(0, headers)
        });
      }
    } return init;
  };

  if (isCallable(nativeFetch)) {
    $({ global: true, enumerable: true, dontCallGetSet: true, forced: true }, {
      fetch: function fetch(input /* , init */) {
        return nativeFetch(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
      }
    });
  }

  if (isCallable(NativeRequest)) {
    var RequestConstructor = function Request(input /* , init */) {
      anInstance(this, RequestPrototype);
      return new NativeRequest(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
    };

    RequestPrototype.constructor = RequestConstructor;
    RequestConstructor.prototype = RequestPrototype;

    $({ global: true, constructor: true, dontCallGetSet: true, forced: true }, {
      Request: RequestConstructor
    });
  }
}

module.exports = {
  URLSearchParams: URLSearchParamsConstructor,
  getState: getInternalParamsState
};


/***/ }),
/* 162 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(65);
var uncurryThis = __webpack_require__(6);
var toAbsoluteIndex = __webpack_require__(50);

var $RangeError = RangeError;
var fromCharCode = String.fromCharCode;
// eslint-disable-next-line es/no-string-fromcodepoint -- required for testing
var $fromCodePoint = String.fromCodePoint;
var join = uncurryThis([].join);

// length should be 1, old FF problem
var INCORRECT_LENGTH = !!$fromCodePoint && $fromCodePoint.length !== 1;

// `String.fromCodePoint` method
// https://tc39.es/ecma262/#sec-string.fromcodepoint
$({ target: 'String', stat: true, arity: 1, forced: INCORRECT_LENGTH }, {
  // eslint-disable-next-line no-unused-vars -- required for `.length`
  fromCodePoint: function fromCodePoint(x) {
    var elements = [];
    var length = arguments.length;
    var i = 0;
    var code;
    while (length > i) {
      code = +arguments[i++];
      if (toAbsoluteIndex(code, 0x10FFFF) !== code) throw new $RangeError(code + ' is not a valid code point');
      elements[i] = code < 0x10000
        ? fromCharCode(code)
        : fromCharCode(((code -= 0x10000) >> 10) + 0xD800, code % 0x400 + 0xDC00);
    } return join(elements, '');
  }
});


/***/ }),
/* 163 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);
var DESCRIPTORS = __webpack_require__(32);

// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// Avoid NodeJS experimental warning
module.exports = function (name) {
  if (!DESCRIPTORS) return globalThis[name];
  var descriptor = getOwnPropertyDescriptor(globalThis, name);
  return descriptor && descriptor.value;
};


/***/ }),
/* 164 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var defineBuiltIn = __webpack_require__(68);

module.exports = function (target, src, options) {
  for (var key in src) defineBuiltIn(target, key, src[key], options);
  return target;
};


/***/ }),
/* 165 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var arraySlice = __webpack_require__(158);

var floor = Math.floor;

var sort = function (array, comparefn) {
  var length = array.length;

  if (length < 8) {
    // insertion sort
    var i = 1;
    var element, j;

    while (i < length) {
      j = i;
      element = array[i];
      while (j && comparefn(array[j - 1], element) > 0) {
        array[j] = array[--j];
      }
      if (j !== i++) array[j] = element;
    }
  } else {
    // merge sort
    var middle = floor(length / 2);
    var left = sort(arraySlice(array, 0, middle), comparefn);
    var right = sort(arraySlice(array, middle), comparefn);
    var llength = left.length;
    var rlength = right.length;
    var lindex = 0;
    var rindex = 0;

    while (lindex < llength || rindex < rlength) {
      array[lindex + rindex] = (lindex < llength && rindex < rlength)
        ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]
        : lindex < llength ? left[lindex++] : right[rindex++];
    }
  }

  return array;
};

module.exports = sort;


/***/ }),
/* 166 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(65);
var call = __webpack_require__(39);

// `URL.prototype.toJSON` method
// https://url.spec.whatwg.org/#dom-url-tojson
$({ target: 'URL', proto: true, enumerable: true }, {
  toJSON: function toJSON() {
    return call(URL.prototype.toString, this);
  }
});


/***/ }),
/* 167 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: Remove this module from `core-js@4` since it's replaced to module below
__webpack_require__(161);


/***/ }),
/* 168 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return format; });
/* harmony import */ var _isValid_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(169);
/* harmony import */ var _subMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(174);
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(173);
/* harmony import */ var _lib_format_formatters_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(177);
/* harmony import */ var _lib_format_longFormatters_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(190);
/* harmony import */ var _lib_getTimezoneOffsetInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(191);
/* harmony import */ var _lib_protectedTokens_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(192);
/* harmony import */ var _lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(176);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(172);
/* harmony import */ var _lib_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(185);
/* harmony import */ var _lib_defaultLocale_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(193);










 // This RegExp consists of three parts separated by `|`:
// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token
//   (one of the certain letters followed by `o`)
// - (\w)\1* matches any sequences of the same letter
// - '' matches two quote characters in a row
// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),
//   except a single quote symbol, which ends the sequence.
//   Two quote characters do not end the sequence.
//   If there is no matching single quote
//   then the sequence will continue until the end of the string.
// - . matches any single character unmatched by previous parts of the RegExps
var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;

// This RegExp catches symbols escaped by quotes, and also
// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`
var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;

/**
 * @name format
 * @category Common Helpers
 * @summary Format the date.
 *
 * @description
 * Return the formatted date string in the given format. The result may vary by locale.
 *
 * > ⚠️ Please note that the `format` tokens differ from Moment.js and other libraries.
 * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * The characters wrapped between two single quotes characters (') are escaped.
 * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.
 * (see the last example)
 *
 * Format of the string is based on Unicode Technical Standard #35:
 * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table
 * with a few additions (see note 7 below the table).
 *
 * Accepted patterns:
 * | Unit                            | Pattern | Result examples                   | Notes |
 * |---------------------------------|---------|-----------------------------------|-------|
 * | Era                             | G..GGG  | AD, BC                            |       |
 * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |
 * |                                 | GGGGG   | A, B                              |       |
 * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |
 * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |
 * |                                 | yy      | 44, 01, 00, 17                    | 5     |
 * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |
 * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |
 * |                                 | yyyyy   | ...                               | 3,5   |
 * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |
 * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |
 * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |
 * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |
 * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |
 * |                                 | YYYYY   | ...                               | 3,5   |
 * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |
 * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |
 * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |
 * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |
 * |                                 | RRRRR   | ...                               | 3,5,7 |
 * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |
 * |                                 | uu      | -43, 01, 1900, 2017               | 5     |
 * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |
 * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |
 * |                                 | uuuuu   | ...                               | 3,5   |
 * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |
 * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |
 * |                                 | QQ      | 01, 02, 03, 04                    |       |
 * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |
 * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |
 * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |
 * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |
 * |                                 | qq      | 01, 02, 03, 04                    |       |
 * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |
 * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |
 * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |
 * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |
 * |                                 | MM      | 01, 02, ..., 12                   |       |
 * |                                 | MMM     | Jan, Feb, ..., Dec                |       |
 * |                                 | MMMM    | January, February, ..., December  | 2     |
 * |                                 | MMMMM   | J, F, ..., D                      |       |
 * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |
 * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |
 * |                                 | LL      | 01, 02, ..., 12                   |       |
 * |                                 | LLL     | Jan, Feb, ..., Dec                |       |
 * |                                 | LLLL    | January, February, ..., December  | 2     |
 * |                                 | LLLLL   | J, F, ..., D                      |       |
 * | Local week of year              | w       | 1, 2, ..., 53                     |       |
 * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |
 * |                                 | ww      | 01, 02, ..., 53                   |       |
 * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |
 * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |
 * |                                 | II      | 01, 02, ..., 53                   | 7     |
 * | Day of month                    | d       | 1, 2, ..., 31                     |       |
 * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |
 * |                                 | dd      | 01, 02, ..., 31                   |       |
 * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |
 * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |
 * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |
 * |                                 | DDD     | 001, 002, ..., 365, 366           |       |
 * |                                 | DDDD    | ...                               | 3     |
 * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |
 * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |
 * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |
 * |                                 | ii      | 01, 02, ..., 07                   | 7     |
 * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |
 * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |
 * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |
 * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |
 * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |
 * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |
 * |                                 | ee      | 02, 03, ..., 01                   |       |
 * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | eeeee   | M, T, W, T, F, S, S               |       |
 * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |
 * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |
 * |                                 | cc      | 02, 03, ..., 01                   |       |
 * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | ccccc   | M, T, W, T, F, S, S               |       |
 * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | AM, PM                          | a..aa   | AM, PM                            |       |
 * |                                 | aaa     | am, pm                            |       |
 * |                                 | aaaa    | a.m., p.m.                        | 2     |
 * |                                 | aaaaa   | a, p                              |       |
 * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |
 * |                                 | bbb     | am, pm, noon, midnight            |       |
 * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |
 * |                                 | bbbbb   | a, p, n, mi                       |       |
 * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |
 * |                                 | BBBB    | at night, in the morning, ...     | 2     |
 * |                                 | BBBBB   | at night, in the morning, ...     |       |
 * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |
 * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |
 * |                                 | hh      | 01, 02, ..., 11, 12               |       |
 * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |
 * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |
 * |                                 | HH      | 00, 01, 02, ..., 23               |       |
 * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |
 * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |
 * |                                 | KK      | 01, 02, ..., 11, 00               |       |
 * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |
 * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |
 * |                                 | kk      | 24, 01, 02, ..., 23               |       |
 * | Minute                          | m       | 0, 1, ..., 59                     |       |
 * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |
 * |                                 | mm      | 00, 01, ..., 59                   |       |
 * | Second                          | s       | 0, 1, ..., 59                     |       |
 * |                                 | so      | 0th, 1st, ..., 59th               | 7     |
 * |                                 | ss      | 00, 01, ..., 59                   |       |
 * | Fraction of second              | S       | 0, 1, ..., 9                      |       |
 * |                                 | SS      | 00, 01, ..., 99                   |       |
 * |                                 | SSS     | 000, 001, ..., 999                |       |
 * |                                 | SSSS    | ...                               | 3     |
 * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |
 * |                                 | XX      | -0800, +0530, Z                   |       |
 * |                                 | XXX     | -08:00, +05:30, Z                 |       |
 * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |
 * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |
 * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |
 * |                                 | xx      | -0800, +0530, +0000               |       |
 * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |
 * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |
 * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |
 * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |
 * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |
 * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |
 * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |
 * | Seconds timestamp               | t       | 512969520                         | 7     |
 * |                                 | tt      | ...                               | 3,7   |
 * | Milliseconds timestamp          | T       | 512969520900                      | 7     |
 * |                                 | TT      | ...                               | 3,7   |
 * | Long localized date             | P       | 04/29/1453                        | 7     |
 * |                                 | PP      | Apr 29, 1453                      | 7     |
 * |                                 | PPP     | April 29th, 1453                  | 7     |
 * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |
 * | Long localized time             | p       | 12:00 AM                          | 7     |
 * |                                 | pp      | 12:00:00 AM                       | 7     |
 * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |
 * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |
 * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |
 * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |
 * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |
 * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |
 * Notes:
 * 1. "Formatting" units (e.g. formatting quarter) in the default en-US locale
 *    are the same as "stand-alone" units, but are different in some languages.
 *    "Formatting" units are declined according to the rules of the language
 *    in the context of a date. "Stand-alone" units are always nominative singular:
 *
 *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`
 *
 *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`
 *
 * 2. Any sequence of the identical letters is a pattern, unless it is escaped by
 *    the single quote characters (see below).
 *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)
 *    the output will be the same as default pattern for this unit, usually
 *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units
 *    are marked with "2" in the last column of the table.
 *
 *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`
 *
 * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).
 *    The output will be padded with zeros to match the length of the pattern.
 *
 *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`
 *
 * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.
 *    These tokens represent the shortest form of the quarter.
 *
 * 5. The main difference between `y` and `u` patterns are B.C. years:
 *
 *    | Year | `y` | `u` |
 *    |------|-----|-----|
 *    | AC 1 |   1 |   1 |
 *    | BC 1 |   1 |   0 |
 *    | BC 2 |   2 |  -1 |
 *
 *    Also `yy` always returns the last two digits of a year,
 *    while `uu` pads single digit years to 2 characters and returns other years unchanged:
 *
 *    | Year | `yy` | `uu` |
 *    |------|------|------|
 *    | 1    |   01 |   01 |
 *    | 14   |   14 |   14 |
 *    | 376  |   76 |  376 |
 *    | 1453 |   53 | 1453 |
 *
 *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),
 *    except local week-numbering years are dependent on `options.weekStartsOn`
 *    and `options.firstWeekContainsDate` (compare [getISOWeekYear]{@link https://date-fns.org/docs/getISOWeekYear}
 *    and [getWeekYear]{@link https://date-fns.org/docs/getWeekYear}).
 *
 * 6. Specific non-location timezones are currently unavailable in `date-fns`,
 *    so right now these tokens fall back to GMT timezones.
 *
 * 7. These patterns are not in the Unicode Technical Standard #35:
 *    - `i`: ISO day of week
 *    - `I`: ISO week of year
 *    - `R`: ISO week-numbering year
 *    - `t`: seconds timestamp
 *    - `T`: milliseconds timestamp
 *    - `o`: ordinal number modifier
 *    - `P`: long localized date
 *    - `p`: long localized time
 *
 * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.
 *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.
 *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * @param {Date|Number} date - the original date
 * @param {String} format - the string of tokens
 * @param {Object} [options] - an object with options.
 * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}
 * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @param {Number} [options.firstWeekContainsDate=1] - the day of January, which is
 * @param {Boolean} [options.useAdditionalWeekYearTokens=false] - if true, allows usage of the week-numbering year tokens `YY` and `YYYY`;
 *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @param {Boolean} [options.useAdditionalDayOfYearTokens=false] - if true, allows usage of the day of year tokens `D` and `DD`;
 *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @returns {String} the formatted date string
 * @throws {TypeError} 2 arguments required
 * @throws {RangeError} `date` must not be Invalid Date
 * @throws {RangeError} `options.locale` must contain `localize` property
 * @throws {RangeError} `options.locale` must contain `formatLong` property
 * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6
 * @throws {RangeError} `options.firstWeekContainsDate` must be between 1 and 7
 * @throws {RangeError} use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} format string contains an unescaped latin alphabet character
 *
 * @example
 * // Represent 11 February 2014 in middle-endian format:
 * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')
 * //=> '02/11/2014'
 *
 * @example
 * // Represent 2 July 2014 in Esperanto:
 * import { eoLocale } from 'date-fns/locale/eo'
 * const result = format(new Date(2014, 6, 2), "do 'de' MMMM yyyy", {
 *   locale: eoLocale
 * })
 * //=> '2-a de julio 2014'
 *
 * @example
 * // Escape string by single quote characters:
 * const result = format(new Date(2014, 6, 2, 15), "h 'o''clock'")
 * //=> "3 o'clock"
 */

function format(dirtyDate, dirtyFormatStr, options) {
  var _ref, _options$locale, _ref2, _ref3, _ref4, _options$firstWeekCon, _options$locale2, _options$locale2$opti, _defaultOptions$local, _defaultOptions$local2, _ref5, _ref6, _ref7, _options$weekStartsOn, _options$locale3, _options$locale3$opti, _defaultOptions$local3, _defaultOptions$local4;
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_8__["default"])(2, arguments);
  var formatStr = String(dirtyFormatStr);
  var defaultOptions = Object(_lib_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_9__["getDefaultOptions"])();
  var locale = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions.locale) !== null && _ref !== void 0 ? _ref : _lib_defaultLocale_index_js__WEBPACK_IMPORTED_MODULE_10__["default"];
  var firstWeekContainsDate = Object(_lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_7__["default"])((_ref2 = (_ref3 = (_ref4 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale2 = options.locale) === null || _options$locale2 === void 0 ? void 0 : (_options$locale2$opti = _options$locale2.options) === null || _options$locale2$opti === void 0 ? void 0 : _options$locale2$opti.firstWeekContainsDate) !== null && _ref4 !== void 0 ? _ref4 : defaultOptions.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : 1);

  // Test if weekStartsOn is between 1 and 7 _and_ is not NaN
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }
  var weekStartsOn = Object(_lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_7__["default"])((_ref5 = (_ref6 = (_ref7 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale3 = options.locale) === null || _options$locale3 === void 0 ? void 0 : (_options$locale3$opti = _options$locale3.options) === null || _options$locale3$opti === void 0 ? void 0 : _options$locale3$opti.weekStartsOn) !== null && _ref7 !== void 0 ? _ref7 : defaultOptions.weekStartsOn) !== null && _ref6 !== void 0 ? _ref6 : (_defaultOptions$local3 = defaultOptions.locale) === null || _defaultOptions$local3 === void 0 ? void 0 : (_defaultOptions$local4 = _defaultOptions$local3.options) === null || _defaultOptions$local4 === void 0 ? void 0 : _defaultOptions$local4.weekStartsOn) !== null && _ref5 !== void 0 ? _ref5 : 0);

  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }
  if (!locale.localize) {
    throw new RangeError('locale must contain localize property');
  }
  if (!locale.formatLong) {
    throw new RangeError('locale must contain formatLong property');
  }
  var originalDate = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(dirtyDate);
  if (!Object(_isValid_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(originalDate)) {
    throw new RangeError('Invalid time value');
  }

  // Convert the date in system timezone to the same date in UTC+00:00 timezone.
  // This ensures that when UTC functions will be implemented, locales will be compatible with them.
  // See an issue about UTC functions: https://github.com/date-fns/date-fns/issues/376
  var timezoneOffset = Object(_lib_getTimezoneOffsetInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(originalDate);
  var utcDate = Object(_subMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(originalDate, timezoneOffset);
  var formatterOptions = {
    firstWeekContainsDate: firstWeekContainsDate,
    weekStartsOn: weekStartsOn,
    locale: locale,
    _originalDate: originalDate
  };
  var result = formatStr.match(longFormattingTokensRegExp).map(function (substring) {
    var firstCharacter = substring[0];
    if (firstCharacter === 'p' || firstCharacter === 'P') {
      var longFormatter = _lib_format_longFormatters_index_js__WEBPACK_IMPORTED_MODULE_4__["default"][firstCharacter];
      return longFormatter(substring, locale.formatLong);
    }
    return substring;
  }).join('').match(formattingTokensRegExp).map(function (substring) {
    // Replace two single quote characters with one single quote character
    if (substring === "''") {
      return "'";
    }
    var firstCharacter = substring[0];
    if (firstCharacter === "'") {
      return cleanEscapedString(substring);
    }
    var formatter = _lib_format_formatters_index_js__WEBPACK_IMPORTED_MODULE_3__["default"][firstCharacter];
    if (formatter) {
      if (!(options !== null && options !== void 0 && options.useAdditionalWeekYearTokens) && Object(_lib_protectedTokens_index_js__WEBPACK_IMPORTED_MODULE_6__["isProtectedWeekYearToken"])(substring)) {
        Object(_lib_protectedTokens_index_js__WEBPACK_IMPORTED_MODULE_6__["throwProtectedError"])(substring, dirtyFormatStr, String(dirtyDate));
      }
      if (!(options !== null && options !== void 0 && options.useAdditionalDayOfYearTokens) && Object(_lib_protectedTokens_index_js__WEBPACK_IMPORTED_MODULE_6__["isProtectedDayOfYearToken"])(substring)) {
        Object(_lib_protectedTokens_index_js__WEBPACK_IMPORTED_MODULE_6__["throwProtectedError"])(substring, dirtyFormatStr, String(dirtyDate));
      }
      return formatter(utcDate, substring, locale.localize, formatterOptions);
    }
    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
      throw new RangeError('Format string contains an unescaped latin alphabet character `' + firstCharacter + '`');
    }
    return substring;
  }).join('');
  return result;
}
function cleanEscapedString(input) {
  var matched = input.match(escapedStringRegExp);
  if (!matched) {
    return input;
  }
  return matched[1].replace(doubleQuoteRegExp, "'");
}

/***/ }),
/* 169 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return isValid; });
/* harmony import */ var _isDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(170);
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(173);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(172);



/**
 * @name isValid
 * @category Common Helpers
 * @summary Is the given date valid?
 *
 * @description
 * Returns false if argument is Invalid Date and true otherwise.
 * Argument is converted to Date using `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}
 * Invalid Date is a Date, whose time value is NaN.
 *
 * Time value of Date: http://es5.github.io/#x15.9.1.1
 *
 * @param {*} date - the date to check
 * @returns {Boolean} the date is valid
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // For the valid date:
 * const result = isValid(new Date(2014, 1, 31))
 * //=> true
 *
 * @example
 * // For the value, convertable into a date:
 * const result = isValid(1393804800000)
 * //=> true
 *
 * @example
 * // For the invalid date:
 * const result = isValid(new Date(''))
 * //=> false
 */
function isValid(dirtyDate) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(1, arguments);
  if (!Object(_isDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate) && typeof dirtyDate !== 'number') {
    return false;
  }
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(dirtyDate);
  return !isNaN(Number(date));
}

/***/ }),
/* 170 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return isDate; });
/* harmony import */ var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(171);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);


/**
 * @name isDate
 * @category Common Helpers
 * @summary Is the given value a date?
 *
 * @description
 * Returns true if the given value is an instance of Date. The function works for dates transferred across iframes.
 *
 * @param {*} value - the value to check
 * @returns {boolean} true if the given value is a date
 * @throws {TypeError} 1 arguments required
 *
 * @example
 * // For a valid date:
 * const result = isDate(new Date())
 * //=> true
 *
 * @example
 * // For an invalid date:
 * const result = isDate(new Date(NaN))
 * //=> true
 *
 * @example
 * // For some value:
 * const result = isDate('2014-02-31')
 * //=> false
 *
 * @example
 * // For an object:
 * const result = isDate({})
 * //=> false
 */
function isDate(value) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(1, arguments);
  return value instanceof Date || Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__["default"])(value) === 'object' && Object.prototype.toString.call(value) === '[object Date]';
}

/***/ }),
/* 171 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _typeof; });
function _typeof(o) {
  "@babel/helpers - typeof";

  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
    return typeof o;
  } : function (o) {
    return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
  }, _typeof(o);
}


/***/ }),
/* 172 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return requiredArgs; });
function requiredArgs(required, args) {
  if (args.length < required) {
    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');
  }
}

/***/ }),
/* 173 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return toDate; });
/* harmony import */ var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(171);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);


/**
 * @name toDate
 * @category Common Helpers
 * @summary Convert the given argument to an instance of Date.
 *
 * @description
 * Convert the given argument to an instance of Date.
 *
 * If the argument is an instance of Date, the function returns its clone.
 *
 * If the argument is a number, it is treated as a timestamp.
 *
 * If the argument is none of the above, the function returns Invalid Date.
 *
 * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.
 *
 * @param {Date|Number} argument - the value to convert
 * @returns {Date} the parsed date in the local time zone
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // Clone the date:
 * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))
 * //=> Tue Feb 11 2014 11:30:30
 *
 * @example
 * // Convert the timestamp to date:
 * const result = toDate(1392098430000)
 * //=> Tue Feb 11 2014 11:30:30
 */
function toDate(argument) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(1, arguments);
  var argStr = Object.prototype.toString.call(argument);

  // Clone the date
  if (argument instanceof Date || Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__["default"])(argument) === 'object' && argStr === '[object Date]') {
    // Prevent the date to lose the milliseconds when passed to new Date() in IE10
    return new Date(argument.getTime());
  } else if (typeof argument === 'number' || argStr === '[object Number]') {
    return new Date(argument);
  } else {
    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {
      // eslint-disable-next-line no-console
      console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments");
      // eslint-disable-next-line no-console
      console.warn(new Error().stack);
    }
    return new Date(NaN);
  }
}

/***/ }),
/* 174 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return subMilliseconds; });
/* harmony import */ var _addMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(175);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);
/* harmony import */ var _lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(176);



/**
 * @name subMilliseconds
 * @category Millisecond Helpers
 * @summary Subtract the specified number of milliseconds from the given date.
 *
 * @description
 * Subtract the specified number of milliseconds from the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the milliseconds subtracted
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Subtract 750 milliseconds from 10 July 2014 12:45:30.000:
 * const result = subMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:29.250
 */
function subMilliseconds(dirtyDate, dirtyAmount) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(2, arguments);
  var amount = Object(_lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(dirtyAmount);
  return Object(_addMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate, -amount);
}

/***/ }),
/* 175 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return addMilliseconds; });
/* harmony import */ var _lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(176);
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(173);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(172);



/**
 * @name addMilliseconds
 * @category Millisecond Helpers
 * @summary Add the specified number of milliseconds to the given date.
 *
 * @description
 * Add the specified number of milliseconds to the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the milliseconds added
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Add 750 milliseconds to 10 July 2014 12:45:30.000:
 * const result = addMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:30.750
 */
function addMilliseconds(dirtyDate, dirtyAmount) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(2, arguments);
  var timestamp = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(dirtyDate).getTime();
  var amount = Object(_lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyAmount);
  return new Date(timestamp + amount);
}

/***/ }),
/* 176 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return toInteger; });
function toInteger(dirtyNumber) {
  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {
    return NaN;
  }
  var number = Number(dirtyNumber);
  if (isNaN(number)) {
    return number;
  }
  return number < 0 ? Math.ceil(number) : Math.floor(number);
}

/***/ }),
/* 177 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _lib_getUTCDayOfYear_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(178);
/* harmony import */ var _lib_getUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(179);
/* harmony import */ var _lib_getUTCISOWeekYear_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(182);
/* harmony import */ var _lib_getUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(183);
/* harmony import */ var _lib_getUTCWeekYear_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(187);
/* harmony import */ var _addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(188);
/* harmony import */ var _lightFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(189);







var dayPeriodEnum = {
  am: 'am',
  pm: 'pm',
  midnight: 'midnight',
  noon: 'noon',
  morning: 'morning',
  afternoon: 'afternoon',
  evening: 'evening',
  night: 'night'
};
/*
 * |     | Unit                           |     | Unit                           |
 * |-----|--------------------------------|-----|--------------------------------|
 * |  a  | AM, PM                         |  A* | Milliseconds in day            |
 * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |
 * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |
 * |  d  | Day of month                   |  D  | Day of year                    |
 * |  e  | Local day of week              |  E  | Day of week                    |
 * |  f  |                                |  F* | Day of week in month           |
 * |  g* | Modified Julian day            |  G  | Era                            |
 * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |
 * |  i! | ISO day of week                |  I! | ISO week of year               |
 * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |
 * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |
 * |  l* | (deprecated)                   |  L  | Stand-alone month              |
 * |  m  | Minute                         |  M  | Month                          |
 * |  n  |                                |  N  |                                |
 * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |
 * |  p! | Long localized time            |  P! | Long localized date            |
 * |  q  | Stand-alone quarter            |  Q  | Quarter                        |
 * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |
 * |  s  | Second                         |  S  | Fraction of second             |
 * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |
 * |  u  | Extended year                  |  U* | Cyclic year                    |
 * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |
 * |  w  | Local week of year             |  W* | Week of month                  |
 * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |
 * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |
 * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |
 *
 * Letters marked by * are not implemented but reserved by Unicode standard.
 *
 * Letters marked by ! are non-standard, but implemented by date-fns:
 * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)
 * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,
 *   i.e. 7 for Sunday, 1 for Monday, etc.
 * - `I` is ISO week of year, as opposed to `w` which is local week of year.
 * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.
 *   `R` is supposed to be used in conjunction with `I` and `i`
 *   for universal ISO week-numbering date, whereas
 *   `Y` is supposed to be used in conjunction with `w` and `e`
 *   for week-numbering date specific to the locale.
 * - `P` is long localized date format
 * - `p` is long localized time format
 */

var formatters = {
  // Era
  G: function G(date, token, localize) {
    var era = date.getUTCFullYear() > 0 ? 1 : 0;
    switch (token) {
      // AD, BC
      case 'G':
      case 'GG':
      case 'GGG':
        return localize.era(era, {
          width: 'abbreviated'
        });
      // A, B
      case 'GGGGG':
        return localize.era(era, {
          width: 'narrow'
        });
      // Anno Domini, Before Christ
      case 'GGGG':
      default:
        return localize.era(era, {
          width: 'wide'
        });
    }
  },
  // Year
  y: function y(date, token, localize) {
    // Ordinal number
    if (token === 'yo') {
      var signedYear = date.getUTCFullYear();
      // Returns 1 for 1 BC (which is year 0 in JavaScript)
      var year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize.ordinalNumber(year, {
        unit: 'year'
      });
    }
    return _lightFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__["default"].y(date, token);
  },
  // Local week-numbering year
  Y: function Y(date, token, localize, options) {
    var signedWeekYear = Object(_lib_getUTCWeekYear_index_js__WEBPACK_IMPORTED_MODULE_4__["default"])(date, options);
    // Returns 1 for 1 BC (which is year 0 in JavaScript)
    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;

    // Two digit year
    if (token === 'YY') {
      var twoDigitYear = weekYear % 100;
      return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(twoDigitYear, 2);
    }

    // Ordinal number
    if (token === 'Yo') {
      return localize.ordinalNumber(weekYear, {
        unit: 'year'
      });
    }

    // Padding
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(weekYear, token.length);
  },
  // ISO week-numbering year
  R: function R(date, token) {
    var isoWeekYear = Object(_lib_getUTCISOWeekYear_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(date);

    // Padding
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(isoWeekYear, token.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function u(date, token) {
    var year = date.getUTCFullYear();
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(year, token.length);
  },
  // Quarter
  Q: function Q(date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case 'Q':
        return String(quarter);
      // 01, 02, 03, 04
      case 'QQ':
        return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case 'Qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      // Q1, Q2, Q3, Q4
      case 'QQQ':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case 'QQQQQ':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'formatting'
        });
      // 1st quarter, 2nd quarter, ...
      case 'QQQQ':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone quarter
  q: function q(date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case 'q':
        return String(quarter);
      // 01, 02, 03, 04
      case 'qq':
        return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case 'qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      // Q1, Q2, Q3, Q4
      case 'qqq':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case 'qqqqq':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'standalone'
        });
      // 1st quarter, 2nd quarter, ...
      case 'qqqq':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // Month
  M: function M(date, token, localize) {
    var month = date.getUTCMonth();
    switch (token) {
      case 'M':
      case 'MM':
        return _lightFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__["default"].M(date, token);
      // 1st, 2nd, ..., 12th
      case 'Mo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      // Jan, Feb, ..., Dec
      case 'MMM':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // J, F, ..., D
      case 'MMMMM':
        return localize.month(month, {
          width: 'narrow',
          context: 'formatting'
        });
      // January, February, ..., December
      case 'MMMM':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone month
  L: function L(date, token, localize) {
    var month = date.getUTCMonth();
    switch (token) {
      // 1, 2, ..., 12
      case 'L':
        return String(month + 1);
      // 01, 02, ..., 12
      case 'LL':
        return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(month + 1, 2);
      // 1st, 2nd, ..., 12th
      case 'Lo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      // Jan, Feb, ..., Dec
      case 'LLL':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // J, F, ..., D
      case 'LLLLL':
        return localize.month(month, {
          width: 'narrow',
          context: 'standalone'
        });
      // January, February, ..., December
      case 'LLLL':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // Local week of year
  w: function w(date, token, localize, options) {
    var week = Object(_lib_getUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])(date, options);
    if (token === 'wo') {
      return localize.ordinalNumber(week, {
        unit: 'week'
      });
    }
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(week, token.length);
  },
  // ISO week of year
  I: function I(date, token, localize) {
    var isoWeek = Object(_lib_getUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(date);
    if (token === 'Io') {
      return localize.ordinalNumber(isoWeek, {
        unit: 'week'
      });
    }
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(isoWeek, token.length);
  },
  // Day of the month
  d: function d(date, token, localize) {
    if (token === 'do') {
      return localize.ordinalNumber(date.getUTCDate(), {
        unit: 'date'
      });
    }
    return _lightFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__["default"].d(date, token);
  },
  // Day of year
  D: function D(date, token, localize) {
    var dayOfYear = Object(_lib_getUTCDayOfYear_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(date);
    if (token === 'Do') {
      return localize.ordinalNumber(dayOfYear, {
        unit: 'dayOfYear'
      });
    }
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(dayOfYear, token.length);
  },
  // Day of week
  E: function E(date, token, localize) {
    var dayOfWeek = date.getUTCDay();
    switch (token) {
      // Tue
      case 'E':
      case 'EE':
      case 'EEE':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T
      case 'EEEEE':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu
      case 'EEEEEE':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday
      case 'EEEE':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Local day of week
  e: function e(date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case 'e':
        return String(localDayOfWeek);
      // Padded numerical value
      case 'ee':
        return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(localDayOfWeek, 2);
      // 1st, 2nd, ..., 7th
      case 'eo':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });
      case 'eee':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T
      case 'eeeee':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu
      case 'eeeeee':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday
      case 'eeee':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone local day of week
  c: function c(date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (same as in `e`)
      case 'c':
        return String(localDayOfWeek);
      // Padded numerical value
      case 'cc':
        return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(localDayOfWeek, token.length);
      // 1st, 2nd, ..., 7th
      case 'co':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });
      case 'ccc':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // T
      case 'ccccc':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'standalone'
        });
      // Tu
      case 'cccccc':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'standalone'
        });
      // Tuesday
      case 'cccc':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // ISO day of week
  i: function i(date, token, localize) {
    var dayOfWeek = date.getUTCDay();
    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;
    switch (token) {
      // 2
      case 'i':
        return String(isoDayOfWeek);
      // 02
      case 'ii':
        return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(isoDayOfWeek, token.length);
      // 2nd
      case 'io':
        return localize.ordinalNumber(isoDayOfWeek, {
          unit: 'day'
        });
      // Tue
      case 'iii':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T
      case 'iiiii':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu
      case 'iiiiii':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday
      case 'iiii':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // AM or PM
  a: function a(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';
    switch (token) {
      case 'a':
      case 'aa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'aaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();
      case 'aaaaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'aaaa':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // AM, PM, midnight, noon
  b: function b(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;
    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';
    }
    switch (token) {
      case 'b':
      case 'bb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'bbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();
      case 'bbbbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'bbbb':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function B(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;
    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }
    switch (token) {
      case 'B':
      case 'BB':
      case 'BBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'BBBBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'BBBB':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Hour [1-12]
  h: function h(date, token, localize) {
    if (token === 'ho') {
      var hours = date.getUTCHours() % 12;
      if (hours === 0) hours = 12;
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return _lightFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__["default"].h(date, token);
  },
  // Hour [0-23]
  H: function H(date, token, localize) {
    if (token === 'Ho') {
      return localize.ordinalNumber(date.getUTCHours(), {
        unit: 'hour'
      });
    }
    return _lightFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__["default"].H(date, token);
  },
  // Hour [0-11]
  K: function K(date, token, localize) {
    var hours = date.getUTCHours() % 12;
    if (token === 'Ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(hours, token.length);
  },
  // Hour [1-24]
  k: function k(date, token, localize) {
    var hours = date.getUTCHours();
    if (hours === 0) hours = 24;
    if (token === 'ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(hours, token.length);
  },
  // Minute
  m: function m(date, token, localize) {
    if (token === 'mo') {
      return localize.ordinalNumber(date.getUTCMinutes(), {
        unit: 'minute'
      });
    }
    return _lightFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__["default"].m(date, token);
  },
  // Second
  s: function s(date, token, localize) {
    if (token === 'so') {
      return localize.ordinalNumber(date.getUTCSeconds(), {
        unit: 'second'
      });
    }
    return _lightFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__["default"].s(date, token);
  },
  // Fraction of second
  S: function S(date, token) {
    return _lightFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__["default"].S(date, token);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function X(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    if (timezoneOffset === 0) {
      return 'Z';
    }
    switch (token) {
      // Hours and optional minutes
      case 'X':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);

      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`
      case 'XXXX':
      case 'XX':
        // Hours and minutes without `:` delimiter
        return formatTimezone(timezoneOffset);

      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`
      case 'XXXXX':
      case 'XXX': // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function x(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      // Hours and optional minutes
      case 'x':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);

      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`
      case 'xxxx':
      case 'xx':
        // Hours and minutes without `:` delimiter
        return formatTimezone(timezoneOffset);

      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`
      case 'xxxxx':
      case 'xxx': // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (GMT)
  O: function O(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      // Short
      case 'O':
      case 'OO':
      case 'OOO':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');
      // Long
      case 'OOOO':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (specific non-location)
  z: function z(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      // Short
      case 'z':
      case 'zz':
      case 'zzz':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');
      // Long
      case 'zzzz':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  // Seconds timestamp
  t: function t(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = Math.floor(originalDate.getTime() / 1000);
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(timestamp, token.length);
  },
  // Milliseconds timestamp
  T: function T(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = originalDate.getTime();
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(timestamp, token.length);
  }
};
function formatTimezoneShort(offset, dirtyDelimiter) {
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = Math.floor(absOffset / 60);
  var minutes = absOffset % 60;
  if (minutes === 0) {
    return sign + String(hours);
  }
  var delimiter = dirtyDelimiter || '';
  return sign + String(hours) + delimiter + Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(minutes, 2);
}
function formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {
  if (offset % 60 === 0) {
    var sign = offset > 0 ? '-' : '+';
    return sign + Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(Math.abs(offset) / 60, 2);
  }
  return formatTimezone(offset, dirtyDelimiter);
}
function formatTimezone(offset, dirtyDelimiter) {
  var delimiter = dirtyDelimiter || '';
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(Math.floor(absOffset / 60), 2);
  var minutes = Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}
/* harmony default export */ __webpack_exports__["default"] = (formatters);

/***/ }),
/* 178 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getUTCDayOfYear; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);


var MILLISECONDS_IN_DAY = 86400000;
function getUTCDayOfYear(dirtyDate) {
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(1, arguments);
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  var timestamp = date.getTime();
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
  var startOfYearTimestamp = date.getTime();
  var difference = timestamp - startOfYearTimestamp;
  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;
}

/***/ }),
/* 179 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getUTCISOWeek; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(180);
/* harmony import */ var _startOfUTCISOWeekYear_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(181);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(172);




var MILLISECONDS_IN_WEEK = 604800000;
function getUTCISOWeek(dirtyDate) {
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])(1, arguments);
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  var diff = Object(_startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(date).getTime() - Object(_startOfUTCISOWeekYear_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(date).getTime();

  // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)
  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;
}

/***/ }),
/* 180 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return startOfUTCISOWeek; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);


function startOfUTCISOWeek(dirtyDate) {
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(1, arguments);
  var weekStartsOn = 1;
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

/***/ }),
/* 181 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return startOfUTCISOWeekYear; });
/* harmony import */ var _getUTCISOWeekYear_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(182);
/* harmony import */ var _startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(180);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(172);



function startOfUTCISOWeekYear(dirtyDate) {
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(1, arguments);
  var year = Object(_getUTCISOWeekYear_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  var fourthOfJanuary = new Date(0);
  fourthOfJanuary.setUTCFullYear(year, 0, 4);
  fourthOfJanuary.setUTCHours(0, 0, 0, 0);
  var date = Object(_startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(fourthOfJanuary);
  return date;
}

/***/ }),
/* 182 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getUTCISOWeekYear; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);
/* harmony import */ var _startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(180);



function getUTCISOWeekYear(dirtyDate) {
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(1, arguments);
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  var year = date.getUTCFullYear();
  var fourthOfJanuaryOfNextYear = new Date(0);
  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = Object(_startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(fourthOfJanuaryOfNextYear);
  var fourthOfJanuaryOfThisYear = new Date(0);
  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = Object(_startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(fourthOfJanuaryOfThisYear);
  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

/***/ }),
/* 183 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getUTCWeek; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(184);
/* harmony import */ var _startOfUTCWeekYear_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(186);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(172);




var MILLISECONDS_IN_WEEK = 604800000;
function getUTCWeek(dirtyDate, options) {
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])(1, arguments);
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  var diff = Object(_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(date, options).getTime() - Object(_startOfUTCWeekYear_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(date, options).getTime();

  // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)
  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;
}

/***/ }),
/* 184 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return startOfUTCWeek; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);
/* harmony import */ var _toInteger_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(176);
/* harmony import */ var _defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(185);




function startOfUTCWeek(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(1, arguments);
  var defaultOptions = Object(_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_3__["getDefaultOptions"])();
  var weekStartsOn = Object(_toInteger_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0);

  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

/***/ }),
/* 185 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDefaultOptions", function() { return getDefaultOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setDefaultOptions", function() { return setDefaultOptions; });
var defaultOptions = {};
function getDefaultOptions() {
  return defaultOptions;
}
function setDefaultOptions(newOptions) {
  defaultOptions = newOptions;
}

/***/ }),
/* 186 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return startOfUTCWeekYear; });
/* harmony import */ var _getUTCWeekYear_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(187);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);
/* harmony import */ var _startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(184);
/* harmony import */ var _toInteger_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(176);
/* harmony import */ var _defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(185);





function startOfUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(1, arguments);
  var defaultOptions = Object(_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_4__["getDefaultOptions"])();
  var firstWeekContainsDate = Object(_toInteger_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);
  var year = Object(_getUTCWeekYear_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate, options);
  var firstWeek = new Date(0);
  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setUTCHours(0, 0, 0, 0);
  var date = Object(_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(firstWeek, options);
  return date;
}

/***/ }),
/* 187 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getUTCWeekYear; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);
/* harmony import */ var _startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(184);
/* harmony import */ var _toInteger_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(176);
/* harmony import */ var _defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(185);





function getUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(1, arguments);
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  var year = date.getUTCFullYear();
  var defaultOptions = Object(_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_4__["getDefaultOptions"])();
  var firstWeekContainsDate = Object(_toInteger_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);

  // Test if weekStartsOn is between 1 and 7 _and_ is not NaN
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }
  var firstWeekOfNextYear = new Date(0);
  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = Object(_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(firstWeekOfNextYear, options);
  var firstWeekOfThisYear = new Date(0);
  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = Object(_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(firstWeekOfThisYear, options);
  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

/***/ }),
/* 188 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return addLeadingZeros; });
function addLeadingZeros(number, targetLength) {
  var sign = number < 0 ? '-' : '';
  var output = Math.abs(number).toString();
  while (output.length < targetLength) {
    output = '0' + output;
  }
  return sign + output;
}

/***/ }),
/* 189 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(188);

/*
 * |     | Unit                           |     | Unit                           |
 * |-----|--------------------------------|-----|--------------------------------|
 * |  a  | AM, PM                         |  A* |                                |
 * |  d  | Day of month                   |  D  |                                |
 * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |
 * |  m  | Minute                         |  M  | Month                          |
 * |  s  | Second                         |  S  | Fraction of second             |
 * |  y  | Year (abs)                     |  Y  |                                |
 *
 * Letters marked by * are not implemented but reserved by Unicode standard.
 */
var formatters = {
  // Year
  y: function y(date, token) {
    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens
    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |
    // |----------|-------|----|-------|-------|-------|
    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |
    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |
    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |
    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |
    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |

    var signedYear = date.getUTCFullYear();
    // Returns 1 for 1 BC (which is year 0 in JavaScript)
    var year = signedYear > 0 ? signedYear : 1 - signedYear;
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(token === 'yy' ? year % 100 : year, token.length);
  },
  // Month
  M: function M(date, token) {
    var month = date.getUTCMonth();
    return token === 'M' ? String(month + 1) : Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(month + 1, 2);
  },
  // Day of the month
  d: function d(date, token) {
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(date.getUTCDate(), token.length);
  },
  // AM or PM
  a: function a(date, token) {
    var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? 'pm' : 'am';
    switch (token) {
      case 'a':
      case 'aa':
        return dayPeriodEnumValue.toUpperCase();
      case 'aaa':
        return dayPeriodEnumValue;
      case 'aaaaa':
        return dayPeriodEnumValue[0];
      case 'aaaa':
      default:
        return dayPeriodEnumValue === 'am' ? 'a.m.' : 'p.m.';
    }
  },
  // Hour [1-12]
  h: function h(date, token) {
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(date.getUTCHours() % 12 || 12, token.length);
  },
  // Hour [0-23]
  H: function H(date, token) {
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(date.getUTCHours(), token.length);
  },
  // Minute
  m: function m(date, token) {
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(date.getUTCMinutes(), token.length);
  },
  // Second
  s: function s(date, token) {
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(date.getUTCSeconds(), token.length);
  },
  // Fraction of second
  S: function S(date, token) {
    var numberOfDigits = token.length;
    var milliseconds = date.getUTCMilliseconds();
    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));
    return Object(_addLeadingZeros_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(fractionalSeconds, token.length);
  }
};
/* harmony default export */ __webpack_exports__["default"] = (formatters);

/***/ }),
/* 190 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var dateLongFormatter = function dateLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'P':
      return formatLong.date({
        width: 'short'
      });
    case 'PP':
      return formatLong.date({
        width: 'medium'
      });
    case 'PPP':
      return formatLong.date({
        width: 'long'
      });
    case 'PPPP':
    default:
      return formatLong.date({
        width: 'full'
      });
  }
};
var timeLongFormatter = function timeLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'p':
      return formatLong.time({
        width: 'short'
      });
    case 'pp':
      return formatLong.time({
        width: 'medium'
      });
    case 'ppp':
      return formatLong.time({
        width: 'long'
      });
    case 'pppp':
    default:
      return formatLong.time({
        width: 'full'
      });
  }
};
var dateTimeLongFormatter = function dateTimeLongFormatter(pattern, formatLong) {
  var matchResult = pattern.match(/(P+)(p+)?/) || [];
  var datePattern = matchResult[1];
  var timePattern = matchResult[2];
  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong);
  }
  var dateTimeFormat;
  switch (datePattern) {
    case 'P':
      dateTimeFormat = formatLong.dateTime({
        width: 'short'
      });
      break;
    case 'PP':
      dateTimeFormat = formatLong.dateTime({
        width: 'medium'
      });
      break;
    case 'PPP':
      dateTimeFormat = formatLong.dateTime({
        width: 'long'
      });
      break;
    case 'PPPP':
    default:
      dateTimeFormat = formatLong.dateTime({
        width: 'full'
      });
      break;
  }
  return dateTimeFormat.replace('{{date}}', dateLongFormatter(datePattern, formatLong)).replace('{{time}}', timeLongFormatter(timePattern, formatLong));
};
var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};
/* harmony default export */ __webpack_exports__["default"] = (longFormatters);

/***/ }),
/* 191 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getTimezoneOffsetInMilliseconds; });
/**
 * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.
 * They usually appear for dates that denote time before the timezones were introduced
 * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891
 * and GMT+01:00:00 after that date)
 *
 * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,
 * which would lead to incorrect calculations.
 *
 * This function returns the timezone offset in milliseconds that takes seconds in account.
 */
function getTimezoneOffsetInMilliseconds(date) {
  var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));
  utcDate.setUTCFullYear(date.getFullYear());
  return date.getTime() - utcDate.getTime();
}

/***/ }),
/* 192 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isProtectedDayOfYearToken", function() { return isProtectedDayOfYearToken; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isProtectedWeekYearToken", function() { return isProtectedWeekYearToken; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throwProtectedError", function() { return throwProtectedError; });
var protectedDayOfYearTokens = ['D', 'DD'];
var protectedWeekYearTokens = ['YY', 'YYYY'];
function isProtectedDayOfYearToken(token) {
  return protectedDayOfYearTokens.indexOf(token) !== -1;
}
function isProtectedWeekYearToken(token) {
  return protectedWeekYearTokens.indexOf(token) !== -1;
}
function throwProtectedError(token, format, input) {
  if (token === 'YYYY') {
    throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'YY') {
    throw new RangeError("Use `yy` instead of `YY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'D') {
    throw new RangeError("Use `d` instead of `D` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'DD') {
    throw new RangeError("Use `dd` instead of `DD` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  }
}

/***/ }),
/* 193 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _locale_en_US_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(194);

/* harmony default export */ __webpack_exports__["default"] = (_locale_en_US_index_js__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),
/* 194 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _lib_formatDistance_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(195);
/* harmony import */ var _lib_formatLong_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(196);
/* harmony import */ var _lib_formatRelative_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(198);
/* harmony import */ var _lib_localize_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(199);
/* harmony import */ var _lib_match_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(201);





/**
 * @type {Locale}
 * @category Locales
 * @summary English locale (United States).
 * @language English
 * @iso-639-2 eng
 * @author Sasha Koss [@kossnocorp]{@link https://github.com/kossnocorp}
 * @author Lesha Koss [@leshakoss]{@link https://github.com/leshakoss}
 */
var locale = {
  code: 'en-US',
  formatDistance: _lib_formatDistance_index_js__WEBPACK_IMPORTED_MODULE_0__["default"],
  formatLong: _lib_formatLong_index_js__WEBPACK_IMPORTED_MODULE_1__["default"],
  formatRelative: _lib_formatRelative_index_js__WEBPACK_IMPORTED_MODULE_2__["default"],
  localize: _lib_localize_index_js__WEBPACK_IMPORTED_MODULE_3__["default"],
  match: _lib_match_index_js__WEBPACK_IMPORTED_MODULE_4__["default"],
  options: {
    weekStartsOn: 0 /* Sunday */,
    firstWeekContainsDate: 1
  }
};
/* harmony default export */ __webpack_exports__["default"] = (locale);

/***/ }),
/* 195 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var formatDistanceLocale = {
  lessThanXSeconds: {
    one: 'less than a second',
    other: 'less than {{count}} seconds'
  },
  xSeconds: {
    one: '1 second',
    other: '{{count}} seconds'
  },
  halfAMinute: 'half a minute',
  lessThanXMinutes: {
    one: 'less than a minute',
    other: 'less than {{count}} minutes'
  },
  xMinutes: {
    one: '1 minute',
    other: '{{count}} minutes'
  },
  aboutXHours: {
    one: 'about 1 hour',
    other: 'about {{count}} hours'
  },
  xHours: {
    one: '1 hour',
    other: '{{count}} hours'
  },
  xDays: {
    one: '1 day',
    other: '{{count}} days'
  },
  aboutXWeeks: {
    one: 'about 1 week',
    other: 'about {{count}} weeks'
  },
  xWeeks: {
    one: '1 week',
    other: '{{count}} weeks'
  },
  aboutXMonths: {
    one: 'about 1 month',
    other: 'about {{count}} months'
  },
  xMonths: {
    one: '1 month',
    other: '{{count}} months'
  },
  aboutXYears: {
    one: 'about 1 year',
    other: 'about {{count}} years'
  },
  xYears: {
    one: '1 year',
    other: '{{count}} years'
  },
  overXYears: {
    one: 'over 1 year',
    other: 'over {{count}} years'
  },
  almostXYears: {
    one: 'almost 1 year',
    other: 'almost {{count}} years'
  }
};
var formatDistance = function formatDistance(token, count, options) {
  var result;
  var tokenValue = formatDistanceLocale[token];
  if (typeof tokenValue === 'string') {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace('{{count}}', count.toString());
  }
  if (options !== null && options !== void 0 && options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return 'in ' + result;
    } else {
      return result + ' ago';
    }
  }
  return result;
};
/* harmony default export */ __webpack_exports__["default"] = (formatDistance);

/***/ }),
/* 196 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _lib_buildFormatLongFn_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(197);

var dateFormats = {
  full: 'EEEE, MMMM do, y',
  long: 'MMMM do, y',
  medium: 'MMM d, y',
  short: 'MM/dd/yyyy'
};
var timeFormats = {
  full: 'h:mm:ss a zzzz',
  long: 'h:mm:ss a z',
  medium: 'h:mm:ss a',
  short: 'h:mm a'
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: '{{date}}, {{time}}',
  short: '{{date}}, {{time}}'
};
var formatLong = {
  date: Object(_lib_buildFormatLongFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    formats: dateFormats,
    defaultWidth: 'full'
  }),
  time: Object(_lib_buildFormatLongFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    formats: timeFormats,
    defaultWidth: 'full'
  }),
  dateTime: Object(_lib_buildFormatLongFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    formats: dateTimeFormats,
    defaultWidth: 'full'
  })
};
/* harmony default export */ __webpack_exports__["default"] = (formatLong);

/***/ }),
/* 197 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return buildFormatLongFn; });
function buildFormatLongFn(args) {
  return function () {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    // TODO: Remove String()
    var width = options.width ? String(options.width) : args.defaultWidth;
    var format = args.formats[width] || args.formats[args.defaultWidth];
    return format;
  };
}

/***/ }),
/* 198 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: 'P'
};
var formatRelative = function formatRelative(token, _date, _baseDate, _options) {
  return formatRelativeLocale[token];
};
/* harmony default export */ __webpack_exports__["default"] = (formatRelative);

/***/ }),
/* 199 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _lib_buildLocalizeFn_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(200);

var eraValues = {
  narrow: ['B', 'A'],
  abbreviated: ['BC', 'AD'],
  wide: ['Before Christ', 'Anno Domini']
};
var quarterValues = {
  narrow: ['1', '2', '3', '4'],
  abbreviated: ['Q1', 'Q2', 'Q3', 'Q4'],
  wide: ['1st quarter', '2nd quarter', '3rd quarter', '4th quarter']
};

// Note: in English, the names of days of the week and months are capitalized.
// If you are making a new locale based on this one, check if the same is true for the language you're working on.
// Generally, formatted dates should look like they are in the middle of a sentence,
// e.g. in Spanish language the weekdays and months should be in the lowercase.
var monthValues = {
  narrow: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'],
  abbreviated: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
  wide: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
};
var dayValues = {
  narrow: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],
  short: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
  abbreviated: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
  wide: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
};
var dayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  }
};
var ordinalNumber = function ordinalNumber(dirtyNumber, _options) {
  var number = Number(dirtyNumber);

  // If ordinal numbers depend on context, for example,
  // if they are different for different grammatical genders,
  // use `options.unit`.
  //
  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',
  // 'day', 'hour', 'minute', 'second'.

  var rem100 = number % 100;
  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + 'st';
      case 2:
        return number + 'nd';
      case 3:
        return number + 'rd';
    }
  }
  return number + 'th';
};
var localize = {
  ordinalNumber: ordinalNumber,
  era: Object(_lib_buildLocalizeFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    values: eraValues,
    defaultWidth: 'wide'
  }),
  quarter: Object(_lib_buildLocalizeFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    values: quarterValues,
    defaultWidth: 'wide',
    argumentCallback: function argumentCallback(quarter) {
      return quarter - 1;
    }
  }),
  month: Object(_lib_buildLocalizeFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    values: monthValues,
    defaultWidth: 'wide'
  }),
  day: Object(_lib_buildLocalizeFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    values: dayValues,
    defaultWidth: 'wide'
  }),
  dayPeriod: Object(_lib_buildLocalizeFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    values: dayPeriodValues,
    defaultWidth: 'wide',
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: 'wide'
  })
};
/* harmony default export */ __webpack_exports__["default"] = (localize);

/***/ }),
/* 200 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return buildLocalizeFn; });
function buildLocalizeFn(args) {
  return function (dirtyIndex, options) {
    var context = options !== null && options !== void 0 && options.context ? String(options.context) : 'standalone';
    var valuesArray;
    if (context === 'formatting' && args.formattingValues) {
      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      var width = options !== null && options !== void 0 && options.width ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      var _defaultWidth = args.defaultWidth;
      var _width = options !== null && options !== void 0 && options.width ? String(options.width) : args.defaultWidth;
      valuesArray = args.values[_width] || args.values[_defaultWidth];
    }
    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex;
    // @ts-ignore: For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!
    return valuesArray[index];
  };
}

/***/ }),
/* 201 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _lib_buildMatchFn_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(202);
/* harmony import */ var _lib_buildMatchPatternFn_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(203);


var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],
  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: Object(_lib_buildMatchPatternFn_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: function valueCallback(value) {
      return parseInt(value, 10);
    }
  }),
  era: Object(_lib_buildMatchFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseEraPatterns,
    defaultParseWidth: 'any'
  }),
  quarter: Object(_lib_buildMatchFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: 'any',
    valueCallback: function valueCallback(index) {
      return index + 1;
    }
  }),
  month: Object(_lib_buildMatchFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: 'any'
  }),
  day: Object(_lib_buildMatchFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseDayPatterns,
    defaultParseWidth: 'any'
  }),
  dayPeriod: Object(_lib_buildMatchFn_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: 'any',
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: 'any'
  })
};
/* harmony default export */ __webpack_exports__["default"] = (match);

/***/ }),
/* 202 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return buildMatchFn; });
function buildMatchFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var width = options.width;
    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    var matchResult = string.match(matchPattern);
    if (!matchResult) {
      return null;
    }
    var matchedString = matchResult[0];
    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    var key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    }) : findKey(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    });
    var value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}
function findKey(object, predicate) {
  for (var key in object) {
    if (object.hasOwnProperty(key) && predicate(object[key])) {
      return key;
    }
  }
  return undefined;
}
function findIndex(array, predicate) {
  for (var key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }
  return undefined;
}

/***/ }),
/* 203 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return buildMatchPatternFn; });
function buildMatchPatternFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var matchResult = string.match(args.matchPattern);
    if (!matchResult) return null;
    var matchedString = matchResult[0];
    var parseResult = string.match(args.parsePattern);
    if (!parseResult) return null;
    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}

/***/ }),
/* 204 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return isSameWeek; });
/* harmony import */ var _startOfWeek_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(205);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);


/**
 * @name isSameWeek
 * @category Week Helpers
 * @summary Are the given dates in the same week (and month and year)?
 *
 * @description
 * Are the given dates in the same week (and month and year)?
 *
 * @param {Date|Number} dateLeft - the first date to check
 * @param {Date|Number} dateRight - the second date to check
 * @param {Object} [options] - an object with options.
 * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}
 * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @returns {Boolean} the dates are in the same week (and month and year)
 * @throws {TypeError} 2 arguments required
 * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6
 *
 * @example
 * // Are 31 August 2014 and 4 September 2014 in the same week?
 * const result = isSameWeek(new Date(2014, 7, 31), new Date(2014, 8, 4))
 * //=> true
 *
 * @example
 * // If week starts with Monday,
 * // are 31 August 2014 and 4 September 2014 in the same week?
 * const result = isSameWeek(new Date(2014, 7, 31), new Date(2014, 8, 4), {
 *   weekStartsOn: 1
 * })
 * //=> false
 *
 * @example
 * // Are 1 January 2014 and 1 January 2015 in the same week?
 * const result = isSameWeek(new Date(2014, 0, 1), new Date(2015, 0, 1))
 * //=> false
 */
function isSameWeek(dirtyDateLeft, dirtyDateRight, options) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(2, arguments);
  var dateLeftStartOfWeek = Object(_startOfWeek_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDateLeft, options);
  var dateRightStartOfWeek = Object(_startOfWeek_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDateRight, options);
  return dateLeftStartOfWeek.getTime() === dateRightStartOfWeek.getTime();
}

/***/ }),
/* 205 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return startOfWeek; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(176);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(172);
/* harmony import */ var _lib_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(185);




/**
 * @name startOfWeek
 * @category Week Helpers
 * @summary Return the start of a week for the given date.
 *
 * @description
 * Return the start of a week for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|Number} date - the original date
 * @param {Object} [options] - an object with options.
 * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}
 * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @returns {Date} the start of a week
 * @throws {TypeError} 1 argument required
 * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6
 *
 * @example
 * // The start of a week for 2 September 2014 11:55:00:
 * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Sun Aug 31 2014 00:00:00
 *
 * @example
 * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:
 * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })
 * //=> Mon Sep 01 2014 00:00:00
 */
function startOfWeek(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(1, arguments);
  var defaultOptions = Object(_lib_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_3__["getDefaultOptions"])();
  var weekStartsOn = Object(_lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0);

  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  var day = date.getDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setDate(date.getDate() - diff);
  date.setHours(0, 0, 0, 0);
  return date;
}

/***/ }),
/* 206 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DOM", function() { return DOM; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(146);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(122);





class _DOM {
  constructor() {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parser", new DOMParser());
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "element", (tag, attributes, ...children) => {
      try {
        if (typeof tag === 'function') {
          const node = tag();
          if (children) {
            this.appendChildren(node, children);
          }
          return node;
        }
        if (tag === 'fragment') {
          const node = document.createDocumentFragment();
          if (children) {
            this.appendChildren(node, children);
          }
          return node;
        }
        const element = document.createElement(tag);
        if (attributes) {
          this.setElementAttributes(element, attributes);
        }
        if (children) {
          this.appendChildren(element, children);
        }
        return element;
      } catch (err) {
        window.console.log(err.message);
        window.console.log(tag, attributes, children);
        throw err;
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setElementAttributes", (element, attributes) => {
      const filteredAttributes = Object.entries(attributes).filter(([, value]) => _lib_jsUtils__WEBPACK_IMPORTED_MODULE_4__["Utils"].isSet(value));
      for (const [key, value] of filteredAttributes) {
        if (key === 'attrs' && typeof value === 'object') {
          this.setCustomElementAttributes(element, value);
        } else if (key === 'extend' && typeof value === 'function') {
          attributes.extend = value.bind(null, element);
        } else if (key === 'ref' && typeof value === 'function') {
          value(element);
        } else if (key.startsWith('on') && typeof value === 'function') {
          const eventType = key.slice(2);
          element.addEventListener(eventType, value);
        } else if (typeof value === 'object') {
          this.setElementProperties(element, key, value);
        } else if (key.includes('-')) {
          this.setCustomElementAttributes(element, {
            [key]: value
          });
        } else {
          // @ts-ignore
          element[key] = value;
        }
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setCustomElementAttributes", (element, attributes) => {
      const filteredAttributes = Object.entries(attributes).filter(([, value]) => _lib_jsUtils__WEBPACK_IMPORTED_MODULE_4__["Utils"].isSet(value));
      for (const [key, value] of filteredAttributes) {
        element.setAttribute(key, value);
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setElementProperties", (element, attribute, properties) => {
      const filteredProperties = Object.entries(properties).filter(([, value]) => _lib_jsUtils__WEBPACK_IMPORTED_MODULE_4__["Utils"].isSet(value));
      for (const [key, value] of filteredProperties) {
        // @ts-ignore
        element[attribute][key] = value;
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "appendChildren", (node, children) => {
      for (const child of children) {
        if (typeof child === 'string' || typeof child === 'number') {
          const textNode = document.createTextNode(child);
          node.appendChild(textNode);
        } else if (child instanceof Node) {
          node.appendChild(child);
        } else if (Array.isArray(child)) {
          this.appendChildren(node, child);
        }
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "fragment", () => {
      return document.createDocumentFragment();
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "insert", (referenceEl, position, node) => {
      const elements = node instanceof DocumentFragment ? Array.from(node.children) : [node];
      try {
        const referenceElParent = referenceEl.parentElement;
        switch (position) {
          case 'beforebegin':
            if (referenceElParent) {
              referenceElParent.insertBefore(node, referenceEl);
            }
            break;
          case 'afterbegin':
            referenceEl.insertBefore(node, referenceEl.firstChild);
            break;
          case 'beforeend':
            referenceEl.appendChild(node);
            break;
          case 'afterend':
            if (referenceElParent) {
              referenceElParent.insertBefore(node, referenceEl.nextSibling);
            }
            break;
          case 'atouter':
            if (referenceElParent) {
              referenceElParent.insertBefore(node, referenceEl.nextSibling);
              referenceEl.remove();
            }
            break;
          case 'atinner':
            referenceEl.innerHTML = '';
            referenceEl.appendChild(node);
            break;
          // no default
        }
        if (node instanceof DocumentFragment && node.children.length > 0) {
          throw new Error('Failed to insert elements');
        }
      } catch (error) {
        window.console.log(error.message);
        window.console.log(referenceEl, position, node);
      }
      return elements;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parse", html => {
      return this.parser.parseFromString(html, 'text/html');
    });
  }
}
const DOM = new _DOM();

/***/ }),
/* 207 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventDispatcher", function() { return EventDispatcher; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);


class _EventDispatcher {
  constructor() {
    /** @type {Object<number, Function>} */
    this.subscribers = {};
  }

  /**
   * @param {number} event
   * @param {Function} callback
   */
  subscribe(event, callback) {
    if (!this.subscribers[event]) {
      this.subscribers[event] = [];
    }
    this.subscribers[event].push(callback);
    return this.unsubscribe.bind(this, event, callback);
  }

  /**
   * @param {number} event
   * @param {Function} callback
   */
  unsubscribe(event, callback) {
    if (!this.subscribers[event]) {
      return;
    }
    this.subscribers[event] = this.subscribers[event].filter(subscriber => subscriber !== callback);
  }

  /**
   * @param {number} event
   * @param {Array} params
   */
  async dispatch(event, ...params) {
    if (!this.subscribers[event]) {
      return;
    }
    for (const subscriber of this.subscribers[event]) {
      try {
        await subscriber(...params);
      } catch (error) {
        window.console.log(error.message);
      }
    }
  }
}
const EventDispatcher = new _EventDispatcher();


/***/ }),
/* 208 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FetchRequest", function() { return FetchRequest; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(122);
/* harmony import */ var _DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);
/* harmony import */ var _Lock__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(209);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(132);










class FetchRequest {
  static delete(url, options = {}) {
    return FetchRequest.send(url, {
      ...options,
      method: 'DELETE'
    });
  }
  static get(url, options = {}) {
    return FetchRequest.send(url, {
      ...options,
      method: 'GET'
    });
  }
  static patch(url, options = {}) {
    return FetchRequest.send(url, {
      ...options,
      method: 'PATCH'
    });
  }
  static post(url, options = {}) {
    return FetchRequest.send(url, {
      ...options,
      method: 'POST'
    });
  }
  static put(url, options = {}) {
    return FetchRequest.send(url, {
      ...options,
      method: 'PUT'
    });
  }
  static async send(url, options) {
    if (!FetchRequest.REQUIRED_HEADERS['Esgst-Version']) {
      FetchRequest.REQUIRED_HEADERS['Esgst-Version'] = _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.currentVersion;
    }
    let response = null;
    let lock = null;
    url = url.replace(/^\//, `https://${window.location.hostname}/`).replace(/^https?:/, _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.locationHref.match(/^http:/) ? 'http:' : 'https:');
    if (options.pathParams) {
      url = FetchRequest.addPathParams(url, options.pathParams);
    }
    if (options.queryParams) {
      url = FetchRequest.addQueryParams(url, options.queryParams);
    }
    options.headers = {
      ...FetchRequest.DEFAULT_HEADERS,
      ...options.headers,
      ...FetchRequest.REQUIRED_HEADERS
    };
    try {
      const isInternal = url.match(new RegExp(window.location.hostname));
      if (options.queue) {
        lock = new _Lock__WEBPACK_IMPORTED_MODULE_7__["Lock"]('request', {
          threshold: typeof options.queue === 'number' ? options.queue : 1000
        });
      } else if (isInternal && !options.doNotQueue) {
        await _browser__WEBPACK_IMPORTED_MODULE_4__["browser"].runtime.sendMessage({
          action: 'queue_request',
          key: 'sg'
        });
      } else if (url.match(/^https?:\/\/store.steampowered.com/) && _Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('limitSteamStore')) {
        lock = new _Lock__WEBPACK_IMPORTED_MODULE_7__["Lock"]('steamStore', {
          threshold: 200
        });
      }
      if (lock) {
        await lock.lock();
      }
      if (isInternal) {
        response = await FetchRequest.sendInternal(url, options);
        _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.requestLog.unshift({
          url,
          timestamp: Date.now()
        });
        if (response.redirected) {
          _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.requestLog.unshift({
            url: response.url,
            timestamp: Date.now()
          });
        }
        await _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.setValue('requestLog', JSON.stringify(_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.requestLog));
      } else {
        response = await FetchRequest.sendExternal(url, options);
      }
      if (lock) {
        await lock.unlock();
      }
      response.json = null;
      response.html = null;
      try {
        response.json = JSON.parse(response.text);
      } catch (err) {}
      if (!response.json) {
        try {
          response.html = _DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].parse(response.text);
        } catch (err) {}
      }
      if (response.url.match(/www.steamgifts.com/) && response.html) {
        _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.lookForPopups(response);
      }
      return response;
    } catch (err) {
      if (lock) {
        await lock.unlock();
      }
      throw err;
    }
  }
  static async sendInternal(url, options) {
    const {
      fetchObj,
      fetchOptions,
      abortController
    } = await FetchRequest.getFetchObj(options);
    const {
      timeout = 10000
    } = options;
    const timeoutId = window.setTimeout(() => abortController.abort(), timeout);
    fetchOptions.signal = abortController.signal;
    const response = await fetchObj(url, fetchOptions);
    window.clearTimeout(timeoutId);
    const text = await response.text();
    if (!response.ok) {
      throw new Error(text);
    }
    return {
      status: response.status,
      url: response.url,
      redirected: response.redirected,
      text
    };
  }
  static async sendExternal(url, options) {
    const manipulateCookies = (await _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.getBrowserInfo()).name === 'Firefox' && _Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('manipulateCookies');
    const messageOptions = {
      action: 'fetch',
      blob: options.blob,
      fileName: options.fileName,
      manipulateCookies,
      parameters: JSON.stringify(FetchRequest.getFetchOptions(options, manipulateCookies)),
      timeout: options.timeout,
      url
    };
    let response = await _browser__WEBPACK_IMPORTED_MODULE_4__["browser"].runtime.sendMessage(messageOptions);
    if (typeof response === 'string') {
      response = JSON.parse(response);
    }
    if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(response.error)) {
      throw new Error(response.error);
    }
    return {
      status: response.status,
      url: response.url,
      redirected: response.redirected,
      text: response.text
    };
  }
  static async getFetchObj(options) {
    let fetchObj = null;
    let fetchOptions = FetchRequest.getFetchOptions(options);
    let abortController = null;
    if ((await _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.getBrowserInfo()).name === 'Firefox' && 'wrappedJSObject' in window && window.wrappedJSObject) {
      fetchObj = XPCNativeWrapper(window.wrappedJSObject.fetch);
      window.wrappedJSObject.fetchOptions = cloneInto(fetchOptions, window);
      fetchOptions = XPCNativeWrapper(window.wrappedJSObject.fetchOptions);
      abortController = new (XPCNativeWrapper(window.wrappedJSObject.AbortController))();
    } else {
      fetchObj = window.fetch;
      abortController = new AbortController();
    }
    return {
      fetchObj,
      fetchOptions,
      abortController
    };
  }
  static getFetchOptions(options, manipulateCookies = false) {
    return {
      body: options.data,
      credentials: options.anon || manipulateCookies ? 'omit' : 'include',
      headers: options.headers,
      method: options.method,
      redirect: 'follow'
    };
  }
  static addPathParams(url, params = {}) {
    if (!Object.keys(params).length) {
      return url;
    }
    for (const key in params) {
      url = url.replace(new RegExp(`%${key}%`), encodeURIComponent(params[key]));
    }
    return url;
  }
  static addQueryParams(url, params = {}) {
    if (!Object.keys(params).length) {
      return url;
    }
    const queryParams = [];
    for (const key in params) {
      queryParams.push(`${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`);
    }
    return `${url}?${queryParams.join('&')}`;
  }
}
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(FetchRequest, "DEFAULT_HEADERS", {
  'Content-Type': 'application/x-www-form-urlencoded'
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(FetchRequest, "REQUIRED_HEADERS", {
  'Esgst-Version': '',
  From: 'esgst.extension@gmail.com'
});

/***/ }),
/* 209 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Lock", function() { return Lock; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(90);


class Lock {
  constructor(key, data = {}) {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "data", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "locked", false);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "lock", async () => {
      const response = await _browser__WEBPACK_IMPORTED_MODULE_1__["browser"].runtime.sendMessage({
        action: 'do_lock',
        lock: JSON.stringify(this.data)
      });
      this.locked = JSON.parse(response);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "update", () => {
      return _browser__WEBPACK_IMPORTED_MODULE_1__["browser"].runtime.sendMessage({
        action: 'update_lock',
        lock: JSON.stringify(this.data)
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "unlock", () => {
      return _browser__WEBPACK_IMPORTED_MODULE_1__["browser"].runtime.sendMessage({
        action: 'do_unlock',
        lock: JSON.stringify(this.data)
      });
    });
    this.data = {
      uuid: crypto.randomUUID(),
      key: `${key}Lock`,
      threshold: 100,
      timeout: 15000,
      tryOnce: false,
      ...data
    };
  }
  get isLocked() {
    return this.locked;
  }
}

/***/ }),
/* 210 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Logger", function() { return Logger; });
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97);
/* harmony import */ var _Popup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(211);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(132);
/* harmony import */ var _DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




const INFO = 'info';
const WARNING = 'warning';
const ERROR = 'error';
const PRIORITY = [ERROR, WARNING, INFO];
class _Logger {
  constructor() {
    this.logs = [];
    this.button = null;
    this.currentMaxLevel = INFO;
  }
  info() {
    const message = this.getMessage(arguments);
    window.console.info(message);
    this.logs.push({
      level: INFO,
      message
    });
    if (_Settings__WEBPACK_IMPORTED_MODULE_0__["Settings"].get('notifyLogs')) {
      this.addButton(INFO);
    }
  }
  warning() {
    const message = this.getMessage(arguments);
    window.console.warn(message);
    this.logs.push({
      level: WARNING,
      message
    });
    if (_Settings__WEBPACK_IMPORTED_MODULE_0__["Settings"].get('notifyLogs')) {
      this.addButton(WARNING);
    }
  }
  error() {
    const message = this.getMessage(arguments);
    window.console.error(message);
    this.logs.push({
      level: ERROR,
      message
    });
    if (_Settings__WEBPACK_IMPORTED_MODULE_0__["Settings"].get('notifyLogs')) {
      this.addButton(ERROR);
    }
  }
  getMessage(args) {
    return `[ESGST] ${Array.from(args).map(x => typeof x === 'string' ? x : JSON.stringify(x)).join(' ')}`;
  }
  addButton(level) {
    if (this.button) {
      if (PRIORITY.indexOf(level) < PRIORITY.indexOf(this.currentMaxLevel)) {
        this.button.nodes.outer.classList.remove(`esgst-logs-${this.currentMaxLevel}`);
        this.button.nodes.outer.classList.add(`esgst-logs-${level}`);
        this.currentMaxLevel = level;
      }
      return;
    }
    this.button = _Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].header.addButtonContainer({
      buttonIcon: 'fa fa-bug',
      buttonName: 'ESGST Logs',
      isActive: true,
      isNotification: true,
      side: 'right'
    });
    this.button.nodes.outer.classList.add('esgst-logs', `esgst-logs-${level}`);
    this.button.nodes.buttonIcon.title = _Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].common.getFeatureTooltip('notifyLogs', 'View logs');
    this.button.nodes.outer.addEventListener('click', this.showPopup.bind(this));
    this.currentMaxLevel = level;
  }
  showPopup() {
    const popup = new _Popup__WEBPACK_IMPORTED_MODULE_1__["Popup"]({
      addScrollable: 'left',
      icon: 'fa-bug',
      isTemp: true,
      title: 'Logs'
    });
    _DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(popup.scrollable, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "popup__keys__list"
    }, this.logs.map(x => _DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: `esgst-log esgst-log-${x.level}`
    }, x.message))));
    popup.open();
  }
}
const Logger = new _Logger();


/***/ }),
/* 211 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Popup", function() { return Popup; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(212);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(218);
/* harmony import */ var _DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _Scope__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(219);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(132);










/**
 * @typedef {Object} PopupOptions
 * @property {string} icon
 * @property {string} title
 * @property {import('../components/Button').ButtonOptions[]} buttons
 * @property {boolean} isTemp
 */

class Popup {
  /**
   * @param {Partial<PopupOptions>} [details]
   */
  constructor(details = {}) {
    this.custom = {};
    this.results = undefined;
    this.Options = undefined;
    this.Results = undefined;
    this.textArea = undefined;
    this.temp = details.isTemp;
    _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(document.body, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-hidden esgst-popup-layer",
      ref: ref => this.layer = ref
    }, details.popup || _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-popup"
    }, _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: `esgst-popup-heading ${!details.icon && !details.title ? 'esgst-hidden' : ''}`
    }, _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
      className: `fa ${details.icon} esgst-popup-icon${details.icon ? '' : ' esgst-hidden'}`
    }), _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: `esgst-popup-title${details.title ? '' : ' esgst-hidden'}`
    }, details.title)), _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-popup-description"
    }), _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: `esgst-popup-scrollable ${details.addScrollable === 'left' ? 'esgst-text-left' : ''}`
    }, details.scrollableContent), _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-popup-actions"
    }, _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
      className: "esgst-hidden",
      href: _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.settingsUrl
    }, "Settings"), _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
      className: "esgst-popup-close"
    }, "Close"))), _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-popup-modal",
      title: "Click to close the modal"
    })));
    this.onCloseByUser = details.onCloseByUser;
    this.onClose = details.onClose;
    this.popup = this.layer.firstElementChild;
    this.modal = this.layer.lastElementChild;
    if (details.popup) {
      this.popup.classList.add('esgst-popup');
      this.popup.style.display = 'block';
      this.popup.style.maxHeight = `calc(100% - 150px)`;
      this.popup.style.maxWidth = `calc(100% - 150px)`;
    } else {
      this.popup.style.maxHeight = `calc(100% - 50px)`;
      this.popup.style.maxWidth = `calc(100% - 50px)`;
      this.icon = this.popup.firstElementChild.firstElementChild;
      this.title = this.icon.nextElementSibling;
      this.description = this.popup.firstElementChild.nextElementSibling;
      this.scrollable = this.description.nextElementSibling;
      this.actions = this.scrollable.nextElementSibling;
      let settings = this.actions.firstElementChild;
      if (!details.settings) {
        settings.classList.remove('esgst-hidden');
        settings.addEventListener('click', event => {
          if (!_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('openSettingsInTab')) {
            event.preventDefault();
            _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.modules.settingsModule.loadMenu(true);
          }
        });
      }
    }
    let closeButton = this.popup.querySelector(`.esgst-popup-close, .b-close`);
    if (closeButton) {
      closeButton.addEventListener('click', () => this.close(true));
    }
    this.modal.addEventListener('click', () => this.close(true));
    if (details.textInputs) {
      this.textInputs = [];
      details.textInputs.forEach(textInput => {
        let input;
        _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.description, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, textInput.title || null, _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
          placeholder: textInput.placeholder || '',
          ref: ref => input = ref,
          type: "text"
        })));
        input.addEventListener('keydown', event => {
          var _this$buttons$;
          if (event.key !== 'Enter' || (_this$buttons$ = this.buttons[0]) !== null && _this$buttons$ !== void 0 && _this$buttons$.isBusy) return;
          this.buttons[0].onClick();
        });
        this.textInputs.push(input);
      });
    }
    if (details.options) {
      this.description.appendChild(_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.createOptions(details.options));
      let inputs = this.description.lastElementChild.getElementsByTagName('input');
      for (let input of inputs) {
        switch (input.getAttribute('type')) {
          case 'number':
            _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.observeNumChange(input, input.getAttribute('name'), true);
            break;
          case 'text':
            _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.observeChange(input, input.getAttribute('name'), true);
            break;
          default:
            break;
        }
      }
    }
    if (details.buttons) {
      this.buttons = [];
      details.buttons.forEach(buttonOptions => {
        const button = _components_Button__WEBPACK_IMPORTED_MODULE_3__["Button"].create(buttonOptions).insert(this.description, 'beforeend');
        this.buttons.push(button);
      });
    }
    if (details.addProgress) {
      this.progressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_4__["NotificationBar"].create().insert(this.description, 'beforeend').hide();
      this.overallProgressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_4__["NotificationBar"].create().insert(this.description, 'beforeend').hide();
    }
    this.id = _Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].create(null, this.popup).id;
  }
  open(callback) {
    _Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].setCurrent(this.id);
    this.isOpen = true;
    let n = 1000 + document.querySelectorAll(`.esgst-popup-layer:not(.esgst-hidden), .esgst-popout:not(.esgst-hidden)`).length;
    if (_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.openPopups > 0) {
      const highestN = parseInt(_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.popups[_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.openPopups - 1].popup.style.zIndex || 0);
      if (n <= highestN) {
        n = highestN + 1;
      }
    }
    _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.openPopups += 1;
    _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.popups.push(this);
    this.layer.classList.remove('esgst-hidden');
    this.layer.style.zIndex = n;
    if (this.textInputs) {
      this.textInputs[0].focus();
    }
    if (callback) {
      callback();
    }
  }
  close(byUser) {
    _Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].resetCurrent();
    if (this.temp) {
      _Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].remove(this.id);
      this.layer.remove();
    } else {
      this.layer.classList.add('esgst-hidden');
      if (_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('minimizePanel')) {
        _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.minimizePanel_addItem(this);
      }
    }
    if (byUser && this.onCloseByUser) {
      this.onCloseByUser();
    }
    if (this.onClose) {
      this.onClose();
    }
    _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.openPopups -= 1;
    _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.popups.pop();
    this.isOpen = false;
  }
  getTextInputValue(index) {
    return this.textInputs[index].value;
  }
  setScrollable(jsx) {
    _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.scrollable, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, jsx));
  }

  /**
   * @param {*} [jsx]
   * @returns {HTMLElement}
   */
  getScrollable(jsx) {
    let scrollableEl;
    _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.scrollable, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      ref: ref => scrollableEl = ref
    }, jsx));
    return scrollableEl;
  }
  clear() {
    this.progressBar.reset().hide();
    this.overallProgressBar.reset().hide();
    this.scrollable.innerHTML = '';
  }
  setIcon(icon) {
    this.icon.className = `fa ${icon}`;
  }
  setTitle(title) {
    _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.title, 'atinner', typeof title === 'string' ? _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, title) : title);
  }

  /**
   *
   * @param [temp]
   */
  setDone(temp) {
    this.temp = temp;
    if (_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('minimizePanel') && !this.isOpen) {
      _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.minimizePanel_alert(this);
    }
  }
  reposition() {}
}


/***/ }),
/* 212 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Button", function() { return Button; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SgButton", function() { return SgButton; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StButton", function() { return StButton; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(207);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(213);
/* harmony import */ var _constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(215);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(216);
/* harmony import */ var _constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(214);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(122);
/* harmony import */ var _Base__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(217);

var _Button;













class Button extends _Base__WEBPACK_IMPORTED_MODULE_13__["Base"] {
  constructor(options, namespace) {
    super(namespace);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_data", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_nodes", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_isBusy", false);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_currentStateNumber", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_conflicts", []);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_queue", 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "insert", (referenceNode, position) => {
      if (!this._nodes.outer) {
        this.build();
      }
      if (!this._nodes.outer) {
        throw this.getError('failed to insert');
      }
      if (this._nodes.container) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(referenceNode, position, this._nodes.container);
      } else if (referenceNode.matches(Button.containerSelectors[this._namespace])) {
        // The button needs to be wrapped in a container to prevent styles from being applied.
        _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(referenceNode, position, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
          className: `${_constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["EsgstClassNames"].buttonContainer} ${this._data.additionalContainerClass}`,
          ref: ref => this._nodes.container = ref
        }, this._nodes.outer));
      } else {
        _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(referenceNode, position, this._nodes.outer);
      }
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "destroy", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to destroy');
      }
      this._nodes.outer.remove();
      if (this._nodes.container) {
        this._nodes.container.remove();
      }
      this._nodes.outer = null;
      this._hasBuilt = false;
      this.reset();
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "reset", () => {
      const containerNode = this._nodes.container;
      const outerNode = this._nodes.outer;
      const nameNode = this._nodes.name;
      this._data = Button.getInitialData();
      this._nodes = Button.getInitialNodes();
      if (outerNode) {
        this._nodes.container = containerNode;
        this._nodes.outer = outerNode;
        this._nodes.name = nameNode;
        this._hasBuilt = false;
        this._currentStateNumber = this._data.initialStateNumber;
        this.build();
      }
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setColor", color => {
      if (!this._nodes.outer) {
        throw this.getError('failed to set color');
      }
      if (this._hasBuilt && this._data.color === color) {
        return this;
      }
      const classNames = _constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][this._namespace].button;
      this._data.color = color;
      this._nodes.outer.className = [_constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["EsgstClassNames"].button, classNames.root, classNames.colors[this._data.color]].join(' ').trim();
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setDisabled", isDisabled => {
      if (!this._nodes.outer) {
        throw this.getError('failed to set disabled');
      }
      if (this._hasBuilt && this._data.isDisabled === isDisabled) {
        return this;
      }
      this._data.isDisabled = isDisabled;
      this._nodes.outer.classList.toggle(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][this._namespace].disabled, this._data.isDisabled);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setTooltip", tooltip => {
      if (!this._nodes.outer) {
        throw this.getError('failed to set tooltip');
      }
      if (this._hasBuilt && this._data.tooltip === tooltip) {
        return this;
      }
      this._data.tooltip = tooltip;
      this._nodes.outer.title = tooltip;
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setContent", (icons, name) => {
      this.setIcons(icons);
      this.setName(name);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setName", name => {
      if (!this._nodes.name) {
        throw this.getError('failed to set name');
      }
      if (this._hasBuilt && this._data.name === name) {
        return this;
      }
      this._data.name = name;
      this._nodes.name.textContent = this._data.name;
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parse", referenceNode => {
      if (!referenceNode.matches(Button.selectors[this._namespace])) {
        throw this.getError('failed to parse');
      }
      this._nodes.outer = referenceNode;
      const outerNodeParent = this._nodes.outer.parentElement;
      if (outerNodeParent !== null && outerNodeParent !== void 0 && outerNodeParent.matches(`.${_constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["EsgstClassNames"].buttonContainer}`)) {
        this._nodes.container = outerNodeParent;
      }
      this.parseColor();
      this.parseDisabled();
      this.parseTooltip();
      this.parseIcons();
      this.parseName();
      this._data.states = [{
        color: this._data.color,
        isDisabled: this._data.isDisabled,
        tooltip: this._data.tooltip,
        icons: this._data.icons,
        name: this._data.name
      }];
      this._data.initialStateNumber = 1;
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseColor", () => {
      var _Button$colorRegExps$;
      if (!this._nodes.outer) {
        throw this.getError('failed to parse color');
      }
      const className = (_Button$colorRegExps$ = Button.colorRegExps[this._namespace].exec(this._nodes.outer.className)) === null || _Button$colorRegExps$ === void 0 ? void 0 : _Button$colorRegExps$[1];
      // @ts-expect-error
      this._data.color = _constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][this._namespace].button.reversedColors[className];
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseDisabled", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to parse tooltip');
      }
      this._data.isDisabled = this._nodes.outer.classList.contains(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][this._namespace].disabled);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseTooltip", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to parse tooltip');
      }
      this._data.tooltip = this._nodes.outer.title;
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseIcons", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to parse icons');
      }
      this._data.icons = [];
      this._nodes.icons = Array.from(this._nodes.outer.querySelectorAll('i'));
      for (const iconNode of this._nodes.icons) {
        const iconParts = [];
        let matches;
        while ((matches = Button.iconsRegExp.exec(iconNode.className)) !== null) {
          iconParts.push(matches[0]);
        }
        this._data.icons.push(iconParts.join(' '));
      }
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "onClick", async doEnqueue => {
      var _state$switchTo$onCli, _state$switchTo;
      if (this._data.isDisabled) {
        if (doEnqueue) {
          this._queue += 1;
        }
        return this;
      }
      const state = this._data.states[this._currentStateNumber - 1];
      if (!state) {
        throw this.getError('current state does not exist');
      }
      this._isBusy = true;
      this.disableConflicts();
      let nextStateNumber = (_state$switchTo$onCli = (_state$switchTo = state.switchTo) === null || _state$switchTo === void 0 ? void 0 : _state$switchTo.onClick) !== null && _state$switchTo$onCli !== void 0 ? _state$switchTo$onCli : this._currentStateNumber % this._data.states.length + 1;
      if (nextStateNumber > 0) {
        this.build(nextStateNumber);
      }
      if (!state.isDisabled && state.onClick) {
        await state.onClick(this);
      }
      if (this._currentStateNumber === nextStateNumber) {
        var _state$switchTo$onRet, _state$switchTo2;
        // No other state has taken over.
        nextStateNumber = (_state$switchTo$onRet = (_state$switchTo2 = state.switchTo) === null || _state$switchTo2 === void 0 ? void 0 : _state$switchTo2.onReturn) !== null && _state$switchTo$onRet !== void 0 ? _state$switchTo$onRet : this._currentStateNumber % this._data.states.length + 1;
        if (nextStateNumber > 0) {
          this.build(nextStateNumber);
        }
      }
      this.enableConflicts();
      this._isBusy = false;
      if (this._queue > 0) {
        this._queue -= 1;
        void this.onClick();
      }
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "addConflict", button => {
      this._conflicts.push(button);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "disableConflicts", () => {
      for (const button of this._conflicts) {
        button.setDisabled(true);
      }
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "enableConflicts", () => {
      for (const button of this._conflicts) {
        button.setDisabled(false);
      }
      return this;
    });
    this._data = Button.getInitialData(options);
    this._nodes = Button.getInitialNodes();
    this._currentStateNumber = this._data.initialStateNumber;
  }
  get isBusy() {
    return this._isBusy;
  }
}
_Button = Button;
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Button, "defaultColor", 'gray');
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Button, "colorRegExps", {
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].SG]: new RegExp(`(${Object.keys(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].SG].button.reversedColors).join('|')})`),
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].ST]: new RegExp(`${_constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].ST].button.root}\\s(${Object.keys(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].ST].button.colors).join('|')})`)
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Button, "iconsRegExp", /fa-(?!fw)[\w-]+/g);
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Button, "selectors", {
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].SG]: Object.values(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].SG].button.colors).map(className => `.${className.replace(' ', '.')}`).join(', '),
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].ST]: Object.values(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].ST].button.colors).map(className => `.${_constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].SG].button.root}.${className}`).join(', ')
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Button, "containerKeys", ['mmButtonGroup', 'giveawayColumns', 'pageHeading']);
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Button, "containerSelectors", {
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].SG]: _Button.containerKeys
  // @ts-expect-error
  .map(key => {
    var _ClassNames$Namespace;
    return `.${(_ClassNames$Namespace = _constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].SG][key]) !== null && _ClassNames$Namespace !== void 0 ? _ClassNames$Namespace : _constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["EsgstClassNames"][key]}`;
  }).join(', '),
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].ST]: _Button.containerKeys
  // @ts-expect-error
  .map(key => {
    var _ClassNames$Namespace2;
    return `.${(_ClassNames$Namespace2 = _constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].ST][key]) !== null && _ClassNames$Namespace2 !== void 0 ? _ClassNames$Namespace2 : _constants_ClassNames__WEBPACK_IMPORTED_MODULE_9__["EsgstClassNames"][key]}`;
  }).join(', ')
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Button, "templates", {
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].SG]: {
    loading: {
      color: 'white',
      icons: ['fa-circle-o-notch fa-spin']
    },
    success: {
      color: 'green',
      icons: ['fa-check-circle']
    },
    warning: {
      color: 'yellow',
      icons: ['fa-exclamation-circle']
    },
    error: {
      color: 'red',
      icons: ['fa-times-circle']
    },
    info: {
      color: 'gray',
      icons: []
    }
  },
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].ST]: {
    loading: {
      color: 'white',
      icons: ['fa-circle-o-notch fa-spin']
    },
    success: {
      color: 'green',
      icons: ['fa-check']
    },
    warning: {
      color: 'yellow',
      icons: ['fa-exclamation']
    },
    error: {
      color: 'red',
      icons: ['fa-times']
    },
    info: {
      color: 'gray',
      icons: []
    }
  }
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Button, "getInitialData", (options = {}) => {
  let additionalContainerClass = '';
  let additionalClass = '';
  let states;
  let initialStateNumber = 1;
  if (Array.isArray(options)) {
    states = options;
  } else if ('color' in options || 'template' in options) {
    states = [options];
  } else {
    var _options$additionalCo, _options$additionalCl, _options$states, _options$initialState;
    additionalContainerClass = (_options$additionalCo = options.additionalContainerClass) !== null && _options$additionalCo !== void 0 ? _options$additionalCo : '';
    additionalClass = (_options$additionalCl = options.additionalClass) !== null && _options$additionalCl !== void 0 ? _options$additionalCl : '';
    states = [...((_options$states = options.states) !== null && _options$states !== void 0 ? _options$states : [])];
    initialStateNumber = (_options$initialState = options.initialStateNumber) !== null && _options$initialState !== void 0 ? _options$initialState : 1;
  }
  return {
    additionalContainerClass,
    additionalClass,
    color: _Button.defaultColor,
    isHidden: false,
    isDisabled: false,
    tooltip: '',
    icons: [],
    name: '',
    states,
    initialStateNumber
  };
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Button, "getInitialNodes", () => {
  return {
    container: null,
    outer: null,
    icons: [],
    name: null
  };
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Button, "create", (options = {}, namespace = _class_Session__WEBPACK_IMPORTED_MODULE_8__["Session"].namespace) => {
  switch (namespace) {
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].SG:
      return new SgButton(options);
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].ST:
      return new StButton(options);
    default:
      throw _Button.getError('failed to create');
  }
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Button, "getAll", (referenceNode, namespace = _class_Session__WEBPACK_IMPORTED_MODULE_8__["Session"].namespace) => {
  const buttons = [];
  const nodes = referenceNode.querySelectorAll(_Button.selectors[namespace]);
  for (const node of nodes) {
    const button = _Button.create({}, namespace);
    button.parse(node);
    buttons.push(button);
  }
  return buttons;
});
class SgButton extends Button {
  constructor(options) {
    super(options, _constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].SG);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "build", (stateNumber = this._currentStateNumber) => {
      var _state$isDisabled, _state$name;
      if (this._hasBuilt && this._currentStateNumber === stateNumber) {
        return this;
      }
      if (!this._nodes.outer) {
        var _this$_nodes$outer;
        this._nodes.outer = _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
          onclick: this.onClick
        });
        this._nodes.name = document.createTextNode('');
        (_this$_nodes$outer = this._nodes.outer) === null || _this$_nodes$outer === void 0 || _this$_nodes$outer.appendChild(this._nodes.name);
      }
      const state = this._data.states[stateNumber - 1];
      if (!state) {
        throw this.getError('state does not exist');
      }
      let color;
      let icons;
      if ('template' in state) {
        ({
          color,
          icons
        } = Button.templates[this._namespace][state.template]);
      } else {
        ({
          color,
          icons
        } = state);
      }
      this.setColor(color);
      if (this._data.additionalClass) {
        var _this$_nodes$outer2;
        (_this$_nodes$outer2 = this._nodes.outer) === null || _this$_nodes$outer2 === void 0 || _this$_nodes$outer2.classList.add(this._data.additionalClass);
      }
      this.toggleHidden(this._data.isHidden);
      this.setDisabled((_state$isDisabled = state.isDisabled) !== null && _state$isDisabled !== void 0 ? _state$isDisabled : false);
      if (state.tooltip) {
        this.setTooltip(state.tooltip);
      }
      this.setContent(icons !== null && icons !== void 0 ? icons : [], (_state$name = state.name) !== null && _state$name !== void 0 ? _state$name : '');
      this._hasBuilt = true;
      this._currentStateNumber = stateNumber;
      void _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_10__["Events"].BUTTON_BUILD, this);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setIcons", icons => {
      if (!this._nodes.outer) {
        throw this.getError('failed to set icons');
      }
      if (this._hasBuilt && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_12__["Utils"].isDeepEqual(this._data.icons, icons)) {
        return this;
      }
      this.removeIcons();
      this._data.icons = icons;
      this._nodes.icons = [];
      _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(this._nodes.outer, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, this._data.icons.map(icon => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: `fa ${icon}`,
        ref: ref => this._nodes.icons.push(ref)
      }), ' '))));
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "removeIcons", () => {
      if (this._data.icons.length === 0) {
        return this;
      }
      for (const iconNode of this._nodes.icons) {
        const iconNodeSibling = iconNode.nextSibling;
        iconNode.remove();
        if ((iconNodeSibling === null || iconNodeSibling === void 0 ? void 0 : iconNodeSibling.nodeType) === Node.TEXT_NODE && iconNodeSibling.textContent === ' ') {
          iconNodeSibling.remove();
        }
      }
      this._data.icons = [];
      this._nodes.icons = [];
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseName", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to parse name');
      }
      if (this._data.icons.length > 0) {
        var _nameNode;
        let nameNode = this._nodes.icons[this._nodes.icons.length - 1].nextSibling;
        if (((_nameNode = nameNode) === null || _nameNode === void 0 ? void 0 : _nameNode.nodeType) === Node.TEXT_NODE && nameNode.textContent === ' ') {
          nameNode = nameNode.nextSibling;
        }
        this._nodes.name = nameNode;
      } else {
        this._nodes.name = this._nodes.outer.firstChild;
      }
      if (!this._nodes.name) {
        throw this.getError('failed to parse name');
      }
      this._data.name = this._nodes.name.textContent.trim();
      return this;
    });
  }
}
class StButton extends Button {
  constructor(options) {
    super(options, _constants_Namespaces__WEBPACK_IMPORTED_MODULE_11__["Namespaces"].ST);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "build", (stateNumber = this._currentStateNumber) => {
      var _state$isDisabled2, _state$name2;
      if (this._hasBuilt && this._currentStateNumber === stateNumber) {
        return this;
      }
      if (!this._nodes.outer) {
        this._nodes.outer = _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
          onclick: this.onClick
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
          ref: ref => this._nodes.name = ref
        }));
      }
      const state = this._data.states[stateNumber - 1];
      if (!state) {
        throw this.getError('state does not exist');
      }
      let color;
      let icons;
      if ('template' in state) {
        ({
          color,
          icons
        } = Button.templates[this._namespace][state.template]);
      } else {
        ({
          color,
          icons
        } = state);
      }
      this.setColor(color);
      if (this._data.additionalClass) {
        var _this$_nodes$outer3;
        (_this$_nodes$outer3 = this._nodes.outer) === null || _this$_nodes$outer3 === void 0 || _this$_nodes$outer3.classList.add(this._data.additionalClass);
      }
      this.toggleHidden(this._data.isHidden);
      this.setDisabled((_state$isDisabled2 = state.isDisabled) !== null && _state$isDisabled2 !== void 0 ? _state$isDisabled2 : false);
      if (state.tooltip) {
        this.setTooltip(state.tooltip);
      }
      this.setContent(icons !== null && icons !== void 0 ? icons : [], (_state$name2 = state.name) !== null && _state$name2 !== void 0 ? _state$name2 : '');
      this._hasBuilt = true;
      this._currentStateNumber = stateNumber;
      void _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_10__["Events"].BUTTON_BUILD, this);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setIcons", icons => {
      if (!this._nodes.outer) {
        throw this.getError('failed to set icons');
      }
      if (this._hasBuilt && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_12__["Utils"].isDeepEqual(this._data.icons, icons)) {
        return this;
      }
      this.removeIcons();
      this._data.icons = icons;
      this._nodes.icons = [];
      _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(this._nodes.outer, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, this._data.icons.map(icon => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: `fa ${icon}`,
        ref: ref => this._nodes.icons.push(ref)
      }))));
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "removeIcons", () => {
      if (this._data.icons.length === 0) {
        return this;
      }
      for (const iconNode of this._nodes.icons) {
        iconNode.remove();
      }
      this._data.icons = [];
      this._nodes.icons = [];
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseName", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to parse name');
      }
      this._nodes.name = this._nodes.outer.querySelector('span:last-child');
      if (!this._nodes.name) {
        throw this.getError('failed to parse name');
      }
      this._data.name = this._nodes.name.textContent.trim();
      return this;
    });
  }
}

/***/ }),
/* 213 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ISession", function() { return ISession; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Session", function() { return Session; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _constants_Namespaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(214);


class ISession {
  /**
   * @param {string} text
   * @returns {string}
   */
  static extractXsrfToken(text) {
    return text.match(/xsrf_token=(.+)/)[1];
  }
}
class _Session extends ISession {
  constructor() {
    super();

    /** @type {ISessionCounters} */
    this.counters = {
      created: 0,
      level: {
        base: 0,
        full: 0
      },
      messages: 0,
      points: 0,
      reputation: {
        negative: 0,
        positive: 0
      },
      won: 0,
      wonDelivered: false
    };

    /** @type {boolean} */
    this.isLoggedIn = false;

    /** @type {number} */
    this.namespace = _constants_Namespaces__WEBPACK_IMPORTED_MODULE_1__["Namespaces"].SG;

    /** @type {import('../models/User').UserData | null} */
    this.user = null;

    /** @type {string} */
    this.xsrfToken = null;
  }
  init() {
    switch (window.location.hostname) {
      case 'www.steamgifts.com':
        {
          this.namespace = _constants_Namespaces__WEBPACK_IMPORTED_MODULE_1__["Namespaces"].SG;
          break;
        }
      case 'www.steamtrades.com':
        {
          this.namespace = _constants_Namespaces__WEBPACK_IMPORTED_MODULE_1__["Namespaces"].ST;
          break;
        }
      default:
        {
          throw 'Invalid namespace.';
        }
    }
  }
}
const Session = new _Session();


/***/ }),
/* 214 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Namespaces", function() { return Namespaces; });
const Namespaces = {
  SG: 0,
  ST: 1
};


/***/ }),
/* 215 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EsgstClassNames", function() { return EsgstClassNames; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClassNames", function() { return ClassNames; });
/* harmony import */ var _Namespaces__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(214);

const EsgstClassNames = {
  button: 'esgst-button',
  buttonContainer: 'esgst-button-container',
  mmButtonGroup: 'esgst-mm-button-group',
  notification: 'esgst-notification-bar'
};
const ClassNames = {
  [_Namespaces__WEBPACK_IMPORTED_MODULE_0__["Namespaces"].SG]: {
    button: {
      root: '',
      colors: {
        white: 'form__saving-button',
        'alternate-white': 'page__heading__button',
        green: 'form__submit-button',
        yellow: 'sidebar__entry-delete',
        red: 'sidebar__error',
        gray: 'form__saving-button form__saving-button--gray'
      },
      reversedColors: {
        'form__saving-button': 'white',
        page__heading__button: 'alternate-white',
        'form__submit-button': 'green',
        'sidebar__entry-delete': 'yellow',
        sidebar__error: 'red',
        'form__saving-button form__saving-button--gray': 'gray'
      }
    },
    disabled: 'is-disabled',
    giveawayColumns: 'giveaway__columns',
    hidden: 'is-hidden',
    notification: {
      root: 'notification',
      marginTop: 'notification--margin-top-small',
      colors: {
        blue: 'notification--info',
        green: 'notification--success',
        yellow: 'notification--warning',
        red: 'notification--danger',
        gray: 'notification--default'
      },
      reversedColors: {
        'notification--info': 'blue',
        'notification--success': 'green',
        'notification--warning': 'yellow',
        'notification--danger': 'red',
        'notification--default': 'gray'
      }
    },
    pageHeading: 'page__heading',
    pageHeadingBreadcrumbs: 'page__heading__breadcrumbs',
    pageHeadingButton: 'page__heading__button',
    selected: 'is-selected'
  },
  [_Namespaces__WEBPACK_IMPORTED_MODULE_0__["Namespaces"].ST]: {
    button: {
      root: 'btn_action',
      colors: {
        white: 'white',
        'alternate-white': 'page_heading_btn',
        green: 'green',
        yellow: 'yellow',
        red: 'red',
        gray: 'grey'
      },
      reversedColors: {
        white: 'white',
        page_heading_btn: 'alternate-white',
        green: 'green',
        yellow: 'yellow',
        red: 'red',
        grey: 'gray'
      }
    },
    disabled: 'is_disabled',
    hidden: 'is_hidden',
    notification: {
      root: 'notification',
      marginTop: '',
      colors: {
        blue: 'blue',
        green: 'green',
        yellow: 'yellow',
        red: 'red',
        gray: 'gray'
      },
      reversedColors: {
        blue: 'blue',
        green: 'green',
        yellow: 'yellow',
        red: 'red',
        gray: 'gray'
      }
    },
    pageHeading: 'page_heading',
    pageHeadingBreadcrumbs: 'page_heading_breadcrumbs',
    pageHeadingButton: 'page_heading_btn',
    selected: 'is_selected'
  }
};

/***/ }),
/* 216 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Events", function() { return Events; });
const Events = {
  CREATED_UPDATED: 0,
  WON_UPDATED: 1,
  MESSAGES_UPDATED: 2,
  POINTS_UPDATED: 3,
  LEVEL_UPDATED: 4,
  WISHLIST_UPDATED: 5,
  REPUTATION_UPDATED: 6,
  PAGE_REFRESHED: 7,
  HEADER_REFRESHED: 8,
  NOTIFICATION_BAR_BUILD: 9,
  BUTTON_BUILD: 10,
  PAGE_HEADING_BUILD: 11,
  GIVEAWAY_ENTER: 12,
  GIVEAWAY_LEAVE: 13,
  BEFORE_COMMENT_SUBMIT: 14
};


/***/ }),
/* 217 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Base", function() { return Base; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
/* harmony import */ var _constants_ClassNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(215);



class Base {
  constructor(namespace) {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_namespace", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_data", {
      isHidden: false
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_nodes", {
      outer: null
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_hasBuilt", false);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "insert", (referenceNode, position) => {
      if (!this._nodes.outer) {
        this.build();
      }
      if (!this._nodes.outer) {
        throw this.getError('failed to insert');
      }
      _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(referenceNode, position, this._nodes.outer);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "destroy", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to destroy');
      }
      this._nodes.outer.remove();
      this._nodes.outer = null;
      this._hasBuilt = false;
      this.reset();
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "hide", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to hide');
      }
      this._data.isHidden = true;
      this._nodes.outer.classList.add(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_2__["ClassNames"][this._namespace].hidden);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "show", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to show');
      }
      this._data.isHidden = false;
      this._nodes.outer.classList.remove(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_2__["ClassNames"][this._namespace].hidden);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "toggleHidden", isHidden => {
      if (!this._nodes.outer) {
        throw this.getError('failed to show');
      }
      this._data.isHidden = isHidden;
      this._nodes.outer.classList.toggle(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_2__["ClassNames"][this._namespace].hidden, this._data.isHidden);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "getError", message => {
      return new Error(`${this.constructor.name}: ${message}`);
    });
    this._namespace = namespace;
  }
  static getError(message) {
    return new Error(`${this.name}: ${message}`);
  }
  get namespace() {
    return this._namespace;
  }
  get data() {
    return this._data;
  }
  get nodes() {
    return this._nodes;
  }
  get hasBuilt() {
    return this._hasBuilt;
  }
}

/***/ }),
/* 218 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NotificationBar", function() { return NotificationBar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SgNotificationBar", function() { return SgNotificationBar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StNotificationBar", function() { return StNotificationBar; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(207);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(213);
/* harmony import */ var _constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(215);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(216);
/* harmony import */ var _constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(214);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(122);
/* harmony import */ var _Base__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(217);

var _NotificationBar;












class NotificationBar extends _Base__WEBPACK_IMPORTED_MODULE_12__["Base"] {
  constructor(options, namespace) {
    super(namespace);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_data", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_nodes", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setLoading", message => {
      this.setColor('blue').setContent(['fa-circle-o-notch fa-spin'], typeof message === 'undefined' ? this._data.message : message);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setSuccess", message => {
      this.setColor('green').setContent(['fa-check-circle'], typeof message === 'undefined' ? this._data.message : message);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setWarning", message => {
      this.setColor('yellow').setContent(['fa-exclamation-circle'], typeof message === 'undefined' ? this._data.message : message);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setError", message => {
      this.setColor('red').setContent(['fa-times-circle'], typeof message === 'undefined' ? this._data.message : message);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setInfo", message => {
      this.setColor('gray').setContent([], typeof message === 'undefined' ? this._data.message : message);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setColor", color => {
      if (!this._nodes.outer) {
        throw this.getError('failed to set color');
      }
      if (this._hasBuilt && this._data.color === color) {
        return this;
      }
      const classNames = _constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][this._namespace].notification;
      this._data.color = color;
      this._nodes.outer.className = [_constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["EsgstClassNames"].notification, classNames.root, classNames.colors[this._data.color], classNames.marginTop].join(' ').trim();
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parse", referenceNode => {
      if (!referenceNode.matches(NotificationBar.selectors[this._namespace])) {
        throw this.getError('failed to parse');
      }
      this._nodes.outer = referenceNode;
      this.parseColor();
      this.parseIcons();
      this.parseMessage();
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseColor", () => {
      var _NotificationBar$colo;
      if (!this._nodes.outer) {
        throw this.getError('failed to parse color');
      }
      const className = (_NotificationBar$colo = NotificationBar.colorRegExps[this._namespace].exec(this._nodes.outer.className)) === null || _NotificationBar$colo === void 0 ? void 0 : _NotificationBar$colo[1];
      // @ts-expect-error
      this._data.color = _constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][this._namespace].notification.reversedColors[className];
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseIcons", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to parse icons');
      }
      this._data.icons = [];
      this._nodes.icons = Array.from(this._nodes.outer.querySelectorAll('i'));
      for (const iconNode of this._nodes.icons) {
        const iconParts = [];
        let matches;
        while ((matches = NotificationBar.iconsRegExp.exec(iconNode.className)) !== null) {
          iconParts.push(matches[0]);
        }
        this._data.icons.push(iconParts.join(' '));
      }
      return this;
    });
    this._data = NotificationBar.getInitialData(options);
    this._nodes = NotificationBar.getInitialNodes();
  }
}
_NotificationBar = NotificationBar;
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(NotificationBar, "defaultColor", 'gray');
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(NotificationBar, "colorRegExps", {
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG]: new RegExp(`(${Object.keys(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG].notification.reversedColors).join('|')})`),
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].ST]: new RegExp(`${_constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].ST].notification.root}\\s(${Object.keys(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].ST].notification.colors).join('|')})`)
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(NotificationBar, "iconsRegExp", /fa-(?!fw)[\w-]+/g);
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(NotificationBar, "selectors", {
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG]: Object.values(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG].notification.colors).map(className => `.${_constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG].notification.root}.${className}`).join(', '),
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].ST]: Object.values(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].ST].notification.colors).map(className => `.${_constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG].notification.root}.${className}`).join(', ')
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(NotificationBar, "getInitialData", (options = {}) => {
  var _options$color, _options$isHidden, _options$icons, _options$message;
  return {
    color: (_options$color = options.color) !== null && _options$color !== void 0 ? _options$color : _NotificationBar.defaultColor,
    isHidden: (_options$isHidden = options.isHidden) !== null && _options$isHidden !== void 0 ? _options$isHidden : false,
    icons: [...((_options$icons = options.icons) !== null && _options$icons !== void 0 ? _options$icons : [])],
    message: (_options$message = options.message) !== null && _options$message !== void 0 ? _options$message : null
  };
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(NotificationBar, "getInitialNodes", () => {
  return {
    outer: null,
    icons: [],
    message: []
  };
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(NotificationBar, "create", (options = {}, namespace = _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace) => {
  switch (namespace) {
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG:
      return new SgNotificationBar(options);
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].ST:
      return new StNotificationBar(options);
    default:
      throw _NotificationBar.getError('failed to create');
  }
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(NotificationBar, "getAll", (referenceNode, namespace = _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace) => {
  const notificationBars = [];
  const nodes = referenceNode.querySelectorAll(_NotificationBar.selectors[namespace]);
  for (const node of nodes) {
    const notificationBar = _NotificationBar.create({}, namespace);
    notificationBar.parse(node);
    notificationBars.push(notificationBar);
  }
  return notificationBars;
});
class SgNotificationBar extends NotificationBar {
  constructor(options) {
    super(options, _constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_nodes", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "build", () => {
      if (!this._nodes.outer) {
        this._nodes.outer = _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null);
      }
      this.setColor(this._data.color);
      this.toggleHidden(this._data.isHidden);
      this.setContent(this._data.icons, this._data.message);
      this._hasBuilt = true;
      void _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_9__["Events"].NOTIFICATION_BAR_BUILD, this);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "reset", () => {
      const outerNode = this._nodes.outer;
      this._data = NotificationBar.getInitialData();
      this._nodes = SgNotificationBar.getInitialNodes();
      if (outerNode) {
        this._nodes.outer = outerNode;
        this._hasBuilt = false;
        this.build();
      }
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setContent", (icons, message) => {
      if (!this._nodes.outer) {
        throw this.getError('failed to set content');
      }
      const areIconsEqual = this._hasBuilt && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__["Utils"].isDeepEqual(this._data.icons, icons);
      const isMessageEqual = this._hasBuilt && this._data.message === message;
      if (!areIconsEqual && !isMessageEqual) {
        this._nodes.outer.innerHTML = '';
        this._data.icons = [];
        this._data.message = null;
        this._nodes.icons = [];
        this._nodes.message = [];
      }
      this.setIcons(icons);
      this.setMessage(message);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setIcons", icons => {
      if (!this._nodes.outer) {
        throw this.getError('failed to set icons');
      }
      if (this._hasBuilt && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__["Utils"].isDeepEqual(this._data.icons, icons)) {
        return this;
      }
      this.removeIcons();
      this._data.icons = icons;
      this._nodes.icons = [];
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this._nodes.outer, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, this._data.icons.map(icon => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: `fa ${icon}`,
        ref: ref => this._nodes.icons.push(ref)
      }), ' '))));
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setMessage", message => {
      if (!this._nodes.outer) {
        throw this.getError('failed to set message');
      }
      if (this._hasBuilt && this._data.message === message) {
        return this;
      }
      this.removeMessage();
      this._data.message = message;
      const docFragment = _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, this._data.message);
      this._nodes.message = Array.from(docFragment.childNodes);
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this._nodes.outer, 'beforeend', docFragment);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "removeIcons", () => {
      if (this._data.icons.length === 0) {
        return this;
      }
      if (!this._nodes.outer) {
        throw this.getError('failed to remove icons');
      }
      if (this._data.message) {
        for (const iconNode of this._nodes.icons) {
          const iconNodeSibling = iconNode.nextSibling;
          iconNode.remove();
          if ((iconNodeSibling === null || iconNodeSibling === void 0 ? void 0 : iconNodeSibling.nodeType) === Node.TEXT_NODE && iconNodeSibling.textContent === ' ') {
            iconNodeSibling.remove();
          }
        }
      } else {
        this._nodes.outer.innerHTML = '';
      }
      this._data.icons = [];
      this._nodes.icons = [];
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "removeMessage", () => {
      if (!this._data.message) {
        return this;
      }
      if (!this._nodes.outer) {
        throw this.getError('failed to remove message');
      }
      if (this._data.icons.length > 0) {
        for (const messageNode of this._nodes.message) {
          messageNode.remove();
        }
      } else {
        this._nodes.outer.innerHTML = '';
      }
      this._data.message = null;
      this._nodes.message = [];
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseMessage", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to parse message');
      }
      if (this._data.icons.length > 0) {
        var _messageNode;
        this._nodes.message = [];
        let messageNode = this._nodes.icons[this._nodes.icons.length - 1].nextSibling;
        if (((_messageNode = messageNode) === null || _messageNode === void 0 ? void 0 : _messageNode.nodeType) === Node.TEXT_NODE && messageNode.textContent === ' ') {
          messageNode = messageNode.nextSibling;
        }
        while (messageNode) {
          this._nodes.message.push(messageNode);
          messageNode = messageNode.nextSibling;
        }
      } else {
        this._nodes.message = Array.from(this._nodes.outer.childNodes);
      }
      this._data.message = this._nodes.outer.textContent.trim();
      return this;
    });
    this._nodes = SgNotificationBar.getInitialNodes();
  }
}
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(SgNotificationBar, "getInitialNodes", () => {
  return {
    outer: null,
    icons: [],
    message: []
  };
});
class StNotificationBar extends NotificationBar {
  constructor(options) {
    super(options, _constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].ST);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_nodes", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "build", () => {
      if (!this._nodes.outer) {
        this._nodes.outer = _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          style: {
            marginTop: '5px'
          }
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          ref: ref => this._nodes.message = ref
        }));
      }
      this.setColor(this._data.color);
      this.toggleHidden(this._data.isHidden);
      this.setContent(this._data.icons, this._data.message);
      this._hasBuilt = true;
      void _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_9__["Events"].NOTIFICATION_BAR_BUILD, this);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "reset", () => {
      const outerNode = this._nodes.outer;
      const messageNode = this._nodes.message;
      this._data = NotificationBar.getInitialData();
      this._nodes = StNotificationBar.getInitialNodes();
      if (outerNode) {
        this._nodes.outer = outerNode;
        this._nodes.message = messageNode;
        this._hasBuilt = false;
        this.build();
      }
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setContent", (icons, message) => {
      this.setIcons(icons);
      this.setMessage(message);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setIcons", icons => {
      if (!this._nodes.outer) {
        throw this.getError('failed to set icons');
      }
      if (this._hasBuilt && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__["Utils"].isDeepEqual(this._data.icons, icons)) {
        return this;
      }
      this.removeIcons();
      this._data.icons = icons;
      this._nodes.icons = [];
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this._nodes.outer, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, this._data.icons.map(icon => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: `fa ${icon}`,
        ref: ref => this._nodes.icons.push(ref)
      }))));
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "setMessage", message => {
      if (!this._nodes.message) {
        throw this.getError('failed to set message');
      }
      if (this._hasBuilt && this._data.message === message) {
        return this;
      }
      this._data.message = message;
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this._nodes.message, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, this._data.message));
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "removeIcons", () => {
      if (this._data.icons.length === 0) {
        return this;
      }
      for (const iconNode of this._nodes.icons) {
        iconNode.remove();
      }
      this._data.icons = [];
      this._nodes.icons = [];
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "removeMessage", () => {
      if (!this._data.message) {
        return this;
      }
      if (!this._nodes.message) {
        throw this.getError('failed to remove message');
      }
      this._nodes.message.innerHTML = '';
      this._data.message = null;
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseMessage", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to parse message');
      }
      this._nodes.message = this._nodes.outer.querySelector('div:last-child');
      if (!this._nodes.message) {
        throw this.getError('failed to parse message');
      }
      this._data.message = this._nodes.message.textContent.trim();
      return this;
    });
    this._nodes = StNotificationBar.getInitialNodes();
  }
}
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(StNotificationBar, "getInitialNodes", () => {
  return {
    outer: null,
    icons: [],
    message: null
  };
});

/***/ }),
/* 219 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Scope", function() { return Scope; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);

var _Scope;


class Scope {
  constructor(id, context) {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "id", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "context", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "data", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "pages", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "sourceLink", null);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "addData", (key, data, page = 1) => {
      this.data[key].push(...data);
      if (page > 0) {
        this.addPage(page);
        const pageData = this.pages.get(page);
        if (pageData) {
          pageData[key].push(...data);
        }
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "addPage", page => {
      if (!this.pages.has(page)) {
        this.pages.set(page, Scope.getInitialData());
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "resetData", key => {
      this.data[key] = [];
      for (const pageData of this.pages.values()) {
        pageData[key] = [];
      }
    });
    this.findData = this.findData.bind(this);
    this.id = id || crypto.randomUUID();
    this.context = context;
    this.data = Scope.getInitialData();
    this.pages = new Map();
  }
  findData(keyOrKeys, page = 0) {
    let data;
    const sourceData = page === 0 ? this.data : this.pages.get(page);
    if (typeof keyOrKeys === 'string') {
      data = sourceData ? sourceData[keyOrKeys] : [];
    } else {
      data = Scope.getInitialData();
      if (sourceData) {
        for (const key of keyOrKeys) {
          data[key] = sourceData[key];
        }
      }
    }
    return data;
  }
  static findData(id, keyOrKeys, page = 0) {
    let data;
    if (typeof keyOrKeys === 'string') {
      data = [];
      if (id) {
        const scope = Scope.find(id);
        if (scope) {
          data = scope.findData(keyOrKeys, page);
        }
      } else {
        for (const scope of Scope.scopes.values()) {
          const foundData = scope.findData(keyOrKeys, page);
          data.push(...foundData);
        }
      }
    } else {
      data = Scope.getInitialData();
      if (id) {
        const scope = Scope.find(id);
        if (scope) {
          data = scope.findData(keyOrKeys, page);
        }
      } else {
        for (const scope of Scope.scopes.values()) {
          const foundData = scope.findData(keyOrKeys, page);
          for (const [key, scopeData] of Object.entries(foundData)) {
            data[key].push(...scopeData);
          }
        }
      }
    }
    return data;
  }
}
_Scope = Scope;
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Scope, "scopes", new Map());
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Scope, "history", []);
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Scope, "current", null);
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Scope, "getInitialData", () => {
  return {
    comments: [],
    commentsV2: [],
    discussions: [],
    games: [],
    giveaways: [],
    groups: [],
    trades: [],
    users: []
  };
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Scope, "create", (id, context) => {
  if (id && _Scope.scopes.has(id)) {
    throw new Error('Scope ID already exists.');
  }
  const scope = new _Scope(id, context);
  _Scope.scopes.set(scope.id, scope);
  return scope;
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Scope, "addData", (id, key, data, page = 1) => {
  const scope = id === 'current' ? _Scope.current : _Scope.scopes.get(id);
  if (scope) {
    scope.addData(key, data, page);
  }
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Scope, "find", id => {
  return (id === 'current' ? _Scope.current : _Scope.scopes.get(id)) || null;
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Scope, "remove", id => {
  if (_Scope.scopes.has(id)) {
    _Scope.scopes.delete(id);
  }
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Scope, "setCurrent", id => {
  _Scope.history.push(id);
  _Scope.current = _Scope.find(id);
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Scope, "resetCurrent", () => {
  _Scope.history.pop();
  if (_Scope.history.length > 0) {
    const id = _Scope.history[_Scope.history.length - 1];
    _Scope.current = _Scope.find(id);
  } else {
    _Scope.current = null;
  }
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(Scope, "purge", () => {
  for (const scope of _Scope.scopes.values()) {
    for (const scopeData of Object.values(scope.data)) {
      for (let i = scopeData.length - 1; i > -1; i--) {
        const outerNode = scopeData[i].nodes ? scopeData[i].nodes.outer : scopeData[i].outerWrap;
        if (outerNode && !document.contains(outerNode)) {
          scopeData.splice(i, 1);
        }
      }
    }
  }
});

/***/ }),
/* 220 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Module", function() { return Module; });
/**
 * @typedef {Object} EsgstModuleInfo
 * @property {String} id
 * @property {String} [name]
 * @property {() => Node} [description]
 * @property {String} [type]
 * @property {Boolean|Object} [sg]
 * @property {Boolean|Object} [st]
 * @property {Boolean|Object} [sgt]
 * @property {boolean} [endless]
 * @property {Object} [featureMap]
 */

/** module interface */
class Module {
  constructor() {
    /**
     * @type {import('./Esgst').esgst}
     */
    this.esgst = null;
    /** @type {EsgstModuleInfo} */
    this.info = {
      id: 'unknown',
      name: 'Unknown',
      type: ''
    };
  }
  init() {}
  setEsgst(esgst) {
    this.esgst = esgst;
    return this;
  }
}


/***/ }),
/* 221 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "permissions", function() { return permissions; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(90);




class Permissions {
  constructor() {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "permissions", void 0);
    this.permissions = {
      allUrls: {
        isOrigin: true,
        messages: {
          ge: 'Required by Giveaway Extractor to extract giveaways from any URL.'
        },
        values: ['<all_urls>']
      },
      cookies: {
        messages: {
          manipulateCookies: 'Required if the option to manipulate cookies is enabled.'
        },
        values: ['cookies', 'webRequest', 'webRequestBlocking']
      },
      dropbox: {
        isOrigin: true,
        messages: {
          storage: 'Required to back up / restore data to / from Dropbox.'
        },
        values: ['*://*.api.dropboxapi.com/*', '*://*.content.dropboxapi.com/*']
      },
      github: {
        isOrigin: true,
        messages: {
          showChangelog: 'Required to retrieve the changelog from GitHub when updating.'
        },
        values: ['*://*.github.com/*', '*://*.raw.githubusercontent.com/*']
      },
      googleDrive: {
        isOrigin: true,
        messages: {
          storage: 'Required to back up / restore data to / from Google Drive.'
        },
        values: ['*://*.googleapis.com/*']
      },
      googleWebApp: {
        isOrigin: true,
        messages: {
          sync: 'Required to sync HLTB times.'
        },
        values: ['*://*.script.google.com/*', '*://*.script.googleusercontent.com/*']
      },
      imgur: {
        isOrigin: true,
        messages: {
          cfh: 'Required by Comment Formatting Helper to upload images.'
        },
        values: ['*://*.api.imgur.com/*']
      },
      isThereAnyDeal: {
        isOrigin: true,
        messages: {
          itadi: 'Required by IsThereAnyDeal Info to retrieve the deals.'
        },
        values: ['*://*.isthereanydeal.com/*']
      },
      oneDrive: {
        isOrigin: true,
        messages: {
          storage: 'Required to back up / restore data to / from OneDrive.'
        },
        values: ['*://*.files.1drv.com/*', '*://*.graph.microsoft.com/*']
      },
      sgTools: {
        isOrigin: true,
        messages: {
          ge: 'Required by Giveaway Extractor to extract SGTools giveaways.',
          namwc: 'Required by Not Activated / Multiple Wins Checker to check users.',
          ugs: 'Required by Unsent Gifts Sender if the option to check not activated / multiple wins is enabled.'
        },
        values: ['*://*.sgtools.info/*']
      },
      server: {
        isOrigin: true,
        messages: {
          gc: 'Required by Game Categories to retrieve categories that need to be retrieved from Steam.',
          uh: "Required by Username History to retrieve the user's username history and the list of recent changes from the database.",
          ncv: 'Required to update the no CV games database when creating a new giveaway.',
          sync: 'Required to sync reduced CV and no CV games and optional to hide games when syncing.',
          hgm: 'Optional for Hidden Game Manager to hide games, by converting Steam app IDs to SteamGifts game IDs.',
          mm: 'Optional for Multi Manager to hide games.'
        },
        values: ['*://*.esgst.rafaelgomes.xyz/*']
      },
      steamApi: {
        isOrigin: true,
        messages: {
          glwc: "Required by Group Libraries / Wishlists Checker to retrieve the users' owned games.",
          hwlc: "Required by Have / Want List Checker to retrieve the user's owned games.",
          sync: 'Required to sync owned / wishlisted / ignored games.',
          ugd: "Required by User Giveaway Data to retrieve the user's playtimes / achievement stats."
        },
        values: ['*://*.api.steampowered.com/*']
      },
      steamCommunity: {
        isOrigin: true,
        messages: {
          as: 'Required by Archive Searcher to retrieve the title of a game when searching by app id.',
          glwc: "Required by Group Libraries / Wishlists Checker to retrieve the group's members.",
          gs: "Required by Groups Stats to retrieve the group's type.",
          sgc: "Required by Shared Groups Checker to retrieve the user's groups.",
          sync: 'Required to sync followed games.',
          ugs: 'Required by Unsent Gifts Sender if the option to check group members is enabled.'
        },
        values: ['*://*.steamcommunity.com/*']
      },
      steamStore: {
        isOrigin: true,
        messages: {
          gc: 'Required by Game Categories to retrieve categories that need to be retrieved from Steam.',
          glwc: "Required by Group Libraries / Wishlists Checker to retrieve the users' wishlists.",
          hwlc: "Required by Have / Want List Checker to retrieve the user's wishlist.",
          rcvc: "Required by Real CV Calculator to retrieve the game's price.",
          sync: 'Required to sync owned / wishlisted / ignored games.',
          ugd: 'Required by User Giveaway Data to get list of games in packages.'
        },
        values: ['*://*.store.steampowered.com/*']
      },
      steamTracker: {
        isOrigin: true,
        messages: {
          sync: 'Required to sync delisted games.'
        },
        values: ['*://*.steam-tracker.com/*']
      }
    };
  }
  async contains(keyArrays) {
    let result = false;
    for (const keys of keyArrays) {
      const {
        permissions,
        origins
      } = this.getValues(keys);
      result = result || (await _browser__WEBPACK_IMPORTED_MODULE_3__["browser"].runtime.sendMessage({
        action: 'permissions_contains',
        permissions: JSON.stringify({
          permissions,
          origins
        })
      }));
      if (result) {
        break;
      }
    }
    return result;
  }
  request(keys, callback) {
    const {
      permissions,
      origins
    } = this.getValues(keys);
    _browser__WEBPACK_IMPORTED_MODULE_3__["browser"].permissions.request({
      permissions,
      origins
    }).then(callback);
  }
  remove(keys, callback) {
    const {
      permissions,
      origins
    } = this.getValues(keys);
    _browser__WEBPACK_IMPORTED_MODULE_3__["browser"].permissions.remove({
      permissions,
      origins
    }).then(callback);
  }
  getValues(keys = []) {
    const permissions = [];
    const origins = [];
    for (const key of keys) {
      const permission = this.permissions[key];
      if (permission.isOrigin) {
        origins.push(...permission.values);
      } else {
        permissions.push(...permission.values);
      }
    }
    return {
      permissions,
      origins
    };
  }
  getMessage(keyArrays, isOptional) {
    const combos = [];
    for (const keys of keyArrays) {
      const {
        permissions,
        origins
      } = this.getValues(keys);
      combos.push(permissions.concat(origins).join(' + '));
    }
    return isOptional ? `If you want to perform this action faster, please go to the "Permissions" section of the settings menu and grant permissions for one (or all) of the combos: ${combos.join(' OR ')}` : `No permission to perform this action. Please go to the "Permissions" section of the settings menu and grant permissions for one (or all) of the combos: ${combos.join(' OR ')}`;
  }
}
const permissions = new Permissions();

/***/ }),
/* 222 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Popout", function() { return Popout; });
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(132);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);
/* harmony import */ var _DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class Popout {
  constructor(className = '', context = null, hoverSpeed = 1000, onClick = false, popout = null, onOpen = null) {
    this.custom = {};
    if (className === 'esgst-hidden-buttons') {
      this.isDynamicHeight = true;
    }
    this.onClose = null;
    this.onOpen = onOpen;
    this.onFirstOpen = null;
    this.hasOpened = false;
    this.context = context;
    if (popout) {
      this.popout = popout;
    } else {
      _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].insert(document.body, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("div", {
        className: className,
        ref: ref => this.popout = ref
      }));
    }
    this.popout.classList.add('esgst-popout', 'esgst-hidden');
    this.popup = this.popout.closest('.esgst-popup');
    this.hoverSpeed = hoverSpeed;
    if (!onClick) {
      if (this.context) {
        let timeout = null;
        this.context.addEventListener('mouseenter', () => {
          timeout = window.setTimeout(() => {
            this.open();
          }, this.hoverSpeed);
        });
        this.context.addEventListener('mouseleave', event => {
          if (timeout) {
            window.clearTimeout(timeout);
            timeout = null;
          }
          if (!this.popout.contains(event.relatedTarget)) {
            this.close();
          }
        });
      }
      let timeout = null;
      this.popout.addEventListener('mouseenter', () => {
        if (timeout) {
          window.clearTimeout(timeout);
          timeout = null;
        }
      });
      this.popout.addEventListener('mouseleave', event => {
        timeout = window.setTimeout(() => {
          if (event.relatedTarget && !this.context.contains(event.relatedTarget) && (this.ancestor && this.ancestor.contains(event.relatedTarget) || !event.relatedTarget.closest('.esgst-popout'))) {
            this.context.classList.remove('esgst-qgs-container-expanded');
            this.close();
          }
        }, this.hoverSpeed);
      });
      document.addEventListener('click', event => {
        const element = /** @type {Node} */event.target;
        if (this.context && !this.context.contains(element) && !this.popout.contains(element) && (this.ancestor && this.ancestor.contains(element) || !element.closest('.esgst-popout'))) {
          this.close();
        }
      }, true);
    } else {
      if (this.context) {
        this.context.addEventListener('click', () => {
          if (this.isOpen) {
            this.close();
          } else {
            this.open();
          }
        });
      }
      document.addEventListener('click', event => {
        const element = /** @type {Node} */event.target;
        if (this.context && !this.context.contains(element) && !this.popout.contains(element)) {
          this.close();
        }
      });
    }
    this.isOpen = false;
  }
  open(context = null, isFixed = false) {
    this.context = context || this.context;
    this.ancestor = this.context.closest('.esgst-popout');
    this.isFixed = isFixed;
    this.popout.classList.remove('esgst-hidden');
    let n = 1000 + document.querySelectorAll(`.esgst-popup:not(.esgst-hidden), .esgst-popout:not(.esgst-hidden)`).length;
    if (_Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].esgst.openPopups > 0) {
      const highestN = parseInt(_Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].esgst.popups[_Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].esgst.openPopups - 1].popup.style.zIndex || 0);
      if (n <= highestN) {
        n = highestN + 1;
      }
    }
    this.popout.style.zIndex = n;
    if (this.isFixed) {
      this.popout.classList.add('esgst-fixed');
    }
    this.reposition();
    this.isOpen = true;
    if (this.onOpen) {
      this.onOpen(this.popout);
    }
    if (!this.hasOpened) {
      this.hasOpened = true;
      if (this.onFirstOpen) {
        this.onFirstOpen(this.popout);
      }
    }
  }
  close() {
    this.popout.classList.add('esgst-hidden');
    if (this.isOpen && this.onClose) {
      this.onClose();
    }
    this.isOpen = false;
  }
  reposition(context = null) {
    let contextLeft, contextRect, contextTop, popoutHeight, popoutWidth, popupRect;
    if (!this.isDynamicHeight) {
      this.popout.style.height = '';
    }
    this.popout.style.left = '0';
    this.popout.style.top = '0';
    this.context = context || this.context;
    contextRect = this.context.getBoundingClientRect();
    contextLeft = contextRect.left;
    contextTop = contextRect.top;
    if (contextTop > window.innerHeight - (contextTop + contextRect.height)) {
      this.popout.style.maxHeight = `${contextTop}px`;
    } else {
      this.popout.style.maxHeight = `${window.innerHeight - (contextTop + contextRect.height)}px`;
    }
    const oldHeight = parseFloat(window.getComputedStyle(this.popout).getPropertyValue('height'));
    const oldRealHeight = this.popout.offsetHeight;
    const difference = oldRealHeight - oldHeight + 10;
    const newHeight = Math.max(Math.min(oldHeight, document.documentElement.clientHeight - (contextTop + contextRect.height + difference)), Math.min(oldHeight, contextTop - difference));
    if (!this.isDynamicHeight) {
      this.popout.style.height = `${newHeight}px`;
    }
    if (_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('qiv') && _Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].esgst.qiv.popout === this && _Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].esgst.qiv.comments) {
      _Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].esgst.qiv.comments.style.maxHeight = `${newHeight - _Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].esgst.qiv.comments.offsetTop}px`;
    }
    popoutHeight = this.popout.offsetHeight;
    popoutWidth = this.popout.offsetWidth;
    popupRect = this.popup && this.popup.getBoundingClientRect();
    if (contextLeft + popoutWidth > document.documentElement.clientWidth) {
      this.popout.style.left = `${contextLeft - popoutWidth + contextRect.width - (this.popup ? popupRect.left : 0) + window.scrollX}px`;
    } else {
      this.popout.style.left = `${contextLeft - (this.popup ? popupRect.left : 0) + window.scrollX}px`;
    }
    if (contextTop + contextRect.height + popoutHeight > document.documentElement.clientHeight) {
      this.popout.style.top = `${contextTop - popoutHeight + (this.isFixed || this.popup ? 0 : window.scrollY) - (this.popup ? popupRect.top : 0)}px`;
    } else {
      this.popout.style.top = `${contextTop + contextRect.height + (this.isFixed || this.popup ? 0 : window.scrollY) - (this.popup ? popupRect.top : 0)}px`;
    }
  }
}


/***/ }),
/* 223 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SettingsWizard", function() { return SettingsWizard; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(212);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(224);
/* harmony import */ var _DOM__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(206);
/* harmony import */ var _Popup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(211);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(97);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(132);











class _SettingsWizard {
  constructor() {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "steps", [{
      doShow: () => _Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.isFirstRun,
      isConfirmStep: true,
      title: 'Get started with ESGST',
      description: () => _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("fragment", null, "All good, ", _Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('username'), "! You'll now be guided through a series of feature combos, so you can shape your ESGST experience based on your needs. Choose \"Yes\" for the combos you want and \"No\" for the ones you don't. When you're ready, click \"Next\" to proceed."),
      settings: {},
      permissions: [],
      sync: []
    }, {
      doShow: () => true,
      title: 'Always within reach',
      description: _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See the header, main page heading and sidebar at all times"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "The pagination navigation is moved to the main page heading"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Quickly scroll to the top of the page")),
      settings: {
        fh_sg: 1,
        fh_st: 1,
        fmph_sg: 1,
        fmph_st: 1,
        fs_sg: 1,
        pnot_sg: 1,
        pnot_st: 1,
        pnot_s_sg: 1,
        pnot_s_st: 1,
        sttb_sg: 1,
        sttb_st: 1
      },
      permissions: [],
      sync: []
    }, {
      doShow: () => true,
      title: 'Infinite content',
      description: _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Endlessly load new content as you scroll down the page")),
      settings: {
        es_sg: 1,
        es_st: 1,
        es_murl_sg: 1,
        es_murl_st: 1,
        es_gb_sg: 1,
        es_ge_sg: 1
      },
      permissions: [],
      sync: []
    }, {
      doShow: () => true,
      title: 'Less is more',
      description: _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "The active discussions in the main page are moved to the sidebar"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Giveaways are shown as a grid instead of a list"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "The sidebar size is reduced")),
      settings: {
        adots_sg: 1,
        adots_index: 1,
        gv_sg: 1,
        gv_gb_sg: 1,
        gv_ge_sg: 1,
        ns_sg: 1
      },
      permissions: [],
      sync: []
    }, {
      doShow: () => true,
      title: 'More is less',
      description: _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Linked YouTube/Vimeo videos are automatically embedded in posts"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Attached images are automatically embedded in posts")),
      settings: {
        ev_sg: 1,
        ev_st: 1,
        vai_sg: 1,
        vai_st: 1,
        vai_gifv_sg: 1,
        vai_gifv_st: 1
      },
      permissions: [],
      sync: []
    }, {
      doShow: () => true,
      title: 'General improvements',
      description: _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Attached images are loaded on demand to improve page loading times (note that if you enable this combo, it will overwrite the previous combo's setting to embed images in posts)"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Broken giveaway URLs are automatically fixed"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "\"Last Page\" links are added to pages that don't have them, when possible")),
      settings: {
        ail_sg: 1,
        ail_st: 1,
        urlr_sg: 1,
        lpl_sg: 1,
        lpl_st: 1,
        vai_sg: 0,
        vai_st: 0
      },
      permissions: [],
      sync: []
    }, {
      doShow: () => true,
      title: 'Starter kit for creating giveaways',
      description: _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See stats about who commented/entered your giveaways"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See more information about your giveaways in the created page"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Filter giveaways by status (received, not received, awaiting feedback) and winners"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Quickly recreate giveaways that ended with 0 entries"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Save giveaway templates to quickly create giveaways using the same template"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Create multiple giveaways at once and easily create trains (giveaways are automatically connected to each other through previous/next links)"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Search for a specific key or set of keys in your giveaways and export all of your keys"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Sticky your most used countries/groups to the top in the new giveaway page, for quick access"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Send all of your unsent gifts to the winners at once and check the winners for not activated / multiple wins / group membership / other criteria before sending")),
      settings: {
        cec_sg: 1,
        cewgd_sg: 1,
        cewgd_c_sg: 1,
        cewgd_c_p_sg: 1,
        cewgd_c_sl_sg: 1,
        cewgd_c_t_sg: 1,
        cewgd_c_l_sg: 1,
        cewgd_c_w_sg: 1,
        gf_sg: 1,
        gf_m_sg: 1,
        gf_m_a_sg: 1,
        gf_received_sg: 1,
        gf_notReceived_sg: 1,
        gf_awaitingFeedback_sg: 1,
        gf_winners_sg: 1,
        gf_enableCreated: 1,
        gr_sg: 1,
        gr_r_sg: 1,
        gts_sg: 1,
        mgc_sg: 1,
        sks_sg: 1,
        sgac_sg: 1,
        sgg_sg: 1,
        ugs_sg: 1
      },
      permissions: ['sgTools', 'steamCommunity'],
      sync: []
    }, {
      doShow: () => true,
      title: 'Starter kit for entering/winning giveaways',
      description: _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Quickly use SteamGifts' advanced giveaway search options"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See more information about your entered/won giveaways in the entered/won pages"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Enter/leave giveaways without having to access them"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Keep track of your entries"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Bookmark giveaways to enter later"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Quickly extract all giveaways from a train"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Filter giveaways by level, entries, points, etc. (entered giveaways are automatically hidden)"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Sort giveaways by entries, points, etc."), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See your current chance of winning a giveaway"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See the current entries/copy ratio of a giveaway"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Navigate through trains using the arrow keys"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Hide giveaways with one click"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Quickly activate a key from a won game on Steam"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "If you don't have enough points to enter a giveaway, see how long you have to wait until you have enough points"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See information about games (such as whether a game has achievements, trading cards, etc.) and filter giveaways by this information"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Keep track of games by tagging them")),
      settings: {
        ags_sg: 1,
        cewgd_sg: 1,
        cewgd_e_sg: 1,
        cewgd_e_p_sg: 1,
        cewgd_e_sl_sg: 1,
        cewgd_e_t_sg: 1,
        cewgd_e_l_sg: 1,
        cewgd_w_sg: 1,
        cewgd_w_p_sg: 1,
        cewgd_w_sl_sg: 1,
        cewgd_w_t_sg: 1,
        cewgd_w_l_sg: 1,
        cewgd_w_e_sg: 1,
        elgb_sg: 1,
        et_sg: 1,
        gb_sg: 1,
        gb_h_sg: 1,
        ge_sg: 1,
        ge_a_sg: 1,
        gf_sg: 1,
        gf_m_sg: 1,
        gf_m_a_sg: 1,
        gf_level_sg: 1,
        gf_entries_sg: 1,
        gf_copies_sg: 1,
        gf_points_sg: 1,
        gf_comments_sg: 1,
        gf_minutesToEnd_sg: 1,
        gf_chance_sg: 1,
        gf_ratio_sg: 1,
        gf_rating_sg: 1,
        gf_reviews_sg: 1,
        gf_releaseDate_sg: 1,
        gf_pinned_sg: 1,
        gf_public_sg: 1,
        gf_inviteOnly_sg: 1,
        gf_group_sg: 1,
        gf_whitelist_sg: 1,
        gf_regionRestricted_sg: 1,
        gf_created_sg: 1,
        gf_entered_sg: 1,
        gf_owned_sg: 1,
        gf_wishlisted_sg: 1,
        gf_followed_sg: 1,
        gf_ignored_sg: 1,
        gf_bookmarked_sg: 1,
        gf_fullCV_sg: 1,
        gf_reducedCV_sg: 1,
        gf_noCV_sg: 1,
        gf_creators_sg: 1,
        gf_learning_sg: 1,
        gf_removed_sg: 1,
        gf_tradingCards_sg: 1,
        gf_achievements_sg: 1,
        gf_singleplayer_sg: 1,
        gf_multiplayer_sg: 1,
        gf_steamCloud_sg: 1,
        gf_linux_sg: 1,
        gf_mac_sg: 1,
        gf_dlc_sg: 1,
        gf_dlcOwned_sg: 1,
        gf_package_sg: 1,
        gf_earlyAccess_sg: 1,
        gf_genres_sg: 1,
        gf_tags_sg: 1,
        gf_enable: 1,
        gf_enableGroups: 1,
        gf_enableWishlist: 1,
        gf_enableRecommended: 1,
        gf_enableGroup: 1,
        gf_enableNew: 1,
        gf_enableEntered: 1,
        gf_enableWon: 1,
        gf_enableUser: 1,
        gf_preset: 'HideEntered',
        gf_presetGroups: 'HideEntered',
        gf_presetWishlist: 'HideEntered',
        gf_presetRecommended: 'HideEntered',
        gf_presetGroup: 'HideEntered',
        gf_presetNew: 'HideEntered',
        gf_presetEntered: 'HideEntered',
        gf_presetWon: 'HideEntered',
        gf_presetUser: 'HideEntered',
        gf_presets: [{
          name: 'HideEntered',
          rules: {
            condition: 'AND',
            rules: [{
              id: 'entered',
              field: 'entered',
              type: 'boolean',
              input: 'radio',
              operator: 'equal',
              value: false
            }],
            not: false,
            valid: true
          }
        }],
        gas_sg: 1,
        gwc_sg: 1,
        gwr_sg: 1,
        npth_sg: 1,
        ochgb_sg: 1,
        sal_sg: 1,
        ttec_sg: 1,
        gc_sg: 1,
        gc_a_sg: 1,
        gc_dlc_sg: 1,
        gc_dlc_o_sg: 1,
        gc_ea_sg: 1,
        gc_f_sg: 1,
        gc_fcv_sg: 1,
        gc_g_sg: 1,
        gc_i_sg: 1,
        gc_lg_sg: 1,
        gc_l_sg: 1,
        gc_m_sg: 1,
        gc_mp_sg: 1,
        gc_ncv_sg: 1,
        gc_o_sg: 1,
        gc_p_sg: 1,
        gc_r_sg: 1,
        gc_rcv_sg: 1,
        gc_rd_sg: 1,
        gc_rm_sg: 1,
        gc_sp_sg: 1,
        gc_sc_sg: 1,
        gc_tc_sg: 1,
        gc_w_sg: 1,
        gt_sg: 1,
        gt_s_sg: 1
      },
      permissions: ['server', 'steamCommunity', 'steamStore'],
      sync: ['Games', 'FollowedGames', 'NoCvGames', 'ReducedCvGames']
    }, {
      doShow: () => true,
      title: 'Starter kit for commenting',
      description: _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Quickly use comment formatting"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Mark comments as read/unread and keep track of which comments you've read"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Reply to multiple comments at the same time, without having to reload the page"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Reply to main posts faster, by having the reply box below the OP instead of at the bottom of the page"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Reply to comments from your inbox"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See who replied to whom (useful for deep nested replies)")),
      settings: {
        cfh_sg: 1,
        cfh_st: 1,
        cfh_bq_sg: 1,
        cfh_bq_st: 1,
        cfh_b_sg: 1,
        cfh_b_st: 1,
        cfh_h1_sg: 1,
        cfh_h1_st: 1,
        cfh_h2_sg: 1,
        cfh_h2_st: 1,
        cfh_h3_sg: 1,
        cfh_h3_st: 1,
        cfh_ic_sg: 1,
        cfh_ic_st: 1,
        cfh_i_sg: 1,
        cfh_i_st: 1,
        cfh_lb_sg: 1,
        cfh_lb_st: 1,
        cfh_lc_sg: 1,
        cfh_lc_st: 1,
        cfh_ol_sg: 1,
        cfh_ol_st: 1,
        cfh_pc_sg: 1,
        cfh_pc_st: 1,
        cfh_s_sg: 1,
        cfh_s_st: 1,
        cfh_st_sg: 1,
        cfh_st_st: 1,
        cfh_ul_sg: 1,
        cfh_ul_st: 1,
        cfh_img_sg: 1,
        cfh_img_st: 1,
        cfh_l_sg: 1,
        cfh_l_st: 1,
        cfh_t_sg: 1,
        cfh_t_st: 1,
        cfh_e_sg: 1,
        cfh_e_st: 1,
        cfh_p_sg: 1,
        cfh_p_st: 1,
        cfh_sr_sg: 1,
        cfh_sr_st: 1,
        cfh_cf_sg: 1,
        cfh_cf_st: 1,
        ct_sg: 1,
        ct_st: 1,
        ct_a_sg: 1,
        ct_a_st: 1,
        ct_o_sg: 1,
        ct_o_st: 1,
        ct_f_sg: 1,
        ct_f_st: 1,
        mr_sg: 1,
        mr_st: 1,
        rbot_sg: 1,
        rbot_st: 1,
        rfi_sg: 1,
        rfi_st: 1,
        rfi_s_sg: 1,
        rfi_s_st: 1,
        rml_sg: 1,
        rml_st: 1
      },
      permissions: [],
      sync: []
    }, {
      doShow: () => true,
      title: 'Starter kit for group/whitelist/blacklist management',
      description: _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See what games members of a group or your whitelist/blacklist have in their libraries/wishlists"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See more information about your groups in the groups page"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See when users in your whitelist/blacklist were online and more information about them"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Quickly export/clear your whitelist/blacklist")),
      settings: {
        glwc_sg: 1,
        gs_sg: 1,
        gs_sent_sg: 1,
        gs_received_sg: 1,
        gs_giftDifference_sg: 1,
        gs_valueDifference_sg: 1,
        gs_firstGiveaway_sg: 1,
        gs_lastGiveaway_sg: 1,
        gs_averageEntries_sg: 1,
        gs_users_sg: 1,
        us_sg: 1,
        wbm_sg: 1
      },
      permissions: ['steamApi', 'steamCommunity', 'steamStore'],
      sync: []
    }, {
      doShow: () => true,
      title: 'Starter kit for user management',
      description: _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Quickly see information about a user without having to leave the page"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Check if a user has any not activated / multiple wins"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See a user's sent/won ratio"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Check which groups you share with another user"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "See a user's username history, if that information is available"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Add notes/tags to users"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Check a list of users to see who has whitelisted/blacklisted you, if that information is available"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Quickly see if a user is on your whitelist/blacklist")),
      settings: {
        cl_sg: 1,
        cl_ui_sg: 1,
        namwc_sg: 1,
        namwc_h_sg: 1,
        namwc_h_st: 1,
        namwc_h_m_sg: 1,
        namwc_h_m_st: 1,
        namwc_h_i_sg: 1,
        namwc_h_i_st: 1,
        swr_sg: 1,
        sgc_sg: 1,
        uh_sg: 1,
        un_sg: 1,
        un_st: 1,
        ut_sg: 1,
        ut_st: 1,
        wbc_sg: 1,
        wbc_h_sg: 1,
        wbc_h_st: 1,
        wbh_sg: 1,
        wbh_st: 1
      },
      permissions: ['server', 'sgTools', 'steamCommunity'],
      sync: ['Groups']
    }, {
      doShow: () => true,
      title: 'Run ESGST on SteamTrades',
      description: null,
      settings: {
        esgst_sg: 1
      },
      permissions: [],
      sync: []
    }, {
      doShow: () => true,
      title: 'Saving settings...',
      description: null,
      settings: {},
      permissions: [],
      sync: [],
      runOp: () => _Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.lockAndSaveSettings(this.settingsToSave)
    }, {
      doShow: () => _browser__WEBPACK_IMPORTED_MODULE_4__["browser"].runtime.getURL && this.permissionsToGrant.size > 0,
      isConfirmStep: true,
      title: 'Required permissions',
      description: () => _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("fragment", null, "Some of the features you enabled require permissions in order to work. Go", ' ', _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("a", {
        className: "esgst-bold table__column__secondary-link",
        href: `${_browser__WEBPACK_IMPORTED_MODULE_4__["browser"].runtime.getURL('permissions.html')}?keys=${Array.from(this.permissionsToGrant).join(',')}`,
        target: "_blank"
      }, "here"), ' ', "and click the \"Grant\" button to grant them. Then click \"Next\" to proceed."),
      settings: {},
      permissions: [],
      sync: []
    }, {
      doShow: () => this.dataToSync.size > 0,
      isConfirmStep: true,
      title: 'Required sync',
      description: () => _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("fragment", null, "Some of the features you enabled require you to sync your data in order to work. Go", ' ', _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("a", {
        className: "esgst-bold table__column__secondary-link",
        href: `https://www.steamgifts.com/account/settings/profile?esgst=sync&autoSync=true&${Array.from(this.dataToSync).map(syncKey => `${syncKey}=1`).join('&')}`,
        target: "_blank"
      }, "here"), ' ', "and wait until the sync is complete. You might also want to enable the automatic sync in that page, since you'll need to perform this sync every once in a while to keep your data up-to-date. Then click \"Next\" to proceed."),
      settings: {},
      permissions: [],
      sync: []
    }]);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "settingsToSave", {});
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "permissionsToGrant", new Set());
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "dataToSync", new Set());
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "currentStep", -1);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "stepNode", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "run", () => {
      this.settingsToSave = {};
      this.permissionsToGrant = new Set();
      this.dataToSync = new Set();
      this.currentStep = -1;
      const popup = new _Popup__WEBPACK_IMPORTED_MODULE_8__["Popup"]({
        isTemp: true
      });
      _components_PageHeading__WEBPACK_IMPORTED_MODULE_6__["PageHeading"].create('sm', {
        breadcrumbs: ['Settings Wizard']
      }).insert(popup.description, 'beforeend');
      this.stepNode = popup.getScrollable();
      this.stepNode.classList.add('markdown');
      popup.onClose = () => window.location.reload();
      popup.open();
      this.nextStep();
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "nextStep", async () => {
      if (!this.stepNode) {
        return;
      }
      let step;
      do {
        this.currentStep += 1;
        step = this.steps[this.currentStep];
      } while (step && !step.doShow());
      if (step) {
        _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].insert(this.stepNode, 'atinner', _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("fragment", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("h3", null, step.title), step.description && _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("p", null, typeof step.description === 'function' ? step.description() : step.description)));
        const [buttonGroup] = _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].insert(this.stepNode, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("div", {
          className: "esgst-button-group"
        }));
        if (step.runOp) {
          await step.runOp();
          window.setTimeout(this.nextStep, 0);
        } else if (step.isConfirmStep) {
          _components_Button__WEBPACK_IMPORTED_MODULE_5__["Button"].create({
            template: 'success',
            name: 'Next',
            onClick: () => void window.setTimeout(this.nextStep, 0)
          }).insert(buttonGroup, 'beforeend');
        } else {
          _components_Button__WEBPACK_IMPORTED_MODULE_5__["Button"].create({
            template: 'success',
            name: 'Yes',
            onClick: () => {
              this.settingsToSave = {
                ...this.settingsToSave,
                ...step.settings
              };
              for (const permissionKey of step.permissions) {
                this.permissionsToGrant.add(permissionKey);
              }
              for (const syncKey of step.sync) {
                this.dataToSync.add(syncKey);
              }
              window.setTimeout(this.nextStep, 0);
            }
          }).insert(buttonGroup, 'beforeend');
          _components_Button__WEBPACK_IMPORTED_MODULE_5__["Button"].create({
            template: 'error',
            name: 'No',
            onClick: () => void window.setTimeout(this.nextStep, 0)
          }).insert(buttonGroup, 'beforeend');
        }
      } else {
        _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].insert(this.stepNode, 'atinner', _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("fragment", null, _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("h3", null, "All done!"), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("p", null, "You can customize your experience even more by going to the", ' ', _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("a", {
          href: "https://www.steamgifts.com/account/settings/profile?esgst=settings"
        }, "settings page"), ' ', "(also available as a popup through the ESGST button at the header).", _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("br", null), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("br", null), "Remember to backup your data often in the", ' ', _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("a", {
          href: "https://www.steamgifts.com/account/settings/profile?esgst=backup"
        }, "backup page"), ' ', "to prevent data loss. You can also restore/delete your data in the", ' ', _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("a", {
          href: "https://www.steamgifts.com/account/settings/profile?esgst=restore"
        }, "restore"), "/", _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("a", {
          href: "https://www.steamgifts.com/account/settings/profile?esgst=delete"
        }, "delete"), ' ', "pages. These pages are also available as a popup from the settings popup.", _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("br", null), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("br", null), "And that's the basics, enjoy ESGST! And please report any bugs/suggestions in the SteamGifts thread or on GitHub (both are accessible from the ESGST dropdown at the header).", _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("br", null), _DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("br", null), "You can close this popup now. When you do, the page will be refreshed for the settings to take effect.")));
      }
    });
  }
}
const SettingsWizard = new _SettingsWizard();

/***/ }),
/* 224 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PageHeading", function() { return PageHeading; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SgPageHeading", function() { return SgPageHeading; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StPageHeading", function() { return StPageHeading; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(225);
/* harmony import */ var core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(230);
/* harmony import */ var core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(207);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(213);
/* harmony import */ var _constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(215);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(216);
/* harmony import */ var _constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(214);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(122);
/* harmony import */ var _Base__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(217);

var _PageHeading;












class PageHeading extends _Base__WEBPACK_IMPORTED_MODULE_12__["Base"] {
  constructor(featureId, options, namespace) {
    super(namespace);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_featureId", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_data", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_nodes", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "build", () => {
      if (!this._nodes.outer) {
        this._nodes.outer = _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: _constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][this._namespace].pageHeading,
          dataset: {
            esgst: this._featureId
          }
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: _constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][this._namespace].pageHeadingBreadcrumbs,
          ref: ref => this._nodes.breadcrumbsContainer = ref
        }));
      }
      this.setBreadcrumbs(this._data.breadcrumbs);
      this._hasBuilt = true;
      void _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_9__["Events"].PAGE_HEADING_BUILD, this);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "reset", () => {
      const outerNode = this._nodes.outer;
      const breadcrumbsContainerNode = this._nodes.breadcrumbsContainer;
      this._data = PageHeading.getInitialData();
      this._nodes = PageHeading.getInitialNodes();
      if (outerNode) {
        this._nodes.outer = outerNode;
        this._nodes.breadcrumbsContainer = breadcrumbsContainerNode;
        this._hasBuilt = false;
        this.build();
      }
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parse", referenceNode => {
      if (!referenceNode.matches(PageHeading.selectors[this._namespace])) {
        throw this.getError('failed to parse');
      }
      this._nodes.outer = referenceNode;
      this.parseBreadcrumbs();
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseBreadcrumbs", () => {
      if (!this._nodes.outer) {
        throw this.getError('failed to parse breadcrumbs');
      }
      this._nodes.breadcrumbsContainer = this._nodes.outer.querySelector(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][this._namespace].pageHeadingBreadcrumbs);
      if (!this._nodes.breadcrumbsContainer) {
        throw this.getError('failed to parse breadcrumbs');
      }
      this._data.breadcrumbs = [];
      this._nodes.breadcrumbs = Array.from(this._nodes.breadcrumbsContainer.children);
      for (const breadcrumbNode of this._nodes.breadcrumbs) {
        var _breadcrumbNode$getAt;
        this._data.breadcrumbs.push({
          url: (_breadcrumbNode$getAt = breadcrumbNode.getAttribute('href')) !== null && _breadcrumbNode$getAt !== void 0 ? _breadcrumbNode$getAt : '',
          name: breadcrumbNode.textContent.trim()
        });
      }
      return this;
    });
    this._featureId = featureId;
    this._data = PageHeading.getInitialData(options);
    this._nodes = PageHeading.getInitialNodes();
  }
  setBreadcrumbs(breadcrumbs) {
    if (!this._nodes.breadcrumbsContainer) {
      throw this.getError('failed to set breadcrumbs');
    }
    if (this._hasBuilt && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__["Utils"].isDeepEqual(this._data.breadcrumbs, breadcrumbs)) {
      return this;
    }
    this._data.breadcrumbs = breadcrumbs;
    this._nodes.breadcrumbs = [];
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this._nodes.breadcrumbsContainer, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, this._data.breadcrumbs.map(breadcrumb => [typeof breadcrumb === 'string' || breadcrumb instanceof Node ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
      ref: ref => this._nodes.breadcrumbs.push(ref)
    }, breadcrumb) : _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
      href: breadcrumb.url,
      ref: ref => this._nodes.breadcrumbs.push(ref)
    }, breadcrumb.name), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
      className: "fa fa-angle-right"
    })]).flat().slice(0, -1)));
    return this;
  }
}
_PageHeading = PageHeading;
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(PageHeading, "selectors", {
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG]: `.${_constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG].pageHeading}`,
  [_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].ST]: `.${_constants_ClassNames__WEBPACK_IMPORTED_MODULE_8__["ClassNames"][_constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].ST].pageHeading}`
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(PageHeading, "getInitialData", (options = {}) => {
  let breadcrumbs;
  if (Array.isArray(options)) {
    breadcrumbs = options;
  } else {
    var _options$breadcrumbs;
    breadcrumbs = [...((_options$breadcrumbs = options.breadcrumbs) !== null && _options$breadcrumbs !== void 0 ? _options$breadcrumbs : [])];
  }
  return {
    isHidden: false,
    breadcrumbs
  };
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(PageHeading, "getInitialNodes", () => {
  return {
    outer: null,
    breadcrumbsContainer: null,
    breadcrumbs: []
  };
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(PageHeading, "create", (featureId, options = {}, namespace = _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace) => {
  switch (namespace) {
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG:
      return new SgPageHeading(featureId, options);
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].ST:
      return new StPageHeading(featureId, options);
    default:
      throw _PageHeading.getError('failed to create');
  }
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(PageHeading, "getAll", (featureId, referenceNode, namespace = _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace) => {
  const pageHeadings = [];
  const nodes = referenceNode.querySelectorAll(_PageHeading.selectors[namespace]);
  for (const node of nodes) {
    const pageHeading = _PageHeading.create(featureId, {}, namespace);
    pageHeading.parse(node);
    pageHeadings.push(pageHeading);
  }
  return pageHeadings;
});
class SgPageHeading extends PageHeading {
  constructor(featureId, options) {
    super(featureId, options, _constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].SG);
  }
}
class StPageHeading extends PageHeading {
  constructor(featureId, options) {
    super(featureId, options, _constants_Namespaces__WEBPACK_IMPORTED_MODULE_10__["Namespaces"].ST);
  }
}

/***/ }),
/* 225 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(65);
var flattenIntoArray = __webpack_require__(226);
var toObject = __webpack_require__(21);
var lengthOfArrayLike = __webpack_require__(53);
var toIntegerOrInfinity = __webpack_require__(51);
var arraySpeciesCreate = __webpack_require__(228);

// `Array.prototype.flat` method
// https://tc39.es/ecma262/#sec-array.prototype.flat
$({ target: 'Array', proto: true }, {
  flat: function flat(/* depthArg = 1 */) {
    var depthArg = arguments.length ? arguments[0] : undefined;
    var O = toObject(this);
    var sourceLen = lengthOfArrayLike(O);
    var A = arraySpeciesCreate(O, 0);
    flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toIntegerOrInfinity(depthArg));
    return A;
  }
});


/***/ }),
/* 226 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isArray = __webpack_require__(157);
var lengthOfArrayLike = __webpack_require__(53);
var doesNotExceedSafeInteger = __webpack_require__(227);
var bind = __webpack_require__(125);
var createProperty = __webpack_require__(131);

// `FlattenIntoArray` abstract operation
// https://tc39.es/ecma262/#sec-flattenintoarray
var flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {
  var targetIndex = start;
  var sourceIndex = 0;
  var mapFn = mapper ? bind(mapper, thisArg) : false;
  var element, elementLen;

  while (sourceIndex < sourceLen) {
    if (sourceIndex in source) {
      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];

      if (depth > 0 && isArray(element)) {
        elementLen = lengthOfArrayLike(element);
        targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;
      } else {
        doesNotExceedSafeInteger(targetIndex + 1);
        createProperty(target, targetIndex, element);
      }

      targetIndex++;
    }
    sourceIndex++;
  }
  return targetIndex;
};

module.exports = flattenIntoArray;


/***/ }),
/* 227 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $TypeError = TypeError;
var MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991

module.exports = function (it) {
  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');
  return it;
};


/***/ }),
/* 228 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var arraySpeciesConstructor = __webpack_require__(229);

// `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray, length) {
  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);
};


/***/ }),
/* 229 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isArray = __webpack_require__(157);
var isConstructor = __webpack_require__(155);
var isObject = __webpack_require__(29);
var wellKnownSymbol = __webpack_require__(13);

var SPECIES = wellKnownSymbol('species');
var $Array = Array;

// a part of `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray) {
  var C;
  if (isArray(originalArray)) {
    C = originalArray.constructor;
    // cross-realm fallback
    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;
    else if (isObject(C)) {
      C = C[SPECIES];
      if (C === null) C = undefined;
    }
  } return C === undefined ? $Array : C;
};


/***/ }),
/* 230 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// this method was added to unscopables after implementation
// in popular engines, so it's moved to a separate module
var addToUnscopables = __webpack_require__(12);

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('flat');


/***/ }),
/* 231 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tabs", function() { return Tabs; });
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(90);

class _Tabs {
  open(url) {
    return _browser__WEBPACK_IMPORTED_MODULE_0__["browser"].runtime.sendMessage({
      action: 'open_tab',
      url
    });
  }
}
const Tabs = new _Tabs();

/***/ }),
/* 232 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToggleSwitch", function() { return ToggleSwitch; });
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(132);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);
/* harmony import */ var _DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(212);




class ToggleSwitch {
  /**
   * @param context
   * @param id
   * @param inline
   * @param name
   * @param sg
   * @param st
   * @param tooltip
   * @param value
   * @property {HTMLElement} input
   */
  constructor(context, id, inline, name, sg, st, tooltip, value) {
    this.onChange = undefined;
    this.onEnabled = null;
    this.onDisabled = null;
    this.dependencies = [];
    this.exclusions = [];
    this.id = id;
    this.sg = sg;
    this.st = st;
    this.value = value;
    this.container = _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("div", {
      className: `esgst-toggle-switch-container ${inline ? 'inline' : ''}`
    }, _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("label", {
      className: "esgst-toggle-switch"
    }, _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("input", {
      type: "checkbox"
    }), _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("div", {
      className: "esgst-toggle-switch-slider"
    })), _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("span", null, name), tooltip ? _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
      className: "fa fa-question-circle",
      title: tooltip
    }) : null);
    if (context) {
      _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].insert(context, 'beforeend', this.container);
    }
    this.switch = this.container.firstElementChild;
    this.input = /** @type {HTMLElement} */this.switch.firstElementChild;
    this.name = this.switch.nextElementSibling;
    this.input.checked = this.value;
    this.input.addEventListener('change', () => this.change());
  }
  async change(settings) {
    let setting;
    this.value = this.input.checked;
    if (this.id) {
      let key = this.id;
      if (this.sg) {
        key += '_sg';
      } else if (this.st) {
        key += '_st';
      }
      setting = _Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get(key);
      if (typeof setting === 'undefined' || !setting.include) {
        setting = this.value;
      } else {
        setting.enabled = this.value ? 1 : 0;
      }
      if (!settings) {
        let message;
        _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].insert(this.container, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("div", {
          className: "esgst-description esgst-bold",
          ref: ref => message = ref
        }, _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
          className: "fa fa-circle-o-notch fa-spin",
          title: "Saving..."
        })));
        await _Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].common.setSetting(key, setting);
        message.classList.add('esgst-green');
        _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].insert(message, 'atinner', _DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
          className: "fa fa-check",
          title: "Saved!"
        }));
        window.setTimeout(() => message.remove(), 2500);
      }
    }
    if (this.value) {
      this.dependencies.forEach(dependency => dependency instanceof _components_Button__WEBPACK_IMPORTED_MODULE_3__["Button"] ? dependency.show() : dependency.classList.remove('esgst-hidden'));
      this.exclusions.forEach(exclusion => exclusion.classList.add('esgst-hidden'));
      if (!settings && this.onEnabled) {
        this.onEnabled();
      }
    } else {
      this.dependencies.forEach(dependency => dependency instanceof _components_Button__WEBPACK_IMPORTED_MODULE_3__["Button"] ? dependency.hide() : dependency.classList.add('esgst-hidden'));
      this.exclusions.forEach(exclusion => exclusion.classList.remove('esgst-hidden'));
      if (!settings && this.onDisabled) {
        this.onDisabled();
      }
    }
    if (settings) {
      return setting;
    }
    if (this.onChange) {
      this.onChange(this.value);
    }
  }
  enable(settings) {
    this.input.checked = true;
    // noinspection JSIgnoredPromiseFromCall
    return this.change(settings);
  }
  disable(settings) {
    this.input.checked = false;
    // noinspection JSIgnoredPromiseFromCall
    return this.change(settings);
  }
  toggle(settings) {
    this.input.checked = !this.input.checked;
    // noinspection JSIgnoredPromiseFromCall
    return this.change(settings);
  }
}


/***/ }),
/* 233 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Collapsible", function() { return Collapsible; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);






class _Collapsible {
  constructor() {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "create", (header, body, id) => {
      const [collapseNode] = _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(header, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-minus-square esgst-clickable",
        title: "Collapse section"
      }), ' '));
      const [expandNode] = _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(header, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-plus-square esgst-clickable esgst-hidden",
        title: "Expand section"
      }), ' '));
      collapseNode.addEventListener('click', () => this.collapse(collapseNode, expandNode, body, id));
      expandNode.addEventListener('click', () => this.expand(collapseNode, expandNode, body, id));
      if (id && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get(`${id}_collapsed`)) {
        this.collapse(collapseNode, expandNode, body);
      }
      return _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, header, body);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "collapse", async (collapseNode, expandNode, body, id) => {
      collapseNode.classList.add('esgst-hidden');
      expandNode.classList.remove('esgst-hidden');
      body.classList.add('esgst-hidden');
      if (id) {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.setSetting(`${id}_collapsed`, true);
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "expand", async (collapseNode, expandNode, body, id) => {
      expandNode.classList.add('esgst-hidden');
      collapseNode.classList.remove('esgst-hidden');
      body.classList.remove('esgst-hidden');
      if (id) {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.setSetting(`${id}_collapsed`, false);
      }
    });
  }
}
const Collapsible = new _Collapsible();

/***/ }),
/* 234 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "settingsModule", function() { return settingsModule; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(225);
/* harmony import */ var core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(230);
/* harmony import */ var core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(235);
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(90);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(206);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(210);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(221);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(97);
/* harmony import */ var _class_SettingsWizard__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(223);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(132);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(212);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(224);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(122);
/* harmony import */ var _Sync__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(241);






















class SettingsModule {
  constructor() {
    this.toSave = {};
    this.requiredPermissions = {};
    this.collapseButtons = [];
  }
  preSave(key, value) {
    const match = key.match(/_(sg|st)$/);
    if (match) {
      const id = key.replace(match[0], '');
      const namespace = match[1];
      const feature = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.featuresById[id];
      if (feature) {
        let setting;
        if (typeof value === 'object') {
          setting = value;
        } else {
          setting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].getFull(key) || _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeaturePath(null, id, namespace);
          setting.enabled = value ? 1 : 0;
        }
        const globalInclude = setting.include.filter(x => x.pattern === '.*')[0];
        if (globalInclude) {
          globalInclude.enabled = setting.enabled;
        }
        _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].set(id, setting.enabled);
        _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].setFull(key, setting);
        this.toSave[key] = setting;
        return;
      }
    }
    this.toSave[key] = value;
    _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].set(key, value);
  }
  loadMenu(isPopup) {
    /** @type {HTMLInputElement} */
    let SMAPIKey;
    let Container = null;
    let Context = null;
    let popup = null;
    if (isPopup) {
      popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
        addScrollable: 'left',
        settings: true,
        isTemp: true
      });
      popup.popup.classList.add('esgst-text-left');
      Container = popup.description;
      Context = popup.scrollable;
    } else {
      Context = Container = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.sidebar.nextElementSibling;
      Container.innerHTML = '';
    }
    let input;
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(isPopup ? Container : _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.sidebar, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "sidebar__search-container"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      className: "sidebar__search-input",
      type: "text",
      placeholder: "Search...",
      ref: ref => input = ref
    })));
    if (isPopup && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('scb')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.generalSearchClearButton.getInputs(Container);
    }
    let newIndicators = null;
    let buttonGroup;
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(Container, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-button-group",
      ref: ref => buttonGroup = ref
    }));
    _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create({
      color: 'green',
      icons: [],
      name: 'Run Wizard',
      onClick: () => _class_SettingsWizard__WEBPACK_IMPORTED_MODULE_15__["SettingsWizard"].run()
    }).insert(buttonGroup, 'beforeend');
    _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create([{
      color: 'green',
      icons: [],
      name: 'Collapse All',
      onClick: async () => {
        for (const item of this.collapseButtons) {
          this.collapseSection(item.collapseButton, item.id, item.subMenu);
        }
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Collapsing'
    }]).insert(buttonGroup, 'beforeend');
    _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create([{
      color: 'green',
      icons: [],
      name: 'Expand All',
      onClick: async () => {
        for (const item of this.collapseButtons) {
          this.expandSection(item.collapseButton, item.id, item.subMenu);
        }
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Expanding'
    }]).insert(buttonGroup, 'beforeend');
    const dismissAllButton = _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create([{
      color: 'green',
      icons: [],
      name: 'Dismiss All New',
      onClick: async () => {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.setSetting('dismissedOptions', _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.toDismiss);
        for (let i = newIndicators.length - 1; i > -1; i--) {
          newIndicators[i].remove();
        }
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Dismissing'
    }]).insert(buttonGroup, 'beforeend').hide();
    Container.setAttribute('data-esgst-popup', true);
    const items = [{
      check: true,
      options: {
        color: 'alternate-white',
        tooltip: 'Sync data',
        icons: ['fa-refresh'],
        onClick: () => Object(_Sync__WEBPACK_IMPORTED_MODULE_21__["setSync"])(true)
      }
    }, {
      check: true,
      options: {
        color: 'alternate-white',
        tooltip: 'Restore data',
        icons: ['fa-sign-in esgst-rotate-90'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.loadDataManagement('import', true)
      }
    }, {
      check: true,
      options: {
        color: 'alternate-white',
        tooltip: 'Backup data',
        icons: ['fa-sign-out esgst-rotate-270'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.loadDataManagement('export', true)
      }
    }, {
      check: true,
      options: {
        color: 'alternate-white',
        tooltip: 'Delete data',
        icons: ['fa-trash'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.loadDataManagement('delete', true)
      }
    }, {
      check: true,
      options: {
        color: 'alternate-white',
        tooltip: `Download settings (downloads your settings to your computer without your personal data so you can easily share them with other users)`,
        icons: ['fa-gear', 'fa-arrow-circle-down'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.exportSettings()
      }
    }, {
      check: true,
      options: {
        color: 'alternate-white',
        tooltip: 'Clean old data',
        icons: ['fa-paint-brush'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.loadDataCleaner(true)
      }
    }, {
      check: !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst,
      options: {
        color: 'alternate-white',
        tooltip: 'View recent username changes',
        icons: ['fa-user', 'fa-history'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.setSMRecentUsernameChanges()
      }
    }, {
      check: !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('uf'),
      options: {
        color: 'alternate-white',
        tooltip: 'See list of filtered users',
        icons: ['fa-user', 'fa-eye-slash'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.setSMManageFilteredUsers()
      }
    }, {
      check: !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.sg && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gf') && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gf_s'),
      options: {
        color: 'alternate-white',
        tooltip: 'Manage hidden giveaways',
        icons: ['fa-gift', 'fa-eye-slash'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.setSMManageFilteredGiveaways()
      }
    }, {
      check: !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.sg && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('df') && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('df_s'),
      options: {
        color: 'alternate-white',
        tooltip: 'Manage hidden discussions',
        icons: ['fa-comments', 'fa-eye-slash']
      },
      ref: button => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.discussionsDiscussionFilters.df_menu({}, button)
    }, {
      check: !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.st && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('tf') && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('tf_s'),
      options: {
        color: 'alternate-white',
        tooltip: 'Manage hidden trades',
        icons: ['fa-retweet', 'fa-eye-slash']
      },
      ref: button => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.tradesTradeFilters.tf_menu({}, button)
    }, {
      check: !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.sg && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('dt'),
      options: {
        color: 'alternate-white',
        tooltip: 'Manage discussion tags',
        icons: ['fa-comments', 'fa-tags'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.openManageDiscussionTagsPopup()
      }
    }, {
      check: !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.sg && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('ut'),
      options: {
        color: 'alternate-white',
        tooltip: 'Manage user tags',
        icons: ['fa-user', 'fa-tags'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.openManageUserTagsPopup()
      }
    }, {
      check: !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gt'),
      options: {
        color: 'alternate-white',
        tooltip: 'Manage game tags',
        icons: ['fa-gamepad', 'fa-tags'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.openManageGameTagsPopup()
      }
    }, {
      check: !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gpt'),
      options: {
        color: 'alternate-white',
        tooltip: 'Manage group tags',
        icons: ['fa-users', 'fa-tags'],
        onClick: () => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.openManageGroupTagsPopup()
      }
    }, {
      check: !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('wbc'),
      options: {
        color: 'alternate-white',
        tooltip: 'Manage Whitelist / Blacklist Checker caches',
        icons: ['fa-heart', 'fa-ban', 'fa-cog']
      },
      ref: button => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.usersWhitelistBlacklistChecker.wbc_addButton(false, button)
    }, {
      check: !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('namwc'),
      options: {
        color: 'alternate-white',
        tooltip: 'Manage Not Activated / Multiple Wins Checker caches',
        icons: ['fa-trophy', 'fa-cog']
      },
      ref: button => _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.usersNotActivatedMultipleWinChecker.namwc_setPopup(button)
    }].filter(x => x.check);
    const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_19__["PageHeading"].create('sm', [{
      name: 'ESGST',
      url: _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.settingsUrl
    }, {
      name: 'Settings',
      url: _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.settingsUrl
    }]).insert(Container, 'afterbegin');
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.st) {
      var _heading$nodes$outer;
      (_heading$nodes$outer = heading.nodes.outer) === null || _heading$nodes$outer === void 0 || _heading$nodes$outer.classList.remove('esgst-fmph');
    }
    for (const item of items) {
      const button = _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create(item.options).insert(heading.nodes.outer, 'beforeend');
      if (item.ref) {
        item.ref(button.nodes.outer);
      }
    }
    if (!isPopup) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.mainPageHeading = heading.nodes.outer;
    }
    input.addEventListener('input', event => this.filterSm(event));
    input.addEventListener('change', event => this.filterSm(event));
    Context.classList.add('esgst-menu-layer');
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(Context, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-menu-split"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-settings-menu"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: `esgst-settings-menu-feature ${isPopup ? '' : 'esgst-menu-split-fixed'}`
    }, "Click on a feature/option to manage it here.")));
    _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create([{
      color: 'green',
      icons: [],
      name: 'Save Changes',
      onClick: async () => {
        try {
          const missingPermissions = [];
          const requiredPermissions = new Set(Object.values(this.requiredPermissions).flat());
          for (const permissionKey of requiredPermissions) {
            if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_12__["permissions"].contains([[permissionKey]]))) {
              missingPermissions.push(permissionKey);
            }
          }
          if (_browser__WEBPACK_IMPORTED_MODULE_9__["browser"].runtime.getURL && missingPermissions.length > 0) {
            const permissionsPopup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
              addScrollable: true,
              icon: 'fa-exclamation',
              isTemp: true,
              title: _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("fragment", null, "Some of the features you enabled require permissions in order to work. Go", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("a", {
                className: "esgst-bold table__column__secondary-link",
                href: `${_browser__WEBPACK_IMPORTED_MODULE_9__["browser"].runtime.getURL('permissions.html')}?keys=${missingPermissions.join(',')}`,
                target: "_blank"
              }, "here"), ' ', "and click the \"Grant\" button to grant them.")
            });
            permissionsPopup.open();
            this.requiredPermissions = {};
          }
          await _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.lockAndSaveSettings(this.toSave);
          const adareqlimChanged = Object.keys(this.toSave).some(key => key.startsWith('customAdaReqLim'));
          if (adareqlimChanged) {
            await _browser__WEBPACK_IMPORTED_MODULE_9__["browser"].runtime.sendMessage({
              action: 'update_adareqlim'
            });
          }
          this.toSave = {};
          new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
            icon: 'fa-check',
            isTemp: true,
            title: 'Settings saved!'
          }).open();
        } catch (err) {
          _class_Logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].error(err.message);
        }
      }
    }, {
      color: 'white',
      isDisabled: true,
      icons: [],
      name: 'Saving...'
    }]).insert(heading.nodes.outer, 'beforeend');
    Context.addEventListener('click', event => this.loadFeatureDetails(null, null, popup && popup.scrollable.offsetTop, event));
    let SMMenu = Context.getElementsByClassName('esgst-settings-menu')[0];
    let i, type;
    for (const permissionKey of Object.keys(_class_Permissions__WEBPACK_IMPORTED_MODULE_12__["permissions"].permissions)) {
      const permission = _class_Permissions__WEBPACK_IMPORTED_MODULE_12__["permissions"].permissions[permissionKey];
      for (const featureKey of Object.keys(permission.messages)) {
        const feature = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.featuresById[featureKey];
        if (feature) {
          if (!feature.permissions) {
            feature.permissions = [];
          }
          feature.permissions.push(permissionKey);
        }
      }
    }
    i = 1;
    if (_browser__WEBPACK_IMPORTED_MODULE_9__["browser"].runtime.getURL) {
      const permissionsSection = this.createMenuSection(SMMenu, null, i, 'Permissions', 'permissions');
      permissionsSection.lastElementChild.innerHTML = `
				Go <a class="esgst-bold table__column__secondary-link" href="${_browser__WEBPACK_IMPORTED_MODULE_9__["browser"].runtime.getURL('permissions.html')}" target="_blank">here</a> to grant / deny permissions.
			`;
      i += 1;
    }
    for (type in _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features) {
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features.hasOwnProperty(type)) {
        if (type !== 'trades' || _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('esgst_st')) {
          let id,
            j,
            section,
            title,
            isNew = false;
          title = type.replace(/^./, m => {
            return m.toUpperCase();
          });
          section = this.createMenuSection(SMMenu, null, i, title, type);
          j = 1;
          for (id in _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features[type].features) {
            if (_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features[type].features.hasOwnProperty(id)) {
              if (id === 'common') {
                continue;
              }
              let feature, ft;
              feature = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features[type].features[id];
              if (!feature.sg && feature.st && !_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('esgst_st') && id !== 'esgst') {
                continue;
              }
              ft = this.getSMFeature(feature, id, j, `${i}.${j}`, popup);
              if (ft) {
                if (ft.isNew) {
                  isNew = true;
                }
                section.lastElementChild.appendChild(ft.menu);
                j += 1;
              }
            }
          }
          if (isNew) {
            _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(section.firstElementChild.lastElementChild, 'afterbegin', [{
              attributes: {
                class: 'esgst-bold esgst-red esgst-new-indicator',
                title: 'There is a new feature/option in this section'
              },
              type: 'span',
              children: [{
                attributes: {
                  class: 'fa fa-star'
                },
                type: 'i'
              }]
            }]);
          }
          i += 1;
        }
      }
    }
    const elementOrdering = this.createMenuSection(SMMenu, null, i, 'Element Ordering', 'element_ordering');
    this.setElementOrderingSection(elementOrdering.lastElementChild);
    i += 1;
    this.createMenuSection(SMMenu, [{
      attributes: {
        class: 'esgst-steam-api-key',
        type: 'text'
      },
      type: 'input'
    }, {
      attributes: {
        class: 'esgst-description'
      },
      type: 'div',
      children: [{
        text: 'This is optional for syncing owned games faster and required for syncing alt accounts. Get a Steam API Key ',
        type: 'node'
      }, {
        attributes: {
          class: 'esgst-bold',
          href: `https://steamcommunity.com/dev/apikey`,
          target: '_blank'
        },
        text: 'here',
        type: 'a'
      }, {
        text: `. You can enter any domain in there, it is irrelevant, for example, "https://www.steamgifts.com".`,
        type: 'node'
      }]
    }], i, 'Steam API Key', 'steam_api_key');
    SMAPIKey = /** @type {HTMLInputElement} */Context.getElementsByClassName('esgst-steam-api-key')[0];
    let key = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('steamApiKey');
    if (key) {
      SMAPIKey.value = key;
    }
    SMAPIKey.addEventListener('input', () => {
      // noinspection JSIgnoredPromiseFromCall
      this.preSave('steamApiKey', SMAPIKey.value);
    });
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.esgst === 'settings' && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.id) {
      this.loadFeatureDetails(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.id, _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeatureNumber(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.parameters.id).number, popup && popup.scrollable.offsetTop);
    }
    if (isPopup) {
      popup.open();
    }
    newIndicators = document.querySelectorAll('.esgst-new-indicator');
    if (newIndicators.length) {
      dismissAllButton.show();
    }
  }
  showExtensionOnlyPopup() {
    new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
      addScrollable: true,
      icon: 'fa-exclamation',
      isTemp: true,
      title: _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("fragment", null, "This feature is only available in the extension version of ESGST. Please upgrade to the extension to use it. Visit the instructions in the readme on how to install the extension.", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("a", {
        href: "https://github.com/SquishedPotatoe/esgst#installation"
      }, "https://github.com/SquishedPotatoe/esgst#installation"), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), "To transfer your data from the userscript to the extension, backup your data in the backup menu of the userscript, then disable the userscript, install the extension and restore your data in the restore menu of the extension. Below are the links to the backup/restore pages:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/settings/profile?esgst=backup"
      }, "https://www.steamgifts.com/account/settings/profile?esgst=backup"), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/settings/profile?esgst=restore"
      }, "https://www.steamgifts.com/account/settings/profile?esgst=restore"))
    }).open();
  }
  loadFeatureDetails(id, numberPath, offset, event) {
    var _feature$alias;
    if (!offset) {
      offset = 0;
    }
    if (!id) {
      if (event.target.matches('.esgst-settings-feature')) {
        id = event.target.getAttribute('data-id');
        numberPath = event.target.getAttribute('data-number');
      } else {
        return;
      }
    }
    const feature = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.featuresById[id];
    if (!feature) {
      return;
    }
    const url = `${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.settingsUrl}&id=${id}`;
    const featureId = (_feature$alias = feature.alias) !== null && _feature$alias !== void 0 ? _feature$alias : id;
    let featureName;
    if (feature.customName) {
      featureName = feature.customName();
      this.replaceFeatureNamePlaceholders(featureName);
    } else {
      featureName = feature.name.replace(/\[id=(.+?)]/g, _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeatureName.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common));
    }
    const items = [{
      check: true,
      content: featureName,
      name: 'Name'
    }, {
      check: true,
      content: _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, numberPath, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
        "data-clipboard-text": numberPath,
        className: "icon_to_clipboard fa fa-fw fa-copy"
      })), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, url, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
        "data-clipboard-text": url,
        className: "icon_to_clipboard fa fa-fw fa-copy"
      }))),
      name: 'Number / Link'
    }];
    let sgContext, stContext;
    if (feature.sg) {
      const value = (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].getFull(`${featureId}_sg`) || _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeaturePath(feature, featureId, 'sg')).enabled;
      sgContext = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null);
      const sgSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_17__["ToggleSwitch"](sgContext, null, true, _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('esgst_st') ? 'SteamGifts' : '', true, false, null, value);
      feature.sgFeatureSwitch = sgSwitch;
      sgSwitch.onEnabled = () => {
        if (feature.extensionOnly && _browser__WEBPACK_IMPORTED_MODULE_9__["browser"].gm) {
          sgSwitch.disable(true);
          this.showExtensionOnlyPopup();
          return;
        }
        if (feature.conflicts) {
          for (const conflictId of feature.conflicts) {
            const setting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].getFull(`${conflictId}_sg`);
            if (typeof setting === 'object' ? setting.enabled : setting) {
              sgSwitch.disable(true);
              new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
                addScrollable: true,
                icon: 'fa-exclamation',
                isTemp: true,
                title: `This feature conflicts with ${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeatureName(null, conflictId)}. While that feature is enabled, this feature cannot be enabled.`
              }).open();
              return;
            }
          }
        }
        this.preSave(`${featureId}_sg`, true);
        if (feature.sgSwitch) {
          feature.sgSwitch.enable(true);
        }
        _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(document.querySelector('#esgst-paths-sg'), 'atinner', this.openPathsPopup(feature, featureId, 'sg'));
      };
      sgSwitch.onDisabled = async () => {
        this.preSave(`${featureId}_sg`, false);
        if (feature.sgSwitch) {
          feature.sgSwitch.disable(true);
        }
        _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(document.querySelector('#esgst-paths-sg'), 'atinner', this.openPathsPopup(feature, featureId, 'sg'));
      };
    }
    if (feature.st && (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('esgst_st') || featureId === 'esgst')) {
      const value = (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].getFull(`${featureId}_st`) || _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeaturePath(feature, featureId, 'st')).enabled;
      stContext = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null);
      const stSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_17__["ToggleSwitch"](stContext, null, true, 'SteamTrades', false, true, null, value);
      feature.stFeatureSwitch = stSwitch;
      stSwitch.onEnabled = () => {
        if (feature.extensionOnly && _browser__WEBPACK_IMPORTED_MODULE_9__["browser"].gm) {
          stSwitch.disable(true);
          this.showExtensionOnlyPopup();
          return;
        }
        if (feature.conflicts) {
          for (const conflictId of feature.conflicts) {
            const setting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].getFull(`${conflictId}_st`);
            if (typeof setting === 'object' ? setting.enabled : setting) {
              stSwitch.disable(true);
              new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
                addScrollable: true,
                icon: 'fa-exclamation',
                isTemp: true,
                title: `This feature conflicts with ${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeatureName(null, conflictId)}. While that feature is enabled, this feature cannot be enabled.`
              }).open();
              return;
            }
          }
        }
        this.preSave(`${featureId}_st`, true);
        if (feature.stSwitch) {
          feature.stSwitch.enable(true);
        }
        _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(document.querySelector('#esgst-paths-st'), 'atinner', this.openPathsPopup(feature, featureId, 'st'));
      };
      stSwitch.onDisabled = async () => {
        this.preSave(`${featureId}_st`, false);
        if (feature.stSwitch) {
          feature.stSwitch.disable(true);
        }
        _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(document.querySelector('#esgst-paths-st'), 'atinner', this.openPathsPopup(feature, featureId, 'st'));
      };
    }
    items.push({
      check: true,
      content: _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("fragment", null, sgContext, stContext),
      name: 'Enable/Disable'
    });
    if (feature.description) {
      const descriptionEl = feature.description();
      this.replaceFeatureNamePlaceholders(descriptionEl);
      items.push({
        check: true,
        content: _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
          className: "markdown"
        }, descriptionEl),
        name: 'What does it do?'
      });
    }
    const additionalOptions = this.getSmFeatureAdditionalOptions(feature, featureId);
    if (additionalOptions.length > 0) {
      items.push({
        check: true,
        content: _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("fragment", null, additionalOptions),
        name: 'Additional Options'
      });
    }
    if (feature.sync) {
      items.push({
        check: true,
        content: _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("p", null, "This feature requires the following data to be synced in order to function properly:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("strong", null, feature.sync)), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("p", null, "To sync these now, click", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("a", {
          className: "table__column__secondary-link",
          href: `${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.syncUrl}&autoSync=true&${feature.syncKeys.map(x => `${x}=1`).join('&')}`,
          target: "_blank"
        }, "here"), ".")),
        name: 'Sync Requirements'
      });
    }
    if (feature.sg && (!feature.sgPaths || typeof feature.sgPaths !== 'string')) {
      items.push({
        check: true,
        content: this.openPathsPopup(feature, featureId, 'sg'),
        // @ts-ignore
        id: 'esgst-paths-sg',
        name: 'Where to run it on SteamGifts?'
      });
    }
    if (feature.st && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('esgst_st') && (!feature.stPaths || typeof feature.stPaths !== 'string')) {
      items.push({
        check: true,
        content: this.openPathsPopup(feature, featureId, 'st'),
        // @ts-ignore
        id: 'esgst-paths-st',
        name: 'Where to run it on SteamTrades?'
      });
    }
    const context = document.querySelector('.esgst-settings-menu-feature');
    if (!context.classList.contains('esgst-menu-split-fixed')) {
      context.style.maxHeight = `${context.closest('.esgst-menu-layer').offsetHeight - 24}px`;
    }
    context.innerHTML = 'Click on a feature/option to manage it here.';
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createFormRows(context, 'beforeend', {
      items
    });
  }
  setElementOrderingSection(context) {
    const obj = {
      elementOrdering: true,
      outerWrap: _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(context, 'beforeend', [{
        attributes: {
          class: 'esgst-element-ordering-container'
        },
        type: 'div'
      }])
    };
    const obj_gv = {
      elementOrdering: true,
      outerWrap: _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(context, 'beforeend', [{
        attributes: {
          class: 'esgst-element-ordering-container'
        },
        type: 'div'
      }])
    };
    const items = [{
      includeGridView: true,
      group: 'giveaways',
      id: 'gc_categories',
      key: 'gcPanel',
      name: 'Game Categories',
      labels: {
        gc_ocv: 'Original CV',
        gc_fcv: 'Full CV',
        gc_rcv: 'Reduced CV',
        gc_ncv: 'No CV',
        gc_h: 'Hidden',
        gc_i: 'Ignored',
        gc_o: 'Owned',
        gc_w: 'Wishlisted',
        gc_f: 'Followed',
        gc_pw: 'Previously Won',
        gc_a: 'Achievements',
        gc_bd: 'Banned',
        gc_bvg: 'Barter.vg',
        gc_sp: 'Singleplayer',
        gc_mp: 'Multiplayer',
        gc_sc: 'Steam Cloud',
        gc_tc: 'Trading Cards',
        gc_l: 'Linux',
        gc_m: 'Mac',
        gc_ea: 'Early Access',
        gc_lg: 'Learning',
        gc_rm: 'Removed',
        gc_dlc: 'DLC',
        gc_p: 'Package',
        gc_gi: 'Giveaway Info',
        gc_r: 'Rating',
        gc_hltb: 'HLTB',
        gc_rd: 'Release Date',
        gc_g: 'Genres'
      }
    }, {
      includeGridView: true,
      group: 'giveaways',
      id: 'giveawayHeading',
      key: 'heading',
      name: 'Giveaway Heading',
      labels: {
        gr: 'Giveaway Recreator',
        gb: 'Giveaway Bookmarks',
        gf: 'Giveaway Filters',
        egh: 'Entered Game Highlighter',
        name: 'Game Name',
        points: 'Points',
        copies: 'Copies',
        steam: 'Steam Link',
        'screenshots-videos': 'Screenshots / Videos',
        search: 'Search Link',
        hideGame: 'Hide Game',
        gt: 'Game Tags'
      }
    }, {
      group: 'giveaways',
      id: 'giveawayColumns',
      key: 'columns',
      name: 'Giveaway Columns',
      labels: {
        ged: 'Giveaway Encrypter/Decrypter',
        endTime: 'End Time',
        winners: 'Winners',
        startTime: 'Start Time',
        touhou: 'Touhou',
        inviteOnly: 'Invite Only',
        whitelist: 'Whitelist',
        group: 'Group',
        regionRestricted: 'Region Restricted',
        level: 'Level'
      }
    }, {
      isGridView: true,
      group: 'giveaways_gv',
      id: 'giveawayColumns_gv',
      key: 'gvIcons',
      name: 'Giveaway Columns',
      labels: {
        sgTools: 'SGTools',
        ged: 'Giveaway Encrypter/Decrypter',
        time: 'End/Start Time',
        touhou: 'Touhou',
        inviteOnly: 'Invite Only',
        whitelist: 'Whitelist',
        group: 'Group',
        regionRestricted: 'Region Restricted',
        level: 'Level'
      }
    }, {
      group: 'giveaways',
      id: 'giveawayPanel',
      key: 'panel',
      name: 'Giveaway Panel',
      labels: {
        ttec: 'Time To Enter Calculator',
        gwc: 'Giveaway Winning Chance',
        gwr: 'Giveaway Winning Ratio',
        gptw: 'Giveaway Points To Win',
        gp: 'Giveaway Popup',
        elgb: 'Enter/Leave Giveaway Button',
        sgTools: 'SGTools'
      }
    }, {
      isGridView: true,
      group: 'giveaways_gv',
      id: 'giveawayPanel_gv',
      key: 'panel',
      name: 'Giveaway Panel',
      labels: {
        ttec: 'Time To Enter Calculator',
        gwc: 'Giveaway Winning Chance',
        gwr: 'Giveaway Winning Ratio',
        gptw: 'Giveaway Points To Win',
        gp: 'Giveaway Popup',
        elgb: 'Enter/Leave Giveaway Button'
      }
    }, {
      includeGridView: true,
      group: 'giveaways',
      id: 'giveawayLinks',
      key: 'links',
      name: 'Giveaway Links',
      labels: {
        entries: 'Entries',
        winners_count: 'Winners Count',
        comments: 'Comments'
      }
    }, {
      includeGridView: true,
      group: 'giveaways',
      id: 'giveawayExtraPanel',
      key: 'extraPanel',
      name: 'Giveaway Extra Panel',
      labels: {
        ggl: 'Giveaway Groups Loader'
      }
    }, {
      group: 'mainPageHeading',
      id: 'leftButtonIds',
      key: 'leftButtons',
      name: `Left Main Page Heading Buttons (Hidden)`,
      tooltip: 'Moving an element to this group will hide it from the main page heading. It will be accessible by clicking on the button with the vertical ellipsis located at the left side of the heading.',
      labels: {}
    }, {
      group: 'mainPageHeading',
      id: 'rightButtonIds',
      key: 'rightButtons',
      name: `Right Main Page Heading Buttons (Hidden)`,
      tooltip: 'Moving an element to this group will hide it from the main page heading. It will be accessible by clicking on the button with the vertical ellipsis located at the  right side of the heading.',
      labels: {}
    }, {
      group: 'mainPageHeading',
      id: 'leftMainPageHeadingIds',
      key: 'leftMainPageHeadingButtons',
      name: 'Left Main Page Heading Buttons',
      labels: {
        aic: 'Attached Images Carousel',
        as: 'Archive Searcher',
        cec: 'Comment/Entry Checker',
        cf: 'Comment Filters',
        cs: 'Comment Searcher',
        ctGo: `Comment Tracker (Go To Unread)`,
        ctRead: `Comment Tracker (Mark As Read)`,
        ctUnread: `Comment Tracker (Mark As Unread)`,
        df: 'Discussion Filters',
        df_s_s: `Discussion Filters (Single Filters Switch)`,
        tf: 'Trade Filters',
        tf_s_s: `Trade Filters (Single Filters Switch)`,
        gmf: 'Game Filters',
        gpf: 'Group Filters',
        ds: 'Discussion Sorter',
        gas: 'Giveaway Sorter',
        ge: 'Giveaway Extractor',
        gf: 'Giveaway Filters',
        gf_s_s: `Giveaway Filters (Single Filters Switch)`,
        glwc: 'Group Library/Wishlist Checker',
        gts: 'Giveaway Templates',
        gv: 'Grid View',
        hgm: 'Hidden Games Manager',
        mpp: 'Main Post Popup',
        namwc: 'Not Activated/Multiple Wins Checker',
        rbp: 'Reply Box Popup',
        sks: 'Sent Keys Searcher',
        tb: 'Trade Bumper',
        uf_s_s: `User Filters (Single Filters Switch)`,
        ugs: 'Unsent Gifts Sender',
        usc: 'User Suspension Checker',
        wbc: 'Whitelist/Blacklist Checker',
        wbm: 'Whitelist/Blacklist Manager',
        wbsAsc: `Whitelist/Blacklist Sorter (Ascending)`,
        wbsDesc: `Whitelist/Blacklist Sorter (Descending)`
      }
    }, {
      group: 'mainPageHeading',
      id: 'rightMainPageHeadingIds',
      key: 'rightMainPageHeadingButtons',
      name: 'Right Main Page Heading Buttons',
      labels: {
        esContinuous: `Endless Scrolling (Continuously Load)`,
        esNext: `Endless Scrolling (Load Next),`,
        esResume: `Endless Scrolling (Resume)`,
        esPause: `Endless Scrolling (Pause)`,
        esRefresh: `Endless Scrolling (Refresh)`,
        esRefreshAll: `Endless Scrolling (Refresh All)`,
        mm: 'Multi-Manager',
        stbb: 'Scroll To Bottom Button',
        sttb: 'Scroll To Top Button'
      }
    }];
    for (const item of items) {
      const children = [];
      for (const id in item.labels) {
        if (!item.labels.hasOwnProperty(id)) {
          continue;
        }
        children.push({
          attributes: {
            ['data-draggable-id']: id,
            ['data-draggable-group']: item.group
          },
          text: item.labels[id],
          type: 'div'
        });
      }
      const section = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements((item.isGridView ? obj_gv : obj).outerWrap, 'beforeend', [{
        text: `${item.name}${item.isGridView ? ` (Grid View)` : ''}`,
        type: 'strong'
      }, item.tooltip ? {
        attributes: {
          class: 'fa fa-question-circle',
          title: item.tooltip
        },
        type: 'i'
      } : null, {
        attributes: {
          class: 'esgst-element-ordering-box'
        },
        type: 'div',
        children
      }]);
      _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create([{
        color: 'white',
        icons: ['fa-undo'],
        name: 'Reset',
        onClick: this.resetElementOrdering.bind(this, item.id, obj, obj_gv)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Resetting'
      }]).insert(section, 'beforebegin');
      (item.isGridView ? obj_gv : obj)[item.key] = section;
      section.addEventListener('dragenter', _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.draggable_enter.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common, {
        context: section,
        item: {
          outerWrap: section
        }
      }));
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.draggable_set({
        context: section,
        id: item.id,
        item: {
          outerWrap: section
        },
        onDragEnd: obj => {
          for (const key in obj) {
            this.preSave(key, obj[key]);
          }
        }
      });
      if (item.includeGridView) {
        const children_gv = [];
        for (const id in item.labels) {
          if (!item.labels.hasOwnProperty(id)) {
            return;
          }
          children_gv.push({
            attributes: {
              ['data-draggable-id']: id,
              ['data-draggable-group']: `${item.group}_gv`
            },
            text: item.labels[id],
            type: 'div'
          });
        }
        const section_gv = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(obj_gv.outerWrap, 'beforeend', [{
          text: `${item.name} (Grid View)`,
          type: 'strong'
        }, {
          attributes: {
            class: 'esgst-element-ordering-box'
          },
          type: 'div',
          children: children_gv
        }]);
        _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create([{
          color: 'white',
          icons: ['fa-undo'],
          name: 'Reset',
          onClick: this.resetElementOrdering.bind(this, `${item.id}_gv`, obj, obj_gv)
        }, {
          template: 'loading',
          isDisabled: true,
          name: 'Resetting'
        }]).insert(section_gv, 'beforebegin');
        obj_gv[item.key] = section_gv;
        section_gv.addEventListener('dragenter', _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.draggable_enter.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common, {
          context: section_gv,
          item: {
            outerWrap: section_gv
          }
        }));
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.draggable_set({
          context: section_gv,
          id: `${item.id}_gv`,
          item: {
            outerWrap: section_gv
          },
          onDragEnd: obj => {
            for (const key in obj) {
              this.preSave(key, obj[key]);
            }
          }
        });
      }
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.giveaways.giveaways_reorder(obj);
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.giveaways.giveaways_reorder(obj_gv);
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.reorderButtons(obj);
  }
  async resetElementOrdering(id, obj, obj_gv) {
    this.preSave(id, _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].defaultValues[id]);
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.giveaways.giveaways_reorder(obj);
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.giveaways.giveaways_reorder(obj_gv);
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.reorderButtons(obj);
  }
  openPathsPopup(feature, id, name) {
    feature.id = id;
    let obj = {
      exclude: {
        extend: this.addPath.bind(this)
      },
      excludeItems: [],
      include: {
        extend: this.addPath.bind(this)
      },
      includeItems: [],
      name: name
    };
    const context = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-bold"
    }, "Run it here:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
      className: "fa fa-question-circle",
      title: "Select the places where you want the feature to run. If you cannot find the place you want, select 'Custom' and enter the place manually (you have to use regular expressions)."
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", obj.include), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-button-group"
    }, _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create({
      color: 'white',
      icons: ['fa-plus-circle'],
      name: 'Add New',
      onClick: () => obj.include.extend(feature, 'include', obj, {
        enabled: 1,
        pattern: ''
      }, true)
    }).build().nodes.outer), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-bold"
    }, "Do NOT run it here:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
      className: "fa fa-question-circle",
      title: "Select the places where you don't want the feature to run. If you cannot find the place you want, select 'Custom' and enter the place manually (you have to use regular expressions)."
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", obj.exclude), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-button-group"
    }, _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create({
      color: 'white',
      icons: ['fa-plus-circle'],
      name: 'Add New',
      onClick: () => obj.exclude.extend(feature, 'exclude', obj, {
        enabled: 1,
        pattern: ''
      }, true)
    }).build().nodes.outer));
    obj.setting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].getFull(`${id}_${obj.name}`) || _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeaturePath(feature, id, obj.name);
    obj.setting.include.forEach(path => obj.include.extend(feature, 'include', obj, path));
    obj.setting.exclude.forEach(path => obj.exclude.extend(feature, 'exclude', obj, path));
    return context;
  }
  addPath(context, feature, key, obj, path, userAdded) {
    let item = {};
    item.container = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(context, 'beforeend', [{
      type: 'div'
    }]);
    item.switch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_17__["ToggleSwitch"](item.container, null, true, '', false, false, null, path.enabled);
    let found = false;
    item.switch.onChange = () => {
      this.savePaths(feature.id, obj);
    };
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(item.container, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("select", {
      className: "esgst-switch-input esgst-switch-input-large",
      ref: ref => item.select = ref
    }, _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.paths[obj.name].filter(x => !feature[`${obj.name}Paths`] || x.name === 'Everywhere' || x.name.match(feature[`${obj.name}Paths`])).map(x => _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("option", {
      value: x.pattern,
      selected: x.pattern === path.pattern && (found = true) ? true : null
    }, x.name)), feature[`${obj.name}Paths`] ? null : _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("option", {
      value: "custom",
      selected: !found || null
    }, "Custom")));
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(item.container, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      className: "esgst-switch-input esgst-switch-input-large",
      type: "text",
      disabled: item.select.value === 'custom' ? null : true,
      ref: ref => item.input = ref
    }));
    item.select.addEventListener('change', () => {
      if (item.select.value === 'custom') {
        item.input.disabled = false;
        item.input.value = '';
      } else {
        item.input.disabled = true;
        item.input.value = item.select.value;
      }
      this.savePaths(feature.id, obj);
    });
    item.input.value = path.pattern;
    item.input.addEventListener('input', () => {
      this.validatePathRegex(item);
      this.savePaths(feature.id, obj);
    });
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(item.container, 'beforeend', [{
      attributes: {
        class: 'fa fa-times-circle esgst-clickable',
        title: 'Remove'
      },
      type: 'i'
    }]).addEventListener('click', () => this.removePath(feature, item, key, obj));
    item.invalid = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(item.container, 'beforeend', [{
      attributes: {
        class: 'fa fa-exclamation esgst-hidden esgst-red',
        title: 'Invalid Regular Expression'
      },
      type: 'i'
    }]);
    obj[`${key}Items`].push(item);
    if (key === 'include' && feature.includeOptions) {
      item.options = [];
      const optionsContainer = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(item.container, 'beforeend', [{
        attributes: {
          class: 'esgst-form-row-indent'
        },
        type: 'div'
      }]);
      for (const option of feature.includeOptions) {
        const optionObj = {
          id: option.id,
          switch: new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_17__["ToggleSwitch"](optionsContainer, null, true, option.name, false, false, null, !!(path.options && path.options[option.id]))
        };
        optionObj.switch.onChange = () => this.savePaths(feature.id, obj);
        item.options.push(optionObj);
      }
    }
    if (userAdded) {
      this.savePaths(feature.id, obj);
    }
  }
  removePath(feature, item, key, obj) {
    let i = obj[`${key}Items`].length - 1;
    if (i === 0 && key === 'include') {
      window.alert('At least 1 place is required!');
      return;
    }
    while (i > -1 && obj[`${key}Items`][i].input.value !== item.input.value) i--;
    if (i > -1) {
      obj[`${key}Items`].splice(i, 1);
    }
    item.container.remove();
    this.savePaths(feature.id, obj);
  }
  validatePathRegex(item) {
    item.invalid.classList.add('esgst-hidden');
    try {
      new RegExp(item.input.value);
    } catch (error) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].warning(error.message, error.stack);
      item.invalid.classList.remove('esgst-hidden');
    }
  }
  async savePaths(id, obj) {
    obj.setting.include = [];
    obj.setting.exclude = [];
    for (const item of obj.includeItems) {
      const setting = {
        enabled: item.switch.value ? 1 : 0,
        pattern: item.input.value
      };
      if (item.options) {
        setting.options = {};
        for (const option of item.options) {
          setting.options[option.id] = option.switch.value ? 1 : 0;
        }
      }
      obj.setting.include.push(setting);
    }
    for (const item of obj.excludeItems) {
      obj.setting.exclude.push({
        enabled: item.switch.value ? 1 : 0,
        pattern: item.input.value
      });
    }
    this.preSave(`${id}_${obj.name}`, obj.setting);
  }
  dismissNewOption(id, event) {
    event.currentTarget.remove();
    const dismissedOptions = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('dismissedOptions');
    if (dismissedOptions.indexOf(id) < 0) {
      dismissedOptions.push(id);
      // noinspection JSIgnoredPromiseFromCall
      this.preSave('dismissedOptions', dismissedOptions);
    }
  }
  getSMFeature(feature, id, number, numberPath, popup) {
    var _feature$alias2;
    const featureId = (_feature$alias2 = feature.alias) !== null && _feature$alias2 !== void 0 ? _feature$alias2 : id;
    const menuContainer = document.createElement('div');
    menuContainer.className = 'esgst-sm-feature-container';
    menuContainer.id = `esgst_${id}`;
    let menu;
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(menuContainer, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-sm-feature",
      ref: ref => menu = ref
    }));
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(menu, 'beforeend', [{
      attributes: {
        class: 'esgst-sm-small-number esgst-form-heading-number'
      },
      text: `${number}.`,
      type: 'div'
    }]);
    let isMainNew = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('dismissedOptions').indexOf(featureId) < 0 && !_lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__["Utils"].isSet(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.settings[`${featureId}_sg`]) && !_lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__["Utils"].isSet(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.settings[`${featureId}_st`]);
    if (isMainNew) {
      feature.isNew = true;
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(menu.firstElementChild, 'afterend', [{
        attributes: {
          class: 'esgst-bold esgst-red esgst-clickable esgst-new-indicator',
          title: 'This is a new feature/option. Click to dismiss.'
        },
        text: `[NEW]`,
        type: 'span'
      }]).addEventListener('click', event => this.dismissNewOption(featureId, event));
    }
    let isHidden = true;
    let sgContext, stContext;
    let collapseButton, isExpanded, subMenu;
    if (feature.sg) {
      const value = (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].getFull(`${featureId}_sg`) || _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeaturePath(feature, featureId, 'sg')).enabled;
      if (value) {
        isHidden = false;
      }
      sgContext = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null);
      const sgSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_17__["ToggleSwitch"](sgContext, null, true, _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('esgst_st') ? `[SG]` : '', true, false, null, value);
      feature.sgSwitch = sgSwitch;
      sgSwitch.onEnabled = () => {
        if (feature.extensionOnly && _browser__WEBPACK_IMPORTED_MODULE_9__["browser"].gm) {
          sgSwitch.disable(true);
          this.showExtensionOnlyPopup();
          return;
        }
        if (feature.conflicts) {
          for (const conflictId of feature.conflicts) {
            const setting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].getFull(`${conflictId}_sg`);
            if (typeof setting === 'object' ? setting.enabled : setting) {
              sgSwitch.disable(true);
              new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
                addScrollable: true,
                icon: 'fa-exclamation',
                isTemp: true,
                title: `This feature conflicts with ${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeatureName(null, conflictId)}. While that feature is enabled, this feature cannot be enabled.`
              }).open();
              return;
            }
          }
        }
        if (feature.permissions) {
          this.requiredPermissions[featureId] = feature.permissions;
        }
        this.loadFeatureDetails(id, numberPath, popup && popup.scrollable.offsetTop);
        if (feature.sgFeatureSwitch) {
          feature.sgFeatureSwitch.enable();
        } else {
          this.preSave(`${featureId}_sg`, true);
        }
        if (subMenu.classList.contains('esgst-hidden')) {
          this.expandSection(collapseButton, id, subMenu);
          isExpanded = true;
        }
        if (feature.dependencies) {
          _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createConfirmation(_class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("fragment", null, "This feature depends on the following features to work properly: ", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), feature.dependencies.map(x => [`"${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeatureName(null, x)}"`, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null)]).flat(), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), "Would you like ESGST to automatically enable these features now if they're not already enabled?"), () => this.enableDependencies(feature.dependencies, 'sg'));
        }
      };
      sgSwitch.onDisabled = () => {
        if (feature.permissions) {
          delete this.requiredPermissions[featureId];
        }
        this.loadFeatureDetails(id, numberPath, popup && popup.scrollable.offsetTop);
        if (feature.sgFeatureSwitch) {
          feature.sgFeatureSwitch.disable();
        } else {
          this.preSave(`${featureId}_sg`, false);
        }
        if (!feature.stSwitch || !feature.stSwitch.value) {
          this.collapseSection(collapseButton, id, subMenu);
          isExpanded = false;
        }
      };
    }
    if (feature.st && (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('esgst_st') || featureId === 'esgst')) {
      const value = (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].getFull(`${featureId}_st`) || _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeaturePath(feature, featureId, 'st')).enabled;
      if (value) {
        isHidden = false;
      }
      stContext = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null);
      const stSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_17__["ToggleSwitch"](stContext, null, true, `[ST]`, false, true, null, value);
      feature.stSwitch = stSwitch;
      stSwitch.onEnabled = () => {
        if (feature.extensionOnly && _browser__WEBPACK_IMPORTED_MODULE_9__["browser"].gm) {
          stSwitch.disable(true);
          this.showExtensionOnlyPopup();
          return;
        }
        if (feature.conflicts) {
          for (const conflictId of feature.conflicts) {
            const setting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].getFull(`${conflictId}_st`);
            if (typeof setting === 'object' ? setting.enabled : setting) {
              stSwitch.disable(true);
              new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
                addScrollable: true,
                icon: 'fa-exclamation',
                isTemp: true,
                title: `This feature conflicts with ${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeatureName(null, conflictId)}. While that feature is enabled, this feature cannot be enabled.`
              }).open();
              return;
            }
          }
        }
        if (feature.permissions) {
          this.requiredPermissions[featureId] = feature.permissions;
        }
        this.loadFeatureDetails(id, numberPath, popup && popup.scrollable.offsetTop);
        if (feature.stFeatureSwitch) {
          feature.stFeatureSwitch.enable();
        } else {
          this.preSave(`${featureId}_st`, true);
        }
        if (subMenu.classList.contains('esgst-hidden')) {
          this.expandSection(collapseButton, id, subMenu);
          isExpanded = true;
        }
        if (feature.dependencies) {
          _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createConfirmation(_class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("fragment", null, "This feature depends on the following features to work properly: ", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), feature.dependencies.map(x => [`"${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeatureName(null, x)}"`, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null)]).flat(), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), "Would you like ESGST to automatically enable these features now if they're not already enabled?"), () => this.enableDependencies(feature.dependencies, 'st'));
        }
      };
      stSwitch.onDisabled = () => {
        if (feature.permissions) {
          delete this.requiredPermissions[featureId];
        }
        this.loadFeatureDetails(id, numberPath, popup && popup.scrollable.offsetTop);
        if (feature.stFeatureSwitch) {
          feature.stFeatureSwitch.disable();
        } else {
          this.preSave(`${featureId}_st`, false);
        }
        if (!feature.sgSwitch || !feature.sgSwitch.value) {
          this.collapseSection(collapseButton, id, subMenu);
          isExpanded = false;
        }
      };
    }
    let featureName;
    if (feature.customName) {
      featureName = feature.customName();
      this.replaceFeatureNamePlaceholders(featureName);
    } else {
      featureName = feature.name.replace(/\[id=(.+?)]/g, _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeatureName.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(menu, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("span", {
      className: "esgst-sm-feature-name"
    }, sgContext && sgContext.firstElementChild, stContext && stContext.firstElementChild, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("a", {
      className: "esgst-settings-feature table__column__secondary-link esgst-clickable",
      "data-id": id,
      "data-number": numberPath
    }, featureName)));
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(menuContainer, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: `esgst-form-row-indent SMFeatures ${isHidden ? 'esgst-hidden' : ''}`,
      ref: ref => subMenu = ref
    }));
    if (feature.features) {
      let i = 1;
      let isNew = false;
      for (const subId in feature.features) {
        if (!feature.features.hasOwnProperty(subId)) {
          continue;
        }
        const subFt = feature.features[subId];
        if (!subFt.sg && subFt.st && !_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('esgst_st') && featureId !== 'esgst') {
          continue;
        }
        const subFeature = this.getSMFeature(subFt, subId, i, `${numberPath}.${i}`, popup);
        if (subFeature) {
          if (subFeature.isNew) {
            isNew = true;
          }
          subMenu.appendChild(subFeature.menu);
          i += 1;
        }
      }
      isMainNew = isMainNew || isNew;
      if (isNew) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(menu.firstElementChild, 'afterend', [{
          attributes: {
            class: 'esgst-bold esgst-red esgst-new-indicator',
            title: 'There is a new feature/option in this section'
          },
          type: 'span',
          children: [{
            attributes: {
              class: 'fa fa-star'
            },
            type: 'i'
          }]
        }]);
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('makeSectionsCollapsible')) {
        collapseButton = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(menu, 'afterbegin', [{
          attributes: {
            class: 'esgst-clickable',
            style: `margin-right: 5px;`
          },
          type: 'span',
          children: [{
            attributes: {
              class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`collapse_${id}`) ? 'plus' : 'minus'}-square`,
              title: `${_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`collapse_${id}`) ? 'Expand' : 'Collapse'} options`
            },
            type: 'i'
          }]
        }]);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`collapse_${id}`)) {
          subMenu.classList.add('esgst-hidden');
          isExpanded = false;
        } else {
          isExpanded = true;
        }
        this.collapseButtons.push({
          collapseButton,
          id,
          subMenu
        });
        collapseButton.addEventListener('click', () => isExpanded = this.collapseOrExpandSection(collapseButton, id, subMenu, isExpanded));
      }
    } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('makeSectionsCollapsible')) {
      menuContainer.style.marginLeft = '17px';
    }
    return {
      isNew: isMainNew,
      menu: menuContainer
    };
  }
  resetColor(hexInput, alphaInput, id, colorId) {
    const color = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__["Utils"].rgba2Hex(_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].defaultValues[`${id}_${colorId}`]);
    hexInput.value = color.hex;
    alphaInput.value = color.alpha;
    this.preSave(`${id}_${colorId}`, _lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__["Utils"].hex2Rgba(hexInput.value, alphaInput.value));
  }
  getSmFeatureAdditionalOptions(Feature, ID) {
    let items = [];
    if (ID.startsWith('gc_')) {
      if (Feature.isCategory) {
        items.push(this.addGcCategoryPanel(ID, Feature));
      }
      if (ID === 'gc_r') {
        items.push(this.addGcRatingPanel());
      } else if (ID === 'gc_o_a') {
        items.push(this.addGcAltMenuPanel());
      }
    }
    if (ID === 'ul') {
      items.push(this.addUlMenuPanel('ul_links'));
    } else if (ID === 'cgb') {
      items.push(this.addGwcrMenuPanel('cgb_levelColors', 'level', false, '10'));
    } else if (ID === 'gch') {
      items.push(this.addGwcrMenuPanel('gch_colors', 'copies', true));
    } else if (ID === 'glh') {
      items.push(this.addGwcrMenuPanel('glh_colors', 'level', true, '10'));
    } else if (ID === 'gwc') {
      items.push(this.addGwcrMenuPanel('gwc_colors', 'chance'));
    } else if (ID === 'gwr') {
      items.push(this.addGwcrMenuPanel('gwr_colors', 'ratio'));
    } else if (ID === 'gptw') {
      items.push(this.addGwcrMenuPanel('gptw_colors', 'points to win'));
    } else if (ID === 'geth') {
      items.push(this.addGwcrMenuPanel('geth_colors', 'hours'));
    } else if (Feature.colors || Feature.background) {
      if (typeof Feature.background === 'boolean') {
        Feature.colors = {
          bgColor: 'Background'
        };
      } else if (typeof Feature.colors === 'boolean') {
        Feature.colors = {
          color: 'Text',
          bgColor: 'Background'
        };
      }
      const children = [];
      for (const id in Feature.colors) {
        const color = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__["Utils"].rgba2Hex(_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`${ID}_${id}`));
        children.push(_class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("strong", null, `${Feature.colors[id]}:`)), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
          "data-color-id": id,
          type: "color",
          value: color.hex
        }), "Opacity:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
          max: "1.0",
          min: "0.0",
          step: "0.1",
          type: "number",
          value: color.alpha
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
          className: "form__saving-button"
        }, "Reset"))));
      }
      const context = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
        className: "esgst-sm-additional-option"
      }, children);
      const elements = context.querySelectorAll(`[data-color-id]`);
      for (const hexInput of elements) {
        const colorId = hexInput.getAttribute('data-color-id');
        const alphaInput = hexInput.nextElementSibling;
        this.addColorObserver(hexInput, alphaInput, ID, colorId);
        alphaInput.nextElementSibling.addEventListener('click', this.resetColor.bind(this, hexInput, alphaInput, ID, colorId));
      }
      items.push(context);
      if (ID === 'gc_g') {
        let input;
        const inputContainer = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
          className: "esgst-sm-additional-option"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, "Only show the following genres:"), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
          type: "text",
          value: _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_g_filters'),
          ref: ref => input = ref
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
          className: "fa fa-question-circle",
          title: "If you enter genres here, a genre category will only appear if the game has the listed genre. Separate genres with a comma, for example: Genre1, Genre2"
        })));
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.observeChange(input, 'gc_g_filters', this.toSave);
        items.push(inputContainer);
        items.push(this.addGcMenuPanel());
      }
    } else if (Feature.inputItems) {
      let containerr = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
        className: "esgst-sm-additional-option"
      });
      if (ID.match(/^(chfl|sk_)/)) {
        Feature.inputItems = [{
          event: 'keydown',
          id: Feature.inputItems,
          shortcutKey: true,
          prefix: `Enter the key combo you want to use for this task: `
        }];
      } else if (ID.match(/^hr_.+_s$/)) {
        Feature.inputItems = [{
          id: `${ID}_sound`,
          play: true
        }];
      }
      Feature.inputItems.forEach(item => {
        const children = [];
        const attributes = item.attributes || {};
        if (item.play) {
          attributes.style = `width: 200px`;
          attributes.type = 'file';
          children.push({
            attributes,
            type: 'input'
          }, {
            attributes: {
              class: 'fa fa-play-circle esgst-clickable'
            },
            type: 'i'
          });
        } else {
          attributes.class = 'esgst-switch-input esgst-switch-input-large';
          attributes.type = attributes.type || 'text';
          attributes.value = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(item.id);
          children.push({
            text: item.prefix || '',
            type: 'node'
          }, {
            attributes,
            type: 'input'
          }, {
            text: item.suffix || '',
            type: 'node'
          });
          if (item.tooltip) {
            children.push({
              attributes: {
                class: 'fa fa-question-circle',
                title: item.tooltip
              },
              type: 'i'
            });
          }
        }
        let input,
          value = '',
          context = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(containerr, 'beforeend', [{
            type: 'div',
            children
          }]);
        input = context.firstElementChild;
        if (item.play) {
          input.nextElementSibling.addEventListener('click', async () => (await _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.generalHeaderRefresher.createPlayer(_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(item.id) || _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.generalHeaderRefresher.getDefaultSound())).play());
        }
        if (typeof _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(item.id) === 'undefined' && _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('dismissedOptions').indexOf(item.id) < 0) {
          Feature.isNew = true;
          _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(context, 'afterbegin', [{
            attributes: {
              class: 'esgst-bold esgst-red esgst-clickable esgst-new-indicator',
              title: 'This is a new feature/option. Click to dismiss.'
            },
            text: `[NEW]`,
            type: 'span'
          }]).addEventListener('click', event => this.dismissNewOption(item.id, event));
        }
        input.addEventListener(item.event || 'change', event => {
          if (item.shortcutKey) {
            event.preventDefault();
            event.stopPropagation();
            if (!event.repeat) {
              value = '';
              if (event.ctrlKey) {
                value += 'ctrlKey + ';
              } else if (event.shiftKey) {
                value += 'shiftKey + ';
              } else if (event.altKey) {
                value += 'altKey + ';
              }
              value += event.key.toLowerCase();
            }
          } else if (item.play) {
            this.readHrAudioFile(ID, event);
          } else if (item.event === 'keydown') {
            event.preventDefault();
            // noinspection JSIgnoredPromiseFromCall
            this.preSave(item.id, event.key);
            input.value = event.key;
          } else {
            // noinspection JSIgnoredPromiseFromCall
            this.preSave(item.id, input.value);
          }
        }, item.shortcutKey || false);
        if (item.shortcutKey) {
          input.addEventListener('keyup', () => {
            // noinspection JSIgnoredPromiseFromCall
            this.preSave(item.id, value);
            input.value = value;
          });
        }
      });
      items.push(containerr);
    }
    if (Feature.options) {
      const [key, options] = Array.isArray(Feature.options) ? ['_index_*', Feature.options] : ['_index', [Feature.options]];
      for (const [index, option] of options.entries()) {
        const currentKey = key.replace(/\*/, index);
        const selectedIndex = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`${ID}${currentKey}`);
        const children = [];
        for (const value of option.values) {
          children.push(value.match(/~/) ? _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("option", {
            disabled: true
          }, value.replace(/~/, '')) : _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("option", null, value));
        }
        let select;
        const selectContainer = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
          className: "esgst-sm-additional-option"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, option.title, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("select", {
          ref: ref => select = ref
        }, children)));
        select.selectedIndex = selectedIndex;
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.observeNumChange(select, `${ID}${currentKey}`, this.toSave, 'selectedIndex');
        items.push(selectContainer);
      }
    }
    return items;
  }
  readHrAudioFile(id, event) {
    let popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
      addScrollable: true,
      icon: 'fa-circle-o-notch fa-spin',
      title: 'Uploading...'
    });
    popup.open();
    try {
      let reader = new FileReader();
      reader.onload = () => this.saveHrFile(id, popup, reader);
      reader.readAsArrayBuffer(event.currentTarget.files[0]);
    } catch (e) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].warning(e.message, e.stack);
      popup.icon.classList.remove('fa-circle-o-notch');
      popup.icon.classList.remove('fa-spin');
      popup.icon.classList.add('fa-times');
      popup.title.textContent = 'An error happened.';
    }
  }
  async saveHrFile(id, popup, reader) {
    try {
      let bytes = new Uint8Array(reader.result);
      let binary = '';
      for (let i = 0, n = reader.result.byteLength; i < n; i++) {
        binary += String.fromCharCode(bytes[i]);
      }
      let string = window.btoa(binary);
      (await _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.generalHeaderRefresher.createPlayer(string)).play();
      // noinspection JSIgnoredPromiseFromCall
      this.preSave(`${id}_sound`, string);
      popup.close();
    } catch (e) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].warning(e.message, e.stack);
      popup.icon.classList.remove('fa-circle-o-notch');
      popup.icon.classList.remove('fa-spin');
      popup.icon.classList.add('fa-times');
      popup.title.textContent = 'An error happened.';
    }
  }
  addGwcrMenuPanel(id, key, background, upper = '100') {
    let button;
    const panel = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-sm-additional-option"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "form__saving-button",
      ref: ref => button = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("span", null, "Add Color Setting")), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
      className: "fa fa-question-circle",
      title: `Allows you to set different colors for different ${key} ranges.`
    })));
    for (let i = 0, n = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id).length; i < n; ++i) {
      this.addGwcColorSetting(_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id)[i], id, key, panel, background);
    }
    button.addEventListener('click', () => {
      const colors = {
        color: '#ffffff',
        lower: '0',
        upper: upper
      };
      if (background) {
        colors.bgColor = '';
      }
      const setting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id);
      setting.push(colors);
      this.preSave(id, setting);
      this.addGwcColorSetting(colors, id, key, panel, background);
    });
    return panel;
  }
  addGwcColorSetting(colors, id, key, panel, background) {
    let bgColor, color, i, lower, n, remove, setting, upper;
    setting = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(panel, 'beforeend', [{
      type: 'div',
      children: [{
        text: `From: `,
        type: 'node'
      }, {
        attributes: {
          step: '0.01',
          type: 'number',
          value: colors.lower
        },
        type: 'input'
      }, {
        text: ' to ',
        type: 'node'
      }, {
        attributes: {
          step: '0.01',
          type: 'number',
          value: colors.upper
        },
        type: 'input'
      }, {
        text: ` ${key}, color it as `,
        type: 'node'
      }, {
        attributes: {
          type: 'color',
          value: colors.color
        },
        type: 'input'
      }, ...(background ? [{
        text: ' with the background ',
        type: 'node'
      }, {
        attributes: {
          type: 'color',
          value: colors.bgColor
        },
        type: 'input'
      }] : []), {
        attributes: {
          class: 'esgst-clickable fa fa-times',
          title: 'Delete this setting'
        },
        type: 'i'
      }]
    }]);
    lower = setting.firstElementChild;
    upper = lower.nextElementSibling;
    color = upper.nextElementSibling;
    if (background) {
      bgColor = color.nextElementSibling;
      remove = bgColor.nextElementSibling;
    } else {
      remove = color.nextElementSibling;
    }
    lower.addEventListener('change', () => {
      colors.lower = lower.value;
      this.preSave(id, _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id));
    });
    upper.addEventListener('change', () => {
      colors.upper = upper.value;
      this.preSave(id, _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id));
    });
    color.addEventListener('change', () => {
      colors.color = color.value;
      this.preSave(id, _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id));
    });
    if (bgColor) {
      bgColor.addEventListener('change', () => {
        colors.bgColor = bgColor.value;
        this.preSave(id, _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id));
      });
    }
    remove.addEventListener('click', () => {
      if (window.confirm('Are you sure you want to delete this setting?')) {
        const gwcsetting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id);
        for (i = 0, n = gwcsetting.length; i < n && gwcsetting[i] !== colors; ++i) {}
        if (i < n) {
          gwcsetting.splice(i, 1);
          this.preSave(id, gwcsetting);
          setting.remove();
        }
      }
    });
  }
  addUlMenuPanel(id) {
    let draggableArea;
    const panel = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-sm-additional-option",
      ref: ref => draggableArea = ref
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-sm-additional-option"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "form__saving-button",
      onclick: () => this.addUlMenuItem(id, draggableArea)
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("span", null, "Add Link")), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "form__saving-button",
      onclick: () => {
        this.preSave(id, _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].defaultValues[id]);
        draggableArea.innerHTML = '';
        this.addUlMenuItems(id, draggableArea);
      }
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("span", null, "Reset")), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "form__saving-button",
      title: "This will merge your list with the default list, meaning that any new items in the default list will be added to your list. Also, if you previously deleted an item from the default list, it will come back.",
      onclick: () => this.mergeValues(id, draggableArea, this.addUlMenuItems.bind(this))
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("span", null, "Merge"))), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "form__input-description"
    }, "The default links should give you an idea of how the format works.", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), "As label, you can use FontAwesome icons (for example, \"fa-icon\"), image URLs (for example, \"https://www.example.com/image.jpg\") and plain text (for example, \"Text\"). You can also combine them (for example, \"fa-icon https://www.example.com/image.jpg Text\"). Images will be resized to 16x16.", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("br", null), "In the URL, you can use the templates %username% and %steamid%, they will be replaced with the user's username/Steam id.`"))));
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.draggable_set({
      addTrash: true,
      context: draggableArea,
      id: 'ul_links',
      item: {},
      onDragEnd: obj => {
        for (const key in obj) {
          this.preSave(key, obj[key]);
        }
      }
    });
    this.addUlMenuItems(id, draggableArea);
    return panel;
  }
  mergeValues(id, draggableArea, callback) {
    const setting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id);
    for (const item of _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].defaultValues[id]) {
      const itemString = JSON.stringify(item);
      if (!setting.filter(x => JSON.stringify(x) === itemString)[0]) {
        setting.push(item);
      }
    }
    this.preSave(id, setting);
    draggableArea.innerHTML = '';
    if (callback) {
      callback(id, draggableArea);
    }
  }
  addUlMenuItems(id, draggableArea) {
    for (const [i, link] of _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id).entries()) {
      this.addUlLink(i, id, link, draggableArea);
    }
  }
  addUlMenuItem(id, draggableArea) {
    const link = {
      label: '',
      url: ''
    };
    const setting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id);
    setting.push(link);
    this.preSave(id, setting);
    this.addUlLink(setting.length - 1, id, link, draggableArea);
  }
  addUlLink(i, id, link, draggableArea) {
    let setting;
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(draggableArea, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      "data-draggable-id": i,
      "data-draggable-obj": JSON.stringify(link),
      ref: ref => setting = ref
    }, "Label:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      onchange: event => {
        link.label = event.currentTarget.value;
        this.preSave(id, _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id));
        setting.setAttribute('data-draggable-obj', JSON.stringify(link));
      },
      type: "text",
      value: link.label
    }), "URL:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      onchange: event => {
        link.url = event.currentTarget.value;
        this.preSave(id, _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(id));
        setting.setAttribute('data-draggable-obj', JSON.stringify(link));
      },
      type: "text",
      value: link.url
    })));
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.draggable_set({
      addTrash: true,
      context: draggableArea,
      id: 'ul_links',
      item: {},
      onDragEnd: obj => {
        for (const key in obj) {
          this.preSave(key, obj[key]);
        }
      }
    });
  }
  addGcCategoryPanel(id, feature) {
    let showField;
    let labelField;
    let labelInfoNode;
    let iconField;
    let iconInfoNode;
    let urlField;
    let urlInfoNode;
    const panel = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-sm-additional-option"
    }, feature.allowCustomDisplay ? _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("strong", null, "Show:"), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("select", {
      onchange: event => {
        switch (event.currentTarget.value) {
          case 'label':
            this.preSave(`${id}_s`, false);
            this.preSave(`${id}_s_i`, false);
            labelField.classList.remove('esgst-hidden');
            if (id === 'gc_rd') {
              labelInfoNode.classList.remove('esgst-hidden');
            }
            iconField.classList.add('esgst-hidden');
            iconInfoNode.classList.add('esgst-hidden');
            break;
          case 'initials':
            this.preSave(`${id}_s`, true);
            this.preSave(`${id}_s_i`, false);
            labelField.classList.add('esgst-hidden');
            labelInfoNode.classList.add('esgst-hidden');
            iconField.classList.add('esgst-hidden');
            iconInfoNode.classList.add('esgst-hidden');
            break;
          case 'icon':
            this.preSave(`${id}_s`, true);
            this.preSave(`${id}_s_i`, true);
            labelField.classList.add('esgst-hidden');
            labelInfoNode.classList.add('esgst-hidden');
            iconField.classList.remove('esgst-hidden');
            iconInfoNode.classList.remove('esgst-hidden');
            break;
        }
      },
      ref: ref => showField = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("option", {
      value: "label"
    }, "Label"), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("option", {
      value: "initials"
    }, "Initials"), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("option", {
      value: "icon"
    }, "Icon")), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      className: "esgst-hidden",
      type: "text",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`${id}Label`),
      ref: ref => labelField = ref
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
      className: "esgst-clickable esgst-hidden fa fa-question-circle",
      ref: ref => labelInfoNode = ref
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      className: "esgst-hidden",
      type: "text",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`${id}Icon`),
      ref: ref => iconField = ref
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
      className: "esgst-clickable esgst-hidden fa fa-question-circle",
      ref: ref => iconInfoNode = ref
    })) : null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("strong", null, "URL:"), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "text",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`${id}Url`),
      ref: ref => urlField = ref
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
      className: "esgst-clickable fa fa-question-circle",
      ref: ref => urlInfoNode = ref
    })));
    if (feature.allowCustomDisplay) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createTooltip(labelInfoNode, `Enter the date format here, using the following keywords:
			<br/>
			<br/>
			DD - Day<br/>
			MM - Month in numbers (i.e. 1)<br/>
			Mon - Month in short name (i.e. Jan)<br/>
			Month - Month in full name (i.e. January)<br/>
			YYYY - Year`);
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createTooltip(iconInfoNode, 'The name of the icon must be any name in this page: <a href="https://fontawesome.com/v4.7.0/icons/">https://fontawesome.com/v4.7.0/icons/</a>');
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createTooltip(urlInfoNode, `You can use the following placeholders here:
			<br/>
			<span class="esgst-bold">%steam-id%</span> - Your Steam ID.<br/>
			<span class="esgst-bold">%username%</span> - Your username.<br/>
			<span class="esgst-bold">%game-type%</span> - The type of the game e.g. "app" or "sub".<br/>
			<span class="esgst-bold">%game-id%</span> - The Steam ID of the game.<br/>
			<span class="esgst-bold">%game-name%</span> - The name of the game.<br/>
			<span class="esgst-bold">%game-search-name%</span> - The name of the game as a URI encoded string, useful for search URLs.<br/>
			<span class="esgst-bold">%hltb-id%</span> - The HLTB ID of the game.<br/>`);
    if (feature.allowCustomDisplay) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`${id}_s`)) {
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`${id}_s_i`)) {
          showField.selectedIndex = 2;
          iconField.classList.remove('esgst-hidden');
          iconInfoNode.classList.remove('esgst-hidden');
        } else {
          showField.selectedIndex = 1;
        }
      } else {
        showField.selectedIndex = 0;
        labelField.classList.remove('esgst-hidden');
        if (id === 'gc_rd') {
          labelInfoNode.classList.remove('esgst-hidden');
        }
      }
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.observeChange(labelField, `${id}Label`, this.toSave);
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.observeChange(iconField, `${id}Icon`, this.toSave);
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.observeChange(urlField, `${id}Url`, this.toSave);
    return panel;
  }
  addGcRatingPanel() {
    let button;
    const panel = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-sm-additional-option"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "form__saving-button",
      ref: ref => button = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("span", null, "Add Rating Setting")), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
      className: "fa fa-question-circle",
      title: "Allows you to set different colors/icons for different rating ranges."
    })));
    for (let i = 0, n = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_r_colors').length; i < n; ++i) {
      this.addGcRatingColorSetting(_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_r_colors')[i], panel);
    }
    button.addEventListener('click', () => {
      let colors = {
        color: '',
        bgColor: '',
        icon: '',
        lower: '',
        upper: ''
      };
      const setting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_r_colors');
      setting.push(colors);
      this.preSave('gc_r_colors', setting);
      this.addGcRatingColorSetting(colors, panel);
    });
    return panel;
  }
  addGcRatingColorSetting(colors, panel) {
    let setting, lower, upper, color, bgColor, icon, tooltip, remove;
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(panel, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-sm-additional-option",
      ref: ref => setting = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, "Rating Range:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "number",
      value: colors.lower,
      ref: ref => lower = ref
    }), "% -", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "number",
      value: colors.upper,
      ref: ref => upper = ref
    }), "%"), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, "Color:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "color",
      value: colors.color,
      ref: ref => color = ref
    }), "Background Color:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "color",
      value: colors.bgColor,
      ref: ref => bgColor = ref
    }), "Icon:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "text",
      value: colors.icon,
      ref: ref => icon = ref
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
      className: "fa fa-question-circle",
      ref: ref => tooltip = ref
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "form__saving-button",
      ref: ref => remove = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("span", null, "Delete")))));
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createTooltip(tooltip, `The name of the icon can be any name from <a href="https://fontawesome.com/v4.7.0/icons/">FontAwesome</a> or any text. For example, if you want to use alt symbols like ▲ (Alt + 3 + 0) and ▼ (Alt + 3 + 1), you can.`);
    lower.addEventListener('change', () => {
      colors.lower = lower.value;
      this.preSave('gc_r_colors', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_r_colors'));
    });
    upper.addEventListener('change', () => {
      colors.upper = upper.value;
      this.preSave('gc_r_colors', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_r_colors'));
    });
    color.addEventListener('change', () => {
      colors.color = color.value;
      this.preSave('gc_r_colors', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_r_colors'));
    });
    bgColor.addEventListener('change', () => {
      colors.bgColor = bgColor.value;
      this.preSave('gc_r_colors', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_r_colors'));
    });
    icon.addEventListener('change', () => {
      colors.icon = icon.value;
      this.preSave('gc_r_colors', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_r_colors'));
    });
    remove.addEventListener('click', () => {
      if (window.confirm('Are you sure you want to delete this setting?')) {
        let i, n;
        const colorSetting = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_r_colors');
        for (i = 0, n = colorSetting.length; i < n && colorSetting[i] !== colors; ++i) {}
        if (i < n) {
          colorSetting.splice(i, 1);
          this.preSave('gc_r_colors', colorSetting);
          setting.remove();
        }
      }
    });
  }
  addGcMenuPanel() {
    let button, colorSetting, i, n;
    const panel = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-sm-additional-option"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "form__saving-button",
      ref: ref => button = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("span", null, "Add Custom Genre Setting")), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("i", {
      className: "fa fa-question-circle",
      title: "Allows you to color genres (colored genres will appear at the beginning of the list)."
    })));
    for (i = 0, n = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_g_colors').length; i < n; ++i) {
      this.addGcColorSetting(_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_g_colors')[i], panel);
    }
    button.addEventListener('click', () => {
      colorSetting = {
        bgColor: '#7f8c8d',
        color: '#ffffff',
        genre: ''
      };
      const gcgcolors = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_g_colors');
      gcgcolors.push(colorSetting);
      this.preSave('gc_g_colors', gcgcolors);
      this.addGcColorSetting(colorSetting, panel);
    });
    return panel;
  }
  addGcColorSetting(colorSetting, panel) {
    let bgColor, color, genre, i, n, remove, setting;
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(panel, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-sm-additional-option",
      ref: ref => setting = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, "Genre:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "text",
      value: colorSetting.genre,
      ref: ref => genre = ref
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, "Color:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "color",
      value: colorSetting.color,
      ref: ref => color = ref
    }), "Background Color:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "color",
      value: colorSetting.bgColor,
      ref: ref => bgColor = ref
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "form__saving-button",
      ref: ref => remove = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("span", null, "Delete")))));
    genre.addEventListener('change', () => {
      colorSetting.genre = genre.value;
      this.preSave('gc_g_colors', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_g_colors'));
    });
    color.addEventListener('change', () => {
      colorSetting.color = color.value;
      this.preSave('gc_g_colors', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_g_colors'));
    });
    bgColor.addEventListener('change', () => {
      colorSetting.bgColor = bgColor.value;
      this.preSave('gc_g_colors', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_g_colors'));
    });
    remove.addEventListener('click', () => {
      if (window.confirm('Are you sure you want to delete this setting?')) {
        const gcgcolors = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_g_colors');
        for (i = 0, n = gcgcolors.length; i < n && gcgcolors[i] !== colorSetting; ++i) {}
        if (i < n) {
          gcgcolors.splice(i, 1);
          _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].set('gc_g_colors', gcgcolors);
          this.preSave('gc_g_colors', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_g_colors'));
          setting.remove();
        }
      }
    });
  }
  addGcAltMenuPanel() {
    let altSetting, button, i, n;
    const panel = _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-sm-additional-option"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "form__saving-button",
      ref: ref => button = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("span", null, "Add Alt Account"))));
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createTooltip(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(panel.firstElementChild, 'beforeend', [{
      attributes: {
        class: 'fa fa-question-circle'
      },
      type: 'i'
    }]), `
		<div>You must sync your owned games normally for the script to pick up the games owned by your alt accounts. Syncing with alt accounts only works with a Steam API Key though, so make sure one is set at the last section of this menu.</div>
		<br/>
		<div>Steam ID is the number that comes after "steamcommunity.com/profiles/" in your alt account's URL. If your alt account has a URL in the format "steamcommunity.com/id/" though, you can get your Steam ID <a href="https://steamid.io/">here</a> by entering your URL in the input (you want the steamID64 one).</div>
		<br/>
		<div>You must fill the fields relative to your settings. For example, if you have simplified version enabled with icons, you must fill the "icon" field. If you don't have simplified version enabled, you must fill the "label" field. The current text in the fields are simply placeholders.</div>
	`);
    for (i = 0, n = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_o_altAccounts').length; i < n; ++i) {
      this.addGcAltSetting(_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_o_altAccounts')[i], panel);
    }
    button.addEventListener('click', () => {
      altSetting = {
        bgColor: '#000000',
        color: '#ffffff',
        games: {
          apps: {},
          subs: {}
        },
        icon: '',
        label: '',
        name: '',
        steamId: ''
      };
      const gcoalt = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_o_altAccounts');
      gcoalt.push(altSetting);
      this.preSave('gc_o_altAccounts', gcoalt);
      this.addGcAltSetting(altSetting, panel);
    });
    return panel;
  }
  addGcAltSetting(altSetting, panel) {
    let color, bgColor, i, icon, label, n, name, remove, setting, steamId;
    _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].insert(panel, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "esgst-sm-additional-option",
      ref: ref => setting = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, "Steam ID:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "text",
      placeholder: "0000000000000000",
      value: altSetting.steamId,
      ref: ref => steamId = ref
    }), "Nickname:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "text",
      placeholder: "alt1",
      value: altSetting.name,
      ref: ref => name = ref
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, "Color:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "color",
      value: altSetting.color,
      ref: ref => color = ref
    }), "Background Color:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "color",
      value: altSetting.bgColor,
      ref: ref => bgColor = ref
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, "Icon:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "text",
      placeholder: "folder",
      value: altSetting.icon,
      ref: ref => icon = ref
    }), "Label:", _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("input", {
      type: "text",
      placeholder: "Owned by alt1",
      value: altSetting.label,
      ref: ref => label = ref
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("div", {
      className: "form__saving-button",
      ref: ref => remove = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_10__["DOM"].element("span", null, "Delete")))));
    steamId.addEventListener('change', () => {
      altSetting.steamId = steamId.value;
      this.preSave('gc_o_altAccounts', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_o_altAccounts'));
    });
    name.addEventListener('change', () => {
      altSetting.name = name.value;
      this.preSave('gc_o_altAccounts', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_o_altAccounts'));
    });
    color.addEventListener('change', () => {
      altSetting.color = color.value;
      this.preSave('gc_o_altAccounts', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_o_altAccounts'));
    });
    bgColor.addEventListener('change', () => {
      altSetting.bgColor = bgColor.value;
      this.preSave('gc_o_altAccounts', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_o_altAccounts'));
    });
    icon.addEventListener('change', () => {
      altSetting.icon = icon.value;
      this.preSave('gc_o_altAccounts', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_o_altAccounts'));
    });
    label.addEventListener('change', () => {
      altSetting.label = label.value;
      this.preSave('gc_o_altAccounts', _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_o_altAccounts'));
    });
    remove.addEventListener('click', () => {
      if (window.confirm('Are you sure you want to delete this setting?')) {
        const gcoalt = _class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('gc_o_altAccounts');
        for (i = 0, n = gcoalt.length; i < n && gcoalt[i] !== altSetting; ++i) {}
        if (i < n) {
          gcoalt.splice(i, 1);
          this.preSave('gc_o_altAccounts', gcoalt);
          setting.remove();
        }
      }
    });
  }
  addColorObserver(hexInput, alphaInput, id, colorId) {
    hexInput.addEventListener('change', () => {
      // noinspection JSIgnoredPromiseFromCall
      this.preSave(`${id}_${colorId}`, _lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__["Utils"].hex2Rgba(hexInput.value, alphaInput.value));
    });
    alphaInput.addEventListener('change', () => {
      // noinspection JSIgnoredPromiseFromCall
      this.preSave(`${id}_${colorId}`, _lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__["Utils"].hex2Rgba(hexInput.value, alphaInput.value));
    });
  }
  createMenuSection(context, html, number, title, type) {
    let section = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(context, 'beforeend', [{
      attributes: {
        class: 'esgst-form-row',
        id: `esgst_${type}`,
        'data-id': type,
        'data-number': number
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'esgst-form-heading'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'esgst-form-heading-number'
          },
          text: `${number}.`,
          type: 'div'
        }, {
          attributes: {
            class: 'icon_to_clipboard fa fa-fw fa-copy',
            'data-clipboard-text': `https://www.steamgifts.com/account/settings/profile?esgst=settings&id=${type}`
          },
          type: 'i'
        }, {
          attributes: {
            class: 'esgst-form-heading-text'
          },
          type: 'div',
          children: [{
            text: title,
            type: 'span'
          }]
        }]
      }, {
        attributes: {
          class: 'esgst-form-row-indent'
        },
        type: 'div',
        children: html
      }]
    }]);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get('makeSectionsCollapsible') && !title.match(/Backup|Restore|Delete/)) {
      let button, containerr, isExpanded;
      button = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(section.firstElementChild, 'afterbegin', [{
        attributes: {
          class: 'esgst-clickable',
          style: `margin-right: 5px;`
        },
        type: 'span',
        children: [{
          attributes: {
            class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`collapse_${type}`) ? 'plus' : 'minus'}-square`,
            title: `${_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`collapse_${type}`) ? 'Expand' : 'Collapse'} section`
          },
          type: 'i'
        }]
      }]);
      containerr = section.lastElementChild;
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_14__["Settings"].get(`collapse_${type}`)) {
        containerr.classList.add('esgst-hidden');
        isExpanded = false;
      } else {
        isExpanded = true;
      }
      this.collapseButtons.push({
        collapseButton: button,
        id: type,
        subMenu: containerr
      });
      button.addEventListener('click', () => isExpanded = this.collapseOrExpandSection(button, type, containerr, isExpanded));
    }
    return section;
  }
  collapseOrExpandSection(collapseButton, id, subMenu, isExpanded) {
    if (isExpanded) {
      this.collapseSection(collapseButton, id, subMenu);
    } else {
      this.expandSection(collapseButton, id, subMenu);
    }
    return !isExpanded;
  }
  collapseSection(collapseButton, id, subMenu) {
    subMenu.classList.add('esgst-hidden');
    if (!collapseButton) {
      return;
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(collapseButton, 'atinner', [{
      attributes: {
        class: 'fa fa-plus-square',
        title: 'Expand section'
      },
      type: 'i'
    }]);
    this.preSave(`collapse_${id}`, true);
  }
  expandSection(collapseButton, id, subMenu) {
    subMenu.classList.remove('esgst-hidden');
    if (!collapseButton) {
      return;
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.createElements(collapseButton, 'atinner', [{
      attributes: {
        class: 'fa fa-minus-square',
        title: 'Collapse section'
      },
      type: 'i'
    }]);
    this.preSave(`collapse_${id}`, null);
  }
  filterSm(event) {
    let collapse, element, expand, found, id, type, typeFound, value;
    value = event.currentTarget.value.toLowerCase().trim().replace(/[.*+?^${}()|[\]\\]/g, `\\$&`);
    for (type in _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features) {
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features.hasOwnProperty(type)) {
        found = false;
        typeFound = false;
        for (id in _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features[type].features) {
          if (_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features[type].features.hasOwnProperty(id)) {
            this.unfadeSmFeatures(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features[type].features[id], id);
            found = this.filterSmFeature(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features[type].features[id], id, value);
            if (found) {
              typeFound = true;
              this.unhideSmFeature(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.features[type].features[id], id);
            }
          }
        }
        element = document.getElementById(`esgst_${type}`);
        if (element) {
          if (typeFound) {
            element.classList.remove('esgst-hidden');
          } else {
            element.classList.add('esgst-hidden');
          }
          if (value) {
            expand = element.getElementsByClassName('fa-plus-square')[0];
            if (expand) {
              expand.click();
            }
          } else {
            collapse = element.getElementsByClassName('fa-minus-square')[0];
            if (collapse) {
              collapse.click();
            }
          }
        }
      }
    }
    for (type of ['element_ordering', 'steam_api_key']) {
      element = document.getElementById(`esgst_${type}`);
      if (element) {
        if (element.textContent.toLowerCase().trim().match(value)) {
          element.classList.remove('esgst-hidden');
        } else {
          element.classList.add('esgst-hidden');
        }
        if (value) {
          expand = element.getElementsByClassName('fa-plus-square')[0];
          if (expand) {
            expand.click();
          }
        } else {
          collapse = element.getElementsByClassName('fa-minus-square')[0];
          if (collapse) {
            collapse.click();
          }
        }
      }
    }
  }
  unfadeSmFeatures(feature, id) {
    let element = document.getElementById(`esgst_${id}`);
    if (element) {
      element.classList.remove('esgst-sm-faded');
    }
    if (feature.features) {
      for (id in feature.features) {
        if (feature.features.hasOwnProperty(id)) {
          this.unfadeSmFeatures(feature.features[id], id);
        }
      }
    }
  }
  filterSmFeature(feature, id, value) {
    let found = !value || feature.name.toLowerCase().match(value) || value === `\\[new\\]` && feature.isNew;
    let exactFound = found;
    if (!value || !found) {
      if (!found) {
        exactFound = found = (feature.description ? feature.description().textContent : '').toLowerCase().match(value);
      }
      if ((!value || !found) && feature.features) {
        for (const subId in feature.features) {
          if (feature.features.hasOwnProperty(subId)) {
            found = this.filterSmFeature(feature.features[subId], subId, value) || found;
          }
        }
      }
    }
    let element = document.getElementById(`esgst_${id}`);
    if (element) {
      if (found) {
        element.classList.remove('esgst-hidden');
      } else {
        element.classList.add('esgst-hidden');
      }
      if (exactFound) {
        element.classList.remove('esgst-sm-faded');
      } else {
        element.classList.add('esgst-sm-faded');
      }
    }
    return found;
  }
  unhideSmFeature(feature, id) {
    let element = document.getElementById(`esgst_${id}`);
    if (element) {
      element.classList.remove('esgst-hidden');
    }
    if (feature.features) {
      for (id in feature.features) {
        if (feature.features.hasOwnProperty(id)) {
          this.unhideSmFeature(feature.features[id], id);
        }
      }
    }
  }
  enableDependencies(ids, namespace) {
    for (const id of ids) {
      const feature = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.featuresById[id];
      if (feature && feature[`${namespace}Switch`]) {
        feature[`${namespace}Switch`].enable();
      }
    }
  }
  addCombos() {
    const combos = [{
      title: 'Keep the important stuff at your reach while scrolling',
      description: 'This combo fixes the header, main page heading and sidebar while you scroll through the page.',
      image: '',
      settings: ['fh', 'fpmh', 'fs']
    }];
  }
  replaceFeatureNamePlaceholders(referenceEl) {
    const featureNamePlaceholders = referenceEl.querySelectorAll('[data-esgst-feature-id]');
    for (const featureNamePlaceholder of featureNamePlaceholders) {
      featureNamePlaceholder.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeatureName(null, featureNamePlaceholder.dataset.esgstFeatureId);
    }
  }
}
const settingsModule = new SettingsModule();


/***/ }),
/* 235 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__(14);
var uncurryThis = __webpack_require__(126);
var fails = __webpack_require__(8);
var aCallable = __webpack_require__(44);
var internalSort = __webpack_require__(165);
var ArrayBufferViewCore = __webpack_require__(236);
var FF = __webpack_require__(238);
var IE_OR_EDGE = __webpack_require__(239);
var V8 = __webpack_require__(24);
var WEBKIT = __webpack_require__(240);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var Uint16Array = globalThis.Uint16Array;
var nativeSort = Uint16Array && uncurryThis(Uint16Array.prototype.sort);

// WebKit
var ACCEPT_INCORRECT_ARGUMENTS = !!nativeSort && !(fails(function () {
  nativeSort(new Uint16Array(2), null);
}) && fails(function () {
  nativeSort(new Uint16Array(2), {});
}));

var STABLE_SORT = !!nativeSort && !fails(function () {
  // feature detection can be too slow, so check engines versions
  if (V8) return V8 < 74;
  if (FF) return FF < 67;
  if (IE_OR_EDGE) return true;
  if (WEBKIT) return WEBKIT < 602;

  var array = new Uint16Array(516);
  var expected = Array(516);
  var index, mod;

  for (index = 0; index < 516; index++) {
    mod = index % 4;
    array[index] = 515 - index;
    expected[index] = index - 2 * mod + 3;
  }

  nativeSort(array, function (a, b) {
    return (a / 4 | 0) - (b / 4 | 0);
  });

  for (index = 0; index < 516; index++) {
    if (array[index] !== expected[index]) return true;
  }
});

var getSortCompare = function (comparefn) {
  return function (x, y) {
    if (comparefn !== undefined) return +comparefn(x, y) || 0;
    // eslint-disable-next-line no-self-compare -- NaN check
    if (y !== y) return -1;
    // eslint-disable-next-line no-self-compare -- NaN check
    if (x !== x) return 1;
    if (x === 0 && y === 0) return 1 / x > 0 && 1 / y < 0 ? 1 : -1;
    return x > y;
  };
};

// `%TypedArray%.prototype.sort` method
// https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort
exportTypedArrayMethod('sort', function sort(comparefn) {
  if (comparefn !== undefined) aCallable(comparefn);
  if (STABLE_SORT) return nativeSort(this, comparefn);

  return internalSort(aTypedArray(this), getSortCompare(comparefn));
}, !STABLE_SORT || ACCEPT_INCORRECT_ARGUMENTS);


/***/ }),
/* 236 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_ARRAY_BUFFER = __webpack_require__(237);
var DESCRIPTORS = __webpack_require__(32);
var globalThis = __webpack_require__(14);
var isCallable = __webpack_require__(30);
var isObject = __webpack_require__(29);
var hasOwn = __webpack_require__(20);
var classof = __webpack_require__(102);
var tryToString = __webpack_require__(45);
var createNonEnumerableProperty = __webpack_require__(62);
var defineBuiltIn = __webpack_require__(68);
var defineBuiltInAccessor = __webpack_require__(110);
var isPrototypeOf = __webpack_require__(42);
var getPrototypeOf = __webpack_require__(79);
var setPrototypeOf = __webpack_require__(82);
var wellKnownSymbol = __webpack_require__(13);
var uid = __webpack_require__(22);
var InternalStateModule = __webpack_require__(60);

var enforceInternalState = InternalStateModule.enforce;
var getInternalState = InternalStateModule.get;
var Int8Array = globalThis.Int8Array;
var Int8ArrayPrototype = Int8Array && Int8Array.prototype;
var Uint8ClampedArray = globalThis.Uint8ClampedArray;
var Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;
var TypedArray = Int8Array && getPrototypeOf(Int8Array);
var TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);
var ObjectPrototype = Object.prototype;
var TypeError = globalThis.TypeError;

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');
var TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';
// Fixing native typed arrays in Opera Presto crashes the browser, see #595
var NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(globalThis.opera) !== 'Opera';
var TYPED_ARRAY_TAG_REQUIRED = false;
var NAME, Constructor, Prototype;

var TypedArrayConstructorsList = {
  Int8Array: 1,
  Uint8Array: 1,
  Uint8ClampedArray: 1,
  Int16Array: 2,
  Uint16Array: 2,
  Int32Array: 4,
  Uint32Array: 4,
  Float32Array: 4,
  Float64Array: 8
};

var BigIntArrayConstructorsList = {
  BigInt64Array: 8,
  BigUint64Array: 8
};

var isView = function isView(it) {
  if (!isObject(it)) return false;
  var klass = classof(it);
  return klass === 'DataView'
    || hasOwn(TypedArrayConstructorsList, klass)
    || hasOwn(BigIntArrayConstructorsList, klass);
};

var getTypedArrayConstructor = function (it) {
  var proto = getPrototypeOf(it);
  if (!isObject(proto)) return;
  var state = getInternalState(proto);
  return (state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR)) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);
};

var isTypedArray = function (it) {
  if (!isObject(it)) return false;
  var klass = classof(it);
  return hasOwn(TypedArrayConstructorsList, klass)
    || hasOwn(BigIntArrayConstructorsList, klass);
};

var aTypedArray = function (it) {
  if (isTypedArray(it)) return it;
  throw new TypeError('Target is not a typed array');
};

var aTypedArrayConstructor = function (C) {
  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;
  throw new TypeError(tryToString(C) + ' is not a typed array constructor');
};

var exportTypedArrayMethod = function (KEY, property, forced, options) {
  if (!DESCRIPTORS) return;
  if (forced) for (var ARRAY in TypedArrayConstructorsList) {
    var TypedArrayConstructor = globalThis[ARRAY];
    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {
      delete TypedArrayConstructor.prototype[KEY];
    } catch (error) {
      // old WebKit bug - some methods are non-configurable
      try {
        TypedArrayConstructor.prototype[KEY] = property;
      } catch (error2) { /* empty */ }
    }
  }
  if (!TypedArrayPrototype[KEY] || forced) {
    defineBuiltIn(TypedArrayPrototype, KEY, forced ? property
      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);
  }
};

var exportTypedArrayStaticMethod = function (KEY, property, forced) {
  var ARRAY, TypedArrayConstructor;
  if (!DESCRIPTORS) return;
  if (setPrototypeOf) {
    if (forced) for (ARRAY in TypedArrayConstructorsList) {
      TypedArrayConstructor = globalThis[ARRAY];
      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {
        delete TypedArrayConstructor[KEY];
      } catch (error) { /* empty */ }
    }
    if (!TypedArray[KEY] || forced) {
      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable
      try {
        return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);
      } catch (error) { /* empty */ }
    } else return;
  }
  for (ARRAY in TypedArrayConstructorsList) {
    TypedArrayConstructor = globalThis[ARRAY];
    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {
      defineBuiltIn(TypedArrayConstructor, KEY, property);
    }
  }
};

for (NAME in TypedArrayConstructorsList) {
  Constructor = globalThis[NAME];
  Prototype = Constructor && Constructor.prototype;
  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;
  else NATIVE_ARRAY_BUFFER_VIEWS = false;
}

for (NAME in BigIntArrayConstructorsList) {
  Constructor = globalThis[NAME];
  Prototype = Constructor && Constructor.prototype;
  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;
}

// WebKit bug - typed arrays constructors prototype is Object.prototype
if (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {
  // eslint-disable-next-line no-shadow -- safe
  TypedArray = function TypedArray() {
    throw new TypeError('Incorrect invocation');
  };
  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {
    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME], TypedArray);
  }
}

if (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {
  TypedArrayPrototype = TypedArray.prototype;
  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {
    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME].prototype, TypedArrayPrototype);
  }
}

// WebKit bug - one more object in Uint8ClampedArray prototype chain
if (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {
  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);
}

if (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {
  TYPED_ARRAY_TAG_REQUIRED = true;
  defineBuiltInAccessor(TypedArrayPrototype, TO_STRING_TAG, {
    configurable: true,
    get: function () {
      return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;
    }
  });
  for (NAME in TypedArrayConstructorsList) if (globalThis[NAME]) {
    createNonEnumerableProperty(globalThis[NAME], TYPED_ARRAY_TAG, NAME);
  }
}

module.exports = {
  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,
  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,
  aTypedArray: aTypedArray,
  aTypedArrayConstructor: aTypedArrayConstructor,
  exportTypedArrayMethod: exportTypedArrayMethod,
  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,
  getTypedArrayConstructor: getTypedArrayConstructor,
  isView: isView,
  isTypedArray: isTypedArray,
  TypedArray: TypedArray,
  TypedArrayPrototype: TypedArrayPrototype
};


/***/ }),
/* 237 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// eslint-disable-next-line es/no-typed-arrays -- safe
module.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';


/***/ }),
/* 238 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var userAgent = __webpack_require__(25);

var firefox = userAgent.match(/firefox\/(\d+)/i);

module.exports = !!firefox && +firefox[1];


/***/ }),
/* 239 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var UA = __webpack_require__(25);

module.exports = /MSIE|Trident/.test(UA);


/***/ }),
/* 240 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var userAgent = __webpack_require__(25);

var webkit = userAgent.match(/AppleWebKit\/(\d+)\./);

module.exports = !!webkit && +webkit[1];


/***/ }),
/* 241 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "runSilentSync", function() { return runSilentSync; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setSync", function() { return setSync; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SYNC_KEYS", function() { return SYNC_KEYS; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(225);
/* harmony import */ var core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_flat_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(230);
/* harmony import */ var core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_unscopables_flat_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var date_fns_formatDistanceStrict__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(242);
/* harmony import */ var _class_Checkbox__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(246);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(208);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(96);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(209);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(210);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(221);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(212);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(218);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(224);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(122);






















let toSave = {};
const SYNC_KEYS = {
  syncGroups: {
    dependencies: [],
    key: 'Groups',
    name: 'Groups'
  },
  syncWhitelist: {
    dependencies: [],
    key: 'Whitelist',
    name: 'Whitelist'
  },
  syncBlacklist: {
    dependencies: [],
    key: 'Blacklist',
    name: 'Blacklist'
  },
  syncSteamFriends: {
    dependencies: [],
    key: 'SteamFriends',
    name: `Steam Friends (requires Steam API key)`
  },
  syncHiddenGames: {
    dependencies: [],
    key: 'HiddenGames',
    name: 'Hidden Games'
  },
  syncGames: {
    dependencies: [],
    key: 'Games',
    name: 'Owned/Wishlisted/Ignored Games'
  },
  syncFollowedGames: {
    dependencies: [],
    key: 'FollowedGames',
    name: 'Followed Games'
  },
  syncWonGames: {
    dependencies: [],
    key: 'WonGames',
    name: 'Won Games'
  },
  syncReducedCvGames: {
    dependencies: [],
    key: 'ReducedCvGames',
    name: 'Reduced CV Games'
  },
  syncNoCvGames: {
    dependencies: [],
    key: 'NoCvGames',
    name: 'No CV Games'
  },
  syncHltbTimes: {
    dependencies: [],
    key: 'HltbTimes',
    name: 'HLTB Times'
  },
  syncDelistedGames: {
    dependencies: [],
    key: 'DelistedGames',
    name: 'Delisted Games'
  },
  syncGiveaways: {
    dependencies: [],
    key: 'Giveaways',
    name: 'Giveaways'
  },
  syncWonGiveaways: {
    dependencies: [],
    key: 'WonGiveaways',
    name: 'Won Giveaways'
  }
};
async function runSilentSync(parameters) {
  const button = _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].header.addButtonContainer({
    buttonIcon: 'fa fa-refresh fa-spin',
    buttonName: 'ESGST Sync',
    isActive: true,
    isNotification: true,
    side: 'right'
  });
  button.nodes.buttonIcon.title = 'ESGST is syncing your data... Please do not close this window.';
  _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.parameters = {
    ..._class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.parameters,
    ..._lib_jsUtils__WEBPACK_IMPORTED_MODULE_21__["Utils"].getQueryParams(`?autoSync=true&${parameters.replace(/&$/, '')}`)
  };
  const syncer = await setSync(false, true);
  button.nodes.outer.addEventListener('click', () => syncer.popup.open());
  _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.isSyncing = true;
  await sync(syncer);
  _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.isSyncing = false;
  button.nodes.outer.classList.remove('nav__button-container--active');
  button.nodes.outer.classList.add('nav__button-container--inactive');
  button.nodes.buttonIcon.className = 'fa fa-check';
  button.nodes.buttonIcon.title = 'ESGST has finished syncing, click here to see the results.';
}
function getDependencies(syncer, feature, id) {
  if (feature.syncKeys) {
    for (const key of feature.syncKeys) {
      syncer.switchesKeys[`sync${key}`].dependencies.push(id);
    }
  }
  if (feature.features) {
    for (const subId in feature.features) {
      getDependencies(syncer, feature.features[subId], subId);
    }
  }
}

/**
 * @returns {Promise<Object>}
 */
async function setSync(isPopup = false, isSilent = false) {
  let syncer = {};
  syncer.canceled = false;
  syncer.isSilent = isSilent || _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.isFirstRun;
  if (_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.parameters.autoSync) {
    syncer.parameters = _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.parameters;
  }
  let containerr = null;
  let context = null;
  let popup = null;
  if (isPopup || syncer.isSilent) {
    syncer.popup = popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_15__["Popup"]({
      addScrollable: 'left',
      settings: true
    });
    containerr = popup.description;
    context = popup.scrollable;
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.isFirstRun && (!syncer.isSilent || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('openAutoSyncPopup'))) {
      popup.open();
    }
  } else {
    containerr = context = _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.sidebar.nextElementSibling;
    containerr.innerHTML = '';
    context.setAttribute('data-esgst-popup', 'true');
  }
  const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_20__["PageHeading"].create('sync', [{
    name: 'ESGST',
    url: _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.settingsUrl
  }, {
    name: 'Sync',
    url: _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.syncUrl
  }]).insert(containerr, 'afterbegin').nodes.outer;
  if (!isPopup && !syncer.isSilent) {
    _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.mainPageHeading = heading;
  }
  if (syncer.isSilent) {
    _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(context, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
      ref: ref => syncer.area = ref
    }));
  } else {
    _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(context, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
      className: "esgst-menu-split"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
      className: "esgst-sync-options"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
      className: "esgst-sync-area"
    })));
    _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create([{
      color: 'green',
      icons: [],
      name: 'Save Changes',
      onClick: async () => {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.lockAndSaveSettings(toSave);
        toSave = {};
        if (isPopup) {
          popup.close();
        } else {
          window.location.reload();
        }
      }
    }, {
      color: 'white',
      icons: [],
      name: 'Saving...'
    }]).insert(context, 'beforeend');
    syncer.container = context.querySelector('.esgst-sync-options');
    syncer.area = context.querySelector('.esgst-sync-area');
    _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.area, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
      ref: ref => syncer.notificationArea = ref
    }));
    syncer.manual = /** @type {{ check: boolean, content: Element[], name: string }} */{
      check: true,
      content: [],
      name: 'Manual'
    };
    syncer.automatic = /** @type {{ check: boolean, content: Element[], name: string }} */{
      check: true,
      content: [],
      name: 'Automatic'
    };
    syncer.switchesKeys = SYNC_KEYS;
    syncer.switches = {};
    for (const type in _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.features) {
      for (const id in _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.features[type].features) {
        getDependencies(syncer, _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.features[type].features[id], id);
      }
    }
    for (let id in syncer.switchesKeys) {
      if (syncer.switchesKeys.hasOwnProperty(id)) {
        const info = syncer.switchesKeys[id];
        const checkbox = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_8__["Checkbox"](null, _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get(id));
        checkbox.onChange = () => {
          toSave[`sync${info.key}`] = checkbox.value;
          _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].set(`sync${info.key}`, checkbox.value);
        };
        syncer.switches[id] = checkbox;
        syncer.manual.content.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
          className: "fa fa-question-circle",
          title: `This is required for the following features:\n\n${info.dependencies.map(x => _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.getFeatureName(null, x)).join('\n')}`
        }), ' ', checkbox.checkbox, " ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", null, info.name)));
        if (info.key !== 'HiddenGames' && info.key !== 'Whitelist' && info.key !== 'Blacklist') {
          setAutoSync(info.key, info.name, syncer);
        }
        addNotificationBars(syncer, info);
      }
    }
    syncer.button = _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create([{
      color: 'green',
      icons: ['fa-refresh'],
      name: 'Sync',
      onClick: sync.bind(null, syncer)
    }, {
      template: 'error',
      name: 'Cancel',
      switchTo: {
        onReturn: 0
      },
      onClick: cancelSync.bind(null, syncer)
    }]).build();
    syncer.manual.content.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
      className: "esgst-button-group"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", null, "Select:"), _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create([{
      color: 'white',
      icons: ['fa-square'],
      name: 'All',
      onClick: _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.selectSwitches.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common, syncer.switches, 'check', null)
    }, {
      template: 'loading',
      isDisabled: true,
      name: ''
    }]).build().nodes.outer, _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create([{
      color: 'white',
      icons: ['fa-square-o'],
      name: 'None',
      onClick: _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.selectSwitches.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common, syncer.switches, 'uncheck', null)
    }, {
      template: 'loading',
      isDisabled: true,
      name: ''
    }]).build().nodes.outer, _components_Button__WEBPACK_IMPORTED_MODULE_18__["Button"].create([{
      color: 'white',
      icons: ['fa-plus-square-o'],
      name: 'Inverse',
      onClick: _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.selectSwitches.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common, syncer.switches, 'toggle', null)
    }, {
      template: 'loading',
      isDisabled: true,
      name: ''
    }]).build().nodes.outer), syncer.button.nodes.outer);
    syncer.automatic.content.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
      className: "esgst-description"
    }, "Select how often you want the automatic sync to run (in days) or 0 to disable it."));
    _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.createFormRows(syncer.container, 'beforeend', {
      items: [syncer.manual, syncer.automatic]
    });
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('at')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.modules.generalAccurateTimestamp.at_getTimestamps(syncer.notificationArea);
    }
  }
  syncer.progressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_19__["NotificationBar"].create().insert(syncer.area, 'beforeend').hide();
  syncer.results = _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.createElements(syncer.area, 'beforeend', [{
    type: 'div'
  }]);
  if (!syncer.isSilent && !_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.isSyncing && syncer.parameters && syncer.button) {
    syncer.button.onClick();
  }
  return syncer;
}
function updateSyncDates(syncer) {
  syncer.notificationArea.innerHTML = '';
  for (let id in syncer.switchesKeys) {
    if (syncer.switchesKeys.hasOwnProperty(id)) {
      const info = syncer.switchesKeys[id];
      addNotificationBars(syncer, info);
    }
  }
  if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('at')) {
    _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.modules.generalAccurateTimestamp.at_getTimestamps(syncer.notificationArea);
  }
}
function addNotificationBars(syncer, info) {
  const notificationBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_19__["NotificationBar"].create().build();
  let timestamp = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get(`lastSync${info.key}`);
  if (timestamp) {
    notificationBar.setSuccess(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, "Synced ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", null, info.name), ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
      "data-timestamp": timestamp / 1e3
    }, Object(date_fns_formatDistanceStrict__WEBPACK_IMPORTED_MODULE_7__["default"])(timestamp, new Date())), ' ago.'));
  } else {
    notificationBar.setWarning(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, "Never synced ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", null, info.name)));
  }
  notificationBar.insert(syncer.notificationArea, 'beforeend');
}
function setAutoSync(key, name, syncer) {
  let days = [];
  for (let i = 0; i < 31; ++i) {
    days.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("option", {
      selected: i === _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get(`autoSync${key}`) ? true : null
    }, i));
  }
  syncer.automatic.content.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("select", {
    className: "esgst-auto-sync",
    onchange: event => {
      _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].set(`autoSync${key}`, parseInt(event.currentTarget.value));
      toSave[`autoSync${key}`] = parseInt(event.currentTarget.value);
    }
  }, days), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", null, name)));
}
function cancelSync(syncer) {
  if (syncer.process) {
    syncer.process.stop();
  }
  syncer.progressBar.reset().hide();
  syncer.canceled = true;
}

//use: syncer.results, syncer.progressBar, syncer.parameters
async function sync(syncer) {
  const now = Date.now();
  if (syncer.parameters && syncer.parameters.HiddenGames || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncHiddenGames')) {
    if (now - _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastSyncHiddenGames') > 0) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastPageHiddenGames') === 0) {
        const doContinue = await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.createConfirmationAsync(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
          className: "notification yellow notification--warning esgst-sync-warning"
        }, "WARNING: Syncing your hidden games may take a long time depending on the amount of games."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
          className: "esgst-text-left"
        }, "The requests will be limited to 1 per second to avoid SteamGifts timing you out for 'Too Many Requests' in a short period of time.", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("br", null), "This is a cumulative sync, so it will pick up where it left off if cancelled.", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("hr", null)), _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastSyncHiddenGames') > 0 ? _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
          className: "esgst-text-left"
        }, "You should only need to perform a manual sync in rare cases, as ESGST automatically detects and updates your hidden game changes.", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("br", null), "By syncing as little as possible, you help keep SteamGifts running smoothly for everyone. \u2764\uFE0F")) : '', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("br", null), "If you're sure you want to continue, click 'Yes', otherwise click 'No' and disable hidden games sync."));
        if (!doContinue) {
          return;
        }
      }
    }
  }
  if (syncer.parameters && (syncer.parameters.Whitelist || syncer.parameters.Blacklist) || !syncer.parameters && (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncWhitelist') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncBlacklist'))) {
    if (now - _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastSyncWhitelist') > 0 || now - _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastSyncBlacklist') > 0) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastPagewhitelisted') === 0 || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastPageblacklisted') === 0) {
        const doContinue = await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.createConfirmationAsync(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
          className: "notification yellow notification--warning esgst-sync-warning"
        }, "WARNING: Syncing your whitelist or blacklist may take a long time depending on the amount of users."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
          className: "esgst-text-left"
        }, "The requests will be limited to 1 per second to avoid SteamGifts timing you out for 'Too Many Requests' in a short period of time.", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("br", null), "This is a cumulative sync, so it will pick up where it left off if cancelled.", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("hr", null)), _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastSyncHiddenGames') > 0 ? _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
          className: "esgst-text-left"
        }, "You should only need to perform a manual sync in rare cases, as ESGST automatically detects and updates your hidden game changes.", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("br", null), "By syncing as little as possible, you help keep SteamGifts running smoothly for everyone. \u2764\uFE0F")) : '', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("br", null), "If you're sure you want to continue, click 'Yes', otherwise click 'No' and disable whitelist or blacklist sync."));
        if (!doContinue) {
          return;
        }
      }
    }
  }
  syncer.canceled = false;
  if (!_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.isFirstRun) {
    await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setSetting('lastSync', now);
    syncer.results.innerHTML = '';
    syncer.progressBar.setLoading(null).show();
  }

  // if this is the user's fist time using the script, only sync steam id and stop
  if (_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.isFirstRun) {
    return;
  }

  // if sync has been canceled stop
  if (syncer.canceled) {
    return;
  }
  syncer.failed = {};

  // sync groups
  if (_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.sg && (syncer.parameters && syncer.parameters.Groups || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncGroups'))) {
    syncer.progressBar.setMessage('Syncing your Steam groups...');
    syncer.groups = {};
    let savedGroups = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.getValue('groups'));
    if (!Array.isArray(savedGroups)) {
      let newGroups, savedGiveaways;
      newGroups = [];
      for (let key in savedGroups) {
        if (savedGroups.hasOwnProperty(key)) {
          newGroups.push(savedGroups[key]);
        }
      }
      savedGroups = newGroups;
      await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setValue('groups', JSON.stringify(savedGroups));
      savedGiveaways = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.getValue('giveaways'));
      for (let key in savedGiveaways) {
        if (savedGiveaways.hasOwnProperty(key)) {
          delete savedGiveaways[key].groups;
        }
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setValue('giveaways', JSON.stringify(savedGiveaways));
    }
    syncer.currentGroups = {};
    for (let i = 0, n = savedGroups.length; i < n; ++i) {
      if (savedGroups[i] && savedGroups[i].member && savedGroups[i].steamId) {
        syncer.currentGroups[savedGroups[i].steamId] = savedGroups[i].name;
      }
    }
    syncer.newGroups = {};
    syncer.savedGroups = savedGroups;
    let nextPage = 1;
    let pagination = null;
    do {
      let elements, responseHtml;
      responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`https://www.steamgifts.com/account/steam/groups/search?page=${nextPage}`)).html;
      elements = responseHtml.getElementsByClassName('table__row-outer-wrap');
      for (let i = 0, n = elements.length; !syncer.canceled && i < n; i++) {
        let code, element, heading, name;
        element = elements[i];
        heading = element.getElementsByClassName('table__column__heading')[0];
        code = heading.getAttribute('href').match(/\/group\/(.+?)\/(.+)/)[1];
        const avatarElement = element.querySelector('a[href*="/group/"]');
        name = heading.textContent.trim() || avatarElement && avatarElement.getAttribute('href').split('/').pop();
        let j;
        for (j = syncer.savedGroups.length - 1; j >= 0 && syncer.savedGroups[j].code !== code; --j) {}
        if (j >= 0 && syncer.savedGroups[j].steamId) {
          const steamId = syncer.savedGroups[j].steamId;
          syncer.groups[code] = {
            member: true
          };
          if (!syncer.savedGroups[j].name || !syncer.savedGroups[j].name.trim()) {
            syncer.savedGroups[j].name = name;
          }
          syncer.newGroups[syncer.savedGroups[j].steamId] = syncer.savedGroups[j].name;
        } else {
          let avatar, steamId;
          avatar = element.getElementsByClassName('table_image_avatar')[0].style.backgroundImage.match(/url\("(.+)"\)/)[1];
          steamId = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`/group/${code}/`)).html.getElementsByClassName('sidebar__shortcut-inner-wrap')[0].firstElementChild.getAttribute('href').match(/\d+/)[0];
          syncer.groups[code] = {
            avatar: avatar,
            code: code,
            member: true,
            name: name,
            steamId: steamId
          };
          syncer.newGroups[steamId] = name;
        }
      }
      pagination = responseHtml.getElementsByClassName('pagination__navigation')[0];
      nextPage += 1;
    } while (!syncer.canceled && pagination && !pagination.lastElementChild.classList.contains('is-selected'));
    await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.lockAndSaveGroups(syncer.groups, true);
    let missing, neww;
    missing = [];
    neww = [];
    for (let id in syncer.currentGroups) {
      if (syncer.currentGroups.hasOwnProperty(id)) {
        if (!syncer.newGroups[id]) {
          missing.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("a", {
            href: `http://steamcommunity.com/gid/${id}`
          }, syncer.currentGroups[id]), ', ');
        }
      }
    }
    for (let id in syncer.newGroups) {
      if (syncer.newGroups.hasOwnProperty(id)) {
        if (!syncer.currentGroups[id]) {
          neww.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("a", {
            href: `http://steamcommunity.com/gid/${id}`
          }, syncer.newGroups[id]), ', ');
        }
      }
    }
    missing.pop();
    neww.pop();
    syncer.jsx = [];
    if (missing.length) {
      syncer.jsx.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        className: "esgst-bold"
      }, "Missing groups:"), " ", missing));
    }
    if (neww.length) {
      syncer.jsx.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        className: "esgst-bold"
      }, "New groups:"), " ", neww));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Groups synced."), syncer.jsx));
  }

  // if sync has been canceled stop
  if (syncer.canceled) {
    return;
  }

  // sync whitelist and blacklist
  if ((syncer.parameters && syncer.parameters.Whitelist || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncWhitelist')) && (now - _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastSyncWhitelist') > 0 || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastPagewhitelisted') > 0) || (syncer.parameters && syncer.parameters.Blacklist || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncBlacklist')) && (now - _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastSyncBlacklist') > 0 || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastPageblacklisted') > 0)) {
    if (syncer.parameters && syncer.parameters.Whitelist || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncWhitelist')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastPagewhitelisted') === 0) {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.deleteUserValues(['whitelisted', 'whitelistedDate']);
      }
      syncer.progressBar.setMessage('Syncing your whitelist...');
      await syncWhitelistBlacklist('whitelisted', syncer, `https://www.steamgifts.com/account/manage/whitelist/search?page=`);
      if (!syncer.canceled) {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setSetting('lastPagewhitelisted', 0);
      }
    }
    if (syncer.canceled) {
      return;
    }
    if (syncer.parameters && syncer.parameters.Blacklist || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncBlacklist')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastPageblacklisted') === 0) {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.deleteUserValues(['blacklisted', 'blacklistedDate']);
      }
      syncer.progressBar.setMessage('Syncing your blacklist...');
      await syncWhitelistBlacklist('blacklisted', syncer, `https://www.steamgifts.com/account/manage/blacklist/search?page=`);
      if (!syncer.canceled) {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setSetting('lastPageblacklisted', 0);
      }
    }
    if (!syncer.canceled) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Whitelist/blacklist synced."));
    }
  }

  // if sync has been canceled stop
  if (syncer.canceled) {
    return;
  }

  // sync steam friends
  if (syncer.parameters && syncer.parameters.SteamFriends || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncSteamFriends')) {
    const isPermitted = await _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].contains([['steamApi']]);
    if (isPermitted) {
      try {
        const users = [];
        syncer.progressBar.setMessage('Syncing your Steam friends...');
        await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.deleteUserValues(['steamFriend']);
        const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`http://api.steampowered.com/ISteamUser/GetFriendList/v0001/?key=${_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamApiKey')}&steamid=${_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamId')}&relationship=friend`);
        for (const friend of response.json.friendslist.friends) {
          users.push({
            steamId: friend.steamid,
            values: {
              steamFriend: friend.friend_since
            }
          });
        }
        syncer.progressBar.setMessage(`Saving your Steam friends (this may take a while)...`);
        await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.saveUsers(users);
        _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Steam friends synced."));
      } catch (e) {
        syncer.failed.SteamFriends = true;
        _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Failed to sync your Steam friends. Check if you have a valid Steam API key set or if your profile is public."));
      }
    } else {
      syncer.failed.SteamFriends = true;
      _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].getMessage([['steamApi']])));
    }
  }

  // if sync has been canceled stop
  if (syncer.canceled) {
    return;
  }

  // sync hidden games
  if ((syncer.parameters && syncer.parameters.HiddenGames || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncHiddenGames')) && (now - _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastSyncHiddenGames') > 0 || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastPageHiddenGames') > 0)) {
    syncer.progressBar.setMessage('Syncing your hidden games...');
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastPageHiddenGames') === 0) {
      const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_12__["Lock"]('game', {
        threshold: 300
      });
      await lock.lock();
      let savedGames = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.getValue('games'));
      for (let key in savedGames.apps) {
        if (savedGames.apps.hasOwnProperty(key)) {
          delete savedGames.apps[key].hidden;
        }
      }
      for (let key in savedGames.subs) {
        if (savedGames.subs.hasOwnProperty(key)) {
          delete savedGames.subs[key].hidden;
        }
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setValue('games', JSON.stringify(savedGames));
      await lock.unlock();
    }
    let nextPage = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastPageHiddenGames') > 0 ? _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('lastPageHiddenGames') : 1;
    let pagination = null;
    do {
      const hiddenGames = {
        apps: [],
        subs: []
      };
      let elements, responseHtml;
      syncer.progressBar.setMessage(`Syncing your hidden games (page ${nextPage})...`);
      responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`https://www.steamgifts.com/account/settings/giveaways/filters/search?page=${nextPage}`, {
        queue: true
      })).html;
      elements = responseHtml.querySelectorAll(`.table__column__secondary-link[href*="store.steampowered.com"]`);
      for (let i = 0, n = elements.length; i < n; ++i) {
        let match = elements[i].getAttribute('href').match(/(app|sub)\/(\d+)/);
        if (match) {
          hiddenGames[`${match[1]}s`].push(match[2]);
        }
      }
      pagination = responseHtml.getElementsByClassName('pagination__navigation')[0];
      nextPage += 1;
      const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_12__["Lock"]('game', {
        threshold: 300
      });
      await lock.lock();
      let savedGames = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.getValue('games'));
      for (let i = 0, n = hiddenGames.apps.length; i < n; ++i) {
        if (!savedGames.apps[hiddenGames.apps[i]]) {
          savedGames.apps[hiddenGames.apps[i]] = {};
        }
        savedGames.apps[hiddenGames.apps[i]].hidden = true;
      }
      for (let i = 0, n = hiddenGames.subs.length; i < n; ++i) {
        if (!savedGames.subs[hiddenGames.subs[i]]) {
          savedGames.subs[hiddenGames.subs[i]] = {};
        }
        savedGames.subs[hiddenGames.subs[i]].hidden = true;
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setValue('games', JSON.stringify(savedGames));
      await lock.unlock();
      await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setSetting('lastPageHiddenGames', nextPage);
    } while (!syncer.canceled && pagination && !pagination.lastElementChild.classList.contains('is-selected'));
    if (!syncer.canceled) {
      await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setSetting('lastPageHiddenGames', 0);
      _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Hidden games synced."));
    }
  }

  // if sync has been canceled stop
  if (syncer.canceled) {
    return;
  }
  if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('hgm_s')) {
    syncer.hgm = {
      toAdd: {
        apps: new Set(),
        subs: new Set()
      },
      toRemove: {
        apps: new Set(),
        subs: new Set()
      }
    };
  }

  // sync wishlisted/owned/ignored games
  if (syncer.parameters && syncer.parameters.Games || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncGames')) {
    const isPermitted = await _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].contains([['steamApi'], ['steamStore']]);
    if (isPermitted) {
      syncer.progressBar.setMessage('Syncing your wishlisted/owned/ignored games...');
      try {
        syncer.jsx = [];
        let apiResponse = null;
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamApiKey')) {
          apiResponse = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`http://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/?key=${_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamApiKey')}&steamid=${_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamId')}&format=json`);
        }
        let storeResponse = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`http://store.steampowered.com/dynamicstore/userdata?${Math.random().toString().split('.')[1]}`);
        await syncGames(null, syncer, apiResponse, storeResponse);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_o_a')) {
          const altAccounts = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_o_altAccounts');
          if ((altAccounts === null || altAccounts === void 0 ? void 0 : altAccounts.length) > 0) {
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamApiKey')) {
              for (const altAccount of altAccounts) {
                if (syncer.canceled) {
                  break;
                }
                apiResponse = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`http://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/?key=${_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamApiKey')}&steamid=${altAccount.steamId}&format=json`);
                await syncGames(altAccount, syncer, apiResponse);
              }
              await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setSetting('gc_o_altAccounts', altAccounts);
            } else {
              syncer.jsx.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Failed to sync your owned games from alt accounts. Check if you have a valid Steam API key set in the settings menu."));
            }
          }
        }
        _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Owned/wishlisted/ignored games synced."), syncer.jsx));
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('getSyncGameNames')) {
          // noinspection JSIgnoredPromiseFromCall
          _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.getGameNames(syncer.results);
        }
      } catch (e) {
        syncer.failed.Games = true;
        _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Failed to sync your owned / wishlisted / ignored games. Try again later."));
      }
    } else {
      syncer.failed.Games = true;
      _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].getMessage([['steamApi'], ['steamStore']])));
    }
  }

  // if sync has been canceled stop
  if (syncer.canceled) {
    return;
  }

  // sync followed games
  if (syncer.parameters && syncer.parameters.FollowedGames || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncFollowedGames')) {
    const isPermitted = await _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].contains([['steamCommunity']]);
    if (isPermitted) {
      syncer.progressBar.setMessage('Syncing your followed games...');
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get('https://steamcommunity.com/my/followedgames/');
      const elements = response.html.querySelectorAll('.gameListRow.followed');
      const savedGames = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.getValue('games'));
      for (const id in savedGames.apps) {
        if (savedGames.apps.hasOwnProperty(id)) {
          savedGames.apps[id].followed = null;
        }
      }
      for (const element of elements) {
        const id = parseInt(element.getAttribute('data-appid'));
        if (!savedGames.apps[id]) {
          savedGames.apps[id] = {};
        }
        savedGames.apps[id].followed = true;
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.lockAndSaveGames(savedGames);
      _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Followed games synced."));
    } else {
      syncer.failed.FollowedGames = true;
      _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].getMessage([['steamCommunity']])));
    }
  }

  // if sync has been canceled stop
  if (syncer.canceled) {
    return;
  }

  // sync won games
  if (syncer.parameters && syncer.parameters.WonGames || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncWonGames')) {
    syncer.progressBar.setMessage('Syncing your won games...');
    await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.getWonGames(syncer);
    _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Won games synced."));
  }

  // if sync has been canceled stop
  if (syncer.canceled) {
    return;
  }

  // sync reduced cv games
  if (syncer.parameters && syncer.parameters.ReducedCvGames || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncReducedCvGames')) {
    const isPermitted = await _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].contains([['server']]);
    if (isPermitted) {
      syncer.progressBar.setMessage('Syncing reduced CV games...');
      try {
        await syncReducedCvGames();
        _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
          className: "fa fa-check"
        }), " Reduced CV games synced."));
      } catch (e) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_13__["Logger"].warning(e.message);
        syncer.failed.ReducedCvGames = true;
        _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
          className: "fa fa-times"
        }), " Failed to sync reduced CV games."));
      }
    } else {
      syncer.failed.ReducedCvGames = true;
      _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
        className: "fa fa-times"
      }), " ", _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].getMessage([['server']])));
    }
  }

  // if sync has been canceled stop
  if (syncer.canceled) {
    return;
  }

  // sync no cv games
  if (syncer.parameters && syncer.parameters.NoCvGames || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncNoCvGames')) {
    const isPermitted = await _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].contains([['server']]);
    if (isPermitted) {
      syncer.progressBar.setMessage('Syncing no CV games...');
      try {
        await syncNoCvGames();
        _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
          className: "fa fa-check"
        }), " No CV games synced."));
      } catch (e) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_13__["Logger"].warning(e.message);
        syncer.failed.NoCvGames = true;
        _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
          className: "fa fa-times"
        }), " Failed to sync no CV games."));
      }
    } else {
      syncer.failed.NoCvGames = true;
      _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
        className: "fa fa-times"
      }), " ", _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].getMessage([['server']])));
    }
  }

  // sync hltb times
  if (syncer.parameters && syncer.parameters.HltbTimes || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncHltbTimes')) {
    const isPermitted = await _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].contains([['googleWebApp']]);
    if (isPermitted) {
      syncer.progressBar.setMessage('Syncing HLTB times...');
      try {
        const games = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`https://script.google.com/macros/s/AKfycbysBF72c0VNylStaslLlOL7X4M0KQIgY0VVv6Q0x2vh72iGAtE/exec`)).json;
        const hltb = {};
        for (const game of games) {
          if (game.steamId) {
            hltb[game.steamId] = game;
          }
        }
        let cache = JSON.parse(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].get('gcCache', `{ "apps": {}, "subs": {}, "hltb": {}, "timestamp": 0, "version": 7 }`));
        if (cache.version !== 7) {
          cache = {
            apps: {},
            subs: {},
            hltb: cache.hltb,
            timestamp: 0,
            version: 7
          };
        }
        cache.hltb = hltb;
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].set('gcCache', JSON.stringify(cache));
      } catch (e) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_13__["Logger"].warning(e.message, e.stack);
      }
      _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "HLTB times synced."));
    } else {
      syncer.failed.HltbTimes = true;
      _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].getMessage([['googleWebApp']])));
    }
  }

  // if sync has been canceled stop
  if (syncer.canceled) {
    return;
  }

  // sync delisted games
  if (syncer.parameters && syncer.parameters.DelistedGames || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncDelistedGames')) {
    const isPermitted = await _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].contains([['steamTracker']]);
    if (isPermitted) {
      syncer.progressBar.setMessage('Syncing delisted games...');
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get('https://steam-tracker.com/api?action=GetAppListV3');
      try {
        if (response.json.success) {
          const banned = response.json.removed_apps.filter(x => x.type === 'game' && x.category === 'Banned').map(x => parseInt(x.appid));
          const removed = response.json.removed_apps.filter(x => x.type === 'game' && x.category === 'Delisted').map(x => parseInt(x.appid));
          await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setValue('delistedGames', JSON.stringify({
            banned,
            removed
          }));
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('hgm_s')) {
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('hgm_addBanned')) {
              for (const id of banned) {
                syncer.hgm.toAdd.apps.add(id);
              }
            } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('hgm_removeBanned')) {
              for (const id of banned) {
                syncer.hgm.toRemove.apps.add(id);
              }
            }
          }
        }
        _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Delisted games synced."));
      } catch (error) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Failed to sync delisted games (check the console log for more info)."));
        _class_Logger__WEBPACK_IMPORTED_MODULE_13__["Logger"].warning(error.message, error.stack);
      }
    } else {
      syncer.failed.DelistedGames = true;
      _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_Permissions__WEBPACK_IMPORTED_MODULE_14__["permissions"].getMessage([['steamTracker']])));
    }
  }
  if (syncer.canceled) {
    return;
  }
  if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('hgm_s')) {
    const result = await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.hideGames({
      appIds: syncer.hgm.toAdd.apps,
      subIds: syncer.hgm.toAdd.subs,
      update: message => syncer.progressBar.setMessage(message)
    });
    const tmpResult = await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.hideGames({
      appIds: syncer.hgm.toRemove.apps,
      subIds: syncer.hgm.toRemove.subs,
      update: message => syncer.progressBar.setMessage(message)
    }, true);
    result.apps = result.apps.concat(tmpResult.apps);
    result.subs = result.subs.concat(tmpResult.subs);
    let message = '';
    if (result.apps.length) {
      message += `The following apps were not found and therefore not hidden / unhidden (they are most likely internal apps, such as demos, game editors etc): ${result.apps.join(`, `)}\n`;
    }
    if (result.subs.length) {
      message += `The following subs were not found and therefore not hidden / unhidden: ${result.subs.join(`, `)}\n`;
    }
    if (message) {
      window.alert(message);
    }
  }
  if (syncer.canceled) {
    return;
  }

  // sync giveaways
  if ((syncer.parameters && syncer.parameters.Giveaways || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncGiveaways')) && _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.sg) {
    syncer.progressBar.setMessage('Syncing your giveaways...');
    const key = 'sent';
    const user = {
      steamId: _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamId'),
      username: _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('username')
    };
    syncer.process = await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.modules.usersUserGiveawayData.ugd_add(null, key, user, syncer);
    await syncer.process.start();
    _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Giveaways synced."));
  }

  // sync won giveaways
  if ((syncer.parameters && syncer.parameters.WonGiveaways || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('syncWonGiveaways')) && _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.sg) {
    syncer.progressBar.setMessage('Syncing your won giveaways...');
    const key = 'won';
    const user = {
      steamId: _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamId'),
      username: _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('username')
    };
    syncer.process = await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.modules.usersUserGiveawayData.ugd_add(null, key, user, syncer);
    await syncer.process.start();
    _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(syncer.results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, "Won giveaways synced."));
  }

  // finish sync
  if (!_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.isFirstRun) {
    syncer.progressBar.setMessage('Updating last sync date...');
    let keys = ['Groups', 'Whitelist', 'Blacklist', 'SteamFriends', 'HiddenGames', 'Games', 'FollowedGames', 'WonGames', 'ReducedCvGames', 'NoCvGames', 'HltbTimes', 'DelistedGames', 'Giveaways', 'WonGiveaways'];
    for (let i = keys.length - 1; i > -1; i--) {
      let key = keys[i];
      let id = `sync${key}`;
      if (!syncer.failed[key] && (syncer.parameters && syncer.parameters[key] || !syncer.parameters && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get(id))) {
        _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].set(`lastSync${key}`, now);
        toSave[`lastSync${key}`] = now;
      }
    }
    await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.lockAndSaveSettings(toSave);
    toSave = {};
    syncer.progressBar.setSuccess('Synced!');
    _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].delete('isSyncing');
  }
  if (!syncer.isSilent) {
    updateSyncDates(syncer);
  }
}
async function syncReducedCvGames() {
  const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get('https://esgst.rafaelgomes.xyz/api/games/rcv');
  const games = response.json.result.found;
  for (const id in games.apps) {
    if (games.apps.hasOwnProperty(id)) {
      games.apps[id].reducedCV = _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.dateFromServer(games.apps[id].effective_date);
      delete games.apps[id].effective_date;
    }
  }
  for (const id in games.subs) {
    if (games.subs.hasOwnProperty(id)) {
      games.subs[id].reducedCV = _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.dateFromServer(games.subs[id].effective_date);
      delete games.subs[id].effective_date;
    }
  }
  for (const id in _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.games.apps) {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.games.apps.hasOwnProperty(id) && !games.apps[id]) {
      games.apps[id] = {
        reducedCV: null
      };
    }
  }
  for (const id in _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.games.subs) {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.games.subs.hasOwnProperty(id) && !games.subs[id]) {
      games.subs[id] = {
        reducedCV: null
      };
    }
  }
  await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.lockAndSaveGames(games);
}
async function syncNoCvGames() {
  const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get('https://esgst.rafaelgomes.xyz/api/games/ncv');
  const games = response.json.result.found;
  for (const id in games.apps) {
    if (games.apps.hasOwnProperty(id)) {
      games.apps[id].noCV = _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.dateFromServer(games.apps[id].effective_date);
      delete games.apps[id].effective_date;
    }
  }
  for (const id in games.subs) {
    if (games.subs.hasOwnProperty(id)) {
      games.subs[id].noCV = _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.dateFromServer(games.subs[id].effective_date);
      delete games.subs[id].effective_date;
    }
  }
  for (const id in _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.games.apps) {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.games.apps.hasOwnProperty(id) && !games.apps[id]) {
      games.apps[id] = {
        noCV: null
      };
    }
  }
  for (const id in _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.games.subs) {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.games.subs.hasOwnProperty(id) && !games.subs[id]) {
      games.subs[id] = {
        noCV: null
      };
    }
  }
  await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.lockAndSaveGames(games);
}
async function syncWhitelistBlacklist(key, syncer, url) {
  const name = key === 'whitelisted' ? 'Whitelist' : 'Blacklist';
  let nextPage = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get(`lastPage${key}`) > 0 ? _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get(`lastPage${key}`) : 1;
  let pagination = null;
  do {
    const users = [];
    let elements, responseHtml;
    syncer.progressBar.setMessage(`Syncing your ${name.toLowerCase()} (page ${nextPage})...`);
    responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`${url}${nextPage}`, {
      queue: true
    })).html;
    elements = responseHtml.getElementsByClassName('table__row-outer-wrap');
    for (let i = 0, n = elements.length; i < n; ++i) {
      let element, user;
      element = elements[i];
      user = {
        id: element.querySelector(`[name="child_user_id"]`).value,
        username: element.getElementsByClassName('table__column__heading')[0].textContent,
        values: {}
      };
      user.values[key] = true;
      user.values[`${key}Date`] = parseInt(element.querySelector(`[data-timestamp]`).getAttribute('data-timestamp')) * 1e3;
      users.push(user);
    }
    pagination = responseHtml.getElementsByClassName('pagination__navigation')[0];
    nextPage += 1;
    await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.saveUsers(users);
    await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setSetting(`lastPage${key}`, nextPage);
  } while (!syncer.canceled && pagination && !pagination.lastElementChild.classList.contains('is-selected'));
}
async function syncGames(altAccount, syncer, apiResponse, storeResponse) {
  const apiJson = apiResponse && apiResponse.json;
  const storeJson = storeResponse && storeResponse.json;
  /** @property storeJson.rgOwnedApps */
  const hasApi = apiJson && apiJson.response && apiJson.response.games && apiJson.response.games.length,
    hasStore = storeJson && storeJson.rgOwnedApps && storeJson.rgOwnedApps.length;
  if ((altAccount && !_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamApiKey') || !altAccount && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamApiKey')) && !hasApi) {
    syncer.jsx.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, altAccount ? _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
      className: "esgst-bold"
    }, `${altAccount.name}: `) : null, "Unable to sync through the Steam API. Check if you have a valid Steam API key set in the settings menu.", altAccount ? 'Also check the privacy settings of your alt account.' : null));
  }
  if (!altAccount && !hasStore) {
    syncer.jsx.push('Unable to sync through the Steam store. Check if you are logged in to Steam on your current browser session. If you are, try again later. Some games may not be available through the Steam API (if you have a Steam API key set).');
  }
  //Logger.info(hasApi, hasStore);
  if ((!hasApi || !_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('fallbackSteamApi')) && !hasStore) {
    return;
  }

  // delete old data
  const savedGames = altAccount && altAccount.games || JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.getValue('games'));
  const oldWishlisted = {
    apps: [],
    subs: []
  };
  const oldIgnored = {
    apps: [],
    subs: []
  };
  const oldOwned = {
    apps: [],
    subs: []
  };
  for (const id in savedGames.apps) {
    if (savedGames.apps.hasOwnProperty(id)) {
      if (savedGames.apps[id].owned) {
        oldOwned.apps.push(id);
        savedGames.apps[id].owned = null;
      }
      if (hasStore) {
        if (savedGames.apps[id].wishlisted) {
          oldWishlisted.apps.push(id);
          savedGames.apps[id].wishlisted = null;
        }
        if (savedGames.apps[id].ignored) {
          oldIgnored.apps.push(id);
          savedGames.apps[id].ignored = null;
        }
      }
    }
  }
  if (hasStore) {
    for (const id in savedGames.subs) {
      if (savedGames.subs.hasOwnProperty(id)) {
        if (savedGames.subs[id].owned) {
          oldOwned.subs.push(id);
          savedGames.subs[id].owned = null;
        }
        if (savedGames.subs[id].wishlisted) {
          oldWishlisted.subs.push(id);
          savedGames.subs[id].wishlisted = null;
        }
        if (savedGames.subs[id].ignored) {
          oldIgnored.subs.push(id);
          savedGames.subs[id].ignored = null;
        }
      }
    }
  }

  // add new data
  const newWishlisted = {
    apps: [],
    subs: []
  };
  const newIgnored = {
    apps: [],
    subs: []
  };
  const newOwned = {
    apps: [],
    subs: []
  };
  let numOwned = 0;
  if (hasApi) {
    apiJson.response.games.forEach(game => {
      const id = game.appid;
      if (!savedGames.apps[id]) {
        savedGames.apps[id] = {};
      }
      savedGames.apps[id].owned = true;
      newOwned.apps.push(id.toString());
      numOwned += 1;
    });
  }
  if (!altAccount) {
    if (hasStore) {
      [{
        jsonKey: 'rgWishlist',
        key: 'wishlisted',
        type: 'apps'
      }, {
        jsonKey: 'rgOwnedApps',
        key: 'owned',
        type: 'apps'
      }, {
        jsonKey: 'rgOwnedPackages',
        key: 'owned',
        type: 'subs'
      }, {
        jsonKey: 'rgIgnoredApps',
        key: 'ignored',
        type: 'apps'
      }, {
        jsonKey: 'rgIgnoredPackages',
        key: 'ignored',
        type: 'subs'
      }].forEach(item => {
        const jsonKey = item.jsonKey;
        const key = item.key;
        const type = item.type;
        let ids = [];
        if (Array.isArray(storeJson[jsonKey])) {
          ids = storeJson[jsonKey];
        } else {
          ids = Object.keys(storeJson[jsonKey]);
        }
        for (const id of ids) {
          if (!savedGames[type][id]) {
            savedGames[type][id] = {};
          }
          const value = savedGames[type][id][key];
          savedGames[type][id][key] = true;
          if (key === 'owned' && !value) {
            newOwned[type].push(id.toString());
            numOwned += 1;
          } else if (key === 'wishlisted') {
            newWishlisted[type].push(id.toString());
          } else if (key === 'ignored') {
            newIgnored[type].push(id.toString());
          }
        }
      });
    }
    if (numOwned !== _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.getValue('ownedGames', 0)) {
      await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.setValue('ownedGames', numOwned);
    }

    // get the wishlisted dates
    try {
      const wishlistData = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`https://api.steampowered.com/IWishlistService/GetWishlist/v1/?key=${_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamApiKey')}&steamid=${_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('steamId')}&format=json`)).json.response.items;
      if (wishlistData) {
        wishlistData.forEach(item => {
          /**
           * @property {string} item.appid
           * @property {boolean} item.added
           */
          const id = item.appid;
          if (!savedGames.apps[id]) {
            savedGames.apps[id] = {};
          }
          savedGames.apps[id].wishlisted = item.date_added;
        });
      }
    } catch (e) {
      console.error('Error fetching wishlist data:', e);
    }
  }
  const removedOwned = {};
  const addedOwned = {};
  const removedWishlisted = {};
  const addedWishlisted = {};
  const removedIgnored = {};
  const addedIgnored = {};
  for (const type of ['apps', 'subs']) {
    removedOwned[type] = oldOwned[type].filter(x => newOwned[type].indexOf(x) < 0);
    addedOwned[type] = newOwned[type].filter(x => oldOwned[type].indexOf(x) < 0);
    removedWishlisted[type] = oldWishlisted[type].filter(x => newWishlisted[type].indexOf(x) < 0);
    addedWishlisted[type] = newWishlisted[type].filter(x => oldWishlisted[type].indexOf(x) < 0);
    removedIgnored[type] = oldIgnored[type].filter(x => newIgnored[type].indexOf(x) < 0);
    addedIgnored[type] = newIgnored[type].filter(x => oldIgnored[type].indexOf(x) < 0);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('hgm_s')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('hgm_addOwned')) {
        for (const id of addedOwned[type]) {
          syncer.hgm.toAdd[type].add(id);
        }
        for (const id of removedOwned[type]) {
          syncer.hgm.toRemove[type].add(id);
        }
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('hgm_removeOwned')) {
        for (const id of addedOwned[type]) {
          syncer.hgm.toRemove[type].add(id);
        }
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('hgm_removeWishlisted')) {
        for (const id of addedWishlisted[type]) {
          syncer.hgm.toRemove[type].add(id);
        }
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('hgm_addIgnored')) {
        for (const id of addedIgnored[type]) {
          syncer.hgm.toAdd[type].add(id);
        }
        for (const id of removedIgnored[type]) {
          syncer.hgm.toRemove[type].add(id);
        }
      }
    }
    console.log(removedWishlisted);
    if (!altAccount) {
      for (const id of removedWishlisted[type]) {
        savedGames[type][id].previouslyWishlisted = true;
      }
    }
  }
  if (!altAccount) {
    await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.lockAndSaveGames(savedGames);
  }
  if (altAccount && (removedOwned.apps.length > 0 || removedOwned.subs.length > 0 || addedOwned.apps.length > 0 || addedOwned.subs.length > 0)) {
    syncer.jsx.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
      className: "esgst-bold"
    }, `Alt Account - ${altAccount.name}`), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("br", null));
  }
  if (removedOwned.apps.length > 0) {
    syncer.jsx.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
      className: "esgst-bold"
    }, "Removed apps: "), removedOwned.apps.map((x, i) => {
      x = _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("a", {
        href: `http://store.steampowered.com/app/${x}`
      }, x);
      return i < removedOwned.apps.length - 1 ? [x, ', '] : [x];
    }).flat()));
  }
  if (removedOwned.subs.length > 0) {
    syncer.jsx.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
      className: "esgst-bold"
    }, "Removed packages: "), removedOwned.subs.map((x, i) => {
      x = _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("a", {
        href: `http://store.steampowered.com/sub/${x}`
      }, x);
      return i < removedOwned.subs.length - 1 ? [x, ', '] : [x];
    }).flat()));
  }
  if (addedOwned.apps.length > 0) {
    syncer.jsx.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
      className: "esgst-bold"
    }, "Added apps: "), addedOwned.apps.map((x, i) => {
      x = _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("a", {
        href: `http://store.steampowered.com/app/${x}`
      }, x);
      return i < addedOwned.apps.length - 1 ? [x, ', '] : [x];
    }).flat()));
  }
  if (addedOwned.subs.length > 0) {
    syncer.jsx.push(_class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
      className: "esgst-bold"
    }, "Added packages: "), addedOwned.subs.map((x, i) => {
      x = _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("a", {
        href: `http://store.steampowered.com/sub/${x}`
      }, x);
      return i < addedOwned.subs.length - 1 ? [x, ', '] : [x];
    }).flat()));
  }
}


/***/ }),
/* 242 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return formatDistanceStrict; });
/* harmony import */ var _lib_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(185);
/* harmony import */ var _lib_getTimezoneOffsetInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(191);
/* harmony import */ var _compareAsc_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(243);
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(173);
/* harmony import */ var _lib_cloneObject_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(244);
/* harmony import */ var _lib_assign_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(245);
/* harmony import */ var _lib_defaultLocale_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(193);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(172);








var MILLISECONDS_IN_MINUTE = 1000 * 60;
var MINUTES_IN_DAY = 60 * 24;
var MINUTES_IN_MONTH = MINUTES_IN_DAY * 30;
var MINUTES_IN_YEAR = MINUTES_IN_DAY * 365;

/**
 * @name formatDistanceStrict
 * @category Common Helpers
 * @summary Return the distance between the given dates in words.
 *
 * @description
 * Return the distance between the given dates in words, using strict units.
 * This is like `formatDistance`, but does not use helpers like 'almost', 'over',
 * 'less than' and the like.
 *
 * | Distance between dates | Result              |
 * |------------------------|---------------------|
 * | 0 ... 59 secs          | [0..59] seconds     |
 * | 1 ... 59 mins          | [1..59] minutes     |
 * | 1 ... 23 hrs           | [1..23] hours       |
 * | 1 ... 29 days          | [1..29] days        |
 * | 1 ... 11 months        | [1..11] months      |
 * | 1 ... N years          | [1..N]  years       |
 *
 * @param {Date|Number} date - the date
 * @param {Date|Number} baseDate - the date to compare with
 * @param {Object} [options] - an object with options.
 * @param {Boolean} [options.addSuffix=false] - result indicates if the second date is earlier or later than the first
 * @param {'second'|'minute'|'hour'|'day'|'month'|'year'} [options.unit] - if specified, will force a unit
 * @param {'floor'|'ceil'|'round'} [options.roundingMethod='round'] - which way to round partial units
 * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}
 * @returns {String} the distance in words
 * @throws {TypeError} 2 arguments required
 * @throws {RangeError} `date` must not be Invalid Date
 * @throws {RangeError} `baseDate` must not be Invalid Date
 * @throws {RangeError} `options.roundingMethod` must be 'floor', 'ceil' or 'round'
 * @throws {RangeError} `options.unit` must be 'second', 'minute', 'hour', 'day', 'month' or 'year'
 * @throws {RangeError} `options.locale` must contain `formatDistance` property
 *
 * @example
 * // What is the distance between 2 July 2014 and 1 January 2015?
 * const result = formatDistanceStrict(new Date(2014, 6, 2), new Date(2015, 0, 2))
 * //=> '6 months'
 *
 * @example
 * // What is the distance between 1 January 2015 00:00:15
 * // and 1 January 2015 00:00:00?
 * const result = formatDistanceStrict(
 *   new Date(2015, 0, 1, 0, 0, 15),
 *   new Date(2015, 0, 1, 0, 0, 0)
 * )
 * //=> '15 seconds'
 *
 * @example
 * // What is the distance from 1 January 2016
 * // to 1 January 2015, with a suffix?
 * const result = formatDistanceStrict(new Date(2015, 0, 1), new Date(2016, 0, 1), {
 *   addSuffix: true
 * })
 * //=> '1 year ago'
 *
 * @example
 * // What is the distance from 1 January 2016
 * // to 1 January 2015, in minutes?
 * const result = formatDistanceStrict(new Date(2016, 0, 1), new Date(2015, 0, 1), {
 *   unit: 'minute'
 * })
 * //=> '525600 minutes'
 *
 * @example
 * // What is the distance from 1 January 2015
 * // to 28 January 2015, in months, rounded up?
 * const result = formatDistanceStrict(new Date(2015, 0, 28), new Date(2015, 0, 1), {
 *   unit: 'month',
 *   roundingMethod: 'ceil'
 * })
 * //=> '1 month'
 *
 * @example
 * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?
 * import { eoLocale } from 'date-fns/locale/eo'
 * const result = formatDistanceStrict(new Date(2016, 7, 1), new Date(2015, 0, 1), {
 *   locale: eoLocale
 * })
 * //=> '1 jaro'
 */

function formatDistanceStrict(dirtyDate, dirtyBaseDate, options) {
  var _ref, _options$locale, _options$roundingMeth;
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_7__["default"])(2, arguments);
  var defaultOptions = Object(_lib_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_0__["getDefaultOptions"])();
  var locale = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions.locale) !== null && _ref !== void 0 ? _ref : _lib_defaultLocale_index_js__WEBPACK_IMPORTED_MODULE_6__["default"];
  if (!locale.formatDistance) {
    throw new RangeError('locale must contain localize.formatDistance property');
  }
  var comparison = Object(_compareAsc_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(dirtyDate, dirtyBaseDate);
  if (isNaN(comparison)) {
    throw new RangeError('Invalid time value');
  }
  var localizeOptions = Object(_lib_assign_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_lib_cloneObject_index_js__WEBPACK_IMPORTED_MODULE_4__["default"])(options), {
    addSuffix: Boolean(options === null || options === void 0 ? void 0 : options.addSuffix),
    comparison: comparison
  });
  var dateLeft;
  var dateRight;
  if (comparison > 0) {
    dateLeft = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])(dirtyBaseDate);
    dateRight = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])(dirtyDate);
  } else {
    dateLeft = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])(dirtyDate);
    dateRight = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])(dirtyBaseDate);
  }
  var roundingMethod = String((_options$roundingMeth = options === null || options === void 0 ? void 0 : options.roundingMethod) !== null && _options$roundingMeth !== void 0 ? _options$roundingMeth : 'round');
  var roundingMethodFn;
  if (roundingMethod === 'floor') {
    roundingMethodFn = Math.floor;
  } else if (roundingMethod === 'ceil') {
    roundingMethodFn = Math.ceil;
  } else if (roundingMethod === 'round') {
    roundingMethodFn = Math.round;
  } else {
    throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");
  }
  var milliseconds = dateRight.getTime() - dateLeft.getTime();
  var minutes = milliseconds / MILLISECONDS_IN_MINUTE;
  var timezoneOffset = Object(_lib_getTimezoneOffsetInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(dateRight) - Object(_lib_getTimezoneOffsetInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(dateLeft);

  // Use DST-normalized difference in minutes for years, months and days;
  // use regular difference in minutes for hours, minutes and seconds.
  var dstNormalizedMinutes = (milliseconds - timezoneOffset) / MILLISECONDS_IN_MINUTE;
  var defaultUnit = options === null || options === void 0 ? void 0 : options.unit;
  var unit;
  if (!defaultUnit) {
    if (minutes < 1) {
      unit = 'second';
    } else if (minutes < 60) {
      unit = 'minute';
    } else if (minutes < MINUTES_IN_DAY) {
      unit = 'hour';
    } else if (dstNormalizedMinutes < MINUTES_IN_MONTH) {
      unit = 'day';
    } else if (dstNormalizedMinutes < MINUTES_IN_YEAR) {
      unit = 'month';
    } else {
      unit = 'year';
    }
  } else {
    unit = String(defaultUnit);
  }

  // 0 up to 60 seconds
  if (unit === 'second') {
    var seconds = roundingMethodFn(milliseconds / 1000);
    return locale.formatDistance('xSeconds', seconds, localizeOptions);

    // 1 up to 60 mins
  } else if (unit === 'minute') {
    var roundedMinutes = roundingMethodFn(minutes);
    return locale.formatDistance('xMinutes', roundedMinutes, localizeOptions);

    // 1 up to 24 hours
  } else if (unit === 'hour') {
    var hours = roundingMethodFn(minutes / 60);
    return locale.formatDistance('xHours', hours, localizeOptions);

    // 1 up to 30 days
  } else if (unit === 'day') {
    var days = roundingMethodFn(dstNormalizedMinutes / MINUTES_IN_DAY);
    return locale.formatDistance('xDays', days, localizeOptions);

    // 1 up to 12 months
  } else if (unit === 'month') {
    var months = roundingMethodFn(dstNormalizedMinutes / MINUTES_IN_MONTH);
    return months === 12 && defaultUnit !== 'month' ? locale.formatDistance('xYears', 1, localizeOptions) : locale.formatDistance('xMonths', months, localizeOptions);

    // 1 year up to max Date
  } else if (unit === 'year') {
    var years = roundingMethodFn(dstNormalizedMinutes / MINUTES_IN_YEAR);
    return locale.formatDistance('xYears', years, localizeOptions);
  }
  throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'");
}

/***/ }),
/* 243 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return compareAsc; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);


/**
 * @name compareAsc
 * @category Common Helpers
 * @summary Compare the two dates and return -1, 0 or 1.
 *
 * @description
 * Compare the two dates and return 1 if the first date is after the second,
 * -1 if the first date is before the second or 0 if dates are equal.
 *
 * @param {Date|Number} dateLeft - the first date to compare
 * @param {Date|Number} dateRight - the second date to compare
 * @returns {Number} the result of the comparison
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Compare 11 February 1987 and 10 July 1989:
 * const result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))
 * //=> -1
 *
 * @example
 * // Sort the array of dates:
 * const result = [
 *   new Date(1995, 6, 2),
 *   new Date(1987, 1, 11),
 *   new Date(1989, 6, 10)
 * ].sort(compareAsc)
 * //=> [
 * //   Wed Feb 11 1987 00:00:00,
 * //   Mon Jul 10 1989 00:00:00,
 * //   Sun Jul 02 1995 00:00:00
 * // ]
 */
function compareAsc(dirtyDateLeft, dirtyDateRight) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(2, arguments);
  var dateLeft = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDateLeft);
  var dateRight = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDateRight);
  var diff = dateLeft.getTime() - dateRight.getTime();
  if (diff < 0) {
    return -1;
  } else if (diff > 0) {
    return 1;
    // Return 0 if diff is 0; return NaN if diff is NaN
  } else {
    return diff;
  }
}

/***/ }),
/* 244 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return cloneObject; });
/* harmony import */ var _assign_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(245);

function cloneObject(object) {
  return Object(_assign_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])({}, object);
}

/***/ }),
/* 245 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return assign; });
function assign(target, object) {
  if (target == null) {
    throw new TypeError('assign requires that input parameter not be null or undefined');
  }
  for (var property in object) {
    if (Object.prototype.hasOwnProperty.call(object, property)) {
      ;
      target[property] = object[property];
    }
  }
  return target;
}

/***/ }),
/* 246 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Checkbox", function() { return Checkbox; });
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(132);
/* harmony import */ var _DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);


class Checkbox {
  constructor(context, defaultValue, threeState, messages = {}) {
    this.onPreEnabled = null;
    this.onPreDisabled = null;
    this.onEnabled = null;
    this.onDisabled = null;
    this.onChange = null;
    this.isBlocked = false;
    this.value = defaultValue;
    this.isThreeState = threeState;
    _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(context || _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].fragment(), 'afterbegin', _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
      className: "esgst-checkbox",
      ref: ref => this.checkbox = ref
    }, _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("input", {
      className: "esgst-hidden",
      type: "checkbox"
    }), _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
      className: "fa fa-square-o"
    }), _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
      className: "fa fa-square",
      title: messages.select || ''
    }), _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
      className: "fa fa-check-square",
      title: messages.unselect || ''
    })));
    this.input = this.checkbox.firstElementChild;
    this.disabled = this.input.nextElementSibling;
    this.none = this.disabled.nextElementSibling;
    this.enabled = this.none.nextElementSibling;
    if (this.isThreeState) {
      if (this.value === 'disabled') {
        this.none.classList.add('esgst-hidden');
        this.enabled.classList.add('esgst-hidden');
      } else if (this.value === 'none') {
        this.disabled.classList.add('esgst-hidden');
        this.enabled.classList.add('esgst-hidden');
      } else {
        this.disabled.classList.add('esgst-hidden');
        this.none.classList.add('esgst-hidden');
      }
      this.checkbox.addEventListener('click', event => this.change(false, null, null, event));
    } else {
      this.input.checked = this.value;
      if (this.value) {
        this.disabled.classList.add('esgst-hidden');
        this.none.classList.add('esgst-hidden');
      } else {
        this.none.classList.add('esgst-hidden');
        this.disabled.classList.add('esgst-hidden');
      }
      this.checkbox.addEventListener('click', event => this.change(true, null, null, event));
      this.checkbox.addEventListener('mouseenter', () => this.showNone());
      this.checkbox.addEventListener('mouseleave', () => this.hideNone());
      this.change();
    }
  }
  change(toggle, value, callback, event) {
    if (event) {
      event.stopPropagation();
    }
    if (this.isThreeState) {
      if (this.value === 'disabled' && !value || value === 'none') {
        this.enabled.classList.add('esgst-hidden');
        this.disabled.classList.add('esgst-hidden');
        this.none.classList.remove('esgst-hidden');
        this.value = 'none';
      } else if (this.value === 'none' && !value || value === 'enabled') {
        this.none.classList.add('esgst-hidden');
        this.disabled.classList.add('esgst-hidden');
        this.enabled.classList.remove('esgst-hidden');
        this.value = 'enabled';
      } else if (!value || value === 'disabled') {
        this.enabled.classList.add('esgst-hidden');
        this.none.classList.add('esgst-hidden');
        this.disabled.classList.remove('esgst-hidden');
        this.value = 'disabled';
      }
    } else {
      if (toggle) {
        this.preValue = this.input.checked = !this.input.checked;
      } else {
        this.preValue = this.input.checked;
      }
      if (this.preValue) {
        if (this.onPreEnabled && !this.isBlocked) {
          this.onPreEnabled(event);
        }
        this.value = this.preValue;
        this.disabled.classList.add('esgst-hidden');
        this.none.classList.add('esgst-hidden');
        this.enabled.classList.remove('esgst-hidden');
        if (this.onEnabled && !this.isBlocked) {
          this.onEnabled(event);
        }
      } else {
        if (this.onPreDisabled && !this.isBlocked) {
          this.onPreDisabled(event);
        }
        this.value = this.preValue;
        this.enabled.classList.add('esgst-hidden');
        this.none.classList.add('esgst-hidden');
        this.disabled.classList.remove('esgst-hidden');
        if (this.onDisabled && !this.isBlocked) {
          this.onDisabled(event);
        }
      }
    }
    if (event && this.onChange) {
      this.onChange();
    }
  }
  showNone() {
    if (!this.value) {
      this.disabled.classList.add('esgst-hidden');
      this.none.classList.remove('esgst-hidden');
    }
  }
  hideNone() {
    if (!this.value) {
      this.disabled.classList.remove('esgst-hidden');
      this.none.classList.add('esgst-hidden');
    }
  }
  check(callback) {
    this.preValue = this.input.checked = true;
    this.change(false, null, callback);
    if (this.onChange) {
      this.onChange();
    }
  }
  uncheck(callback) {
    this.preValue = this.input.checked = false;
    this.change(false, null, callback);
    if (this.onChange) {
      this.onChange();
    }
  }
  toggle(callback) {
    this.change(true, null, callback);
    if (this.onChange) {
      this.onChange();
    }
  }
}


/***/ }),
/* 247 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadDataCleaner", function() { return loadDataCleaner; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadDataManagement", function() { return loadDataManagement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "manageData", function() { return manageData; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(96);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(221);
/* harmony import */ var _class_PersistentStorage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(248);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(132);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(212);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(224);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(122);
/* harmony import */ var _CloudStorage__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(253);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(234);


















const STORAGE_TYPES = {
  TEXT: 0,
  COMPUTER: 1,
  DROPBOX: 2,
  GOOGLE_DRIVE: 3,
  ONEDRIVE: 4
};
function getDataMenu(option, switches, type) {
  let i, m, menu, n, options, toggleSwitch;
  menu = document.createElement('div');
  switches[option.key] = toggleSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](menu, `${type}_${option.key}`, false, option.name, false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${type}_${option.key}`));
  switches[option.key].size = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createElements(switches[option.key].name, 'beforeend', [{
    attributes: {
      class: 'esgst-bold'
    },
    type: 'span'
  }]);
  if (option.name === 'Main') {
    _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createElements(switches[option.key].name, 'beforeend', [{
      attributes: {
        class: 'fa fa-question-circle',
        title: `Main data is the data that is needed by other sub-options. Because of that dependency, when deleting main data not all data may be deleted, but if you delete another sub-option first and then delete main data, all data that was required exclusively by that sub-option will be deleted.`
      },
      type: 'i'
    }]);
  }
  if (option.options) {
    options = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createElements(menu, 'beforeend', [{
      attributes: {
        class: 'esgst-form-row-indent SMFeatures esgst-hidden'
      },
      type: 'div'
    }]);
    const optionSwitches = {};
    if (option.options.length > 1) {
      const group = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createElements(options, 'beforeend', [{
        attributes: {
          class: 'esgst-button-group'
        },
        type: 'div',
        children: [{
          text: `Select:`,
          type: 'span'
        }]
      }]);
      _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
        color: 'white',
        icons: ['fa-square'],
        name: 'All',
        onClick: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.selectSwitches.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common, optionSwitches, 'enable', group)
      }, {
        template: 'loading',
        isDisabled: true,
        name: ''
      }]).insert(group, 'beforeend');
      _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
        color: 'white',
        icons: ['fa-square-o'],
        name: 'None',
        onClick: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.selectSwitches.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common, optionSwitches, 'disable', group)
      }, {
        template: 'loading',
        isDisabled: true,
        name: ''
      }]).insert(group, 'beforeend');
      _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
        color: 'white',
        icons: ['fa-plus-square-o'],
        name: 'Inverse',
        onClick: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.selectSwitches.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common, optionSwitches, 'toggle', group)
      }, {
        template: 'loading',
        isDisabled: true,
        name: ''
      }]).insert(group, 'beforeend');
    }
    for (i = 0, n = option.options.length; i < n; ++i) {
      m = getDataMenu(option.options[i], switches, type);
      optionSwitches[option.options[i].key] = switches[option.options[i].key];
      options.appendChild(m);
      toggleSwitch.dependencies.push(m);
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${type}_${option.key}`)) {
      options.classList.remove('esgst-hidden');
    }
  }
  toggleSwitch.onEnabled = () => {
    if (options) {
      options.classList.remove('esgst-hidden');
    }
  };
  toggleSwitch.onDisabled = () => {
    if (options) {
      options.classList.add('esgst-hidden');
    }
  };
  return menu;
}
function getDataSizes(dm) {
  let spacePopup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
    addScrollable: true,
    icon: 'fa-circle-o-notch fa-spin',
    title: 'Calculating data sizes...'
  });
  spacePopup.open(manageData.bind(null, dm, STORAGE_TYPES.COMPUTER, spacePopup));
}
async function loadImportFile(dm, storageType, space, callback) {
  switch (storageType) {
    case STORAGE_TYPES.DROPBOX:
      _CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].manage(_CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].DROPBOX, null, dm, callback);
      break;
    case STORAGE_TYPES.GOOGLE_DRIVE:
      _CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].manage(_CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].GOOGLEDRIVE, null, dm, callback);
      break;
    case STORAGE_TYPES.ONEDRIVE:
      _CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].manage(_CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].ONEDRIVE, null, dm, callback);
      break;
    case STORAGE_TYPES.COMPUTER:
      {
        let fileField, warningNode;
        const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
          isTemp: true
        });
        popup.setScrollable(_class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
          type: "file",
          ref: ref => fileField = ref
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "esgst-description esgst-warning",
          ref: ref => warningNode = ref
        })));
        popup.onCloseByUser = callback;
        const cb = () => {
          popup.close();
          callback();
        };
        fileField.addEventListener('change', () => {
          const file = fileField.files[0];
          if (file) {
            dm.reader = new FileReader();
            const isZip = file.name.match(/\.zip$/);
            dm.reader.onload = async () => {
              try {
                await readImportFile(dm, STORAGE_TYPES.COMPUTER, space, isZip, cb);
              } catch (err) {
                _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createFadeMessage(warningNode, 'Cannot parse file!');
              }
            };
            if (isZip) {
              dm.reader.readAsBinaryString(file);
            } else {
              dm.reader.readAsText(file);
            }
          } else {
            _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createFadeMessage(warningNode, 'No file was loaded!');
          }
        });
        popup.open();
        break;
      }
    case STORAGE_TYPES.TEXT:
      {
        let dataField, warningNode;
        const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
          isTemp: true
        });
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popup.description, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("textarea", {
          className: "esgst-textarea-large",
          style: {
            width: '900px'
          },
          ref: ref => dataField = ref
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "esgst-description esgst-warning",
          ref: ref => warningNode = ref
        })));
        popup.onCloseByUser = callback;
        const cb = () => {
          popup.close();
          callback();
        };
        _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create({
          template: 'success',
          name: 'Restore',
          onClick: () => {
            const data = dataField.value;
            if (data) {
              try {
                dm.data = JSON.parse(data);
                _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createConfirmation('Are you sure you want to restore the selected data?', manageData.bind(null, dm, storageType, space, cb), cb);
              } catch (err) {
                _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createFadeMessage(warningNode, 'Cannot parse data! Data should be in JSON format.');
              }
            } else {
              _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createFadeMessage(warningNode, 'No data was provided!');
            }
          }
        }).insert(popup.description, 'beforeend');
        popup.open();
        break;
      }
  }
}
async function readImportFile(dm, storageType, space, isZip, callback) {
  if (dm.reader) {
    dm.data = JSON.parse(isZip ? (await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.readZip(dm.reader.result))[0].value : dm.reader.result);
  }
  _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createConfirmation('Are you sure you want to restore the selected data?', manageData.bind(null, dm, storageType, space, callback), callback);
}
function confirmDataDeletion(dm, storageType, space, callback) {
  _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createConfirmation('Are you sure you want to delete the selected data?', manageData.bind(null, dm, storageType, space, callback), callback);
}
function loadDataManagement(type, isPopup, callback) {
  console.log(type, isPopup, callback);
  let containerr, context, group1, group2, i, n, onClick, option, prep, section, title1, title2;
  let dm = {
    autoBackup: callback && _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.parameters.autoBackup,
    type: type
  };
  dm[type] = true;
  switch (type) {
    case 'import':
      onClick = loadImportFile.bind(null);
      prep = 'from';
      title1 = 'Restore';
      title2 = 'Restoring';
      dm.pastTense = 'restored';
      break;
    case 'export':
      onClick = manageData.bind(null);
      prep = 'to';
      title1 = 'Backup';
      title2 = 'Backing up';
      dm.pastTense = 'backed up';
      break;
    case 'delete':
      onClick = confirmDataDeletion.bind(null);
      prep = 'from';
      title1 = 'Delete';
      title2 = 'Deleting';
      dm.pastTense = 'deleted';
      break;
  }
  let popup = null;
  if (!dm.autoBackup) {
    if (isPopup) {
      popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
        addScrollable: 'left',
        settings: true,
        isTemp: true
      });
      containerr = popup.description;
      context = popup.scrollable;
    } else {
      context = containerr = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.sidebar.nextElementSibling;
      context.setAttribute('data-esgst-popup', 'true');
      context.innerHTML = '';
    }
    containerr.classList.add('esgst-text-left');
    const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_14__["PageHeading"].create('storage', [{
      name: 'ESGST',
      url: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.settingsUrl
    }, {
      name: title1,
      url: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst[`${title1.toLowerCase()}Url`]
    }]).insert(containerr, 'afterbegin').nodes.outer;
    if (!isPopup) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.mainPageHeading = heading;
    }
    dm.computerSpace = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createElements(containerr, 'beforeend', [{
      type: 'div',
      children: [{
        text: `Total: `,
        type: 'node'
      }, {
        attributes: {
          class: 'esgst-bold'
        },
        type: 'span'
      }, {
        attributes: {
          class: 'esgst-clickable fa fa-refresh',
          title: 'Calculate/refresh data sizes'
        },
        type: 'i'
      }]
    }]);
    dm.computerSpaceCount = dm.computerSpace.firstElementChild;
    dm.computerSpaceCount.nextElementSibling.addEventListener('click', () => getDataSizes(dm));
    section = _Settings__WEBPACK_IMPORTED_MODULE_17__["settingsModule"].createMenuSection(context, null, 1, title1);
  }
  dm.switches = {};
  dm.options = [{
    check: true,
    key: 'decryptedGiveaways',
    name: 'Decrypted Giveaways'
  }, {
    check: true,
    key: 'discussions',
    name: 'Discussions',
    options: [{
      key: 'discussions_main',
      name: 'Main'
    }, {
      key: 'discussions_ct',
      name: 'Comment Tracker'
    }, {
      key: 'discussions_df',
      name: 'Discussion Filters'
    }, {
      key: 'discussions_dh',
      name: 'Discussion Highlighter'
    }, {
      key: 'discussions_dt',
      name: 'Discussion Tags'
    }, {
      key: 'discussions_gdttt',
      name: 'Giveaway/Discussion/Ticket/Trade Tracker'
    }, {
      key: 'discussions_tds',
      name: 'Thread Subscription'
    }, {
      key: 'discussions_pm',
      name: 'Puzzle Marker'
    }]
  }, {
    check: true,
    key: 'emojis',
    name: 'Emojis'
  }, {
    check: true,
    key: 'entries',
    name: 'Entries'
  }, {
    check: true,
    key: 'games',
    name: 'Games',
    options: [{
      key: 'games_main',
      name: 'Main'
    }, {
      key: 'games_egh',
      name: 'Entered Game Highlighter'
    }, {
      key: 'games_gt',
      name: 'Game Tags'
    }, {
      key: 'games_itadi',
      name: 'IsThereAnyDeal Info'
    }]
  }, {
    check: true,
    key: 'giveaways',
    name: 'Giveaways',
    options: [{
      key: 'giveaways_main',
      name: 'Main'
    }, {
      key: 'giveaways_ct',
      name: 'Comment Tracker'
    }, {
      key: 'giveaways_gb',
      name: 'Giveaway Bookmarks'
    }, {
      key: 'giveaways_gdttt',
      name: 'Giveaway/Discussion/Ticket/Trade Tracker'
    }, {
      key: 'giveaways_gf',
      name: 'Giveaway Filters'
    }, {
      key: 'giveaways_ggl',
      name: 'Giveaway Group Loader'
    }]
  }, {
    check: true,
    key: 'groups',
    name: 'Groups',
    options: [{
      key: 'groups_main',
      name: 'Main'
    }, {
      key: 'groups_gpt',
      name: 'Group Tags'
    }, {
      key: 'groups_sgg',
      name: 'Stickied Giveaway Groups'
    }]
  }, {
    check: true,
    key: 'rerolls',
    name: 'Rerolls'
  }, {
    check: true,
    key: 'savedReplies',
    name: 'Saved Replies'
  }, {
    check: true,
    key: 'savedReplies_st',
    name: `Saved Replies (SteamTrades)`
  }, {
    check: true,
    key: 'settings',
    name: 'Settings'
  }, {
    check: true,
    key: 'sgCommentHistory',
    name: 'SG Comment History'
  }, {
    check: true,
    key: 'stickiedCountries',
    name: 'Stickied Giveaway Countries'
  }, {
    check: true,
    key: 'templates',
    name: 'Templates'
  }, {
    check: dm.export || dm.delete,
    key: 'customTheme',
    name: 'Custom Theme'
  }, {
    check: true,
    key: 'tickets',
    name: 'Tickets',
    options: [{
      key: 'tickets_main',
      name: 'Main'
    }, {
      key: 'tickets_ct',
      name: 'Comment Tracker'
    }, {
      key: 'tickets_gdttt',
      name: 'Giveaway/Discussion/Ticket/Trade Tracker'
    }]
  }, {
    check: true,
    key: 'trades',
    name: 'Trades',
    options: [{
      key: 'trades_main',
      name: 'Main'
    }, {
      key: 'trades_ct',
      name: 'Comment Tracker'
    }, {
      key: 'trades_tf',
      name: 'Trade Filters'
    }, {
      key: 'trades_gdttt',
      name: 'Giveaway/Discussion/Ticket/Trade Tracker'
    }, {
      key: 'trades_tds',
      name: 'Thread Subscription'
    }]
  }, {
    check: true,
    key: 'users',
    name: 'Users',
    options: [{
      key: 'users_main',
      name: 'Main'
    }, {
      key: 'users_cdr',
      name: 'Cake Day Reminder'
    }, {
      key: 'users_namwc',
      name: 'Not Activated/Multiple Win  Checker'
    }, {
      key: 'users_nrf',
      name: 'Not Received Finder'
    }, {
      key: 'users_uf',
      name: 'User Filters'
    }, {
      key: 'users_giveaways',
      name: 'Giveaways Data'
    }, {
      key: 'users_notes',
      name: 'User Notes'
    }, {
      key: 'users_tags',
      name: 'User Tags'
    }, {
      key: 'users_wbc',
      name: 'Whitelist/Blacklist Checker'
    }]
  }, {
    check: true,
    key: 'winners',
    name: 'Winners'
  }];
  if (dm.autoBackup) {
    let storageType;
    switch (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('autoBackup_index')) {
      case 0:
        storageType = STORAGE_TYPES.COMPUTER;
        break;
      case 1:
        storageType = STORAGE_TYPES.DROPBOX;
        break;
      case 2:
        storageType = STORAGE_TYPES.GOOGLE_DRIVE;
        break;
      case 3:
        storageType = STORAGE_TYPES.ONEDRIVE;
        break;
    }
    // noinspection JSIgnoredPromiseFromCall
    manageData(dm, storageType, false, async () => {
      _class_LocalStorage__WEBPACK_IMPORTED_MODULE_6__["LocalStorage"].delete('isBackingUp');
      await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setSetting('lastBackup', Date.now());
      callback();
    });
  } else {
    for (i = 0, n = dm.options.length; i < n; ++i) {
      option = dm.options[i];
      if (option.check) {
        section.lastElementChild.appendChild(getDataMenu(option, dm.switches, type));
      }
    }
    group2 = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createElements(containerr, 'beforeend', [{
      attributes: {
        class: 'esgst-button-group'
      },
      type: 'div',
      children: [{
        text: `${title1} ${prep}:`,
        type: 'span'
      }]
    }]);
    _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
      color: 'green',
      icons: ['fa-align-left'],
      name: 'Text',
      onClick: () => {
        return new Promise(async resolve => {
          if (dm.type !== 'export') {
            let result;
            switch (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('exportBackupIndex')) {
              case 0:
                result = true;
                break;
              case 1:
                result = await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['dropbox']]);
                break;
              case 2:
                result = await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['googleDrive']]);
                break;
              case 3:
                result = await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['oneDrive']]);
                break;
            }
            if (!result) {
              resolve();
              return;
            }
          }
          onClick(dm, STORAGE_TYPES.TEXT, false, () => {
            // noinspection JSIgnoredPromiseFromCall
            manageData(dm, STORAGE_TYPES.COMPUTER, true);
            resolve();
          });
        });
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: title2
    }]).insert(group2, 'beforeend');
    const computerButton = _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
      color: 'green',
      icons: ['fa-desktop'],
      name: 'Computer',
      onClick: () => {
        return new Promise(async resolve => {
          if (dm.type !== 'export') {
            let result;
            switch (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('exportBackupIndex')) {
              case 0:
                result = true;
                break;
              case 1:
                result = await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['dropbox']]);
                break;
              case 2:
                result = await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['googleDrive']]);
                break;
              case 3:
                result = await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['oneDrive']]);
                break;
            }
            if (!result) {
              resolve();
              return;
            }
          }
          onClick(dm, STORAGE_TYPES.COMPUTER, false, () => {
            // noinspection JSIgnoredPromiseFromCall
            manageData(dm, STORAGE_TYPES.COMPUTER, true);
            resolve();
          });
        });
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: title2
    }]).insert(group2, 'beforeend');
    let dropboxButton;
    let googleDriveButton;
    let oneDriveButton;
    if (type !== 'delete') {
      dropboxButton = _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
        color: 'green',
        icons: ['fa-dropbox'],
        name: 'Dropbox',
        onClick: () => {
          return new Promise(async resolve => {
            if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['dropbox']]))) {
              resolve();
              return;
            }
            onClick(dm, STORAGE_TYPES.DROPBOX, false, () => {
              // noinspection JSIgnoredPromiseFromCall
              manageData(dm, STORAGE_TYPES.COMPUTER, true);
              resolve();
            });
          });
        }
      }, {
        template: 'loading',
        isDisabled: true,
        name: title2
      }]).insert(group2, 'beforeend');
      googleDriveButton = _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
        color: 'green',
        icons: ['fa-google'],
        name: 'Google Drive',
        onClick: () => {
          return new Promise(async resolve => {
            if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['googleDrive']]))) {
              resolve();
              return;
            }
            onClick(dm, STORAGE_TYPES.GOOGLE_DRIVE, false, () => {
              // noinspection JSIgnoredPromiseFromCall
              manageData(dm, STORAGE_TYPES.COMPUTER, true);
              resolve();
            });
          });
        }
      }, {
        template: 'loading',
        isDisabled: true,
        name: title2
      }]).insert(group2, 'beforeend');
      oneDriveButton = _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
        color: 'green',
        icons: ['fa-windows'],
        name: 'OneDrive',
        onClick: () => {
          return new Promise(async resolve => {
            if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['oneDrive']]))) {
              resolve();
              return;
            }
            onClick(dm, STORAGE_TYPES.ONEDRIVE, false, () => {
              // noinspection JSIgnoredPromiseFromCall
              manageData(dm, STORAGE_TYPES.COMPUTER, true);
              resolve();
            });
          });
        }
      }, {
        template: 'loading',
        isDisabled: true,
        name: title2
      }]).insert(group2, 'beforeend');
    }
    if (type === 'import' || type === 'delete') {
      if (type === 'import') {
        new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](containerr, 'importAndMerge', false, 'Merge', false, false, 'Merges the current data with the backup instead of replacing it.', _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('importAndMerge'));
      }
      let select = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](containerr, 'exportBackup', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Backup to", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("select", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("option", null, "Computer"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("option", null, "Dropbox"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("option", null, "Google Drive"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("option", null, "OneDrive"))), false, false, 'Backs up the current data to one of the selected places before restoring another backup.', _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('exportBackup')).name.firstElementChild;
      select.selectedIndex = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('exportBackupIndex');
      select.addEventListener('change', () => {
        // noinspection JSIgnoredPromiseFromCall
        _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setSetting('exportBackupIndex', select.selectedIndex);
      });
    }
    if (type === 'export') {
      const input = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](containerr, 'deleteOldBackups', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Delete backups older than", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
        className: "esgst-switch-input",
        type: "number",
        value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('deleteOldBackups_days')
      }), ' ', "days when backing up to the cloud."), false, false, '', _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('deleteOldBackups')).name.firstElementChild;
      _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.observeNumChange(input, 'deleteOldBackups_days', true);
    }
    if (type === 'import' || type === 'export') {
      _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.observeChange(new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](containerr, 'usePreferredGoogle', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Use preferred Google account:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
        className: "esgst-switch-input esgst-switch-input-large",
        placeholder: "example@gmail.com",
        type: "text"
      }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
        className: "esgst-bold esgst-clickable",
        onclick: () => window.alert(_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('preferredGoogle') || 'No email address defined')
      }, "Reveal")), false, false, `With this option enabled, you will not be prompted to select an account when restoring/backing up to Google Drive. The account associated with the email address entered here will be automatically selected if you're already logged in. For security purposes, the email address will not be visible if you re-open the menu. After that, you have to click on "Reveal" to see it.`, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('usePreferredGoogle')).name.firstElementChild, 'preferredGoogle', true);
      _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.observeChange(new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](containerr, 'usePreferredMicrosoft', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Use preferred Microsoft account:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
        className: "esgst-switch-input esgst-switch-input-large",
        placeholder: "example@outlook.com",
        type: "text"
      }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
        className: "esgst-bold esgst-clickable",
        onclick: () => window.alert(_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('preferredMicrosoft') || 'No email address defined')
      }, "Reveal")), false, false, `With this option enabled, you will not be prompted to select an account when restoring/backing up to OneDrive. The account associated with the email address entered here will be automatically selected if you're already logged in. For security purposes, the email address will not be visible if you re-open the menu. After that, you have to click on "Reveal" to see it.`, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('usePreferredMicrosoft')).name.firstElementChild, 'preferredMicrosoft', true);
    }
    dm.message = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createElements(containerr, 'beforeend', [{
      attributes: {
        class: 'esgst-description'
      },
      type: 'div'
    }]);
    group1 = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createElements(containerr, 'beforeend', [{
      attributes: {
        class: 'esgst-button-group'
      },
      type: 'div',
      children: [{
        text: `Select:`,
        type: 'span'
      }]
    }]);
    _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
      color: 'white',
      icons: ['fa-square'],
      name: 'All',
      onClick: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.selectSwitches.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common, dm.switches, 'enable', group1)
    }, {
      template: 'loading',
      isDisabled: true,
      name: ''
    }]).insert(group1, 'beforeend');
    _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
      color: 'white',
      icons: ['fa-square-o'],
      name: 'None',
      onClick: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.selectSwitches.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common, dm.switches, 'disable', group1)
    }, {
      template: 'loading',
      isDisabled: true,
      name: ''
    }]).insert(group1, 'beforeend');
    _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
      color: 'white',
      icons: ['fa-plus-square-o'],
      name: 'Inverse',
      onClick: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.selectSwitches.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common, dm.switches, 'toggle', group1)
    }, {
      template: 'loading',
      isDisabled: true,
      name: ''
    }]).insert(group1, 'beforeend');
    if (isPopup) {
      popup.open();
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`calculate${_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.capitalizeFirstLetter(type)}`)) {
      getDataSizes(dm);
    }
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.parameters.esgst === 'backup' && _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.parameters.autoBackupIndex) {
      switch (parseInt(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.parameters.autoBackupIndex)) {
        case 0:
          computerButton.onClick();
          break;
        case 1:
          dropboxButton.onClick();
          break;
        case 2:
          googleDriveButton.onClick();
          break;
        case 3:
          oneDriveButton.onClick();
          break;
      }
    }
  }
}
function loadDataCleaner(isPopup) {
  let containerr = null;
  let context = null;
  if (isPopup) {
    const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
      addScrollable: 'left',
      settings: true,
      isTemp: true
    });
    containerr = popup.description;
    context = popup.scrollable;
    popup.open();
  } else {
    containerr = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.sidebar.nextElementSibling;
    containerr.innerHTML = '';
    context = containerr;
    context.setAttribute('data-esgst-popup', 'true');
  }
  const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_14__["PageHeading"].create('storage', [{
    name: 'ESGST',
    url: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.settingsUrl
  }, {
    name: 'Clean',
    url: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.cleanUrl
  }]).insert(containerr, 'afterbegin').nodes.outer;
  if (!isPopup) {
    _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.mainPageHeading = heading;
  }
  _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createElements(context, 'beforeend', [{
    attributes: {
      class: 'esgst-bold esgst-description esgst-red'
    },
    text: 'Make sure to backup your data before using the cleaner.',
    type: 'div'
  }]);
  _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.observeNumChange(new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](context, 'cleanDiscussions', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Discussions data older than", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
    className: "esgst-switch-input",
    type: "text",
    value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanDiscussions_days')
  }), ' ', "days."), false, false, `Discussions data only started being date-tracked since v7.11.0, so not all old data may be cleaned.`, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanDiscussions')).name.firstElementChild, 'cleanDiscussions_days', true);
  _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.observeNumChange(new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](context, 'cleanEntries', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Entries data older than", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
    className: "esgst-switch-input",
    type: "text",
    value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanEntries_days')
  }), ' ', "days."), false, false, '', _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanEntries')).name.firstElementChild, 'cleanEntries_days', true);
  _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.observeNumChange(new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](context, 'cleanGiveaways', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Giveaways data older than", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
    className: "esgst-switch-input",
    type: "text",
    value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanGiveaways_days')
  }), ' ', "days."), false, false, `Some giveaways data only started being date-tracked since v7.11.0, so not all old data may be cleaned.`, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanGiveaways')).name.firstElementChild, 'cleanGiveaways_days', true);
  _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.observeNumChange(new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](context, 'cleanSgCommentHistory', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "SteamGifts comment history data older than", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
    className: "esgst-switch-input",
    type: "text",
    value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanSgCommentHistory_days')
  }), ' ', "days."), false, false, '', _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanSgCommentHistory')).name.firstElementChild, 'cleanSgCommentHistory_days', true);
  _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.observeNumChange(new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](context, 'cleanTickets', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Tickets data older than", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
    className: "esgst-switch-input",
    type: "text",
    value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanTickets_days')
  }), ' ', "days."), false, false, `Tickets data only started being date-tracked since v7.11.0, so not all old data may be cleaned.`, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanTickets')).name.firstElementChild, 'cleanTickets_days', true);
  _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.observeNumChange(new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](context, 'cleanTrades', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Trades data older than", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
    className: "esgst-switch-input",
    type: "text",
    value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanTrades_days')
  }), ' ', "days."), false, false, `Trades data only started being date-tracked since v7.11.0, so not all old data may be cleaned.`, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanTrades')).name.firstElementChild, 'cleanTrades_days', true);
  new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](context, 'cleanDuplicates', false, 'Duplicate data.', false, false, 'Cleans up any duplicate data it finds.', _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanDuplicates'));
  _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
    template: 'success',
    name: 'Clean',
    onClick: async () => {
      const dm = {};
      dm.options = [{
        check: true,
        key: 'decryptedGiveaways',
        name: 'Decrypted Giveaways'
      }, {
        check: true,
        key: 'discussions',
        name: 'Discussions',
        options: [{
          key: 'discussions_main',
          name: 'Main'
        }, {
          key: 'discussions_ct',
          name: 'Comment Tracker'
        }, {
          key: 'discussions_df',
          name: 'Discussion Filters'
        }, {
          key: 'discussions_dh',
          name: 'Discussion Highlighter'
        }, {
          key: 'discussions_dt',
          name: 'Discussion Tags'
        }, {
          key: 'discussions_gdttt',
          name: 'Giveaway/Discussion/Ticket/Trade Tracker'
        }, {
          key: 'discussions_tds',
          name: 'Thread Subscription'
        }, {
          key: 'discussions_pm',
          name: 'Puzzle Marker'
        }]
      }, {
        check: true,
        key: 'emojis',
        name: 'Emojis'
      }, {
        check: true,
        key: 'entries',
        name: 'Entries'
      }, {
        check: true,
        key: 'games',
        name: 'Games',
        options: [{
          key: 'games_main',
          name: 'Main'
        }, {
          key: 'games_egh',
          name: 'Entered Game Highlighter'
        }, {
          key: 'games_gt',
          name: 'Game Tags'
        }, {
          key: 'games_itadi',
          name: 'IsThereAnyDeal Info'
        }]
      }, {
        check: true,
        key: 'giveaways',
        name: 'Giveaways',
        options: [{
          key: 'giveaways_main',
          name: 'Main'
        }, {
          key: 'giveaways_ct',
          name: 'Comment Tracker'
        }, {
          key: 'giveaways_gb',
          name: 'Giveaway Bookmarks'
        }, {
          key: 'giveaways_gdttt',
          name: 'Giveaway/Discussion/Ticket/Trade Tracker'
        }, {
          key: 'giveaways_gf',
          name: 'Giveaway Filters'
        }, {
          key: 'giveaways_ggl',
          name: 'Giveaway Group Loader'
        }]
      }, {
        check: true,
        key: 'groups',
        name: 'Groups',
        options: [{
          key: 'groups_main',
          name: 'Main'
        }, {
          key: 'groups_gpt',
          name: 'Group Tags'
        }, {
          key: 'groups_sgg',
          name: 'Stickied Giveaway Groups'
        }]
      }, {
        check: true,
        key: 'rerolls',
        name: 'Rerolls'
      }, {
        check: true,
        key: 'savedReplies',
        name: 'Saved Replies'
      }, {
        check: true,
        key: 'savedReplies_st',
        name: `Saved Replies (SteamTrades)`
      }, {
        check: true,
        key: 'settings',
        name: 'Settings'
      }, {
        check: true,
        key: 'sgCommentHistory',
        name: 'SG Comment History'
      }, {
        check: true,
        key: 'stickiedCountries',
        name: 'Stickied Giveaway Countries'
      }, {
        check: true,
        key: 'templates',
        name: 'Templates'
      }, {
        check: true,
        key: 'tickets',
        name: 'Tickets',
        options: [{
          key: 'tickets_main',
          name: 'Main'
        }, {
          key: 'tickets_ct',
          name: 'Comment Tracker'
        }, {
          key: 'tickets_gdttt',
          name: 'Giveaway/Discussion/Ticket/Trade Tracker'
        }]
      }, {
        check: true,
        key: 'trades',
        name: 'Trades',
        options: [{
          key: 'trades_main',
          name: 'Main'
        }, {
          key: 'trades_ct',
          name: 'Comment Tracker'
        }, {
          key: 'trades_tf',
          name: 'Trade Filters'
        }, {
          key: 'trades_gdttt',
          name: 'Giveaway/Discussion/Ticket/Trade Tracker'
        }, {
          key: 'trades_tds',
          name: 'Thread Subscription'
        }]
      }, {
        check: true,
        key: 'users',
        name: 'Users',
        options: [{
          key: 'users_main',
          name: 'Main'
        }, {
          key: 'users_cdr',
          name: 'Cake Day Reminder'
        }, {
          key: 'users_namwc',
          name: 'Not Activated/Multiple Win  Checker'
        }, {
          key: 'users_nrf',
          name: 'Not Received Finder'
        }, {
          key: 'users_uf',
          name: 'User Filters'
        }, {
          key: 'users_giveaways',
          name: 'Giveaways Data'
        }, {
          key: 'users_notes',
          name: 'User Notes'
        }, {
          key: 'users_tags',
          name: 'User Tags'
        }, {
          key: 'users_wbc',
          name: 'Whitelist/Blacklist Checker'
        }]
      }, {
        check: true,
        key: 'winners',
        name: 'Winners'
      }];
      const oldSize = await manageData(dm, STORAGE_TYPES.COMPUTER, true);
      let currentTime = Date.now();
      let toSave = {};
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanDiscussions')) {
        let days = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanDiscussions_days') * 86400000;
        toSave.discussions = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('discussions', '{}'));
        for (let code in toSave.discussions) {
          if (toSave.discussions.hasOwnProperty(code)) {
            let item = toSave.discussions[code];
            if (item.author !== _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('username') && item.lastUsed && currentTime - item.lastUsed > days) {
              delete toSave.discussions[code];
            }
          }
        }
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanEntries')) {
        let days = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanEntries_days') * 86400000;
        let items = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('entries', '[]'));
        toSave.entries = [];
        items.forEach(item => {
          if (currentTime - item.timestamp <= days) {
            toSave.entries.push(item);
          }
        });
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanGiveaways')) {
        let days = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanGiveaways_days') * 86400000;
        toSave.giveaways = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('giveaways', '{}'));
        for (let code in toSave.giveaways) {
          if (toSave.giveaways.hasOwnProperty(code)) {
            let item = toSave.giveaways[code];
            if (item.creator !== _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('username') && (item.endTime && currentTime - item.endTime > days || item.lastUsed && currentTime - item.lastUsed > days)) {
              delete toSave.giveaways[code];
            }
          }
        }
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanSgCommentHistory')) {
        let days = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanSgCommentHistory_days') * 86400000;
        let items = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('sgCommentHistory', '[]'));
        toSave.sgCommentHistory = [];
        items.forEach(item => {
          if (currentTime - item.timestamp <= days) {
            toSave.sgCommentHistory.push(item);
          }
        });
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanTickets')) {
        let days = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanTickets_days') * 86400000;
        toSave.tickets = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('tickets', '{}'));
        for (let code in toSave.tickets) {
          if (toSave.tickets.hasOwnProperty(code)) {
            let item = toSave.tickets[code];
            if (item.author !== _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('username') && item.lastUsed && currentTime - item.lastUsed > days) {
              delete toSave.tickets[code];
            }
          }
        }
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanTrades')) {
        let days = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanTrades_days') * 86400000;
        toSave.trades = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('trades', '{}'));
        for (let code in toSave.trades) {
          if (toSave.trades.hasOwnProperty(code)) {
            let item = toSave.trades[code];
            if (item.author !== _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('username') && item.lastUsed && currentTime - item.lastUsed > days) {
              delete toSave.trades[code];
            }
          }
        }
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('cleanDuplicates')) {
        toSave.users = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('users', `{"steamIds":{},"users":{}}`));
        for (let id in toSave.users.users) {
          if (toSave.users.users.hasOwnProperty(id)) {
            let giveaways = toSave.users.users[id].giveaways;
            if (giveaways) {
              ['sent', 'won'].forEach(mainType => {
                ['apps', 'subs'].forEach(type => {
                  for (let code in giveaways[mainType][type]) {
                    if (giveaways[mainType][type].hasOwnProperty(code)) {
                      giveaways[mainType][type][code] = Array.from(/** @type {ArrayLike} */new Set(giveaways[mainType][type][code]));
                    }
                  }
                });
              });
            }
          }
        }
      }
      for (let key in toSave) {
        if (toSave.hasOwnProperty(key)) {
          toSave[key] = JSON.stringify(toSave[key]);
        }
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValues(toSave);
      const newSize = await manageData(dm, STORAGE_TYPES.COMPUTER, true);
      const successPopup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
        icon: 'fa-check',
        title: _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Success! The selected data was cleaned.", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null), "Size before cleaning:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
          className: "esgst-bold"
        }, _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(oldSize)), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null), "Size after cleaning:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
          className: "esgst-bold"
        }, _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(newSize)), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null), `${Math.round((100 - newSize / oldSize * 100) * 100) / 100}% reduction`)
      });
      successPopup.open();
    }
  }, {
    template: 'loading',
    isDisabled: true,
    name: 'Cleaning...'
  }]).insert(context, 'beforeend');
}
async function manageData(dm, storageType, space, callback) {
  console.log(dm.type, storageType, space, callback);
  let data = {};
  let totalSize = 0;
  let mainUsernameFound;
  if (!space) {
    if (dm.type === 'import') {
      const stringified = [];
      for (const key of Object.keys(dm.data)) {
        if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_15__["Utils"].is(dm.data[key], 'object') || Array.isArray(dm.data[key])) {
          dm.data[key] = JSON.stringify(dm.data[key]);
          stringified.push(key);
        }
      }
      await _class_PersistentStorage__WEBPACK_IMPORTED_MODULE_8__["persistentStorage"].upgrade(dm.data, dm.data.v, true);
      for (const key of stringified) {
        dm.data[key] = JSON.parse(dm.data[key]);
      }
    } else if (dm.type === 'export') {
      data.v = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('v');
    }
  }
  for (let i = 0, n = dm.options.length; i < n; i++) {
    let option = dm.options[i];
    let optionKey = option.key;
    if (!option.check || !dm.autoBackup && !space && !_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}`)) {
      continue;
    }
    let values = null;
    let mainFound, mergedData, sizes;
    // noinspection FallThroughInSwitchStatementJS
    switch (optionKey) {
      case 'decryptedGiveaways':
      case 'settings':
        data[optionKey] = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, '{}'));
        if (!space) {
          if (dm.import) {
            let newData = dm.data[optionKey];
            if (newData) {
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('importAndMerge')) {
                mergedData = data[optionKey];
                for (let newDataKey in newData) {
                  if (newData.hasOwnProperty(newDataKey)) {
                    mergedData[newDataKey] = newData[newDataKey];
                  }
                }
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(mergedData));
              } else {
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(newData));
              }
            }
          } else if (dm.delete) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.delValue(optionKey);
          }
        }
        if (!dm.autoBackup) {
          let size = `{"${optionKey}":${_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, '{}')}}`.length;
          totalSize += size;
          if (dm.switches) {
            dm.switches[optionKey].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(size);
          }
        }
        break;
      case 'discussions':
        if (!values) {
          values = {
            main: ['lastUsed'],
            ct: ['count', 'readComments'],
            df: ['hidden'],
            dh: ['highlighted'],
            dt: ['tags'],
            gdttt: ['visited'],
            tds: ['name', 'subscribed'],
            pm: ['status']
          };
        }
      case 'giveaways':
        if (!values) {
          values = {
            main: ['code', 'comments', 'copies', 'creator', 'endTime', 'entries', 'gameId', 'gameName', 'gameSteamId', 'gameType', 'group', 'inviteOnly', 'lastUsed', 'level', 'numWinners', 'points', 'regionRestricted', 'started', 'startTime', 'whitelist', 'winners', 'v'],
            ct: ['count', 'readComments'],
            gb: ['bookmarked'],
            gdttt: ['visited'],
            gf: ['hidden'],
            ggl: ['groups']
          };
        }
      case 'tickets':
        if (!values) {
          values = {
            main: ['lastUsed'],
            ct: ['count', 'readComments'],
            gdttt: ['visited']
          };
        }
      case 'trades':
        if (!values) {
          values = {
            main: ['lastUsed'],
            ct: ['count', 'readComments'],
            tf: ['hidden'],
            gdttt: ['visited'],
            tds: ['name', 'subscribed']
          };
        }
        data[optionKey] = {};
        mergedData = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, '{}'));
        sizes = {
          ct: 0,
          df: 0,
          dh: 0,
          dt: 0,
          gb: 0,
          gdttt: 0,
          tds: 0,
          gf: 0,
          tf: 0,
          ggl: 0,
          main: 0,
          pm: 0,
          total: 0
        };
        mainFound = false;
        for (let mergedDataKey in mergedData) {
          if (mergedData.hasOwnProperty(mergedDataKey)) {
            let newData = {};
            let toDelete = 0;
            let foundSub = 0;
            let deletedSub = 0;
            let found = null;
            let toExport = false;
            for (let value in values) {
              if (values.hasOwnProperty(value)) {
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_${value}`)) {
                  toDelete += 1;
                }
                for (let j = 0, numValues = values[value].length; j < numValues; ++j) {
                  let valueKey = values[value][j];
                  let mergedDataValue = mergedData[mergedDataKey][valueKey];
                  if (typeof mergedDataValue !== 'undefined') {
                    if (value !== 'main') {
                      foundSub += 1;
                    }
                    if (dm.autoBackup || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_${value}`) || value === 'main') {
                      newData[valueKey] = mergedDataValue;
                      if (value !== 'main') {
                        toExport = true;
                      }
                    }
                    let size = `"${valueKey}":${JSON.stringify(mergedDataValue)},`.length;
                    sizes[value] += size;
                    sizes.total += size;
                    found = value;
                    if (!space && dm.delete && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_${value}`) && value !== 'main') {
                      deletedSub += 1;
                      delete mergedData[mergedDataKey][valueKey];
                    }
                  }
                }
              }
            }
            if (found) {
              sizes[found] -= 1;
              sizes.total -= 1;
            }
            if (dm.autoBackup || toExport || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_main`)) {
              data[optionKey][mergedDataKey] = newData;
              mainFound = true;
            }
            let size = `"${mergedDataKey}":{},`.length;
            sizes.main += size;
            sizes.total += size;
            if (!space && dm.delete && (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_main`) && foundSub === deletedSub || toDelete === Object.keys(values).length)) {
              delete mergedData[mergedDataKey];
            }
          }
        }
        if (!space) {
          if (dm.import) {
            let newData = dm.data[optionKey];
            if (newData) {
              for (let newDataKey in newData) {
                if (newData.hasOwnProperty(newDataKey)) {
                  if (!mergedData[newDataKey]) {
                    mergedData[newDataKey] = {};
                  }
                  for (let value in values) {
                    if (values.hasOwnProperty(value)) {
                      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_${value}`)) {
                        if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('importAndMerge')) {
                          for (let j = 0, numValues = values[value].length; j < numValues; ++j) {
                            let valueKey = values[value][j];
                            switch (valueKey) {
                              case 'tags':
                                if (mergedData[newDataKey].tags) {
                                  let tags = newData[newDataKey].tags;
                                  for (let k = 0, numTags = tags.length; k < numTags; ++k) {
                                    let tag = tags[k];
                                    if (mergedData[newDataKey].tags.indexOf(tag) < 0) {
                                      mergedData[newDataKey].tags.push(tag);
                                    }
                                  }
                                } else {
                                  mergedData[newDataKey].tags = newData[newDataKey].tags;
                                }
                                break;
                              case 'readComments':
                                if (mergedData[newDataKey].readComments) {
                                  for (let id in mergedData[newDataKey].readComments) {
                                    if (mergedData[newDataKey].readComments.hasOwnProperty(id)) {
                                      if (newData[newDataKey].readComments[id] > mergedData[newDataKey].readComments[id]) {
                                        mergedData[newDataKey].readComments[id] = newData[newDataKey].readComments[id];
                                      }
                                    }
                                  }
                                } else {
                                  mergedData[newDataKey].readComments = newData[newDataKey].readComments;
                                }
                                break;
                              default:
                                mergedData[newDataKey][valueKey] = newData[newDataKey][valueKey];
                                break;
                            }
                          }
                        } else {
                          for (let j = 0, numValues = values[value].length; j < numValues; ++j) {
                            let valueKey = values[value][j];
                            mergedData[newDataKey][valueKey] = newData[newDataKey][valueKey];
                          }
                        }
                      }
                    }
                  }
                }
              }
              await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(mergedData));
            }
          } else if (dm.delete) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(mergedData));
          }
        }
        if (mainFound) {
          sizes.main -= 1;
          sizes.total -= 1;
        }
        if (!dm.autoBackup) {
          let size = `{"${optionKey}":{}}`.length;
          sizes.main += size;
          sizes.total += size;
          if (dm.switches) {
            for (let value in values) {
              if (values.hasOwnProperty(value)) {
                if (dm.switches[`${optionKey}_${value}`]) {
                  dm.switches[`${optionKey}_${value}`].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(sizes[value]);
                }
              }
            }
            dm.switches[optionKey].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(sizes.total);
          }
          totalSize += sizes.total;
        }
        break;
      case 'customTheme':
        data.customTheme = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('customTheme', '');
        if (!space && dm.delete) {
          await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.delValue('customTheme');
        }
        if (!dm.autoBackup) {
          let size = data.customTheme.length;
          totalSize += size;
          if (dm.switches) {
            dm.switches[optionKey].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(size);
          }
        }
        break;
      case 'emojis':
        data.emojis = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('emojis', '[]'));
        if (!space) {
          if (dm.import) {
            let newData = JSON.stringify(dm.data.emojis);
            if (newData) {
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('importAndMerge')) {
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue('emojis', JSON.stringify(Array.from(new Set(data.emojis.concat(JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.fixEmojis(newData)))))));
              } else {
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue('emojis', _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.fixEmojis(newData));
              }
            }
          } else if (dm.delete) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.delValue('emojis');
          }
        }
        if (!dm.autoBackup) {
          let size = `{"${optionKey}":${_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, `"[]"`)}}`.length;
          totalSize += size;
          if (dm.switches) {
            dm.switches[optionKey].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(size);
          }
        }
        break;
      case 'entries':
      case 'templates':
      case 'savedReplies':
      case 'savedReplies_st':
        data[optionKey] = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, '[]'));
        if (!space) {
          if (dm.import) {
            let newData = dm.data[optionKey];
            if (newData) {
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('importAndMerge')) {
                let dataKey = optionKey === 'entries' ? 'timestamp' : 'name';
                mergedData = data[optionKey];
                for (let j = 0, numNew = newData.length; j < numNew; ++j) {
                  let newDataValue = newData[j];
                  let k, numMerged;
                  for (k = 0, numMerged = mergedData.length; k < numMerged && mergedData[k][dataKey] !== newDataValue[dataKey]; ++k) {}
                  if (k < numMerged) {
                    mergedData[k] = newDataValue;
                  } else {
                    mergedData.push(newDataValue);
                  }
                }
                if (optionKey === 'entries') {
                  mergedData = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_15__["Utils"].sortArray(mergedData, false, 'timestamp');
                }
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(mergedData));
              } else {
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(newData));
              }
            }
          } else if (dm.delete) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.delValue(optionKey);
          }
        }
        if (!dm.autoBackup) {
          let size = `{"${optionKey}":${_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, '[]')}}`.length;
          totalSize += size;
          if (dm.switches) {
            dm.switches[optionKey].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(size);
          }
        }
        break;
      case 'games':
        values = {
          main: ['apps', 'packages', 'reducedCV', 'noCV', 'hidden', 'ignored', 'owned', 'wishlisted', 'followed', 'sgId'],
          gt: ['tags'],
          egh: ['entered'],
          itadi: ['itadi']
        };
        data.games = {
          apps: {},
          subs: {}
        };
        mergedData = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('games', `{"apps":{},"subs":{}}`));
        sizes = {
          egh: 0,
          gt: 0,
          itadi: 0,
          main: 0,
          total: 0
        };
        mainFound = false;
        for (let mergedDataKey in mergedData.apps) {
          if (mergedData.apps.hasOwnProperty(mergedDataKey)) {
            let mergedDataValue = mergedData.apps[mergedDataKey];
            let newData = {};
            let toDelete = 0;
            let foundSub = 0;
            let deletedSub = 0;
            let found = null;
            let toExport = false;
            for (let value in values) {
              if (values.hasOwnProperty(value)) {
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_games_${value}`)) {
                  toDelete += 1;
                }
                for (let j = 0, numValues = values[value].length; j < numValues; ++j) {
                  let valueKey = values[value][j];
                  let newDataValue = mergedDataValue[valueKey];
                  if (typeof newDataValue !== 'undefined') {
                    if (value !== 'main') {
                      foundSub += 1;
                    }
                    if (dm.autoBackup || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_games_${value}`) || value === 'main') {
                      newData[valueKey] = newDataValue;
                      if (value !== 'main') {
                        toExport = true;
                      }
                    }
                    let size = `"${valueKey}":${JSON.stringify(newDataValue)},`.length;
                    sizes[value] += size;
                    sizes.total += size;
                    found = value;
                    if (!space && dm.delete && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_games_${value}`) && value !== 'main') {
                      deletedSub += 1;
                      delete mergedDataValue[valueKey];
                    }
                  }
                }
              }
            }
            if (found) {
              sizes[found] -= 1;
              sizes.total -= 1;
            }
            if (dm.autoBackup || toExport || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_main`)) {
              data.games.apps[mergedDataKey] = newData;
              mainFound = true;
            }
            let size = `"${mergedDataKey}":{},`.length;
            sizes.main += size;
            sizes.total += size;
            if (!space && dm.delete && (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_main`) && foundSub === deletedSub || toDelete === Object.keys(values).length)) {
              delete mergedData.apps[mergedDataKey];
            }
          }
        }
        if (mainFound) {
          sizes.main -= 1;
          sizes.total -= 1;
        }
        mainFound = false;
        for (let mergedDataKey in mergedData.subs) {
          if (mergedData.subs.hasOwnProperty(mergedDataKey)) {
            let mergedDataValue = mergedData.subs[mergedDataKey];
            let newData = {};
            let toDelete = 0;
            let foundSub = 0;
            let deletedSub = 0;
            let found = null;
            let toExport = false;
            for (let value in values) {
              if (values.hasOwnProperty(value)) {
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_games_${value}`)) {
                  toDelete += 1;
                }
                for (let j = 0, numValues = values[value].length; j < numValues; ++j) {
                  let valueKey = values[value][j];
                  let newDataValue = mergedDataValue[valueKey];
                  if (typeof newDataValue !== 'undefined') {
                    if (value !== 'main') {
                      foundSub += 1;
                    }
                    if (dm.autoBackup || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_games_${value}`) || value === 'main') {
                      newData[valueKey] = newDataValue;
                      if (value !== 'main') {
                        toExport = true;
                      }
                    }
                    let size = `"${valueKey}":${JSON.stringify(newDataValue)},`.length;
                    sizes[value] += size;
                    sizes.total += size;
                    found = value;
                    if (!space && dm.delete && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_games_${value}`) && value !== 'main') {
                      deletedSub += 1;
                      delete mergedDataValue[valueKey];
                    }
                  }
                }
              }
            }
            if (found) {
              sizes[found] -= 1;
              sizes.total -= 1;
            }
            if (dm.autoBackup || toExport || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_main`)) {
              data.games.subs[mergedDataKey] = newData;
              mainFound = true;
            }
            let size = `"${mergedDataKey}":{},`.length;
            sizes.main += size;
            sizes.total += size;
            if (!space && dm.delete && (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_main`) && foundSub === deletedSub || toDelete === Object.keys(values).length)) {
              delete mergedData.subs[mergedDataKey];
            }
          }
        }
        if (mainFound) {
          sizes.main -= 1;
          sizes.total -= 1;
        }
        if (!space) {
          if (dm.import) {
            let newData = dm.data.games;
            if (newData) {
              for (let newDataKey in newData.apps) {
                if (newData.apps.hasOwnProperty(newDataKey)) {
                  let newDataValue = newData.apps[newDataKey];
                  if (!mergedData.apps[newDataKey]) {
                    mergedData.apps[newDataKey] = {};
                  }
                  let mergedDataValue = mergedData.apps[newDataKey];
                  for (let value in values) {
                    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_games_${value}`)) {
                      for (let j = 0, numValues = values[value].length; j < numValues; ++j) {
                        let valueKey = values[value][j];
                        if (typeof newDataValue[valueKey] !== 'undefined') {
                          if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('importAndMerge')) {
                            switch (valueKey) {
                              case 'entered':
                                mergedDataValue.entered = true;
                                break;
                              case 'itadi':
                                if (mergedDataValue.itadi) {
                                  if (newDataValue.itadi.lastCheck > mergedDataValue.itadi.lastCheck) {
                                    mergedDataValue.itadi = newDataValue.itadi;
                                  }
                                } else {
                                  mergedDataValue.itadi = newDataValue.itadi;
                                }
                                break;
                              case 'tags':
                                if (mergedDataValue.tags) {
                                  let tags = newDataValue.tags;
                                  for (let k = 0, numTags = tags.length; k < numTags; ++k) {
                                    let tag = tags[k];
                                    if (mergedDataValue.tags.indexOf(tag) < 0) {
                                      mergedDataValue.tags.push(tag);
                                    }
                                  }
                                } else {
                                  mergedDataValue.tags = newDataValue.tags;
                                }
                                break;
                              default:
                                mergedDataValue[valueKey] = newDataValue[valueKey];
                                break;
                            }
                          } else {
                            mergedDataValue[valueKey] = newDataValue[valueKey];
                          }
                        }
                      }
                    }
                  }
                }
              }
              for (let newDataKey in newData.subs) {
                if (newData.subs.hasOwnProperty(newDataKey)) {
                  let newDataValue = newData.subs[newDataKey];
                  if (!mergedData.subs[newDataKey]) {
                    mergedData.subs[newDataKey] = {};
                  }
                  let mergedDataValue = mergedData.subs[newDataKey];
                  for (let value in values) {
                    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_games_${value}`)) {
                      for (let j = 0, numValues = values[value].length; j < numValues; ++j) {
                        let valueKey = values[value][j];
                        if (typeof newDataValue[valueKey] !== 'undefined') {
                          if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('importAndMerge')) {
                            switch (valueKey) {
                              case 'entered':
                                mergedDataValue.entered = true;
                                break;
                              case 'itadi':
                                if (mergedDataValue.itadi) {
                                  if (newDataValue.itadi.lastCheck > mergedDataValue.itadi.lastCheck) {
                                    mergedDataValue.itadi = newDataValue.itadi;
                                  }
                                } else {
                                  mergedDataValue.itadi = newDataValue.itadi;
                                }
                                break;
                              case 'tags':
                                if (mergedDataValue.tags) {
                                  let tags = newDataValue.tags;
                                  for (let k = 0, numTags = tags.length; k < numTags; ++k) {
                                    let tag = tags[k];
                                    if (mergedDataValue.tags.indexOf(tag) < 0) {
                                      mergedDataValue.tags.push(tag);
                                    }
                                  }
                                } else {
                                  mergedDataValue.tags = newDataValue.tags;
                                }
                                break;
                              default:
                                mergedDataValue[valueKey] = newDataValue[valueKey];
                                break;
                            }
                          } else {
                            mergedDataValue[valueKey] = newDataValue[valueKey];
                          }
                        }
                      }
                    }
                  }
                }
              }
              await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue('games', JSON.stringify(mergedData));
            }
          } else if (dm.delete) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue('games', JSON.stringify(mergedData));
          }
        }
        if (!dm.autoBackup) {
          let size = `{"${optionKey}":{"apps":{},"subs":{}}}`.length;
          sizes.main += size;
          sizes.total += size;
          if (dm.switches) {
            for (let value in values) {
              if (values.hasOwnProperty(value)) {
                if (dm.switches[`${optionKey}_${value}`]) {
                  dm.switches[`${optionKey}_${value}`].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(sizes[value]);
                }
              }
            }
            dm.switches[optionKey].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(sizes.total);
          }
          totalSize += sizes.total;
        }
        break;
      case 'groups':
        values = {
          main: ['avatar', 'code', 'member', 'name', 'steamId'],
          gpt: ['tags'],
          sgg: ['stickied']
        };
        mergedData = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, '[]'));
        if (!Array.isArray(mergedData)) {
          let temp = [];
          for (let key in mergedData) {
            if (mergedData.hasOwnProperty(key)) {
              temp.push(mergedData[key]);
            }
          }
          mergedData = temp;
        }
        data[optionKey] = [];
        sizes = {
          main: 0,
          gpt: 0,
          sgg: 0,
          total: 0
        };
        mainFound = false;
        for (let j = mergedData.length - 1; j > -1; --j) {
          let newData = {};
          let toDelete = 0;
          let foundSub = 0;
          let deletedSub = 0;
          let found = null;
          let toExport = false;
          for (let value in values) {
            if (values.hasOwnProperty(value)) {
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_${value}`)) {
                toDelete += 1;
              }
              for (let k = 0, numValues = values[value].length; k < numValues; ++k) {
                let valueKey = values[value][k];
                if (mergedData[j]) {
                  let mergedDataValue = mergedData[j][valueKey];
                  if (typeof mergedDataValue !== 'undefined') {
                    if (value !== 'main') {
                      foundSub += 1;
                    }
                    if (dm.autoBackup || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_${value}`) || value === 'main') {
                      newData[valueKey] = mergedDataValue;
                      if (value !== 'main') {
                        toExport = true;
                      }
                    }
                    let size = `"${valueKey}":${JSON.stringify(mergedDataValue)},`.length;
                    sizes[value] += size;
                    sizes.total += size;
                    found = value;
                    if (!space && dm.delete && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_${value}`) && value !== 'main') {
                      deletedSub += 1;
                      delete mergedData[j][valueKey];
                    }
                  }
                }
              }
            }
          }
          if (found) {
            sizes[found] -= 1;
            sizes.total -= 1;
          }
          if (dm.autoBackup || toExport || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_main`)) {
            data[optionKey].push(newData);
            mainFound = true;
          }
          let size = `{},`.length;
          sizes.main += size;
          sizes.total += size;
          if (!space && dm.delete && (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_main`) && foundSub === deletedSub || toDelete === Object.keys(values).length)) {
            mergedData.pop();
          }
        }
        if (mainFound) {
          sizes.main -= 1;
          sizes.total -= 1;
        }
        if (!space) {
          if (dm.import) {
            let newData = dm.data[optionKey];
            if (!Array.isArray(newData)) {
              let temp = [];
              for (let key in newData) {
                if (newData.hasOwnProperty(key)) {
                  temp.push(newData[key]);
                }
              }
              newData = temp;
            }
            if (newData) {
              for (let j = newData.length - 1; j > -1; --j) {
                let code = newData[j].code;
                let k, mergedDataValue;
                for (k = mergedData.length - 1; k > -1 && mergedData[k].code !== code; --k) {}
                if (k > -1) {
                  mergedDataValue = mergedData[k];
                } else {
                  mergedDataValue = {};
                  mergedData.push(mergedDataValue);
                }
                for (let value in values) {
                  if (values.hasOwnProperty(value)) {
                    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_${value}`)) {
                      for (let k = 0, numValues = values[value].length; k < numValues; ++k) {
                        let valueKey = values[value][k];
                        switch (valueKey) {
                          case 'tags':
                            if (mergedDataValue.tags) {
                              let tags = newData[j].tags;
                              for (let k = 0, numTags = tags.length; k < numTags; ++k) {
                                let tag = tags[k];
                                if (mergedDataValue.tags.indexOf(tag) < 0) {
                                  mergedDataValue.tags.push(tag);
                                }
                              }
                            } else {
                              mergedDataValue.tags = newData[j].tags;
                            }
                            break;
                          default:
                            mergedDataValue[valueKey] = newData[j][valueKey];
                            break;
                        }
                      }
                    }
                  }
                }
              }
              await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(mergedData));
            }
          } else if (dm.delete) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(mergedData));
          }
        }
        if (!dm.autoBackup) {
          let size = `{"${optionKey}":[]}`.length;
          sizes.main += size;
          sizes.total += size;
          if (dm.switches) {
            for (let value in values) {
              if (values.hasOwnProperty(value)) {
                if (dm.switches[`${optionKey}_${value}`]) {
                  dm.switches[`${optionKey}_${value}`].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(sizes[value]);
                }
              }
            }
            dm.switches[optionKey].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(sizes.total);
          }
          totalSize += sizes.total;
        }
        break;
      case 'rerolls':
      case 'stickiedCountries':
        data[optionKey] = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, '[]'));
        if (!space) {
          if (dm.import) {
            let newData = dm.data[optionKey];
            if (newData) {
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('importAndMerge')) {
                mergedData = data[optionKey];
                for (let j = 0, numNew = newData.length; j < numNew; ++j) {
                  let newDataValue = newData[j];
                  if (mergedData.indexOf(newDataValue) < 0) {
                    mergedData.push(newDataValue);
                  }
                }
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(mergedData));
              } else {
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(newData));
              }
            }
          } else if (dm.delete) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.delValue(optionKey);
          }
        }
        if (!dm.autoBackup) {
          let size = `{"${optionKey}":${_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, '[]')}}`.length;
          totalSize += size;
          if (dm.switches) {
            dm.switches[optionKey].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(size);
          }
        }
        break;
      case 'sgCommentHistory':
        data[optionKey] = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, '[]'));
        if (!space) {
          if (dm.import) {
            let newData = dm.data[optionKey];
            if (newData) {
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('importAndMerge')) {
                mergedData = [];
                let oldData = data[optionKey];
                let j = 0;
                let k = 0;
                let numNew = newData.length;
                let numOld = oldData.length;
                while (j < numOld && k < numNew) {
                  let oldDataValue = oldData[j];
                  let newDataValue = newData[k];
                  if (oldDataValue.timestamp > newDataValue.timestamp) {
                    mergedData.push(oldDataValue);
                    j += 1;
                  } else {
                    let l;
                    // noinspection JSUnusedAssignment
                    for (l = 0; l < numOld && oldData[l].id !== newDataValue.id; ++l) {}
                    // noinspection JSUnusedAssignment
                    if (l >= numOld) {
                      mergedData.push(newDataValue);
                    }
                    k += 1;
                  }
                }
                while (j < numOld) {
                  mergedData.push(oldData[j]);
                  j += 1;
                }
                while (k < numNew) {
                  let newDataValue = newData[k];
                  let l;
                  // noinspection JSUnusedAssignment
                  for (l = 0; l < numOld && oldData[l].id !== newDataValue.id; ++l) {}
                  // noinspection JSUnusedAssignment
                  if (l >= numOld) {
                    mergedData.push(newDataValue);
                  }
                  k += 1;
                }
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(mergedData));
              } else {
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue(optionKey, JSON.stringify(newData));
              }
            }
          } else if (dm.delete) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.delValue(optionKey);
          }
        }
        if (!dm.autoBackup) {
          let size = `{"${optionKey}":${_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, '[]')}}`.length;
          totalSize += size;
          if (dm.switches) {
            dm.switches[optionKey].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(size);
          }
        }
        break;
      case 'users':
        values = {
          main: ['whitelisted', 'whitelistedDate', 'blacklisted', 'blacklistedDate', 'steamFriend'],
          cdr: ['cdr', 'registrationDate'],
          giveaways: ['giveaways'],
          namwc: ['namwc'],
          notes: ['notes'],
          nrf: ['nrf'],
          tags: ['tags'],
          uf: ['uf'],
          wbc: ['wbc']
        };
        data.users = {
          steamIds: {},
          users: {}
        };
        mergedData = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('users', `{"steamIds":{},"users":{}}`));
        sizes = {
          cdr: 0,
          giveaways: 0,
          namwc: 0,
          notes: 0,
          nrf: 0,
          main: 0,
          tags: 0,
          total: 0,
          uf: 0,
          wbc: 0
        };
        mainFound = false;
        mainUsernameFound = false;
        for (let mergedDataKey in mergedData.users) {
          if (mergedData.users.hasOwnProperty(mergedDataKey)) {
            let mergedDataValue = mergedData.users[mergedDataKey];
            let newData = {};
            let toDelete = 0;
            let foundSub = 0;
            let deletedSub = 0;
            let found = null;
            let toExport = false;
            for (let value in values) {
              if (values.hasOwnProperty(value)) {
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_users_${value}`)) {
                  toDelete += 1;
                }
                for (let j = 0, numValues = values[value].length; j < numValues; ++j) {
                  let valueKey = values[value][j];
                  if (typeof mergedDataValue[valueKey] !== 'undefined') {
                    if (value !== 'main') {
                      foundSub += 1;
                    }
                    if (dm.autoBackup || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_users_${value}`) || value === 'main') {
                      newData[valueKey] = mergedDataValue[valueKey];
                      if (value !== 'main') {
                        toExport = true;
                      }
                    }
                    let size = `"${valueKey}":${JSON.stringify(mergedDataValue[valueKey])},`.length;
                    sizes[value] += size;
                    sizes.total += size;
                    found = value;
                    if (!space && dm.delete && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_users_${value}`) && value !== 'main') {
                      deletedSub += 1;
                      delete mergedDataValue[valueKey];
                    }
                  }
                }
              }
            }
            if (found) {
              sizes[found] -= 1;
              sizes.total -= 1;
            }
            let id = mergedDataValue.id;
            let username = mergedDataValue.username;
            let size = 0;
            if (id) {
              size += `"id":"${id}",`.length;
            }
            if (username) {
              size += `"username":"${username}","${username}":"${mergedDataKey}",`.length;
            }
            if (dm.autoBackup || toExport || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_main`)) {
              if (id) {
                newData.id = id;
              }
              if (username) {
                newData.username = username;
                data.users.steamIds[username] = mergedDataKey;
                mainUsernameFound = true;
              }
              data.users.users[mergedDataKey] = newData;
              mainFound = true;
            }
            size += `"${mergedDataKey}":{},`.length;
            sizes.main += size;
            sizes.total += size;
            if (!space && dm.delete && (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_${optionKey}_main`) && foundSub === deletedSub || toDelete === Object.keys(values).length)) {
              delete mergedData.steamIds[mergedDataValue.username];
              delete mergedData.users[mergedDataKey];
            }
          }
        }
        if (mainFound) {
          sizes.main -= 1;
          sizes.total -= 1;
        }
        if (mainUsernameFound) {
          sizes.main -= 1;
          sizes.total -= 1;
        }
        if (!space) {
          if (dm.import) {
            let newData = dm.data.users;
            if (newData) {
              for (let newDataKey in newData.users) {
                if (newData.users.hasOwnProperty(newDataKey)) {
                  let newDataValue = newData.users[newDataKey];
                  if (!mergedData.users[newDataKey]) {
                    mergedData.users[newDataKey] = {
                      id: newDataValue.id,
                      username: newDataValue.username
                    };
                    mergedData.steamIds[newDataValue.username] = newDataKey;
                  }
                  let mergedDataValue = mergedData.users[newDataKey];
                  for (let value in values) {
                    if (values.hasOwnProperty(value)) {
                      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get(`${dm.type}_users_${value}`)) {
                        for (let j = 0, numValues = values[value].length; j < numValues; ++j) {
                          let valueKey = values[value][j];
                          if (newDataValue[valueKey]) {
                            if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('importAndMerge')) {
                              switch (valueKey) {
                                case 'whitelisted':
                                case 'whitelistedDate':
                                case 'blacklisted':
                                case 'blacklistedDate':
                                case 'steamFriend':
                                  mergedDataValue[valueKey] = newDataValue[valueKey];
                                  break;
                                case 'notes':
                                  mergedDataValue.notes = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.removeDuplicateNotes(mergedDataValue.notes ? `${mergedDataValue.notes}\n\n${newDataValue.notes}` : newDataValue.notes);
                                  break;
                                case 'tags':
                                  if (mergedDataValue.tags) {
                                    let tags = newDataValue.tags;
                                    for (let k = 0, numTags = tags.length; k < numTags; ++k) {
                                      let tag = tags[k];
                                      if (mergedDataValue.tags.indexOf(tag) < 0) {
                                        mergedDataValue.tags.push(tag);
                                      }
                                    }
                                  } else {
                                    mergedDataValue.tags = newDataValue.tags;
                                  }
                                  break;
                                case 'giveaways':
                                  if (mergedDataValue.giveaways) {
                                    if (newDataValue.giveaways.wonTimestamp > mergedDataValue.giveaways.wonTimestamp) {
                                      mergedDataValue.giveaways.won = newDataValue.giveaways.won;
                                      mergedDataValue.giveaways.wonTimestamp = newDataValue.giveaways.wonTimestamp;
                                    }
                                    if (newDataValue.giveaways.sentTimestamp > mergedDataValue.giveaways.sentTimestamp) {
                                      mergedDataValue.giveaways.sent = newDataValue.giveaways.sent;
                                      mergedDataValue.giveaways.sentTimestamp = newDataValue.giveaways.sentTimestamp;
                                    }
                                  } else {
                                    mergedDataValue.giveaways = newDataValue.giveaways;
                                  }
                                  break;
                                default:
                                  if (mergedDataValue[valueKey] && mergedDataValue[valueKey].lastCheck) {
                                    if (newDataValue[valueKey].lastCheck > mergedDataValue[valueKey].lastCheck) {
                                      mergedDataValue[valueKey] = newDataValue[valueKey];
                                    }
                                  } else {
                                    mergedDataValue[valueKey] = newDataValue[valueKey];
                                  }
                                  break;
                              }
                            } else {
                              mergedDataValue[valueKey] = newDataValue[valueKey];
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
              await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue('users', JSON.stringify(mergedData));
            }
          } else if (dm.delete) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue('users', JSON.stringify(mergedData));
          }
        }
        if (!dm.autoBackup) {
          let size = `{"${optionKey}":{"steamIds":{},"users":{}}}`.length;
          sizes.main += size;
          sizes.total += size;
          if (dm.switches) {
            for (const value in values) {
              if (values.hasOwnProperty(value)) {
                if (dm.switches[`${optionKey}_${value}`]) {
                  dm.switches[`${optionKey}_${value}`].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(sizes[value]);
                }
              }
            }
            dm.switches[optionKey].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(sizes.total);
          }
          totalSize += sizes.total;
        }
        break;
      case 'winners':
        data.winners = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue('winners', '{}'));
        if (!space) {
          if (dm.import) {
            let newData = dm.data.winners;
            if (newData) {
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('importAndMerge')) {
                mergedData = data.winners;
                for (let newDataKey in newData) {
                  if (newData.hasOwnProperty(newDataKey)) {
                    if (!mergedData[newDataKey]) {
                      mergedData[newDataKey] = [];
                    }
                    for (let j = 0, numNew = newData[newDataKey].length; j < numNew; ++j) {
                      let newDataValue = newData[newDataKey][j];
                      if (mergedData[newDataKey].indexOf(newDataValue) < 0) {
                        mergedData[newDataKey].push(newDataValue);
                      }
                    }
                  }
                }
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue('winners', JSON.stringify(mergedData));
              } else {
                await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setValue('winners', JSON.stringify(newData));
              }
            }
          } else if (dm.delete) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.delValue('winners');
          }
        }
        if (!dm.autoBackup) {
          let size = `{"${optionKey}":${_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getValue(optionKey, '{}')}}`.length;
          totalSize += size;
          if (dm.switches) {
            dm.switches[optionKey].size.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(size);
          }
        }
        break;
      default:
        break;
    }
  }
  if (!dm.autoBackup && dm.computerSpaceCount) {
    dm.computerSpaceCount.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(totalSize);
  }
  if (space) {
    if (space.close) {
      space.close();
    }
    return totalSize;
  } else {
    if (dm.type === 'export' || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('exportBackup')) {
      if (storageType === STORAGE_TYPES.DROPBOX || dm.type !== 'export' && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('exportBackupIndex') === 1) {
        _CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].manage(_CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].DROPBOX, data, dm, callback);
      } else if (storageType === STORAGE_TYPES.GOOGLE_DRIVE || dm.type !== 'export' && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('exportBackupIndex') === 2) {
        _CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].manage(_CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].GOOGLEDRIVE, data, dm, callback);
      } else if (storageType === STORAGE_TYPES.ONEDRIVE || dm.type !== 'export' && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('exportBackupIndex') === 3) {
        _CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].manage(_CloudStorage__WEBPACK_IMPORTED_MODULE_16__["CloudStorage"].ONEDRIVE, data, dm, callback);
      } else if (storageType === STORAGE_TYPES.COMPUTER || dm.type !== 'export' && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('exportBackupIndex') === 0) {
        const name = `${_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('askFileName') ? window.prompt(`Enter the name of the file:`, `esgst_data_${new Date().toISOString().replace(/:/g, '_')}`) : `esgst_data_${new Date().toISOString().replace(/:/g, '_')}`}`;
        if (name === 'null') {
          callback();
          return;
        }
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('backupZip')) {
          await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.downloadZip(data, `${name}.json`, `${name}.zip`);
        } else {
          _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.downloadFile(JSON.stringify(data), `${name}.json`);
        }
        if (!dm.autoBackup) {
          _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createFadeMessage(dm.message, `Data ${dm.pastTense} with success!`);
        }
        callback();
      } else {
        const stringifiedData = JSON.stringify(data);
        const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
          isTemp: true
        });
        popup.setScrollable(_class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "markdown"
        }, _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getCopyIcon(stringifiedData), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("pre", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("code", null, stringifiedData))));
        popup.onClose = callback;
        popup.open();
      }
    } else {
      _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createFadeMessage(dm.message, `Data ${dm.pastTense} with success!`);
      callback();
    }
  }
}


/***/ }),
/* 248 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "persistentStorage", function() { return persistentStorage; });
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(146);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _components_Header__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(249);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(122);
/* harmony import */ var _modules_General_CustomHeaderFooterLinks__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(252);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(132);
/* harmony import */ var _LocalStorage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(96);
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(90);











class PersistentStorage {
  constructor() {
    this.currentVersion = 15;
    this.defaultValues = {
      decryptedGiveaways: '{}',
      delistedGames: '{ "banned": [], "removed": [] }',
      discussions: '{}',
      emojis: '[]',
      entries: '[]',
      games: '{ "apps": {}, "subs": {} }',
      gdtttCache: '{ "giveaways": [], "discussions": [], "tickets": [], "trades": [] }',
      giveaways: '{}',
      groups: '[]',
      requestLog: '[]',
      rerolls: '[]',
      rfiCache: '{}',
      settings: '{}',
      stickiedCountries: '[]',
      templates: '[]',
      tickets: '{}',
      trades: '{}',
      users: '{ "steamIds": {}, "users": {} }',
      winners: '{}'
    };
  }
  async upgrade(storage, version, isRestoring) {
    if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage)) {
      return;
    }
    const toDelete = [];
    const toSet = {};
    const manifest = await _browser__WEBPACK_IMPORTED_MODULE_10__["browser"].runtime.getManifest();
    if (Object.keys(storage).length === 0) {
      _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.isFirstRun = true;
      _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.currentVersion = manifest.version;
      await _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.setValue('currentVersion', _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.currentVersion);
    } else {
      _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.currentVersion = storage.currentVersion;
      if (_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.currentVersion !== manifest.version) {
        _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.isUpdate = true;
        _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.previousVersion = _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.currentVersion;
        _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.currentVersion = manifest.version;
        await _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.setValue('currentVersion', _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.currentVersion);
      }
    }
    _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.versionName = manifest.version_name || manifest.version;
    version = version || 1;
    if (version < 2) {
      window.console.log('Upgrading storage to version 2...');
      if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.delistedGames)) {
        toSet.delistedGames = this.defaultValues.delistedGames;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.emojis)) {
        const fixedEmojis = _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.fixEmojis(storage.emojis);
        if (storage.emojis !== fixedEmojis) {
          toSet.emojis = fixedEmojis;
        } else if (!storage.emojis) {
          toSet.emojis = this.defaultValues.emojis;
        }
      } else {
        toDelete.push('Emojis');
        toSet.emojis = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.Emojis) ? _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.fixEmojis(storage.Emojis) : this.defaultValues.emojis;
      }
      if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.games)) {
        toSet.games = this.defaultValues.games;
      }
      if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage[`${_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.name}RfiCache`])) {
        toSet[`${_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.name}RfiCache`] = _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('replies', this.defaultValues.rfiCache);
        _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('replies');
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.users)) {
        let usersChanged = false;
        const users = JSON.parse(storage.users);
        for (const key of Object.keys(users.users)) {
          const wbc = users.users[key].wbc;
          if (wbc && wbc.result && wbc.result !== 'whitelisted' && wbc.result !== 'blacklisted') {
            delete users.users[key].wbc;
            usersChanged = true;
          }
        }
        if (usersChanged) {
          toSet.users = JSON.stringify(users);
        }
      } else {
        toSet.users = this.defaultValues.users;
      }
      if (_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.sg) {
        if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.decryptedGiveaways)) {
          if (typeof storage.decryptedGiveaways !== 'string') {
            toSet.decryptedGiveaways = JSON.stringify(storage.decryptedGiveaways);
          }
        } else {
          toSet.decryptedGiveaways = this.defaultValues.decryptedGiveaways;
        }
        if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.discussions)) {
          toSet.discussions = _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('discussions', this.defaultValues.discussions);
          _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('discussions');
        }
        if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.entries)) {
          toSet.entries = _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('entries', this.defaultValues.entries);
          _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('entries');
        }
        if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.giveaways)) {
          toSet.giveaways = _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('giveaways', this.defaultValues.giveaways);
          _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('giveaways');
        }
        if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.groups)) {
          toSet.groups = _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('groups', this.defaultValues.groups);
          _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('groups');
        }
        if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.rerolls)) {
          toSet.rerolls = _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('rerolls', this.defaultValues.rerolls);
          _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('rerolls');
        }
        if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.stickiedCountries)) {
          toSet.stickiedCountries = _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('stickiedCountries', this.defaultValues.stickiedCountries);
          _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('stickiedCountries');
        }
        if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.templates)) {
          toSet.templates = _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('templates', this.defaultValues.templates);
          _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('templates');
        }
        if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.tickets)) {
          toSet.tickets = _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('tickets', this.defaultValues.tickets);
          _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('tickets');
        }
        if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.winners)) {
          toSet.winners = _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('winners', this.defaultValues.winners);
          _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('winners');
        }
        _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('dFix');
        _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('gFix');
        _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('tFix');
      } else {
        if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.trades)) {
          toSet.trades = _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('trades', this.defaultValues.trades);
          _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('trades');
        }
        _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].delete('tFix');
      }
      if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.settings)) {
        toSet.settings = this.defaultValues.settings;
        storage.settings = toSet.settings;
      }
      let settingsChanged = false;
      const settings = JSON.parse(storage.settings);
      if (settings.hasOwnProperty('avatar_sg')) {
        delete settings.avatar_sg;
        settingsChanged = true;
      }
      if (settings.hasOwnProperty('avatar_st')) {
        delete settings.avatar_st;
        settingsChanged = true;
      }
      if (settings.hasOwnProperty('username')) {
        delete settings.username;
        settingsChanged = true;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.filterPresets)) {
        const presets = (settings.gf_presets || _Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].defaultValues.gf_presets).concat(_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.modules.giveawaysGiveawayFilters.filters_convert(JSON.parse(storage.filterPresets)));
        settings.gf_presets = presets;
        settingsChanged = true;
        toDelete.push('filterPresets');
        toSet.old_gf_presets = storage.filterPresets;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage.dfPresets)) {
        const presets = (settings.df_presets || _Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].defaultValues.df_presets).concat(_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.modules.giveawaysGiveawayFilters.filters_convert(JSON.parse(storage.dfPresets)));
        settings.df_presets = presets;
        settingsChanged = true;
        toDelete.push('dfPresets');
        toSet.old_df_presets = storage.dfPresets;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.comments)) {
        delete settings.comments;
        settingsChanged = true;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.giveaways)) {
        delete settings.giveaways;
        settingsChanged = true;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.groups)) {
        delete settings.groups;
        settingsChanged = true;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.users)) {
        delete settings.users;
        settingsChanged = true;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.gc_categories_ids)) {
        if (!settings.gc_categories_ids.includes('gc_f')) {
          settings.gc_categories_ids.push('gc_f');
          settingsChanged = true;
        }
        if (!settings.gc_categories_ids.includes('gc_bvg')) {
          settings.gc_categories_ids.push('gc_bvg');
          settingsChanged = true;
        }
        if (!settings.gc_categories_ids.includes('gc_bd')) {
          settings.gc_categories_ids.push('gc_bd');
          settingsChanged = true;
        }
      }
      ['gc_categories', 'gc_categories_gv', 'gc_categories_ids'].forEach(key => {
        if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings[key])) {
          return;
        }
        const bkpLength = settings[key].length;
        settings[key] = Array.from(new Set(settings[key]));
        if (bkpLength !== settings[key].length) {
          settingsChanged = true;
        }
      });
      if (settings.elementOrdering !== '1') {
        if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.leftButtonIds)) {
          for (let i = settings.leftButtonIds.length - 1; i > -1; i--) {
            const id = settings.leftButtonIds[i];
            if (!settings[`hideButtons_${id}_sg`]) {
              if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.leftMainPageHeadingIds)) {
                settings.leftMainPageHeadingIds.push(id);
              }
              settings.leftButtonIds.splice(i, 1);
            } else if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.rightButtonsIds) && settings.rightButtonIds.includes(id)) {
              settings.leftButtonIds.splice(i, 1);
            }
          }
        }
        if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.rightButtonIds)) {
          for (let i = settings.rightButtonIds.length - 1; i > -1; i--) {
            const id = settings.rightButtonIds[i];
            if (!settings[`hideButtons_${id}_sg`]) {
              if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.rightMainPageHeadingIds)) {
                settings.rightMainPageHeadingIds.push(id);
              }
              settings.rightButtonIds.splice(i, 1);
            } else if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.leftButtonIds) && settings.leftButtonIds.includes(id)) {
              settings.rightButtonIds.splice(i, 1);
            }
          }
        }
        if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.leftMainPageHeadingIds)) {
          for (let i = settings.leftMainPageHeadingIds.length - 1; i > -1; i--) {
            const id = settings.leftMainPageHeadingIds[i];
            if (!settings[`hideButtons_${id}_sg`]) {
              if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.leftButtonIds)) {
                settings.leftButtonIds.push(id);
              }
              settings.leftMainPageHeadingIds.splice(i, 1);
            } else if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.rightMainPageHeadingIds) && settings.rightMainPageHeadingIds.includes(id)) {
              settings.leftMainPageHeadingIds.splice(i, 1);
            }
          }
        }
        if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.rightMainPageHeadingIds)) {
          for (let i = settings.rightMainPageHeadingIds.length - 1; i > -1; i--) {
            const id = settings.rightMainPageHeadingIds[i];
            if (!settings[`hideButtons_${id}_sg`]) {
              if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.rightButtonIds)) {
                settings.rightButtonIds.push(id);
              }
              settings.rightMainPageHeadingIds.splice(i, 1);
            } else if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.leftMainPageHeadingIds) && settings.leftMainPageHeadingIds.includes(id)) {
              settings.rightMainPageHeadingIds.splice(i, 1);
            }
          }
        }
        settings.leftButtonIds = Array.from(new Set(settings.leftButtonIds));
        settings.rightButtonIds = Array.from(new Set(settings.rightButtonIds));
        settings.leftMainPageHeadingIds = Array.from(new Set(settings.leftMainPageHeadingIds));
        settings.rightMainPageHeadingIds = Array.from(new Set(settings.rightMainPageHeadingIds));
        settings.elementOrdering = '1';
        settingsChanged = true;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.leftButtonIds) && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.rightButtonIds) && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.leftMainPageHeadingIds) && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.rightMainPageHeadingIds)) {
        [{
          id: 'cec',
          side: 'left'
        }, {
          id: 'esContinuous',
          side: 'right'
        }, {
          id: 'esNext',
          side: 'right'
        }, {
          id: 'glwc',
          side: 'left'
        }, {
          id: 'mm',
          side: 'right'
        }, {
          id: 'stbb',
          side: 'right'
        }, {
          id: 'sttb',
          side: 'right'
        }, {
          id: 'usc',
          side: 'left'
        }, {
          id: 'wbm',
          side: 'left'
        }, {
          id: 'df_s_s',
          side: 'left'
        }, {
          id: 'gf_s_s',
          side: 'left'
        }, {
          id: 'tf_s_s',
          side: 'left'
        }, {
          id: 'uf_s_s',
          side: 'left'
        }, {
          id: 'gmf',
          side: 'left'
        }].forEach(item => {
          if (!settings.leftButtonIds.includes(item.id) && !settings.rightButtonIds.includes(item.id) && !settings.leftMainPageHeadingIds.includes(item.id) && !settings.rightMainPageHeadingIds.includes(item.id)) {
            settings[`${item.side}MainPageHeadingIds`].push(item.id);
            settingsChanged = true;
          }
        });
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.chfl_discussions_sg)) {
        settings.chfl_discussions_sg = settings.chfl_discussions_sg.filter(x => (typeof x === 'string' && x || x.id) !== 'categorize-discussions');
        settingsChanged = true;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.chfl_footer_sg)) {
        const privacyPolicyIndex = settings.chfl_footer_sg.map((x, i) => (typeof x === 'string' && x || x.id) === 'privacy-policy' ? i : null).filter(x => _lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(x))[0];
        if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(privacyPolicyIndex)) {
          settings.chfl_footer_sg.splice(privacyPolicyIndex + 1, 0, 'cookie-policy');
        } else {
          settings.chfl_footer_sg.push('cookie-policy');
        }
        const termsOfServiceIndex = settings.chfl_footer_sg.map((x, i) => (typeof x === 'string' && x || x.id) === 'terms-of-service' ? i : null).filter(x => _lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(x))[0];
        if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(termsOfServiceIndex)) {
          settings.chfl_footer_sg.splice(termsOfServiceIndex + 1, 0, 'advertising');
        } else {
          settings.chfl_footer_sg.push('advertising');
        }
        settingsChanged = true;
      }
      if (settingsChanged) {
        toSet.settings = JSON.stringify(settings);
        storage.settings = toSet.settings;
      }
    }
    if (version < 3) {
      window.console.log('Upgrading storage to version 3...');
      let settingsChanged = false;
      const settings = JSON.parse(storage.settings);
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.chfl_discussions_sg)) {
        const index = settings.chfl_discussions_sg.indexOf('created');
        if (index > -1) {
          settings.chfl_discussions_sg.splice(index + 1, 0, 'bookmarked');
        } else {
          settings.chfl_discussions_sg.push('bookmarked');
        }
        settingsChanged = true;
      }
      if (settingsChanged) {
        toSet.settings = JSON.stringify(settings);
        storage.settings = toSet.settings;
      }
    }
    if (version < 4) {
      window.console.log('Upgrading storage to version 4...');
      let settingsChanged = false;
      const settings = JSON.parse(storage.settings);
      const keys = ['giveaways_sg', 'discussions_sg', 'support_sg', 'help_sg', 'account_sg', 'footer_sg', 'trades_st', 'account_st', 'footer_st'];
      for (const key of keys) {
        const source = key.match(/(.+?)_/)[1];
        if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings[`chfl_${key}`])) {
          settings[`chfl_${key}`] = settings[`chfl_${key}`].map(item => {
            if (item.id) {
              item.id = _components_Header__WEBPACK_IMPORTED_MODULE_4__["IHeader"].generateId(item.name);
            } else {
              item = _modules_General_CustomHeaderFooterLinks__WEBPACK_IMPORTED_MODULE_6__["generalCustomHeaderFooterLinks"].newIds[source][item] || item;
            }
            return item;
          });
          settingsChanged = true;
        }
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.chfl_account_st)) {
        const index = settings.chfl_account_st.indexOf('reviews');
        if (index > -1) {
          settings.chfl_account_st.splice(index + 1, 0, 'comments', 'settings');
        } else {
          settings.chfl_account_st.push('comments', 'settings');
        }
        settingsChanged = true;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.chfl_footer_st)) {
        let index = settings.chfl_footer_st.indexOf('privacyPolicy');
        if (index > -1) {
          settings.chfl_footer_st.splice(index + 1, 0, 'cookiePolicy');
        } else {
          settings.chfl_footer_st.push('cookiePolicy');
        }
        index = settings.chfl_footer_st.indexOf('termsOfService');
        if (index > -1) {
          settings.chfl_footer_st.splice(index + 1, 0, 'advertise');
        } else {
          settings.chfl_footer_st.push('advertise');
        }
        settingsChanged = true;
      }
      if (settingsChanged) {
        toSet.settings = JSON.stringify(settings);
        storage.settings = toSet.settings;
      }
    }
    if (version < 5) {
      window.console.log('Upgrading storage to version 5...');
      let settingsChanged = false;
      const settings = JSON.parse(storage.settings);
      if (settings.npth_nextRegex === 'forw|more|next|onwards|►|>|→') {
        settings.npth_nextRegex = 'forw|more|next|onwards?|►|>|→';
        settingsChanged = true;
      }
      if (settingsChanged) {
        toSet.settings = JSON.stringify(settings);
        storage.settings = toSet.settings;
      }
    }
    if (version < 7) {
      window.console.log('Upgrading storage to version 7...');
      if (storage.notifiedMessages) {
        toSet.notifiedMessages = JSON.stringify({
          lastCheck: 0,
          ids: JSON.parse(storage.notifiedMessages)
        });
      }
    }
    if (version < 8) {
      window.console.log('Upgrading storage to version 8...');
      let settingsChanged = false;
      const settings = JSON.parse(storage.settings);
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.chfl_giveaways_sg)) {
        const wishlistGiveawaysIndex = settings.chfl_giveaways_sg.map((x, i) => (typeof x === 'string' && x || x.id) === 'browseWishlistGiveaways' ? i : null).filter(x => _lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(x))[0];
        if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(wishlistGiveawaysIndex)) {
          settings.chfl_giveaways_sg.splice(wishlistGiveawaysIndex + 1, 0, {
            id: `browseFollowedGiveaways`,
            name: 'Browse Followed Giveaways',
            url: `/giveaways/search?esgst=fgp`
          });
        } else {
          settings.chfl_giveaways_sg.push({
            id: `browseFollowedGiveaways`,
            name: 'Browse Followed Giveaways',
            url: `/giveaways/search?esgst=fgp`
          });
        }
        settingsChanged = true;
      }
      if (settingsChanged) {
        toSet.settings = JSON.stringify(settings);
        storage.settings = toSet.settings;
      }
    }
    if (version < 9) {
      window.console.log('Upgrading storage to version 9...');
      let settingsChanged = false;
      const settings = JSON.parse(storage.settings);
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.chfl_discussions_sg)) {
        settings.chfl_discussions_sg = settings.chfl_discussions_sg.map(item => {
          if (typeof item === 'string') {
            return item;
          }
          if (item.id === 'browseOff') {
            item.name = 'Browse Off Topic';
            return item;
          }
          if (item.id === 'browsePuzzles') {
            item.name = 'Browse Puzzles / Events';
            item.url = '/discussions/puzzles-events';
            return item;
          }
          return item;
        });
        const newItems = [{
          reference: 'browseAnnouncements',
          position: 'before',
          item: {
            id: 'browseAddonsTools',
            name: 'Browse Add-ons / Tools',
            url: '/discussions/addons-tools'
          }
        }, {
          reference: 'browseDeals',
          position: 'after',
          item: {
            id: 'browseGameShowcase',
            name: 'Browse Game Showcase',
            url: '/discussions/game-showcase'
          }
        }, {
          reference: 'browseGroupRecruitment',
          position: 'after',
          items: [{
            id: 'browseHardware',
            name: 'Browse Hardware',
            url: '/discussions/hardware'
          }, {
            id: 'browseHelp',
            name: 'Browse Help',
            url: '/discussions/help'
          }]
        }, {
          reference: 'browseLet',
          position: 'after',
          item: {
            id: 'browseMoviesTv',
            name: 'Browse Movies / TV',
            url: '/discussions/movies-tv'
          }
        }, {
          reference: 'browseUncategorized',
          position: 'after',
          items: [{
            id: 'browseUserProjects',
            name: 'Browse User Projects',
            url: '/discussions/user-projects'
          }, {
            id: 'browseWhitelistRecruitment',
            name: 'Browse Whitelist / Recruitment',
            url: '/discussions/whitelist-recruitment'
          }]
        }];
        for (const item of newItems) {
          const index = settings.chfl_discussions_sg.map((x, i) => (typeof x === 'string' && x || x.id) === item.reference ? i : null).filter(x => _lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(x))[0];
          if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(index)) {
            settings.chfl_discussions_sg.splice(index + 1, 0, ...(item.item ? [item.item] : item.items));
          } else {
            settings.chfl_discussions_sg.push(...(item.item ? [item.item] : item.items));
          }
        }
        settingsChanged = true;
      }
      if (settingsChanged) {
        toSet.settings = JSON.stringify(settings);
        storage.settings = toSet.settings;
      }
    }
    if (version < 10) {
      window.console.log('Upgrading storage to version 10...');
      let settingsChanged = false;
      const settings = JSON.parse(storage.settings);
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.giveawayHeading)) {
        const index = settings.giveawayHeading.indexOf('steam');
        if (index > -1) {
          settings.giveawayHeading.splice(index + 1, 0, 'screenshots-videos');
        } else {
          settings.giveawayHeading.push('screenshots-videos');
        }
        settingsChanged = true;
      }
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.giveawayHeading_gv)) {
        const index = settings.giveawayHeading_gv.indexOf('steam');
        if (index > -1) {
          settings.giveawayHeading_gv.splice(index + 1, 0, 'screenshots-videos');
        } else {
          settings.giveawayHeading_gv.push('screenshots-videos');
        }
        settingsChanged = true;
      }
      if (settingsChanged) {
        toSet.settings = JSON.stringify(settings);
        storage.settings = toSet.settings;
      }
    }
    if (version < 11) {
      window.console.log('Upgrading storage to version 11...');
      let settingsChanged = false;
      const settings = JSON.parse(storage.settings);
      for (const key in settings) {
        if (!key.startsWith('gc_') || !key.endsWith('s_sg') && !key.endsWith('s_i_sg')) {
          continue;
        }
        const newKey = key.slice(0, -3);
        if (!(newKey in settings)) {
          settings[newKey] = typeof settings[key] === 'object' && 'enabled' in settings[key] ? settings[key].enabled : settings[key];
        }
        delete settings[key];
        settingsChanged = true;
      }
      if (settingsChanged) {
        toSet.settings = JSON.stringify(settings);
        storage.settings = toSet.settings;
      }
    }
    if (version < 12) {
      window.console.log('Upgrading storage to version 12...');
      let settingsChanged = false;
      const settings = JSON.parse(storage.settings);
      for (const key in settings) {
        if (!/^(sgDarkGrey|sgv2Dark|steamGiftiesBlack|steamTradiesBlackBlue)/.test(key)) {
          continue;
        }
        delete settings[key];
        settingsChanged = true;
      }
      if (settingsChanged) {
        toSet.settings = JSON.stringify(settings);
        storage.settings = toSet.settings;
      }
      toDelete.push('sgDarkGrey', 'sgv2Dark', 'steamGiftiesBlack', 'steamTradiesBlackBlue');
    }
    if (version < 13) {
      window.console.log('Upgrading storage to version 13...');
      toDelete.push('settingsAnalytics', 'notifiedMessages');
    }
    if (version < 14) {
      window.console.log('Upgrading storage to version 14...');
      let settingsChanged = false;
      const settings = JSON.parse(storage.settings);
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.chfl_footer_st)) {
        settings.chfl_footer_st.push('steamtrades', 'steamgifts');
        settingsChanged = true;
      }
      if (settingsChanged) {
        toSet.settings = JSON.stringify(settings);
        storage.settings = toSet.settings;
      }
    }
    if (version < 15) {
      window.console.log('Upgrading storage to version 15...');
      let settingsChanged = false;
      const settings = JSON.parse(storage.settings);
      if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(settings.chfl_discussions_sg)) {
        settings.chfl_discussions_sg = settings.chfl_discussions_sg.map(item => {
          if (typeof item === 'string') {
            return item;
          }
          if (item.id === 'browseAddonsTools') {
            item.id = 'browseAdd';
            return item;
          }
          if (item.id === 'browseOff') {
            item.id = 'browseOffTopic';
            return item;
          }
          if (item.id === 'browseMoviesTv') {
            item.id = 'browseMovies';
            return item;
          }
          if (item.id === 'browseWhitelistRecruitment') {
            item.id = 'browseWhitelist';
            return item;
          }
          console.log(item);
          return item;
        });
        settingsChanged = true;
      }
      if (settingsChanged) {
        toSet.settings = JSON.stringify(settings);
        storage.settings = toSet.settings;
      }
    }
    for (const key of Object.keys(toSet)) {
      storage[key] = toSet[key];
    }
    for (const key of Object.keys(this.defaultValues)) {
      if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_5__["Utils"].isSet(storage[key])) {
        toSet[key] = this.defaultValues[key];
        storage[key] = toSet[key];
      }
    }
    try {
      const emojis = JSON.parse(storage.emojis);
      if (typeof emojis === 'string') {
        toSet.emojis = emojis;
        storage.emojis = emojis;
      }
    } catch (e) {}
    const gdtttCache = JSON.parse(_LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('gdtttCache', this.defaultValues.gdtttCache));
    for (const type of Object.keys(gdtttCache)) {
      if (!storage[type]) {
        continue;
      }
      let doSet = false;
      const data = JSON.parse(storage[type]);
      for (const code of gdtttCache[type]) {
        if (!data[code]) {
          data[code] = {
            readComments: {}
          };
        }
        if (!data[code].visited) {
          data[code].visited = true;
          doSet = true;
        }
      }
      if (doSet) {
        toSet[type] = JSON.stringify(data);
        storage[type] = toSet[type];
      }
    }
    _LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].set('gdtttCache', this.defaultValues.gdtttCache);
    if (!isRestoring && version !== this.currentVersion) {
      if (Object.keys(toDelete).length > 0) {
        await _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.delValues(toDelete);
      }
      if (Object.keys(toSet).length > 0) {
        await _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.setValues(toSet);
      }
      await _Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.setValue('v', this.currentVersion);
    }
  }
}
const persistentStorage = new PersistentStorage();


/***/ }),
/* 249 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IHeader", function() { return IHeader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Header", function() { return Header; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(207);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(213);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(216);
/* harmony import */ var _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(214);
/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(250);











class IHeader {
  constructor() {
    /** @type {IHeaderNodes} */
    this.nodes = {
      inner: null,
      leftNav: null,
      nav: null,
      outer: null,
      rightNav: null
    };

    /** @type {Object<string, IHeaderButtonContainer>} */
    this.buttonContainers = {};
  }

  /**
   * @param {IHeaderButtonContainer} buttonContainer
   * @param {number} newCounter
   * @param {boolean} [isFlashing]
   */
  // eslint-disable-next-line no-unused-vars
  async updateCounter(buttonContainerId, newCounter, isFlashing) {}

  /**
   * @param {number|string} newPoints
   */
  // eslint-disable-next-line no-unused-vars
  async updatePoints(newPoints) {}

  /**
   * @param {ILevel} newLevel
   */
  // eslint-disable-next-line no-unused-vars
  async updateLevel(newLevel) {}

  /**
   * @param {string} newReputationText
   */
  // eslint-disable-next-line no-unused-vars
  async updateReputation(newReputationText) {}

  /**
   * @param {string} text
   * @returns {number}
   */
  static extractCounter(text) {
    return parseInt(text.replace(/,/g, ''));
  }

  /**
   * @param {string} text
   * @returns {ILevel}
   */
  static extractLevel(text) {
    const full = parseFloat(text.replace(/[^\d.]/g, ''));
    const base = Math.trunc(full);
    return {
      base,
      full
    };
  }

  /**
   * @param {string} text
   * @returns {number}
   */
  static extractPoints(text) {
    return parseInt(text.replace(/,/g, '').match(/\d+/)[0]);
  }

  /**
   * @param {string} text
   * @returns {IHeaderButtonContainerReputation}
   */
  static extractReputation(text) {
    const matches = text.match(/\(\+(.+?)\/-(.+?)\)/);
    return {
      positive: parseInt(matches[1].replace(/,/g, '')),
      negative: parseInt(matches[2].replace(/,/g, ''))
    };
  }

  /**
   * @param {string} string
   * @returns {string}
   */
  static generateId(name) {
    return name.replace(/[^A-Za-z\s].*/, '') // Only gets the name until a non-letter character
    .trim().split(' ').filter(word => word).map(word => `${word[0].toUpperCase()}${word.slice(1).toLowerCase()}`) // Applies CamelCase format
    .join('').replace(/^(.)/, (fullMatch, group1) => group1.toLowerCase()); // Applies camelCase format
  }
}
class SgHeader extends IHeader {
  constructor() {
    super();
  }

  /**
   * @param {IHeaderButtonContainerParams} params
   */
  addButtonContainer(params) {
    const [context, position] = params.context ? [params.context, params.position] : params.side === 'left' ? [this.nodes.leftNav, 'beforeend'] : [this.nodes.rightNav, 'afterbegin'];
    let buttonContainerNode = null;
    if (params.isDropdown) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "nav__button-container",
        ref: ref => buttonContainerNode = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "nav__relative-dropdown is-hidden"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "nav__absolute-dropdown"
      })), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        className: "nav__button nav__button--is-dropdown",
        href: params.url || null,
        onclick: params.onClick,
        target: params.openInNewTab ? '_blank' : null
      }, params.buttonIcon ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: params.buttonIcon
      }) : null, params.buttonImage ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("img", {
        src: params.buttonImage
      }) : null, params.buttonName), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "nav__button nav__button--is-dropdown-arrow"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-angle-down"
      }))));
    } else if (params.isNotification) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: `nav__button-container nav__button-container--notification ${params.isActive ? 'nav__button-container--active' : 'nav__button-container--inactive'}`,
        ref: ref => buttonContainerNode = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        className: "nav__button",
        href: params.url || null,
        target: params.openInNewTab ? '_blank' : null,
        title: params.buttonName
      }, params.buttonIcon ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: params.buttonIcon
      }) : null, params.buttonImage ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("img", {
        src: params.buttonImage
      }) : null, params.isActive && params.counter ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: `nav__notification ${params.isFlashing ? 'fade_infinite' : ''}`
      }, params.counter.toLocaleString('en-US')) : null)));
    } else {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "nav__button-container",
        ref: ref => buttonContainerNode = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        className: "nav__button",
        href: params.url || null,
        target: params.openInNewTab ? '_blank' : null
      }, params.buttonName)));
    }
    const buttonContainer = this.parseButtonContainer(buttonContainerNode);
    for (const id in params.dropdownItems) {
      const dropdownItemParams = params.dropdownItems[id];
      dropdownItemParams.buttonContainerId = buttonContainer.data.id;
      this.addDropdownItem(dropdownItemParams);
    }
    return buttonContainer;
  }

  /**
   * @param {IHeaderDropdownItemParams} params
   */
  addDropdownItem(params) {
    const buttonContainer = this.buttonContainers[params.buttonContainerId];
    if (!buttonContainer) {
      throw 'Invalid button container id.';
    }
    if (!buttonContainer.data.isDropdown) {
      throw 'Button container is not dropdown.';
    }
    let dropdownItemNode;
    const attributes = {
      className: `nav__row ${params.url ? '' : 'is-clickable'}`,
      href: params.url || null,
      onclick: params.onClick,
      target: params.openInNewTab ? '_blank' : null,
      ref: ref => dropdownItemNode = ref
    };
    const children = _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
      className: params.icon
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "nav__row__summary"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("p", {
      className: "nav__row__summary__name"
    }, params.name), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("p", {
      className: "nav__row__summary__description"
    }, params.description)));
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(buttonContainer.nodes.absoluteDropdown, 'beforeend', params.url ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", attributes, children) : _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", attributes, children));
    return this.parseDropdownItem(buttonContainer.dropdownItems, dropdownItemNode);
  }

  /**
   * @param {HTMLElement} context
   */
  parse(context) {
    const outerNode = context.querySelector('header');
    if (!outerNode) {
      throw 'No header present.';
    }
    if (outerNode.dataset.esgstParsed) {
      throw 'Header already parsed.';
    }
    this.nodes.outer = outerNode;
    this.nodes.inner = this.nodes.outer;
    this.nodes.nav = this.nodes.inner.querySelector('nav');
    this.nodes.leftNav = this.nodes.nav.querySelector('.nav__left-container');
    this.nodes.rightNav = this.nodes.nav.querySelector('.nav__right-container');
    const buttonContainerNodes = Array.from(this.nodes.nav.querySelectorAll('.nav__button-container'));
    for (const buttonContainerNode of buttonContainerNodes) {
      this.parseButtonContainer(buttonContainerNode);
    }
    if (this.buttonContainers['account'] && _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace === _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].SG) {
      _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].isLoggedIn = true;
      _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].xsrfToken = _class_Session__WEBPACK_IMPORTED_MODULE_7__["ISession"].extractXsrfToken(this.buttonContainers['account'].dropdownItems['logout'].nodes.outer.dataset.form);
    }
    this.nodes.outer.dataset.esgstParsed = 'true';
  }

  /**
   * @param {HTMLElement} buttonContainerNode
   * @returns {IHeaderButtonContainer}
   */
  parseButtonContainer(buttonContainerNode) {
    /** @type {IHeaderButtonContainer} */
    const buttonContainer = {
      nodes: {
        outer: buttonContainerNode
      },
      data: {
        id: '',
        buttonName: '',
        counter: 0,
        isFlashing: false,
        level: {
          base: 0,
          full: 0
        },
        points: 0,
        reputation: {
          positive: 0,
          negative: 0
        }
      }
    };
    const relativeDropdownNode = buttonContainer.nodes.outer.querySelector('.nav__relative-dropdown');
    if (relativeDropdownNode) {
      buttonContainer.nodes.relativeDropdown = relativeDropdownNode;
      buttonContainer.nodes.absoluteDropdown = buttonContainer.nodes.relativeDropdown.querySelector('.nav__absolute-dropdown');
      buttonContainer.dropdownItems = {};
      const dropdownItemNodes = buttonContainer.nodes.absoluteDropdown.querySelectorAll('.nav__row:not(.category):not(.sg-info-row)');
      for (const dropdownItemNode of dropdownItemNodes) {
        this.parseDropdownItem(buttonContainer.dropdownItems, dropdownItemNode);
      }
      buttonContainer.nodes.button = buttonContainer.nodes.outer.querySelector('.nav__button--is-dropdown');
      buttonContainer.nodes.arrow = buttonContainer.nodes.outer.querySelector('.nav__button--is-dropdown-arrow');
      buttonContainer.nodes.arrowIcon = buttonContainer.nodes.arrow.querySelector('.fa');
      const pointsNode = buttonContainer.nodes.button.querySelector('.nav__points');
      if (pointsNode) {
        buttonContainer.nodes.points = pointsNode;
        buttonContainer.data.points = IHeader.extractPoints(buttonContainer.nodes.points.textContent);
        if (_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace === _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].SG) {
          _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.points = buttonContainer.data.points;
        }
      }
      const levelNode = buttonContainer.nodes.button.querySelector('[title]');
      if (levelNode) {
        buttonContainer.nodes.level = levelNode;
        buttonContainer.data.level = IHeader.extractLevel(buttonContainer.nodes.level.title);
        if (_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace === _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].SG) {
          _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.level = buttonContainer.data.level;
        }
      }
      buttonContainer.data.isDropdown = true;
    } else {
      const buttonNode = buttonContainer.nodes.outer.querySelector('.nav__button');
      if (buttonNode) {
        buttonContainer.nodes.button = buttonNode;
      } else {
        buttonContainer.data.buttonName = 'Avatar';
        const user = _models_User__WEBPACK_IMPORTED_MODULE_10__["User"].create(_constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].SG);
        user.nodes.outer = buttonContainer.nodes.outer;
        user.nodes.avatarOuter = user.nodes.outer.querySelector('.nav__avatar-outer-wrap');
        user.nodes.avatarInner = user.nodes.avatarOuter.querySelector('.nav__avatar-inner-wrap');
        user.parseData();
        user.parseExtraData();
        buttonContainer.user = user;
        if (_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace === _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].SG) {
          _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].user = Object.assign({}, buttonContainer.user.data);
        }
      }
    }
    if (buttonContainer.nodes.button) {
      buttonContainer.nodes.buttonName = buttonContainer.nodes.button;
      const buttonIconNode = buttonContainer.nodes.button.querySelector('.fa');
      if (buttonIconNode) {
        buttonContainer.nodes.buttonIcon = buttonIconNode;
        buttonContainer.data.buttonIcon = buttonContainer.nodes.buttonIcon.className;
      }
      const buttonImageNode = buttonContainer.nodes.button.querySelector('img');
      if (buttonImageNode) {
        buttonContainer.nodes.buttonImage = buttonImageNode;
        buttonContainer.data.buttonImage = buttonContainer.nodes.buttonImage.className;
      }
      buttonContainer.data.url = buttonContainer.nodes.button.getAttribute('href');
      buttonContainer.data.buttonName = buttonContainer.nodes.buttonName.title || buttonContainer.nodes.buttonName.textContent.trim();
    }
    if (buttonContainer.nodes.outer.classList.contains('nav__button-container--notification')) {
      buttonContainer.nodes.counter = buttonContainer.nodes.outer.querySelector('.nav__notification');
      if (buttonContainer.nodes.counter) {
        buttonContainer.data.counter = IHeader.extractCounter(buttonContainer.nodes.counter.textContent);
        buttonContainer.data.isFlashing = buttonContainer.nodes.counter.classList.contains('fade_infinite');
      }
      buttonContainer.data.isActive = buttonContainer.nodes.outer.classList.contains('nav__button-container--active');
      buttonContainer.data.isNotification = true;
    }
    buttonContainer.data.id = IHeader.generateId(buttonContainer.data.buttonName);
    if (_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace === _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].SG) {
      switch (buttonContainer.data.id) {
        case 'giveawaysCreated':
          {
            _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.created = buttonContainer.data.counter;
            break;
          }
        case 'giveawaysWon':
          {
            _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.won = buttonContainer.data.counter;
            _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.wonDelivered = buttonContainer.data.isFlashing;
            break;
          }
        case 'messages':
          {
            _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.messages = buttonContainer.data.counter;
            break;
          }
        default:
          {
            break;
          }
      }
    }
    this.buttonContainers[buttonContainer.data.id] = buttonContainer;
    return buttonContainer;
  }

  /**
   * @param {Object<string, IHeaderDropdownItem>} dropdownItems
   * @param {HTMLElement} dropdownItemNode
   * @returns {IHeaderDropdownItem}
   */
  parseDropdownItem(dropdownItems, dropdownItemNode) {
    /** @type {IHeaderDropdownItem} */
    const dropdownItem = {
      nodes: {
        outer: dropdownItemNode,
        icon: null,
        name: null
      },
      data: {
        id: '',
        icon: '',
        name: '',
        url: ''
      }
    };
    dropdownItem.nodes.icon = dropdownItem.nodes.outer.querySelector('.fa');
    dropdownItem.nodes.summary = dropdownItem.nodes.outer.querySelector('.nav__row__summary');
    dropdownItem.nodes.name = dropdownItem.nodes.summary.querySelector('.nav__row__summary__name');
    dropdownItem.nodes.description = dropdownItem.nodes.summary.querySelector('.nav__row__summary__description');
    dropdownItem.data.url = dropdownItem.nodes.outer.getAttribute('href') || '';
    dropdownItem.data.icon = dropdownItem.nodes.icon.className;
    dropdownItem.data.name = dropdownItem.nodes.name.textContent.trim();
    dropdownItem.data.description = dropdownItem.nodes.description.textContent.trim();
    dropdownItem.data.id = IHeader.generateId(dropdownItem.data.name);
    dropdownItems[dropdownItem.data.id] = dropdownItem;
    return dropdownItem;
  }

  /**
   * @param {IHeaderButtonContainer} buttonContainer
   * @param {number} newCounter
   * @param {boolean} [isFlashing]
   */
  async updateCounter(buttonContainerId, newCounter, isFlashing) {
    const buttonContainer = this.buttonContainers[buttonContainerId];
    if (!buttonContainer) {
      throw 'Invalid button container id.';
    }
    if (!buttonContainer.nodes.counter) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(buttonContainer.nodes.outer, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "nav__notification",
        ref: ref => buttonContainer.nodes.counter = ref
      }));
    }
    const oldCounter = buttonContainer.data.counter;
    if (oldCounter === newCounter && isFlashing === buttonContainer.data.isFlashing) {
      return;
    }
    if (newCounter) {
      buttonContainer.nodes.outer.classList.remove('nav__button-container--inactive');
      buttonContainer.nodes.outer.classList.add('nav__button-container--active');
      buttonContainer.nodes.counter.classList.remove('is-hidden');
      buttonContainer.nodes.counter.textContent = newCounter.toLocaleString('en-US');
    } else {
      buttonContainer.nodes.outer.classList.remove('nav__button-container--active');
      buttonContainer.nodes.outer.classList.add('nav__button-container--inactive');
      buttonContainer.nodes.counter.classList.add('is-hidden');
      buttonContainer.nodes.counter.textContent = '';
    }
    if (isFlashing) {
      buttonContainer.nodes.counter.classList.add('fade_infinite');
    } else {
      buttonContainer.nodes.counter.classList.remove('fade_infinite');
    }
    buttonContainer.data.counter = newCounter;
    buttonContainer.data.isFlashing = isFlashing;
    switch (buttonContainerId) {
      case 'giveawaysCreated':
        {
          _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.created = newCounter;
          await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_8__["Events"].CREATED_UPDATED, oldCounter, newCounter);
          break;
        }
      case 'giveawaysWon':
        {
          _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.won = newCounter;
          _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.wonDelivered = isFlashing;
          await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_8__["Events"].WON_UPDATED, oldCounter, newCounter, isFlashing);
          break;
        }
      case 'messages':
        {
          _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.messages = newCounter;
          await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_8__["Events"].MESSAGES_UPDATED, oldCounter, newCounter);
          break;
        }
      default:
        {
          break;
        }
    }
  }

  /**
   * @param {number|string} newPoints
   */
  async updatePoints(newPoints) {
    const accountContainer = this.buttonContainers['account'];
    if (!accountContainer || !accountContainer.nodes.points) {
      return;
    }
    const oldPoints = accountContainer.data.points;
    if (typeof newPoints === 'string') {
      newPoints = parseInt(newPoints.replace(/,/g, ''));
    }
    if (oldPoints === newPoints) {
      return;
    }
    accountContainer.nodes.points.textContent = newPoints.toLocaleString('en-US');
    accountContainer.data.points = newPoints;
    _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.points = newPoints;
    await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_8__["Events"].POINTS_UPDATED, oldPoints, newPoints);
  }

  /**
   * @param {ILevel} newLevel
   */
  async updateLevel(newLevel) {
    const accountContainer = this.buttonContainers['account'];
    if (!accountContainer || !accountContainer.nodes.level) {
      return;
    }
    const oldLevel = accountContainer.data.level;
    if (oldLevel.full === newLevel.full) {
      return;
    }
    accountContainer.nodes.level.textContent = `Level ${newLevel.base}`;
    accountContainer.nodes.level.title = newLevel.full;
    accountContainer.data.level = newLevel;
    _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.level = newLevel;
    await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_8__["Events"].LEVEL_UPDATED, oldLevel, newLevel);
  }
}
class StHeader extends IHeader {
  constructor() {
    super();
  }

  /**
   * @param {IHeaderButtonContainerParams} params
   */
  addButtonContainer(params) {
    const [context, position] = params.context ? [params.context, params.position] : [this.nodes.rightNav, 'afterbegin'];
    let buttonContainerNode = null;
    if (params.isDropdown) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "nav_btn_container",
        ref: ref => buttonContainerNode = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "dropdown is_hidden"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null)), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        className: "nav_btn nav_btn_left",
        href: params.url || null,
        onclick: params.onClick,
        target: params.openInNewTab ? '_blank' : null
      }, params.buttonIcon ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: params.buttonIcon
      }) : null, params.buttonImage ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("img", {
        src: params.buttonImage
      }) : null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", null, params.buttonName, params.isNotification && params.counter ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
        className: "message_count"
      }, params.counter.toLocaleString('en-US')) : null)), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "nav_btn nav_btn_right nav_btn_dropdown"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-angle-down"
      }))));
    } else if (params.isNotification) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "nav_btn_container",
        ref: ref => buttonContainerNode = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        className: "nav_btn",
        href: params.url || null,
        target: params.openInNewTab ? '_blank' : null
      }, params.buttonIcon ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: params.buttonIcon
      }) : null, params.buttonImage ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("img", {
        src: params.buttonImage
      }) : null, params.counter ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
        className: "message_count"
      }, params.counter.toLocaleString('en-US'))) : null)));
    } else {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "nav_btn_container",
        ref: ref => buttonContainerNode = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        className: "nav_btn",
        href: params.url || null,
        target: params.openInNewTab ? '_blank' : null
      }, params.buttonIcon ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: params.buttonIcon
      }) : null, params.buttonImage ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("img", {
        src: params.buttonImage
      }) : null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", null, params.buttonName, params.isNotification && params.counter ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
        className: "message_count"
      }, params.counter.toLocaleString('en-US')) : null))));
    }
    const buttonContainer = this.parseButtonContainer(buttonContainerNode);
    for (const id in params.dropdownItems) {
      const dropdownItemParams = params.dropdownItems[id];
      dropdownItemParams.buttonContainerId = buttonContainer.data.id;
      this.addDropdownItem(dropdownItemParams);
    }
    return buttonContainer;
  }

  /**
   * @param {IHeaderDropdownItemParams} params
   */
  addDropdownItem(params) {
    const buttonContainer = this.buttonContainers[params.buttonContainerId];
    if (!buttonContainer) {
      throw 'Invalid button container id.';
    }
    if (!buttonContainer.data.isDropdown) {
      throw 'Button container is not dropdown.';
    }
    let dropdownItemNode;
    const attributes = {
      className: 'dropdown_btn',
      href: params.url || null,
      onclick: params.onClick,
      target: params.openInNewTab ? '_blank' : null,
      ref: ref => dropdownItemNode = ref
    };
    const children = _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
      className: params.icon
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", null, params.name));
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(buttonContainer.nodes.absoluteDropdown, 'beforeend', params.url ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", attributes, children) : _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", attributes, children));
    return this.parseDropdownItem(buttonContainer.dropdownItems, dropdownItemNode);
  }

  /**
   * @param {HTMLElement} context
   */
  parse(context) {
    const outerNode = context.querySelector('header');
    if (!outerNode) {
      throw 'No header present.';
    }
    if (outerNode.dataset.esgstParsed) {
      throw 'Header already parsed.';
    }
    this.nodes.outer = outerNode;
    this.nodes.inner = this.nodes.outer.querySelector('.header_inner_wrap');
    this.nodes.nav = this.nodes.inner.querySelector('nav');
    this.nodes.leftNav = this.nodes.nav.querySelector('.nav_btns');
    this.nodes.rightNav = this.nodes.leftNav;
    this.nodes.logo = this.nodes.nav.querySelector('.nav_logo');
    const buttonContainerNodes = Array.from(this.nodes.nav.querySelectorAll('.nav_btn_container, .nav_avatar'));
    for (const buttonContainerNode of buttonContainerNodes) {
      this.parseButtonContainer(buttonContainerNode);
    }
    if (this.buttonContainers['myProfile'] && _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace === _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].ST) {
      _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].isLoggedIn = true;
      _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].xsrfToken = _class_Session__WEBPACK_IMPORTED_MODULE_7__["ISession"].extractXsrfToken(this.buttonContainers['myProfile'].dropdownItems['logout'].nodes.outer.dataset.form);
    }
    this.nodes.outer.dataset.esgstParsed = 'true';
  }

  /**
   * @param {HTMLElement} buttonContainerNode
   * @returns {IHeaderButtonContainer}
   */
  parseButtonContainer(buttonContainerNode) {
    /** @type {IHeaderButtonContainer} */
    const buttonContainer = {
      nodes: {
        outer: buttonContainerNode
      },
      data: {
        id: '',
        buttonName: '',
        counter: 0,
        isFlashing: false,
        level: {
          base: 0,
          full: 0
        },
        points: 0,
        reputation: {
          positive: 0,
          negative: 0
        }
      }
    };
    const relativeDropdownNode = buttonContainer.nodes.outer.querySelector('.dropdown');
    if (relativeDropdownNode) {
      buttonContainer.nodes.relativeDropdown = relativeDropdownNode;
      buttonContainer.nodes.absoluteDropdown = buttonContainer.nodes.relativeDropdown.querySelector(':scope > div');
      buttonContainer.dropdownItems = {};
      const dropdownItemNodes = buttonContainer.nodes.absoluteDropdown.querySelectorAll('.dropdown_btn');
      for (const dropdownItemNode of dropdownItemNodes) {
        this.parseDropdownItem(buttonContainer.dropdownItems, dropdownItemNode);
      }
      buttonContainer.nodes.button = buttonContainer.nodes.outer.querySelector('.nav_btn_left');
      buttonContainer.nodes.arrow = buttonContainer.nodes.outer.querySelector('.nav_btn_right');
      buttonContainer.nodes.arrowIcon = buttonContainer.nodes.arrow.querySelector('.fa');
      const reputationNode = buttonContainer.nodes.button.querySelector('.is_faded');
      if (reputationNode) {
        buttonContainer.nodes.reputation = reputationNode;
        buttonContainer.data.reputation = IHeader.extractReputation(buttonContainer.nodes.reputation.textContent);
        if (_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace === _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].ST) {
          _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.reputation = buttonContainer.data.reputation;
        }
      }
      buttonContainer.data.isDropdown = true;
    } else {
      const buttonNode = buttonContainer.nodes.outer.querySelector('.nav_btn');
      if (buttonNode) {
        buttonContainer.nodes.button = buttonNode;
      } else {
        buttonContainer.data.buttonName = 'Avatar';
        const user = _models_User__WEBPACK_IMPORTED_MODULE_10__["User"].create(_constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].ST);
        user.nodes.outer = buttonContainer.nodes.outer;
        user.nodes.avatarOuter = user.nodes.outer;
        user.parseData();
        user.parseExtraData();
        buttonContainer.user = user;
        if (_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace === _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].ST) {
          _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].user = Object.assign({}, buttonContainer.user.data);
        }
      }
    }
    if (buttonContainer.nodes.button) {
      buttonContainer.nodes.buttonName = !buttonContainer.data.isDropdown && buttonContainer.nodes.button.querySelector('span') || buttonContainer.nodes.button;
      const buttonIconNode = buttonContainer.nodes.button.querySelector('.fa');
      if (buttonIconNode) {
        buttonContainer.nodes.buttonIcon = buttonIconNode;
        buttonContainer.data.buttonIcon = buttonContainer.nodes.buttonIcon.className;
      }
      const buttonImageNode = buttonContainer.nodes.button.querySelector('img');
      if (buttonImageNode) {
        buttonContainer.nodes.buttonImage = buttonImageNode;
        buttonContainer.data.buttonImage = buttonContainer.nodes.buttonImage.className;
      }
      const counterNode = buttonContainer.nodes.buttonName.querySelector('.message_count');
      if (counterNode) {
        buttonContainer.nodes.counter = counterNode;
        if (buttonContainer.nodes.counter) {
          buttonContainer.data.counter = IHeader.extractCounter(buttonContainer.nodes.counter.textContent);
        }
        buttonContainer.data.isNotification = true;
      }
      buttonContainer.data.url = buttonContainer.nodes.button.getAttribute('href');
      buttonContainer.data.buttonName = buttonContainer.nodes.buttonName.title || buttonContainer.nodes.buttonName.textContent.trim();
    }
    buttonContainer.data.id = IHeader.generateId(buttonContainer.data.buttonName);
    if (_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace === _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].ST) {
      switch (buttonContainer.data.id) {
        case 'messages':
          {
            _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.messages = buttonContainer.data.counter;
            break;
          }
        default:
          {
            break;
          }
      }
    }
    this.buttonContainers[buttonContainer.data.id] = buttonContainer;
    return buttonContainer;
  }

  /**
   * @param {Object<string, IHeaderDropdownItem>} dropdownItems
   * @param {HTMLElement} dropdownItemNode
   * @returns {IHeaderDropdownItem}
   */
  parseDropdownItem(dropdownItems, dropdownItemNode) {
    /** @type {IHeaderDropdownItem} */
    const dropdownItem = {
      nodes: {
        outer: dropdownItemNode,
        icon: null,
        name: null
      },
      data: {
        id: '',
        icon: '',
        name: '',
        url: ''
      }
    };
    dropdownItem.nodes.icon = dropdownItem.nodes.outer.querySelector('.fa');
    dropdownItem.nodes.name = dropdownItem.nodes.outer.querySelector('span');
    dropdownItem.data.url = dropdownItem.nodes.outer.getAttribute('href') || '';
    dropdownItem.data.icon = dropdownItem.nodes.icon.className;
    dropdownItem.data.name = dropdownItem.nodes.name.textContent.trim();
    dropdownItem.data.id = IHeader.generateId(dropdownItem.data.name);
    dropdownItems[dropdownItem.data.id] = dropdownItem;
    return dropdownItem;
  }

  /**
   * @param {IHeaderButtonContainer} buttonContainer
   * @param {number} newCounter
   */
  async updateCounter(buttonContainerId, newCounter) {
    const buttonContainer = this.buttonContainers[buttonContainerId];
    if (!buttonContainer) {
      throw 'Invalid button container id.';
    }
    if (!buttonContainer.nodes.counter) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(buttonContainer.nodes.buttonName, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
        className: "message_count",
        ref: ref => buttonContainer.nodes.counter = ref
      }));
    }
    if (newCounter) {
      buttonContainer.nodes.counter.classList.remove('is_hidden');
      buttonContainer.nodes.counter.textContent = newCounter.toLocaleString('en-US');
    } else {
      buttonContainer.nodes.counter.classList.add('is_hidden');
      buttonContainer.nodes.counter.textContent = '';
    }
    const oldCounter = buttonContainer.data.counter;
    if (oldCounter === newCounter) {
      return;
    }
    buttonContainer.data.counter = newCounter;
    switch (buttonContainerId) {
      case 'messages':
        {
          _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.messages = newCounter;
          await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_8__["Events"].MESSAGES_UPDATED, oldCounter, newCounter);
          break;
        }
      default:
        {
          break;
        }
    }
  }

  /**
   * @param {string} newReputationText
   */
  async updateReputation(newReputationText) {
    const myProfileContainer = this.buttonContainers['myProfile'];
    if (!myProfileContainer) {
      return;
    }
    const reputationNode = myProfileContainer.nodes.reputation;
    if (!reputationNode || reputationNode.textContent === newReputationText) {
      return;
    }
    const oldReputation = _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.reputation;
    reputationNode.textContent = newReputationText;
    _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.reputation = IHeader.extractReputation(newReputationText);
    const newReputation = _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].counters.reputation;
    await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_8__["Events"].REPUTATION_UPDATED, oldReputation, newReputation);
  }
}

/**
 * @param {number} namespace
 * @returns {IHeader}
 */
function Header(namespace = _class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].namespace) {
  switch (namespace) {
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].SG:
      {
        return new SgHeader();
      }
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_9__["Namespaces"].ST:
      {
        return new StHeader();
      }
    default:
      {
        throw 'Invalid namespace.';
      }
  }
}


/***/ }),
/* 250 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "User", function() { return User; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(213);
/* harmony import */ var _constants_Namespaces__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(214);
/* harmony import */ var _Base__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(251);

var _User;





class User extends _Base__WEBPACK_IMPORTED_MODULE_5__["Base"] {
  constructor(namespace) {
    super(namespace);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parse", refNode => {
      this.parseNodes(refNode);
      this.parseData();
      this.parseExtraData();
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseNodes", refNode => {
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "build", () => {
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "reset", () => {
      const outerNode = this.nodes.outer;
      this.nodes = User.getDefaultNodes();
      this.data = User.getDefaultData();
      if (outerNode) {
        this.nodes.outer = outerNode;
        this.built = false;
        this.build();
      }
      return this;
    });
    this.nodes = User.getDefaultNodes();
    this.data = User.getDefaultData();
  }
}
_User = User;
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(User, "getDefaultNodes", () => {
  return {
    ..._Base__WEBPACK_IMPORTED_MODULE_5__["Base"].getDefaultNodes(),
    usernameOuter: null,
    usernameInner: null,
    role: null,
    patreon: null,
    reputation: null,
    positiveReputation: null,
    negativeReputation: null,
    avatarOuter: null,
    avatarInner: null
  };
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(User, "getDefaultData", () => {
  return {
    ..._Base__WEBPACK_IMPORTED_MODULE_5__["Base"].getDefaultData(),
    ..._User.getDefaultBaseData(),
    ..._User.getDefaultExtraData()
  };
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(User, "getDefaultBaseData", () => {
  return {
    id: null,
    steamId: null,
    username: null,
    op: null,
    roleId: null,
    roleName: null,
    patron: null,
    positiveReputation: null,
    negativeReputation: null,
    avatar: null
  };
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(User, "getDefaultExtraData", () => {
  return {
    url: null
  };
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(User, "create", (namespace = _class_Session__WEBPACK_IMPORTED_MODULE_3__["Session"].namespace) => {
  switch (namespace) {
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_4__["Namespaces"].SG:
      return new SgUser();
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_4__["Namespaces"].ST:
      return new StUser();
    default:
      return null;
  }
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(User, "extractUser", url => {
  return url.slice(6) || null; // /user/...
});
_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(User, "extractAvatar", url => {
  return url.slice(5, -2) || null; // url("...")
});
class SgUser extends User {
  constructor() {
    super(_constants_Namespaces__WEBPACK_IMPORTED_MODULE_4__["Namespaces"].SG);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseData", () => {
      var _nodes$usernameInner, _nodes$avatarOuter, _nodes$avatarOuter2, _nodes$avatarInner;
      const nodes = this.nodes;
      const data = User.getDefaultData();
      const url = ((_nodes$usernameInner = nodes.usernameInner) === null || _nodes$usernameInner === void 0 ? void 0 : _nodes$usernameInner.getAttribute('href')) || ((_nodes$avatarOuter = nodes.avatarOuter) === null || _nodes$avatarOuter === void 0 ? void 0 : _nodes$avatarOuter.getAttribute('href'));
      if (url) {
        data.username = User.extractUser(url);
      }
      if (nodes.usernameOuter) {
        data.op = nodes.usernameOuter.classList.contains('comment__username--op');
      }
      if (nodes.role) {
        var _nodes$role$getAttrib;
        data.roleId = ((_nodes$role$getAttrib = nodes.role.getAttribute('href')) === null || _nodes$role$getAttrib === void 0 ? void 0 : _nodes$role$getAttrib.slice(7)) || null; // /roles/...
        data.roleName = nodes.role.textContent.trim().slice(1, -1) || null; // (...)
      }
      data.patron = !!nodes.patreon;
      const imageUrl = ((_nodes$avatarOuter2 = nodes.avatarOuter) === null || _nodes$avatarOuter2 === void 0 ? void 0 : _nodes$avatarOuter2.style.backgroundImage) || ((_nodes$avatarInner = nodes.avatarInner) === null || _nodes$avatarInner === void 0 ? void 0 : _nodes$avatarInner.style.backgroundImage);
      if (imageUrl) {
        data.avatar = User.extractAvatar(imageUrl);
      }
      this.data = data;
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseExtraData", () => {
      const data = this.data;
      if (data.username) {
        data.url = `/user/${data.username}`;
      }
      return this;
    });
  }
}
class StUser extends User {
  constructor() {
    super(_constants_Namespaces__WEBPACK_IMPORTED_MODULE_4__["Namespaces"].ST);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseData", () => {
      var _nodes$usernameInner2, _nodes$avatarOuter3, _nodes$avatarOuter4, _nodes$avatarInner2;
      const nodes = this.nodes;
      const data = User.getDefaultData();
      const url = ((_nodes$usernameInner2 = nodes.usernameInner) === null || _nodes$usernameInner2 === void 0 ? void 0 : _nodes$usernameInner2.getAttribute('href')) || ((_nodes$avatarOuter3 = nodes.avatarOuter) === null || _nodes$avatarOuter3 === void 0 ? void 0 : _nodes$avatarOuter3.getAttribute('href'));
      if (url) {
        data.steamId = User.extractUser(url);
      }
      if (nodes.usernameOuter) {
        data.username = nodes.usernameOuter.textContent.trim() || null;
        data.op = nodes.usernameOuter.classList.contains('is_op');
      }
      if (nodes.reputation && nodes.positiveReputation && nodes.negativeReputation) {
        data.positiveReputation = parseInt(nodes.positiveReputation.textContent.slice(1).replace(',', '')); // +...
        data.negativeReputation = parseInt(nodes.negativeReputation.textContent.slice(1).replace(',', '')); // -...
      }
      const imageUrl = ((_nodes$avatarOuter4 = nodes.avatarOuter) === null || _nodes$avatarOuter4 === void 0 ? void 0 : _nodes$avatarOuter4.style.backgroundImage) || ((_nodes$avatarInner2 = nodes.avatarInner) === null || _nodes$avatarInner2 === void 0 ? void 0 : _nodes$avatarInner2.style.backgroundImage);
      if (imageUrl) {
        data.avatar = User.extractAvatar(imageUrl);
      }
      this.data = data;
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parseExtraData", () => {
      const data = this.data;
      if (data.steamId) {
        data.url = `/user/${data.steamId}`;
      }
      return this;
    });
  }
}

/***/ }),
/* 251 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Base", function() { return Base; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
/* harmony import */ var _constants_ClassNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(215);



class Base {
  constructor(namespace) {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "namespace", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "nodes", Base.getDefaultNodes());
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "data", Base.getDefaultData());
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "built", false);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "getError", message => {
      return new Error(`${this.constructor.name}: ${message}`);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "insert", (refNode, position) => {
      if (!this.nodes.outer) {
        this.build();
      }
      if (!this.nodes.outer) {
        throw this.getError('failed to insert');
      }
      _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(refNode, position, this.nodes.outer);
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "destroy", () => {
      if (!this.nodes.outer) {
        throw this.getError('failed to destroy');
      }
      this.nodes.outer.remove();
      this.nodes.outer = null;
      this.built = false;
      this.reset();
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "hide", () => {
      if (!this.nodes.outer) {
        throw this.getError('failed to hide');
      }
      this.nodes.outer.classList.add(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_2__["ClassNames"][this.namespace].hidden);
      this.data.hidden = true;
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "show", () => {
      if (!this.nodes.outer) {
        throw this.getError('failed to show');
      }
      this.nodes.outer.classList.remove(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_2__["ClassNames"][this.namespace].hidden);
      this.data.hidden = false;
      return this;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "toggleHidden", hidden => {
      if (!this.nodes.outer) {
        throw this.getError('failed to show');
      }
      this.nodes.outer.classList.toggle(_constants_ClassNames__WEBPACK_IMPORTED_MODULE_2__["ClassNames"][this.namespace].hidden, this.data.hidden);
      this.data.hidden = hidden;
      return this;
    });
    this.namespace = namespace;
  }
  static getError(message) {
    return new Error(`${this.name}: ${message}`);
  }
  static getDefaultNodes() {
    return {
      outer: null
    };
  }
  static getDefaultData() {
    return {
      hidden: false
    };
  }
}

/***/ }),
/* 252 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalCustomHeaderFooterLinks", function() { return generalCustomHeaderFooterLinks; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(210);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(132);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(212);
/* harmony import */ var _components_Header__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(249);













class GeneralCustomHeaderFooterLinks extends _class_Module__WEBPACK_IMPORTED_MODULE_6__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to add custom links to the header dropdowns/footer of any page."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Already comes with some predefined links:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Giveaways: Hidden Games, Reduced CV Games, Browse Wishlist, Browse Recommended, Browse Group, Browse New"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Discussions: Categorize Discussions, Browse Announcements, Browse Bugs / Suggestions, Browse Deals, Browse General, Browse Group Recruitment, Browse Let's Play Together, Browse Off-Topic, Browse Puzzles, Browse Uncategorized"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Support: Real CV, Not Activated Wins, Multiple Wins"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Help: Change Log"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Account: Whitelist, Blacklist, Games, Groups, Wishlist")), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "If you press the Ctrl key with a dropdown open, the feature adds two buttons (\"", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-plus-circle"
      }), " Add Custom Link\" and \"", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-undo"
      }), " Reset Links\") to the end of the dropdown that allow you to add/reset the custom links. It also adds two other buttons (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-edit"
      }), " to edit and ", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-trash"
      }), " to remove) to each custom link in the dropdown that allow you to edit/remove the custom link."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "If you press the Ctrl key with no dropdown open, those same buttons will be added to the footer of the page."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "You can move the custom links by dragging and dropping them.")),
      inputItems: 'chfl_key',
      id: 'chfl',
      name: 'Custom Header/Footer Links',
      sg: true,
      st: true,
      type: 'general'
    };
    this.newIds = {
      giveaways: {
        new: 'createANewGiveaway',
        wishlist: 'communityWishlist',
        created: 'viewCreated',
        entered: 'viewEntered',
        won: 'viewWon'
      },
      discussions: {
        new: 'createANewDiscussion',
        created: 'viewCreated',
        bookmarked: 'viewBookmarked'
      },
      support: {
        new: 'createANewTicket'
      },
      help: {
        'comment-formatting': 'commentFormatting',
        faq: 'faq',
        guidelines: 'guidelines'
      },
      account: {
        profile: 'syncWithSteam',
        stats: 'myStats',
        et: 'myEntryHistory',
        ch: 'myCommentHistory',
        'user=[steamId]': 'reviews'
      },
      footer: {
        archive: 'archive',
        stats: 'stats',
        roles: 'roles',
        users: 'users',
        steamgifts: 'steamGroup',
        '103582791432125620': 'chat',
        'privacy-policy': 'privacyPolicy',
        'cookie-policy': 'cookiePolicy',
        'terms-of-service': 'termsOfService',
        advertising: 'advertise',
        guidelines: 'guidelines',
        'comment-formatting': 'commentFormatting'
      },
      trades: {
        new: 'newTrade',
        'user=[steamId]': 'myTrades'
      },
      myProfile: {
        'user=[steamId]': 'reviews'
      }
    };
  }
  init() {
    if (this.esgst.sg) {
      this.sources = {
        giveaways: 'giveaways',
        discussions: 'discussions',
        support: 'support',
        help: 'help',
        account: 'account',
        footer: 'footer'
      };
    } else {
      this.sources = {
        trades: 'trades',
        account: 'myProfile',
        footer: 'footer'
      };
    }
    for (const key of Object.keys(this.sources)) {
      const source = this.sources[key];
      const items = key === 'footer' ? _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers : _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems;
      for (const itemKey of Object.keys(items)) {
        const item = items[itemKey];
        if (item.nodes.outer.dataset.linkId) {
          continue;
        }
        if (!item.data.url || item.data.url.match(/^javascript/) || item.data.name === 'Steam' && key === 'footer') {
          continue;
        }
        const id = _components_Header__WEBPACK_IMPORTED_MODULE_12__["IHeader"].generateId(item.data.name);
        item.nodes.outer.dataset.linkId = id;
        item.nodes.outer.dataset.linkKey = key;
      }
      this.reorder(key, true);
    }
    this.esgst.documentEvents.keydown.add(this.checkKey.bind(this));
  }
  reorder(key, firstRun) {
    try {
      const ids = [];
      const source = this.sources[key];
      const objs = _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`chfl_${key}`);
      for (let i = objs.length - 1; i > -1; i--) {
        const objOrId = objs[i];
        if (objOrId.id) {
          let item = key === 'footer' ? _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers[objOrId.id] : _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems[objOrId.id];
          if (!item || firstRun) {
            if (key === 'footer') {
              if (item && item.nodes.outer.dataset.linkId) {
                item.nodes.outer.remove();
                delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers[objOrId.id];
              }
              item = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.addLinkContainer({
                icon: `fa ${objOrId.icon}`,
                name: objOrId.name,
                side: 'right',
                url: objOrId.url
              });
              item.nodes.outer.dataset.linkId = objOrId.id;
              item.nodes.outer.dataset.linkKey = key;
              item.nodes.outer.title = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.getFeatureTooltip('chfl');
            } else {
              if (item && item.nodes.outer.dataset.linkId) {
                item.nodes.outer.remove();
                delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems[objOrId.id];
              }
              item = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.addDropdownItem({
                buttonContainerId: source,
                description: objOrId.description,
                icon: `fa fa-fw ${objOrId.icon} ${objOrId.color} icon-${objOrId.color}`,
                name: objOrId.name,
                url: objOrId.url
              });
              item.nodes.outer.dataset.linkId = objOrId.id;
              item.nodes.outer.dataset.linkKey = key;
              item.nodes.outer.title = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.getFeatureTooltip('chfl');
              if (!objOrId.description) {
                item.nodes.outer.classList.add('esgst-chfl-small');
              }
              if (objOrId.compact) {
                item.nodes.outer.classList.add('esgst-chfl-compact');
              }
            }
          }
          item.nodes.outer.parentElement.insertBefore(item.nodes.outer, item.nodes.outer.parentElement.firstElementChild);
          this.makeDraggable(item.nodes.outer);
          ids.push(objOrId.id);
        } else {
          const item = key === 'footer' ? _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers[objOrId] : _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems[objOrId];
          if (item) {
            item.nodes.outer.parentElement.insertBefore(item.nodes.outer, item.nodes.outer.parentElement.firstElementChild);
            this.makeDraggable(item.nodes.outer);
          }
          ids.push(objOrId);
        }
      }
      const items = key === 'footer' ? _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers : _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems;
      for (const itemKey of Object.keys(items)) {
        const item = items[itemKey];
        if (!item.nodes.outer.dataset.linkId || ids.indexOf(item.nodes.outer.dataset.linkId) > -1) {
          continue;
        }
        item.nodes.outer.remove();
        if (key === 'footer') {
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers[itemKey];
        } else {
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems[itemKey];
        }
      }
      if (!firstRun) {
        this.removeButton(key);
        this.addButton(null, key);
      }
    } catch (error) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].error(error.message);
    }
  }
  makeDraggable(element) {
    element.setAttribute('draggable', true);
    element.addEventListener('dragstart', this.startDrag.bind(this));
    element.addEventListener('dragenter', this.enterDrag.bind(this));
    element.addEventListener('dragend', this.saveOrder.bind(this));
  }
  startDrag(event) {
    event.dataTransfer.setData('text/plain', '');
    this.source = event.currentTarget;
  }
  enterDrag(event) {
    let current = this.source;
    let element = event.currentTarget;
    if (current.dataset.linkKey !== element.dataset.linkKey) return;
    do {
      current = current.previousElementSibling;
      if (current && current === element) {
        element.parentElement.insertBefore(this.source, element);
        return;
      }
    } while (current);
    element.parentElement.insertBefore(this.source, element.nextElementSibling);
  }
  saveOrder() {
    const settings = [];
    for (let key of Object.keys(this.sources)) {
      const elements = {};
      for (const item of _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`chfl_${key}`)) {
        if (item.id) {
          elements[item.id] = item;
        }
      }
      const setting = [];
      const source = this.sources[key];
      const container = key === 'footer' ? _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.nodes.rightNav : _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].nodes.absoluteDropdown;
      for (const child of container.children) {
        const id = child.dataset.linkId;
        if (!id) {
          continue;
        }
        setting.push(elements[id] || id);
      }
      settings.push({
        id: `chfl_${key}_${this.esgst.name}`,
        value: setting
      });
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.setSetting(settings);
  }

  /**
   * @param {string} [forceKey]
   * @returns {*}
   */
  removeButton(forceKey) {
    for (const key of Object.keys(this.sources)) {
      const source = this.sources[key];
      const container = key === 'footer' ? _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.nodes.outer : _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].nodes.relativeDropdown;
      if (key !== forceKey && (container.classList.contains('is-hidden') || container.classList.contains('is_hidden'))) {
        continue;
      }
      let found = false;
      const panels = container.querySelectorAll('.esgst-chfl-panel');
      for (let i = panels.length - 1; i > -1; i--) {
        panels[i].remove();
        found = true;
      }
      if (key === 'footer') {
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers['addCustomLink']) {
          _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers['addCustomLink'].nodes.outer.remove();
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers['addCustomLink'];
          _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers['resetLinks'].nodes.outer.remove();
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers['resetLinks'];
        }
      } else {
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems['addCustomLink']) {
          _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems['addCustomLink'].nodes.outer.remove();
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems['addCustomLink'];
          _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems['resetLinks'].nodes.outer.remove();
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems['resetLinks'];
        }
      }
      return found ? key : null;
    }
  }
  addButton(removedKey, forceKey) {
    for (const key of Object.keys(this.sources)) {
      if (key === removedKey) {
        return;
      }
      const source = this.sources[key];
      const container = key === 'footer' ? _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.nodes.outer : _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].nodes.relativeDropdown;
      if (key !== forceKey && (container.classList.contains('is-hidden') || container.classList.contains('is_hidden'))) {
        continue;
      }
      const items = key === 'footer' ? _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers : _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems;
      for (const itemKey of Object.keys(items)) {
        const item = items[itemKey];
        if (!item.nodes.outer.dataset.linkId) {
          continue;
        }
        let panel;
        _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(item.nodes.outer, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
          className: "esgst-chfl-panel",
          ref: ref => panel = ref
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
          className: "esgst-chfl-edit-button fa fa-edit grey icon-grey"
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
          className: "esgst-chfl-remove-button fa fa-trash grey icon-grey"
        })));
        panel.firstElementChild.addEventListener('click', this.openPopup.bind(this, item, key));
        panel.lastElementChild.addEventListener('click', this.removeLink.bind(this, item, key));
      }
      let button;
      if (key === 'footer') {
        button = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.addLinkContainer({
          icon: 'fa fa-plus',
          name: 'Add Custom Link',
          position: 'beforeend',
          side: 'right',
          url: '#'
        });
      } else {
        button = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.addDropdownItem({
          buttonContainerId: source,
          description: 'Click here to add a custom link.',
          icon: 'fa fa-plus-circle grey icon-grey',
          name: 'Add Custom Link'
        });
      }
      button.nodes.outer.classList.add('esgst-chfl-button');
      button.nodes.outer.addEventListener('click', this.openPopup.bind(this, null, key));
      let resetButton;
      if (key === 'footer') {
        resetButton = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.addLinkContainer({
          icon: 'fa fa-undo',
          name: 'Reset Links',
          position: 'beforeend',
          side: 'right',
          url: '#'
        });
      } else {
        resetButton = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.addDropdownItem({
          buttonContainerId: source,
          description: 'Click here to reset the custom links.',
          icon: 'fa fa-undo grey icon-grey',
          name: 'Reset Links'
        });
      }
      resetButton.nodes.outer.classList.add('esgst-chfl-button');
      resetButton.nodes.outer.addEventListener('click', _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.createConfirmation.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common, 'Are you sure you want to reset the links? Any custom links you added will be deleted.', this.resetLinks.bind(this, key), null));
      return;
    }
  }
  openPopup(editItem, key, event) {
    try {
      event.preventDefault();
      let popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_7__["Popup"]({
        addScrollable: true,
        icon: editItem ? 'fa-edit' : 'fa-plus',
        isTemp: true,
        title: `${editItem ? 'Edit' : 'Add'} Custom Link`
      });
      let description = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.createElements(popup.description, 'beforeend', [{
        type: 'div',
        children: [{
          text: 'URL:',
          type: 'span'
        }, {
          attributes: {
            class: 'fa fa-question-circle',
            title: 'Instead of entering "https://www.steamgifts.com/url", you can simply enter "/url".'
          },
          type: 'i'
        }, {
          attributes: {
            class: 'esgst-switch-input esgst-switch-input-large',
            type: 'text'
          },
          type: 'input'
        }]
      }, {
        type: 'div',
        children: [{
          text: 'Color:',
          type: 'span'
        }, {
          attributes: {
            class: 'esgst-switch-input esgst-switch-input-large'
          },
          type: 'select',
          children: [{
            attributes: {
              value: 'grey'
            },
            text: 'Grey (Default)',
            type: 'option'
          }, {
            attributes: {
              value: 'blue'
            },
            text: 'Blue',
            type: 'option'
          }, {
            attributes: {
              value: 'green'
            },
            text: 'Green',
            type: 'option'
          }, {
            attributes: {
              value: 'red'
            },
            text: 'Red',
            type: 'option'
          }, {
            attributes: {
              value: 'yellow'
            },
            text: 'Yellow',
            type: 'option'
          }]
        }]
      }, {
        type: 'div',
        children: [{
          text: 'Icon:',
          type: 'span'
        }, {
          attributes: {
            href: 'https://fontawesome.com/v4.7.0/icons/'
          },
          type: 'a',
          children: [{
            attributes: {
              class: 'fa fa-question-circle',
              title: 'You must use an icon from FontAwesome (click on this icon to go to the FontAwesome page). The icon must be in the format "fa-icon", without the quotes.'
            },
            type: 'i'
          }]
        }, {
          attributes: {
            class: 'esgst-switch-input esgst-switch-input-large',
            type: 'text'
          },
          type: 'input'
        }]
      }, {
        type: 'div',
        children: [{
          text: 'Name:',
          type: 'span'
        }, {
          attributes: {
            class: 'esgst-switch-input esgst-switch-input-large',
            type: 'text'
          },
          type: 'input'
        }]
      }, {
        type: 'div',
        children: [{
          text: 'Description:',
          type: 'span'
        }, {
          attributes: {
            class: 'esgst-switch-input esgst-switch-input-large',
            type: 'text'
          },
          type: 'input'
        }]
      }]);
      let name = description.previousElementSibling;
      let icon = name.previousElementSibling;
      let color = icon.previousElementSibling;
      let url = color.previousElementSibling.lastElementChild;
      let compactSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_10__["ToggleSwitch"](popup.description, null, null, 'Use compact size.', false, false, 'The bottom/top padding of the link will be reduced to 8px.', false);
      description = description.lastElementChild;
      name = name.lastElementChild;
      icon = icon.lastElementChild;
      color = color.lastElementChild;
      if (key === 'footer') {
        color.parentElement.classList.add('esgst-hidden');
        description.parentElement.classList.add('esgst-hidden');
        compactSwitch.container.classList.add('esgst-hidden');
      }
      if (this.esgst.st) {
        description.parentElement.classList.add('esgst-hidden');
      }
      if (editItem) {
        const editId = editItem.nodes.outer.dataset.linkId;
        for (let i = _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`chfl_${key}`).length - 1; i > -1; i--) {
          let item = _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`chfl_${key}`)[i];
          if (item !== editId && (!item.id || item.id !== editId)) continue;
          if (item.id) {
            description.value = item.description || '';
            name.value = item.name || '';
            icon.value = item.icon || '';
            color.value = item.color || '';
            url.value = item.url || '';
            if (item.compact) {
              compactSwitch.enable();
            }
          } else {
            var _editItem$data$icon$m, _editItem$data$icon$m2;
            description.value = editItem.data.description || '';
            name.value = editItem.data.name;
            icon.value = editItem.data.icon ? (_editItem$data$icon$m = editItem.data.icon.match(/.+(fa-[a-z-]+)$/)) === null || _editItem$data$icon$m === void 0 ? void 0 : _editItem$data$icon$m[1] : '';
            color.value = editItem.data.icon ? (_editItem$data$icon$m2 = editItem.data.icon.match(/icon-(.+?)\s/)) === null || _editItem$data$icon$m2 === void 0 ? void 0 : _editItem$data$icon$m2[1] : '';
            url.value = editItem.data.url;
          }
          break;
        }
      }
      _components_Button__WEBPACK_IMPORTED_MODULE_11__["Button"].create([{
        color: 'green',
        icons: [editItem ? 'fa-edit' : 'fa-plus-circle'],
        name: editItem ? 'Edit' : 'Add',
        onClick: this.addLink.bind(this, color, compactSwitch, description, editItem, icon, key, name, popup, url)
      }, {
        template: 'loading',
        isDisabled: true,
        name: editItem ? 'Editing...' : 'Adding...'
      }]).insert(popup.description, 'beforeend');
      popup.open();
    } catch (error) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].error(error.message);
    }
  }
  async addLink(color, compactSwitch, description, editItem, icon, key, name, popup, url) {
    try {
      const item = {
        color: color.value,
        compact: compactSwitch.value ? 1 : 0,
        description: description.value,
        icon: icon.value,
        id: _components_Header__WEBPACK_IMPORTED_MODULE_12__["IHeader"].generateId(name.value),
        name: name.value,
        url: url.value
      };
      const setting = _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`chfl_${key}`);
      const source = this.sources[key];
      if (editItem) {
        const newId = editItem.data.id;
        const editId = editItem.nodes.outer.dataset.linkId;
        editItem.nodes.outer.remove();
        if (key === 'footer') {
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers[newId];
        } else {
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems[newId];
        }
        for (let i = setting.length - 1; i > -1; i--) {
          const subItem = setting[i];
          if (subItem.id) {
            if (subItem.id !== editId) continue;
            setting[i] = item;
            break;
          } else {
            if (subItem !== editId) continue;
            setting[i] = item;
            break;
          }
        }
      } else {
        setting.push(item);
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.setSetting(`chfl_${key}_${this.esgst.name}`, setting);
      let newItem;
      if (key === 'footer') {
        newItem = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.addLinkContainer({
          icon: `fa ${item.icon}`,
          name: item.name,
          side: 'right',
          url: item.url
        });
        newItem.nodes.outer.dataset.linkId = item.id;
        newItem.nodes.outer.dataset.linkKey = key;
        newItem.nodes.outer.title = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.getFeatureTooltip('chfl');
      } else {
        newItem = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.addDropdownItem({
          buttonContainerId: source,
          description: item.description,
          icon: `fa fa-fw ${item.icon} ${item.color} icon-${item.color}`,
          name: item.name,
          url: item.url
        });
        newItem.nodes.outer.dataset.linkId = item.id;
        newItem.nodes.outer.dataset.linkKey = key;
        newItem.nodes.outer.title = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.getFeatureTooltip('chfl');
        if (!item.description) {
          newItem.nodes.outer.classList.add('esgst-chfl-small');
        }
        if (item.compact) {
          newItem.nodes.outer.classList.add('esgst-chfl-compact');
        }
      }
      this.makeDraggable(newItem.nodes.outer);
      this.reorder(key);
      popup.close();
    } catch (error) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].error(error.message);
    }
  }
  async resetLinks(key, event) {
    try {
      event.preventDefault();
      event.stopPropagation();
      for (const obj of _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`chfl_${key}`)) {
        if (!obj.id) {
          continue;
        }
        const source = this.sources[key];
        const item = key === 'footer' ? _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers[obj.id] : _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems[obj.id];
        if (!item || !item.nodes.outer.dataset.linkId) {
          continue;
        }
        item.nodes.outer.remove();
        if (key === 'footer') {
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers[obj.id];
        } else {
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems[obj.id];
        }
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.setSetting(`chfl_${key}_${this.esgst.name}`, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].defaultValues[`chfl_${key}_${this.esgst.name}`]);
      this.reorder(key);
    } catch (error) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].error(error.message);
    }
  }
  removeLink(itemToRemove, key, event) {
    try {
      event.preventDefault();
      event.stopPropagation();
      const source = this.sources[key];
      const id = itemToRemove.nodes.outer.dataset.linkId;
      const item = key === 'footer' ? _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers[id] : _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems[id];
      if (item && item.nodes.outer.dataset.linkId) {
        item.nodes.outer.remove();
        if (key === 'footer') {
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].footer.linkContainers[id];
        } else {
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].header.buttonContainers[source].dropdownItems[id];
        }
      }
      this.saveOrder();
    } catch (error) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].error(error.message);
    }
  }
  checkKey(event) {
    try {
      let value = '';
      if (event.ctrlKey) {
        value += 'ctrlKey + ';
      } else if (event.shiftKey) {
        value += 'shiftKey + ';
      } else if (event.altKey) {
        value += 'altKey + ';
      }
      value += event.key.toLowerCase();
      if (value !== _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('chfl_key')) {
        return;
      }
      event.stopPropagation();
      const removedKey = this.removeButton();
      this.addButton(removedKey);
    } catch (error) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].logs(error.message);
    }
  }
}
const generalCustomHeaderFooterLinks = new GeneralCustomHeaderFooterLinks();


/***/ }),
/* 253 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CloudStorage", function() { return CloudStorage; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_Checkbox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(246);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_DropboxStorage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(254);
/* harmony import */ var _class_GoogleDriveStorage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(256);
/* harmony import */ var _class_OneDriveStorage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(257);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(212);













class CloudStorage {
  static get DROPBOX() {
    return 0;
  }
  static get GOOGLEDRIVE() {
    return 1;
  }
  static get ONEDRIVE() {
    return 2;
  }
  static async manage(service, data, dm, callback) {
    if (dm.type === 'export' || data && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('exportBackup')) {
      await CloudStorage.backup(service, data, dm, callback);
    } else {
      await CloudStorage.restore(service, dm, callback);
    }
  }
  static async backup(service, data, dm, callback) {
    const defaultFileName = `esgst_data_${new Date().toISOString().replace(/:/g, '_')}`;
    const fileName = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('askFileName') ? window.prompt(`Enter the name of the file:`, defaultFileName) : defaultFileName;
    if (fileName === null) {
      if (callback) {
        callback();
      }
      return;
    }
    let token = null;
    switch (service) {
      case CloudStorage.DROPBOX:
        token = await _class_DropboxStorage__WEBPACK_IMPORTED_MODULE_6__["DropboxStorage"].authenticate();
        break;
      case CloudStorage.GOOGLEDRIVE:
        token = await _class_GoogleDriveStorage__WEBPACK_IMPORTED_MODULE_7__["GoogleDriveStorage"].authenticate();
        break;
      case CloudStorage.ONEDRIVE:
        token = await _class_OneDriveStorage__WEBPACK_IMPORTED_MODULE_8__["OneDriveStorage"].authenticate();
        break;
    }
    data = JSON.stringify(data);
    try {
      switch (service) {
        case CloudStorage.DROPBOX:
          await _class_DropboxStorage__WEBPACK_IMPORTED_MODULE_6__["DropboxStorage"].upload(token, data, fileName);
          break;
        case CloudStorage.GOOGLEDRIVE:
          await _class_GoogleDriveStorage__WEBPACK_IMPORTED_MODULE_7__["GoogleDriveStorage"].upload(token, data, fileName);
          break;
        case CloudStorage.ONEDRIVE:
          await _class_OneDriveStorage__WEBPACK_IMPORTED_MODULE_8__["OneDriveStorage"].upload(token, data, fileName);
          break;
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('deleteOldBackups')) {
        let files = null;
        try {
          switch (service) {
            case CloudStorage.DROPBOX:
              files = await _class_DropboxStorage__WEBPACK_IMPORTED_MODULE_6__["DropboxStorage"].list(token);
              break;
            case CloudStorage.GOOGLEDRIVE:
              files = await _class_GoogleDriveStorage__WEBPACK_IMPORTED_MODULE_7__["GoogleDriveStorage"].list(token);
              break;
            case CloudStorage.ONEDRIVE:
              files = await _class_OneDriveStorage__WEBPACK_IMPORTED_MODULE_8__["OneDriveStorage"].list(token);
              break;
          }
          const now = Date.now();
          const fileIds = [];
          for (const file of files) {
            if (now - new Date(file.date).getTime() > _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('deleteOldBackups_days') * 86400000) {
              fileIds.push(file.id);
            }
          }
          const numFiles = fileIds.length;
          try {
            let result = null;
            switch (service) {
              case CloudStorage.DROPBOX:
                result = await _class_DropboxStorage__WEBPACK_IMPORTED_MODULE_6__["DropboxStorage"].deleteBatch(token, fileIds);
                break;
              case CloudStorage.GOOGLEDRIVE:
                result = await _class_GoogleDriveStorage__WEBPACK_IMPORTED_MODULE_7__["GoogleDriveStorage"].deleteBatch(token, fileIds);
                break;
              case CloudStorage.ONEDRIVE:
                result = await _class_OneDriveStorage__WEBPACK_IMPORTED_MODULE_8__["OneDriveStorage"].deleteBatch(token, fileIds);
                break;
            }
            const numError = result.error.length;
            if (numError > 0) {
              window.alert(`An error occurred when deleting ${numError} of the ${numFiles} old backup files.`);
              if (callback) {
                callback();
              }
              return;
            }
          } catch (error) {
            window.alert(`An error occurred when deleting the ${numFiles} old backup files.\n\n${error.message}`);
            if (callback) {
              callback();
            }
            return;
          }
        } catch (error) {
          window.alert(`An error occurred when listing the old backup files.\n\n${error.message}`);
          if (callback) {
            callback();
          }
          return;
        }
      }
      if (!dm.autoBackup) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createFadeMessage(dm.message, `Data ${dm.pastTense} with success!`);
      }
    } catch (error) {
      window.alert(`An error occurred when uploading the file.\n\n${error.message}`);
    }
    if (callback) {
      callback();
    }
  }
  static async restore(service, dm, callback) {
    let icon = null;
    let token = null;
    switch (service) {
      case CloudStorage.DROPBOX:
        icon = 'dropbox';
        token = await _class_DropboxStorage__WEBPACK_IMPORTED_MODULE_6__["DropboxStorage"].authenticate();
        break;
      case CloudStorage.GOOGLEDRIVE:
        icon = 'google';
        token = await _class_GoogleDriveStorage__WEBPACK_IMPORTED_MODULE_7__["GoogleDriveStorage"].authenticate();
        break;
      case CloudStorage.ONEDRIVE:
        icon = 'windows';
        token = await _class_OneDriveStorage__WEBPACK_IMPORTED_MODULE_8__["OneDriveStorage"].authenticate();
        break;
    }
    let isCanceled = true;
    const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
      addScrollable: true,
      icon: `fa-${icon}`,
      isTemp: true,
      title: `Select a file to restore:`
    });
    popup.onClose = () => {
      if (isCanceled && callback) {
        callback();
      }
    };
    popup.open();
    let filesContainer;
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popup.scrollable, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "popup__keys__list",
      ref: ref => filesContainer = ref
    }));
    let files = null;
    try {
      switch (service) {
        case CloudStorage.DROPBOX:
          files = await _class_DropboxStorage__WEBPACK_IMPORTED_MODULE_6__["DropboxStorage"].list(token);
          break;
        case CloudStorage.GOOGLEDRIVE:
          files = await _class_GoogleDriveStorage__WEBPACK_IMPORTED_MODULE_7__["GoogleDriveStorage"].list(token);
          break;
        case CloudStorage.ONEDRIVE:
          files = await _class_OneDriveStorage__WEBPACK_IMPORTED_MODULE_8__["OneDriveStorage"].list(token);
          break;
      }
    } catch (error) {
      window.alert(`An error occurred when listing the files.\n\n${error.message}`);
      if (callback) {
        callback();
      }
      return;
    }
    let selectedFiles = {};
    for (const file of files) {
      let item;
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(filesContainer, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "esgst-clickable esgst-restore-entry",
        ref: ref => item = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", null), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", null, `${file.name} - ${_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.convertBytes(file.size)}`), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-times-circle",
        title: "Delete file"
      })));
      const checkbox = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_4__["Checkbox"](item.firstElementChild);
      checkbox.onEnabled = () => selectedFiles[file.id] = {
        item
      };
      checkbox.onDisabled = () => delete selectedFiles[file.id];
      item.firstElementChild.nextElementSibling.addEventListener('click', () => {
        _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createConfirmation('Are you sure you want to restore the selected data?', async () => {
          isCanceled = false;
          popup.close();
          try {
            switch (service) {
              case CloudStorage.DROPBOX:
                dm.data = await _class_DropboxStorage__WEBPACK_IMPORTED_MODULE_6__["DropboxStorage"].download(token, file);
                break;
              case CloudStorage.GOOGLEDRIVE:
                dm.data = await _class_GoogleDriveStorage__WEBPACK_IMPORTED_MODULE_7__["GoogleDriveStorage"].download(token, file);
                break;
              case CloudStorage.ONEDRIVE:
                dm.data = await _class_OneDriveStorage__WEBPACK_IMPORTED_MODULE_8__["OneDriveStorage"].download(token, file);
                break;
            }
            dm.data = JSON.parse(dm.data);
          } catch (error) {
            window.alert(`An error occurred when downloading the file.\n\n${error.message}`);
            if (callback) {
              callback();
            }
            return;
          }
          _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.modules.manageData(dm, false, false, false, false, callback);
        });
      });
      item.lastElementChild.addEventListener('click', () => {
        _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createConfirmation(`WARNING: Are you sure you want to delete this file?`, async () => {
          const tempPopup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
            icon: 'fa-circle-o-notch fa-spin',
            isTemp: true,
            title: 'Deleting file...'
          });
          tempPopup.open();
          try {
            switch (service) {
              case CloudStorage.DROPBOX:
                await _class_DropboxStorage__WEBPACK_IMPORTED_MODULE_6__["DropboxStorage"].delete(token, file);
                break;
              case CloudStorage.GOOGLEDRIVE:
                await _class_GoogleDriveStorage__WEBPACK_IMPORTED_MODULE_7__["GoogleDriveStorage"].delete(token, file);
                break;
              case CloudStorage.ONEDRIVE:
                await _class_OneDriveStorage__WEBPACK_IMPORTED_MODULE_8__["OneDriveStorage"].delete(token, file);
                break;
            }
            item.remove();
            delete selectedFiles[file.id];
            tempPopup.setIcon('fa-check');
            tempPopup.setTitle('File deleted with success!');
          } catch (error) {
            tempPopup.setIcon('fa-times');
            tempPopup.setTitle(`An error occurred when deleting the file.\n\n${error.message}`);
          }
        });
      });
    }
    _components_Button__WEBPACK_IMPORTED_MODULE_12__["Button"].create([{
      color: 'green',
      icons: ['fa-trash'],
      name: 'Delete selected files',
      onClick: () => {
        return new Promise(resolve => {
          const fileIds = Object.keys(selectedFiles);
          const numFiles = fileIds.length;
          if (numFiles < 1) {
            resolve();
            return;
          }
          _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.createConfirmation(`WARNING: Are you sure you want to delete the selected files?`, async () => {
            const tempPopup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
              icon: 'fa-circle-o-notch fa-spin',
              isTemp: true,
              title: `Deleting ${numFiles} files...`
            });
            tempPopup.open();
            try {
              let result = null;
              switch (service) {
                case CloudStorage.DROPBOX:
                  result = await _class_DropboxStorage__WEBPACK_IMPORTED_MODULE_6__["DropboxStorage"].deleteBatch(token, fileIds);
                  break;
                case CloudStorage.GOOGLEDRIVE:
                  result = await _class_GoogleDriveStorage__WEBPACK_IMPORTED_MODULE_7__["GoogleDriveStorage"].deleteBatch(token, fileIds);
                  break;
                case CloudStorage.ONEDRIVE:
                  result = await _class_OneDriveStorage__WEBPACK_IMPORTED_MODULE_8__["OneDriveStorage"].deleteBatch(token, fileIds);
                  break;
              }
              for (const fileId of result.success) {
                if (!selectedFiles.hasOwnProperty(fileId)) {
                  continue;
                }
                selectedFiles[fileId].item.remove();
                delete selectedFiles[fileId];
              }
              const numError = result.error.length;
              if (numError > 0) {
                tempPopup.setIcon('fa-times');
                tempPopup.setTitle(`An error occurred when deleting ${numError} of the ${numFiles} files.`);
              } else {
                tempPopup.setIcon('fa-check');
                tempPopup.setTitle(`${numFiles} files deleted with success!`);
              }
            } catch (error) {
              tempPopup.setIcon('fa-times');
              tempPopup.setTitle(`An error occurred when deleting the ${numFiles} files.\n\n${error.message}`);
            }
            resolve();
          }, resolve);
        });
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Deleting...'
    }]).insert(popup.actions, 'beforebegin');
  }
}


/***/ }),
/* 254 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DropboxStorage", function() { return DropboxStorage; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(132);
/* harmony import */ var _ICloudStorage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(255);
/* harmony import */ var _FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);








/**
 * @see https://www.dropbox.com/developers/documentation/http/documentation
 */
class DropboxStorage extends _ICloudStorage__WEBPACK_IMPORTED_MODULE_5__["ICloudStorage"] {
  static get CLIENT_ID() {
    return 'nix7kvchwa8wdvj';
  }
  static get AUTH_URL() {
    return `https://www.dropbox.com/oauth2/authorize`;
  }
  static get API_BASE_URL() {
    return `https://api.dropboxapi.com/2`;
  }
  static get CONTENT_BASE_URL() {
    return `https://content.dropboxapi.com/2`;
  }
  static get UPLOAD_URL() {
    return `${DropboxStorage.CONTENT_BASE_URL}/files/upload`;
  }
  static get DOWNLOAD_URL() {
    return `${DropboxStorage.CONTENT_BASE_URL}/files/download`;
  }
  static get DELETE_URL() {
    return `${DropboxStorage.API_BASE_URL}/files/delete_v2`;
  }
  static get DELETE_BATCH_URL() {
    return `${DropboxStorage.API_BASE_URL}/files/delete_batch`;
  }
  static get DELETE_BATCH_CHECK_URL() {
    return `${DropboxStorage.API_BASE_URL}/files/delete_batch/check`;
  }
  static get LIST_URL() {
    return `${DropboxStorage.API_BASE_URL}/files/list_folder`;
  }
  static getDefaultHeaders(token) {
    return {
      authorization: `Bearer ${token}`
    };
  }
  static async authenticate() {
    const key = 'dropboxToken';
    const params = {
      client_id: DropboxStorage.CLIENT_ID,
      redirect_uri: DropboxStorage.REDIRECT_URL,
      response_type: 'token',
      state: 'dropbox'
    };
    const url = _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].addQueryParams(DropboxStorage.AUTH_URL, params);
    await _Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.delValue(key);
    _Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.openSmallWindow(url);
    return await DropboxStorage.getToken(key);
  }
  static async upload(token, data, fileName) {
    if (!token) {
      token = await DropboxStorage.authenticate();
    }
    const requestOptions = {
      data,
      fileName: _Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('backupZip') ? `${fileName}.json` : null,
      headers: Object.assign(DropboxStorage.getDefaultHeaders(token), {
        'Dropbox-API-Arg': _Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('backupZip') ? `{"path": "/${fileName}.zip"}` : `{"path": "/${fileName}.json"}`,
        'Content-Type': 'application/octet-stream'
      })
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].post(DropboxStorage.UPLOAD_URL, requestOptions);
    if (!response.json || !response.json.id) {
      throw new Error(response.text);
    }
  }
  static async download(token, fileInfo) {
    if (!token) {
      token = await DropboxStorage.authenticate();
    }
    const requestOptions = {
      blob: fileInfo.name.match(/\.zip$/),
      headers: Object.assign(DropboxStorage.getDefaultHeaders(token), {
        'Dropbox-API-Arg': `{"path": "/${fileInfo.name}"}`,
        'Content-Type': 'text/plain'
      })
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(DropboxStorage.DOWNLOAD_URL, requestOptions);
    return response.text;
  }
  static async delete(token, fileInfo) {
    if (!token) {
      token = await DropboxStorage.authenticate();
    }
    const requestOptions = {
      data: `{ "path": "/${fileInfo.name}" }`,
      headers: Object.assign(DropboxStorage.getDefaultHeaders(token), {
        'Content-Type': 'application/json'
      })
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].post(DropboxStorage.DELETE_URL, requestOptions);
    if (!response.json || response.json.error) {
      throw new Error(response.text);
    }
  }
  static async deleteBatch(token, fileIds) {
    if (!token) {
      token = await DropboxStorage.authenticate();
    }
    const output = {
      success: [],
      error: []
    };
    const batchRequests = JSON.stringify(fileIds.map(x => ({
      path: `/${x}`
    })));
    const requestOptions = {
      data: `{ "entries": ${batchRequests} }`,
      headers: Object.assign(DropboxStorage.getDefaultHeaders(token), {
        'Content-Type': 'application/json'
      })
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].post(DropboxStorage.DELETE_BATCH_URL, requestOptions);
    if (!response.json) {
      throw new Error(response.text);
    }
    if (response.json['.tag'] !== 'complete') {
      response.json = await DropboxStorage.waitDeleteBatch(token, response.json.async_job_id);
    }
    for (const file of response.json.entries) {
      if (file['.tag'] === 'success') {
        output.success.push(file.metadata.name);
      } else {
        output.error.push(file.metadata.name);
      }
    }
    return output;
  }
  static waitDeleteBatch(token, jobId) {
    return new Promise(resolve => {
      DropboxStorage.checkDeleteBatch(token, jobId, resolve);
    });
  }
  static async checkDeleteBatch(token, jobId, resolve) {
    const requestOptions = {
      data: `{ "async_job_id": ${JSON.stringify(jobId)} }`,
      headers: Object.assign(DropboxStorage.getDefaultHeaders(token), {
        'Content-Type': 'application/json'
      })
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].post(DropboxStorage.DELETE_BATCH_CHECK_URL, requestOptions);
    if (response.json && response.json['.tag'] === 'complete') {
      resolve(response.json);
    } else {
      window.setTimeout(DropboxStorage.checkDeleteBatch, 1000, token, jobId, resolve);
    }
  }
  static async list(token) {
    if (!token) {
      token = await DropboxStorage.authenticate();
    }
    const requestOptions = {
      data: `{ "path": "" }`,
      headers: Object.assign(DropboxStorage.getDefaultHeaders(token), {
        'Content-Type': 'application/json'
      })
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].post(DropboxStorage.LIST_URL, requestOptions);
    if (!response.json || !response.json.entries) {
      throw new Error(response.text);
    }
    return response.json.entries.reverse().map(x => (x.id = x.name) && (x.date = x.server_modified) && x);
  }
}


/***/ }),
/* 255 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ICloudStorage", function() { return ICloudStorage; });
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(132);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(122);


class ICloudStorage {
  static get REDIRECT_URL() {
    return `https://www.steamgifts.com/account/settings/profile`;
  }
  static getToken(key) {
    return new Promise(resolve => {
      ICloudStorage.checkToken(key, resolve);
    });
  }
  static async checkToken(key, resolve, startTime = Date.now(), timeout = 60000) {
    const token = await _Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].common.getValue(key);
    if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_1__["Utils"].isSet(token)) {
      resolve(token);
    } else if (startTime - Date.now() > timeout) {
      resolve(null);
    } else {
      window.setTimeout(ICloudStorage.checkToken, 1000, key, resolve, startTime, timeout);
    }
  }
}


/***/ }),
/* 256 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleDriveStorage", function() { return GoogleDriveStorage; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _ICloudStorage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(255);
/* harmony import */ var _FetchRequest__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(208);









/**
 * @see https://developers.google.com/drive/api/v3/reference/
 */
class GoogleDriveStorage extends _ICloudStorage__WEBPACK_IMPORTED_MODULE_6__["ICloudStorage"] {
  static get CLIENT_ID() {
    return '102804278399-95kit5e09mdskdta7eq97ra7tuj20qps.apps.googleusercontent.com';
  }
  static get AUTH_URL() {
    return `https://accounts.google.com/o/oauth2/v2/auth`;
  }
  static get BASE_URL() {
    return `https://www.googleapis.com`;
  }
  static get API_BASE_URL() {
    return `${GoogleDriveStorage.BASE_URL}/drive/v3`;
  }
  static get UPLOAD_METADATA_URL() {
    return `${GoogleDriveStorage.API_BASE_URL}/files`;
  }
  static get UPLOAD_URL() {
    return `${GoogleDriveStorage.BASE_URL}/upload/drive/v3/files/%fileId%`;
  }
  static get DOWNLOAD_URL() {
    return `${GoogleDriveStorage.API_BASE_URL}/files/%fileId%`;
  }
  static get DELETE_URL() {
    return `${GoogleDriveStorage.API_BASE_URL}/files/%fileId%`;
  }
  static get DELETE_BATCH_URL() {
    return `${GoogleDriveStorage.BASE_URL}/batch/drive/v3`;
  }
  static get LIST_URL() {
    return `${GoogleDriveStorage.API_BASE_URL}/files`;
  }
  static getDefaultHeaders(token) {
    return {
      authorization: `Bearer ${token}`
    };
  }
  static async authenticate() {
    const key = 'googleDriveToken';
    const params = {
      client_id: GoogleDriveStorage.CLIENT_ID,
      redirect_uri: GoogleDriveStorage.REDIRECT_URL,
      response_type: 'token',
      scope: `https://www.googleapis.com/auth/drive.appdata`,
      state: 'google-drive'
    };
    if (_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('usePreferredGoogle')) {
      params['login_hint'] = _Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('preferredGoogle');
    }
    const url = _FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].addQueryParams(GoogleDriveStorage.AUTH_URL, params);
    await _Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.delValue(key);
    _Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.openSmallWindow(url);
    return await GoogleDriveStorage.getToken(key);
  }
  static async upload(token, data, fileName) {
    if (!token) {
      token = await GoogleDriveStorage.authenticate();
    }
    const metadataRequestOptions = {
      data: _Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('backupZip') ? `{ "name": "${fileName}.zip", "parents": ["appDataFolder"]}` : `{"name": "${fileName}.json", "parents": ["appDataFolder"] }`,
      headers: Object.assign(GoogleDriveStorage.getDefaultHeaders(token), {
        'Content-Type': 'application/json'
      })
    };
    const metadataResponse = await _FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].post(GoogleDriveStorage.UPLOAD_METADATA_URL, metadataRequestOptions);
    if (!metadataResponse.json || !metadataResponse.json.id) {
      throw new Error(metadataResponse.text);
    }
    const requestOptions = {
      data,
      fileName: _Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('backupZip') ? `${fileName}.json` : null,
      headers: Object.assign(GoogleDriveStorage.getDefaultHeaders(token), {
        'Content-Type': _Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('backupZip') ? 'application/zip' : 'text/plain'
      }),
      pathParams: {
        fileId: metadataResponse.json.id
      },
      queryParams: {
        uploadType: 'media'
      }
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].patch(GoogleDriveStorage.UPLOAD_URL, requestOptions);
    if (!response.json || !response.json.id) {
      throw new Error(response.text);
    }
  }
  static async download(token, fileInfo) {
    if (!token) {
      token = await GoogleDriveStorage.authenticate();
    }
    const requestOptions = {
      blob: fileInfo.name.match(/\.zip$/),
      headers: Object.assign(GoogleDriveStorage.getDefaultHeaders(token), {}),
      pathParams: {
        fileId: fileInfo.id
      },
      queryParams: {
        alt: 'media'
      }
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].get(GoogleDriveStorage.DOWNLOAD_URL, requestOptions);
    return response.text;
  }
  static async delete(token, fileInfo) {
    if (!token) {
      token = await GoogleDriveStorage.authenticate();
    }
    const requestOptions = {
      headers: Object.assign(GoogleDriveStorage.getDefaultHeaders(token), {}),
      pathParams: {
        fileId: fileInfo.id
      }
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].delete(GoogleDriveStorage.DELETE_URL, requestOptions);
    if (response.text) {
      throw new Error(response.text);
    }
  }
  static async deleteBatch(token, fileIds) {
    if (!token) {
      token = await GoogleDriveStorage.authenticate();
    }
    const output = {
      success: [],
      error: []
    };
    // Google Drive only allows 100 file deletions per request
    for (let i = 0, n = fileIds.length; i < n; i += 100) {
      const chunk = fileIds.slice(i, i + 100);
      const formData = [];
      for (const fileId of chunk) {
        formData.push('--ESGST', 'Content-Type: application/http', '', `DELETE ${_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].addPathParams(GoogleDriveStorage.DELETE_URL, {
          fileId
        })}`, '', '');
      }
      formData.push('--ESGST--');
      const data = formData.join('\n');
      const requestOptions = {
        data,
        headers: Object.assign(GoogleDriveStorage.getDefaultHeaders(token), {
          'Content-Type': 'multipart/mixed; boundary=ESGST'
        })
      };
      const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].post(GoogleDriveStorage.DELETE_BATCH_URL, requestOptions);
      if (!response.text) {
        throw new Error(response.text);
      }
      const parts = response.text.replace(/\r?\n|\r/g, '\n').replace(/\n\n+/g, '\n\n').split(/--batch.*\n/).filter(x => x).map(x => x.split(/\n\n/)[2]);
      for (const [index, part] of parts.entries()) {
        if (part) {
          output.error.push(chunk[index]);
        } else {
          output.success.push(chunk[index]);
        }
      }
    }
    return output;
  }
  static async list(token) {
    if (!token) {
      token = await GoogleDriveStorage.authenticate();
    }
    const requestOptions = {
      headers: Object.assign(GoogleDriveStorage.getDefaultHeaders(token), {}),
      queryParams: {
        fields: `files(kind,id,name,mimeType,size,modifiedTime)`,
        spaces: 'appDataFolder'
      }
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].get(GoogleDriveStorage.LIST_URL, requestOptions);
    if (!response.json || !response.json.files) {
      throw new Error(response.text);
    }
    return response.json.files.map(x => (x.date = x.modifiedTime) && x);
  }
}


/***/ }),
/* 257 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OneDriveStorage", function() { return OneDriveStorage; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(132);
/* harmony import */ var _ICloudStorage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(255);
/* harmony import */ var _FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);








/**
 * @see https://docs.microsoft.com/en-us/onedrive/developer/rest-api/?view=odsp-graph-online
 */
class OneDriveStorage extends _ICloudStorage__WEBPACK_IMPORTED_MODULE_5__["ICloudStorage"] {
  static get CLIENT_ID() {
    return '1781429b-289b-4e6e-877a-e50015c0af21';
  }
  static get AUTH_URL() {
    return `https://login.microsoftonline.com/common/oauth2/v2.0/authorize`;
  }
  static get API_BASE_URL() {
    return `https://graph.microsoft.com/v1.0`;
  }
  static get UPLOAD_URL() {
    return `${OneDriveStorage.API_BASE_URL}/me/drive/special/approot:/%fileName%:/content`;
  }
  static get DOWNLOAD_URL() {
    return `${OneDriveStorage.API_BASE_URL}/me/drive/items/%fileId%/content`;
  }
  static get DELETE_URL() {
    return `${OneDriveStorage.API_BASE_URL}/me/drive/items/%fileId%`;
  }
  static get DELETE_BATCH_URL() {
    return `${OneDriveStorage.API_BASE_URL}/$batch`;
  }
  static get LIST_URL() {
    return `${OneDriveStorage.API_BASE_URL}/me/drive/special/approot/children`;
  }
  static getDefaultHeaders(token) {
    return {
      Authorization: `bearer ${token}`
    };
  }
  static async authenticate() {
    const key = 'oneDriveToken';
    const params = {
      client_id: OneDriveStorage.CLIENT_ID,
      redirect_uri: OneDriveStorage.REDIRECT_URL,
      response_type: 'token',
      scope: 'files.readwrite',
      state: 'onedrive'
    };
    if (_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('usePreferredMicrosoft')) {
      params['login_hint'] = _Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('preferredMicrosoft');
    }
    const url = _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].addQueryParams(OneDriveStorage.AUTH_URL, params);
    await _Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.delValue(key);
    _Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.openSmallWindow(url);
    return await OneDriveStorage.getToken(key);
  }
  static async upload(token, data, fileName) {
    if (!token) {
      token = await OneDriveStorage.authenticate();
    }
    const requestOptions = {
      anon: true,
      data,
      fileName: _Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('backupZip') ? `${fileName}.json` : null,
      headers: Object.assign(OneDriveStorage.getDefaultHeaders(token), {
        'Content-Type': _Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('backupZip') ? 'application/zip' : 'text/plain'
      }),
      pathParams: {
        fileName: `${fileName}.${_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('backupZip') ? 'zip' : 'json'}`
      }
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].put(OneDriveStorage.UPLOAD_URL, requestOptions);
    if (!response.json || !response.json.id) {
      throw new Error(response.text);
    }
  }
  static async download(token, fileInfo) {
    if (!token) {
      token = await OneDriveStorage.authenticate();
    }
    const requestOptions = {
      anon: true,
      blob: fileInfo.name.match(/\.zip$/),
      headers: Object.assign(OneDriveStorage.getDefaultHeaders(token), {}),
      pathParams: {
        fileId: fileInfo.id
      }
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(OneDriveStorage.DOWNLOAD_URL, requestOptions);
    return response.text;
  }
  static async delete(token, fileInfo) {
    if (!token) {
      token = await OneDriveStorage.authenticate();
    }
    const requestOptions = {
      anon: true,
      headers: Object.assign(OneDriveStorage.getDefaultHeaders(token), {}),
      pathParams: {
        fileId: fileInfo.id
      }
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].delete(OneDriveStorage.DELETE_URL, requestOptions);
    if (response.text) {
      throw new Error(response.text);
    }
  }
  static async deleteBatch(token, fileIds) {
    if (!token) {
      token = await OneDriveStorage.authenticate();
    }
    const output = {
      success: [],
      error: []
    };
    const batchRequests = JSON.stringify(fileIds.map(x => ({
      id: x,
      method: 'DELETE',
      url: `/me/drive/items/${x}`
    })));
    const requestOptions = {
      anon: true,
      data: `{ "requests": ${batchRequests} }`,
      headers: Object.assign(OneDriveStorage.getDefaultHeaders(token), {
        'Content-Type': 'application/json'
      })
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].post(OneDriveStorage.DELETE_BATCH_URL, requestOptions);
    if (!response.json || !response.json.responses) {
      throw new Error(response.text);
    }
    for (const batchResponse of response.json.responses) {
      if (batchResponse.status === 204) {
        output.success.push(batchResponse.id);
      } else {
        output.error.push(batchResponse.id);
      }
    }
    return output;
  }
  static async list(token) {
    if (!token) {
      token = await OneDriveStorage.authenticate();
    }
    const requestOptions = {
      anon: true,
      headers: Object.assign(OneDriveStorage.getDefaultHeaders(token), {})
    };
    const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(OneDriveStorage.LIST_URL, requestOptions);
    if (!response.json || !response.json.value) {
      throw new Error(response.text);
    }
    return response.json.value.reverse().map(x => (x.date = x.lastModifiedDateTime) && x);
  }
}


/***/ }),
/* 258 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalPageLoadTimestamp", function() { return generalPageLoadTimestamp; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(168);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);






class GeneralPageLoadTimestamp extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a timestamp indicating when the page was loaded to any page, in the preferred location.")),
      id: 'plt',
      name: 'Page Load Timestamp',
      inputItems: [{
        id: 'plt_format',
        prefix: `Timestamp format: `,
        tooltip: `ESGST uses date-fns v2.0.0-alpha.25, so check the accepted tokens here: https://date-fns.org/v2.0.0-alpha.25/docs/Getting-Started.`
      }],
      options: {
        title: `Position:`,
        values: ['Sidebar', 'Footer']
      },
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    const timestamp = Object(date_fns_format__WEBPACK_IMPORTED_MODULE_1__["default"])(Date.now(), _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('plt_format') || `MMM dd, yyyy, HH:mm:ss`);
    switch (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('plt_index')) {
      case 0:
        if (this.esgst.sidebar) {
          _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(this.esgst.sidebar, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("span", {
            className: "esgst-plt"
          }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("h3", {
            className: "sidebar__heading"
          }, "Page Load Timestamp"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
            className: "sidebar__navigation"
          }, timestamp)));
          break;
        }
      case 1:
        {
          if (!_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].footer) {
            return;
          }
          const linkContainer = _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].footer.addLinkContainer({
            name: `Page loaded on ${timestamp}`,
            side: 'left'
          });
          linkContainer.nodes.outer.classList.add('esgst-plt');
          break;
        }
    }
  }
}
const generalPageLoadTimestamp = new GeneralPageLoadTimestamp();


/***/ }),
/* 259 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalVisibleFullLevel", function() { return generalVisibleFullLevel; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(207);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(216);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(213);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






class GeneralVisibleFullLevel extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Displays the full level at the header, instead of only showing it when hovering over the level. For example, \"Level 5\" becomes \"Lvl 5.25\".")),
      id: 'vfl',
      name: 'Visible Full Level',
      sg: true,
      type: 'general'
    };
  }
  init() {
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_1__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_2__["Events"].LEVEL_UPDATED, this.update.bind(this));
    this.update(null, _class_Session__WEBPACK_IMPORTED_MODULE_3__["Session"].counters.level);
  }
  async update(oldLevel, newLevel) {
    const levelNode = _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].header.buttonContainers['account'].nodes.level;
    levelNode.textContent = `Lvl ${newLevel.full}`;
  }
}
const generalVisibleFullLevel = new GeneralVisibleFullLevel();


/***/ }),
/* 260 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysBlacklistGiveawayLoader", function() { return giveawaysBlacklistGiveawayLoader; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(144);





const createElements = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]),
  getElements = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].getElements.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]);
class GiveawaysBlacklistGiveawayLoader extends _class_Module__WEBPACK_IMPORTED_MODULE_3__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "If you cannot access a giveaway for blacklist reasons (either because you have blacklisted the creator or the creator has blacklisted you), this feature requests the giveaway in anonymous mode (as if you were not logged in) and loads it to you.")),
      id: 'bgl',
      name: 'Blacklist Giveaway Loader',
      sg: true,
      type: 'giveaways'
    };
  }
  async init() {
    if (!this.esgst.giveawayPath) return;
    let backup = Array.from(this.esgst.pageOuterWrap.children).map(x => {
      return {
        context: x
      };
    });
    let summary = document.getElementsByClassName('table--summary')[0];
    summary = summary && summary.lastElementChild.firstElementChild.lastElementChild;
    if (!summary) return;
    let match = summary.textContent.match(/you\s(have\s(been\s)?|previously\s)blacklisted/);
    if (!match) return;
    createElements(this.esgst.pageOuterWrap, 'atinner', [{
      attributes: {
        class: 'fa fa-circle-o-notch fa-spin'
      },
      type: 'i'
    }, {
      text: 'Loading giveaway...',
      type: 'span'
    }]);
    let responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_2__["FetchRequest"].get(window.location.pathname, {
      anon: true
    })).html;
    if (responseHtml.getElementsByClassName('table--summary')[0]) {
      createElements(this.esgst.pageOuterWrap, 'atinner', backup);
      createElements(this.esgst.pageOuterWrap.getElementsByClassName('table--summary')[0].lastElementChild.firstElementChild.lastElementChild, 'beforeend', [{
        type: 'br'
      }, {
        type: 'br'
      }, {
        attributes: {
          class: 'esgst-red'
        },
        text: 'This is a group/whitelist giveaway and therefore cannot be loaded by Blacklist Giveaway Loader.',
        type: 'span'
      }]);
    } else {
      this.esgst.featuredContainer = createElements(this.esgst.pageOuterWrap, 'beforebegin', [{
        attributes: {
          class: 'featured__container'
        },
        type: 'div'
      }]);
      createElements(this.esgst.featuredContainer, 'atinner', Array.from(responseHtml.getElementsByClassName('featured__container')[0].children).map(x => {
        return {
          context: x
        };
      }));
      createElements(this.esgst.pageOuterWrap, 'atinner', Array.from(responseHtml.getElementsByClassName('page__outer-wrap')[0].children).map(x => {
        return {
          context: x
        };
      }));
      await getElements();
      createElements(this.esgst.sidebar, 'afterbegin', [{
        attributes: {
          class: 'sidebar__error is-disabled'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'fa fa-exclamation-circle'
          },
          type: 'i'
        }, {
          text: `${match[1] ? match[1] === 'previously ' ? `Off Your Blacklist (${summary.firstElementChild.textContent})` : match[1] === 'have been ' ? 'You Are Blacklisted' : 'On Your Blacklist' : 'On Your Blacklist'}`,
          type: 'node'
        }]
      }]);
    }
  }
}
const giveawaysBlacklistGiveawayLoader = new GiveawaysBlacklistGiveawayLoader();


/***/ }),
/* 261 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalNarrowSidebar", function() { return generalNarrowSidebar; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);


class GeneralNarrowSidebar extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Keeps the sidebar narrowed in all pages.")),
      id: 'ns',
      name: 'Narrow Sidebar',
      sg: true,
      type: 'general'
    };
  }
  init() {
    if (!this.esgst.sidebar) return;
    this.esgst.sidebar.classList.remove('sidebar--wide');
    this.esgst.sidebar.classList.add('esgst-ns');
    this.esgst.sidebar.style.minWidth = `206px`;
    this.esgst.sidebar.style.width = `206px`;
  }
}
const generalNarrowSidebar = new GeneralNarrowSidebar();


/***/ }),
/* 262 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalHiddenCommunityPoll", function() { return generalHiddenCommunityPoll; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class GeneralHiddenCommunityPoll extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Hides the community poll (if there is one) of the main page.")),
      features: {
        hcp_v: {
          name: 'Only hide the poll if you already voted in it.',
          sg: true
        }
      },
      id: 'hcp',
      name: 'Hidden Community Poll',
      sg: true,
      type: 'general'
    };
  }
  init() {
    if (!this.esgst.giveawaysPath || !this.esgst.activeDiscussions) return;
    let poll = this.esgst.activeDiscussions.nextElementSibling;
    if (poll && poll.classList.contains('widget-container') && !poll.querySelector(`.block_header > [href="/happy-holidays"]`)) {
      if (!_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('hcp_v') || poll.querySelector('.table__row-outer-wrap.is-selected')) {
        poll.classList.add('esgst-hidden');
      }
    }
  }
}
const generalHiddenCommunityPoll = new GeneralHiddenCommunityPoll();


/***/ }),
/* 263 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsReversedActiveDiscussions", function() { return discussionsReversedActiveDiscussions; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




class DiscussionsReversedActiveDiscussions extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Reverses the active discussions so that discussions come before deals (original order).")),
      id: 'rad',
      name: 'Reversed Active Discussions',
      sg: true,
      sgPaths: /^Discussion|Giveaway|Browse\sGiveaways/,
      type: 'discussions'
    };
  }
  async init() {
    if (!(this.esgst.giveawaysPath || this.esgst.commentsPath || this.esgst.activeDiscussions) || _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('oadd')) {
      return;
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.activeDiscussions.insertBefore(_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.activeDiscussions.lastElementChild, _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.activeDiscussions.firstElementChild);
  }
}
const discussionsReversedActiveDiscussions = new DiscussionsReversedActiveDiscussions();


/***/ }),
/* 264 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsOldActiveDiscussionsDesign", function() { return discussionsOldActiveDiscussionsDesign; });
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(144);





const endless_load = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]);
class DiscussionsOldActiveDiscussionsDesign extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Brings back the SteamGifts' old active discussions design, while keeping the new \"Deals\" section."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Only one section (\"Discussions\" or \"Deals\") can be shown at a time. There is a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
        className: "fa fa-retweet"
      }), ") in the page heading of the active discussions that allows you to switch sections.")),
      features: {
        oadd_d: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "With this option enabled, the deals are included in the \"Discussions\" section instead of being exclusive to the \"Deals\" section.")),
          name: 'Show deals in the "Discussions" section.',
          sg: true
        }
      },
      id: 'oadd',
      name: 'Old Active Discussions Design',
      sg: true,
      type: 'discussions'
    };
  }
  async init() {
    if (!(this.esgst.giveawaysPath || this.esgst.commentsPath || this.esgst.activeDiscussions)) {
      return;
    }
    await this.oadd_load();
  }
  async oadd_load(refresh, callback) {
    let deals, dealsRows, dealsSwitch, discussions, discussionsRows, discussionsSwitch, i, j, response1Html, response2Html, revisedElements;
    let NumToDisplay = 7;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get(`adtd_sg`).enabled) {
      NumToDisplay = _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('activeDiscussions_displayed');
    }
    response1Html = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_1__["FetchRequest"].get('/discussions')).html;
    response2Html = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_1__["FetchRequest"].get('/discussions/deals')).html;
    this.esgst.activeDiscussions.classList.add('esgst-oadd');
    _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].insert(this.esgst.activeDiscussions, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      ref: ref => discussions = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "page__heading"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "esgst-heading-button",
      title: "Switch to Deals",
      ref: ref => discussionsSwitch = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
      className: "fa fa-retweet"
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "page__heading__breadcrumbs"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("a", {
      href: "/discussions"
    }, "Active Discussions")), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("a", {
      className: "page__heading__button page__heading__button--green",
      href: "/discussions"
    }, "More ", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
      className: "fa fa-angle-right"
    }))), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table__heading"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table__column--width-fill"
    }, "Summary"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Comments"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table__column--width-medium text-right"
    }, "Last Post")), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table__rows",
      ref: ref => discussionsRows = ref
    }))), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "esgst-hidden",
      ref: ref => deals = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "page__heading"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "esgst-heading-button",
      title: "Switch to Discussions",
      ref: ref => dealsSwitch = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
      className: "fa fa-retweet"
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "page__heading__breadcrumbs"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("a", {
      href: "/discussions/deals"
    }, "Active Deals")), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("a", {
      className: "page__heading__button page__heading__button--green",
      href: "/discussions/deals"
    }, "More ", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
      className: "fa fa-angle-right"
    }))), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table__heading"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table__column--width-fill"
    }, "Summary"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Comments"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table__column--width-medium text-right"
    }, "Last Post")), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "table__rows",
      ref: ref => dealsRows = ref
    })))));
    let preset = null;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('df') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('df_m') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('df_enable')) {
      let name = _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('df_preset');
      if (name) {
        let i;
        for (i = _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('df_presets').length - 1; i > -1 && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('df_presets')[i].name !== name; i--) {}
        if (i > -1) {
          preset = _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('df_presets')[i];
        }
      }
    }
    let elements = await this.esgst.modules.discussions.discussions_get(response1Html, true);
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('oadd_d')) {
      revisedElements = [];
      elements.forEach(element => {
        // @ts-ignore
        if (element.category !== 'Deals') {
          revisedElements.push(element);
        }
      });
      elements = revisedElements;
    }
    const filters = this.esgst.modules.discussionsDiscussionFilters.getFilters();
    for (i = 0, j = elements.length - 1; i < NumToDisplay && j > -1; j--) {
      if (!preset || this.esgst.modules.discussionsDiscussionFilters.filters_filterItem(filters, elements[j], preset.rules)) {
        // @ts-ignore
        discussionsRows.appendChild(elements[j].outerWrap);
        i += 1;
      }
    }
    elements = await this.esgst.modules.discussions.discussions_get(response2Html, true);
    for (i = 0, j = elements.length - 1; i < NumToDisplay && j > -1; j--) {
      if (!preset || this.esgst.modules.discussionsDiscussionFilters.filters_filterItem(filters, elements[j], preset.rules)) {
        // @ts-ignore
        dealsRows.appendChild(elements[j].outerWrap);
        i += 1;
      }
    }
    discussionsSwitch.addEventListener('click', () => {
      discussions.classList.add('esgst-hidden');
      deals.classList.remove('esgst-hidden');
    });
    dealsSwitch.addEventListener('click', () => {
      discussions.classList.remove('esgst-hidden');
      deals.classList.add('esgst-hidden');
    });
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('adots')) {
      this.esgst.modules.discussionsActiveDiscussionsOnTopSidebar.adots_load(refresh);
    } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('radb')) {
      this.esgst.modules.discussionsRefreshActiveDiscussionsButton.radb_addButtons();
    }
    if (refresh) {
      await endless_load(this.esgst.activeDiscussions);
      if (callback) {
        callback();
      }
    } else if (callback) {
      callback();
    }
  }
}
const discussionsOldActiveDiscussionsDesign = new DiscussionsOldActiveDiscussionsDesign();


/***/ }),
/* 265 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsActiveDiscussionsOnTopSidebar", function() { return discussionsActiveDiscussionsOnTopSidebar; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




class DiscussionsActiveDiscussionsOnTopSidebar extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Moves the active discussions to the top/sidebar of the page (you can decide where)."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "If you move it to the sidebar, some things will be changed to save some space:"), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "The username and avatar of the user who last posted to the discussion will be removed (the button to go to the last comment will remain)."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "If you have ", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
        "data-esgst-feature-id": "ags"
      }), " enabled, it will be hidden and only visible when hovering hover the search field.")), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "If you have ", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
        "data-esgst-feature-id": "at"
      }), " enabled, it will not run inside of the active discussions."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "If you have ", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
        "data-esgst-feature-id": "ut"
      }), " enabled, any user tags will be hidden inside of the active discussions(they will still be visible if you click on the tag button to edit them).")),
      id: 'adots',
      name: 'Active Discussions On Top/Sidebar',
      options: {
        title: `Move to:`,
        values: ['Top', 'Sidebar']
      },
      sg: true,
      sgPaths: /^Discussion|Giveaway|Browse\sGiveaways/,
      type: 'discussions'
    };
  }
  async init() {
    if (!(this.esgst.giveawaysPath || this.esgst.commentsPath || this.esgst.activeDiscussions) || _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('oadd')) {
      return;
    }
    await _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].common.checkMissingDiscussions();
  }
  adots_load(refresh) {
    let parent, panel, size, tabHeading1, tabHeading2, activeDiscussions, discussions, deals, element, elements, i, icon, n, comments, rows;
    if (this.esgst.activeDiscussions) {
      if (!refresh) {
        this.esgst.activeDiscussions.style.marginTop = '0px';
        this.esgst.activeDiscussions.classList.add('esgst-adots');
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get(`adtd_sg`).enabled) {
          this.esgst.modules.discussionsActiveDiscussionsToDisplay.adtd_remove();
        }
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('adots_index') === 0) {
        if (!refresh) {
          parent = this.esgst.activeDiscussions.parentElement;
          parent.insertBefore(this.esgst.activeDiscussions, parent.firstElementChild);
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('radb')) {
            this.esgst.modules.discussionsRefreshActiveDiscussionsButton.radb_addButtons();
          }
        } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('oadd') && _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('radb')) {
          this.esgst.modules.discussionsRefreshActiveDiscussionsButton.radb_addButtons();
        }
      } else {
        if (!refresh) {
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('ib')) {
            size = 45;
          } else {
            size = 35;
          }
          this.esgst.style.insertAdjacentText('beforeend', `
						.esgst-adots .table__row-inner-wrap >:first-child {
							float: left;
							width: ${size}px;
							height: ${size}px;
						}
						.esgst-adots .table__row-inner-wrap >:first-child >* {
							width: ${size}px;
							height: ${size}px;
						}
						.esgst-adots .table__row-inner-wrap >:last-child {
							margin-left: ${size + 5}px;
							text-align: left;
							width: auto;
						}
						.esgst-adots .table__column--width-fill {
							margin-left: 5px;
							vertical-align: top;
							width: calc(100% - ${size + 15}px);
						}
					`);
          _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(this.esgst.sidebar, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("h3", {
            className: "sidebar__heading esgst-adots-heading",
            ref: ref => panel = ref
          }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
            className: "esgst-adots-tab-heading esgst-selected",
            ref: ref => tabHeading1 = ref
          }, "Discussions"), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
            className: "esgst-adots-tab-heading",
            ref: ref => tabHeading2 = ref
          }, "Deals"), _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('radb') && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
            className: "esgst-radb-button",
            title: _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].common.getFeatureTooltip('radb', 'Refresh active discussions/deals'),
            onclick: event => {
              let icon = event.currentTarget.firstElementChild;
              icon.classList.add('fa-spin');
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('oadd')) {
                // noinspection JSIgnoredPromiseFromCall
                this.esgst.modules.discussionsOldActiveDiscussionsDesign.oadd_load(true, () => icon.classList.remove('fa-spin'));
              } else {
                _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].common.checkMissingDiscussions(true, () => icon.classList.remove('fa-spin'));
              }
            }
          }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
            className: "fa fa-refresh"
          })), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
            className: "esgst-float-right sidebar__navigation__item__name",
            href: "/discussions"
          }, "More")));
        }
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('oadd')) {
          discussions = this.esgst.activeDiscussions.firstElementChild;
          deals = this.esgst.activeDiscussions.lastElementChild;
          discussions.firstElementChild.remove();
          discussions.firstElementChild.firstElementChild.remove();
          deals.firstElementChild.remove();
          deals.firstElementChild.firstElementChild.remove();
          elements = this.esgst.activeDiscussions.getElementsByClassName('table__column--last-comment');
          for (i = 0, n = elements.length; i < n; ++i) {
            icon = elements[0].getElementsByClassName('table__last-comment-icon')[0];
            if (icon) {
              icon.classList.add('esgst-float-right');
              elements[0].previousElementSibling.appendChild(icon);
            }
            elements[0].remove();
          }
          if (!refresh) {
            discussions = discussions.firstElementChild.firstElementChild;
            deals = deals.firstElementChild.firstElementChild;
          }
        } else {
          let discussionsIndex = 1;
          let dealsIndex = 0;
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('rad')) {
            discussionsIndex = 0;
            dealsIndex = 1;
          }
          if (refresh) {
            rows = document.getElementsByClassName('table');
            discussions = rows[discussionsIndex];
            deals = rows[dealsIndex];
          } else {
            discussions = this.esgst.activeDiscussions.lastElementChild.firstElementChild.lastElementChild;
            deals = this.esgst.activeDiscussions.firstElementChild.firstElementChild.lastElementChild;
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('rad')) {
              const temp = discussions;
              discussions = deals;
              deals = temp;
            }
          }
          elements = discussions.getElementsByClassName('table__row-outer-wrap');
          for (i = 0, n = elements.length; i < n; ++i) {
            element = elements[i];
            comments = element.getElementsByClassName('table__column__secondary-link')[0];
            parent = comments.parentElement;
            _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(parent, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("p", {
              ref: ref => panel = ref
            }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
              style: {
                clear: 'both'
              }
            })));
            panel.appendChild(comments);
            if (parent.lastElementChild.classList.contains('table__last-comment-icon')) {
              parent.lastElementChild.classList.add('esgst-float-right');
              panel.appendChild(parent.lastElementChild);
            }
            parent.remove();
          }
          elements = deals.getElementsByClassName('table__row-outer-wrap');
          for (i = 0, n = elements.length; i < n; ++i) {
            element = elements[i];
            comments = element.getElementsByClassName('table__column__secondary-link')[0];
            parent = comments.parentElement;
            _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(parent, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("p", {
              ref: ref => panel = ref
            }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
              style: {
                clear: 'both'
              }
            })));
            panel.appendChild(comments);
            if (parent.lastElementChild.classList.contains('table__last-comment-icon')) {
              parent.lastElementChild.classList.add('esgst-float-right');
              panel.appendChild(parent.lastElementChild);
            }
            parent.remove();
          }
        }
        if (!tabHeading1) {
          tabHeading1 = discussions.parentElement.previousElementSibling.firstElementChild;
          tabHeading2 = tabHeading1.nextElementSibling;
        }
        if (tabHeading1.classList.contains('esgst-selected')) {
          deals.classList.add('esgst-hidden', 'esgst-adots');
          discussions.classList.add('esgst-adots');
          discussions.classList.remove('esgst-hidden');
        } else {
          discussions.classList.add('esgst-hidden', 'esgst-adots');
          deals.classList.add('esgst-adots');
          deals.classList.remove('esgst-hidden');
        }
        if (!refresh) {
          _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(this.esgst.sidebar, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
            ref: ref => activeDiscussions = ref,
            className: "esgst-adots-container"
          }));
          activeDiscussions.appendChild(discussions);
          activeDiscussions.appendChild(deals);
          tabHeading1.addEventListener('click', this.adots_changeTab.bind(this, tabHeading1, tabHeading2));
          tabHeading2.addEventListener('click', this.adots_changeTab.bind(this, tabHeading1, tabHeading2));
          this.esgst.activeDiscussions.remove();
          this.esgst.activeDiscussions = activeDiscussions;
          const fanaticalContainer = document.querySelector(".sidebar .fanatical_container");
          if (this.esgst.sidebar && fanaticalContainer) {
            this.esgst.sidebar.appendChild(fanaticalContainer.parentElement);
          }
        }
      }
    }
  }
  adots_changeTab(button1, button2, event) {
    if (button1.classList.contains('esgst-selected') && event.currentTarget === button2 || button2.classList.contains('esgst-selected') && event.currentTarget === button1) {
      button1.classList.toggle('esgst-selected');
      button2.classList.toggle('esgst-selected');
      button1.parentElement.nextElementSibling.firstElementChild.classList.toggle('esgst-hidden');
      button1.parentElement.nextElementSibling.lastElementChild.classList.toggle('esgst-hidden');
    }
  }
}
const discussionsActiveDiscussionsOnTopSidebar = new DiscussionsActiveDiscussionsOnTopSidebar();


/***/ }),
/* 266 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalElementFilters", function() { return generalElementFilters; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





class GeneralElementFilters extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to hide elements in any page using CSS selectors."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "If you do not know how to use CSS selectors or you are having trouble hiding an element, leave a comment in the ESGST thread with a description/image of the element that you want to hide and I will give you the selector that you have to use."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Here are some quick examples:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "To hide the \"Redeem\" button in your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/won"
      }, "won"), " page, use:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("code", null, ".table__column__key__redeem")), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "To hide the featured giveaway container (the big giveaway) in the main page, use:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("code", null, "[esgst.giveawaysPath].featured__container")), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "To hide the pinned giveaways (the multiple copy giveaways) in the main page, use:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("code", null, "[esgst.giveawaysPath].pinned-giveaways__outer-wrap")))),
      inputItems: [{
        id: 'ef_filters',
        prefix: `Filters: `,
        tooltip: `Separate each selector by a comma followed by a space, for example: .class_1, .class_2, #id`
      }],
      id: 'ef',
      name: 'Element Filters',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    this.ef_hideElements(document);
    this.esgst.endlessFeatures.push(this.ef_hideElements.bind(this));
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('sal') || !this.esgst.wonPath) return;
    this.esgst.endlessFeatures.push(this.esgst.modules.giveawaysSteamActivationLinks.sal_addObservers.bind(this.esgst.modules.giveawaysSteamActivationLinks));
  }
  ef_hideElements(context, main, source, endless) {
    if (context === document && main) return;
    _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('ef_filters').split(`, `).forEach(filter => {
      if (!filter) return;
      try {
        const property = filter.match(/\[esgst\.(.+)]/);
        if (property) {
          if (!this.esgst[property[1]]) return;
          filter = filter.replace(/\[esgst\..+]/, '');
        }
        const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} ${filter}, .esgst-es-page-${endless}${filter}` : `${filter}`}`);
        for (let i = elements.length - 1; i > -1; i--) {
          elements[i].classList.add('esgst-hidden');
        }
      } catch (e) {
        /**/
      }
    });
  }
}
const generalElementFilters = new GeneralElementFilters();


/***/ }),
/* 267 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveaways_addToStorage", function() { return giveaways_addToStorage; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);



const addGiveawayToStorage = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].addGiveawayToStorage.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class Giveaways_addToStorage extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      endless: true,
      id: 'giveaways_addToStorage'
    };
  }
  init() {
    if ((_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('lpv') || _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('cewgd') || _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('gc') && _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('gc_gi')) && this.esgst.giveawayPath && document.referrer === `https://www.steamgifts.com/giveaways/new`) {
      addGiveawayToStorage();
    }
  }
}
const giveaways_addToStorage = new Giveaways_addToStorage();


/***/ }),
/* 268 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalAttachedImageCarousel", function() { return generalAttachedImageCarousel; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




const createElements = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class GeneralAttachedImageCarousel extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-image"
      }), ") to the main page heading of any page that allows you to navigate through a carousel containing all of the attached images in the page."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "The carousel can also be opened by clicking on any attached image in the page.")),
      features: {
        aic_b: {
          name: 'Only trigger the carousel when clicking on the button in the main page heading.',
          sg: true,
          st: true
        }
      },
      id: 'aic',
      name: 'Attached Image Carousel',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    this.esgst.endlessFeatures.push(this.aic_getImages.bind(this));
    this.esgst.documentEvents.keydown.add(this.aic_move.bind(this));
    if (!this.esgst.mainPageHeading) return;
    this.aicButton = createHeadingButton({
      id: 'aic',
      icons: ['fa-image'],
      title: 'View attached images'
    });
    this.aicButton.classList.add('esgst-hidden');
    this.aicButton.addEventListener('click', this.aic_openCarousel.bind(this, 0, null));
  }
  aic_move(event) {
    if (event.key === 'ArrowLeft' && this.aicPrevious) {
      this.aicPrevious.click();
    }
    if (event.key === 'ArrowRight' && this.aicNext) {
      this.aicNext.click();
    }
  }
  aic_getImages(context, main, source, endless) {
    let buttons = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .comment__toggle-attached, .esgst-es-page-${endless}.comment__toggle-attached` : '.comment__toggle-attached'}, ${endless ? `.esgst-es-page-${endless} .view_attached, .esgst-es-page-${endless}.view_attached` : '.view_attached'}`);
    let found = false;
    for (let i = 0, n = buttons.length; i < n; i++) {
      let button = buttons[i];
      let image = button.nextElementSibling.firstElementChild;
      let url = image.getAttribute('src');
      let index = this.esgst.attachedImages.length;
      if (!_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('aic_b')) {
        image.addEventListener('click', this.aic_openCarousel.bind(this, index));
      }
      let comment = button.closest('.comment');
      this.esgst.attachedImages.push({
        button: button,
        image: image,
        outerWrap: button,
        qiv: context.getAttribute && context.getAttribute('data-esgst-qiv'),
        source: comment && comment.querySelector('.comment__summary').id,
        url: url
      });
      found = true;
    }
    if (!found || !this.aicButton) {
      return;
    }
    this.aicButton.classList.remove('esgst-hidden');
  }
  aic_openCarousel(i, event) {
    if (event) {
      event.preventDefault();
      event.stopPropagation();
    }
    let carousel = createElements(document.body, 'beforeend', [{
      attributes: {
        class: 'esgst-popup-modal esgst-aic-carousel'
      },
      type: 'div'
    }]);
    carousel.style.zIndex = 1000 + document.querySelectorAll(`.esgst-popup:not(.esgst-hidden), .esgst-popout:not(.esgst-hidden)`).length;
    carousel.addEventListener('click', this.aic_removeCarousel.bind(this));
    this.aic_showImage(carousel, i);
  }
  aic_removeCarousel(event) {
    if (event.target.closest('.esgst-aic-panel') || event.target.closest('img')) return;
    event.currentTarget.remove();
  }
  aic_showImage(carousel, i) {
    let attachedImage, height, image, n, panel;
    n = this.esgst.attachedImages.length;
    attachedImage = this.esgst.attachedImages[i];
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('ail')) {
      attachedImage.image.setAttribute('src', attachedImage.url);
    }
    const items = [{
      attributes: {
        class: 'esgst-aic-left-button'
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'fa fa-chevron-left'
        },
        type: 'i'
      }]
    }, {
      attributes: {
        class: 'esgst-aic-right-button'
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'fa fa-chevron-right'
        },
        type: 'i'
      }]
    }, {
      text: `${i + 1}/${n}`,
      type: 'div'
    }];
    if (attachedImage.source) {
      items.push({
        attributes: {
          class: 'esgst-aic-source'
        },
        type: 'div',
        children: [{
          // @ts-ignore
          attributes: {
            href: `#${attachedImage.source}`
          },
          text: 'Source',
          type: 'a'
        }]
      });
    }
    const imageNode = attachedImage.image.cloneNode(true);
    imageNode.classList.remove('is_hidden', 'is-hidden');
    const imageClass = imageNode.querySelector(`.is_hidden, .is-hidden`);
    if (imageClass) {
      imageNode.classList.remove('is_hidden', 'is-hidden');
    }
    createElements(carousel, 'atinner', [{
      attributes: {
        class: 'esgst-aic-panel'
      },
      type: 'div',
      children: items
    }, {
      attributes: {
        href: attachedImage.url,
        rel: 'nofollow noreferrer',
        target: '_blank'
      },
      type: 'a',
      children: [{
        context: imageNode
      }]
    }]);
    panel = carousel.firstElementChild;
    image = panel.nextElementSibling;
    height = panel.offsetHeight + 25;
    image.style.maxHeight = `calc(90% - ${height}px)`;
    image.style.marginTop = `${height}px`;
    image.firstElementChild.onload = this.aic_resizeImage.bind(this, image);
    this.aicPrevious = panel.firstElementChild;
    this.aicNext = this.aicPrevious.nextElementSibling;
    if (i > 0) {
      this.aicPrevious.addEventListener('click', this.aic_showImage.bind(this, carousel, i - 1));
    } else {
      this.aicPrevious.classList.add('esgst-disabled');
    }
    if (i < n - 1) {
      this.aicNext.addEventListener('click', this.aic_showImage.bind(this, carousel, i + 1));
    } else {
      this.aicNext.classList.add('esgst-disabled');
    }
    if (attachedImage.source) {
      panel.lastElementChild.addEventListener('click', () => {
        carousel.remove();
        if (attachedImage.qiv && this.esgst.qiv.popout) {
          this.esgst.qiv.popout.open();
        }
      });
    }
  }
  aic_resizeImage(image) {
    image.firstElementChild.style.maxHeight = `${image.offsetHeight - 10}px`;
    image.firstElementChild.style.maxWidth = `${image.offsetWidth - 10}px`;
  }
}
const generalAttachedImageCarousel = new GeneralAttachedImageCarousel();


/***/ }),
/* 269 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysFollowedGamesPage", function() { return giveawaysFollowedGamesPage; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(212);







class GiveawaysFollowedGamesPage extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a new giveaway page where you can see open giveaways for all of your followed games."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "To access this page, use the sidebar navigation from the main page.")),
      id: 'fgp',
      name: 'Followed Games Page',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.customPages.fgp = {
      check: _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.isCurrentPath('Browse Giveaways'),
      load: async () => await this.load()
    };
    const sidebarLink = document.querySelector('.sidebar__navigation__item__link[href="/giveaways/search?type=wishlist"]');
    if (sidebarLink) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].insert(sidebarLink.parentElement, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", {
        className: "sidebar__navigation__item"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
        className: "sidebar__navigation__item__link",
        href: "/giveaways/search?esgst=fgp"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("div", {
        className: "sidebar__navigation__item__name"
      }, "Followed"), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("div", {
        className: "sidebar__navigation__item__underline"
      }))));
    }
  }
  async load() {
    const obj = {
      container: _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.pagination.previousElementSibling,
      context: null,
      count: 0,
      leftovers: [],
      page: 1,
      perPage: 50,
      reachedEnd: false,
      set: null,
      url: `${_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.path}/search?page=`
    };
    _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].insert(obj.container, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("div", {
      ref: ref => obj.context = ref
    }));
    obj.button = _components_Button__WEBPACK_IMPORTED_MODULE_6__["Button"].create([{
      color: 'green',
      icons: [],
      name: 'Load More',
      onClick: async () => await this.loadNextPage(obj)
    }, {
      color: 'white',
      isDisabled: true,
      icons: [],
      name: 'Loading...'
    }]).insert(obj.container, 'beforeend');
    obj.button.onClick();
  }
  async loadNextPage(obj) {
    let context;
    _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].insert(obj.context, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("div", {
      ref: ref => context = ref
    }));
    obj.count = 0;
    while (obj.leftovers.length > 0 && obj.count < obj.perPage) {
      const leftover = obj.leftovers.splice(0, 1)[0];
      context.appendChild(leftover);
      obj.count += 1;
    }
    if (obj.count === obj.perPage) {
      await _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.endless_load(context, true);
      return;
    }
    if (obj.reachedEnd) {
      obj.button.destroy();
      return;
    }
    do {
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__["FetchRequest"].get(`${obj.url}${obj.page}`);
      const html = response.html;
      const elements = html.querySelectorAll('.giveaway__row-outer-wrap');
      for (const element of elements) {
        const gameInfo = await _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.modules.games.games_getInfo(element);
        if (gameInfo && _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.games[gameInfo.type][gameInfo.id] && _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.games[gameInfo.type][gameInfo.id].followed) {
          if (obj.count < obj.perPage) {
            context.appendChild(element.cloneNode(true));
            obj.count += 1;
          } else {
            obj.leftovers.push(element.cloneNode(true));
          }
        }
      }
      obj.page += 1;
      const pagination = html.querySelector('.pagination__navigation');
      obj.reachedEnd = !pagination || pagination.lastElementChild.classList.contains(_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.selectedClass);
    } while (!obj.reachedEnd && obj.count < obj.perPage);
    await _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.endless_load(context, true);
  }
}
const giveawaysFollowedGamesPage = new GiveawaysFollowedGamesPage();


/***/ }),
/* 270 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysArchiveSearcher", function() { return giveawaysArchiveSearcher; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(221);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(97);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(212);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(218);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(224);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(144);














const endless_load = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]);
class GiveawaysArchiveSearcher extends _class_Module__WEBPACK_IMPORTED_MODULE_6__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to search the archive by exact title or app id."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "To search by exact title, wrap the title in double quotes, for example: \"Dream\""), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "To search by app id, use the \"id:[id]\" format, for example: id:229580")),
      features: {
        as_t: {
          name: 'Open results in a new tab.',
          sg: true
        }
      },
      id: 'as',
      name: 'Archive Searcher',
      sg: true,
      type: 'giveaways'
    };
  }
  async init() {
    this.esgst.customPages.as = {
      check: this.esgst.archivePath,
      load: async () => await this.as_init({})
    };
    if (!this.esgst.archivePath) return;
    let input = document.querySelector('.sidebar__search-input');
    const temp = input.parentElement;
    input.outerHTML = `${input.outerHTML}`;
    input = temp.firstElementChild;
    input.addEventListener('keypress', event => {
      if (event.key === 'Enter') {
        event.stopImmediatePropagation();
        if (input.value.match(/"|id:/)) {
          this.as_openPage(input);
        } else {
          window.location.href = `${this.esgst.path}/search?q=${encodeURIComponent(input.value)}`;
        }
      }
    }, true);
  }
  as_openPage(input) {
    const match = input.value.match(/"(.+?)"|id:(.+)/);
    let query = '';
    let isAppId = false;
    if (match[1]) {
      query = match[1];
    } else {
      query = match[2];
      isAppId = true;
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('as_t')) {
      window.location.href = `?esgst=as&query=${encodeURIComponent(query)}${isAppId ? `&isAppId=true` : ''}`;
    } else {
      this.as_init({
        query,
        isAppId,
        isPopup: true
      });
    }
  }
  async as_init(obj) {
    if (!obj.isPopup) {
      obj.query = decodeURIComponent(this.esgst.parameters.query);
      obj.isAppId = !!this.esgst.parameters.isAppId;
    }
    if (!obj.query) {
      return;
    }
    if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['steamCommunity']]))) {
      return;
    }
    let container = null;
    let context = null;
    if (obj.isPopup) {
      const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_8__["Popup"]({
        addScrollable: 'left',
        isTemp: true
      });
      container = popup.description;
      context = popup.scrollable;
      popup.open();
    } else {
      container = context = this.esgst.sidebar.nextElementSibling;
      context.setAttribute('data-esgst-popup', 'true');
      context.innerHTML = '';
    }
    _components_PageHeading__WEBPACK_IMPORTED_MODULE_12__["PageHeading"].create('as', [{
      name: 'ESGST',
      url: this.esgst.settingsUrl
    }, {
      name: 'Archive Searcher',
      url: `?esgst=as`
    }]).insert(container, 'afterbegin');
    obj.context = context;
    const progressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_11__["NotificationBar"].create().insert(container, 'beforeend').setLoading('Retrieving game title...');

    // retrieve the game title from Steam
    if (obj.isAppId) {
      let title = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`https://steamcommunity.com/app/${obj.query}`)).html.getElementsByClassName('apphub_AppName')[0];
      if (title) {
        obj.query = title.textContent;
      } else {
        progressBar.setError('Game title not found. Make sure you are entering a valid AppID. For example, 229580 is the AppID for Dream (http://steamcommunity.com/app/229580).');
        return;
      }
    }
    progressBar.reset().hide();
    obj.query = (obj.query.length >= 50 ? obj.query.slice(0, 50) : obj.query).toLowerCase();
    obj.page = 1;
    obj.url = `${this.esgst.path}/search?q=${encodeURIComponent(obj.query)}&page=`;
    obj.leftovers = [];
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(obj.context, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      ref: ref => obj.container = ref
    }));
    const button = _components_Button__WEBPACK_IMPORTED_MODULE_10__["Button"].create([{
      color: 'green',
      icons: [],
      name: 'Load More',
      onClick: async () => await this.as_request(obj)
    }, {
      color: 'white',
      isDisabled: true,
      icons: [],
      name: 'Loading...'
    }]).insert(obj.context, 'beforeend');
    button.onClick();
  }
  async as_request(obj) {
    obj.count = 0;
    let context;
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(obj.container, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      ref: ref => context = ref
    }));
    while (obj.leftovers.length && obj.count < 25) {
      const leftover = obj.leftovers.splice(0, 1)[0];
      context.appendChild(leftover);
      obj.count += 1;
    }
    let pagination = null;
    do {
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`${obj.url}${obj.page}`);
      const responseHtml = response.html;
      const elements = responseHtml.querySelectorAll('.table__row-outer-wrap');
      for (const element of elements) {
        if (element.querySelector('.table__column__heading').textContent.match(/(.+?)( \(.+ Copies\))?$/)[1].toLowerCase() === obj.query) {
          if (obj.count < 25) {
            context.appendChild(element.cloneNode(true));
            obj.count += 1;
          } else {
            obj.leftovers.push(element.cloneNode(true));
          }
        }
      }
      obj.page += 1;
      pagination = responseHtml.querySelector('.pagination__navigation');
    } while (obj.count < 25 && pagination && !pagination.lastElementChild.classList.contains(this.esgst.selectedClass));
    await endless_load(context);
  }
}
const giveawaysArchiveSearcher = new GiveawaysArchiveSearcher();


/***/ }),
/* 271 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalCakeDayReminder", function() { return generalCakeDayReminder; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(96);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(132);
/* harmony import */ var _class_Table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(272);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(212);










class GeneralCakeDayReminder extends _class_Module__WEBPACK_IMPORTED_MODULE_3__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Shows a popup reminding you of your cake day on SteamGifts."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "You can set it to remind you a specified number of days before your cake day.")),
      features: {
        cdr_b: {
          inputItems: [{
            id: 'cdr_days',
            prefix: `Days: `
          }],
          name: 'Remind you a specified number of days before your cake day.',
          sg: true
        },
        cdr_d: {
          name: 'Remind you on your cake day.',
          sg: true
        },
        cdr_a: {
          inputItems: [{
            id: 'cdr_aDays',
            prefix: `Days: `
          }],
          name: 'Remind you a specified number of days after your cake day.',
          sg: true
        }
      },
      id: 'cdr',
      name: 'Cake Day Reminder',
      sg: true,
      type: 'general'
    };
  }
  async init() {
    _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.profileFeatures.push(this.addButton.bind(this));
    const cdrObj = {
      cache: JSON.parse(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_2__["LocalStorage"].get('cdrCache', '{}')),
      currentDate: new Date(),
      elements: [[{
        size: 'fill',
        value: 'User'
      }, {
        size: 'fill',
        value: 'When'
      }]]
    };
    cdrObj.currentYear = cdrObj.currentDate.getFullYear();
    cdrObj.currentTime = cdrObj.currentDate.getTime();
    this.checkUser(cdrObj, _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('steamId'), {
      cdr: {
        a: _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cdr_a'),
        aDays: parseFloat(_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cdr_aDays')),
        b: _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cdr_b'),
        bDays: parseFloat(_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cdr_days')),
        d: _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cdr_d')
      },
      registrationDate: parseInt(_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('registrationDate'))
    });
    for (const steamId in _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.users.users) {
      const user = _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.users.users[steamId];
      if (steamId === _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('steamId') || !user.cdr && !user.registrationDate) {
        continue;
      }
      this.checkUser(cdrObj, steamId, user);
    }
    if (cdrObj.elements.length > 1) {
      _class_LocalStorage__WEBPACK_IMPORTED_MODULE_2__["LocalStorage"].set('cdrCache', JSON.stringify(cdrObj.cache));
      const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_4__["Popup"]({
        addScrollable: true,
        icon: 'fa-birthday-cake',
        isTemp: true,
        title: `ESGST reminder about cake days:`
      });
      popup.scrollable.appendChild(new _class_Table__WEBPACK_IMPORTED_MODULE_7__["Table"](cdrObj.elements).table);
      popup.open();
      await _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.endless_load(popup.scrollable);
    }
  }
  checkUser(cdrObj, steamId, user) {
    if (!user.cdr || !user.registrationDate) {
      return;
    }
    const className = steamId === _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('steamId') ? 'esgst-cdr-highlight' : '';
    const registrationDate = new Date(user.registrationDate * 1e3);
    registrationDate.setFullYear(cdrObj.currentYear);
    const registrationTime = registrationDate.getTime();
    const bYear = parseInt(cdrObj.cache[steamId] && cdrObj.cache[steamId].bYear || 0);
    const dYear = parseInt(cdrObj.cache[steamId] && cdrObj.cache[steamId].dYear || 0);
    const aYear = parseInt(cdrObj.cache[steamId] && cdrObj.cache[steamId].aYear || 0);
    if (user.cdr.b && bYear !== cdrObj.currentYear && cdrObj.currentTime < registrationTime && registrationTime - cdrObj.currentTime <= user.cdr.bDays * 86400000) {
      if (!cdrObj.cache[steamId]) {
        cdrObj.cache[steamId] = {};
      }
      cdrObj.cache[steamId].bYear = cdrObj.currentYear;
      cdrObj.elements.push([{
        size: 'fill',
        value: className ? _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
          className: className
        }, "YOU") : _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
          className: "table__column__secondary-link",
          href: `/user/${user.username}`
        }, user.username)
      }, {
        size: 'fill',
        value: _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
          className: className
        }, `In ${Math.floor((registrationTime - cdrObj.currentTime) / 86400000)} days`)
      }]);
    } else if (user.cdr.d && dYear !== cdrObj.currentYear && cdrObj.currentTime >= registrationTime && cdrObj.currentTime < registrationTime + 86400000) {
      if (!cdrObj.cache[steamId]) {
        cdrObj.cache[steamId] = {};
      }
      cdrObj.cache[steamId].dYear = cdrObj.currentYear;
      cdrObj.elements.push([{
        size: 'fill',
        value: className ? _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
          className: className
        }, "YOU") : _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
          className: "table__column__secondary-link",
          href: `/user/${user.username}`
        }, user.username)
      }, {
        size: 'fill',
        value: _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
          className: className
        }, "Today! Happy cake day!")
      }]);
    } else if (user.cdr.a && aYear !== cdrObj.currentYear && cdrObj.currentTime >= registrationTime + 86400000 && cdrObj.currentTime - registrationTime <= user.cdr.aDays * 86400000) {
      if (!cdrObj.cache[steamId]) {
        cdrObj.cache[steamId] = {};
      }
      cdrObj.cache[steamId].aYear = cdrObj.currentYear;
      cdrObj.elements.push([{
        size: 'fill',
        value: className ? _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
          className: className
        }, "YOU") : _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
          className: "table__column__secondary-link",
          href: `/user/${user.username}`
        }, user.username)
      }, {
        size: 'fill',
        value: _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
          className: className
        }, `${Math.floor((cdrObj.currentTime - registrationTime) / 86400000)} days ago`)
      }]);
    }
  }
  addButton(profile) {
    if (profile.steamId === _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('steamId')) {
      return;
    }
    let button;
    _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(profile.heading, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.getFeatureTooltip('cdr', `Get notified about ${profile.username}'s cake day`),
      ref: ref => button = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
      className: "fa fa-gift"
    })));
    button.addEventListener('click', async () => {
      const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_4__["Popup"]({
        addScrollable: true,
        icon: 'fa-gift',
        isTemp: true,
        title: `Get notified about ${profile.username}'s cake day:`
      });
      const user = {
        id: profile.id,
        steamId: profile.steamId,
        username: profile.username,
        values: {}
      };
      const savedUser = await _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.getUser(_class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.users, user);
      if (savedUser && savedUser.cdr) {
        user.values.cdr = savedUser.cdr;
      } else {
        user.values.cdr = {
          a: false,
          aDays: 0,
          b: false,
          bDays: 0,
          d: true
        };
      }
      const bSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_8__["ToggleSwitch"](null, null, false, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, "Notify", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("input", {
        className: "esgst-switch-input",
        onchange: event => user.values.cdr.bDays = parseFloat(event.currentTarget.value),
        type: "number",
        value: user.values.cdr.bDays
      }), ' ', "days before their cake day."), false, false, null, user.values.cdr.b);
      const dSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_8__["ToggleSwitch"](null, null, false, 'Notify on their cake day.', false, false, null, user.values.cdr_d);
      const aSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_8__["ToggleSwitch"](null, null, false, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, "Notify", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("input", {
        className: "esgst-switch-input",
        onchange: event => user.values.cdr.aDays = parseFloat(event.currentTarget.value),
        type: "number",
        value: user.values.cdr.aDays
      }), ' ', "days after their cake day."), false, false, null, user.values.cdr.b);
      bSwitch.onChange = value => user.values.cdr.b = value;
      dSwitch.onChange = value => user.values.cdr.d = value;
      aSwitch.onChange = value => user.values.cdr.a = value;
      popup.scrollable.appendChild(bSwitch.container);
      popup.scrollable.appendChild(dSwitch.container);
      popup.scrollable.appendChild(aSwitch.container);
      _components_Button__WEBPACK_IMPORTED_MODULE_9__["Button"].create([{
        template: 'success',
        name: 'Save',
        onClick: async () => {
          if (user.values.cdr.b || user.values.cdr.d || user.values.cdr.a) {
            user.values.registrationDate = profile.registrationDate;
          } else {
            user.values.cdr = null;
          }
          await _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.saveUser(null, null, user);
          popup.close();
        }
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Saving...'
      }]).insert(popup.description, 'beforeend');
      popup.open();
    });
  }
}
const generalCakeDayReminder = new GeneralCakeDayReminder();


/***/ }),
/* 272 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Table", function() { return Table; });
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(273);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(132);
/* harmony import */ var _DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






class Table {
  /**
   * @param {Array[]} [values] A matrix containing the values of the table.
   */
  constructor(values) {
    this.table = document.createElement('div');
    this.table.className = 'table esgst-ugd-table';
    _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.table, 'atinner', _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "table__heading",
      ref: ref => this.heading = ref
    }), _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "table__rows",
      ref: ref => this.rows = ref
    })));
    this.rowGroups = {};
    this.hiddenColumns = [];
    this.numRows = 0;
    this.numColumns = 0;
    if (!values) {
      return this;
    }
    for (const column of values[0]) {
      if (column) {
        this.addColumn(column);
      }
    }
    const n = values.length;
    for (let i = 1; i < n; i++) {
      this.addRow(values[i]);
    }
  }
  clear() {
    this.rows.innerHTML = '';
    this.numRows = 0;
  }
  addCell(row, column, cellDetails) {
    if (!this.rows.children[row]) {
      const columns = [];
      for (let i = 0; i < this.numColumns; i++) {
        columns[i] = {
          size: 'fill',
          value: '-'
        };
      }
      this.addRow(columns);
    }
    const cell = typeof cellDetails === 'string' ? cellDetails : cellDetails.value;
    const additionalClasses = [].concat(cellDetails.additionalClasses || []);
    const alignment = cellDetails.alignment || 'center';
    const size = cellDetails.size || 'small';
    const attributes = {
      className: `table__column--width-${size} text-${alignment} ${additionalClasses.join(' ')}`
    };
    if (cellDetails.attributes) {
      for (const attribute of cellDetails.attributes) {
        const parts = attribute.match(/(.+?)="(.+?)"/);
        attributes[parts[1]] = attributes[parts[2]];
      }
    }
    if (cell === 'Total') {
      attributes.className += ' esgst-bold';
    }
    let cellEl;
    _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.rows.children[row].firstElementChild.children[column], 'atouter', _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, attributes, {
      ref: ref => cellEl = ref
    }), cell));
    return cellEl;
  }
  addRow(columns, name, isCollapsibleGroup, isCollapsible, collapseMessage, expandMessage) {
    let row;
    _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.rows, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: `table__row-outer-wrap ${name && isCollapsible ? 'esgst-hidden' : ''}`
    }, _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "table__row-inner-wrap",
      ref: ref => row = ref
    }, name && isCollapsible ? _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
      className: "fa fa-chevron-right"
    }) : null)));
    let group = null;
    if (name) {
      if (isCollapsibleGroup) {
        group = this.rowGroups[name] = {
          collapsibles: [],
          columns: [],
          isCollapsible: true,
          row: row
        };
        let expand, collapse;
        _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(row, 'afterbegin', _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
          className: "fa fa-plus-square esgst-clickable",
          title: expandMessage,
          ref: ref => expand = ref
        }), _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
          className: "fa fa-minus-square esgst-clickable esgst-hidden",
          title: collapseMessage,
          ref: ref => collapse = ref
        })));
        collapse.addEventListener('click', this.collapseRows.bind(this, collapse, expand, name));
        expand.addEventListener('click', this.expandRows.bind(this, collapse, expand, name));
      } else if (isCollapsible) {
        this.rowGroups[name].collapsibles.push(row);
      }
    }
    let isBold = false;
    for (let i = 0; i < this.numColumns; i++) {
      let cell = columns ? columns[i] : '';
      let additionalClasses = [];
      let additionalAttributes = null;
      let alignment = 'center';
      let size = 'small';
      if (cell && typeof cell === 'object' && !(cell instanceof Node)) {
        additionalClasses = additionalClasses.concat(cell.additionalClasses);
        additionalAttributes = cell.additionalAttributes;
        alignment = cell.alignment || alignment;
        size = cell.size || size;
        cell = cell.value;
      }
      if (this.hiddenColumns.indexOf(i) > -1) {
        additionalClasses.push('esgst-hidden');
      }
      if (i === 0 && cell && cell === 'Total') {
        isBold = true;
      }
      if (!cell || cell === `0 (0%)`) {
        additionalClasses.push('is-faded');
      }
      if (isBold) {
        additionalClasses.push('esgst-bold');
      }
      const attributes = {
        className: `table__column--width-${size} text-${alignment} ${additionalClasses.join(' ')}`
      };
      if (additionalAttributes) {
        for (const attribute of additionalAttributes) {
          const parts = attribute.match(/(.+?)="(.+?)"/);
          attributes[parts[1]] = attributes[parts[2]];
        }
      }
      let column;
      _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(row, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, attributes, {
        ref: ref => column = ref
      }), cell));
      if (group) {
        group.columns.push(column);
      }
    }
    this.numRows += 1;
  }

  /**
   * @param column
   * @property {string[]} column.additionalClasses
   * @property {string} column.alignment
   * @property {string[]} column.attributes
   * @property {string} column.size
   * @property {string} column.value
   */
  addColumn(column) {
    const cell = typeof column === 'string' ? column : column.value;
    const additionalClasses = [].concat(column.additionalClasses);
    const alignment = column.alignment || 'center';
    const size = column.size || 'small';
    const attributes = {
      className: `table__column--width-${size} text-${alignment} ${additionalClasses.join(' ')}`
    };
    if (column.attributes) {
      for (const attribute of column.attributes) {
        const parts = attribute.match(/(.+?)="(.+?)"/);
        attributes[parts[1]] = attributes[parts[2]];
      }
    }
    _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.heading, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", attributes, cell));
    if (cell === 'Total') {
      attributes.className += ' esgst-bold';
    }
    for (let i = 0; i < this.numRows; i++) {
      const row = this.rows.children[i];
      _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(row, 'beforeend', _DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", attributes));
    }
    this.numColumns += 1;
  }
  hideColumns() {
    for (const column of arguments) {
      this.hiddenColumns.push(column - 1);
      this.heading.children[column - 1].classList.add('esgst-hidden');
      for (let i = this.numRows - 1; i > -1; i--) {
        this.rows.children[i].firstElementChild.children[column - 1].classList.add('esgst-hidden');
      }
    }
  }
  getRowGroup(name) {
    return this.rowGroups[name];
  }
  collapseRows(collapse, expand, name) {
    collapse.classList.add('esgst-hidden');
    expand.classList.remove('esgst-hidden');
    for (const row of this.rowGroups[name].collapsibles) {
      row.parentElement.classList.add('esgst-hidden');
    }
  }
  expandRows(collapse, expand, name) {
    expand.classList.add('esgst-hidden');
    collapse.classList.remove('esgst-hidden');
    for (const row of this.rowGroups[name].collapsibles) {
      row.parentElement.classList.remove('esgst-hidden');
    }
  }
}


/***/ }),
/* 273 */
/***/ (function(module, exports) {

function _extends() {
  return module.exports = _extends = Object.assign ? Object.assign.bind() : function (n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);
    }
    return n;
  }, module.exports.__esModule = true, module.exports["default"] = module.exports, _extends.apply(null, arguments);
}
module.exports = _extends, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),
/* 274 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysCommentEntryChecker", function() { return giveawaysCommentEntryChecker; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(97);
/* harmony import */ var _class_Table__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(272);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(218);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(224);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(144);















class GiveawaysCommentEntryChecker extends _class_Module__WEBPACK_IMPORTED_MODULE_7__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-comments"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-ticket"
      }), ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-question-circle"
      }), " ) to the main page heading of any", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaway/aeqw7/"
      }, "giveaway"), " page that allows you to view the list (including the number and percentage) of users that commented without entering, users that entered without commenting and users that commented & entered."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "If the giveaway has a link to a discussion, the feature will also check for comments in the discussion.")),
      features: {
        cec_t: {
          name: 'Open results in a new tab.',
          sg: true
        }
      },
      id: 'cec',
      name: 'Comment/Entry Checker',
      sg: true,
      sgPaths: /^Giveaway($|\s-\s.+?)$/,
      type: 'giveaways'
    };
  }
  init() {
    this.esgst.customPages.cec = {
      check: this.esgst.giveawayPath,
      load: async () => await this.cec_openPopup({})
    };
    if (!this.esgst.giveawayPath || document.getElementsByClassName('table--summary')[0] || !this.esgst.mainPageHeading) return;
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.esgst.sidebarGroups[0].navigation, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", {
      className: "sidebar__navigation__item",
      id: "cec"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
      className: "sidebar__navigation__item__link",
      href: `${this.esgst.path.replace(/\/entries/, '')}/entries?esgst=cec`,
      onclick: event => !_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('cec_t') && !event.preventDefault() && this.cec_openPopup(true)
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "sidebar__navigation__item__name"
    }, "Comments vs Entries"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "sidebar__navigation__item__underline"
    }))));
  }
  async cec_openPopup(isPopup) {
    let container = null;
    let context = null;
    if (isPopup) {
      const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_8__["Popup"]({
        addScrollable: 'left',
        isTemp: true
      });
      container = popup.description;
      context = popup.scrollable;
      popup.open();
    } else {
      container = context = this.esgst.sidebar.nextElementSibling;
      context.setAttribute('data-esgst-popup', 'true');
      context.innerHTML = '';
    }
    if (!isPopup) {
      _Common__WEBPACK_IMPORTED_MODULE_14__["common"].setSidebarActive('cec');
    }
    const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_12__["PageHeading"].create('cec', [{
      name: 'ESGST',
      url: this.esgst.settingsUrl
    }, {
      name: 'Comment / Entry Checker',
      url: `?esgst=cec`
    }]).insert(container, 'afterbegin').nodes.outer;
    if (!isPopup) {
      this.esgst.mainPageHeading = heading;
    }
    const obj = {
      context
    };
    obj.progressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_11__["NotificationBar"].create().insert(context, 'beforeend').hide();
    this.cec_start(obj);
  }
  async cec_start(obj) {
    obj.isCanceled = false;
    obj.progressBar.setLoading(null).show();

    // get comments
    let comments = [];
    let urls = [window.location.pathname.match(/\/giveaway\/.+?\//)[0]];
    for (let i = 0; !obj.isCanceled && i < urls.length; i++) {
      let nextPage = 1;
      let pagination = null;
      let url = urls[i];
      do {
        obj.progressBar.setMessage(`Retrieving ${i > 0 ? 'bumps ' : 'comments '} (page ${nextPage})...`);
        let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`${url}${nextPage}`, {
          queue: true
        });
        let responseHtml = response.html;
        let elements = responseHtml.querySelectorAll(`.comment:not(.comment--submit) .comment__username:not(.comment__username--op):not(.comment__username--deleted)`);
        for (let j = elements.length - 1; j > -1; j--) {
          comments.push(elements[j].textContent.trim());
        }
        if (nextPage === 1) {
          url = urls[i] = `${response.url}/search?page=`;
        }
        nextPage += 1;
        pagination = responseHtml.getElementsByClassName('pagination__navigation')[0];
        if (i === 0) {
          // get discussion links to check for bump comments
          let elements = responseHtml.querySelectorAll(`.page__description [href*="/discussion/"]`);
          for (let j = elements.length - 1; j > -1; j--) {
            urls.push(elements[j].getAttribute('href').match(/\/discussion\/.+?\//)[0]);
          }
        }
      } while (!obj.isCanceled && pagination && !pagination.lastElementChild.classList.contains('is-selected'));
    }
    if (obj.isCanceled) return;

    // get entries
    let entries = [];
    let nextPage = 1;
    let pagination = null;
    let url = urls[0].replace(/search\?page=/, `entries/search?page=`);
    do {
      obj.progressBar.setMessage(`Retrieving entries (page ${nextPage})...`);
      let responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`${url}${nextPage}`, {
        queue: true
      })).html;
      let elements = responseHtml.getElementsByClassName('table__column__heading');
      for (let i = elements.length - 1; i > -1; i--) {
        entries.push(elements[i].textContent.trim());
      }
      nextPage += 1;
      pagination = responseHtml.getElementsByClassName('pagination__navigation')[0];
    } while (!obj.isCanceled && pagination && !pagination.lastElementChild.classList.contains('is-selected'));
    if (obj.isCanceled) return;
    obj.progressBar.reset().hide();

    // calculate data
    comments = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_13__["Utils"].sortArray(Array.from(/** @type {ArrayLike} */new Set(comments)));
    entries = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_13__["Utils"].sortArray(Array.from(/** @type {ArrayLike} */new Set(entries)));
    let both = 0;
    let commented = 0;
    let entered = 0;
    const rows = [];
    for (const user of comments) {
      if (entries.indexOf(user) > -1) {
        // user commented and entered
        rows.push([{
          alignment: 'left',
          size: 'fill',
          value: _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
            className: "table__column__heading",
            href: `/user/${user}`
          }, user)
        }, 'Yes', '-', '-']);
        both += 1;
      } else {
        // user commented but did not enter
        rows.push([{
          alignment: 'left',
          size: 'fill',
          value: _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
            className: "table__column__heading",
            href: `/user/${user}`
          }, user)
        }, '-', 'Yes', '-']);
        commented += 1;
      }
    }
    let total = comments.length;
    for (const user of entries) {
      if (comments.indexOf(user) < 0) {
        // user entered but did not comment
        rows.push([{
          alignment: 'left',
          size: 'fill',
          value: _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
            className: "table__column__heading",
            href: `/user/${user}`
          }, user)
        }, '-', '-', 'Yes']);
        entered += 1;
        total += 1;
      }
    }
    const table = new _class_Table__WEBPACK_IMPORTED_MODULE_10__["Table"]([[{
      alignment: 'left',
      size: 'fill',
      value: 'User'
    }, `Commented and Entered (${both} - ${Math.round(both / total * 10000) / 100}%)`, `Commented but did not Enter (${commented} - ${Math.round(commented / total * 10000) / 100}%)`, `Entered but did not Comment (${entered} - ${Math.round(entered / total * 10000) / 100}%)`], ...rows]);
    obj.context.appendChild(table.table);
    await _Common__WEBPACK_IMPORTED_MODULE_14__["common"].endless_load(obj.context);
  }
  cec_stop(obj) {
    obj.progressBar.reset.hide();
    obj.isCanceled = true;
  }
}
const giveawaysCommentEntryChecker = new GiveawaysCommentEntryChecker();


/***/ }),
/* 275 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsCloseOpenDiscussionButton", function() { return discussionsCloseOpenDiscussionButton; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(276);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(220);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);








class DiscussionsCloseOpenDiscussionButton extends _class_Module__WEBPACK_IMPORTED_MODULE_5__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-lock"
      }), " if the discussion is open and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-lock esgst-red"
      }), " if it is closed) next to the title of a discussion created by yourself (in any", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: "https://www.steamgifts.com/discussions"
      }, "discussions"), " page) that allows you to close/open the discussion without having to access it.")),
      id: 'codb',
      name: 'Close/Open Discussion Button',
      sg: true,
      type: 'discussions',
      featureMap: {
        discussion: this.codb_addButtons.bind(this)
      }
    };
  }
  codb_addButtons(discussions) {
    for (const discussion of discussions) {
      if (discussion.author === _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('username') && !discussion.heading.parentElement.getElementsByClassName('esgst-codb-button')[0]) {
        if (discussion.closed) {
          discussion.closed.remove();
          discussion.closed = true;
        }
        new _class_Button__WEBPACK_IMPORTED_MODULE_2__["Button"](discussion.headingContainer.firstElementChild, 'beforebegin', {
          callbacks: [this.codb_close.bind(this, discussion), null, this.codb_open.bind(this, discussion), null],
          className: 'esgst-codb-button',
          icons: ['fa-lock esgst-clickable', 'fa-circle-o-notch fa-spin', 'fa-lock esgst-clickable esgst-red', 'fa-circle-o-notch fa-spin'],
          id: 'codb',
          index: discussion.closed ? 2 : 0,
          titles: ['Close discussion', 'Closing discussion...', 'Open discussion', 'Opening discussion...']
        });
      }
    }
  }
  async codb_close(discussion) {
    let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].post(discussion.url, {
      data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_6__["Session"].xsrfToken}&do=close_discussion`
    });
    if (response.html.getElementsByClassName('page__heading__button--red')[0]) {
      discussion.closed = true;
      discussion.innerWrap.classList.add('is-faded');
      return true;
    }
    return false;
  }
  async codb_open(discussion) {
    let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].post(discussion.url, {
      data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_6__["Session"].xsrfToken}&do=reopen_discussion`
    });
    if (!response.html.getElementsByClassName('page__heading__button--red')[0]) {
      discussion.closed = false;
      discussion.innerWrap.classList.remove('is-faded');
      return true;
    }
    return false;
  }
}
const discussionsCloseOpenDiscussionButton = new DiscussionsCloseOpenDiscussionButton();


/***/ }),
/* 276 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Button", function() { return Button; });
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(132);
/* harmony import */ var _DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);


class Button {
  constructor(context, position, details) {
    this.callbacks = details.callbacks;
    this.states = this.callbacks.length;
    this.icons = details.icons;
    this.id = details.id;
    this.index = details.index;
    this.titles = details.titles;
    _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(context, position, _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
      className: details.className,
      ref: ref => this.button = ref
    }));
    // noinspection JSIgnoredPromiseFromCall
    this.change();
    return this;
  }
  async change(mainCallback, index = this.index, event) {
    if (index >= this.states) {
      index = 0;
    }
    this.index = index + 1;
    this.button.title = _Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].common.getFeatureTooltip(this.id, this.titles[index]);
    _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(this.button, 'atinner', _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
      className: `fa ${this.icons[index]}`
    }));
    if (mainCallback) {
      if (await mainCallback(event)) {
        // noinspection JSIgnoredPromiseFromCall
        this.change();
      } else {
        _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(this.button, 'atinner', _DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
          className: "fa fa-times esgst-red",
          title: "Unable to perform action"
        }));
      }
    } else if (this.callbacks[index]) {
      this.button.firstElementChild.addEventListener('click', this.change.bind(this, this.callbacks[index], undefined));
    }
  }
  async triggerCallback() {
    await this.change(this.callbacks[this.index - 1]);
  }
}


/***/ }),
/* 277 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsCommentReverser", function() { return commentsCommentReverser; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class CommentsCommentReverser extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Reverses the comments of any", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
        href: "https://www.steamgifts.com/discussion/e9zDo/"
      }, "discussion"), " page so that they are ordered from newest to oldest.")),
      id: 'cr',
      name: 'Comment Reverser',
      sg: true,
      st: true,
      type: 'comments'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.discussionPath || !_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.pagination) return;
    const context = _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.pagination.previousElementSibling;
    if (context.classList.contains('comments')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].common.reverseComments(context);
    }
  }
}
const commentsCommentReverser = new CommentsCommentReverser();


/***/ }),
/* 278 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsCommentSearcher", function() { return commentsCommentSearcher; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Process__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(279);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);







class CommentsCommentSearcher extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-comments"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-search"
      }), ") to the main page heading of any page that allows you to search for comments made by specific users in the page.")),
      id: 'cs',
      name: 'Comment Searcher',
      sg: true,
      st: true,
      type: 'comments'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.commentsPath || _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.giveawayPath && document.getElementsByClassName('table--summary')[0]) return;
    new _class_Process__WEBPACK_IMPORTED_MODULE_3__["Process"]({
      headingButton: {
        id: 'cs',
        icons: ['fa-comments', 'fa-search'],
        title: 'Search comments from specific users'
      },
      popup: {
        icon: 'fa-comments',
        title: `Search comments from specific users:`,
        textInputs: [{
          placeholder: `username1, username2, ...`
        }],
        options: [{
          check: true,
          description: _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, "Limit search by pages, from", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("input", {
            className: "esgst-switch-input",
            min: "1",
            name: "cs_minPage",
            type: "number",
            value: _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cs_minPage')
          }), ' to ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("input", {
            className: "esgst-switch-input",
            min: "1",
            name: "cs_maxPage",
            type: "number",
            value: _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cs_maxPage')
          }), "."),
          id: 'cs_limitPages',
          tooltip: `If unchecked, all pages will be searched.`
        }],
        addProgress: true,
        addScrollable: 'left'
      },
      init: this.cs_init.bind(this),
      requests: [{
        source: _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.discussionPath,
        url: _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.searchUrl,
        request: this.cs_request.bind(this)
      }]
    });
  }
  cs_init(obj) {
    obj.usernames = obj.popup.getTextInputValue(0).toLowerCase().replace(/(,\s*)+/g, this.cs_format.bind(this)).split(`, `);
    let match = window.location.pathname.match(/^\/(giveaway|discussion|support\/ticket|trade)\/(.+?)\//);
    obj.code = match[2];
    obj.type = match[1];
    obj.title = _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.originalTitle.replace(/\s-\sPage\s\d+/, '');
    obj.results = 0;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cs_limitPages')) {
      obj.requests[0].nextPage = _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cs_minPage');
      obj.requests[0].maxPage = _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cs_maxPage');
    }
  }
  cs_format(match, p1, offset, string) {
    return offset === 0 || offset === string.length - match.length ? '' : `, `;
  }
  async cs_request(obj, details, response, responseHtml) {
    obj.popup.progressBar.setLoading(`Searching comments (page ${details.nextPage}${details.maxPage ? ` of ${details.maxPage}` : details.lastPage})..`).show();
    obj.popup.overallProgressBar.setMessage(`${obj.results} results found.`).show();
    let comments = responseHtml.getElementsByClassName('comments');
    let elements = (comments[1] || comments[0]).querySelectorAll(`.comment:not(.comment--submit), .comment_outer`);
    let context = obj.popup.getScrollable();
    for (let i = 0, n = elements.length; i < n; i++) {
      let element = elements[i];
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.sg) {
        element.firstElementChild.classList.remove('comment__parent');
        element.firstElementChild.classList.add('comment__child');
      }
      let parent = element.parentElement.closest(`.comment, .comment_outer`);
      element = element.cloneNode(true);
      element.lastElementChild.innerHTML = '';
      const fragmentChildren = [];
      if (parent) {
        parent = parent.cloneNode(true);
        parent.lastElementChild.remove();
        _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(parent, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
          className: "comment__children comment_children"
        }, element));
        fragmentChildren.push(parent);
      } else {
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.st) {
          _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(element.getElementsByClassName('action_list')[0].firstElementChild, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
            href: `/${obj.type}/${obj.code}/`
          }, `${obj.title} - Page ${details.nextPage}`));
        }
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.sg) {
          fragmentChildren.push(_class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
            className: "comments__entity"
          }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("p", {
            className: "comments__entity__name"
          }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
            href: `/${obj.type}/${obj.code}/`
          }, `${obj.title} - Page ${details.nextPage}`))));
        }
        fragmentChildren.push(_class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
          className: "comment__children comment_children"
        }, element));
      }
      if (obj.usernames.indexOf(element.querySelector(`.comment__username, .author_name`).textContent.trim().toLowerCase()) > -1) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(context, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
          className: "comment comments comment_outer"
        }, fragmentChildren));
        obj.results += 1;
      }
    }
    obj.popup.overallProgressBar.setMessage(`${obj.results} results found.`).show();
    await _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.endless_load(context);
  }
}
const commentsCommentSearcher = new CommentsCommentSearcher();


/***/ }),
/* 279 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Process", function() { return Process; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _FetchRequest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(208);
/* harmony import */ var _Logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(210);
/* harmony import */ var _Permissions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(221);
/* harmony import */ var _Popup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(211);
/* harmony import */ var _Settings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97);
/* harmony import */ var _Shared__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(132);










class Process {
  constructor(details) {
    this.mainContext = null;
    this.mainPopup = details.mainPopup;
    this.popupDetails = details.popup;
    this.context = details.context;
    this.init = details.init;
    this.requests = details.requests;
    this.requestsBackup = this.requests;
    this.urls = details.urls;
    this.id = details.id;
    this.permissions = details.permissions;
    if (!details.mainPopup) {
      if (details.button) {
        this.button = details.button;
      } else {
        this.button = _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.createHeadingButton(details.headingButton);
      }
      this.button.addEventListener('click', async () => {
        if (this.permissions) {
          const permissionKeys = [];
          for (const key in this.permissions) {
            if (this.permissions[key]()) {
              permissionKeys.push(key);
            }
          }
          if (permissionKeys.length && !(await _Permissions__WEBPACK_IMPORTED_MODULE_6__["permissions"].contains([permissionKeys]))) {
            return;
          }
        }
        this.openPopup();
      });
    }
  }
  async openPopup() {
    if (this.popup) {
      this.popup.open();
      return;
    }
    this.popupDetails.buttons = [[{
      color: 'green',
      icons: ['fa-arrow-circle-right'],
      name: 'Start',
      onClick: this.start.bind(this)
    }, {
      template: 'error',
      name: 'Stop',
      switchTo: {
        onReturn: 0
      },
      onClick: this.stop.bind(this)
    }]];
    this.popup = new _Popup__WEBPACK_IMPORTED_MODULE_7__["Popup"](this.popupDetails);
    if (this.urls && this.urls.id && !this.urls.lockPerLoad) {
      _DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(this.popup.description, 'afterbegin', _DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, "Items per load:", ' ', _DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
        className: "esgst-switch-input",
        type: "number",
        value: _Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`${this.urls.id}_perLoad`),
        ref: ref => _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.observeNumChange(ref, `${this.urls.id}_perLoad`, true)
      })));
    }
    this.popup.open();
    if (this.urls) {
      this.index = 0;
      this.items = [];
      // noinspection JSAnnotator
      await this.urls.init(this, ...(this.urls.arguments || []));
      this.total = this.items.length;
      if (!this.urls.doNotTrigger) {
        this.popup.buttons[0].onClick();
      }
      if (_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`es_${this.urls.id}`)) {
        this.popup.scrollable.addEventListener('scroll', () => {
          if (this.popup.scrollable.scrollTop + this.popup.scrollable.offsetHeight >= this.popup.scrollable.scrollHeight && !this.popup.buttons[0].isBusy) {
            this.popup.buttons[0].onClick();
          }
        });
      }
    }
  }
  async start() {
    if (this.button) {
      this.button.classList.add('esgst-busy');
    }
    this.isCanceled = false;
    if (this.popup && (!this.urls || this.urls.doNotTrigger)) {
      this.popup.clear();
    }
    if (this.init && (await this.init(this))) {
      if (this.button) {
        this.button.classList.remove('esgst-busy');
      }
      return;
    }
    if (this.urls) {
      await this.requestNextUrl(this.urls.request);
    } else {
      for (let i = 0; !this.isCanceled && i < this.requests.length; i++) {
        const request = this.requests[i];
        if (typeof request === 'object') {
          await this.request(request);
          if (request.onDone) {
            await request.onDone(this, request);
          }
        } else {
          await request(this);
        }
      }
    }
    if (this.button) {
      this.button.classList.remove('esgst-busy');
    }
    if (this.popup) {
      this.popup.progressBar.reset().hide();
    }
  }
  stop() {
    this.isCanceled = true;
  }
  async requestNextUrl(details) {
    if (!this.urls.doNotTrigger && this.index >= this.total) {
      this.popup.buttons[0].destroy();
      return;
    }
    this.popup.progressBar.setLoading('Loading more...').show();
    this.popup.overallProgressBar.setMessage(`${this.index} of ${this.total} loaded.`).show();
    if (this.mainContext) {
      _DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(this.mainContext, 'beforeend', this.context);
    } else {
      this.context = this.popup.getScrollable(this.context);
    }
    let i = 0;
    while (!this.isCanceled && (i < (this.urls.lockPerLoad ? this.urls.perLoad : _Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`${this.urls.id}_perLoad`)) || _Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`es_${this.urls.id}`) && this.popup.scrollable.scrollHeight <= this.popup.scrollable.offsetHeight)) {
      let url = this.items[this.index];
      if (!url) break;
      url = url.url || url;
      try {
        const response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].get(url, {
          queue: details.queue
        });
        await details.request(this, details, response, response.html);
        i += 1;
      } catch (e) {
        _Logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].error(e.message, e.stack);
      }
      this.index += 1;
      this.popup.overallProgressBar.setMessage(`${this.index} of ${this.total} loaded.`).show();
    }
    if (!this.urls.doNotTrigger && this.index >= this.total) {
      this.popup.buttons[0].destroy();
    }
    if (this.urls.restart) {
      this.index = 0;
    }
    await _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.endless_load(this.context);
  }
  async request(details) {
    if (!details.nextPage) {
      details.nextPage = 1;
    }
    let backup = details.nextPage;
    details.lastPage = '';
    let pagination = null;
    let stop = false;
    do {
      let response = await _FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].get(`${details.url}${details.nextPage}`, {
        queue: details.queue
      });
      if (details.nextPage === backup) {
        details.lastPage = _Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.modules.generalLastPageLink.lpl_getLastPage(response.html, false, details.discussion, details.user, details.userWon, details.group, details.groupUsers, details.groupWishlist);
        details.lastPage = details.lastPage === 999999999 ? '' : ` of ${details.lastPage}`;
      }
      stop = await details.request(this, details, response, response.html);
      details.nextPage += 1;
      pagination = response.html.getElementsByClassName('pagination__navigation')[0];
    } while (!stop && !this.isCanceled && (!details.maxPage || details.nextPage <= details.maxPage) && pagination && !pagination.lastElementChild.classList.contains(_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.selectedClass));
    details.nextPage = backup;
  }
}


/***/ }),
/* 280 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsCommentTracker", function() { return commentsCommentTracker; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_Button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(276);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(208);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(96);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(209);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(220);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(219);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(132);
/* harmony import */ var _class_Tabs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(231);
















class CommentsCommentTracker extends _class_Module__WEBPACK_IMPORTED_MODULE_10__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Keeps track of any comments (in any page) and fades out comments that you have marked as read so that you can easily see which comments you have read/unread in the page."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Comments made by yourself are automatically marked as read."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "The comments are tracked by saving the date when they were made. If a comment is edited then the date when it was last edited is saved instead, so if you had previously marked a comment as read and that comment was edited, it will now appear as unread."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Adds a panel to the \"Comments\" column of any", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/discussions"
      }, "discussions"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/support/tickets"
      }, "tickets"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamtrades.com/trades"
      }, "trades"), " pages and to the main page heading of any page containing:"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "A red number in parenthesis indicating how many unread comments there are in the thread."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "A button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-comments"
      }), ") that allows you to go to the first unread comment of the thread/page."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "A button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-eye"
      }), ") that allows you to mark every comment in the thread/page as read."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "A button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-eye-slash"
      }), ") that allows you to mark every comment in the thread/page as unread.")), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Adds a panel next a comment's \"Permalink\" (in any page) containing:"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "A button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-eye"
      }), ") that allows you to mark the comment as read."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "A button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-eye-slash"
      }), ") that allows you to mark the comment as unread."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "A button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-eye"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-angle-double-right"
      }), ") that allows you to mark the comment as read and go to the next unread comment."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "A button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-eye"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-angle-up"
      }), ") that allows you to mark every comment from the comment upward as read."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "A button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-eye-slash"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-angle-up"
      }), ") that allows you to mark every comment from the comment upward as unread."))),
      features: {
        ct_a: {
          name: 'Automatically mark comments as read in the inbox page when clicking on the "Mark as Read" button.',
          sg: true,
          st: true
        },
        ct_o: {
          name: 'Automatically mark your own comments as read.',
          sg: true,
          st: true
        },
        ct_c: {
          name: 'Enable tracking controls for your own comments.',
          sg: true,
          st: true
        },
        ct_s: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "The simplified version of the tracker does not have the concept of read/unread comments, but simply shows the red number of comments that were made since you last visited a thread, so the comments are not tracked by date (they are tracked by quantity) and there are no buttons to go to the first unread comment of a thread/page or mark comments as read/unread."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "If you mark a thread as visited with ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
            "data-esgst-feature-id": "gdttt"
          }), ", all of the comments in the thread will be considered as \"read\", and if you mark it as unvisited, they will be considered as \"unread\".")),
          features: {
            ct_s_h: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Only shows the red number for a thread after you have visited it.")),
              name: 'Hide the counter if you have not visited the thread yet.',
              sg: true,
              st: true
            }
          },
          name: 'Enable the simplified version.',
          sg: true,
          st: true
        },
        ct_fop: {
          name: 'Fade out read OPs.',
          sg: true,
          st: true
        },
        ct_f: {
          name: 'Fade out read comments.',
          sg: true,
          st: true
        },
        ct_r: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Searches pages for an unread comment from the bottom to the top if", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
            "data-esgst-feature-id": "cr"
          }), " is disabled or from the top to the bottom if it is enabled.")),
          name: 'Search for the first unread comment in reverse order.',
          sg: true,
          st: true
        }
      },
      id: 'ct',
      name: 'Comment Tracker',
      sg: true,
      st: true,
      type: 'comments'
    };
  }
  async init() {
    if ((this.esgst.commentsPath && (!this.esgst.giveawayPath || !document.getElementsByClassName('table--summary')[0]) || _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.isCurrentPath('Messages')) && !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s')) {
      if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s')) {
        let button3 = _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.createHeadingButton({
          featureId: 'ct',
          id: 'ctUnread',
          icons: ['fa-eye-slash'],
          title: 'Mark all comments in this page as unread'
        });
        let button2 = _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.createHeadingButton({
          featureId: 'ct',
          id: 'ctRead',
          icons: ['fa-eye'],
          title: 'Mark all comments in this page as read'
        });
        let button1 = _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.createHeadingButton({
          featureId: 'ct',
          id: 'ctGo',
          icons: ['fa-comments-o'],
          title: 'Go to the first unread comment of this page'
        });
        this.ct_addCommentPanel(button1, button2, button3);
      }
      let match = window.location.pathname.match(/\/(giveaway|discussion|ticket|trade)\/(.+?)\//);
      if (match) {
        let code, count, diff, comments, element, type;
        element = this.esgst.mainPageHeading.querySelector(`.page__heading__breadcrumbs, .page_heading_breadcrumbs`).firstElementChild;
        type = `${match[1]}s`;
        code = match[2];
        comments = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getValue(type));
        count = parseInt(element.textContent.replace(/,/g, '').match(/\d+/)[0]);
        if (comments[code]) {
          let id, read;
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s')) {
            read = comments[code].count || (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s_h') ? count : 0);
          } else {
            read = 0;
            for (id in comments[code].readComments) {
              if (comments[code].readComments.hasOwnProperty(id)) {
                if (!id.match(/^(Count|undefined|)$/) && comments[code].readComments[id]) {
                  ++read;
                }
              }
            }
          }
          diff = count === read ? 0 : count - read;
        } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s_h')) {
          diff = 0;
        } else {
          diff = count;
        }
        _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(element, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
          className: "esgst-ct-count",
          title: _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureTooltip('ct', 'Unread comments')
        }, ` (+${diff})`));
      }
    }
  }

  /**
   * @param context
   * @param [main]
   * @param [source]
   * @param [endless]
   * @returns {Promise<void>}
   */
  async ct_addDiscussionPanels(context, main, source, endless) {
    let code, comments, count, countLink, diff, heading, i, id, j, match, matches, n, name, read, url, key;
    matches = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .table__row-outer-wrap, .esgst-es-page-${endless}.table__row-outer-wrap` : '.table__row-outer-wrap'}, ${endless ? `.esgst-es-page-${endless} .row_outer_wrap, .esgst-es-page-${endless}.row_outer_wrap` : '.row_outer_wrap'}`);
    if (!matches.length) return;
    if (this.esgst.discussionsPath) {
      key = 'discussions';
    } else if (this.esgst.ticketsPath) {
      key = 'tickets';
    } else if (this.esgst.tradesPath) {
      key = 'trades';
    } else {
      key = 'discussions';
    }
    comments = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getValue(key, '{}'));
    for (i = 0, n = matches.length; i < n; ++i) {
      match = matches[i];
      countLink = match.querySelector(`.table__column__secondary-link[href*="/discussion/"], .table__column--width-small.text-center, .row_trade_comments`);
      if (countLink) {
        count = parseInt(countLink.textContent.replace(/,/g, ''));
        heading = match.querySelector(`.homepage_table_column_heading, .table__column__heading, .row_trade_name h2 a`);
        if (!heading) {
          continue;
        }
        name = heading.textContent.trim();
        url = heading.getAttribute('href');
        if (url) {
          code = url.match(new RegExp(`/${key.slice(0, -1)}/(.+?)(/.*)?$`));
          if (code) {
            code = code[1];
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('gdttt') || _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct')) {
              if (comments[code]) {
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s')) {
                  read = comments[code].count || (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s_h') ? count : 0);
                } else {
                  read = 0;
                  for (id in comments[code].readComments) {
                    if (comments[code].readComments.hasOwnProperty(id)) {
                      if (!id.match(/^(Count|undefined|)$/) && comments[code].readComments[id]) {
                        ++read;
                      }
                    }
                  }
                }
                diff = count === read ? 0 : count - read;
              } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s_h')) {
                diff = 0;
              } else {
                diff = count;
              }
              let discussion = null;
              const discussions = _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('main', 'discussions');
              for (j = discussions.length - 1; j > -1 && discussions[j].code !== code; --j) {}
              if (j > -1) {
                discussion = discussions[j];
              }
              if (key === 'discussions' && diff > 0 && discussion) {
                discussion.unread = true;
              }
              this.ct_addDiscussionPanel(code, comments, match, countLink, count, diff, url, key, discussion, name);
            }
          }
        }
      }
    }
    if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.df && this.esgst.df.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`df_enable${this.esgst.df.type}`)) {
      this.esgst.modules.discussionsDiscussionFilters.filters_filter(this.esgst.df, false, endless);
    }
  }
  async ct_getComments(count, comments, index, goToUnread, markRead, markUnread, endless) {
    let found = false;
    if (goToUnread) {
      found = await this.ct_checkComments(count, comments, index, true, false, false, endless);
    } else {
      let lock;
      if (!endless) {
        lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_9__["Lock"]('comment', {
          threshold: 300
        });
        await lock.lock();
      }
      found = await this.ct_checkComments(count, comments, index, false, markRead, markUnread, endless);
      if (lock) {
        await lock.unlock();
      }
    }
    return found;
  }
  async ct_checkComments(count, comments, index, goToUnread, markRead, markUnread, endless) {
    let code, comment, found, i, n, saved, source, type, unread;
    this.ctGoToUnread = false;
    let values;
    if (endless) {
      if (this.esgst.sg) {
        saved = {
          giveaways: this.esgst.giveaways,
          discussions: this.esgst.discussions,
          tickets: this.esgst.tickets
        };
      } else {
        saved = {
          trades: this.esgst.trades
        };
      }
    } else {
      values = _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getValues({
        giveaways: '{}',
        discussions: '{}',
        tickets: '{}',
        trades: '{}'
      });
      if (this.esgst.sg) {
        saved = {
          giveaways: JSON.parse(values.giveaways),
          discussions: JSON.parse(values.discussions),
          tickets: JSON.parse(values.tickets)
        };
      } else {
        saved = {
          trades: JSON.parse(values.trades)
        };
      }
    }
    n = comments.length;
    found = false;
    if (n > 0) {
      for (i = index || 0; i < n; ++i) {
        comment = comments[i];
        if (comment.id || comment.id.match(/^$/)) {
          if (!saved[comment.type][comment.code]) {
            saved[comment.type][comment.code] = {
              readComments: {}
            };
          } else if (!saved[comment.type][comment.code].readComments) {
            saved[comment.type][comment.code].readComments = {};
          }
          if (count > 0) {
            saved[comment.type][comment.code].count = count;
          }
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('gdttt') && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`gdttt_v${{
            giveaways: 'g',
            discussions: 'd',
            tickets: 't',
            trades: 'ts'
          }[comment.type]}`)) {
            saved[comment.type][comment.code].visited = true;
            let cache = JSON.parse(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_8__["LocalStorage"].get('gdtttCache', `{"giveaways":[],"discussions":[],"tickets":[],"trades":[]}`));
            if (cache[comment.type].indexOf(comment.code) < 0) {
              cache[comment.type].push(comment.code);
              _class_LocalStorage__WEBPACK_IMPORTED_MODULE_8__["LocalStorage"].set('gdtttCache', JSON.stringify(cache));
            }
          }
          saved[comment.type][comment.code].lastUsed = Date.now();
          if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s')) {
            let buttons = comment.comment.getElementsByClassName('esgst-ct-comment-button');
            if (comment.author === _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('username')) {
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_c')) {
                if (!saved[comment.type][comment.code].readComments[comment.id] || comment.timestamp !== saved[comment.type][comment.code].readComments[comment.id]) {
                  if (markRead) {
                    // noinspection JSIgnoredPromiseFromCall
                    this.ct_markCommentRead(comment, saved);
                    this.ct_addUnreadCommentButton(buttons[0], comment);
                  } else {
                    // noinspection JSIgnoredPromiseFromCall
                    this.ct_markCommentUnread(comment, saved);
                    this.ct_addReadCommentButton(buttons[0], comment);
                  }
                } else {
                  if (markUnread) {
                    // noinspection JSIgnoredPromiseFromCall
                    this.ct_markCommentUnread(comment, saved);
                    this.ct_addReadCommentButton(buttons[0], comment);
                  } else {
                    // noinspection JSIgnoredPromiseFromCall
                    this.ct_markCommentRead(comment, saved);
                    this.ct_addUnreadCommentButton(buttons[0], comment);
                  }
                }
                this.ct_addReadUntilHereButton(buttons[1], comment);
                this.ct_addUnreadUntilHereButton(buttons[2], comment);
              }
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_o')) {
                // noinspection JSIgnoredPromiseFromCall
                this.ct_markCommentRead(comment, saved);
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_c')) {
                  this.ct_addUnreadCommentButton(buttons[0], comment);
                }
              }
            } else if (!saved[comment.type][comment.code].readComments[comment.id] || comment.timestamp !== saved[comment.type][comment.code].readComments[comment.id]) {
              if (goToUnread && (!this.ctGoToUnread || (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_r') && !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('cr') || !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_r') && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('cr')) && comment.comment.offsetTop < window.scrollY + this.esgst.commentsTop || (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_r') && !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('cr') || _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_r') && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('cr')) && comment.comment.offsetTop > window.scrollY + this.esgst.commentsTop)) {
                this.ctGoToUnread = true;
                if (this.esgst.discussionPath && (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_r') && !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('cr') || _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_r') && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('cr')) || !this.esgst.discussionPath && !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_r')) {
                  unread = comment;
                  found = true;
                } else {
                  if (this.esgst.discussionPath) {
                    _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.goToComment(comment.id, comment.comment);
                  } else {
                    this.ctUnreadFound = true;
                    if (!this.ctNewTab && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('sto')) {
                      if (comment.id) {
                        window.location.href = `/go/comment/${comment.id}`;
                      } else {
                        window.location.href = `/discussion/${comment.code}/`;
                      }
                    } else {
                      if (comment.id) {
                        _class_Tabs__WEBPACK_IMPORTED_MODULE_15__["Tabs"].open(`https://www.steamtrades.com/go/comment/${comment.id}`);
                      } else {
                        _class_Tabs__WEBPACK_IMPORTED_MODULE_15__["Tabs"].open(`https://www.steamgifts.com/discussion/${comment.code}/`);
                      }
                    }
                  }
                  found = true;
                  break;
                }
              } else {
                if (markRead) {
                  // noinspection JSIgnoredPromiseFromCall
                  this.ct_markCommentRead(comment, saved);
                  this.ct_addUnreadCommentButton(buttons[0], comment);
                } else {
                  // noinspection JSIgnoredPromiseFromCall
                  this.ct_markCommentUnread(comment, saved);
                  this.ct_addReadCommentButton(buttons[0], comment);
                }
                this.ct_addReadUntilHereButton(buttons[1], comment);
                this.ct_addUnreadUntilHereButton(buttons[2], comment);
              }
            } else {
              if (markUnread) {
                // noinspection JSIgnoredPromiseFromCall
                this.ct_markCommentUnread(comment, saved);
                this.ct_addReadCommentButton(buttons[0], comment);
              } else {
                // noinspection JSIgnoredPromiseFromCall
                this.ct_markCommentRead(comment, saved);
                this.ct_addUnreadCommentButton(buttons[0], comment);
              }
              this.ct_addReadUntilHereButton(buttons[1], comment);
              this.ct_addUnreadUntilHereButton(buttons[2], comment);
            }
          }
        }
      }
      if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s') && goToUnread) {
        if (unread) {
          if (this.esgst.discussionPath) {
            _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.goToComment(unread.id, unread.comment);
          } else {
            this.ctUnreadFound = true;
            if (!this.ctNewTab && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('sto')) {
              if (unread.id) {
                window.location.href = `/go/comment/${unread.id}`;
              } else {
                window.location.href = `/discussion/${unread.code}/`;
              }
            } else {
              if (unread.id) {
                _class_Tabs__WEBPACK_IMPORTED_MODULE_15__["Tabs"].open(`https://www.steamtrades.com/go/comment/${unread.id}`);
              } else {
                _class_Tabs__WEBPACK_IMPORTED_MODULE_15__["Tabs"].open(`https://www.steamgifts.com/discussion/${unread.code}/`);
              }
            }
          }
        }
      } else {
        if (this.esgst.sg) {
          await Promise.all([_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.lock_and_save_giveaways(saved.giveaways), _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.lockAndSaveDiscussions(saved.discussions), _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.lockAndSaveTickets(saved.tickets)]);
        } else {
          await _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.lockAndSaveTrades(saved.trades);
        }
      }
    } else {
      source = window.location.pathname.match(/(giveaway|discussion|trade|ticket)\/(.+?)(\/.*)?$/);
      if (source) {
        type = `${source[1]}s`;
        code = source[2];
        if (!saved[type][code]) {
          saved[type][code] = {
            readComments: {},
            visited: true
          };
        }
        if (count > 0) {
          saved[type][code].count = count;
        }
        saved[type][code].lastUsed = Date.now();
        await _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common[`lock_and_save_${type}`]({
          [code]: saved[type][code]
        });
      }
    }
    return found;
  }
  async ct_markCommentRead(comment, comments, save) {
    let count;
    if (save) {
      const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_9__["Lock"]('comment', {
        threshold: 300
      });
      await lock.lock();
      comments = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getValue(comment.type));
      if (comment.id && !comments[comment.code].readComments[comment.id] && this.esgst.commentsPath) {
        count = document.getElementsByClassName('esgst-ct-count')[0];
        count.textContent = ` (+${parseInt(count.textContent.match(/\d+/)[0]) - 1})`;
      }
      comments[comment.code].readComments[comment.id] = comment.timestamp;
      await _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.setValue(comment.type, JSON.stringify(comments));
      await lock.unlock();
      if (comment.isOp && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_fop') || !comment.isOp && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_f')) {
        comment.comment.classList.add('esgst-ct-comment-read');
      }
    } else {
      if (comments) {
        if (comment.id && !comments[comment.type][comment.code].readComments[comment.id] && this.esgst.commentsPath) {
          count = document.getElementsByClassName('esgst-ct-count')[0];
          count.textContent = ` (+${parseInt(count.textContent.match(/\d+/)[0]) - 1})`;
        }
        comments[comment.type][comment.code].readComments[comment.id] = comment.timestamp;
      }
      if (comment.isOp && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_fop') || !comment.isOp && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_f')) {
        comment.comment.classList.add('esgst-ct-comment-read');
      }
    }
  }
  async ct_markCommentUnread(comment, comments, save) {
    let count;
    if (save) {
      const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_9__["Lock"]('comment', {
        threshold: 300
      });
      await lock.lock();
      comments = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getValue(comment.type));
      if (comments[comment.code].readComments[comment.id]) {
        delete comments[comment.code].readComments[comment.id];
        if (comment.id && this.esgst.commentsPath) {
          count = document.getElementsByClassName('esgst-ct-count')[0];
          count.textContent = ` (+${parseInt(count.textContent.match(/\d+/)[0]) + 1})`;
        }
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.setValue(comment.type, JSON.stringify(comments));
      await lock.unlock();
      if (comment.isOp && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_fop') || !comment.isOp && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_f')) {
        comment.comment.classList.remove('esgst-ct-comment-read');
      }
    } else {
      if (comments && comments[comment.type][comment.code].readComments[comment.id]) {
        if (comment.id && this.esgst.commentsPath) {
          count = document.getElementsByClassName('esgst-ct-count')[0];
          count.textContent = ` (+${parseInt(count.textContent.match(/\d+/)[0]) + 1})`;
        }
        delete comments[comment.type][comment.code].readComments[comment.id];
      }
      if (comment.isOp && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_fop') || !comment.isOp && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_f')) {
        comment.comment.classList.remove('esgst-ct-comment-read');
      }
    }
  }
  ct_addReadUntilHereButton(button, comment) {
    if (!button) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(comment.actions, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
        className: "esgst-ct-comment-button",
        title: _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureTooltip('ct', 'Mark all comments from this comment upwards as read'),
        ref: ref => button = ref
      }));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-eye"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-angle-up"
    })));
    button.firstElementChild.addEventListener('click', this.ct_readUntilHere.bind(this, button, comment));
  }
  async ct_readUntilHere(button, comment) {
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-circle-o-notch fa-spin"
    }));
    await this.ct_getComments(0, _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('main', 'comments'), comment.index, false, true, false);
    this.ct_addReadUntilHereButton(button, comment);
  }
  ct_addUnreadUntilHereButton(button, comment) {
    if (!button) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(comment.actions, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
        className: "esgst-ct-comment-button",
        title: _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureTooltip('ct', 'Mark all comments from this comment upwards as unread'),
        ref: ref => button = ref
      }));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-eye-slash"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-angle-up"
    })));
    button.firstElementChild.addEventListener('click', this.ct_unreadUntilHere.bind(this, button, comment));
  }
  async ct_unreadUntilHere(button, comment) {
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-circle-o-notch fa-spin"
    }));
    await this.ct_getComments(0, _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('main', 'comments'), comment.index, false, false, true);
    this.ct_addUnreadUntilHereButton(button, comment);
  }
  ct_addReadCommentButton(button, comment) {
    if (!button) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(comment.actions, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
        className: "esgst-ct-comment-button",
        ref: ref => button = ref
      }));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-eye",
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureTooltip('ct', 'Mark this comment as read')
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureTooltip('ct', 'Mark this comment as read and go to the next unread comment')
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-eye"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-angle-double-right"
    }))));
    button.firstElementChild.addEventListener('click', this.ct_readComment.bind(this, button, comment));
    button.lastElementChild.addEventListener('click', this.ct_readCommentAndGo.bind(this, button, comment));
  }
  async ct_readComment(button, comment) {
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-circle-o-notch fa-spin"
    }));
    await this.ct_markCommentRead(comment, null, true);
    button.innerHTML = '';
    this.ct_addUnreadCommentButton(button, comment);
  }
  async ct_readCommentAndGo(button, comment) {
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-circle-o-notch fa-spin"
    }));
    await this.ct_markCommentRead(comment, null, true);
    button.innerHTML = '';
    this.ct_addUnreadCommentButton(button, comment);
    // noinspection JSIgnoredPromiseFromCall
    this.ct_getComments(0, _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('main', 'comments'), null, true);
  }
  ct_addUnreadCommentButton(button, comment) {
    if (!button) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(comment.actions, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
        className: "esgst-ct-comment-button",
        ref: ref => button = ref
      }));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-eye-slash",
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureTooltip('ct', 'Mark comment as unread')
    }));
    button.firstElementChild.addEventListener('click', this.ct_unreadComment.bind(this, button, comment));
  }
  async ct_unreadComment(button, comment) {
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-circle-o-notch fa-spin"
    }));
    await this.ct_markCommentUnread(comment, null, true);
    button.innerHTML = '';
    this.ct_addReadCommentButton(button, comment);
  }
  ct_addCommentPanel(goToUnread, markRead, markUnread) {
    let button, key, newButton, url;
    goToUnread.addEventListener('click', this.ct_goToUnread.bind(this, goToUnread));
    markRead.addEventListener('click', this.ct_markCommentsRead.bind(this, markRead));
    markUnread.addEventListener('click', this.ct_markCommentsUnread.bind(this, markUnread));
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_a') && _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.isCurrentPath('Messages')) {
      button = document.querySelector(`.js__submit-form, .js_mark_as_read`);
      if (button) {
        if (this.esgst.sg) {
          _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(button, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
            className: "sidebar__action-button",
            ref: ref => newButton = ref
          }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
            className: "fa fa-check-circle"
          }), " Mark as Read"));
          key = 'read_messages';
          url = '/messages';
        } else {
          _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(button, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
            className: "page_heading_btn green",
            ref: ref => newButton = ref
          }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
            className: "fa fa-check-square-o"
          }), " Mark as Read"));
          key = 'mark_as_read';
          url = '/ajax.php';
        }
        button.remove();
        newButton.addEventListener('click', this.ct_markMessagesRead.bind(this, key, markRead, url));
      }
    }
  }
  async ct_markMessagesRead(key, markRead, url, event) {
    await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].post(url, {
      data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_12__["Session"].xsrfToken}&do=${key}`
    });
    await this.ct_markCommentsRead(markRead);
    this.ct_completeInboxRead(event.currentTarget);
  }
  ct_completeInboxRead(newButton) {
    let elements, i, n;
    elements = document.querySelectorAll(`.comment__envelope, .comment_unread`);
    for (i = 0, n = elements.length; i < n; ++i) {
      elements[i].remove();
    }
    newButton.remove();
  }
  async ct_goToUnread(goToUnread) {
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(goToUnread, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-circle-o-notch fa-spin"
    }));
    const found = await this.ct_getComments(0, _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('main', 'comments'), null, true, false, false);
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(goToUnread, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-comments-o"
    }));
    if (!found) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.createAlert('No unread comments were found.');
    }
  }
  async ct_markCommentsRead(markRead) {
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(markRead, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-circle-o-notch fa-spin"
    }));
    await this.ct_getComments(0, _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('main', 'comments'), null, false, true, false);
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(markRead, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-eye"
    }));
  }
  async ct_markCommentsUnread(markUnread) {
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(markUnread, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-circle-o-notch fa-spin"
    }));
    await this.ct_getComments(0, _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('main', 'comments'), null, false, false, true);
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(markUnread, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-eye-slash"
    }));
  }
  ct_addDiscussionPanel(code, comments, container, context, count, diff, url, type, discussion, name) {
    if (context.querySelector('.esgst-ct-count')) return;
    let panel;
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(context, (this.esgst.giveawaysPath || this.esgst.commentsPath) && !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('oadd') ? 'afterend' : 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      ref: ref => panel = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      className: "esgst-ct-count esgst-hidden",
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureTooltip('ct')
    }, `(+${diff})`), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
      className: "esgst-heading-button esgst-hidden",
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureTooltip('ct', 'Go to first unread comment of this discussion')
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-comments-o"
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
      className: "esgst-heading-button esgst-hidden",
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureTooltip('ct', 'Mark all comments in this discussion as read')
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-eye"
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
      className: "esgst-heading-button esgst-hidden",
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureTooltip('ct', 'Mark all comments in this discussion as unread')
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-eye-slash"
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
      className: "esgst-heading-button esgst-hidden",
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureTooltip('ct', `Clean discussion (remove deleted comments from the database)`)
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-paint-brush"
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-circle-o-notch fa-spin esgst-hidden"
    })));
    const obj = {
      code,
      count,
      diff,
      panel,
      url
    };
    obj.diffContainer = obj.panel.firstElementChild;
    obj.goToUnread = obj.diffContainer.nextElementSibling;
    obj.markRead = obj.goToUnread.nextElementSibling;
    obj.markUnread = obj.markRead.nextElementSibling;
    obj.clean = obj.markUnread.nextElementSibling;
    obj.loadingIcon = obj.clean.nextElementSibling;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('gdttt')) {
      const button = new _class_Button__WEBPACK_IMPORTED_MODULE_5__["Button"](obj.panel, 'beforeend', {
        callbacks: [this.esgst.modules.generalGiveawayDiscussionTicketTradeTracker.gdttt_markVisited.bind(this.esgst.modules.generalGiveawayDiscussionTicketTradeTracker, code, container, count, obj.diffContainer, type), null, this.esgst.modules.generalGiveawayDiscussionTicketTradeTracker.gdttt_markUnvisited.bind(this.esgst.modules.generalGiveawayDiscussionTicketTradeTracker, code, container, count, obj.diffContainer, type), null],
        className: 'esgst-gdttt-button',
        icons: ['fa-check esgst-clickable', 'fa-circle-o-notch fa-spin', 'fa-times esgst-clickable', 'fa-circle-o-notch fa-spin'],
        id: 'gdttt',
        index: !comments[code] || !comments[code].visited ? 0 : 2,
        titles: ['Mark discussion as visited', 'Marking...', 'Mark discussion as unvisited', 'Marking...']
      });
      if (discussion) {
        discussion.gdtttButton = button;
        discussion.count = count;
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('tds')) {
      new _class_Button__WEBPACK_IMPORTED_MODULE_5__["Button"](obj.panel, 'beforeend', {
        callbacks: [_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.modules.generalThreadSubscription.subscribe.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.modules.generalThreadSubscription, code, count, name, type), null, _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.modules.generalThreadSubscription.unsubscribe.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.modules.generalThreadSubscription, code, type), null],
        className: 'esgst-tds-button',
        icons: ['fa-bell-o esgst-clickable', 'fa-circle-o-notch fa-spin', 'fa-bell esgst-clickable', 'fa-circle-o-notch fa-spin'],
        id: 'tds',
        index: !comments[code] || typeof comments[code].subscribed === 'undefined' ? 0 : 2,
        titles: ['Subscribe', 'Subscribing...', 'Unsubscribe', 'Unsubscribing...']
      });
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct') && (this.esgst.giveawaysPath || this.esgst.discussionsPath || this.esgst.commentsPath || this.esgst.tradesPath)) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_s')) {
        if (diff > 0) {
          obj.diffContainer.classList.remove('esgst-hidden');
        }
      } else {
        if (diff > 0) {
          obj.diffContainer.classList.remove('esgst-hidden');
          obj.goToUnread.classList.remove('esgst-hidden');
          obj.markRead.classList.remove('esgst-hidden');
          if (diff !== count) {
            obj.markUnread.classList.remove('esgst-hidden');
          }
        } else {
          obj.markUnread.classList.remove('esgst-hidden');
        }
        obj.clean.classList.remove('esgst-hidden');
      }
    }
    obj.goToUnread.addEventListener('mousedown', this.ct_goToUnreadPanel.bind(this, obj));
    obj.markRead.addEventListener('click', this.ct_markReadPanel.bind(this, obj));
    obj.markUnread.addEventListener('click', this.ct_markUnreadPanel.bind(this, obj));
    obj.clean.addEventListener('click', this.ct_clean.bind(this, obj));
  }
  async ct_clean(obj) {
    obj.clean.classList.add('esgst-hidden');
    obj.goToUnread.classList.add('esgst-hidden');
    obj.markRead.classList.add('esgst-hidden');
    obj.markUnread.classList.add('esgst-hidden');
    obj.loadingIcon.classList.remove('esgst-hidden');
    await this.ct_markCommentsReadUnread(false, false, false, obj.code, `${obj.url}/search?page=`);
    obj.loadingIcon.classList.add('esgst-hidden');
    obj.goToUnread.classList.remove('esgst-hidden');
    obj.markRead.classList.remove('esgst-hidden');
    obj.clean.classList.remove('esgst-hidden');
    if (obj.diff !== obj.count) {
      obj.markUnread.classList.remove('esgst-hidden');
    }
  }
  async ct_goToUnreadPanel(obj, event) {
    this.ctNewTab = false;
    if (event.button === 1) {
      event.preventDefault();
      this.ctNewTab = true;
    } else if (event.button === 2) {
      return;
    }
    obj.clean.classList.add('esgst-hidden');
    obj.goToUnread.classList.add('esgst-hidden');
    obj.markRead.classList.add('esgst-hidden');
    obj.markUnread.classList.add('esgst-hidden');
    obj.loadingIcon.classList.remove('esgst-hidden');
    this.ctUnreadFound = false;
    await this.ct_markCommentsReadUnread(true, false, false, null, `${obj.url}/search?page=`);
    obj.loadingIcon.classList.add('esgst-hidden');
    obj.goToUnread.classList.remove('esgst-hidden');
    obj.markRead.classList.remove('esgst-hidden');
    obj.clean.classList.remove('esgst-hidden');
    if (obj.diff !== obj.count) {
      obj.markUnread.classList.remove('esgst-hidden');
    }
  }
  async ct_markReadPanel(obj) {
    obj.clean.classList.add('esgst-hidden');
    obj.goToUnread.classList.add('esgst-hidden');
    obj.markRead.classList.add('esgst-hidden');
    obj.markUnread.classList.add('esgst-hidden');
    obj.loadingIcon.classList.remove('esgst-hidden');
    await this.ct_markCommentsReadUnread(false, true, false, null, `${obj.url}/search?page=`);
    obj.loadingIcon.classList.add('esgst-hidden');
    obj.diffContainer.classList.add('esgst-hidden');
    obj.markUnread.classList.remove('esgst-hidden');
    obj.clean.classList.remove('esgst-hidden');
  }
  async ct_markUnreadPanel(obj) {
    obj.clean.classList.add('esgst-hidden');
    obj.goToUnread.classList.add('esgst-hidden');
    obj.markRead.classList.add('esgst-hidden');
    obj.markUnread.classList.add('esgst-hidden');
    obj.loadingIcon.classList.remove('esgst-hidden');
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_9__["Lock"]('comment', {
      threshold: 300
    });
    await lock.lock();
    const comments = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getValue('discussions'));
    for (const key in comments[obj.code].readComments) {
      if (comments[obj.code].readComments.hasOwnProperty(key)) {
        delete comments[obj.code].readComments[key];
      }
    }
    comments[obj.code].lastUsed = Date.now();
    await _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.setValue('discussions', JSON.stringify(comments));
    await lock.unlock();
    obj.loadingIcon.classList.add('esgst-hidden');
    obj.diffContainer.classList.remove('esgst-hidden');
    obj.diffContainer.textContent = `(+${obj.count})`;
    obj.goToUnread.classList.remove('esgst-hidden');
    obj.markRead.classList.remove('esgst-hidden');
    obj.clean.classList.remove('esgst-hidden');
  }
  async ct_markCommentsReadUnread(goToUnread, markRead, markUnread, code, url) {
    let firstRun = true;
    let lastPageMissing = false;
    let nextPage = 1;
    let comments = [];
    let discussion = null;
    if (code) {
      discussion = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getValue('discussions'))[code];
      if (!discussion || !discussion.readComments) {
        return;
      }
    }
    while (true) {
      const context = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].get(`${url}${nextPage}`, {
        queue: true
      })).html;
      if (code) {
        const elements = context.querySelectorAll(`[href*="/go/comment/"]`);
        // @ts-ignore
        for (const element of elements) {
          comments.push(element.getAttribute('href').match(/\/go\/comment\/(.+)/)[1]);
        }
      } else {
        await this.ct_getComments(0, await this.esgst.modules.comments.comments_get(context, context, true), null, goToUnread, markRead, markUnread);
      }
      if (goToUnread && this.ctUnreadFound) break;
      nextPage += 1;
      const pagination = context.getElementsByClassName('pagination__navigation')[0];
      if (!pagination || (!goToUnread || (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_r') || nextPage <= 1) && (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_r') || pagination.lastElementChild.classList.contains('is-selected'))) && (goToUnread || pagination.lastElementChild.classList.contains('is-selected'))) break;
      if (!goToUnread || !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('ct_r')) continue;
      if (firstRun) {
        firstRun = !firstRun;
        const lastLink = pagination.lastElementChild;
        if (lastLink.textContent.match(/Last/)) {
          nextPage = parseInt(lastLink.getAttribute('data-page-number'));
        } else {
          nextPage = 999999999;
          lastPageMissing = true;
        }
      } else {
        if (lastPageMissing) {
          nextPage = parseInt(pagination.lastElementChild.getAttribute('data-page-number')) - 1;
        } else {
          nextPage -= 2;
        }
      }
      if (nextPage <= 1) break;
    }
    if (code) {
      for (const id in discussion.readComments) {
        if (discussion.readComments.hasOwnProperty(id) && id && comments.indexOf(id) < 0) {
          delete discussion.readComments[id];
        }
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.lockAndSaveDiscussions({
        [code]: discussion
      });
    }
  }
}
const commentsCommentTracker = new CommentsCommentTracker();


/***/ }),
/* 281 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysCommunityWishlistSearchLink", function() { return giveawaysCommunityWishlistSearchLink; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





const createElements = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]);
class GiveawaysCommunityWishlistSearchLink extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Turns the numbers in the \"Giveaways\" column of any", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/wishlist"
      }, "community wishlist"), " page into links that allow you to search for all of the active giveaways for the game (that are visible to you).")),
      id: 'cwsl',
      name: 'Community Wishlist Search Link',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (this.esgst.wishlistPath) {
      this.esgst.gameFeatures.push(this.cwsl_getGames.bind(this));
    }
  }
  cwsl_getGames(games, main) {
    if (!main) {
      return;
    }
    for (const game of games.all) {
      let giveawayCount = game.heading.parentElement.nextElementSibling.nextElementSibling;
      createElements(giveawayCount, 'atinner', [{
        attributes: {
          class: 'table__column__secondary-link',
          href: `/giveaways/search?${game.type.slice(0, -1)}=${game.id}`
        },
        type: 'a',
        children: [...Array.from(giveawayCount.childNodes).map(x => {
          return {
            context: x
          };
        })]
      }]);
    }
  }
}
const giveawaysCommunityWishlistSearchLink = new GiveawaysCommunityWishlistSearchLink();


/***/ }),
/* 282 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsImprovedDiscussionBookmarks", function() { return discussionsImprovedDiscussionBookmarks; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(276);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(211);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(208);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(213);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(206);










class DiscussionsImprovedDiscussionBookmarks extends _class_Module__WEBPACK_IMPORTED_MODULE_3__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Replaces the native ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
        className: "fa fa-bookmark"
      }), " button if the discussion is bookmarked and adds a ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
        className: "fa fa-bookmark-o"
      }), " button if it is not, next to a discussion's title (in any page) that allows you to add / remove the discussion to / from SteamGifts' native bookmark list."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Bookmarked discussions have a green background.")),
      features: {
        idb_t: {
          name: 'Pin any bookmarked discussions in the page.',
          sg: true
        }
      },
      id: 'idb',
      name: 'Improved Discussion Bookmarks',
      sg: true,
      type: 'discussions'
    };
  }
  init() {
    const highlightedDiscussions = {};
    for (const code in _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.discussions) {
      const discussion = _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.discussions[code];
      if (discussion.highlighted) {
        highlightedDiscussions[code] = {
          highlighted: null
        };
      }
    }
    const numHighlightedDiscussions = Object.keys(highlightedDiscussions).length;
    if (numHighlightedDiscussions > 0) {
      const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_6__["Popup"]({
        addProgress: true,
        icon: 'fa-exchange',
        isTemp: true,
        title: 'Discussion Highlighter has been renamed to Improved Discussion Bookmarks because the ability to bookmark discussions has been added to SteamGifts, so ESGST no longer handles the data. Do you want to transfer the discussions you had previously highlighted to the SteamGifts bookmark list or do you want to delete them from your data?',
        buttons: [[{
          template: 'success',
          name: 'Transfer',
          onClick: async () => {
            let current = 1;
            for (const code in highlightedDiscussions) {
              await this.bookmarkDiscussion(code);
              popup.progressBar.setLoading(`${current++} of ${numHighlightedDiscussions} discussions transferred...`).show();
            }
            await _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.lockAndSaveDiscussions(highlightedDiscussions);
            popup.close();
          }
        }, {
          template: 'loading',
          isDisabled: true,
          name: 'Transfering...'
        }], [{
          template: 'error',
          name: 'Delete',
          onClick: async () => {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.lockAndSaveDiscussions(highlightedDiscussions);
            popup.close();
          }
        }, {
          template: 'loading',
          isDisabled: true,
          name: 'Deleting...'
        }]]
      });
      popup.open();
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.discussionFeatures.push(this.addButtons.bind(this));
  }
  async addButtons(discussions, main) {
    for (const discussion of discussions) {
      if (discussion.idbButton) {
        continue;
      }
      const context = discussion.outerWrap;
      let index = 0;
      if (discussion.bookmarked) {
        await this.bookmarkDiscussion(null, context);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('idb_t') && main && _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.discussionsPath) {
          discussion.outerWrap.parentElement.insertBefore(discussion.outerWrap, discussion.outerWrap.parentElement.firstElementChild);
          discussion.isPinned = true;
        }
        index = 2;
      }
      let isNavy = false;
      if (discussion.bookmarkNode) {
        isNavy = discussion.bookmarkNode.classList.contains('icon-navy');
        discussion.bookmarkNode.remove();
      }
      discussion.idbButton = new _class_Button__WEBPACK_IMPORTED_MODULE_2__["Button"](discussion.heading.parentElement, 'afterbegin', {
        callbacks: [this.bookmarkDiscussion.bind(this, discussion.code, context), null, this.unbookmarkDiscussion.bind(this, discussion.code, context), null],
        className: 'esgst-idb-button',
        icons: ['fa-bookmark-o esgst-clickable', 'fa-circle-o-notch fa-spin', `fa-bookmark esgst-clickable ${isNavy ? 'icon-navy' : ''}`, 'fa-circle-o-notch fa-spin'],
        id: 'idb',
        index: index,
        titles: ['Click to bookmark this discussion', 'Bookmarking discussion...', 'Click to unbookmark this discussion', 'Unbookmarking discussion...']
      });
    }
  }
  async bookmarkDiscussion(code, context) {
    if (code) {
      await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].post(`/discussion/${code}/`, {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_8__["Session"].xsrfToken}&do=bookmark_insert`
      });
    }
    if (context) {
      context.classList.add('esgst-idb-highlight');
    }
    return true;
  }
  async unbookmarkDiscussion(code, context) {
    if (code) {
      await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].post(`/discussion/${code}/`, {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_8__["Session"].xsrfToken}&do=bookmark_delete`
      });
    }
    if (context) {
      context.classList.remove('esgst-idb-highlight');
    }
    return true;
  }
}
const discussionsImprovedDiscussionBookmarks = new DiscussionsImprovedDiscussionBookmarks();


/***/ }),
/* 283 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsDiscussionsSorter", function() { return discussionsDiscussionsSorter; });
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(206);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(220);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(222);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(212);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(144);








const createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  saveAndSortContent = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].saveAndSortContent.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]);
class DiscussionsDiscussionsSorter extends _class_Module__WEBPACK_IMPORTED_MODULE_1__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
        className: "fa fa-sort"
      }), " ) to the main page heading of any", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("a", {
        href: "https://www.steamgifts.com/discussions"
      }, "discussions"), " page that allows you to sort the discussions in the page by title, category, created time, author and number of comments."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "There is also an option to automatically sort the discussions so that every time you open the page the discussions are already sorted by whatever option you prefer.")),
      id: 'ds',
      name: 'Discussions Sorter',
      sg: true,
      type: 'discussions'
    };
  }
  init() {
    if (!this.esgst.discussionsPath) return;
    let object = {
      button: createHeadingButton({
        id: 'ds',
        icons: ['fa-sort'],
        title: 'Sort discussions'
      })
    };
    object.button.addEventListener('click', this.ds_openPopout.bind(this, object));
  }
  ds_openPopout(obj) {
    if (obj.popout) return;
    obj.popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_2__["Popout"]('esgst-ds-popout', obj.button, 0, true);
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_5__["ToggleSwitch"](obj.popout.popout, 'ds_auto', false, 'Auto Sort', false, false, 'Automatically sorts the discussions by the selected option when loading the page.', _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('ds_auto'));
    let options;
    _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].insert(obj.popout.popout, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("select", {
      ref: ref => options = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("option", {
      value: "sortIndex_asc"
    }, "Default"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("option", {
      value: "title_asc"
    }, "Title - Ascending"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("option", {
      value: "title_desc"
    }, "Title - Descending"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("option", {
      value: "category_asc"
    }, "Category - Ascending"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("option", {
      value: "category_desc"
    }, "Category - Descending"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("option", {
      value: "createdTimestamp_asc"
    }, "Created Time - Ascending"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("option", {
      value: "createdTimestamp_desc"
    }, "Created Time - Descending"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("option", {
      value: "author_asc"
    }, "Author - Ascending"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("option", {
      value: "author_desc"
    }, "Author - Descending"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("option", {
      value: "comments_asc"
    }, "Comments - Ascending"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("option", {
      value: "comments_desc"
    }, "Comments - Descending")));
    options.value = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('ds_option');
    let callback = saveAndSortContent.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"], _class_Scope__WEBPACK_IMPORTED_MODULE_3__["Scope"].findData('main', 'discussions'), 'ds_option', options);
    options.addEventListener('change', callback);
    _components_Button__WEBPACK_IMPORTED_MODULE_6__["Button"].create({
      color: 'green',
      icons: ['fa-arrow-circle-right'],
      name: 'Sort',
      onClick: callback
    }).insert(obj.popout.popout, 'beforeend');
    obj.popout.open();
  }
}
const discussionsDiscussionsSorter = new DiscussionsDiscussionsSorter();


/***/ }),
/* 284 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gamesEnteredGameHighlighter", function() { return gamesEnteredGameHighlighter; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






class GamesEnteredGameHighlighter extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds an icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-star"
      }), ") next to a game's name (in any page) to indicate that you have entered giveaways for the game in the past. Clicking on the icon unhighlights the game."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "A game is only highlighted if you entered a giveaway for it after this feature was enabled.")),
      id: 'egh',
      name: 'Entered Game Highlighter',
      sg: true,
      type: 'games',
      featureMap: {
        game: this.egh_getGames.bind(this)
      },
      features: {
        egh_c: {
          name: 'Show a counter with the number of giveaways that have been entered for the game.',
          sg: true
        }
      }
    };
  }
  egh_getGames(games) {
    for (const game of games.all) {
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].esgst.giveawayPath) {
        const button = document.querySelector('.sidebar__entry-insert');
        if (button) {
          button.addEventListener('click', this.egh_saveGame.bind(this, game.id, game.type));
        }
      }
      const savedGame = _class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].esgst.games[game.type][game.id];
      if (savedGame && savedGame.entered && !game.container.querySelector('.esgst-egh-button')) {
        const count = Number(savedGame.entered);
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(game.container.closest('.poll') && game.container.querySelector('.table__column__heading') || game.headingName, 'beforebegin', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
          "data-draggable-id": "egh",
          className: "esgst-egh-button esgst-clickable",
          title: _class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].common.getFeatureTooltip('egh', `You have entered ${count} giveaways for this game before. Click to unhighlight it (will restart the counter to 0).`),
          onclick: this.egh_unhighlightGame.bind(this, game.id, game.type)
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
          className: "fa fa-star esgst-egh-icon"
        }), _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('egh_c') ? ` ${count}` : null));
      }
    }
  }
  async egh_saveGame(id, type) {
    if (!id || !type) {
      return;
    }
    let game = _class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].esgst.games[type][id];
    if (!game) {
      game = {};
    }
    if (!game.entered) {
      game.entered = 0;
    }
    game.entered += 1;
    await _class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].common.lockAndSaveGames({
      [type]: {
        [id]: game
      }
    });
  }
  async egh_unhighlightGame(id, type, event) {
    const icon = event.currentTarget;
    if (icon.classList.contains('fa-spin')) {
      return;
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(icon, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
      className: "fa fa-circle-o-notch fa-spin"
    }));
    let game = _class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].esgst.games[type][id];
    if (game && game.entered) {
      game.entered = null;
      await _class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].common.lockAndSaveGames({
        [type]: {
          [id]: game
        }
      });
    }
    icon.remove();
  }
}
const gamesEnteredGameHighlighter = new GamesEnteredGameHighlighter();


/***/ }),
/* 285 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysEntryTracker", function() { return giveawaysEntryTracker; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(168);
/* harmony import */ var date_fns_isSameDay__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(286);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(211);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(144);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(206);









const createElements = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]);
class GiveawaysEntryTracker extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("i", {
        className: "fa fa-ticket esgst-red"
      }), " My Entry History) to the dropdown menu accessible by clicking on the arrow next to your avatar at the header of any page that allows you to view your giveaway entry history (the detailed log, including the name, link and date of every giveaway you have entered/left) and some other details (the average number of giveaways that you enter per day, the date when you entered the least number of giveaways, the date when you entered the most number of giveaways and a table containing how many giveaways you have entered/left per day)."), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "An entry only appears in the history if you entered/left the giveaway after this feature was enabled.")),
      id: 'et',
      name: 'Entry Tracker',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (this.esgst.enteredPath) {
      this.esgst.endlessFeatures.push(this.et_getEntries.bind(this));
    }
    if (!this.esgst.sg) return;
    const dropdownItem = _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].header.addDropdownItem({
      buttonContainerId: 'account',
      description: 'View your entry history.',
      icon: 'fa fa-fw fa-ticket icon-red red',
      name: 'My Entry History',
      onClick: this.et_menu.bind(this)
    });
    dropdownItem.nodes.outer.dataset.linkId = 'myEntryHistory';
    dropdownItem.nodes.outer.dataset.linkKey = 'account';
    dropdownItem.nodes.outer.title = getFeatureTooltip('et');
    if (this.esgst.giveawayPath && !document.getElementsByClassName('table--summary')[0] && this.esgst.enterGiveawayButton) {
      let code, name;
      code = window.location.pathname.match(/^\/giveaway\/(.+?)\//)[1];
      name = document.getElementsByClassName('featured__heading__medium')[0].textContent;
      this.esgst.enterGiveawayButton.addEventListener('click', this.et_setEntry.bind(this, code, true, name));
      this.esgst.leaveGiveawayButton.addEventListener('click', this.et_setEntry.bind(this, code, false, name));
    }
  }
  async et_menu() {
    let dates = {};
    let entries = JSON.parse(getValue('entries', '[]'));
    const items = [];
    for (let i = entries.length - 1; i > -1; i--) {
      let entry = entries[i];
      items.push({
        type: 'li',
        children: [{
          text: `${entry.entry ? 'Entered' : 'Left'} `,
          type: 'node'
        }, {
          attributes: {
            href: `/giveaway/${entry.code}/`
          },
          text: entry.name,
          type: 'a'
        }, {
          text: `on ${this.esgst.modules.generalAccurateTimestamp.at_formatTimestamp(entry.timestamp)}`,
          type: 'node'
        }]
      });
      let date = Object(date_fns_format__WEBPACK_IMPORTED_MODULE_2__["default"])(entry.timestamp, `MMM d, yyyy`);
      let key = new Date(date).getTime();
      if (!dates[key]) {
        dates[key] = {
          date: date,
          entered: 0,
          left: 0
        };
      }
      if (entry.entry) {
        dates[key].entered += 1;
      } else {
        dates[key].left += 1;
      }
    }
    const currentKeys = Object.keys(dates).map(x => parseInt(x));
    const lastDate = currentKeys[0];
    let currentDate = currentKeys[currentKeys.length - 1];
    while (currentDate < lastDate) {
      const dateObj = new Date(currentDate);
      dateObj.setDate(dateObj.getDate() + 1);
      currentDate = dateObj.getTime();
      if (!dates[currentDate]) {
        dates[currentDate] = {
          date: Object(date_fns_format__WEBPACK_IMPORTED_MODULE_2__["default"])(currentDate, `MMM d, yyyy`),
          entered: 0,
          left: 0
        };
      }
    }
    let popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_5__["Popup"]({
      addScrollable: true,
      icon: 'fa-history',
      isTemp: true,
      title: 'Entry Tracker'
    });
    popup.scrollable.style.display = 'flex';
    let rows = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-text-left table',
        style: `padding-left: 5px;`
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'table__heading'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'Delete',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'Date',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'Entered',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'Left',
          type: 'div'
        }]
      }, {
        attributes: {
          class: 'table__rows'
        },
        type: 'div'
      }]
    }]).lastElementChild;
    let keys = Object.keys(dates);
    keys.sort();
    let lowest = {
      count: 999999999,
      date: null
    };
    let highest = {
      count: 0,
      date: null
    };
    let total = 0;
    for (let i = keys.length - 1; i > -1; i--) {
      let key = keys[i];
      let button = createElements(rows, 'beforeend', [{
        attributes: {
          class: 'table__row-outer-wrap'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'table__row-inner-wrap'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'table__column--width-small esgst-text-center'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'fa fa-times esgst-clickable',
                title: 'Delete'
              },
              type: 'i'
            }]
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: dates[key].date,
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: dates[key].entered,
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: dates[key].left,
            type: 'div'
          }]
        }]
      }]).firstElementChild.firstElementChild;
      button.firstElementChild.addEventListener('click', this.et_deleteEntry.bind(this, button, dates[key].date, popup));
      if (dates[key].entered < lowest.count) {
        lowest.count = dates[key].entered;
        lowest.date = dates[key].date;
      }
      if (dates[key].entered > highest.count) {
        highest.count = dates[key].entered;
        highest.date = dates[key].date;
      }
      total += dates[key].entered;
    }
    let average = Math.round(total / keys.length * 100) / 100;
    createElements(popup.description, 'afterbegin', [{
      type: 'div',
      children: [{
        text: 'You enter on average ',
        type: 'node'
      }, {
        attributes: {
          class: 'esgst-bold'
        },
        text: average,
        type: 'span'
      }, {
        text: ' giveaways per day.',
        type: 'node'
      }]
    }, {
      type: 'div',
      children: [{
        text: 'Your highest entry count was on ',
        type: 'node'
      }, {
        attributes: {
          class: 'esgst-italic'
        },
        text: highest.date,
        type: 'span'
      }, {
        text: ' with ',
        type: 'node'
      }, {
        attributes: {
          class: 'esgst-bold'
        },
        text: highest.count,
        type: 'span'
      }, {
        text: ' entries.',
        type: 'node'
      }]
    }, {
      type: 'div',
      children: [{
        text: 'Your lowest entry count was on ',
        type: 'node'
      }, {
        attributes: {
          class: 'esgst-italic'
        },
        text: lowest.date,
        type: 'span'
      }, {
        text: ' with ',
        type: 'node'
      }, {
        attributes: {
          class: 'esgst-bold'
        },
        text: lowest.count,
        type: 'span'
      }, {
        text: ' entries.',
        type: 'node'
      }]
    }]);
    createElements(popup.scrollable, 'afterbegin', [{
      attributes: {
        class: 'esgst-text-left markdown',
        style: `border-right: 1px solid #ccc; padding-right: 5px;`
      },
      type: 'div',
      children: [{
        type: 'ul',
        children: items
      }]
    }]);
    popup.open();
  }
  async et_deleteEntry(button, date, popup) {
    if (!window.confirm(`Are you sure you want to delete entries for ${date}? Your entire history for that day will be deleted.`)) return;
    createElements(button, 'atinner', [{
      attributes: {
        class: 'fa fa-circle-o-notch fa-spin'
      },
      type: 'i'
    }]);
    let entries = JSON.parse(getValue('entries', '[]'));
    for (let i = entries.length - 1; i > -1; i--) {
      let entry = entries[i];
      if (!Object(date_fns_isSameDay__WEBPACK_IMPORTED_MODULE_3__["default"])(date, entry.timestamp)) continue;
      entries.splice(i, 1);
    }
    await setValue('entries', JSON.stringify(entries));
    popup.close();
    // noinspection JSIgnoredPromiseFromCall
    this.et_menu();
  }
  et_getEntries(context, main, source, endless) {
    const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .table__remove-default:not(.is-hidden), .esgst-es-page-${endless}.table__remove-default:not(.is-hidden)` : `.table__remove-default:not(.is-hidden)`}`);
    for (let i = 0, n = elements.length; i < n; ++i) {
      this.et_setObserver(elements[i]);
    }
  }
  et_setObserver(element) {
    let code, container, heading, name;
    container = element.closest('.table__row-inner-wrap');
    heading = container.getElementsByClassName('table__column__heading')[0];
    code = heading.getAttribute('href').match(/\/giveaway\/(.+?)\//)[1];
    name = heading.firstChild.textContent.trim().match(/(.+?)(\s\(.+\sCopies\))?$/)[1];
    element.addEventListener('click', this.et_setEntry.bind(this, code, false, name));
  }
  async et_setEntry(code, entry, name) {
    let entries = JSON.parse(getValue('entries', '[]'));
    entries.push({
      code: code,
      entry: entry,
      name: name,
      timestamp: Date.now()
    });
    setValue('entries', JSON.stringify(entries));
  }
}
const giveawaysEntryTracker = new GiveawaysEntryTracker();


/***/ }),
/* 286 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return isSameDay; });
/* harmony import */ var _startOfDay_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(287);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);


/**
 * @name isSameDay
 * @category Day Helpers
 * @summary Are the given dates in the same day (and year and month)?
 *
 * @description
 * Are the given dates in the same day (and year and month)?
 *
 * @param {Date|Number} dateLeft - the first date to check
 * @param {Date|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same day (and year and month)
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?
 * const result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))
 * //=> true
 *
 * @example
 * // Are 4 September and 4 October in the same day?
 * const result = isSameDay(new Date(2014, 8, 4), new Date(2014, 9, 4))
 * //=> false
 *
 * @example
 * // Are 4 September, 2014 and 4 September, 2015 in the same day?
 * const result = isSameDay(new Date(2014, 8, 4), new Date(2015, 8, 4))
 * //=> false
 */
function isSameDay(dirtyDateLeft, dirtyDateRight) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(2, arguments);
  var dateLeftStartOfDay = Object(_startOfDay_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDateLeft);
  var dateRightStartOfDay = Object(_startOfDay_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDateRight);
  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();
}

/***/ }),
/* 287 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return startOfDay; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);


/**
 * @name startOfDay
 * @category Day Helpers
 * @summary Return the start of a day for the given date.
 *
 * @description
 * Return the start of a day for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|Number} date - the original date
 * @returns {Date} the start of a day
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // The start of a day for 2 September 2014 11:55:00:
 * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 02 2014 00:00:00
 */
function startOfDay(dirtyDate) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(1, arguments);
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  date.setHours(0, 0, 0, 0);
  return date;
}

/***/ }),
/* 288 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsCommentHistory", function() { return commentsCommentHistory; });
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(206);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(209);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Process__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(279);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);






class CommentsCommentHistory extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Replaces SteamGifts' native comment button with a new one, so that ESGST can track your comments."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
        className: "fa fa-comments esgst-yellow"
      }), " My Comment History) to the dropdown menu accessible by clicking on the arrow next to your avatar at the header of any page that allows you to view your comment history.")),
      id: 'ch',
      name: 'Comment History',
      sg: true,
      type: 'comments'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.sg) {
      return;
    }
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.replyBox) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.addReplyButton(_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.replyBox);
    }
    const dropdownItem = _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.addDropdownItem({
      buttonContainerId: 'account',
      description: 'View your comment history.',
      icon: 'fa fa-fw fa-comments icon-yellow yellow',
      name: 'My Comment History'
    });
    dropdownItem.nodes.outer.dataset.linkId = 'myCommentHistory';
    dropdownItem.nodes.outer.dataset.linkKey = 'account';
    dropdownItem.nodes.outer.title = _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getFeatureTooltip('ch');
    new _class_Process__WEBPACK_IMPORTED_MODULE_3__["Process"]({
      button: dropdownItem.nodes.outer,
      popup: {
        icon: 'fa-comments',
        title: 'Comment History',
        addProgress: true,
        addScrollable: 'left'
      },
      urls: {
        id: 'ch',
        init: this.ch_initUrls.bind(this),
        request: {
          request: this.ch_requestUrl.bind(this)
        }
      }
    });
  }
  async ch_initUrls(obj) {
    obj.ids = [];
    let comments = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getValue(`${_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.name}CommentHistory`, '[]'));
    for (let i = 0, n = comments.length; i < n; i++) {
      obj.ids.push(comments[i].id);
      obj.items.push(`https://${window.location.hostname}/go/comment/${comments[i].id}`);
    }
  }
  async ch_requestUrl(obj, details, response, responseHtml) {
    const id = obj.ids[obj.index];
    let comment = responseHtml.getElementById(id);
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.sg) {
      var _comment$querySelecto, _comment$querySelecto2;
      comment = comment.closest('.comment');
      const username = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('username');
      let author = (_comment$querySelecto = (_comment$querySelecto2 = comment.querySelector('.comment__author')) === null || _comment$querySelecto2 === void 0 ? void 0 : _comment$querySelecto2.textContent.trim()) !== null && _comment$querySelecto !== void 0 ? _comment$querySelecto : '';
      if (author !== username) {
        var _comment$querySelecto4, _comment$querySelecto5;
        while (author !== username && comment) {
          var _comment$querySelecto3, _comment;
          comment = comment.previousElementSibling;
          author = (_comment$querySelecto3 = (_comment = comment) === null || _comment === void 0 || (_comment = _comment.querySelector('.comment__author')) === null || _comment === void 0 ? void 0 : _comment.textContent.trim()) !== null && _comment$querySelecto3 !== void 0 ? _comment$querySelecto3 : '';
        }
        if (!comment) {
          return;
        }
        const newId = (_comment$querySelecto4 = (_comment$querySelecto5 = comment.querySelector('.comment__summary')) === null || _comment$querySelecto5 === void 0 ? void 0 : _comment$querySelecto5.id) !== null && _comment$querySelecto4 !== void 0 ? _comment$querySelecto4 : '';
        const key = `${_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.name}CommentHistory`;
        const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_1__["Lock"](key, {
          threshold: 300
        });
        await lock.lock();
        let comments = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getValue(key, '[]'));
        comments = comments.map(comment => {
          if (comment.id === id) {
            return {
              ...comment,
              id: newId
            };
          }
          return comment;
        });
        await _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.setValue(key, JSON.stringify(comments));
        await lock.unlock();
      }
      comment.firstElementChild.classList.remove('comment__parent');
      comment.firstElementChild.classList.add('comment__child');
    }
    comment.lastElementChild.remove();
    let parent = comment.parentElement.closest(`.comment, .comment_outer`);
    const fragmentChildren = [];
    if (parent) {
      parent.lastElementChild.remove();
      _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].insert(parent, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
        className: "comment__children comment_children"
      }, comment));
      fragmentChildren.push(parent);
    } else {
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.st) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].insert(comment.getElementsByClassName('action_list')[0].firstElementChild, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("a", {
          href: response.url
        }, responseHtml.title));
      }
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.sg) {
        fragmentChildren.push(_class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
          className: "comments__entity"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("p", {
          className: "comments__entity__name"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("a", {
          href: response.url
        }, responseHtml.title))));
      }
      fragmentChildren.push(_class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
        className: "comment__children comment_children"
      }, comment));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].insert(obj.context, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("div", {
      className: "comment comments comment_outer"
    }, fragmentChildren));
  }
  async ch_saveComment(id, timestamp) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_1__["Lock"](`${_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.name}CommentHistory`, {
      threshold: 300
    });
    await lock.lock();
    let key = `${_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.name}CommentHistory`;
    let comments = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getValue(key, '[]'));
    comments.unshift({
      id: id,
      timestamp: timestamp
    });
    await _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.setValue(key, JSON.stringify(comments));
    await lock.unlock();
  }
}
const commentsCommentHistory = new CommentsCommentHistory();


/***/ }),
/* 289 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalFixedFooter", function() { return generalFixedFooter; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);




class GeneralFixedFooter extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Keeps the footer of any page at the bottom of the window while you scroll down the page.")),
      features: {
        ff_t: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Removes upper portion to reduce the height of the footer."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Add your own links with", ' ', _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].common.getFeatureName(null, 'chfl'), " , to enable now click", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
            className: "table__column__secondary-link",
            href: `${_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.settingsUrl}&id=chfl`,
            target: "_blank"
          }, "here"), "."))),
          name: 'Thin Footer.',
          sg: true,
          st: true
        }
      },
      id: 'ff',
      name: 'Fixed Footer',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].footer) {
      return;
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].footer.nodes.outer.classList.add('esgst-ff');
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('ff_t')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].footer.nodes.outer.classList.add('esgst-thin');
    }
  }
}
const generalFixedFooter = new GeneralFixedFooter();


/***/ }),
/* 290 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalFixedHeader", function() { return generalFixedHeader; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class GeneralFixedHeader extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Keeps the header of any page at the top of the window while you scroll down the page.")),
      id: 'fh',
      name: 'Fixed Header',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    var _Shared$header;
    if (!((_Shared$header = _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].header) !== null && _Shared$header !== void 0 && _Shared$header.nodes.outer)) {
      return;
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].header.nodes.outer.classList.add('esgst-fh');
  }
}
const generalFixedHeader = new GeneralFixedHeader();


/***/ }),
/* 291 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalFixedMainPageHeading", function() { return generalFixedMainPageHeading; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(207);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(216);






class GeneralFixedMainPageHeading extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Keeps the main page heading (usually the first heading of the page, for example, the heading that says \"Giveaways\" in the main page) of any page at the top of the window while you scroll down the page.")),
      id: 'fmph',
      name: 'Fixed Main Page Heading',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_3__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_5__["Events"].PAGE_HEADING_BUILD, builtHeading => builtHeading.nodes.outer.classList.add('esgst-fmph'));
    if (!this.esgst.pageHeadings.length) {
      return;
    }
    this.esgst.style.insertAdjacentText('beforeend', `
			.esgst-fmph {
				top: ${this.esgst.pageTop}px;
			}
		`);
    for (const pageHeading of this.esgst.pageHeadings) {
      pageHeading.classList.add('esgst-fmph');
    }
  }
}
const generalFixedMainPageHeading = new GeneralFixedMainPageHeading();


/***/ }),
/* 292 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsCollapseExpandReplyButton", function() { return commentsCollapseExpandReplyButton; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(206);








class CommentsCollapseExpandReplyButton extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
        className: "fa fa-plus-square"
      }), " if all of the replies in the page are collapsed and ", _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
        className: "fa fa-minus-square"
      }), " if they are expanded) above the comments (in any page) that allows you to collapse/expand all of the replies (comments nested 2 or more levels deep) in the page."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Also adds the same button in front of each comment nested 1 level deep in the page, which allows you to collapse/expand the replies of the comment individually.")),
      features: {
        cerb_a: {
          name: 'Automatically collapse all replies when visiting a page.',
          sg: true,
          st: true
        }
      },
      id: 'cerb',
      name: 'Collapse/Expand Reply Button',
      sg: true,
      sgPaths: /^(Giveaway\s-\sComments|Discussion|Ticket|Trade)$/,
      st: true,
      type: 'comments'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.commentsPath) return;
    let button, collapse, comments, expand;
    comments = document.getElementsByClassName('comments')[0];
    if (comments && comments.children.length) {
      this.buttons = [];
      _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].insert(_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.mainPageHeading, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("div", {
        className: "esgst-cerb-button esgst-clickable",
        ref: ref => button = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
        className: "fa fa-minus-square"
      }), " Collapse all replies"), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", {
        className: "esgst-hidden"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
        className: "fa fa-plus-square"
      }), " Expand all replies")));
      collapse = button.firstElementChild;
      expand = collapse.nextElementSibling;
      collapse.addEventListener('click', this.cerb_collapseAllReplies.bind(this, collapse, expand));
      expand.addEventListener('click', this.cerb_expandAllReplies.bind(this, collapse, expand));
      _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.endlessFeatures.push(this.cerb_getReplies.bind(this, collapse, expand));
    }
  }
  cerb_getReplies(collapse, expand, context, main, source, endless) {
    let id = context === document && main ? window.location.hash.replace(/#/, '') : null,
      permalink = id ? document.getElementById(id) : null,
      elements = context.querySelectorAll(_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getSelectors(endless, [`:not(.esgst-popup) .comments > X.comment`, `:not(.esgst-popup) .comments > X.comment_outer`]));
    if (!elements.length) return;
    for (let reply of elements) {
      let replies = reply.querySelector(`.comment__children, .comment_children`);
      if (replies && replies.children.length) {
        let button;
        _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].insert(reply.firstElementChild, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("div", {
          className: "esgst-cerb-reply-button esgst-clickable",
          ref: ref => button = ref
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", {
          title: _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getFeatureTooltip('cerb', 'Collapse all replies')
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
          className: "fa fa-minus-square"
        })), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", {
          className: "esgst-hidden",
          title: _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getFeatureTooltip('cerb', 'Expand all replies')
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
          className: "fa fa-plus-square"
        }))));
        this.cerb_setButton(button, permalink && reply.contains(permalink), reply, replies.children);
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('cerb_a')) {
      this.cerb_collapseAllReplies(collapse, expand);
    }
  }
  cerb_setButton(button, permalink, reply, replies) {
    let collapse, expand;
    collapse = button.firstElementChild;
    expand = collapse.nextElementSibling;
    this.buttons.push({
      collapse: this.cerb_collapseReplies.bind(this, collapse, expand, replies),
      expand: this.cerb_expandReplies.bind(this, collapse, expand, replies),
      permalink: permalink
    });
    collapse.addEventListener('click', this.cerb_collapseReplies.bind(this, collapse, expand, replies));
    expand.addEventListener('click', this.cerb_expandReplies.bind(this, collapse, expand, replies));
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('cerb_a') && !permalink) {
      collapse.classList.toggle('esgst-hidden');
      expand.classList.toggle('esgst-hidden');
    }
  }
  cerb_collapseReplies(collapse, expand, replies) {
    let i, n;
    for (i = 0, n = replies.length; i < n; ++i) {
      replies[i].classList.add('esgst-hidden');
    }
    collapse.classList.add('esgst-hidden');
    expand.classList.remove('esgst-hidden');
  }
  cerb_expandReplies(collapse, expand, replies) {
    let i, n;
    for (i = 0, n = replies.length; i < n; ++i) {
      replies[i].classList.remove('esgst-hidden');
    }
    collapse.classList.remove('esgst-hidden');
    expand.classList.add('esgst-hidden');
  }
  cerb_collapseAllReplies(collapse, expand) {
    for (const button of this.buttons) {
      if (!button.permalink) {
        button.collapse();
      }
    }
    collapse.classList.add('esgst-hidden');
    expand.classList.remove('esgst-hidden');
  }
  cerb_expandAllReplies(collapse, expand) {
    for (const button of this.buttons) {
      button.expand();
    }
    collapse.classList.remove('esgst-hidden');
    expand.classList.add('esgst-hidden');
  }
}
const commentsCollapseExpandReplyButton = new CommentsCollapseExpandReplyButton();


/***/ }),
/* 293 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsReplyBoxOnTop", function() { return commentsReplyBoxOnTop; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class CommentsReplyBoxOnTop extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Moves the reply box over the comments (in any page) so that you do not need to scroll down to the bottom of the page to add a comment.")),
      id: 'rbot',
      name: 'Reply Box On Top',
      sg: true,
      st: true,
      type: 'comments'
    };
  }
  init() {
    let element = _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.mainPageHeading;
    const box = _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.replyBox || _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.reviewBox;
    if (!box) {
      return;
    }
    let boxContainer;
    _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].insert(element, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("div", {
      className: "esgst-rbot",
      ref: ref => boxContainer = ref
    }));
    boxContainer.appendChild(box);
    let button = boxContainer.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.cancelButtonClass)[0];
    if (!button) return;
    button.addEventListener('click', () => window.setTimeout(() => boxContainer.appendChild(box), 0));
  }
}
const commentsReplyBoxOnTop = new CommentsReplyBoxOnTop();


/***/ }),
/* 294 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalFixedSidebar", function() { return generalFixedSidebar; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class GeneralFixedSidebar extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Keeps the sidebar of any page at the left side of the window while you scroll down the page.")),
      id: 'fs',
      name: 'Fixed Sidebar',
      sg: true,
      type: 'general'
    };
  }
  init() {
    if (!this.esgst.sidebar) {
      return;
    }
    const top = this.esgst.pageTop + 25;
    this.esgst.style.insertAdjacentText('beforeend', `
			.esgst-fs {
				max-height: calc(100vh - ${top + 30 + (_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('ff') ? 39 : 0)}px);
				top: ${top}px;
			}
		`);
    this.esgst.sidebar.classList.add('esgst-fs');
  }
}
const generalFixedSidebar = new GeneralFixedSidebar();


/***/ }),
/* 295 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawaysSorter", function() { return giveawaysGiveawaysSorter; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(222);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(212);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(144);









const capitalizeFirstLetter = _Common__WEBPACK_IMPORTED_MODULE_8__["common"].capitalizeFirstLetter.bind(_Common__WEBPACK_IMPORTED_MODULE_8__["common"]),
  createElements = _Common__WEBPACK_IMPORTED_MODULE_8__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_8__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_8__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_8__["common"]),
  saveAndSortContent = _Common__WEBPACK_IMPORTED_MODULE_8__["common"].saveAndSortContent.bind(_Common__WEBPACK_IMPORTED_MODULE_8__["common"]);
class GiveawaysGiveawaysSorter extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-sort"
      }), ") to the main page heading of any", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways"
      }, "giveaways"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: "https://www.steamgifts.com/entered"
      }, "entered"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: "https://www.steamgifts.com/group/SJ7Bu/"
      }, "group"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "user"), " page that allows you to sort the giveaways in the page by game name, points, rating (if", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
        "data-esgst-feature-id": "gc_r"
      }), " is enabled), end time, start time, creator, comments, entries, chance/chance per point (if ", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
        "data-esgst-feature-id": "gwc"
      }), ' ', "is enabled), ratio (if ", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
        "data-esgst-feature-id": "gwr"
      }), " is enabled) and points to win (if ", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
        "data-esgst-feature-id": "gptw"
      }), " is enabled)."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "There is also an option to automatically sort the giveaways so that every time you open the page the giveaways are already sorted by whatever option you prefer.")),
      id: 'gas',
      name: 'Giveaways Sorter',
      sg: true,
      type: 'giveaways'
    };
  }
  init(popup) {
    if (!popup && !this.esgst.giveawaysPath && !this.esgst.enteredPath && !this.esgst.gamePath && !this.esgst.groupPath && !this.esgst.userPath) return;
    const typeMatch = window.location.search.match(/type=(wishlist|recommended|group|new)/);
    let type = '';
    if (typeMatch) {
      type = capitalizeFirstLetter(typeMatch[1]);
    } else if (this.esgst.enteredPath) {
      type = 'Entered';
    } else if (this.esgst.userPath) {
      type = 'User';
    } else if (this.esgst.gamePath) {
      type = 'Games';
    } else if (this.esgst.groupPath) {
      type = 'Groups';
    } else if (popup) {
      type = 'Popup';
    } else {
      type = '';
    }
    this.esgst.gas = {
      autoKey: `gas_auto${type}`,
      optionKey: `gas_option${type}`
    };
    let object = {
      button: createHeadingButton({
        context: popup,
        id: 'gas',
        icons: ['fa-sort'],
        title: 'Sort giveaways'
      })
    };
    object.button.addEventListener('click', this.gas_openPopout.bind(this, object));
  }
  gas_openPopout(obj) {
    if (obj.popout) return;
    obj.popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_3__["Popout"]('esgst-gas-popout', obj.button, 0, true);
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_6__["ToggleSwitch"](obj.popout.popout, this.esgst.gas.autoKey, false, 'Auto Sort', false, false, 'Automatically sorts the giveaways by the selected option when loading the page.', _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get(this.esgst.gas.autoKey));
    const children = [{
      attributes: {
        value: 'sortIndex_asc'
      },
      text: 'Default',
      type: 'option'
    }, {
      attributes: {
        value: 'name_asc'
      },
      text: 'Game Name - Ascending',
      type: 'option'
    }, {
      attributes: {
        value: 'name_desc'
      },
      text: 'Game Name - Descending',
      type: 'option'
    }];
    children.push({
      attributes: {
        value: 'level_asc'
      },
      text: 'Level - Ascending',
      type: 'option'
    }, {
      attributes: {
        value: 'level_desc'
      },
      text: 'Level - Descending',
      type: 'option'
    });
    if (!this.esgst.enteredPath) {
      children.push({
        attributes: {
          value: 'points_asc'
        },
        text: 'Points - Ascending',
        type: 'option'
      }, {
        attributes: {
          value: 'points_desc'
        },
        text: 'Points - Descending',
        type: 'option'
      });
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('gc') && _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('gc_r') && !this.esgst.enteredPath) {
      children.push({
        attributes: {
          value: 'rating_asc'
        },
        text: 'Rating - Ascending',
        type: 'option'
      }, {
        attributes: {
          value: 'rating_desc'
        },
        text: 'Rating - Descending',
        type: 'option'
      }, {
        attributes: {
          value: 'ratingQuantity_asc'
        },
        text: 'Rating Quantity - Ascending',
        type: 'option'
      }, {
        attributes: {
          value: 'ratingQuantity_desc'
        },
        text: 'Rating Quantity - Descending',
        type: 'option'
      });
    }
    children.push({
      attributes: {
        value: 'endTime_asc'
      },
      text: 'End Time - Ascending',
      type: 'option'
    }, {
      attributes: {
        value: 'endTime_desc'
      },
      text: 'End Time - Descending',
      type: 'option'
    });
    if (!this.esgst.enteredPath) {
      children.push({
        attributes: {
          value: 'startTime_asc'
        },
        text: 'Start Time - Ascending',
        type: 'option'
      }, {
        attributes: {
          value: 'startTime_desc'
        },
        text: 'Start Time - Descending',
        type: 'option'
      }, {
        attributes: {
          value: 'creator_asc'
        },
        text: 'Creator - Ascending',
        type: 'option'
      }, {
        attributes: {
          value: 'creator_desc'
        },
        text: 'Creator - Descending',
        type: 'option'
      }, {
        attributes: {
          value: 'comments_asc'
        },
        text: 'Comments - Ascending',
        type: 'option'
      }, {
        attributes: {
          value: 'comments_desc'
        },
        text: 'Comments - Descending',
        type: 'option'
      });
    }
    children.push({
      attributes: {
        value: 'entries_asc'
      },
      text: 'Entries - Ascending',
      type: 'option'
    }, {
      attributes: {
        value: 'entries_desc'
      },
      text: 'Entries - Descending',
      type: 'option'
    });
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('gwc')) {
      children.push({
        attributes: {
          value: 'chance_asc'
        },
        text: 'Chance - Ascending',
        type: 'option'
      }, {
        attributes: {
          value: 'chance_desc'
        },
        text: 'Chance - Descending',
        type: 'option'
      }, {
        attributes: {
          value: 'chancePerPoint_asc'
        },
        text: 'Chance Per Point - Ascending',
        type: 'option'
      }, {
        attributes: {
          value: 'chancePerPoint_desc'
        },
        text: 'Chance Per Point - Descending',
        type: 'option'
      });
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('gwc_a')) {
        children.push({
          attributes: {
            value: 'projectedChance_asc'
          },
          text: 'Projected Chance - Ascending',
          type: 'option'
        }, {
          attributes: {
            value: 'projectedChance_desc'
          },
          text: 'Projected Chance - Descending',
          type: 'option'
        }, {
          attributes: {
            value: 'projectedChancePerPoint_asc'
          },
          text: 'Projected Chance Per Point - Ascending',
          type: 'option'
        }, {
          attributes: {
            value: 'projectedChancePerPoint_desc'
          },
          text: 'Projected Chance Per Point - Descending',
          type: 'option'
        });
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('gwr')) {
      children.push({
        attributes: {
          value: 'ratio_asc'
        },
        text: 'Ratio - Ascending',
        type: 'option'
      }, {
        attributes: {
          value: 'ratio_desc'
        },
        text: 'Ratio - Descending',
        type: 'option'
      });
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('gwr_a')) {
        children.push({
          attributes: {
            value: 'projectedRatio_asc'
          },
          text: 'Projected Ratio - Ascending',
          type: 'option'
        }, {
          attributes: {
            value: 'projectedRatio_desc'
          },
          text: 'Projected Ratio - Descending',
          type: 'option'
        });
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('gptw')) {
      children.push({
        attributes: {
          value: 'pointsToWin_asc'
        },
        text: 'Points To Win - Ascending',
        type: 'option'
      }, {
        attributes: {
          value: 'pointsToWin_desc'
        },
        text: 'Points To Win - Descending',
        type: 'option'
      });
    }
    let options = createElements(obj.popout.popout, 'beforeend', [{
      type: 'select',
      children
    }]);
    options.value = _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get(this.esgst.gas.optionKey);
    let callback = () => saveAndSortContent(_class_Scope__WEBPACK_IMPORTED_MODULE_4__["Scope"].findData('current', 'giveaways'), this.esgst.gas.optionKey, options);
    options.addEventListener('change', callback);
    _components_Button__WEBPACK_IMPORTED_MODULE_7__["Button"].create({
      color: 'green',
      icons: ['fa-arrow-circle-right'],
      name: 'Sort',
      onClick: callback
    }).insert(obj.popout.popout, 'beforeend');
    obj.popout.open();
  }
}
const giveawaysGiveawaysSorter = new GiveawaysGiveawaysSorter();


/***/ }),
/* 296 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayBookmarks", function() { return giveawaysGiveawayBookmarks; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(276);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(208);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(209);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(211);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(212);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(224);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(144);















const createElements = _Common__WEBPACK_IMPORTED_MODULE_14__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_14__["common"]),
  endless_load = _Common__WEBPACK_IMPORTED_MODULE_14__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_14__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_14__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_14__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_14__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_14__["common"]),
  lockAndSaveGiveaways = _Common__WEBPACK_IMPORTED_MODULE_14__["common"].lockAndSaveGiveaways.bind(_Common__WEBPACK_IMPORTED_MODULE_14__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_14__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_14__["common"]);
class GiveawaysGiveawayBookmarks extends _class_Module__WEBPACK_IMPORTED_MODULE_7__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-bookmark"
      }), " if the giveaway is bookmarked and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-bookmark-o"
      }), " if it is not) next to a giveaway's game name (in any page) that allows you to bookmark the giveaway so that you can enter it later."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-bookmark"
      }), ") next to the ESGST button at the header of any page that allows you to view all of the giveaways that have been bookmarked.")),
      features: {
        gb_u: {
          name: 'Automatically unbookmark ended giveaways.',
          sg: true
        },
        gb_ue: {
          name: 'Automatically unbookmark entered giveaways.',
          sg: true
        },
        gb_ui: {
          name: 'Automatically unbookmark inaccessible giveaways.',
          sg: true
        },
        gb_h: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "When giveaways that hadn't started start, the button will turn green, indicating that you must open the list of bookmarked giveaways so that the started giveaways can be updated with their end times."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "When giveaways are about to end (based on the number of hours specified below), the button will turn red."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "If there are both started and ending giveaways, the button will be colored with a brown-ish color, as a mixture of the green and red colors."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "If you hover over the button, it shows more details about how many giveaways have started and/or are ending.")),
          inputItems: [{
            id: 'gb_hours',
            prefix: `Time range to trigger highlight: `,
            suffix: ' hours'
          }],
          name: 'Highlight the header button when giveaways have started and/or are about to end.',
          sg: true
        },
        gb_t: {
          name: 'Open the list of bookmarked giveaways in a new tab.',
          sg: true
        },
        gb_se: {
          name: 'Show the button for entered giveaways.',
          sg: true
        }
      },
      id: 'gb',
      name: 'Giveaway Bookmarks',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.gb_getGiveaways.bind(this)
      }
    };
  }
  init() {
    let button = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].header.addButtonContainer({
      buttonIcon: 'fa fa-bookmark',
      buttonName: 'ESGST Bookmarked Giveaways',
      isNotification: true,
      side: 'left',
      url: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gb_t') ? 'https://www.steamgifts.com/account/settings/profile?esgst=gb' : '',
      openInNewTab: true
    });
    button.nodes.outer.classList.add('esgst-hidden');
    button.nodes.buttonIcon.title = getFeatureTooltip('gb', 'View your bookmarked giveaways');

    // noinspection JSIgnoredPromiseFromCall
    this.gb_addButton(button);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gb_ue') && this.esgst.enterGiveawayButton) {
      this.esgst.enterGiveawayButton.onclick = () => {
        let giveaway = _class_Scope__WEBPACK_IMPORTED_MODULE_9__["Scope"].findData('main', 'giveaways')[0];
        if (giveaway && giveaway.gbButton) {
          if (giveaway.gbButton.index === 3) {
            // noinspection JSIgnoredPromiseFromCall
            giveaway.gbButton.change(giveaway.gbButton.callbacks[2]);
          }
          if (!_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gb_se')) {
            giveaway.gbButton.button.classList.add('esgst-hidden');
          }
        }
      };
    }
    if (this.esgst.leaveGiveawayButton) {
      this.esgst.leaveGiveawayButton.onclick = () => {
        let giveaway = _class_Scope__WEBPACK_IMPORTED_MODULE_9__["Scope"].findData('main', 'giveaways')[0];
        if (giveaway && giveaway.gbButton) {
          giveaway.gbButton.button.classList.remove('esgst-hidden');
        }
      };
    }
  }
  gb_addButton(button) {
    let i, n;
    let bookmarked = [],
      endingSoon = 1,
      started = 0,
      ending = 0;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gb_h') && button) {
      button.nodes.outer.classList.add('esgst-gb-highlighted');
    }
    const toSave = {};
    for (let key in this.esgst.giveaways) {
      if (key.length > 5) {
        continue;
      }
      if (this.esgst.giveaways.hasOwnProperty(key)) {
        const giveaway = this.esgst.giveaways[key];
        if (giveaway.bookmarked) {
          if (typeof giveaway.started === 'undefined') {
            giveaway.started = true;
            toSave[key] = {
              started: true
            };
          }
          if (Date.now() >= giveaway.endTime || !giveaway.endTime) {
            if (giveaway.started) {
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gb_u')) {
                delete giveaway.bookmarked;
                toSave[key] = {
                  bookmarked: null
                };
              } else {
                bookmarked.push(giveaway);
              }
            } else {
              bookmarked.push(giveaway);
              ++started;
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gb_h') && button) {
                button.nodes.outer.classList.add('started');
              }
            }
          } else {
            bookmarked.push(giveaway);
            if (giveaway.started) {
              endingSoon = giveaway.endTime - Date.now() - _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gb_hours') * 3600000;
              if (endingSoon <= 0) {
                ++ending;
              }
            }
          }
        }
      }
    }
    _Common__WEBPACK_IMPORTED_MODULE_14__["common"].lock_and_save_giveaways(toSave);
    let title;
    if (started || ending) {
      if (started) {
        if (ending) {
          title = `(${started} started - click to update them, ${ending} ending)`;
        } else {
          title = `(${started} started - click to update them)`;
        }
      } else {
        title = `(${ending} ending)`;
      }
    } else {
      title = '';
    }
    if (button) {
      button.nodes.buttonIcon.title = getFeatureTooltip('gb', `View your bookmarked giveaways ${title}`);
    }
    if (bookmarked.length) {
      bookmarked.sort((a, b) => {
        if (a.endTime > b.endTime) {
          return 1;
        } else if (a.endTime < b.endTime) {
          return -1;
        } else {
          return 0;
        }
      });
      for (i = 0, n = bookmarked.length; i < n; ++i) {
        if (Date.now() > bookmarked[i].endTime) {
          bookmarked.push(bookmarked.splice(i, 1)[0]);
          i -= 1;
          n -= 1;
        }
      }
      if (button) {
        button.nodes.outer.classList.remove('esgst-hidden');
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gb_h') && ending > 0) {
          button.nodes.outer.classList.add('ending');
        }
      }
    }
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.isCurrentPath('Account') && this.esgst.parameters.esgst === 'gb') {
      const context = this.esgst.sidebar.nextElementSibling;
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('removeSidebarInFeaturePages')) {
        this.esgst.sidebar.remove();
      }
      context.innerHTML = '';
      context.setAttribute('data-esgst-popup', 'true');
      this.heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_13__["PageHeading"].create('gb', [{
        name: 'ESGST',
        url: this.esgst.settingsUrl
      }, {
        name: 'Bookmarked Giveaways',
        url: `https://www.steamgifts.com/account/settings/profile?esgst=gb`
      }]).insert(context, 'beforeend');
      this.gb_loadGibs(bookmarked, context, createElements(context, 'beforeend', [{
        type: 'div'
      }]));
    }
    if (button && !_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gb_t')) {
      button.nodes.outer.addEventListener('click', () => {
        const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_8__["Popup"]({
          addScrollable: 'left',
          isTemp: true
        });
        this.heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_13__["PageHeading"].create('gb', [{
          name: 'ESGST',
          url: this.esgst.settingsUrl
        }, {
          name: 'Bookmarked Giveaways',
          url: `https://www.steamgifts.com/account/settings/profile?esgst=gb`
        }]).insert(popup.description, 'afterbegin');
        this.gb_loadGibs(bookmarked, popup.description, popup.scrollable, popup);
      });
    }
  }
  gb_loadGibs(bookmarked, container, context, popup) {
    let info;
    let i = 0;
    let n = bookmarked.length;
    let gbGiveaways = createElements(context, 'beforeend', [{
      attributes: {
        class: 'esgst-text-left'
      },
      type: 'div'
    }]);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gas') || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf') && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf_m') || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('mm')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gas')) {
        this.esgst.modules.giveawaysGiveawaysSorter.init(this.heading.nodes.outer);
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf') && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf_m')) {
        this.heading.nodes.outer.appendChild(this.esgst.modules.giveawaysGiveawayFilters.filters_addContainer(this.heading.nodes.outer, 'Gb'));
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('mm')) {
        this.esgst.modules.generalMultiManager.mm(this.heading.nodes.outer);
      }
    }
    _components_Button__WEBPACK_IMPORTED_MODULE_12__["Button"].create({
      color: 'white',
      icons: ['fa-list'],
      name: 'View Raw List',
      onClick: this.gb_openList.bind(this, {
        bookmarked
      })
    }).insert(this.heading.nodes.outer, 'beforeend');
    const loadMoreButton = _components_Button__WEBPACK_IMPORTED_MODULE_12__["Button"].create([{
      color: 'green',
      icons: ['fa-plus'],
      name: 'Load more...',
      onClick: () => {
        return new Promise(resolve => {
          // noinspection JSIgnoredPromiseFromCall
          this.gb_loadGiveaways(i, i + 5, bookmarked, gbGiveaways, info, popup, value => {
            i = value;
            if (i > n) {
              loadMoreButton.destroy();
            } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('es_gb') && context.scrollHeight <= context.offsetHeight) {
              loadMoreButton.onClick(true);
            }
            resolve();
          });
        });
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Loading more...'
    }]).insert(this.heading.nodes.outer, 'beforeend');
    if (popup) {
      popup.open();
    }
    info = createElements(context, 'beforebegin', [{
      type: 'div',
      children: [{
        text: '0',
        type: 'span'
      }, {
        text: 'P required to enter all ',
        type: 'node'
      }, {
        text: '0',
        type: 'span'
      }, {
        text: ' giveaways.',
        type: 'node'
      }]
    }]);
    loadMoreButton.onClick();
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('es_gb')) {
      context.addEventListener('scroll', () => {
        if (context.scrollTop + context.offsetHeight >= context.scrollHeight && !loadMoreButton.isBusy) {
          loadMoreButton.onClick();
        }
      });
    }
  }
  gb_openList(gb) {
    if (gb.popup) {
      gb.popup.open();
      return;
    }
    gb.popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_8__["Popup"]({
      addScrollable: true,
      icon: 'fa-list',
      title: `Bookmarked Giveaways (Raw List)`
    });
    for (const giveaway of gb.bookmarked) {
      const attributes = {
        class: 'table__column__secondary-link',
        href: `/giveaway/${giveaway.code}/`
      };
      if (giveaway.name) {
        attributes['data-esgst'] = true;
      }
      createElements(gb.popup.scrollable, 'beforeend', [{
        type: 'div',
        children: [{
          attributes,
          text: giveaway.name || giveaway.code,
          type: 'a'
        }]
      }]);
    }
    gb.popup.open();
    // noinspection JSIgnoredPromiseFromCall
    this.gb_loadNames(gb);
  }
  async gb_loadNames(gb) {
    let giveaways = {};
    for (let i = 0, n = gb.popup.scrollable.children.length; i < n; i++) {
      let element = gb.popup.scrollable.children[i].firstElementChild;
      if (!element.getAttribute('data-esgst')) {
        let code = element.textContent;
        element.textContent = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(element.getAttribute('href'), {
          queue: true
        })).html.getElementsByClassName('featured__heading__medium')[0].textContent;
        giveaways[code] = {
          name: element.textContent
        };
      }
    }
    lockAndSaveGiveaways(giveaways);
  }
  async gb_loadGiveaways(i, n, bookmarked, gbGiveaways, info, popup, callback) {
    if (i < n) {
      if (bookmarked[i]) {
        let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`/giveaway/${bookmarked[i].code}/`, {
          queue: true
        });
        let endTime;
        let responseHtml = response.html;
        let url = response.url;
        const buildResult = await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.buildGiveaway(responseHtml, url);
        if (buildResult) {
          endTime = 0;
          if (!bookmarked[i].started && buildResult.started) {
            endTime = buildResult.timestamp;
          }
          info.firstElementChild.textContent = parseInt(info.firstElementChild.textContent) + buildResult.points;
          info.lastElementChild.textContent = parseInt(info.lastElementChild.textContent) + 1;
          if (Date.now() > bookmarked[i].endTime && !gbGiveaways.getElementsByClassName('row-spacer')[0]) {
            _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(gbGiveaways, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
              className: "row-spacer"
            }));
          }
          createElements(gbGiveaways, 'beforeend', buildResult.html);
          await endless_load(gbGiveaways.lastElementChild, false, 'gb');
          if (endTime > 0) {
            const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_6__["Lock"]('giveaway', {
              threshold: 300
            });
            await lock.lock();
            let giveaways = JSON.parse(getValue('giveaways'));
            giveaways[bookmarked[i].code].started = true;
            giveaways[bookmarked[i].code].endTime = endTime;
            await setValue('giveaways', JSON.stringify(giveaways));
            await lock.unlock();
            window.setTimeout(() => this.gb_loadGiveaways(++i, n, bookmarked, gbGiveaways, info, popup, callback), 0);
          } else {
            window.setTimeout(() => this.gb_loadGiveaways(++i, n, bookmarked, gbGiveaways, info, popup, callback), 0);
          }
        } else {
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gb_ui')) {
            const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_6__["Lock"]('giveaway', {
              threshold: 300
            });
            await lock.lock();
            let giveaways = JSON.parse(getValue('giveaways'));
            if (giveaways[bookmarked[i].code]) {
              delete giveaways[bookmarked[i].code].bookmarked;
            }
            await setValue('giveaways', JSON.stringify(giveaways));
            await lock.unlock();
          }
          window.setTimeout(() => this.gb_loadGiveaways(++i, n, bookmarked, gbGiveaways, info, popup, callback), 0);
        }
      } else {
        callback(i + 1);
      }
    } else {
      callback(i);
    }
  }
  gb_getGiveaways(giveaways, main) {
    giveaways.forEach(giveaway => {
      if (main && this.esgst.wonPath) return;
      if ((!main || !this.esgst.archivePath) && giveaway.creator !== _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('username') && giveaway.code && giveaway.code.length === 5 && giveaway.url && !giveaway.gbButton) {
        giveaway.bookmarked = this.esgst.giveaways[giveaway.code] && this.esgst.giveaways[giveaway.code].bookmarked;
        giveaway.gbButton = new _class_Button__WEBPACK_IMPORTED_MODULE_3__["Button"](giveaway.headingName, 'beforebegin', {
          callbacks: [this.gb_bookmarkGiveaway.bind(this, giveaway, main), null, this.gb_unbookmarkGiveaway.bind(this, giveaway, main), null],
          className: 'esgst-gb-button',
          icons: ['fa-bookmark-o esgst-clickable', 'fa-circle-o-notch fa-spin', 'fa-bookmark', 'fa-circle-o-notch fa-spin'],
          id: 'gb',
          index: giveaway.bookmarked ? 2 : 0,
          titles: ['Bookmark giveaway', 'Bookmarking giveaway...', 'Unbookmark giveaway', 'Unbookmarking giveaway...']
        });
        giveaway.gbButton.button.setAttribute('data-draggable-id', 'gb');
        if ((giveaway.entered || this.esgst.enteredPath && main) && !_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gb_se')) {
          giveaway.gbButton.button.classList.add('esgst-hidden');
        }
      }
    });
  }
  async gb_bookmarkGiveaway(giveaway) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_6__["Lock"]('giveaway', {
      threshold: 300
    });
    await lock.lock();
    let giveaways = JSON.parse(getValue('giveaways', '{}'));
    if (!giveaways[giveaway.code]) {
      giveaways[giveaway.code] = {};
    }
    giveaways[giveaway.code].code = giveaway.code;
    giveaways[giveaway.code].endTime = giveaway.endTime;
    giveaways[giveaway.code].name = giveaway.name;
    giveaways[giveaway.code].started = giveaway.started;
    giveaways[giveaway.code].bookmarked = true;
    giveaway.bookmarked = true;
    await setValue('giveaways', JSON.stringify(giveaways));
    await lock.unlock();
    return true;
  }
  async gb_unbookmarkGiveaway(giveaway) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_6__["Lock"]('giveaway', {
      threshold: 300
    });
    await lock.lock();
    let giveaways = JSON.parse(getValue('giveaways', '{}'));
    if (giveaways[giveaway.code]) {
      delete giveaways[giveaway.code].bookmarked;
    }
    delete giveaway.bookmarked;
    await setValue('giveaways', JSON.stringify(giveaways));
    await lock.unlock();
    return true;
  }
}
const giveawaysGiveawayBookmarks = new GiveawaysGiveawayBookmarks();


/***/ }),
/* 297 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gamesGameCategories", function() { return gamesGameCategories; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(146);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(208);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(96);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(209);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(210);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(221);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(132);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(144);



















const createElements = _Common__WEBPACK_IMPORTED_MODULE_18__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_18__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_18__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_18__["common"]),
  lockAndSaveGames = _Common__WEBPACK_IMPORTED_MODULE_18__["common"].lockAndSaveGames.bind(_Common__WEBPACK_IMPORTED_MODULE_18__["common"]);
class GamesGameCategories extends _class_Module__WEBPACK_IMPORTED_MODULE_12__["Module"] {
  constructor() {
    super();
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "replacePlaceholders", (str, values) => {
      return str.replace(/%steam-id%/g, values.steamId).replace(/%username%/g, values.username).replace(/%game-type%/g, values.gameType).replace(/%game-id%/g, values.gameId).replace(/%game-name%/g, values.gameName).replace(/%game-search-name%/g, values.gameSearchName).replace(/%hltb-id%/g, values.hltbId);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "fetchFromServer", async (gc, games, toFetch) => {
      const params = {
        apps: [],
        subs: [],
        bundles: []
      };
      for (const item of toFetch) {
        if (item.fetched) {
          continue;
        }
        if (typeof item.id === 'string' && item.id.match(/^SteamBundle/)) {
          item.realId = item.id.replace(/^SteamBundle/, '');
          item.realType = 'bundles';
        } else {
          item.realId = item.id;
          item.realType = item.type;
        }
        params[item.realType].push(item.realId);
      }
      if (params.apps.length > 0 || params.subs.length > 0 || params.bundles.length > 0) {
        try {
          const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(`https://esgst.rafaelgomes.xyz/api/games?app_ids=${params.apps.join(`,`)}&sub_ids=${params.subs.join(`,`)}&bundle_ids=${params.bundles.join(`,`)}`);
          const json = response.json;
          for (const item of toFetch) {
            item.fetched = true;
          }
          for (const item of toFetch) {
            if (!item.fetched) {
              continue;
            }
            const data = json.result.found[item.realType][item.realId];
            if (!data || data.queued_for_update) {
              continue;
            }
            const lastUpdate = new Date(data.last_update).getTime();
            item.found = true;
            item.isComplete = true;
            item.dependencies = [];
            gc.cache[item.type][item.id] = await this.fakeApi(gc, toFetch, data, item.id, item.type, lastUpdate, item);
            if (item.type === 'apps') {
              this.fetchedApps.push(item.id);
            }
            this.checkCategories(gc, games, toFetch, item);
          }
        } catch (err) {
          _class_Logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].warning(err.message, err.stack);
        }
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "fetchFromSteam", async (gc, games, toFetch, now) => {
      const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_10__["Lock"]('gc');
      await lock.lock();
      for (const item of toFetch) {
        if (item.found) {
          continue;
        }
        item.fetched = true;
        item.found = true;
        item.isComplete = true;
        item.dependencies = [];
        gc.cache[item.type][item.id] = await this.gc_getCategories(gc, now, games, item.id, item.type, toFetch, item);
        if (item.type === 'apps') {
          this.fetchedApps.push(item.id);
        }
        this.checkCategories(gc, games, toFetch, item);
        await lock.update();
      }
      await lock.unlock();
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "checkCategories", (gc, games, toFetch, item) => {
      if (item.hasIndex) {
        if (item.isComplete) {
          this.addCategories(gc, games, item);
          this.updateIndexes();
        } else {
          this.updateIndexes(item.type, item.id);
        }
      } else {
        for (const subItem of toFetch) {
          if (subItem.dependencies && subItem.dependencies.length > 0) {
            subItem.dependencies = subItem.dependencies.filter(subId => !this.fetchedApps.includes(subId));
            if (subItem.dependencies.length === 0) {
              this.addCategories(gc, games, subItem);
              this.updateIndexes();
            }
          }
        }
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "addCategories", (gc, games, item) => {
      const categories = gc.cache[item.type][item.id];
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_b') && categories.dlc && categories.base && gc.cache.apps[categories.base]) {
        categories.freeBase = gc.cache.apps[categories.base].free;
      }
      this.gc_addCategory(gc, gc.cache[item.type][item.id], games[item.type][item.id], item.id, _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games[item.type][item.id], item.type, item.type === 'apps' ? gc.cache.hltb : null);
    });
    this.PRIORITIES = {
      MISSING: 0,
      FAILED: 1,
      OUTDATED: 2,
      ALMOST_OUTDATED: 3
    };
    this.queueIndexes = {
      apps: {},
      subs: {},
      total: 0
    };
    this.fetchableCategories = ['gc_gi', 'gc_lg', 'gc_r', 'gc_a', 'gc_sp', 'gc_mp', 'gc_sc', 'gc_tc', 'gc_l', 'gc_m', 'gc_dlc', 'gc_ea', 'gc_rm', 'gc_rd', 'gc_g', 'gc_p'];
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Adds tags (which are called \"categories\" not to be confused with", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", {
        "data-esgst-feature-id": "gt"
      }), ") below a game's name (in any page) that can display a lot of useful information about the game (depending on which categories you have enabled)."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "The categories can be reordered by dragging and dropping them. You can also drag and drop them between a giveaway's columns (where the end/start times and the creator's username are)."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "While the information is being loaded, an hourglass icon is displayed. This icon can be in different colors depending on the cache status:"), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
        className: "fa fa-hourglass fa-spin esgst-red"
      }), " - The information is missing and will be retrieved from the server with highest priority."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
        className: "fa fa-hourglass fa-spin esgst-orange"
      }), " - The information was not successfully retrieved and it has been 24 hours since the last attempt, so another attempt will be made with high priority."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
        className: "fa fa-hourglass fa-spin esgst-yellow"
      }), " - The information is outdated (hasn't been updated in 7 days) and will be updated with low priority."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
        className: "fa fa-hourglass fa-spin esgst-green"
      }), " - The information is about to become outdated (hasn't been updated in 6 days) and will be updated with lowest priority."))),
      features: {
        gc_e: {
          colors: {
            color: 'Text',
            bColor: 'Border',
            bgColor: 'Background'
          },
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "The enter button of giveaways will be colored with the desired color if the game cannot be checked for ownership and has one of the following categories: Banned, DLC, Learning, Package")),
          name: 'Color enter button of giveaways if game ownership cannot be checked.',
          sg: true
        },
        gc_lp_gv: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Leaving this disabled can help prevent misclicks when using", ' ', _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getFeatureName(null, 'gv'), ".")),
          name: 'Enable category links when using [id=gv].',
          sg: true
        },
        gc_b: {
          name: 'Show the category colors as a bottom border to the giveaways in Grid View.',
          sg: true
        },
        gc_il: {
          name: `Show the panel inline (next to the game's name instead of below it).`,
          sg: true
        },
        gc_a: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game has achievements."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "If you hover over the category, it shows how many achievements the game has.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Achievements',
          sg: true
        },
        gc_bd: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game is banned on Steam.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Banned',
          sg: true,
          sync: 'Delisted Games',
          syncKeys: ['DelistedGames']
        },
        gc_bvg: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Links to the Barter.vg page of the game.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Barter.vg',
          sg: true
        },
        gc_dlc: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game is a DLC.")),
          isCategory: true,
          allowCustomDisplay: true,
          features: {
            gc_dlc_b: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "The icon ", _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
                className: "fa fa-certificate"
              }), " will be added if the base is free, the icon ", _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
                className: "fa fa-dollar"
              }), " will be added if it is not, and no icon will be added if the information is unavailable.")),
              name: 'Indicate if the base game of the DLC is free.',
              sg: true
            },
            gc_dlc_o: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "The same icon you use for the Owned category will be added if the base is owned.")),
              name: 'Indicate if the base game of the DLC is owned.',
              sg: true
            }
          },
          name: 'DLC',
          sg: true
        },
        gc_ea: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game is in early access.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Early Access',
          sg: true
        },
        gc_f: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if you have followed the game on Steam.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Followed',
          sg: true,
          syncKeys: ['FollowedGames']
        },
        gc_fcv: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game gives full CV when given away.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Full CV',
          sg: true
        },
        gc_g: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows the official genres of the game."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "The genres/user-defined tags are listed in the same category, separated by a comma. If they exceed a certain width, a \"...\" is added and the rest is hidden (they can be seen by hovering over the category).")),
          isCategory: true,
          features: {
            gc_g_s: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "With this option enabled, each genre/user-defined tag will have its own category instead of all of them being listed in the same one."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "This option allows each separate category to be colored individually.")),
              name: 'Show each genre/user-defined tag as a separate category.',
              sg: true
            },
            gc_g_udt: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows the user-defined tags that the game has in addition to the official genres.")),
              name: 'User-Defined Tags',
              sg: true
            }
          },
          name: 'Genres',
          sg: true
        },
        gc_gi: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows how many giveaways you have already made for the game and how much real CV you should get for a new giveaway.")),
          isCategory: true,
          name: 'Giveaway Info',
          sg: true
        },
        gc_h: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if you have hidden the game on SteamGifts.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Hidden',
          sg: true
        },
        gc_hltb: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows how long it takes on average to beat the game based on HowLongToBeat.")),
          isCategory: true,
          allowCustomDisplay: true,
          options: [{
            title: `For singleplayer games, show:`,
            values: ['Main Story', 'Main + Extra', 'Completionist']
          }, {
            title: `For multiplayer games, show:`,
            values: ['Co-Op', 'Vs.']
          }, {
            title: `For singleplayer/multiplayer games, show:`,
            values: ['Solo', 'Co-Op', 'Vs.']
          }],
          name: 'HLTB',
          sg: true,
          sync: 'HLTB Times',
          syncKeys: ['HltbTimes']
        },
        gc_i: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if you have ignored the game on Steam.")),
          isCategory: true,
          allowCustomDisplay: true,
          features: {
            gc_i_t: {
              background: true,
              name: 'Color the table row in tables.',
              sg: true
            }
          },
          name: 'Ignored',
          sg: true
        },
        gc_lg: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if Steam is learning about the game.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Learning',
          sg: true
        },
        gc_l: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game is compatible with Linux.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Linux',
          sg: true
        },
        gc_m: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game is compatible with Mac.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Mac',
          sg: true
        },
        gc_mp: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game is multiplayer.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Multiplayer',
          sg: true
        },
        gc_ncv: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game gives no CV when given away."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "If you hover over the category, it shows the date since it gives no CV.")),
          isCategory: true,
          allowCustomDisplay: true,
          features: {
            gc_ncv_o: {
              name: 'Only display "No CV" if the game also has "Reduced CV".',
              sg: true
            }
          },
          name: 'No CV',
          sg: true
        },
        gc_o: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if you own the game.")),
          isCategory: true,
          allowCustomDisplay: true,
          features: {
            gc_o_a: {
              isCategory: true,
              features: {
                gc_o_a_t: {
                  background: true,
                  name: 'Color the table row in tables.',
                  sg: true
                }
              },
              name: 'Show if you own the game in any of your alt accounts.',
              sg: true
            },
            gc_o_t: {
              background: true,
              name: 'Color the table row in tables.',
              sg: true
            },
            gc_o_pw: {
              name: 'Do not show if the game already has the Previously Won category.',
              sg: true
            }
          },
          name: 'Owned',
          sg: true
        },
        gc_ocv: {
          colors: {
            fcv_color: `Text (if the game was full CV)`,
            rcv_color: `Text (if the game was reduced CV)`,
            fcv_bgColor: `Background (if the game was full CV)`,
            rcv_bgColor: `Background (if the game was reduced RCV)`
          },
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows the original CV state of a game when it was given away."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "This category borrows labels / icons from the Full CV, Reduced CV and No CV categories, and adds its own label / icon before the borrowed ones to differentiate them.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Original CV',
          sg: true
        },
        gc_p: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game is a package."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "If you hover over the category, it shows how many items are contained in the package.")),
          isCategory: true,
          allowCustomDisplay: true,
          features: {
            gc_p_t: {
              background: true,
              name: 'Color the table row in tables if you own some of the games in the package.',
              sg: true
            }
          },
          name: 'Package',
          sg: true
        },
        gc_pw: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if you have previously won the game.")),
          isCategory: true,
          allowCustomDisplay: true,
          features: {
            gc_pw_o: {
              name: 'Do not show if the game already has the Owned category.',
              sg: true
            }
          },
          name: 'Previously Won',
          sg: true
        },
        gc_r: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows the overall rating that the game has on Steam.")),
          isCategory: true,
          features: {
            gc_r_s: {
              name: 'Show the percentage and number of reviews next to the icon.',
              sg: true
            }
          },
          name: 'Rating',
          sg: true
        },
        gc_rcv: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game gives reduced CV when given away."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "If you hover over the category, it shows the date since it gives reduced CV.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Reduced CV',
          sg: {
            include: [{
              enabled: 1,
              pattern: '.*'
            }],
            exclude: [{
              enabled: 1,
              pattern: '^/bundle-games'
            }]
          }
        },
        gc_rd: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows the release date of the game."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "If the game has no release date, a \"?\" will be shown instead.")),
          isCategory: true,
          colors: true,
          name: 'Release Date',
          sg: true
        },
        gc_rm: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game has been removed from the Steam store.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Removed',
          sg: true
        },
        gc_sp: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game is singleplayer.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Singleplayer',
          sg: true
        },
        gc_sc: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game has Steam Cloud.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Steam Cloud',
          sg: true
        },
        gc_tc: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if the game has trading cards.")),
          isCategory: true,
          allowCustomDisplay: true,
          name: 'Trading Cards',
          sg: true
        },
        gc_w: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Shows if you have wishlisted the game on Steam."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "If you hover over the category, it shows the date when you added the game to your wishlist.")),
          isCategory: true,
          allowCustomDisplay: true,
          features: {
            gc_w_t: {
              background: true,
              name: 'Color the table row in tables.',
              sg: true
            }
          },
          name: 'Wishlisted',
          sg: true
        }
      },
      id: 'gc',
      name: 'Game Categories',
      sg: true,
      sync: `Owned/Wishlisted/Ignored Games, Giveaways, Hidden Games, No CV Games, Reduced CV Games`,
      syncKeys: ['Games', 'Giveaways', 'HiddenGames', 'NoCvGames', 'ReducedCvGames'],
      type: 'games'
    };
  }
  isFetchableEnabled() {
    for (const id of this.fetchableCategories) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(id)) {
        return true;
      }
    }
    return false;
  }
  async init() {
    if (this.isFetchableEnabled() && !(await _class_Permissions__WEBPACK_IMPORTED_MODULE_13__["permissions"].contains([['server'], ['steamStore']]))) {
      return;
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gameFeatures.push(this.gc_games.bind(this));
    _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gcToFetch = {
      apps: {},
      subs: {}
    };
  }
  gc_games(games, main, source, endless) {
    // noinspection JSIgnoredPromiseFromCall
    this.gc_getGames(games, main, source, endless);
  }
  async gc_getGames(games, main, source, endless, filtersChanged) {
    let gc = {
      apps: Object.keys(games.apps).filter(id => !id.startsWith('Humble')),
      cache: {
        apps: {},
        subs: {}
      },
      subs: Object.keys(games.subs).filter(id => !id.startsWith('Humble'))
    };

    // get categories
    for (const id of gc.apps) {
      if (games.apps.hasOwnProperty(id)) {
        let elements = games.apps[id];
        for (let i = 0, n = elements.length; i < n; ++i) {
          let element = elements[i];
          if (element.container.classList.contains('esgst-hidden') || element.container.getElementsByClassName('esgst-gc-panel')[0]) {
            continue;
          }
          if (element.container.closest('.poll')) {
            _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].insert(element.container.getElementsByClassName('table__column__heading')[0], 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("div", {
              className: "esgst-gc-panel"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", {
              className: "esgst-gc-loading",
              title: "This game is queued for fetching"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
              className: "fa fa-hourglass fa-spin"
            }), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", null))));
          } else {
            _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].insert(element.heading, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("div", {
              className: "esgst-gc-panel"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", {
              className: "esgst-gc-loading",
              title: "This game is queued for fetching"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
              className: "fa fa-hourglass fa-spin"
            }), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", null))));
          }
        }
      }
    }
    for (const id of gc.subs) {
      if (games.subs.hasOwnProperty(id)) {
        let elements = games.subs[id];
        for (let i = 0, n = elements.length; i < n; ++i) {
          let element = elements[i];
          if (element.container.classList.contains('esgst-hidden') || element.container.getElementsByClassName('esgst-gc-panel')[0]) {
            continue;
          }
          if (element.container.closest('.poll')) {
            _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].insert(element.container.getElementsByClassName('table__column__heading')[0], 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("div", {
              className: "esgst-gc-panel"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", {
              className: "esgst-gc-loading",
              title: "This game is queued for fetching"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
              className: "fa fa-hourglass fa-spin"
            }), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", null))));
          } else {
            _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].insert(element.heading, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("div", {
              className: "esgst-gc-panel"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", {
              className: "esgst-gc-loading",
              title: "This game is queued for fetching"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
              className: "fa fa-hourglass fa-spin"
            }), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", null))));
          }
        }
      }
    }

    // Show categories that do not need to be fetched.
    for (const id of gc.apps) {
      this.gc_addCategory(gc, null, games.apps[id], id, _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id], 'apps', gc.cache.hltb, this.isFetchableEnabled());
    }
    for (const id of gc.subs) {
      this.gc_addCategory(gc, null, games.subs[id], id, _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.subs[id], 'subs', null, this.isFetchableEnabled());
    }
    const giveaways = _class_Scope__WEBPACK_IMPORTED_MODULE_14__["Scope"].findData(null, 'giveaways');
    for (const giveaway of giveaways) {
      this.gc_addBorders(giveaway);
    }
    let toFetch = [];
    if (this.isFetchableEnabled()) {
      gc.cache = JSON.parse(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].get('gcCache', `{ "apps": {}, "subs": {}, "hltb": {}, "timestamp": 0, "version": 7 }`));
      if (gc.cache.version !== 7) {
        gc.cache = {
          apps: {},
          subs: {},
          hltb: gc.cache.hltb,
          timestamp: 0,
          version: 7
        };
      }
      if (!gc.cache.hltb) {
        gc.cache.hltb = {};
      }
      const now = Date.now();
      for (const id in gc.cache.apps) {
        if (!gc.cache.apps.hasOwnProperty(id)) {
          continue;
        }
        let priority;
        if (gc.cache.apps[id].lastCheck) {
          if (gc.apps.indexOf(id) > -1) {
            // Game is in the current page.

            if (now - gc.cache.apps[id].lastCheck > 604800000) {
              // Game has not been updated in 7 days.

              priority = this.PRIORITIES.OUTDATED;
            } else if (now - gc.cache.apps[id].lastCheck > 518400000) {
              // Game has not been updated in 6 days.

              priority = this.PRIORITIES.ALMOST_OUTDATED;
            } else if (!_lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].isSet(gc.cache.apps[id].learning) && (!gc.cache.apps[id].removed || gc.cache.apps[id].removed === -1) && now - gc.cache.apps[id].lastCheck > 86400000) {
              // Game was not successfully fetched and it has been more than 24 hours since the last attempt.

              priority = this.PRIORITIES.FAILED;
            } else {
              // Game is up to date.

              this.gc_addCategory(gc, gc.cache.apps[id], games.apps[id], id, _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id], 'apps', gc.cache.hltb);
              continue;
            }
          } else if (now - gc.cache.apps[id].lastCheck > 2592000000) {
            // Game is not in the current page and has not been updated in 30 days.

            delete gc.cache.apps[id];
            continue;
          }
        } else {
          gc.cache.apps[id].lastCheck = now;
          priority = this.PRIORITIES.FAILED;
        }
        if (games.apps[id] && games.apps[id].filter(item => !item.container.classList.contains('esgst-hidden'))[0]) {
          if (priority >= this.PRIORITIES.OUTDATED) {
            this.gc_addCategory(gc, gc.cache.apps[id], games.apps[id], id, _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id], 'apps', gc.cache.hltb, false, true);
          }
          toFetch.push({
            id,
            lastCheck: gc.cache.apps[id].lastCheck,
            priority,
            type: 'apps',
            hasIndex: true
          });
        }
      }
      for (const id in gc.cache.subs) {
        if (!gc.cache.subs.hasOwnProperty(id)) {
          continue;
        }
        let priority;
        if (gc.cache.subs[id].lastCheck) {
          if (gc.subs.indexOf(id) > -1) {
            // Game is in the current page.

            if (now - gc.cache.subs[id].lastCheck > 604800000) {
              // Game has not been updated in 7 days.

              priority = this.PRIORITIES.OUTDATED;
            } else if (now - gc.cache.subs[id].lastCheck > 518400000) {
              // Game has not been updated in 6 days.

              priority = this.PRIORITIES.ALMOST_OUTDATED;
            } else {
              // Game is up to date.

              this.gc_addCategory(gc, gc.cache.subs[id], games.subs[id], id, _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.subs[id], 'subs', gc.cache.hltb);
              continue;
            }
          } else if (now - gc.cache.subs[id].lastCheck > 2592000000) {
            // Game is not in the current page and has not been updated in 30 days.

            delete gc.cache.subs[id];
            continue;
          }
        } else {
          gc.cache.subs[id].lastCheck = now;
          priority = this.PRIORITIES.FAILED;
        }
        if (games.subs[id] && games.subs[id].filter(item => !item.container.classList.contains('esgst-hidden'))[0]) {
          if (priority >= this.PRIORITIES.OUTDATED) {
            this.gc_addCategory(gc, gc.cache.subs[id], games.subs[id], id, _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.subs[id], 'subs', gc.cache.hltb, false, true);
          }
          toFetch.push({
            id,
            lastCheck: gc.cache.subs[id].lastCheck,
            priority,
            type: 'subs',
            hasIndex: true
          });
        }
      }
      _class_LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].set('gcCache', JSON.stringify(gc.cache));
      for (const id of gc.apps) {
        if (gc.cache.apps[id]) {
          continue;
        }
        toFetch.push({
          id,
          lastCheck: 0,
          priority: this.PRIORITIES.MISSING,
          type: 'apps',
          hasIndex: true
        });
      }
      for (const id of gc.subs) {
        if (gc.cache.subs[id]) {
          continue;
        }
        toFetch.push({
          id,
          lastCheck: 0,
          priority: this.PRIORITIES.MISSING,
          type: 'subs',
          hasIndex: true
        });
      }
      toFetch = toFetch.sort((a, b) => {
        if (a.priority < b.priority) {
          return -1;
        }
        if (a.priority > b.priority) {
          return 1;
        }
        if (a.lastCheck < b.lastCheck) {
          return -1;
        }
        if (a.lastCheck > b.lastCheck) {
          return 1;
        }
        return 0;
      });
      for (const item of toFetch) {
        if (!games[item.type][item.id]) {
          continue;
        }
        this.queueIndexes[item.type][item.id] = this.queueIndexes.total;
        let isInQueue = false;
        for (const game of games[item.type][item.id]) {
          const panel = game.container.getElementsByClassName('esgst-gc-panel')[0];
          if (panel && !panel.getAttribute('data-gcReady')) {
            const loading = panel.getElementsByClassName('esgst-gc-loading')[0];
            if (loading) {
              loading.setAttribute('data-esgst-to-fetch', true);
              loading.title = `This game is queued for fetching (the number indicates its queue position)`;
              let color;
              switch (item.priority) {
                case this.PRIORITIES.MISSING:
                  color = 'red';
                  break;
                case this.PRIORITIES.FAILED:
                  color = 'orange';
                  break;
                case this.PRIORITIES.OUTDATED:
                  color = 'yellow';
                  break;
                case this.PRIORITIES.ALMOST_OUTDATED:
                  color = 'green';
                  break;
              }
              loading.firstElementChild.classList.add(`esgst-${color}`);
              loading.lastElementChild.textContent = ` ${this.queueIndexes[item.type][item.id]}`;
              isInQueue = true;
            }
          }
        }
        if (isInQueue) {
          this.queueIndexes.total += 1;
        }
      }
      if (toFetch.length > 0) {
        this.fetchedApps = [];
        await this.fetchFromServer(gc, games, toFetch); // Fetch missing items from server.
        await this.fetchFromServer(gc, games, toFetch); // Fetch sub apps and DLC bases from server, if any.
        await this.fetchFromSteam(gc, games, toFetch, now); // Fetch missing items from Steam.
        await this.fetchFromServer(gc, games, toFetch); // Fetch sub apps and DLC bases from server, if any.
        await this.fetchFromSteam(gc, games, toFetch, now); // Fetch sub apps and DLC bases from Steam, if any.

        await lockAndSaveGames(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games);
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].set('gcCache', JSON.stringify(gc.cache));
      }
    }

    // add categories
    let categories = ['achievements', 'dlc', 'dlcOwned', 'dlcFree', 'dlcNonFree', 'genres', 'hltb', 'linux', 'mac', 'singleplayer', 'multiplayer', 'package', 'rating', 'reviews', 'learning', 'removed', 'banned', 'steamCloud', 'tradingCards', 'earlyAccess', 'releaseDate'];
    const data = _class_Scope__WEBPACK_IMPORTED_MODULE_14__["Scope"].findData(null, ['giveaways', 'games']);
    const items = data.giveaways.concat(data.games.map(game => game.game));
    for (const item of items) {
      const loading = item.outerWrap.querySelector(`.esgst-gc-loading:not([data-esgst-to-fetch])`);
      if (loading) {
        loading.remove();
      }
      if (item.gcReady || !item.outerWrap.querySelector(`[data-gcReady]`) || item.outerWrap.classList.contains('esgst-hidden')) {
        continue;
      }
      for (let j = 0, numCategories = categories.length; j < numCategories; ++j) {
        let id = categories[j];
        let category = item.outerWrap.getElementsByClassName(`esgst-gc-${id === 'reviews' ? 'rating' : id}`)[0];
        if (category) {
          if (id === 'releaseDate') {
            item.releaseDate = category.getAttribute('data-timestamp');
            if (item.releaseDate === '?') {
              item.releaseDate = -1;
            } else {
              item.releaseDate = parseInt(item.releaseDate) * 1e3;
            }
          } else if (id === 'genres') {
            if (category.children.length) {
              item.genres = Array.from(category.children).map(link => link.title.trim().toLowerCase());
            } else {
              item.genres = category.textContent.toLowerCase().trim().replace(/\s{2,}/g, `, `).split(/,\s*/);
            }
          } else if (id === 'rating') {
            item.rating = parseInt(category.title.match(/(\d+)%/)[1]);
            item.ratingQuantity = parseInt((category.title.match(/\((.+?)\)/)[1] || '0').replace(',', ''));
          } else if (id === 'reviews') {
            item.reviews = parseInt(category.title.match(/\((.+?)\)/)[1].replace(/[^\d]/g, ''));
          } else {
            item[id] = true;
          }
        } else if (id === 'rating') {
          item.rating = -1;
          item.ratingQuantity = 0;
        } else if (id === 'releaseDate') {
          item.releaseDate = -1;
        } else if (id === 'reviews') {
          item.reviews = -1;
        }
      }
      if (!item.isGame) {
        this.gc_addBorders(item);
      }
      item.gcReady = true;
    }
    if (!filtersChanged) {
      if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gf && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(`gf_enable${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gf.type}`)) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.giveawaysGiveawayFilters.filters_filter(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gf, false, endless);
      }
      if (!main && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gfPopup && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gfPopup.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(`gf_enable${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gfPopup.type}`)) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.giveawaysGiveawayFilters.filters_filter(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gfPopup);
      }
      if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gmf && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gmf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(`gmf_enable${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gmf.type}`)) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.gamesGameFilters.filters_filter(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gmf, false, endless);
      }
    }
  }
  gc_addBorders(giveaway) {
    if (giveaway.outerWrap.classList.contains('esgst-hidden') || !giveaway.grid || !_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_b')) {
      return;
    }
    let borders = giveaway.outerWrap.getElementsByClassName('esgst-gc-border')[0];
    if (borders) {
      borders.innerHTML = '';
    } else {
      borders = createElements(giveaway.outerWrap, 'beforeend', [{
        attributes: {
          class: 'esgst-gc-border'
        },
        type: 'div'
      }]);
    }
    const categoryNames = {
      gc_ocv: 'originalCV',
      gc_fcv: 'fullCV',
      gc_rcv: 'reducedCV',
      gc_ncv: 'noCV',
      gc_h: 'hidden',
      gc_i: 'ignored',
      gc_o: 'owned',
      gc_w: 'wishlisted',
      gc_f: 'followed',
      gc_pw: 'won',
      gc_a: 'achievements',
      gc_bd: 'banned',
      gc_sp: 'singleplayer',
      gc_mp: 'multiplayer',
      gc_sc: 'steamCloud',
      gc_tc: 'tradingCards',
      gc_l: 'linux',
      gc_m: 'mac',
      gc_ea: 'earlyAccess',
      gc_lg: 'learning',
      gc_rm: 'removed',
      gc_dlc: 'dlc',
      gc_p: 'package'
    };
    for (const category of _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_categories_gv')) {
      const key = categoryNames[category];
      if (!key || !giveaway.innerWrap.getElementsByClassName(`esgst-gc-${key}`)[0]) {
        continue;
      }
      createElements(borders, 'beforeend', [{
        attributes: {
          class: `esgst-gc-${key}`
        },
        type: 'div'
      }]);
    }
  }
  async gc_fakeBundle(id) {
    const bundleId = id.replace(/^SteamBundle/, '');
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(`https://store.steampowered.com/bundle/${bundleId}?cc=us&l=english`, {
      headers: {
        ['Esgst-Cookie']: `birthtime=0; mature_content=1; `
      }
    });
    return {
      [id]: {
        success: true,
        data: {
          apps: Array.from(response.html.querySelectorAll(`[data-ds-appid]`)).map(x => ({
            id: parseInt(x.getAttribute('data-ds-appid'))
          })),
          name: response.html.querySelector('.pageheader').textContent,
          platforms: {}
        }
      }
    };
  }
  async fakeApi(gc, toFetch, data, id, type, last_update, item) {
    const categories = {
      achievements: data.achievements || 0,
      base: data.base,
      dlc: data.base ? 1 : 0,
      dlcs: data.dlcs,
      earlyAccess: data.genres && data.genres.indexOf('Early Access') >= 0 ? 1 : 0,
      free: data.price === 0,
      genres: '',
      lastCheck: last_update,
      learning: _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].isSet(data.learning) ? data.learning ? 1 : 0 : null,
      linux: data.linux ? 1 : 0,
      mac: data.mac ? 1 : 0,
      multiplayer: data.multiplayer ? 1 : 0,
      name: data.name,
      price: Math.ceil(data.price / 100),
      rating: data.rating ? `${data.rating.percentage}% (${data.rating.count})` : '',
      ratingType: '',
      releaseDate: data.release_date ? new Date(data.release_date).getTime() : '?',
      removed: data.removed ? 1 : 0,
      singleplayer: data.singleplayer ? 1 : 0,
      steamCloud: data.steam_cloud ? 1 : 0,
      tags: '',
      tradingCards: data.trading_cards ? 1 : 0
    };
    if (data.alias) {
      if (!_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games[type][id]) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games[type][id] = {};
      }
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games[type][id].alias = data.alias;
    }
    if (type === 'apps' && data.subs) {
      if (!_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id]) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id] = {};
      }
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id].subs = null;
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id].packages = data.subs;
    }
    if (type === 'subs' && data.apps) {
      if (!_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.subs[id]) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.subs[id] = {};
      }
      _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.subs[id].apps = data.apps;
      for (const appId of _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.subs[id].apps) {
        if (item.hasIndex && !gc.cache.apps[appId] && !toFetch.filter(x => x.type === 'apps' && x.id == appId)[0]) {
          item.isComplete = false;
          item.dependencies.push(appId);
          toFetch.push({
            id: appId,
            lastCheck: 0,
            priority: this.PRIORITIES.MISSING,
            type: 'apps'
          });
        }
      }
    }
    if (data.genres) {
      data.genres.sort((a, b) => {
        return a.localeCompare(b, {
          sensitivity: 'base'
        });
      });
      categories.genres = data.genres.join(`, `);
    }
    if (data.tags) {
      data.tags.sort((a, b) => {
        return a.localeCompare(b, {
          sensitivity: 'base'
        });
      });
      categories.tags = data.tags.join(`, `);
    }
    if (data.rating) {
      if (data.rating.percentage < 40) {
        categories.ratingType = 'Negative';
      } else if (data.rating.percentage < 70) {
        categories.ratingType = 'Mixed';
      } else {
        categories.ratingType = 'Positive';
      }
    } else {
      categories.ratingType = '?';
    }
    if (type === 'apps' && !categories.removed && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.delistedGames.removed.indexOf(parseInt(id)) >= 0) {
      categories.removed = 1;
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_b') && categories.dlc && categories.base) {
      if (gc.cache.apps[categories.base]) {
        categories.freeBase = gc.cache.apps[categories.base].free;
      }
      if (item.hasIndex && typeof categories.freeBase === 'undefined' && !toFetch.filter(x => x.type === 'apps' && x.id == categories.base)[0]) {
        item.isComplete = false;
        item.dependencies.push(categories.base);
        toFetch.push({
          id: categories.base,
          lastCheck: 0,
          priority: this.PRIORITIES.MISSING,
          type: 'apps'
        });
      }
    }
    return categories;
  }
  async gc_getCategories(gc, currentTime, games, id, type, toFetch, item) {
    if (item.hasIndex && games[type][id]) {
      for (const game of games[type][id]) {
        const panel = game.container.getElementsByClassName('esgst-gc-panel')[0];
        if (panel && !panel.getAttribute('data-gcReady')) {
          const loading = panel.getElementsByClassName('esgst-gc-loading')[0];
          if (loading) {
            loading.title = 'Fetching game categories...';
            loading.firstElementChild.classList.remove('fa-hourglass');
            loading.firstElementChild.classList.add('fa-circle-o-notch');
            loading.lastElementChild.textContent = '';
          }
        }
      }
    }
    let categories = {
      achievements: 0,
      dlc: 0,
      earlyAccess: 0,
      genres: '',
      lastCheck: currentTime,
      learning: null,
      linux: 0,
      mac: 0,
      multiplayer: 0,
      name: '',
      price: -1,
      rating: '',
      ratingType: '',
      releaseDate: '?',
      removed: -1,
      singleplayer: 0,
      steamCloud: 0,
      tags: '',
      tradingCards: 0
    };
    try {
      let responseJson = typeof id === 'string' && id.match(/^SteamBundle/) ? await this.gc_fakeBundle(id) : (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(`https://store.steampowered.com/api/${type === 'apps' ? `appdetails?appids=` : `packagedetails?packageids=`}${id}&filters=achievements,apps,basic,categories,genres,name,packages,platforms,price,price_overview,release_date&cc=us&l=english`, {
        anon: true
      })).json;
      let data;
      if (responseJson && responseJson[id]) {
        data = responseJson[id].data;
        if (data) {
          if (data.steam_appid && id != data.steam_appid) {
            if (!_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games[type][id]) {
              _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games[type][id] = {};
            }
            _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games[type][id].alias = data.steam_appid;
          }
          if (type === 'apps' && data.packages) {
            if (!_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id]) {
              _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id] = {};
            }
            _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id].subs = null;
            _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id].packages = data.packages.map(x => parseInt(x));
          }
          if (type === 'subs' && data.apps) {
            if (!_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.subs[id]) {
              _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.subs[id] = {};
            }
            _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.subs[id].apps = data.apps.map(x => parseInt(x.id));
            for (const appId of _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.subs[id].apps) {
              if (item.hasIndex && !gc.cache.apps[appId] && !toFetch.filter(x => x.type === 'apps' && x.id == appId)[0]) {
                item.isComplete = false;
                item.dependencies.push(appId);
                toFetch.push({
                  id: appId,
                  lastCheck: 0,
                  priority: this.PRIORITIES.MISSING,
                  type: 'apps'
                });
              }
            }
          }
          if (data.categories) {
            for (let i = 0, n = data.categories.length; i < n; ++i) {
              switch (data.categories[i].description.toLowerCase()) {
                case 'steam achievements':
                  categories.achievements = 1;
                  break;
                case 'single-player':
                  categories.singleplayer = 1;
                  break;
                case 'multi-player':
                case 'online multi-player':
                case 'co-op':
                case 'local co-op':
                case 'online co-op':
                case 'shared/split screen':
                  categories.multiplayer = 1;
                  break;
                case 'steam cloud':
                  categories.steamCloud = 1;
                  break;
                case 'steam trading cards':
                  categories.tradingCards = 1;
                  break;
                default:
                  break;
              }
            }
          }
          if (categories.achievements && data.achievements && data.achievements.total) {
            categories.achievements = data.achievements.total;
          }
          categories.free = !!data.is_free;
          categories.dlc = data.type === 'dlc' ? 1 : 0;
          if (categories.dlc && data.fullgame && data.fullgame.appid) {
            categories.base = parseInt(data.fullgame.appid);
          } else if (data.dlc) {
            categories.dlcs = data.dlc;
          }
          let genres = [];
          if (data.genres) {
            for (let i = 0, n = data.genres.length; i < n; ++i) {
              genres.push(data.genres[i].description.trim());
            }
          }
          genres.sort((a, b) => {
            return a.localeCompare(b, {
              sensitivity: 'base'
            });
          });
          categories.earlyAccess = genres.indexOf('Early Access') >= 0 ? 1 : 0;
          categories.genres = genres.join(`, `);
          let platforms = data.platforms;
          categories.linux = platforms.linux ? 1 : 0;
          categories.mac = platforms.mac ? 1 : 0;
          categories.name = data.name;
          let price = data.price || data.price_overview;
          categories.price = price ? price.currency === 'USD' ? Math.ceil(price.initial / 100) : -1 : 0;
          if (data.release_date && data.release_date.date) {
            // @ts-ignore
            categories.releaseDate = new Date(data.release_date.date).getTime();
          }
        }
      }
      if ((typeof id !== 'string' || !id.match(/^SteamBundle/)) && (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lg') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_r') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rm') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_udt'))) {
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rm') && !_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lg') && !_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_r') && !_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_udt') && type === 'apps' && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.delistedGames.removed.indexOf(parseInt(id)) > -1) {
          categories.removed = 1;
        } else {
          let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(`https://store.steampowered.com/${type.slice(0, -1)}/${id}?cc=us&l=english`, {
            headers: {
              ['Esgst-Cookie']: `birthtime=0; mature_content=1; `
            }
          });
          let responseHtml = response.html;
          if (response.url.match(id)) {
            const element = responseHtml.querySelector('#userReviews .user_reviews_summary_row:last-child');
            if (element) {
              let rating = element.getAttribute('data-tooltip-html').replace(/[,.]/g, '');
              let match = rating.match(/(\d+)%.+?(\d+)/);
              let percentageIndex = 1;
              let countIndex = 2;
              if (!match) {
                match = rating.match(/(\d+).+?(\d+)%/);
                percentageIndex = 2;
                countIndex = 1;
              }
              if (match) {
                categories.rating = `${match[percentageIndex]}% (${match[countIndex]})`;
                rating = parseInt(match[percentageIndex]);
                if (rating >= 0) {
                  if (rating < 40) {
                    categories.ratingType = 'Negative';
                  } else if (rating < 70) {
                    categories.ratingType = 'Mixed';
                  } else {
                    categories.ratingType = 'Positive';
                  }
                } else {
                  categories.ratingType = '?';
                }
              }
            }
            categories.removed = 0;
            let tags = [];
            const elements = responseHtml.querySelectorAll('a.app_tag');
            for (let i = 0, n = elements.length; i < n; ++i) {
              tags.push(elements[i].textContent.trim());
            }
            tags.sort((a, b) => {
              return a.localeCompare(b, {
                sensitivity: 'base'
              });
            });
            categories.tags = tags.join(`, `);
            if (responseHtml.querySelector('.learning_about')) {
              categories.learning = 1;
            } else {
              categories.learning = 0;
            }
          } else {
            categories.removed = 1;
          }
        }
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_b') && categories.dlc && categories.base) {
        if (gc.cache.apps[categories.base]) {
          categories.freeBase = gc.cache.apps[categories.base].free;
        }
        if (item.hasIndex && typeof categories.freeBase === 'undefined' && !toFetch.filter(x => x.type === 'apps' && x.id == categories.base)[0]) {
          item.isComplete = false;
          item.dependencies.push(appId);
          toFetch.push({
            id: categories.base,
            lastCheck: 0,
            priority: this.PRIORITIES.MISSING,
            type: 'apps'
          });
        }
      }
    } catch (error) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].warning(error.message, error.stack);
      if (item.hasIndex && games[type][id]) {
        for (const game of games[type][id]) {
          const panel = game.container.getElementsByClassName('esgst-gc-panel')[0];
          if (panel && !panel.getAttribute('data-gcReady')) {
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_il') && !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.giveawayPath) {
              panel.previousElementSibling.style.display = 'inline-block';
              panel.classList.add('esgst-gc-panel-inline');
            }
            const loading = panel.getElementsByClassName('esgst-gc-loading')[0];
            if (loading) {
              loading.remove();
            }
            createElements(panel, 'beforeend', [{
              attributes: {
                class: 'esgst-bold esgst-red'
              },
              type: 'span',
              children: [{
                attributes: {
                  class: 'fa fa-exclamation',
                  title: 'An error happened while loading game categories.'
                },
                type: 'i'
              }]
            }]);
          }
        }
      }
    }
    return categories;
  }
  updateIndexes(type, id) {
    if (this.queueIndexes.total > 0) {
      const index = id ? this.queueIndexes[type][id] : -1;
      for (const queueId in this.queueIndexes.apps) {
        if (this.queueIndexes.apps[queueId] > 0) {
          if (!id || this.queueIndexes.apps[queueId] > index) {
            this.queueIndexes.apps[queueId] -= 1;
          }
        } else {
          delete this.queueIndexes.apps[queueId];
        }
      }
      for (const queueId in this.queueIndexes.subs) {
        if (this.queueIndexes.subs[queueId] > 0) {
          if (!id || this.queueIndexes.subs[queueId] > index) {
            this.queueIndexes.subs[queueId] -= 1;
          }
        } else {
          delete this.queueIndexes.subs[queueId];
        }
      }
      if (id) {
        this.queueIndexes[type][id] = this.queueIndexes.total - 1;
      } else {
        this.queueIndexes.total -= 1;
      }
    }
    const games = _class_Scope__WEBPACK_IMPORTED_MODULE_14__["Scope"].findData('current', 'games');
    for (const game of games) {
      const panel = game.game.container.getElementsByClassName('esgst-gc-panel')[0];
      if (panel && !panel.getAttribute('data-gcReady')) {
        const loading = panel.getElementsByClassName('esgst-gc-loading')[0];
        if (loading && loading.lastElementChild) {
          loading.lastElementChild.textContent = ` ${this.queueIndexes[game.type][game.code] || ''}`;
        }
      }
    }
  }
  gc_checkPackage(savedGame) {
    const count = {
      num: 0,
      total: savedGame.apps.length
    };
    for (const id of savedGame.apps) {
      const game = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id];
      if (!game) {
        continue;
      }
      if (game.owned || game.alias && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].getProperty(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps, [game.alias, 'owned'])) {
        count.num += 1;
      }
      if (!savedGame.wishlisted) {
        savedGame.wishlisted = game.wishlisted || game.alias && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].getProperty(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps, [game.alias, 'wishlisted']);
      }
    }
    if (count.num === count.total) {
      savedGame.owned = true;
    }
    return count;
  }
  gc_addCategory(gc, cache, games, id, savedGame, type, hltb, isInstant, isOutdated) {
    if (!games) {
      return;
    }
    let active, category, count, cv, elements, encodedName, genre, genreList, genres, giveaway, giveaways, hltbTimes, i, j, k, n, panel, name, sent, singularType, user, value;
    let packageCount = null;
    if (savedGame) {
      savedGame = Object.assign({}, savedGame);
      if (type === 'apps') {
        if (!savedGame.owned && savedGame.alias && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].getProperty(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps, [savedGame.alias, 'owned'])) {
          savedGame.owned = true;
        }
        if (!savedGame.wishlisted && savedGame.alias && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].getProperty(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps, [savedGame.alias, 'wishlisted'])) {
          savedGame.wishlisted = true;
        }
      } else if (type === 'subs' && savedGame.apps) {
        packageCount = this.gc_checkPackage(savedGame);
      }
    }
    singularType = type.slice(0, -1);
    const realId = typeof id === 'string' ? id.replace(/^SteamBundle/, '') : id;
    if (typeof id === 'string' && id.match(/^SteamBundle/)) {
      singularType = 'bundle';
    }
    name = cache ? cache.name : games[0].name;
    encodedName = encodeURIComponent(name.replace(/\.\.\.$/, ''));
    const placeholderValues = {
      steamId: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('steamId'),
      username: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('username'),
      gameType: singularType,
      gameId: realId,
      gameName: name,
      gameSearchName: encodedName,
      hltbId: hltb && hltb[id] && hltb[id].id
    };
    elements = [];
    let categories = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gc_categories_ids;
    for (i = 0, n = categories.length; i < n; ++i) {
      category = categories[i];
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(category)) {
        switch (category) {
          case 'gc_fcv':
            if (savedGame && !savedGame.reducedCV && !savedGame.noCV || !savedGame) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-fullCV',
                  ['data-draggable-id']: 'gc_fcv',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_fcvUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_fcv', 'Full CV')
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_fcv_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_fcv_s_i') ? '' : 'FCV' : _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_fcvLabel'),
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_fcv_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_fcv_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_fcvIcon')}`
                  },
                  type: 'i'
                }] : null
              });
            }
            break;
          case 'gc_rcv':
            if (savedGame && savedGame.reducedCV && (!_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ncv_o') || !savedGame.noCV)) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-reducedCV',
                  ['data-draggable-id']: 'gc_rcv',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rcvUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_rcv', `Reduced CV since ${savedGame.reducedCV}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rcv_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rcv_s_i') ? '' : 'RCV' : _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rcvLabel'),
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rcv_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rcv_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rcvIcon')}`
                  },
                  type: 'i'
                }] : null
              });
            }
            break;
          case 'gc_ncv':
            if (savedGame && savedGame.noCV) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-noCV',
                  ['data-draggable-id']: 'gc_ncv',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ncvUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_ncv', `No CV since ${savedGame.noCV}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ncv_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ncv_s_i') ? '' : 'NCV' : _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ncvLabel'),
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ncv_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ncv_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ncvIcon')}`
                  },
                  type: 'i'
                }] : null
              });
            }
            break;
          case 'gc_hltb':
            hltbTimes = {
              mainStory: 0,
              mainExtra: 0,
              completionist: 0,
              solo: 0,
              coOp: 0,
              vs: 0
            };
            if (savedGame && savedGame.apps && gc.cache.hltb) {
              for (const id of savedGame.apps) {
                if (gc.cache.hltb[id]) {
                  hltbTimes.mainStory += parseFloat(gc.cache.hltb[id].mainStory || 0);
                  hltbTimes.mainExtra += parseFloat(gc.cache.hltb[id].mainExtra || 0);
                  hltbTimes.completionist += parseFloat(gc.cache.hltb[id].completionist || 0);
                  hltbTimes.solo += parseFloat(gc.cache.hltb[id].solo || 0);
                  hltbTimes.coOp += parseFloat(gc.cache.hltb[id].coOp || 0);
                  hltbTimes.vs += parseFloat(gc.cache.hltb[id].vs || 0);
                }
              }
              // @ts-ignore
              hltbTimes.mainStory = isNaN(hltbTimes.mainStory) ? '- ' : `${hltbTimes.mainStory}h`;
              // @ts-ignore
              hltbTimes.mainExtra = isNaN(hltbTimes.mainExtra) ? '- ' : `${hltbTimes.mainExtra}h`;
              // @ts-ignore
              hltbTimes.completionist = isNaN(hltbTimes.completionist) ? '- ' : `${hltbTimes.completionist}h`;
              // @ts-ignore
              hltbTimes.solo = isNaN(hltbTimes.solo) ? '- ' : `${hltbTimes.solo}h`;
              // @ts-ignore
              hltbTimes.coOp = isNaN(hltbTimes.coOp) ? '- ' : `${hltbTimes.coOp}h`;
              // @ts-ignore
              hltbTimes.vs = isNaN(hltbTimes.vs) ? '- ' : `${hltbTimes.vs}h`;
            } else {
              hltbTimes = hltb && hltb[id];
            }
            if (hltbTimes) {
              let time = '';
              if (hltbTimes.mainStory && hltbTimes.mainExtra && hltbTimes.completionist) {
                // singleplayer
                switch (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hltb_index_0')) {
                  case 0:
                    time = hltbTimes.mainStory;
                    break;
                  case 1:
                    time = hltbTimes.mainExtra;
                    break;
                  case 2:
                    time = hltbTimes.completionist;
                    break;
                }
              } else if (hltbTimes.solo && hltbTimes.coOp && hltbTimes.vs) {
                // singleplayer/multiplayer
                switch (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hltb_index_2')) {
                  case 0:
                    time = hltbTimes.solo;
                    break;
                  case 1:
                    time = hltbTimes.coOp;
                    break;
                  case 2:
                    time = hltbTimes.vs;
                    break;
                }
              } else if (hltbTimes.coOp && hltbTimes.vs) {
                // singleplayer/multiplayer
                switch (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hltb_index_1')) {
                  case 0:
                    time = hltbTimes.coOp;
                    break;
                  case 1:
                    time = hltbTimes.vs;
                    break;
                }
              } else {
                time = hltbTimes.mainStory || hltbTimes.mainExtra || hltbTimes.completionist || hltbTimes.solo || hltbTimes.coOp || hltbTimes.vs;
              }
              if (time) {
                let title = `Average time to beat based on HowLongToBeat: \n\n`;
                if (hltbTimes.mainStory) {
                  title += `Main Story: ${hltbTimes.mainStory}\n`;
                }
                if (hltbTimes.mainExtra) {
                  title += `Main + Extra: ${hltbTimes.mainExtra}\n`;
                }
                if (hltbTimes.completionist) {
                  title += `Completionist: ${hltbTimes.completionist}\n`;
                }
                if (hltbTimes.solo) {
                  title += `Solo: ${hltbTimes.solo}\n`;
                }
                if (hltbTimes.coOp) {
                  title += `Co-Op: ${hltbTimes.coOp}\n`;
                }
                if (hltbTimes.vs) {
                  title += `Vs.: ${hltbTimes.vs}\n`;
                }
                elements.push({
                  attributes: {
                    class: 'esgst-gc esgst-gc-hltb',
                    ['data-draggable-id']: 'gc_hltb',
                    href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hltbUrl'), placeholderValues),
                    title: getFeatureTooltip('gc_hltb', title)
                  },
                  type: 'a',
                  children: [_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hltb_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hltb_s_i') ? {
                    attributes: {
                      class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hltbIcon')}`
                    },
                    type: 'i'
                  } : null, {
                    text: `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hltb_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hltb_s_i') ? '' : 'HLTB:' : _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hltbLabel')} ${time}`,
                    type: 'node'
                  }]
                });
              }
            }
            break;
          case 'gc_h':
            if (savedGame && savedGame.hidden) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-hidden',
                  ['data-draggable-id']: 'gc_h',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_h', 'Hidden')
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_h_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_h_s_i') ? '' : 'H' : _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hLabel'),
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_h_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_h_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_hIcon')}`
                  },
                  type: 'i'
                }] : null
              });
            }
            break;
          case 'gc_i':
            count = 0;
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id] && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[id].ignored) {
                  count += 1;
                }
              }
            }
            count = count ? ` (${count})` : '';
            if (savedGame && savedGame.ignored || count) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-ignored',
                  ['data-draggable-id']: 'gc_i',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_iUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_i', `Ignored${count}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_i_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_i_s_i') ? '' : `I${count}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_iLabel')}${count}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_i_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_i_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_iIcon')} `
                  },
                  type: 'i'
                }, count ? {
                  text: count,
                  type: 'node'
                } : null] : null
              });
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_i_t')) {
                for (const game of games) {
                  const row = game.container.closest('tr');
                  if (row) {
                    row.style.backgroundColor = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_i_t_bgColor');
                  }
                }
              }
            }
            break;
          case 'gc_o':
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_a')) {
              for (const account of _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_altAccounts')) {
                let game = account.games[type][id];
                if (game && game.owned) {
                  elements.push({
                    attributes: {
                      class: 'esgst-gc esgst-gc-owned',
                      ['data-bgColor']: account.bgColor,
                      ['data-color']: account.color,
                      ['data-draggable-id']: 'gc_o',
                      href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_aUrl'), {
                        ...placeholderValues,
                        steamId: account.steamId
                      }),
                      style: `background-color: ${account.bgColor}; color: ${account.color};`,
                      title: getFeatureTooltip('gc_o', `Owned by ${account.name}`)
                    },
                    text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_s_i') ? '' : 'O' : account.label,
                    type: 'a',
                    children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_s_i') ? [{
                      attributes: {
                        class: `fa fa-${account.icon}`
                      },
                      type: 'i'
                    }] : null
                  });
                  if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_a_t')) {
                    for (const game of games) {
                      const row = game.container.closest('tr');
                      if (row) {
                        row.style.backgroundColor = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_a_t_bgColor');
                      }
                    }
                  }
                }
              }
            }
            if (savedGame && savedGame.owned && (!_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_pw') || !_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pw') || !savedGame.won)) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-owned',
                  ['data-draggable-id']: 'gc_o',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_oUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_o', 'Owned')
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_s_i') ? '' : 'O' : _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_oLabel'),
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_oIcon')}`
                  },
                  type: 'i'
                }] : null
              });
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_t')) {
                for (const game of games) {
                  const row = game.container.closest('tr');
                  if (row) {
                    row.style.backgroundColor = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_t_bgColor');
                  }
                }
              }
            }
            break;
          case 'gc_w':
            if (savedGame && savedGame.wishlisted) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-wishlisted',
                  ['data-draggable-id']: 'gc_w',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_wUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_w', `Wishlisted${typeof savedGame.wishlisted === 'number' ? ` since ${this.gc_formatDate(savedGame.wishlisted * 1e3)}` : ''}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_w_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_w_s_i') ? '' : 'W' : _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_wLabel'),
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_w_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_w_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_wIcon')}`
                  },
                  type: 'i'
                }] : null
              });
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_w_t')) {
                for (const game of games) {
                  const row = game.container.closest('tr');
                  if (row) {
                    row.style.backgroundColor = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_w_t_bgColor');
                  }
                }
              }
            }
            break;
          case 'gc_f':
            if (savedGame && savedGame.followed) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-followed',
                  ['data-draggable-id']: 'gc_f',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_fUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_f', 'Followed')
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_f_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_f_s_i') ? '' : 'F' : _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_fLabel'),
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_f_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_f_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_fIcon')}`
                  },
                  type: 'i'
                }] : null
              });
            }
            break;
          case 'gc_pw':
            if (savedGame && savedGame.won && (!_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pw_o') || !_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o') || !savedGame.owned)) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-won',
                  ['data-draggable-id']: 'gc_pw',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pwUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_pw', savedGame.won > 1 ? `You previously won this game on ${_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.getTimestamp(savedGame.won)}` : 'Previously Won')
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pw_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pw_s_i') ? '' : 'PW' : _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pwLabel'),
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pw_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pw_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pwIcon')}`
                  },
                  type: 'i'
                }] : null
              });
            }
            break;
          case 'gc_gi':
            if (cache && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].isSet(cache.price)) {
              let price = cache.price;
              const heading = games[0].heading;
              if (heading) {
                const points = heading.innerHTML.match(/<span\sclass="giveaway__heading__thin">\((\d+?)P\)<\/span>/);
                if (points) {
                  price = parseInt(points[1]);
                }
              }
              user = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.users.users[_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('steamId')];
              if (user) {
                giveaways = user.giveaways;
                if (giveaways) {
                  giveaways = giveaways.sent[type][id];
                  active = 0;
                  count = 0;
                  sent = 0;
                  if (giveaways) {
                    let currentDate = Date.now();
                    let numGiveaways;
                    for (j = 0, numGiveaways = giveaways.length; j < numGiveaways; ++j) {
                      giveaway = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.giveaways[giveaways[j]];
                      if (giveaway) {
                        if (Array.isArray(giveaway.winners)) {
                          if (giveaway.winners.length > 0) {
                            giveaway.winners.forEach(winner => {
                              count += 1;
                              if ((giveaway.entries >= 5 || !giveaway.inviteOnly && !giveaway.group && !giveaway.whitelist) && winner.status === 'Received') {
                                sent += 1;
                              }
                            });
                          } else if (currentDate < giveaway.endTime) {
                            active += giveaway.copies;
                          }
                        } else if (giveaway.winners > 0) {
                          count += Math.min(giveaway.entries, giveaway.winners);
                          if (giveaway.entries >= 5 || !giveaway.inviteOnly && !giveaway.group && !giveaway.whitelist) {
                            sent += Math.min(giveaway.entries, giveaway.winners);
                          }
                        } else if (currentDate < giveaway.endTime) {
                          active += giveaway.copies;
                        }
                      }
                    }
                    value = price;
                    if (savedGame) {
                      if (savedGame.noCV) {
                        value = 0;
                      } else if (savedGame.reducedCV) {
                        value *= 0.15;
                      }
                    }
                    if (sent > 5) {
                      for (j = 0, numGiveaways = sent - 5; j < numGiveaways; ++j) {
                        value *= 0.9;
                      }
                    }
                    cv = sent + 1 > 5 ? value * 0.9 : value;
                    cv = Math.round(cv * 100) / 100;
                  } else {
                    value = price;
                    if (savedGame) {
                      if (savedGame.noCV) {
                        value = 0;
                      } else if (savedGame.reducedCV) {
                        value *= 0.15;
                      }
                    }
                    cv = Math.round(value * 100) / 100;
                  }
                  elements.push({
                    attributes: {
                      class: 'esgst-gc esgst-gc-giveawayInfo',
                      ['data-draggable-id']: 'gc_gi',
                      href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_giUrl'), placeholderValues),
                      title: getFeatureTooltip('gc_gi', `You have sent ${count} copies of this game (${sent} of which added to your CV)${active ? `\nYou currently have ${active} open giveaways for this game` : ''}\n\n${price !== -1 ? `You should get $${cv} real CV for sending a new copy of this game\nA giveaway for this game is worth ${Math.min(Math.ceil(price), 50)}P` : `ESGST was unable to retrieve the price of this game (most likely because the game was removed from the Steam store)`}`)
                    },
                    type: 'a',
                    children: [{
                      attributes: {
                        class: 'fa fa-info'
                      },
                      type: 'i'
                    }, {
                      text: ` ${count} `,
                      type: 'node'
                    }, {
                      attributes: {
                        class: 'fa fa-dollar'
                      },
                      type: 'i'
                    }, {
                      text: ` ${price !== -1 ? cv : '?'}`,
                      type: 'node'
                    }]
                  });
                }
              }
            }
            break;
          case 'gc_r':
            if (cache && cache.rating) {
              let colors = null;
              let percentage = parseInt(cache.rating.match(/(\d+)%/)[1]);
              for (let i = 0, n = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_r_colors').length; i < n; i++) {
                colors = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_r_colors')[i];
                if (percentage >= colors.lower && percentage <= colors.upper) {
                  break;
                }
              }
              if (!colors) {
                colors = {
                  bgColor: '#7f8c8d',
                  color: '#ffffff',
                  icon: 'fa-question-circle'
                };
              }
              let match = cache.rating.match(/\((\d+)\)/);
              if (match) {
                cache.rating = cache.rating.replace(/\(\d+\)/, `(${parseInt(match[1]).toLocaleString()})`);
              }
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-rating',
                  ['data-bgColor']: colors.bgColor,
                  ['data-color']: colors.color,
                  ['data-draggable-id']: 'gc_r',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rUrl'), placeholderValues),
                  style: `background-color: ${colors.bgColor}; color: ${colors.color};`,
                  title: getFeatureTooltip('gc_r', cache.rating)
                },
                type: 'a',
                children: [colors.icon.match(/\w/) ? {
                  attributes: {
                    class: `fa fa-${colors.icon}`
                  },
                  type: 'i'
                } : {
                  attributes: {
                    style: `font-size: 14px;`
                  },
                  text: colors.icon,
                  type: 'span'
                }, {
                  text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_r_s') ? ` ${cache.rating}` : '',
                  type: 'node'
                }]
              });
            }
            break;
          case 'gc_a':
            count = 0;
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (gc.cache.apps[id] && gc.cache.apps[id].achievements) {
                  count += 1;
                }
              }
            }
            count = count ? ` (${count})` : '';
            if (cache && cache.achievements || count) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-achievements',
                  ['data-draggable-id']: 'gc_a',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_aUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_a', `Achievements${count || ` (${cache.achievements})`}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_a_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_a_s_i') ? '' : `A${count}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_aLabel')}${count}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_a_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_a_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_aIcon')}`
                  },
                  type: 'i'
                }, count ? {
                  text: count,
                  type: 'node'
                } : null] : null
              });
            }
            break;
          case 'gc_bd':
            if (type === 'apps' && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.delistedGames.banned.indexOf(parseInt(id)) > -1) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-banned',
                  ['data-draggable-id']: 'gc_bd',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bdUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_bd', 'Banned')
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bd_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bd_s_i') ? '' : 'BD' : _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bdLabel'),
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bd_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bd_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bdIcon')}`
                  },
                  type: 'i'
                }] : null
              });
            }
            break;
          case 'gc_bvg':
            elements.push({
              attributes: {
                class: 'esgst-gc esgst-gc-bartervg',
                ['data-draggable-id']: 'gc_bvg',
                href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bvgUrl'), placeholderValues),
                target: '_blank',
                title: getFeatureTooltip('gc_bvg', 'Barter.vg')
              },
              text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bvg_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bvg_s_i') ? '' : 'BVG' : _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bvgLabel'),
              type: 'a',
              children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bvg_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bvg_s_i') ? [{
                attributes: {
                  class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_bvgIcon')}`
                },
                type: 'i'
              }] : null
            });
            break;
          case 'gc_mp':
            count = 0;
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (gc.cache.apps[id] && gc.cache.apps[id].multiplayer) {
                  count += 1;
                }
              }
            }
            count = count ? ` (${count})` : '';
            if (cache && cache.multiplayer || count) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-multiplayer',
                  ['data-draggable-id']: 'gc_mp',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_mpUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_mp', `Multiplayer${count}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_mp_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_mp_s_i') ? '' : `MP${count}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_mpLabel')}${count}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_mp_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_mp_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_mpIcon')} `
                  },
                  type: 'i'
                }, count ? {
                  text: count,
                  type: 'node'
                } : null] : null
              });
            }
            break;
          case 'gc_sp':
            count = 0;
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (gc.cache.apps[id] && gc.cache.apps[id].singleplayer) {
                  count += 1;
                }
              }
            }
            count = count ? ` (${count})` : '';
            if (cache && cache.singleplayer || count) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-singleplayer',
                  ['data-draggable-id']: 'gc_sp',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_spUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_sp', `Singleplayer${count}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_sp_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_sp_s_i') ? '' : `SP${count}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_spLabel')}${count}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_sp_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_sp_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_spIcon')} `
                  },
                  type: 'i'
                }, count ? {
                  text: count,
                  type: 'node'
                } : null] : null
              });
            }
            break;
          case 'gc_sc':
            count = 0;
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (gc.cache.apps[id] && gc.cache.apps[id].steamCloud) {
                  count += 1;
                }
              }
            }
            count = count ? ` (${count})` : '';
            if (cache && cache.steamCloud || count) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-steamCloud',
                  ['data-draggable-id']: 'gc_sc',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_scUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_sc', `Steam Cloud${count}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_sc_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_sc_s_i') ? '' : `SC${count}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_scLabel')}${count}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_sc_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_sc_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_scIcon')} `
                  },
                  type: 'i'
                }, count ? {
                  text: count,
                  type: 'node'
                } : null] : null
              });
            }
            break;
          case 'gc_tc':
            count = 0;
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (gc.cache.apps[id] && gc.cache.apps[id].tradingCards) {
                  count += 1;
                }
              }
            }
            count = count ? ` (${count})` : '';
            if (cache && cache.tradingCards || count) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-tradingCards',
                  ['data-draggable-id']: 'gc_tc',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_tcUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_tc', `Trading Cards${count}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_tc_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_tc_s_i') ? '' : `TC${count}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_tcLabel')}${count}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_tc_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_tc_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_tcIcon')} `
                  },
                  type: 'i'
                }, count ? {
                  text: count,
                  type: 'node'
                } : null] : null
              });
            }
            break;
          case 'gc_l':
            count = 0;
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (gc.cache.apps[id] && gc.cache.apps[id].linux) {
                  count += 1;
                }
              }
            }
            count = count ? ` (${count})` : '';
            if (cache && cache.linux || count) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-linux',
                  ['data-draggable-id']: 'gc_l',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_l', `Linux${count}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_l_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_l_s_i') ? '' : `L${count}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lLabel')}${count}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_l_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_l_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lIcon')} `
                  },
                  type: 'i'
                }, count ? {
                  text: count,
                  type: 'node'
                } : null] : null
              });
            }
            break;
          case 'gc_m':
            count = 0;
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (gc.cache.apps[id] && gc.cache.apps[id].mac) {
                  count += 1;
                }
              }
            }
            count = count ? ` (${count})` : '';
            if (cache && cache.mac || count) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-mac',
                  ['data-draggable-id']: 'gc_m',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_mUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_m', `Mac${count}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_m_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_m_s_i') ? '' : `M${count}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_mLabel')}${count}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_m_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_m_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_mIcon')} `
                  },
                  type: 'i'
                }, count ? {
                  text: count,
                  type: 'node'
                } : null] : null
              });
            }
            break;
          case 'gc_dlc':
            if (cache && cache.dlc) {
              let baseOwned;
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_o')) {
                if (cache.base && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[cache.base]) {
                  baseOwned = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.games.apps[cache.base].owned;
                }
              }
              const children = [];
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_s')) {
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_s_i')) {
                  children.push({
                    attributes: {
                      class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlcIcon')} `
                    },
                    type: 'i'
                  });
                  if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_o') && baseOwned) {
                    children.push({
                      attributes: {
                        class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_oIcon')} esgst-gc-dlcOwned`
                      },
                      type: 'i'
                    });
                  }
                  if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_b') && typeof cache.freeBase !== 'undefined') {
                    if (cache.freeBase) {
                      children.push({
                        attributes: {
                          class: 'fa fa-certificate esgst-gc-dlcFree'
                        },
                        type: 'i'
                      });
                    } else {
                      children.push({
                        attributes: {
                          class: 'fa fa-money esgst-gc-dlcNonFree'
                        },
                        type: 'i'
                      });
                    }
                  }
                } else {
                  children.push({
                    text: 'DLC',
                    type: 'node'
                  });
                  if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_o') && baseOwned) {
                    children.push({
                      attributes: {
                        class: 'esgst-gc-dlcOwned'
                      },
                      text: `(O)`,
                      type: 'span'
                    });
                  }
                  if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_b') && typeof cache.freeBase !== 'undefined') {
                    if (cache.freeBase) {
                      children.push({
                        attributes: {
                          class: 'esgst-gc-dlcFree'
                        },
                        text: `(F)`,
                        type: 'span'
                      });
                    } else {
                      children.push({
                        attributes: {
                          class: 'esgst-gc-dlcNonFree'
                        },
                        text: `(NF)`,
                        type: 'span'
                      });
                    }
                  }
                }
              } else {
                children.push({
                  text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlcLabel'),
                  type: 'node'
                });
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_o') && baseOwned) {
                  children.push({
                    attributes: {
                      class: 'esgst-gc-dlcOwned'
                    },
                    text: `(Owned)`,
                    type: 'span'
                  });
                }
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_b') && typeof cache.freeBase !== 'undefined') {
                  if (cache.freeBase) {
                    children.push({
                      attributes: {
                        class: 'esgst-gc-dlcFree'
                      },
                      text: `(Free)`,
                      type: 'span'
                    });
                  } else {
                    children.push({
                      attributes: {
                        class: 'esgst-gc-dlcNonFree'
                      },
                      text: `(Not Free)`,
                      type: 'span'
                    });
                  }
                }
              }
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-dlc',
                  ['data-draggable-id']: 'gc_dlc',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlcUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_dlc', `DLC${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_dlc_b') && typeof cache.freeBase !== 'undefined' ? cache.freeBase ? ` (the base game of this DLC is free)` : ` (the base game of this DLC is not free)` : ''}`)
                },
                type: 'a',
                children
              });
            }
            break;
          case 'gc_p':
            if (type === 'subs') {
              const children = [];
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_p_s')) {
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_p_s_i')) {
                  children.push({
                    attributes: {
                      class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pIcon')}`
                    },
                    type: 'i'
                  });
                } else {
                  children.push({
                    text: 'P',
                    type: 'node'
                  });
                }
              } else {
                children.push({
                  text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pLabel'),
                  type: 'node'
                });
              }
              if (packageCount) {
                children.push({
                  text: ` (${packageCount.num}/${packageCount.total})`,
                  type: 'node'
                });
              }
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-package',
                  ['data-draggable-id']: 'gc_p',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_pUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_p', `Package${savedGame && savedGame.apps ? ` (${savedGame.apps.length})` : ''} ${packageCount ? ` (${packageCount.num} owned)` : ''} `)
                },
                type: 'a',
                children
              });
              if (packageCount && packageCount.num) {
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_p_t') && packageCount.num < packageCount.total) {
                  for (const game of games) {
                    const row = game.container.closest('tr');
                    if (row) {
                      row.style.backgroundColor = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_p_t_bgColor');
                    }
                  }
                } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_t') && packageCount.num === packageCount.total) {
                  for (const game of games) {
                    const row = game.container.closest('tr');
                    if (row) {
                      row.style.backgroundColor = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_o_t_bgColor');
                    }
                  }
                }
              }
            }
            break;
          case 'gc_ea':
            count = 0;
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (gc.cache.apps[id] && gc.cache.apps[id].earlyAccess) {
                  count += 1;
                }
              }
            }
            count = count ? ` (${count})` : '';
            if (cache && cache.earlyAccess || count) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-earlyAccess',
                  ['data-draggable-id']: 'gc_ea',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_eaUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_ea', `Early Access${count}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ea_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ea_s_i') ? '' : `EA${count}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_eaLabel')}${count}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ea_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ea_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_eaIcon')} `
                  },
                  type: 'i'
                }, count ? {
                  text: count,
                  type: 'node'
                } : null] : null
              });
            }
            break;
          case 'gc_lg':
            count = 0;
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (gc.cache.apps[id] && gc.cache.apps[id].learning === 1) {
                  count += 1;
                }
              }
            }
            count = count ? ` (${count})` : '';
            if (cache && cache.learning === 1 || count) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-learning',
                  ['data-draggable-id']: 'gc_lg',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lgUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_lg', `Learning${count}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lg_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lg_s_i') ? '' : `LG${count}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lgLabel')}${count}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lg_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lg_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lgIcon')} `
                  },
                  type: 'i'
                }, count ? {
                  text: count,
                  type: 'node'
                } : null] : null
              });
            }
            break;
          case 'gc_rm':
            count = 0;
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (gc.cache.apps[id] && gc.cache.apps[id].removed === 1) {
                  count += 1;
                }
              }
            }
            count = count ? ` (${count})` : '';
            if (cache && cache.removed === 1 || count) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-removed',
                  ['data-draggable-id']: 'gc_rm',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rmUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_rm', `Removed${count}`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rm_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rm_s_i') ? '' : `RM${count}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rmLabel')}${count}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rm_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rm_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rmIcon')} `
                  },
                  type: 'i'
                }, count ? {
                  text: count,
                  type: 'node'
                } : null] : null
              });
            }
            break;
          case 'gc_rd':
            if (cache && cache.releaseDate) {
              elements.push({
                attributes: {
                  class: 'esgst-gc esgst-gc-releaseDate',
                  ['data-draggable-id']: 'gc_rd',
                  ['data-timestamp']: cache.releaseDate === ' ? ' ? cache.releaseDate : cache.releaseDate / 1e3,
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rdUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_rd', 'Release Date')
                },
                type: 'a',
                children: [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rdIcon')}`
                  },
                  type: 'i'
                }, {
                  text: ` ${this.gc_formatDate(cache.releaseDate)}`,
                  type: 'node'
                }]
              });
            }
            break;
          case 'gc_g':
            genres = '';
            if (savedGame && savedGame.apps) {
              for (const id of savedGame.apps) {
                if (gc.cache.apps[id] && gc.cache.apps[id].genres) {
                  genres += `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_udt') && gc.cache.apps[id].tags ? `${gc.cache.apps[id].genres}, ${gc.cache.apps[id].tags}` : gc.cache.apps[id].genres}, `;
                }
              }
              genres = genres.slice(0, -2);
            } else if (cache && cache.genres) {
              genres = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_udt') && cache.tags ? `${cache.genres}, ${cache.tags}` : cache.genres;
            }
            if (genres) {
              let filters;
              genreList = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].sortArray(Array.from(new Set(genres.split(/,\s/))));
              genres = genreList.join(`, `);
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_filters').trim()) {
                filters = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_filters').trim().toLowerCase().split(/\s*,\s*/);
              }
              for (j = genreList.length - 1; j >= 0; --j) {
                genre = genreList[j].toLowerCase();
                if (!filters || filters.indexOf(genre) > -1) {
                  for (k = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_colors').length - 1; k >= 0 && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_colors')[k].genre.toLowerCase() !== genre; --k) {}
                  if (k >= 0) {
                    if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_s')) {
                      genreList[j] = {
                        attributes: {
                          class: 'esgst-gc esgst-gc-genres',
                          href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_gUrl'), placeholderValues),
                          style: `background-color: ${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_colors')[k].bgColor}; color: ${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_colors')[k].color};`,
                          title: getFeatureTooltip('gc_g_s', genreList[j])
                        },
                        text: genreList[j],
                        type: 'a'
                      };
                    } else {
                      genreList[j] = {
                        attributes: {
                          style: `color: ${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_colors')[k].color}`
                        },
                        text: genreList[j],
                        type: 'span'
                      };
                      if (j < genreList.length - 1) {
                        genreList.splice(j + 1, 0, {
                          text: `, `,
                          type: 'node'
                        });
                      }
                    }
                  } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_s')) {
                    genreList[j] = {
                      attributes: {
                        class: 'esgst-gc esgst-gc-genres',
                        href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_gUrl'), placeholderValues),
                        title: getFeatureTooltip('gc_g_s', genreList[j])
                      },
                      text: genreList[j],
                      type: 'a'
                    };
                  } else {
                    genreList[j] = {
                      text: genreList[j],
                      type: 'node'
                    };
                    if (j < genreList.length - 1) {
                      genreList.splice(j + 1, 0, {
                        text: `, `,
                        type: 'node'
                      });
                    }
                  }
                } else {
                  genreList.splice(j, 1);
                }
              }
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_g_s')) {
                elements.push({
                  attributes: {
                    class: 'esgst-gc esgst-gc-genres',
                    ['data-draggable-id']: 'gc_g'
                  },
                  type: 'span',
                  children: genreList
                });
              } else if (genreList.length > 0) {
                elements.push({
                  attributes: {
                    class: 'esgst-gc esgst-gc-genres',
                    ['data-draggable-id']: 'gc_g',
                    href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_gUrl'), placeholderValues),
                    title: getFeatureTooltip('gc_g', genres)
                  },
                  type: 'a',
                  children: genreList
                });
              }
            }
            break;
        }
      }
    }
    if (isInstant || isOutdated) {
      elements.push({
        attributes: {
          class: 'esgst-gc-loading',
          title: 'This game is queued for fetching'
        },
        type: 'span',
        children: [{
          attributes: {
            class: 'fa fa-hourglass fa-spin'
          },
          type: 'i'
        }, {
          type: 'span'
        }]
      });
    }
    let cannotCheckOwnership = false;
    if ((!savedGame || !savedGame.owned) && (cache && (cache.dlc || cache.learning === 1) || type === 'apps' && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.delistedGames.banned.indexOf(parseInt(id)) > -1 || type === 'subs' && !packageCount)) {
      cannotCheckOwnership = true;
    }
    for (i = 0, n = games.length; i < n; ++i) {
      let currentElements = [...elements];
      const button = games[i].elgbButton && games[i].elgbButton.firstElementChild || _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.enterGiveawayButton;
      if (button && cannotCheckOwnership && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_e')) {
        button.title = 'ESGST cannot check ownership of this game';
        button.style.color = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_e_color');
        button.style.borderColor = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_e_bColor');
        button.style.backgroundColor = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_e_bgColor');
        button.style.backgroundImage = 'none';
      }
      if (games[i].container.classList.contains('esgst-hidden')) {
        if (!_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gcToFetch[type][id]) {
          _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gcToFetch[type][id] = [];
        }
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gcToFetch[type][id].indexOf(games[i]) < 0) {
          _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gcToFetch[type][id].push(games[i]);
        }
        continue;
      }
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gcToFetch[type][id]) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gcToFetch[type][id] = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gcToFetch[type][id].filter(item => item !== games[i]);
        if (!_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gcToFetch[type][id].length) {
          delete _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gcToFetch[type][id];
        }
      }
      const oldElements = games[i].container.querySelectorAll('.esgst-gc');
      for (const element of oldElements) {
        element.remove();
      }
      panel = games[i].container.getElementsByClassName('esgst-gc-panel')[0];
      if (panel && !panel.getAttribute('data-gcReady')) {
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_il') && !_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.giveawayPath) {
          panel.previousElementSibling.style.display = 'inline-block';
          panel.classList.add('esgst-gc-panel-inline');
        }
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ocv') && games[i].startTime) {
          const reducedCV = savedGame && savedGame.reducedCV && new Date(savedGame.reducedCV).getTime() || 0;
          const noCV = savedGame && savedGame.noCV && new Date(savedGame.noCV).getTime() || 0;
          if (reducedCV || noCV) {
            let original = '';
            if (reducedCV && noCV) {
              if (games[i].startTime < reducedCV && games[i].startTime < noCV) {
                original = 'fcv';
              } else if (games[i].startTime < noCV) {
                original = 'rcv';
              }
            } else if (games[i].startTime < reducedCV || games[i].startTime < noCV) {
              original = 'fcv';
            }
            if (original) {
              currentElements.push({
                attributes: {
                  class: `esgst-gc esgst-gc-originalCV esgst-gc-originalCV-${original}`,
                  ['data-draggable-id']: 'gc_ocv',
                  href: this.replacePlaceholders(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ocvUrl'), placeholderValues),
                  title: getFeatureTooltip('gc_ocv', `Was ${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(`gc_${original}Label`)} when it was given away`)
                },
                text: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ocv_s') ? _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ocv_s_i') ? '' : `W${original.toUpperCase()}` : `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ocvLabel')}${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(`gc_${original}Label`)}`,
                type: 'a',
                children: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ocv_s') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ocv_s_i') ? [{
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_ocvIcon')}`
                  },
                  type: 'i'
                }, {
                  attributes: {
                    class: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(`gc_${original}Icon`)}`
                  },
                  type: 'i'
                }] : null
              });
            }
          }
        }
        createElements(panel, 'atinner', currentElements);
        if (games[i].grid && !_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_lp_gv')) {
          for (j = panel.children.length - 1; j > -1; --j) {
            panel.children[j].removeAttribute('href');
          }
        }
        if (!isInstant && !isOutdated) {
          panel.setAttribute('data-gcReady', 1);
        }
        games[i].gcPanel = panel;
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.giveaways.giveaways_reorder(games[i]);
      }
    }
  }
  gc_formatDate(timestamp) {
    if (timestamp === '?') return timestamp;
    let date = new Date(timestamp);
    return _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_rdLabel').replace(/DD/, date.getDate()).replace(/MM/, `${date.getMonth() + 1}`).replace(/Month/, ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'][date.getMonth()]).replace(/Mon/, ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][date.getMonth()]).replace(/YYYY/, `${date.getFullYear()}`);
  }
}
const gamesGameCategories = new GamesGameCategories();


/***/ }),
/* 298 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayCopyHighlighter", function() { return giveawaysGiveawayCopyHighlighter; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





class GiveawaysGiveawayCopyHighlighter extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Highlights the number of copies next a giveaway's game name (in any page) by coloring it as red and changing the font to bold.")),
      featureMap: {
        giveaway: this.highlight.bind(this)
      },
      id: 'gch',
      name: 'Giveaway Copy Highlighter',
      sg: true,
      type: 'giveaways'
    };
  }
  highlight(giveaways) {
    for (const giveaway of giveaways) {
      if (!giveaway.copiesContainer) {
        continue;
      }
      const {
        color,
        bgColor
      } = _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gch_colors').filter(colors => giveaway.copies >= parseInt(colors.lower) && giveaway.copies <= parseInt(colors.upper))[0] || {
        color: undefined,
        bgColor: undefined
      };
      giveaway.copiesContainer.classList.add('esgst-bold');
      if (!color) {
        giveaway.copiesContainer.classList.add('esgst-red');
        continue;
      }
      giveaway.copiesContainer.style.color = color;
      if (!bgColor) {
        continue;
      }
      giveaway.copiesContainer.classList.add('esgst-gch-highlight');
      giveaway.copiesContainer.style.backgroundColor = bgColor;
    }
  }
}
const giveawaysGiveawayCopyHighlighter = new GiveawaysGiveawayCopyHighlighter();


/***/ }),
/* 299 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayLevelHighlighter", function() { return giveawaysGiveawayLevelHighlighter; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





class GiveawaysGiveawayLevelHighlighter extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Highlights the level of a giveaway (in any page) by coloring it with the specified colors.")),
      featureMap: {
        giveaway: this.highlight.bind(this)
      },
      id: 'glh',
      name: 'Giveaway Level Highlighter',
      sg: true,
      type: 'giveaways'
    };
  }
  highlight(giveaways) {
    for (const giveaway of giveaways) {
      if (!giveaway.levelColumn) {
        continue;
      }
      const {
        color,
        bgColor
      } = _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('glh_colors').filter(colors => giveaway.level >= parseInt(colors.lower) && giveaway.level <= parseInt(colors.upper))[0] || {
        color: undefined,
        bgColor: undefined
      };
      if (!color || !bgColor) {
        continue;
      }
      giveaway.levelColumn.setAttribute('style', `${color ? `color: ${color} !important;` : ''}${bgColor ? `background-color: ${bgColor};` : ''}`);
      giveaway.levelColumn.classList.add('esgst-glh-highlight');
    }
  }
}
const giveawaysGiveawayLevelHighlighter = new GiveawaysGiveawayLevelHighlighter();


/***/ }),
/* 300 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysCustomGiveawayBackground", function() { return giveawaysCustomGiveawayBackground; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





class GiveawaysCustomGiveawayBackground extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to color the background of giveaways based on their type (public, invite only, region restricted, group or whitelist) and level.")),
      features: {
        cgb_b: {
          background: true,
          name: 'Color giveaways that cannot be entered because of blacklist reasons.',
          sg: true
        },
        cgb_p: {
          background: true,
          name: 'Color public giveaways.',
          sg: true
        },
        cgb_io: {
          background: true,
          name: 'Color invite only giveaways.',
          sg: true
        },
        cgb_rr: {
          background: true,
          name: 'Color region restricted giveaways.',
          sg: true
        },
        cgb_g: {
          background: true,
          name: 'Color group giveaways.',
          sg: true
        },
        cgb_w: {
          background: true,
          name: 'Color whitelist giveaways.',
          sg: true
        },
        cgb_sgt: {
          background: true,
          name: 'Color SGTools giveaways.',
          sg: true
        }
      },
      featureMap: {
        giveaway: this.color.bind(this)
      },
      id: 'cgb',
      name: 'Custom Giveaway Background',
      sg: true,
      type: 'giveaways'
    };
  }
  color(giveaways) {
    for (const giveaway of giveaways) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_b') && giveaway.outerWrap.getAttribute('data-blacklist')) {
        giveaway.outerWrap.setAttribute('style', `background-color: ${_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_b_bgColor')} !important`);
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_sgt') && giveaway.sgTools) {
        giveaway.outerWrap.setAttribute('style', `background-color: ${_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_sgt_bgColor')} !important`);
      }
      const {
        color
      } = _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_levelColors').filter(colors => giveaway.level >= parseInt(colors.lower) && giveaway.level <= parseInt(colors.upper))[0] || {
        color: undefined
      };
      if (color) {
        giveaway.outerWrap.setAttribute('style', `background-color: ${color} !important`);
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_w') && giveaway.whitelist) {
        giveaway.outerWrap.setAttribute('style', `background-color: ${_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_w_bgColor')} !important`);
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_g') && giveaway.group) {
        giveaway.outerWrap.setAttribute('style', `background-color: ${_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_g_bgColor')} !important`);
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_rr') && giveaway.regionRestricted) {
        giveaway.outerWrap.setAttribute('style', `background-color: ${_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_rr_bgColor')} !important`);
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_io') && giveaway.inviteOnly) {
        giveaway.outerWrap.setAttribute('style', `background-color: ${_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_io_bgColor')} !important`);
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_p') && giveaway.public) {
        giveaway.outerWrap.setAttribute('style', `background-color: ${_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('cgb_p_bgColor')} !important`);
      } else {
        giveaway.outerWrap.style.backgroundColor = '';
      }
      if (giveaway.outerWrap.style.backgroundColor) {
        giveaway.outerWrap.style.backgroundImage = 'none';
      }
    }
  }
}
const giveawaysCustomGiveawayBackground = new GiveawaysCustomGiveawayBackground();


/***/ }),
/* 301 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysCustomGiveawayCalendar", function() { return giveawaysCustomGiveawayCalendar; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class GiveawaysCustomGiveawayCalendar extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to customize the calendar for selecting the start/end times of giveaways in the ", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/new"
      }, "new giveaway"), " page."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Make sure to test if SteamGifts accepts the format you entered by reviewing a test giveaway.")),
      inputItems: [{
        id: 'cgc_dateFormat',
        prefix: `Date format: `,
        suffix: ` (check accepted formats here: http://api.jqueryui.com/datepicker/#utility-formatDate)`
      }, {
        id: 'cgc_timeFormat',
        prefix: `Time format: `,
        suffix: ` (check accepted formats here: https://trentrichardson.com/examples/timepicker/#tp-formatting)`
      }],
      options: [{
        title: `First day of the week: `,
        values: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
      }],
      id: 'cgc',
      name: 'Custom Giveaway Calendar',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (!this.esgst.newGiveawayPath || !document.getElementsByClassName('form__rows')[0]) {
      return;
    }
    const script = document.createElement('script');
    script.textContent = `
			function esgst_cgc() {
				const actualStartInput = document.querySelector('input[name=start_time]');
				actualStartInput.setAttribute('type', 'hidden');
				const startInput = document.createElement('input');
				startInput.className = 'form__input-small';
				startInput.setAttribute('type', 'text');
				actualStartInput.parentElement.insertBefore(startInput, actualStartInput);
				$(actualStartInput).datetimepicker("destroy");
				$(startInput).datetimepicker({
					altField: "input[name=start_time]",
					altFieldTimeOnly: false,
					altFormat: "M d, yy",
					altTimeFormat: "h:mm tt",
					beforeShowDay: t,
					dateFormat: "${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('cgc_dateFormat')}",
					firstDay: "${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('cgc_index_0')}",
					maxDate: new Date((new Date).getTime() + 2592e6 - 36e5),
					maxDateTime: new Date((new Date).getTime() + 2592e6 - 36e5),
					minDate: new Date,
					minDateTime: new Date,
					numberOfMonths: 1,
					selectOtherMonths: !0,
					showOtherMonths: !0,
					timeFormat: "${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('cgc_timeFormat')}",
					onSelect: function() {
						s()
					},
					onClose: function() {
						s()
					}
				});
				if (actualStartInput.value) {
					$(startInput).datepicker("setDate", actualStartInput.value);
				}

				const actualEndInput = document.querySelector('input[name=end_time]');
				actualEndInput.setAttribute('type', 'hidden');
				const endInput = document.createElement('input');
				endInput.className = 'form__input-small';
				endInput.setAttribute('type', 'text');
				actualEndInput.parentElement.insertBefore(endInput, actualEndInput);
				$(actualEndInput).datetimepicker("destroy");
				$(endInput).datetimepicker({
					altField: "input[name=end_time]",
					altFieldTimeOnly: false,
					altFormat: "M d, yy",
					altTimeFormat: "h:mm tt",
					beforeShowDay: t,
					dateFormat: "${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('cgc_dateFormat')}",
					firstDay: "${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('cgc_index_0')}",
					maxDate: new Date((new Date).getTime() + 2592e6),
					maxDateTime: new Date((new Date).getTime() + 2592e6),
					minDate: new Date((new Date).getTime() + 36e5),
					minDateTime: new Date((new Date).getTime() + 36e5),
					numberOfMonths: 1,
					selectOtherMonths: !0,
					showOtherMonths: !0,
					timeFormat: "${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('cgc_timeFormat')}",
					onSelect: function() {
						i()
					},
					onClose: function() {
						i()
					}
				});
				if (actualEndInput.value) {
					$(endInput).datepicker("setDate", actualEndInput.value);
				}

				function t(e) {
					return (start_time = $("input[name=start_time]").datetimepicker("getDate")) && (end_time = $("input[name=end_time]").datetimepicker("getDate")) ? (start_time.setHours(0, 0, 0, 0), end_time.setHours(0, 0, 0, 0), [!0, e.getTime() >= start_time.getTime() && e.getTime() <= end_time.getTime() ? "datepicker-highlight-range" : ""]) : [!0, ""]
				}

				function s() {
					(start_time = $("input[name=start_time]").datetimepicker("getDate")) && (end_time = $("input[name=end_time]").datetimepicker("getDate")) && (start_time = new Date(start_time.getTime() + 36e5), start_time > end_time && $("input[name=end_time]").datetimepicker("setDate", start_time))
				}

				function i() {
					(start_time = $("input[name=start_time]").datetimepicker("getDate")) && (end_time = $("input[name=end_time]").datetimepicker("getDate")) && (end_time = new Date(end_time.getTime() - 36e5), end_time < start_time && $("input[name=start_time]").datetimepicker("setDate", end_time))
				}
			}

			if (document.readyState === "complete") {
				esgst_cgc();
			} else {
				$(window).on("load", function () {
					esgst_cgc();
				});
			}
		`;
    document.body.appendChild(script);
    script.remove();
  }
}
const giveawaysCustomGiveawayCalendar = new GiveawaysCustomGiveawayCalendar();


/***/ }),
/* 302 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysEnteredGiveawaysStats", function() { return giveawaysEnteredGiveawaysStats; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






class GiveawaysEnteredGiveawaysStats extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Allows you to see stats for your entered giveaways in the sidebar of the entered page.")),
      features: {
        egs_e: {
          name: 'Include ended giveaways in the stats.',
          sgPaths: 'My Giveaways - Entered',
          sg: true
        }
      },
      id: 'egs',
      name: 'Entered Giveaways Stats',
      sg: true,
      sgPaths: 'My Giveaways - Entered',
      type: 'giveaways'
    };
  }
  init() {
    if (!this.esgst.enteredPath) {
      return;
    }
    _Common__WEBPACK_IMPORTED_MODULE_3__["common"].createSidebarNavigation(this.esgst.sidebar, 'beforeend', {
      name: 'Entered Giveaways Stats',
      items: [{
        id: 'egs_chance',
        name: 'Average Chance',
        count: 0
      }, {
        id: 'egs_level',
        name: 'Average Level',
        count: 0
      }, {
        id: 'egs_entries',
        name: 'Average Entries',
        count: 0
      }, {
        id: 'egs_points',
        name: 'Average Points Spent',
        count: 0
      }, {
        id: 'egs_simple_points',
        name: 'Total Points Spent',
        count: 0
      }]
    });
    const obj = {
      counters: {
        chance: 0.0,
        level: 0.0,
        entries: 0.0,
        points: 0
      },
      simpleCounters: {
        points: 0
      },
      elements: {},
      total: 0
    };
    for (const key in obj.counters) {
      obj.elements[key] = document.querySelector(`#egs_${key}`).querySelector('.sidebar__navigation__item__count');
    }
    for (const key in obj.simpleCounters) {
      obj.elements[`simple_${key}`] = document.querySelector(`#egs_simple_${key}`).querySelector('.sidebar__navigation__item__count');
    }
    this.esgst.giveawayFeatures.push((giveaways, main) => this.addStats(obj, giveaways, main));
  }
  addStats(obj, giveaways, main) {
    if (!main) {
      return;
    }
    for (const giveaway of giveaways) {
      if (!giveaway.ended || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('egs_e')) {
        for (const key in obj.counters) {
          obj.counters[key] += giveaway[key];
        }
        for (const key in obj.simpleCounters) {
          obj.simpleCounters[key] += giveaway[key];
        }
        obj.total += 1;
      }
    }
    for (const key in obj.counters) {
      obj.elements[key].textContent = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].round(obj.counters[key] / obj.total);
    }
    for (const key in obj.simpleCounters) {
      obj.elements[`simple_${key}`].textContent = obj.simpleCounters[key];
    }
  }
}
const giveawaysEnteredGiveawaysStats = new GiveawaysEnteredGiveawaysStats();


/***/ }),
/* 303 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalGiveawayDiscussionTicketTradeTracker", function() { return generalGiveawayDiscussionTicketTradeTracker; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(96);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(209);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(132);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(144);








const createElements = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  getValues = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].getValues.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]);
class GeneralGiveawayDiscussionTicketTradeTracker extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-check"
      }), " if the thread is not marked as visited and ", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-times"
      }), " if it is) to the \"Comments\" column of any", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: "https://www.steamgifts.com/discussions"
      }, "discussions"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: "https://www.steamgifts.com/support/tickets"
      }, "tickets"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: "https://www.steamtrades.com/trades"
      }, "trades"), " pages and to the main page heading of any discussion/ticket/trade page that allows you to mark the thread as visited."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Giveaways/threads marked as visited are faded out in the page.")),
      features: {
        gdttt_g: {
          name: 'Fade visited giveaways.',
          sg: true
        },
        gdttt_vd: {
          name: 'Mark discussions as visited when visiting them.',
          sg: true
        },
        gdttt_vg: {
          name: 'Mark giveaways as visited when visiting them.',
          sg: true
        },
        gdttt_vt: {
          name: 'Mark tickets as visited when visiting them.',
          sg: true
        },
        gdttt_vts: {
          name: 'Mark trades as visited when visiting them.',
          st: true
        }
      },
      id: 'gdttt',
      name: 'Giveaway/Discussion/Ticket/Trade Tracker',
      sg: true,
      st: true,
      type: 'general',
      featureMap: {
        endless: this.gdttt_checkVisited.bind(this)
      }
    };
  }
  async init() {
    if (!this.esgst.commentsPath) return;
    let match = window.location.pathname.match(/(giveaway|discussion|ticket|trade)\/(.+?)\//);
    let type = `${match[1]}s`;
    let code = match[2];
    let savedComments = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.getValue(type, '{}'));
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get(`gdttt_v${{
      giveaways: 'g',
      discussions: 'd',
      tickets: 't',
      trades: 'ts'
    }[type]}`)) {
      if (!_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('ct')) {
        let cache = JSON.parse(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_2__["LocalStorage"].get('gdtttCache', `{"giveaways":[],"discussions":[],"tickets":[],"trades":[]}`));
        if (cache[type].indexOf(code) < 0) {
          cache[type].push(code);
          _class_LocalStorage__WEBPACK_IMPORTED_MODULE_2__["LocalStorage"].set('gdtttCache', JSON.stringify(cache));
        }
        const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_3__["Lock"]('comment', {
          threshold: 300
        });
        await lock.lock();
        if (!savedComments[code]) {
          savedComments[code] = {
            readComments: {}
          };
        }
        savedComments[code].visited = true;
        savedComments[code].lastUsed = Date.now();
        await setValue(type, JSON.stringify(savedComments));
        await lock.unlock();
      }
    } else if (this.esgst.discussionPath || this.esgst.tradePath) {
      if (savedComments[code] && savedComments[code].visited) {
        this.gdttt_addMarkUnvisitedButton(null, code, document.querySelector(`.page__heading, .page_heading`), null, type);
      } else {
        this.gdttt_addMarkVisitedButton(null, code, document.querySelector(`.page__heading, .page_heading`), null, type);
      }
    }
  }
  async gdttt_markVisited(code, container, count, diffContainer, type, doSave) {
    if (doSave) {
      const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_3__["Lock"]('comment', {
        threshold: 300
      });
      await lock.lock();
      const comments = JSON.parse(getValue(type));
      if (!comments[code]) {
        comments[code] = {
          readComments: {}
        };
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('ct_s')) {
        comments[code].count = count;
        diffContainer.textContent = '';
      }
      comments[code].visited = true;
      comments[code].lastUsed = Date.now();
      await setValue(type, JSON.stringify(comments));
      await lock.unlock();
    }
    container.classList.add('esgst-ct-visited');
    return true;
  }
  async gdttt_markUnvisited(code, container, count, diffContainer, type, doSave) {
    if (doSave) {
      const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_3__["Lock"]('comment', {
        threshold: 300
      });
      await lock.lock();
      const comments = JSON.parse(getValue(type));
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('ct_s')) {
        delete comments[code].count;
        diffContainer.textContent = `(+${count})`;
      }
      delete comments[code].visited;
      comments[code].lastUsed = Date.now();
      await setValue(type, JSON.stringify(comments));
      await lock.unlock();
    }
    container.classList.remove('esgst-ct-visited');
    return true;
  }

  /**
   * @param context
   * @param [main]
   * @param [src]
   * @param [endless]
   * @returns {Promise<void>}
   */
  async gdttt_checkVisited(context, main, src, endless) {
    let matches = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .homepage_table_column_heading, .esgst-es-page-${endless}.homepage_table_column_heading` : '.homepage_table_column_heading'}, ${endless ? `.esgst-es-page-${endless} .table__column__heading, .esgst-es-page-${endless}.table__column__heading` : '.table__column__heading'}, ${endless ? `.esgst-es-page-${endless} .giveaway__heading__name, .esgst-es-page-${endless}.giveaway__heading__name` : '.giveaway__heading__name'}, ${endless ? `.esgst-es-page-${endless} .row_trade_name h2 a, .esgst-es-page-${endless}.row_trade_name h2 a` : '.row_trade_name h2 a'}`);
    if (!matches.length) return;
    let values = getValues({
      giveaways: '{}',
      discussions: '{}',
      tickets: '{}',
      trades: '{}'
    });
    for (let key in values) {
      if (values.hasOwnProperty(key)) {
        values[key] = JSON.parse(values[key]);
      }
    }
    for (let i = 0, n = matches.length; i < n; ++i) {
      let match = matches[i];
      let url = match.getAttribute('href');
      if (url) {
        let source = url.match(/(giveaway|discussion|ticket|trade)\/(.+?)(\/.*)?$/);
        if (source) {
          let type = `${source[1]}s`;
          let code = source[2];
          let container = match.closest(`.table__row-outer-wrap, .giveaway__row-outer-wrap, .row_outer_wrap`);
          let comment = values[type][code];
          if (comment && comment.visited && container) {
            if (type === 'giveaways' && _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('gdttt_g') || type !== 'giveaways') {
              container.classList.add('esgst-ct-visited');
            }
          }
        }
      }
    }
  }
  gdttt_addMarkVisitedButton(button, code, context, count, type) {
    let comments;
    let busy = false;
    if (!button) {
      button = createElements(context, 'afterbegin', [{
        attributes: {
          class: 'esgst-gdttt-button page_heading_btn'
        },
        type: 'div'
      }]);
    }
    createElements(button, 'atinner', [{
      attributes: {
        class: 'fa fa-check',
        title: `${getFeatureTooltip('gdttt', 'Mark as visited')}`
      },
      type: 'i'
    }]);
    button.addEventListener('click', async () => {
      if (!busy) {
        busy = true;
        createElements(button, 'atinner', [{
          attributes: {
            class: 'fa fa-circle-o-notch fa-spin'
          },
          type: 'i'
        }]);
        const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_3__["Lock"]('comment', {
          threshold: 300
        });
        await lock.lock();
        comments = JSON.parse(getValue(type));
        if (!comments[code]) {
          comments[code] = {
            readComments: {}
          };
        }
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('ct_s')) {
          comments[code].count = count;
        }
        comments[code].visited = true;
        comments[code].lastUsed = Date.now();
        await setValue(type, JSON.stringify(comments));
        await lock.unlock();
        this.gdttt_addMarkUnvisitedButton(button, code, context, count, type);
      }
    });
  }
  gdttt_addMarkUnvisitedButton(button, code, context, count, type) {
    let comments;
    let busy = false;
    if (!button) {
      button = createElements(context, 'afterbegin', [{
        attributes: {
          class: 'esgst-gdttt-button page_heading_btn'
        },
        type: 'div'
      }]);
    }
    createElements(button, 'atinner', [{
      attributes: {
        class: 'fa fa-times',
        title: `${getFeatureTooltip('gdttt', 'Mark as unvisited')}`
      },
      type: 'i'
    }]);
    button.addEventListener('click', async () => {
      if (!busy) {
        busy = true;
        createElements(button, 'atinner', [{
          attributes: {
            class: 'fa fa-circle-o-notch fa-spin'
          },
          type: 'i'
        }]);
        const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_3__["Lock"]('comment', {
          threshold: 300
        });
        await lock.lock();
        comments = JSON.parse(getValue(type));
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('ct_s')) {
          delete comments[code].count;
        }
        delete comments[code].visited;
        comments[code].lastUsed = Date.now();
        await setValue(type, JSON.stringify(comments));
        await lock.unlock();
        this.gdttt_addMarkVisitedButton(button, code, context, count, type);
      }
    });
  }
}
const generalGiveawayDiscussionTicketTradeTracker = new GeneralGiveawayDiscussionTicketTradeTracker();


/***/ }),
/* 304 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalThreadSubscription", function() { return generalThreadSubscription; });
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(146);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(209);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(220);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(222);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(132);












class GeneralThreadSubscription extends _class_Module__WEBPACK_IMPORTED_MODULE_8__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Allows you to subscribe to threads so that you're notified when a new comment is posted."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-bell-o"
      }), " button to the header that allows you to view your subscriptions.")),
      id: 'tds',
      name: 'Thread Subscription',
      sg: true,
      st: true,
      type: 'general',
      features: {
        tds_n: {
          name: 'Show browser notifications when there are new comments in the subscriptions.',
          sg: true,
          st: true
        }
      },
      inputItems: [{
        attributes: {
          min: 0,
          type: 'number'
        },
        id: 'tds_minutes',
        prefix: 'Check every ',
        suffix: ' minutes'
      }]
    };
    this.button = null;
    this.lock = null;
    this.minutes = null;
    this.popout = null;
    this.subscribedItems = [];
    this.forumCategories = {
      '': 'All',
      'addons-tools': 'Add-ons / Tools',
      announcements: 'Announcements',
      'bugs-suggestions': 'Bugs / Suggestions',
      deals: 'Deals',
      'game-showcase': 'Game Showcase',
      general: 'General',
      'group-recruitment': 'Group Recruitment',
      hardware: 'Hardware',
      help: 'Help',
      'lets-play-together': "Let's Play Together",
      'movies-tv': 'Movies / TV',
      'off-topic': 'Off Topic',
      'puzzles-events': 'Puzzles / Events',
      uncategorized: 'Uncategorized',
      'user-projects': 'User Projects',
      'whitelist-recruitment': 'Whitelist Recruitment'
    };
  }
  async init() {
    this.button = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].header.addButtonContainer({
      buttonIcon: 'fa fa-circle-o-notch fa-spin',
      buttonName: 'ESGST Thread Subscriptions',
      isNotification: true,
      side: 'right'
    });
    this.button.nodes.buttonIcon.title = 'Loading your subscriptions';
    this.popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_9__["Popout"]('esgst-tds-popout', this.button.nodes.outer, 0, true);
    this.minutes = parseInt(_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_minutes')) * 60000;
    this.startDaemon();
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.discussionsPath || _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.discussionPath) {
      const forumCodes = Object.keys(this.forumCategories);
      for (const forumCode of forumCodes) {
        const element = document.querySelector(`.sidebar__navigation__item__link[href="/discussions${forumCode ? `/${forumCode}` : ''}"]`);
        if (!element) {
          continue;
        }
        element.parentElement.classList.add('esgst-tds-sidebar-item');
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums')[forumCode]) {
          this.addUnsubscribeButton(null, forumCode, element, null, this.forumCategories[forumCode], 'forum');
        } else {
          this.addSubscribeButton(null, forumCode, element, null, this.forumCategories[forumCode], 'forum');
        }
      }
    }
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.commentsPath) {
      return;
    }
    const match = window.location.pathname.match(/(discussion|ticket|trade)\/(.+?)\//);
    if (!match) {
      return;
    }
    const type = `${match[1]}s`;
    const code = match[2];
    const context = document.querySelector('.page__heading, .page_heading');
    const name = context.querySelector('h1') ? context.querySelector('h1').textContent.trim() : null;
    const heading = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.mainPageHeading.querySelector('.page__heading__breadcrumbs, .page_heading_breadcrumbs').firstElementChild;
    const count = parseInt(heading.textContent.replace(/,/g, '').match(/\d+/)[0]);
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.discussionPath || _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.tradePath) {
      const savedThread = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst[type][code];
      if (savedThread && typeof savedThread.subscribed !== 'undefined') {
        this.addUnsubscribeButton(null, code, context, count, name, type);
      } else {
        this.addSubscribeButton(null, code, context, count, name, type);
      }
    }
  }
  async dismissItem(event, item) {
    item.diff = 0;
    if (item.type === 'forum') {
      await this.subscribe(item.code, item.codes, item.name, item.type);
    } else {
      item.subscribed = item.count;
      await this.subscribe(item.code, item.count, item.name, item.type);
    }
    event.target.remove();
    await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.notifyTds(this.subscribedItems);
  }
  async unsubscribeItem(element, item) {
    if (item.type !== 'forum') {
      delete item.subscribed;
    }
    await this.unsubscribe(item.code, item.type);
    element.remove();
    await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.notifyTds(this.subscribedItems);
    if (this.popout.isOpen) {
      this.popout.reposition();
    }
  }
  async updatePopout() {
    this.popout.popout.innerHTML = '';
    this.subscribedItems = this.subscribedItems.filter(item => typeof item.subscribed !== 'undefined' || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums')[item.code]);
    this.subscribedItems.sort((a, b) => a.diff > b.diff ? -1 : 1);
    for (const item of this.subscribedItems) {
      let element;
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.popout.popout, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: `esgst-tds-item ${item.diff ? 'esgst-tds-item-active' : ''}`,
        ref: ref => element = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "esgst-tds-item-description"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        className: "esgst-tds-item-name",
        href: item.type === 'forum' ? `https://www.steamgifts.com/discussions${item.code ? `/${item.code}` : ''}` : item.type === 'discussions' ? `https://www.steamgifts.com/discussion/${item.code}/search?page=last` : `https://www.steamtrades.com/trade/${item.code}/search?page=last`
      }, item.type === 'forum' ? this.forumCategories[item.code] : item.name), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "esgst-tds-item-count"
      }, item.diff ? `${item.diff} new ${item.type === 'forum' ? 'threads' : 'comments'}` : `No new ${item.type === 'forum' ? 'threads' : 'comments'}`)), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "esgst-tds-item-actions"
      }, item.diff ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-eye",
        title: "Dismiss",
        onclick: event => this.dismissItem(event, item)
      }) : null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-bell",
        title: "Unsubscribe",
        onclick: () => this.unsubscribeItem(element, item)
      }))));
    }
    if (this.popout.isOpen) {
      this.popout.reposition();
    }
  }
  updateButton() {
    if (this.subscribedItems.filter(item => item.diff).length) {
      this.button.nodes.outer.classList.remove('nav__button-container--inactive');
      this.button.nodes.outer.classList.add('nav__button-container--active');
      this.button.nodes.buttonIcon.className = 'fa fa-bell';
      this.button.nodes.buttonIcon.title = 'New comments in your subscriptions, click to see';
    } else {
      this.button.nodes.outer.classList.remove('nav__button-container--active');
      this.button.nodes.outer.classList.add('nav__button-container--inactive');
      this.button.nodes.buttonIcon.className = 'fa fa-bell-o';
      this.button.nodes.buttonIcon.title = 'No new comments in your subscriptions';
    }
    this.updatePopout();
  }
  updateItems(items) {
    this.subscribedItems = items;
    this.updateButton();
  }
  async showNotification() {
    const result = await window.Notification.requestPermission();
    if (result !== 'granted') {
      return;
    }
    new Notification('ESGST Notification', {
      body: 'There are new comments in your subscriptions.',
      icon: 'https://dl.dropboxusercontent.com/s/lr3t3bxrxfxylqe/esgstIcon.ico?raw=1',
      tag: 'TDS'
    });
  }
  async runDaemon(firstRun) {
    var _this$lock;
    //Logger.info('Running TDS daemon...');

    await ((_this$lock = this.lock) === null || _this$lock === void 0 ? void 0 : _this$lock.update());
    const oldDiff = this.subscribedItems.filter(item => item.diff).reduce((sum, currentItem) => sum + currentItem.diff, 0);
    this.subscribedItems = [];
    for (const code in _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.discussions) {
      const discussion = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.discussions[code];
      if (typeof discussion.subscribed !== 'undefined') {
        this.subscribedItems.push({
          code,
          count: discussion.subscribed,
          diff: 0,
          name: discussion.name,
          subscribed: discussion.subscribed,
          type: 'discussions'
        });
      }
    }
    for (const code in _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.trades) {
      const trade = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.trades[code];
      if (typeof trade.subscribed !== 'undefined') {
        this.subscribedItems.push({
          code,
          count: trade.subscribed,
          diff: 0,
          name: trade.name,
          subscribed: trade.subscribed,
          type: 'trades'
        });
      }
    }
    for (const item of this.subscribedItems) {
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(item.type === 'discussions' ? `https://www.steamgifts.com/discussion/${item.code}/` : `https://www.steamtrades.com/trade/${item.code}/`);
      const mainPageHeading = response.html.querySelectorAll('.page__heading, .page_heading')[1];
      const heading = mainPageHeading.querySelector('.page__heading__breadcrumbs, .page_heading_breadcrumbs').firstElementChild;
      const count = parseInt(heading.textContent.replace(/,/g, '').match(/\d+/)[0]);
      if (count !== item.count) {
        item.diff = count - item.count;
        item.count = count;
      }
    }
    for (const code in _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums')) {
      const codes = [];
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`https://www.steamgifts.com/discussions${code ? `/${code}` : ''}/search?sort=new`);
      const elements = response.html.querySelectorAll('.table__column__heading');
      for (const element of elements) {
        codes.push(element.getAttribute('href').match(/\/discussion\/(.+?)\//)[1]);
      }
      const diff = codes.filter(subCode => !_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums')[code].includes(subCode)).length;
      this.subscribedItems.push({
        code,
        codes,
        diff,
        type: 'forum'
      });
    }
    const newDiff = this.subscribedItems.filter(item => item.diff).reduce((sum, currentItem) => sum + currentItem.diff, 0);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_n') && !firstRun && oldDiff !== newDiff) {
      this.showNotification();
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.notifyTds(this.subscribedItems);
    this.updateButton();
    window.setTimeout(this.runDaemon.bind(this, false), this.minutes);
  }
  async startDaemon() {
    this.lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_7__["Lock"]('tds', {
      threshold: 300,
      timeout: this.minutes + 15000,
      tryOnce: true
    });
    await this.lock.lock();
    if (!this.lock.isLocked) {
      //Logger.info('TDS Daemon already running....');

      this.updateItems(await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getTds());
      return;
    }
    await this.runDaemon(true);
  }
  async subscribe(code, countOrCodes, name, type) {
    if (type === 'forum') {
      if (countOrCodes !== null) {
        const forums = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums');
        forums[code] = countOrCodes;
        _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].set('tds_forums', forums);
      } else {
        const codes = [];
        const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`/discussions${code ? `/${code}` : ''}/search?sort=new`);
        const elements = response.html.querySelectorAll('.table__column__heading');
        for (const element of elements) {
          codes.push(element.getAttribute('href').match(/\/discussion\/(.+?)\//)[1]);
        }
        if (!_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums')[code]) {
          const forums = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums');
          forums[code] = [];
          _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].set('tds_forums', forums);
        }
        const forums = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums');
        forums[code] = Array.from(new Set(_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums')[code].concat(codes)));
        _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].set('tds_forums', forums);
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setSetting('tds_forums', _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums'));
    } else {
      const savedThread = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst[type][code] || {};
      if (!savedThread.readComments) {
        savedThread.readComments = {};
      }
      savedThread.name = name;
      savedThread.subscribed = countOrCodes;
      savedThread.lastUsed = Date.now();
      switch (type) {
        case 'discussions':
          await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.lockAndSaveDiscussions({
            [code]: savedThread
          });
          break;
        case 'trades':
          await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.lockAndSaveTrades({
            [code]: savedThread
          });
          break;
      }
    }
    return true;
  }
  async unsubscribe(code, type) {
    if (type === 'forum') {
      delete _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums')[code];
      await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setSetting('tds_forums', _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('tds_forums'));
    } else {
      const savedThread = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst[type][code] || {};
      savedThread.subscribed = null;
      savedThread.lastUsed = Date.now();
      switch (type) {
        case 'discussions':
          await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.lockAndSaveDiscussions({
            [code]: savedThread
          });
          break;
        case 'trades':
          await _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.lockAndSaveTrades({
            [code]: savedThread
          });
          break;
      }
    }
    return true;
  }
  addSubscribeButton(button, code, context, count, name, type) {
    if (!button) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(context, type === 'forum' ? 'afterend' : 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "esgst-tds-button page_heading_btn",
        ref: ref => button = ref
      }));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
      className: "fa fa-bell-o",
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getFeatureTooltip('tds', 'Subscribe')
    }));
    let busy = false;
    button.addEventListener('click', async () => {
      if (busy) {
        return;
      }
      busy = true;
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-circle-o-notch fa-spin"
      }));
      await this.subscribe(code, count, name, type);
      this.addUnsubscribeButton(button, code, context, count, name, type);
    });
  }
  addUnsubscribeButton(button, code, context, count, name, type) {
    if (!button) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(context, type === 'forum' ? 'afterend' : 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: "esgst-tds-button page_heading_btn",
        ref: ref => button = ref
      }));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
      className: "fa fa-bell",
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.getFeatureTooltip('tds', 'Unsubscribe')
    }));
    let busy = false;
    button.addEventListener('click', async () => {
      if (busy) {
        return;
      }
      busy = true;
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(button, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-circle-o-notch fa-spin"
      }));
      await this.unsubscribe(code, type);
      this.addSubscribeButton(button, code, context, count, name, type);
    });
  }
}
const generalThreadSubscription = new GeneralThreadSubscription();


/***/ }),
/* 305 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayExtractor", function() { return giveawaysGiveawayExtractor; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var date_fns_differenceInDays__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(306);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(207);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(208);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(210);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(221);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(222);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(132);
/* harmony import */ var _class_Tabs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(231);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(212);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(218);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(224);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(216);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(144);


























const buildGiveaway = _Common__WEBPACK_IMPORTED_MODULE_25__["common"].buildGiveaway.bind(_Common__WEBPACK_IMPORTED_MODULE_25__["common"]),
  createElements = _Common__WEBPACK_IMPORTED_MODULE_25__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_25__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_25__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_25__["common"]),
  endless_load = _Common__WEBPACK_IMPORTED_MODULE_25__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_25__["common"]);
class GiveawaysGiveawayExtractor extends _class_Module__WEBPACK_IMPORTED_MODULE_12__["Module"] {
  constructor() {
    super();
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "updateCache", async giveaway => {
      this.ge.cache = JSON.parse(_Common__WEBPACK_IMPORTED_MODULE_25__["common"].getValue('geCache', '{}'));
      if (giveaway.code in this.ge.cache[this.ge.cacheId].giveaways) {
        const cacheGiveaway = this.ge.cache[this.ge.cacheId].giveaways[giveaway.code];
        if (giveaway.entered) {
          cacheGiveaway.html = cacheGiveaway.html.replace(/"giveaway__row-outer-wrap"/, '"giveaway__row-outer-wrap" data-entered="true"').replace(/"giveaway__row-inner-wrap\s?"/, '"giveaway__row-inner-wrap is-faded"');
        } else {
          cacheGiveaway.html = cacheGiveaway.html.replace(/\sdata-entered="true"/, '').replace(/"giveaway__row-inner-wrap\sis-faded"/, '"giveaway__row-inner-wrap"');
        }
        await _Common__WEBPACK_IMPORTED_MODULE_25__["common"].setValue('geCache', JSON.stringify(this.ge.cache));
      }
    });
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("i", {
        className: "fa fa-gift"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("i", {
        className: "fa fa-search"
      }), ") to the main page heading of any giveaway/discussion page that allows you to extract all of the giveaways that are linked in the page."), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "The giveaways are extracted recursively. For example, if giveaway A has links to giveaways B and C, the feature will extract giveaway B and all of the giveaways linked in it before moving on to giveaway C, and so on."), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "The feature keeps extracting giveaways until it no longer finds a giveaway link in the page. To prevent a loop (and consequently duplicate results), it keeps track of which giveaways it has already extracted so that they are not extracted again."), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "If you use the feature in a giveaway page, it will add a \"Bump\" link to the results (when available)."), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "This feature is useful for extracting trains (multiple giveaways linked to each other).")),
      features: {
        ge_j: {
          name: 'Convert all Jigidi links to the "jigidi.com/jigsaw-puzzle" format.',
          sg: true
        },
        ge_sgt: {
          conflicts: ['ge_sgtga'],
          features: {
            ge_sgt_l: {
              inputItems: [{
                id: 'ge_sgt_limit',
                prefix: `Limit: `
              }],
              name: 'Limit how many links are opened.',
              sg: true
            }
          },
          name: 'Automatically open any SGTools links found in new tabs.',
          sg: true
        },
        ge_sgtga: {
          conflicts: ['ge_sgt'],
          features: {
            ge_sgtga_u: {
              name: 'Automatically unlock SGTools giveaways that have not yet been unlocked.',
              sg: true
            }
          },
          name: 'Automatically retrieve the giveaway link from SGTools giveaways that have already been unlocked.',
          sg: true
        },
        ge_t: {
          name: 'Open the extractor in a new tab.',
          sg: true
        },
        ge_a: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Disabling this allows you to configure the options for the extractor before starting it.")),
          name: 'Automatically start extracting when the popup opens.',
          sg: true
        }
      },
      inputItems: [{
        id: 'npth_nextRegex',
        prefix: `Enter the regex you want to use to detect next links when extracting onwards: `
      }],
      id: 'ge',
      name: 'Giveaway Extractor',
      sg: true,
      type: 'giveaways'
    };
  }
  async init() {
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_9__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_23__["Events"].GIVEAWAY_ENTER, this.updateCache);
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_9__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_23__["Events"].GIVEAWAY_LEAVE, this.updateCache);
    if ((this.esgst.giveawayCommentsPath && !document.getElementsByClassName('table--summary')[0] || this.esgst.discussionPath) && this.checkGiveaways()) {
      this.nextRegex = new RegExp(_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('npth_nextRegex'));

      // noinspection JSIgnoredPromiseFromCall
      this.ge_addButton();
    } else if (_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.isCurrentPath('Account') && this.esgst.parameters.esgst === 'ge') {
      this.nextRegex = new RegExp(_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('npth_nextRegex'));
      const parameters = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_24__["Utils"].getQueryParams();
      if (!parameters.url.match(/(^\/|www\.steamgifts\.com)/)) {
        if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_13__["permissions"].contains([['allUrls']]))) {
          window.alert('Giveaway Extractor: Not enough permissions to proceed.');
          return;
        }
      }
      this.ge = {
        context: (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`${parameters.url}${parameters.page ? `/search?page=${parameters.page}` : ''}`)).html
      };
      _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.customPages.ge = {
        check: true,
        load: this.ge_openPopup.bind(this, this.ge)
      };
    }
  }
  ge_addButton() {
    this.ge = {
      button: createHeadingButton({
        id: 'ge',
        icons: ['fa-gift', 'fa-search'],
        title: 'Extract all giveaways',
        link: _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_t') ? `https://www.steamgifts.com/account/settings/profile?esgst=ge&url=${window.location.pathname.replace(/\/search.*/, '')}${this.esgst.parameters.page ? `&page=${this.esgst.parameters.page}` : ''}` : ''
      })
    };
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_t')) {
      this.ge.button.addEventListener('click', () => this.ge_openPopup(this.ge));
    }
  }
  async ge_openPopup(ge) {
    if (ge.popup) {
      ge.popup.open();
      return;
    }
    const now = Date.now();
    let changed = false;
    ge.cache = JSON.parse(_Common__WEBPACK_IMPORTED_MODULE_25__["common"].getValue('geCache', '{}'));
    for (const id in ge.cache) {
      if (Object(date_fns_differenceInDays__WEBPACK_IMPORTED_MODULE_7__["default"])(now, ge.cache[id].timestamp) > 7) {
        changed = true;
        delete ge.cache[id];
      }
    }
    if (changed) {
      await _Common__WEBPACK_IMPORTED_MODULE_25__["common"].setValue('geCache', JSON.stringify(ge.cache));
    }
    const urlMatch = this.esgst.parameters.url && this.esgst.parameters.url.match(/^\/(giveaway|discussion)\/.+?\//);
    const pathMatch = window.location.pathname.match(/^\/(giveaway|discussion)\/.+?\//);
    ge.cacheId = this.esgst.parameters.url && (urlMatch && urlMatch[0] || this.esgst.parameters.url) || pathMatch && pathMatch[0];
    ge.count = 0;
    ge.endless = 0;
    ge.total = 0;
    ge.extracted = [];
    ge.bumpLink = '';
    ge.points = 0;
    ge.sgToolsCount = 0;
    ge.isDivided = !_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('es') || !_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('es_ge') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_gi') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_r') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_rm') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_ea') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_tc') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_a') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_mp') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_sc') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_l') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_m') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_dlc') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_rd') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gc_g');
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.isCurrentPath('Account') && this.esgst.parameters.esgst === 'ge') {
      const context = this.esgst.sidebar.nextElementSibling;
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('removeSidebarInFeaturePages')) {
        this.esgst.sidebar.remove();
      }
      context.setAttribute('data-esgst-popup', 'true');
      context.innerHTML = '';
      ge.heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_22__["PageHeading"].create('ge', [{
        name: 'ESGST',
        url: this.esgst.settingsUrl
      }, {
        name: 'Giveaway Extractor',
        url: `https://www.steamgifts.com/account/settings/profile?esgst=ge`
      }]).insert(context, 'beforeend');
      const container = createElements(context, 'beforeend', [{
        type: 'div'
      }]);
      const scrollable = createElements(context, 'beforeend', [{
        type: 'div'
      }]);
      ge.popup = {
        description: container,
        scrollable: scrollable,
        open: () => {},
        reposition: () => {}
      };
    } else {
      ge.popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_15__["Popup"]({
        addScrollable: true
      });
      ge.heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_22__["PageHeading"].create('ge', ['Extract giveaways']).insert(ge.popup.description, 'afterbegin');
    }
    ge.results = createElements(ge.popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-text-left'
      },
      type: 'div'
    }]);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gas') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gf') && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gf_m') || _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('mm')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gas')) {
        this.esgst.modules.giveawaysGiveawaysSorter.init(ge.heading.nodes.outer);
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gf') && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('gf_m')) {
        ge.heading.nodes.outer.appendChild(this.esgst.modules.giveawaysGiveawayFilters.filters_addContainer(ge.heading.nodes.outer, 'Ge'));
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('mm')) {
        this.esgst.modules.generalMultiManager.mm(ge.heading.nodes.outer);
      }
    }
    const optionsButton = _components_Button__WEBPACK_IMPORTED_MODULE_20__["Button"].create({
      color: 'alternate-white',
      tooltip: 'Options',
      icons: ['fa-gear']
    }).insert(ge.heading.nodes.outer, 'beforeend');
    const popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_14__["Popout"]('', optionsButton.nodes.outer, 0, true);
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_19__["ToggleSwitch"](popout.popout, 'ge_extractOnward', null, 'Only extract from the current giveaway onward.', false, false, `With this option enabled, if you are in the 6th giveaway of a train that has links to the previous giveaways, the extractor will not go back and extract giveaways 1-5. This method is not 100% accurate, because the feature looks for a link with any variation of "next" in the description of the giveaway to make sure that it is going forward, so if it does not find such a link, the extraction will stop.`, _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_extractOnward'));
    _Common__WEBPACK_IMPORTED_MODULE_25__["common"].observeNumChange(new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_19__["ToggleSwitch"](popout.popout, 'ge_flushCache', null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("fragment", null, "Flush the cache if it is older than", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("input", {
      className: "esgst-switch-input",
      step: "0.1",
      type: "number",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_flushCacheHours')
    }), ' ', "hours."), false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_flushCache')).name.firstElementChild, 'ge_flushCacheHours', true);
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_19__["ToggleSwitch"](popout.popout, 'ge_ignoreDiscussionComments', null, 'Ignore discussion comments when extracting giveaways.', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_ignoreDiscussionComments'));
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_19__["ToggleSwitch"](popout.popout, 'ge_ignoreGiveawayComments', null, 'Ignore giveaway comments when extracting giveaways.', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_ignoreGiveawayComments'));
    ge.extractOnward = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_extractOnward');
    ge.flushCache = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_flushCache');
    ge.flushCacheHours = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_flushCacheHours');
    ge.ignoreDiscussionComments = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_ignoreDiscussionComments');
    ge.ignoreGiveawayComments = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_ignoreGiveawayComments');
    ge.cacheWarning = null;
    const onExtractClick = () => {
      return new Promise(resolve => {
        if (ge.hasScrolled && ge.isComplete) {
          resolve();
          return;
        }
        ge.hasScrolled = false;
        ge.isComplete = false;
        if (ge.cacheWarning || ge.reExtract) {
          if (ge.reExtract) {
            ge.extractOnward = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_extractOnward');
            ge.ignoreDiscussionComments = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_ignoreDiscussionComments');
            ge.ignoreGiveawayComments = _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_ignoreGiveawayComments');
            ge.count = 0;
            ge.endless = 0;
            ge.total = 0;
            ge.extracted = [];
            ge.bumpLink = '';
            ge.points = 0;
            ge.sgToolsCount = 0;
          }
          ge.flushCache = true;
          ge.flushCacheHours = 0;
          ge.reExtract = false;
          if (ge.cacheWarning) {
            ge.cacheWarning.remove();
          }
          ge.cacheWarning = null;
          ge.results.innerHTML = '';
          ge.cache[ge.cacheId] = {
            codes: [],
            giveaways: {},
            bumpLink: '',
            ithLinks: new Set(),
            jigidiLinks: new Set(),
            timestamp: now
          };
        }
        ge.mainCallback = resolve;
        if (ge.callback) {
          ge.progressBar.setLoading();
          ge.callback();
        } else {
          ge.isCanceled = false;
          if (ge.button) {
            ge.button.classList.add('esgst-busy');
          }
          ge.progressBar.setLoading(_class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("span", {
            ref: ref => ge.progressBarCounter = ref
          }, ge.total), " giveaways extracted.")).show();
          let giveaways = this.ge_getGiveaways(ge, _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.isCurrentPath('Account') && this.esgst.parameters.esgst === 'ge' ? ge.context : this.esgst.pageOuterWrap);
          this.ge_extractGiveaways(ge, giveaways, 0, giveaways.length, this.ge_completeExtraction.bind(this, ge));
        }
      });
    };
    const onCancelClick = () => {
      ge.mainCallback = null;
      ge.isCanceled = true;
      // noinspection JSIgnoredPromiseFromCall
      this.ge_completeExtraction(ge);
    };
    ge.extractButton = _components_Button__WEBPACK_IMPORTED_MODULE_20__["Button"].create([{
      color: 'green',
      icons: ['fa-search'],
      name: 'Extract',
      switchTo: {
        onReturn: 1
      },
      onClick: onExtractClick
    }, {
      template: 'error',
      name: 'Cancel',
      switchTo: {
        onReturn: 0
      },
      onClick: onCancelClick
    }, {
      color: 'green',
      icons: ['fa-search'],
      name: 'Extract More',
      switchTo: {
        onReturn: 3
      },
      onClick: onExtractClick
    }, {
      template: 'error',
      name: 'Cancel',
      switchTo: {
        onReturn: 0
      },
      onClick: onCancelClick
    }, {
      color: 'green',
      icons: ['fa-search'],
      name: 'Re-Extract',
      switchTo: {
        onReturn: 5
      },
      onClick: onExtractClick
    }, {
      template: 'error',
      name: 'Cancel',
      switchTo: {
        onReturn: 0
      },
      onClick: onCancelClick
    }]).insert(ge.heading.nodes.outer, 'beforeend');
    ge.progressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_21__["NotificationBar"].create().insert(ge.popup.description, 'beforeend').hide();
    ge.popup.open();
    if (ge.flushCache && ge.cache[ge.cacheId] && now - ge.cache[ge.cacheId].timestamp > parseInt(ge.flushCacheHours) * 3600000) {
      delete ge.cache[ge.cacheId];
    }
    if (!ge.extractOnward && ge.cache[ge.cacheId]) {
      ge.cache[ge.cacheId].ithLinks = new Set(ge.cache[ge.cacheId].ithLinks);
      ge.cache[ge.cacheId].jigidiLinks = new Set(ge.cache[ge.cacheId].jigidiLinks);
      _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].insert(ge.popup.description, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("div", {
        ref: ref => ge.cacheWarning = ref
      }, `These results were retrieved from the cache from ${_Common__WEBPACK_IMPORTED_MODULE_25__["common"].getTimeSince(ge.cache[ge.cacheId].timestamp)} ago (${this.esgst.modules.generalAccurateTimestamp.at_formatTimestamp(ge.cache[ge.cacheId].timestamp)}). If you want to update the cache, you will have to extract again.`));
      let html = '';
      let points = 0;
      let total = 0;
      for (const code of ge.cache[ge.cacheId].codes) {
        if (total % 50 === 0) {
          html = '';
        }
        const giveaway = ge.cache[ge.cacheId].giveaways[code];
        if (giveaway) {
          html += giveaway.html;
          points += giveaway.points;
          total += 1;
        } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_sgt') && (!_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_sgt_l') || ge.sgToolsCount < _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_sgt_limit'))) {
          _class_Tabs__WEBPACK_IMPORTED_MODULE_18__["Tabs"].open(`https://www.sgtools.info/giveaways/${code}`);
          ge.sgToolsCount += 1;
        }
        if (total % 50 === 0) {
          ge.results.insertAdjacentHTML('beforeend', html);
          ge.results.lastElementChild.classList.add(`esgst-es-page-${ge.endless}`);
          await _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].common.timeout(100);
        }
      }
      if (total % 50 !== 0) {
        ge.results.insertAdjacentHTML('beforeend', html);
        ge.results.lastElementChild.classList.add(`esgst-es-page-${ge.endless}`);
      }
      ge.progressBar.setInfo(_class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("span", {
        ref: ref => ge.progressBarCounter = ref
      }, ge.total), " giveaways extracted.")).show();
      ge.progressBarCounter.textContent = total;
      await endless_load(ge.results, false, 'ge', ge.endless);
      const items = [{
        attributes: {
          class: 'markdown esgst-text-center'
        },
        type: 'div',
        children: []
      }];
      if (ge.cache[ge.cacheId].bumpLink && !this.esgst.discussionPath) {
        items[0].children.push({
          type: 'h2',
          children: [{
            attributes: {
              href: ge.cache[ge.cacheId].bumpLink
            },
            text: 'Bump',
            type: 'a'
          }]
        });
      }
      items[0].children.push({
        text: `${points}P required to enter all giveaways.`,
        type: 'node'
      });
      for (let link of [...ge.cache[ge.cacheId].ithLinks, ...ge.cache[ge.cacheId].jigidiLinks]) {
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_j')) {
          const id = this.extractJigidiId(link);
          if (id) {
            link = `https://www.jigidi.com/jigsaw-puzzle/${id}`;
          }
        }
        items[0].children.push({
          type: 'br'
        }, {
          attributes: {
            href: link
          },
          text: link,
          type: 'a'
        });
      }
      createElements(ge.results, 'afterbegin', items);
      createElements(ge.results, 'beforeend', items);
    } else {
      ge.cache[ge.cacheId] = {
        codes: [],
        giveaways: {},
        bumpLink: '',
        ithLinks: new Set(),
        jigidiLinks: new Set(),
        timestamp: now
      };
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_a')) {
        ge.extractButton.onClick();
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('es') && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('es_ge')) {
      ge.popup.scrollable.addEventListener('scroll', this.checkScroll.bind(this, ge));
    }
  }
  checkScroll(ge, filtered) {
    if (!ge.cacheWarning && !ge.isCanceled && ge.extractButton && !ge.extractButton.isBusy && (ge.popup.scrollable.scrollTop + ge.popup.scrollable.offsetHeight >= ge.popup.scrollable.scrollHeight || filtered)) {
      ge.hasScrolled = true;
      ge.extractButton.onClick();
    }
  }
  ge_extractGiveaways(ge, giveaways, i, n, callback) {
    if (!ge.isCanceled) {
      if (i < n) {
        // noinspection JSIgnoredPromiseFromCall
        this.ge_extractGiveaway(ge, giveaways[i], () => window.setTimeout(this.ge_extractGiveaways.bind(this), 0, ge, giveaways, ++i, n, callback));
      } else {
        callback();
      }
    }
  }
  async ge_extractGiveaway(ge, code, callback) {
    if (!ge.isCanceled) {
      if (ge.isDivided && ge.count === 50) {
        let children, filtered, i;
        ge.mainCallback();
        ge.mainCallback = null;
        ge.count = 0;
        await endless_load(ge.results, false, 'ge', ge.endless);
        ge.extractButton.build(3);
        ge.progressBar.setInfo();
        ge.callback = this.ge_extractGiveaway.bind(this, ge, code, callback);
        filtered = false;
        children = ge.results.querySelectorAll(`:scope > .esgst-es-page-${ge.endless}`);
        for (i = children.length - 1; i > -1 && !filtered; --i) {
          if (children[i].firstElementChild.classList.contains('esgst-hidden')) {
            filtered = true;
          }
        }
        ge.endless++;
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('es') && _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('es_ge')) {
          this.checkScroll(ge, filtered);
        }
      } else {
        if (ge.extracted.indexOf(code) < 0) {
          let sgTools = code.length > 5;
          if (sgTools) {
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_sgt') && (!_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_sgt_l') || ge.sgToolsCount < _class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_sgt_limit'))) {
              _class_Tabs__WEBPACK_IMPORTED_MODULE_18__["Tabs"].open(`https://www.sgtools.info/giveaways/${code}`);
              ge.cache[ge.cacheId].codes.push(code);
              ge.extracted.push(code);
              ge.sgToolsCount += 1;
              callback();
              return;
            }
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_sgtga')) {
              try {
                if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_sgtga_u')) {
                  await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`https://www.sgtools.info/giveaways/${code}/check`, {
                    queue: true
                  });
                }
                const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`https://www.sgtools.info/giveaways/${code}/getLink`, {
                  queue: true
                });
                if (response.json && response.json.url) {
                  ge.extracted.push(code);
                  code = response.json.url.match(/\/giveaway\/(.{5})/)[1];
                  sgTools = false;
                }
              } catch (error) {
                _class_Logger__WEBPACK_IMPORTED_MODULE_11__["Logger"].warning(error.message, error.stack);
              }
            }
          }
          if (ge.extracted.indexOf(code) < 0) {
            let bumpLink, button, giveaway, giveaways, n, responseHtml;
            try {
              let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(sgTools ? `https://www.sgtools.info/giveaways/${code}` : `/giveaway/${code}/`);
              responseHtml = response.html;
              button = responseHtml.getElementsByClassName('sidebar__error')[0];
              giveaway = await buildGiveaway(responseHtml, response.url, button && button.textContent);
            } catch (error) {}
            if (ge.isCanceled) {
              return;
            }
            if (giveaway) {
              createElements(ge.results, 'beforeend', giveaway.html);
              ge.results.lastElementChild.classList.add(`esgst-es-page-${ge.endless}`);
              giveaway.html = ge.results.lastElementChild.outerHTML;
              ge.cache[ge.cacheId].codes.push(code);
              ge.cache[ge.cacheId].giveaways[code] = giveaway;
              ge.points += giveaway.points;
              ge.count += 1;
              ge.total += 1;
              ge.progressBarCounter.textContent = ge.total;
              ge.extracted.push(code);
              if (sgTools) {
                callback();
              } else {
                if (!ge.bumpLink) {
                  bumpLink = responseHtml.querySelector(`[href*="/discussion/"]`);
                  if (bumpLink) {
                    ge.bumpLink = bumpLink.getAttribute('href');
                    ge.cache[ge.cacheId].bumpLink = ge.bumpLink;
                  }
                }
                giveaways = this.ge_getGiveaways(ge, responseHtml);
                n = giveaways.length;
                if (n > 0) {
                  window.setTimeout(() => this.ge_extractGiveaways(ge, giveaways, 0, n, callback), 0);
                } else {
                  callback();
                }
              }
            } else if (!sgTools) {
              let bumpLink, giveaway, giveaways, n, responseHtml;
              try {
                let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(`/giveaway/${code}/`, {
                  anon: true
                });
                responseHtml = response.html;
                giveaway = await buildGiveaway(responseHtml, response.url, null, true);
              } catch (error) {}
              if (giveaway) {
                createElements(ge.results, 'beforeend', giveaway.html);
                ge.results.lastElementChild.classList.add(`esgst-es-page-${ge.endless}`);
                giveaway.html = ge.results.lastElementChild.outerHTML;
                ge.cache[ge.cacheId].codes.push(code);
                ge.cache[ge.cacheId].giveaways[code] = giveaway;
                ge.points += giveaway.points;
                ge.count += 1;
                ge.total += 1;
                ge.progressBarCounter.textContent = ge.total;
                ge.extracted.push(code);
                if (!ge.bumpLink) {
                  bumpLink = responseHtml.querySelector(`[href*="/discussion/"]`);
                  if (bumpLink) {
                    ge.bumpLink = bumpLink.getAttribute('href');
                    ge.cache[ge.cacheId].bumpLink = ge.bumpLink;
                  }
                }
                giveaways = this.ge_getGiveaways(ge, responseHtml);
                n = giveaways.length;
                if (n > 0) {
                  window.setTimeout(() => this.ge_extractGiveaways(ge, giveaways, 0, n, callback), 0);
                } else {
                  callback();
                }
              } else {
                callback();
              }
            } else {
              callback();
            }
          } else {
            callback();
          }
        } else {
          callback();
        }
      }
    }
  }
  ge_getGiveaways(ge, context) {
    const giveawaySelectors = [`img[title]`, `[href*="/giveaway/"]`, `[href*="sgtools.info/giveaways"]`];
    let giveaways = [];
    if (context === ge.context) {
      let match = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_24__["Utils"].getQueryParams().url.match(/\/giveaway\/(.+?)\//);
      if (match) {
        giveaways.push(match[1]);
      }
    } else if (context === this.esgst.pageOuterWrap && this.esgst.giveawayPath) {
      let match = _class_Shared__WEBPACK_IMPORTED_MODULE_17__["Shared"].esgst.locationHref.match(/\/giveaway\/(.+?)\//);
      if (match) {
        giveaways.push(match[1]);
      }
    }
    const next = {
      code: null,
      count: 0
    };
    const description = context.querySelector('.page__description');
    const op = context.querySelector('.markdown');
    const commentElements = context.querySelectorAll('.comments');
    let elements;
    if (description) {
      elements = description.querySelectorAll(giveawaySelectors.join(', '));
      for (const element of elements) {
        this.ge_getGiveaway(element, ge, giveaways, next);
      }
      if (!ge.ignoreGiveawayComments && commentElements.length > 0) {
        elements = commentElements[commentElements.length - 1].querySelectorAll(giveawaySelectors.map(x => `.markdown ${x}`).join(', '));
        for (const element of elements) {
          this.ge_getGiveaway(element, ge, giveaways);
        }
      }
    } else if (op) {
      elements = op.querySelectorAll(giveawaySelectors.join(', '));
      for (const element of elements) {
        this.ge_getGiveaway(element, ge, giveaways, next);
      }
      if (!ge.ignoreDiscussionComments && commentElements.length > 0) {
        elements = commentElements[commentElements.length - 1].querySelectorAll(giveawaySelectors.map(x => `.markdown ${x}`).join(', '));
        for (const element of elements) {
          this.ge_getGiveaway(element, ge, giveaways);
        }
      }
    } else {
      elements = context.querySelectorAll(giveawaySelectors.join(', '));
      for (const element of elements) {
        this.ge_getGiveaway(element, ge, giveaways, next);
      }
    }
    if (next.count > 0) {
      giveaways.push(next.code);
    }
    const ithSelectors = [`[href*="itstoohard.com/puzzle/"]`];
    let ithLinks;
    if (ge.ignoreDiscussionComments && !description && op) {
      ithLinks = op.querySelectorAll(ithSelectors.join(`, `));
    } else if (ge.ignoreGiveawayComments && description) {
      ithLinks = description.querySelectorAll(ithSelectors.join(`, `));
    } else {
      ithLinks = context.querySelectorAll(ithSelectors.map(x => `.markdown ${x}`).join(`, `));
    }
    for (const link of ithLinks) {
      const url = link.getAttribute('href');
      ge.cache[ge.cacheId].ithLinks.add(url);
    }
    const jigidiSelectors = ['[href*="jigidi.com/jigsaw-puzzle"]', '[href*="jigidi.com/solve"]', '[href*="jigidi.com/created"]'];
    let jigidiLinks;
    if (ge.ignoreDiscussionComments && !description && op) {
      jigidiLinks = op.querySelectorAll(jigidiSelectors.join(`, `));
    } else if (ge.ignoreGiveawayComments && description) {
      jigidiLinks = description.querySelectorAll(jigidiSelectors.join(`, `));
    } else {
      jigidiLinks = context.querySelectorAll(jigidiSelectors.map(x => `.markdown ${x}`).join(`, `));
    }
    for (const link of jigidiLinks) {
      let url = link.getAttribute('href');
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_16__["Settings"].get('ge_j')) {
        const id = this.extractJigidiId(url);
        if (id) {
          url = `https://www.jigidi.com/jigsaw-puzzle/${id}`;
        }
      }
      ge.cache[ge.cacheId].jigidiLinks.add(url);
    }
    return giveaways;
  }
  ge_getGiveaway(element, ge, giveaways, next) {
    if (element.matches('img')) {
      const title = element.getAttribute('title');
      if (title.length === 5) {
        if (ge.extracted.indexOf(title) < 0 && giveaways.indexOf(title) < 0) {
          giveaways.push(title);
        }
      }
      return;
    }
    const url = element.getAttribute('href');
    let match = url.match(/\/(\w{5})\b/);
    if (!match) {
      match = url.match(/(\w{8}-\w{4}-\w{4}-\w{4}-\w{12})/);
      if (!match) {
        return;
      }
    }
    const code = match[1];
    if (!next || !ge.extractOnward || this.esgst.discussionPath || element.textContent.toLowerCase().match(this.nextRegex)) {
      if (ge.extracted.indexOf(code) < 0 && giveaways.indexOf(code) < 0) {
        giveaways.push(code);
      }
    } else {
      match = element.textContent.match(/\d+/);
      if (match) {
        const count = parseInt(match[0]);
        if (count > next.count && ge.extracted.indexOf(code) < 0 && giveaways.indexOf(code) < 0) {
          next.code = code;
          next.count = count;
        }
      }
    }
  }
  checkGiveaways() {
    let isFound = false;
    const elements = document.querySelectorAll(`.markdown img[title], .markdown [href*="/giveaway/"], .markdown [href*="sgtools.info/giveaways"]`);
    for (const element of elements) {
      if (element.matches('img')) {
        if (element.getAttribute('title').length === 5) {
          isFound = true;
        }
      } else {
        return true;
      }
    }
    return isFound;
  }
  async ge_completeExtraction(ge) {
    if (ge.button) {
      ge.button.classList.remove('esgst-busy');
    }
    ge.progressBar.setSuccess();
    if (ge.mainCallback) {
      ge.mainCallback();
      ge.mainCallback = null;
    }
    await endless_load(ge.results, false, 'ge', ge.endless);
    const items = [{
      attributes: {
        class: 'markdown esgst-text-center'
      },
      type: 'div',
      children: []
    }];
    if (ge.bumpLink && !this.esgst.discussionPath) {
      items[0].children.push({
        type: 'h2',
        children: [{
          attributes: {
            href: ge.bumpLink
          },
          text: 'Bump',
          type: 'a'
        }]
      });
    }
    items[0].children.push({
      text: `${ge.points}P required to enter all giveaways.`,
      type: 'node'
    });
    for (const link of [...ge.cache[ge.cacheId].ithLinks, ...ge.cache[ge.cacheId].jigidiLinks]) {
      items[0].children.push({
        type: 'br'
      }, {
        attributes: {
          href: link
        },
        text: link,
        type: 'a'
      });
    }
    createElements(ge.results, 'afterbegin', items);
    createElements(ge.results, 'beforeend', items);
    ge.extractButton.build(5);
    ge.reExtract = true;
    ge.isComplete = true;
    if (!ge.isCanceled && !ge.extractOnward) {
      ge.cache[ge.cacheId].ithLinks = Array.from(ge.cache[ge.cacheId].ithLinks);
      ge.cache[ge.cacheId].jigidiLinks = Array.from(ge.cache[ge.cacheId].jigidiLinks);
      await _Common__WEBPACK_IMPORTED_MODULE_25__["common"].setValue('geCache', JSON.stringify(ge.cache));
    }
    $('.esgst-gv-icons [data-draggable-id]').removeClass('featured__column');
  }
  extractJigidiId(url) {
    const matches = url.match(/(jigsaw-puzzle|solve)\/([A-Za-z0-9]+)|id=([A-Za-z0-9]+)/);
    return matches[2] || matches[3];
  }
}
const giveawaysGiveawayExtractor = new GiveawaysGiveawayExtractor();


/***/ }),
/* 306 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return differenceInDays; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _differenceInCalendarDays_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(307);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(172);


 // Like `compareAsc` but uses local time not UTC, which is needed
// for accurate equality comparisons of UTC timestamps that end up
// having the same representation in local time, e.g. one hour before
// DST ends vs. the instant that DST ends.
function compareLocalAsc(dateLeft, dateRight) {
  var diff = dateLeft.getFullYear() - dateRight.getFullYear() || dateLeft.getMonth() - dateRight.getMonth() || dateLeft.getDate() - dateRight.getDate() || dateLeft.getHours() - dateRight.getHours() || dateLeft.getMinutes() - dateRight.getMinutes() || dateLeft.getSeconds() - dateRight.getSeconds() || dateLeft.getMilliseconds() - dateRight.getMilliseconds();
  if (diff < 0) {
    return -1;
  } else if (diff > 0) {
    return 1;
    // Return 0 if diff is 0; return NaN if diff is NaN
  } else {
    return diff;
  }
}

/**
 * @name differenceInDays
 * @category Day Helpers
 * @summary Get the number of full days between the given dates.
 *
 * @description
 * Get the number of full day periods between two dates. Fractional days are
 * truncated towards zero.
 *
 * One "full day" is the distance between a local time in one day to the same
 * local time on the next or previous day. A full day can sometimes be less than
 * or more than 24 hours if a daylight savings change happens between two dates.
 *
 * To ignore DST and only measure exact 24-hour periods, use this instead:
 * `Math.floor(differenceInHours(dateLeft, dateRight)/24)|0`.
 *
 *
 * @param {Date|Number} dateLeft - the later date
 * @param {Date|Number} dateRight - the earlier date
 * @returns {Number} the number of full days according to the local timezone
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // How many full days are between
 * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?
 * const result = differenceInDays(
 *   new Date(2012, 6, 2, 0, 0),
 *   new Date(2011, 6, 2, 23, 0)
 * )
 * //=> 365
 * // How many full days are between
 * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?
 * const result = differenceInDays(
 *   new Date(2011, 6, 3, 0, 1),
 *   new Date(2011, 6, 2, 23, 59)
 * )
 * //=> 0
 * // How many full days are between
 * // 1 March 2020 0:00 and 1 June 2020 0:00 ?
 * // Note: because local time is used, the
 * // result will always be 92 days, even in
 * // time zones where DST starts and the
 * // period has only 92*24-1 hours.
 * const result = differenceInDays(
 *   new Date(2020, 5, 1),
 *   new Date(2020, 2, 1)
 * )
//=> 92
 */
function differenceInDays(dirtyDateLeft, dirtyDateRight) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(2, arguments);
  var dateLeft = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDateLeft);
  var dateRight = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDateRight);
  var sign = compareLocalAsc(dateLeft, dateRight);
  var difference = Math.abs(Object(_differenceInCalendarDays_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(dateLeft, dateRight));
  dateLeft.setDate(dateLeft.getDate() - sign * difference);

  // Math.abs(diff in full days - diff in calendar days) === 1 if last calendar day is not full
  // If so, result must be decreased by 1 in absolute value
  var isLastDayNotFull = Number(compareLocalAsc(dateLeft, dateRight) === -sign);
  var result = sign * (difference - isLastDayNotFull);
  // Prevent negative zero
  return result === 0 ? 0 : result;
}

/***/ }),
/* 307 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return differenceInCalendarDays; });
/* harmony import */ var _lib_getTimezoneOffsetInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(191);
/* harmony import */ var _startOfDay_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(287);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(172);



var MILLISECONDS_IN_DAY = 86400000;

/**
 * @name differenceInCalendarDays
 * @category Day Helpers
 * @summary Get the number of calendar days between the given dates.
 *
 * @description
 * Get the number of calendar days between the given dates. This means that the times are removed
 * from the dates and then the difference in days is calculated.
 *
 * @param {Date|Number} dateLeft - the later date
 * @param {Date|Number} dateRight - the earlier date
 * @returns {Number} the number of calendar days
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // How many calendar days are between
 * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?
 * const result = differenceInCalendarDays(
 *   new Date(2012, 6, 2, 0, 0),
 *   new Date(2011, 6, 2, 23, 0)
 * )
 * //=> 366
 * // How many calendar days are between
 * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?
 * const result = differenceInCalendarDays(
 *   new Date(2011, 6, 3, 0, 1),
 *   new Date(2011, 6, 2, 23, 59)
 * )
 * //=> 1
 */
function differenceInCalendarDays(dirtyDateLeft, dirtyDateRight) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(2, arguments);
  var startOfDayLeft = Object(_startOfDay_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(dirtyDateLeft);
  var startOfDayRight = Object(_startOfDay_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(dirtyDateRight);
  var timestampLeft = startOfDayLeft.getTime() - Object(_lib_getTimezoneOffsetInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(startOfDayLeft);
  var timestampRight = startOfDayRight.getTime() - Object(_lib_getTimezoneOffsetInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(startOfDayRight);

  // Round the number of days to the nearest integer
  // because the number of milliseconds in a day is not constant
  // (e.g. it's different in the day of the daylight saving time clock shift)
  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_DAY);
}

/***/ }),
/* 308 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayEncrypterDecrypter", function() { return giveawaysGiveawayEncrypterDecrypter; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(209);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(212);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(224);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(144);
















const buildGiveaway = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].buildGiveaway.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  createElements = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  endless_load = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  lockAndSaveGiveaways = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].lockAndSaveGiveaways.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  rot = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].rot.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]);
class GiveawaysGiveawayEncrypterDecrypter extends _class_Module__WEBPACK_IMPORTED_MODULE_8__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds an icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-star"
      }), " if the giveaway is open,", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-star esgst-green"
      }), " if it is open and new,", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-star esgst-yellow"
      }), " if it is not open yet and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-star esgst-red"
      }), " if it has already ended) next to a comment's \"Permalink\" (in any page) for each encrypted giveaway that the comment has (if it has any). The icon links to the giveaway."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Encrypted giveaways are basically invite only giveaway codes that ESGST encrypts using various encryption methods and hides in your comments so that they can only be visible through the source code of the page. Other ESGST users are able to easily see these giveaways if they have this feature enabled, but since the codes are visible through the source code of the page, anyone who finds them and manages to decrypt them can access the giveaways. So it is more like a puzzle that ESGST users can solve instantly and non-ESGST users can solve if they give it some effort, though it is doubtful that someone will check the source code of every page they open on SteamGifts looking for the codes."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "To add encrypted giveaways to your comments, check", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
        "data-esgst-feature-id": "cfh_g"
      }), "."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-star"
      }), ") next to the ESGST button at the header of any page that allows you to view all of the currently open decrypted giveaways that you have unlocked (they are unlocked whenever you visit a page that contains them).")),
      features: {
        ged_b: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "With this option enabled, the header button will always appear if there are decrypted giveaways in the page, even if they have already ended (but they will not be listed in the popup).")),
          name: 'Always show the header button if there are decrypted giveaways in the page.',
          sg: true
        },
        ged_t: {
          name: 'Open the list of decrypted giveaways in a new tab.',
          sg: true
        }
      },
      id: 'ged',
      name: 'Giveaway Encrypter/Decrypter',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (!this.esgst.sg) return;
    let ged = {
      newGiveaways: []
    };
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.isCurrentPath('Account') && this.esgst.parameters.esgst === 'ged') {
      // noinspection JSIgnoredPromiseFromCall
      this.ged_openPopup(ged);
    } else {
      ged.button = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].header.addButtonContainer({
        buttonIcon: 'fa fa-star',
        buttonName: 'ESGST Decrypted Giveaways',
        isActive: true,
        isNotification: true,
        side: 'left',
        url: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('ged_t') ? 'https://www.steamgifts.com/account/settings/profile?esgst=ged' : '',
        openInNewTab: true
      });
      ged.button.nodes.outer.classList.add('esgst-hidden');
      ged.button.nodes.buttonIcon.title = getFeatureTooltip('ged', 'View your decrypted giveaways');
      if (!_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('ged_t')) {
        ged.button.nodes.outer.addEventListener('click', () => {
          ged.isPopup = true;
          this.ged_openPopup(ged);
        });
      }
      // noinspection JSIgnoredPromiseFromCall
      this.ged_getGiveaways(ged, true);
    }
    this.esgst.ged_addIcons = this.ged_addIcons.bind(this, ged);
  }
  async ged_openPopup(ged) {
    if (ged.isPopup) {
      ged.popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
        addScrollable: true,
        isTemp: true
      });
      ged.container = ged.popup.description;
      ged.context = ged.popup.scrollable;
    } else {
      ged.popup = this.esgst.sidebar.nextElementSibling;
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('removeSidebarInFeaturePages')) {
        this.esgst.sidebar.remove();
      }
      ged.popup.innerHTML = '';
      ged.container = ged.context = createElements(ged.popup, 'beforeend', [{
        type: 'div'
      }]);
      ged.context.setAttribute('data-esgst-popup', true);
    }
    const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_13__["PageHeading"].create('ged', [{
      name: 'ESGST',
      url: this.esgst.settingsUrl
    }, {
      name: 'Decrypted Giveaways',
      url: `https://www.steamgifts.com/account/settings/profile?esgst=ged`
    }]).insert(ged.popup.description || ged.popup, 'afterbegin');
    createElements(ged.context, 'atinner', [{
      attributes: {
        class: 'fa fa-circle-o-notch fa-spin'
      },
      type: 'i'
    }, {
      text: 'Loading...',
      type: 'node'
    }]);
    await this.ged_getGiveaways(ged);
    ged.context.innerHTML = '';
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gas') || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf') && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf_m') || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('mm')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gas')) {
        this.esgst.modules.giveawaysGiveawaysSorter.init(heading.nodes.outer);
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf') && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf_m')) {
        heading.nodes.outer.appendChild(this.esgst.modules.giveawaysGiveawayFilters.filters_addContainer(heading.nodes.outer, 'Ged'));
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('mm')) {
        this.esgst.modules.generalMultiManager.mm(heading.nodes.outer);
      }
    }
    ged.results = createElements(ged.context, 'beforeend', [{
      attributes: {
        class: 'esgst-text-left'
      },
      type: 'div'
    }]);
    ged.loadMoreButton = _components_Button__WEBPACK_IMPORTED_MODULE_12__["Button"].create([{
      color: 'green',
      icons: ['fa-plus'],
      name: 'Load More',
      onClick: this.ged_loadGiveaways.bind(this, ged)
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Loading more...'
    }]).insert(heading.nodes.outer, 'beforeend');
    if (ged.isPopup) {
      ged.popup.open();
    }
    ged.loadMoreButton.onClick();
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('es_ged')) {
      ged.context.addEventListener('scroll', this.ged_checkEndless.bind(this, ged));
    }
  }
  async ged_getGiveaways(ged, firstRun) {
    ged.giveaways = [];
    ged.i = 0;
    let currentGiveaways = {};
    let currentTime = Date.now();
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_7__["Lock"]('ged', {
      threshold: 300
    });
    await lock.lock();
    this.esgst.decryptedGiveaways = JSON.parse(getValue('decryptedGiveaways'));
    for (let code in this.esgst.decryptedGiveaways) {
      if (this.esgst.decryptedGiveaways.hasOwnProperty(code)) {
        if (this.esgst.decryptedGiveaways[code].html) {
          delete this.esgst.decryptedGiveaways[code].html;
        }
        let isEnded = this.esgst.decryptedGiveaways[code].timestamp <= currentTime;
        let filtered = true;
        let giveaway = this.esgst.giveaways[code];
        if (giveaway) {
          const name = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf_presetGed');
          if (name) {
            let i;
            for (i = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf_presets').length - 1; i > -1 && _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf_presets')[i].name !== name; i--) {}
            if (i > -1) {
              const preset = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('gf_presets')[i];
              filtered = this.esgst.modules.giveawaysGiveawayFilters.filters_filterItem(this.esgst.modules.giveawaysGiveawayFilters.getFilters(true), giveaway, preset.rules, true);
            }
          }
          if (filtered && isEnded && !giveaway.started) {
            await this.ged_getGiveaway(code, currentGiveaways, true);
            isEnded = this.esgst.decryptedGiveaways[code].timestamp <= currentTime;
          }
        }
        if (filtered && !isEnded) {
          ged.giveaways.push({
            code: code,
            source: this.esgst.decryptedGiveaways[code].source,
            timestamp: this.esgst.decryptedGiveaways[code].timestamp
          });
        }
      }
    }
    await lockAndSaveGiveaways(currentGiveaways, firstRun);
    await setValue('decryptedGiveaways', JSON.stringify(this.esgst.decryptedGiveaways));
    await lock.unlock();
    ged.n = ged.giveaways.length;
    if (ged.n > 0) {
      if (ged.button) {
        ged.button.nodes.outer.classList.remove('esgst-hidden');
      }
      ged.giveaways = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_14__["Utils"].sortArray(ged.giveaways, false, 'timestamp');
    }
  }
  async ged_getGiveaway(code, currentGiveaways, isEnded, source) {
    let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`/giveaway/${code}/`);
    let giveaway = (await this.esgst.modules.giveaways.giveaways_get(response.html, false, response.url, false, null, true))[0];
    if (giveaway) {
      currentGiveaways[code] = giveaway;
      if (giveaway.started && isEnded) {
        this.esgst.decryptedGiveaways[code].timestamp = giveaway.endTime;
      }
    }
    if (source) {
      this.esgst.decryptedGiveaways[code] = {
        source: source,
        timestamp: giveaway && giveaway.endTime || 0
      };
    }
    return giveaway;
  }
  async ged_loadGiveaways(ged) {
    let i = 0;
    while ((i < 5 || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('es_ged') && ged.context.scrollHeight <= ged.context.offsetHeight || (ged.results.children.length - (this.esgst.gfPopup && parseInt(this.esgst.gfPopup.filteredCount.textContent) || 0)) % 5 !== 0) && ged.i < ged.n) {
      i += 1;
      let giveaway = ged.giveaways[ged.i];
      ged.i += 1;
      let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`/giveaway/${giveaway.code}/`);
      let builtGiveaway = await buildGiveaway(response.html, response.url);
      if (!builtGiveaway || !builtGiveaway.started) {
        continue;
      }
      let context = createElements(ged.results, 'beforeend', builtGiveaway.html);
      if (giveaway.source) {
        createElements(context.getElementsByClassName('giveaway__columns')[0], 'afterbegin', [{
          attributes: {
            class: 'esgst-ged-source',
            href: `${giveaway.source.match(/\/discussion\//) ? giveaway.source : `/go/comment/${giveaway.source}`}`
          },
          text: 'Source',
          type: 'a'
        }]);
      }
      await endless_load(context, false, 'ged');
      if (ged.newGiveaways.indexOf(giveaway.code) > -1) {
        context.getElementsByClassName('giveaway__heading__name')[0].insertAdjacentText('afterbegin', `[NEW] `);
      }
    }
    if (ged.i >= ged.n) {
      ged.loadMoreButton.destroy();
    }
  }
  ged_checkEndless(ged) {
    if (ged.context.scrollTop + ged.context.offsetHeight >= ged.context.scrollHeight && !ged.loadMoreButton.isBusy) {
      ged.loadMoreButton.onClick();
    }
  }
  async ged_addIcons(ged, comments) {
    let currentGiveaways = {};
    let currentTime = Date.now();
    let lock = null;
    let hasEnded = false;
    let hasNew = false;
    for (let i = comments.length - 1; i > -1; i--) {
      let comment = comments[i];
      let icons = comment.actions.getElementsByClassName('esgst-ged-icon');
      for (let j = icons.length - 1; j > -1; j--) {
        icons[0].remove();
      }
      if (!comment.displayState) continue;
      let links = comment.displayState.querySelectorAll(`[href^="ESGST-"]`);
      for (let j = links.length - 1; j > -1; j--) {
        let code = links[j].getAttribute('href').match(/ESGST-(.+)/)[1];
        if (!lock) {
          lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_7__["Lock"]('ged', {
            threshold: 300
          });
          await lock.lock();
          this.esgst.decryptedGiveaways = JSON.parse(getValue('decryptedGiveaways'));
        }
        code = this.ged_decryptCode(code);
        let isEnded = this.esgst.decryptedGiveaways[code] && currentTime > this.esgst.decryptedGiveaways[code].timestamp;
        let isNew = false;
        let isStarted = this.esgst.giveaways[code] && this.esgst.giveaways[code].started;
        if (!this.esgst.decryptedGiveaways[code] || isEnded && !isStarted) {
          let giveaway = await this.ged_getGiveaway(code, currentGiveaways, false, comment.id || window.location.href);
          ged.newGiveaways.push(code);
          if (giveaway) {
            isEnded = giveaway.ended;
            isStarted = giveaway.started;
          }
        }
        if (isEnded) {
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('ged_b')) {
            hasEnded = true;
          }
        } else {
          hasNew = isNew = true;
        }
        createElements(comment.actions, 'beforeend', [{
          attributes: {
            class: `esgst-ged-icon${isEnded ? ' esgst-red' : isStarted ? isNew ? ' esgst-green' : '' : ' esgst-yellow'}`,
            href: `/giveaway/${code}/`,
            title: getFeatureTooltip('ged', 'ESGST Decrypted Giveaway')
          },
          type: 'a',
          children: [{
            attributes: {
              class: 'fa fa-star'
            },
            type: 'i'
          }]
        }]);
      }
    }
    if (lock) {
      await lockAndSaveGiveaways(currentGiveaways);
      await setValue('decryptedGiveaways', JSON.stringify(this.esgst.decryptedGiveaways));
      await lock.unlock();
    }
    if (ged.button && (hasEnded || hasNew)) {
      ged.button.nodes.outer.classList.remove('esgst-hidden');
      if (hasNew) {
        ged.button.nodes.buttonIcon.classList.add('esgst-positive');
      }
    }
  }
  ged_encryptCode(code) {
    let alphabet, encrypted, i, n, rotated, rotation;
    alphabet = 'NOPQRSTUVWXYZABCDEFGHIJKLM';
    switch (Math.floor(Math.random() * 4)) {
      case 0:
        rotated = rot(code, 13);
        encrypted = '';
        for (i = 0, n = rotated.length; i < n; ++i) {
          encrypted += rotated.charCodeAt(i).toString(16);
        }
        return encrypted;
      case 1:
        rotated = rot(code, 13);
        encrypted = '';
        for (i = 0, n = rotated.length; i < n; ++i) {
          encrypted += rotated.charCodeAt(i).toString(16);
        }
        encrypted = encrypted.replace(/\d/g, n => {
          return alphabet[parseInt(n)];
        });
        return encrypted;
      case 2:
        rotation = Math.ceil(Math.random() * 25);
        rotated = rot(code, rotation);
        encrypted = '';
        for (i = 0, n = rotated.length; i < n; ++i) {
          encrypted += rotated.charCodeAt(i).toString(16);
        }
        encrypted += rotation.toString(16);
        return encrypted;
      case 3:
        rotation = Math.ceil(Math.random() * 25);
        rotated = rot(code, rotation);
        encrypted = '';
        for (i = 0, n = rotated.length; i < n; ++i) {
          encrypted += rotated.charCodeAt(i).toString(16);
        }
        encrypted += rotation.toString(16);
        encrypted = encrypted.replace(/\d/g, n => {
          return alphabet[parseInt(n)];
        });
        return encrypted;
    }
  }
  ged_decryptCode(encrypted) {
    let alphabet, code, rotation;
    alphabet = 'NOPQRSTUVWXYZABCDEFGHIJKLM';
    encrypted = encrypted.replace(/-/g, '').replace(/[A-Z]/g, n => {
      return `${alphabet.indexOf(n)}`;
    });
    rotation = encrypted.slice(10);
    if (rotation) {
      rotation = parseInt(rotation, 16);
    } else {
      rotation = 13;
    }
    code = '';
    encrypted.slice(0, 10).match(/../g).forEach(n => {
      code += String.fromCharCode(parseInt(n, 16));
    });
    return rot(code, 26 - rotation);
  }
  async ged_saveGiveaways(context, source) {
    let codes = [];
    let elements = context.querySelectorAll(`[href^="ESGST-"]`);
    for (let i = 0, n = elements.length; i < n; i++) {
      let encryptedCode = elements[i].getAttribute('href').match(/ESGST-(.+)/)[1];
      codes.push(this.ged_decryptCode(encryptedCode));
    }
    if (!codes.length) {
      return;
    }
    let ged = {
      giveaways: {}
    };
    this.esgst.decryptedGiveaways = JSON.parse(getValue('decryptedGiveaways'));
    let promises = [];
    codes.forEach(code => {
      if (this.esgst.decryptedGiveaways[code]) {
        return;
      }
      let giveaway = this.esgst.giveaways[code];
      if (giveaway && giveaway.endTime) {
        this.esgst.decryptedGiveaways[code] = {
          source: source,
          timestamp: giveaway.endTime
        };
        return;
      }
      promises.push(this.ged_getGiveaway(code, ged.giveaways, false, source));
    });
    await Promise.all(promises);
    await setValue('decryptedGiveaways', JSON.stringify(this.esgst.decryptedGiveaways));
    await lockAndSaveGiveaways(ged.giveaways);
  }
}
const giveawaysGiveawayEncrypterDecrypter = new GiveawaysGiveawayEncrypterDecrypter();


/***/ }),
/* 309 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayErrorSearchLinks", function() { return giveawaysGiveawayErrorSearchLinks; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(144);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




const getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_2__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_2__["common"]);
class GiveawaysGiveawayErrorSearchLinks extends _class_Module__WEBPACK_IMPORTED_MODULE_1__["Module"] {
  constructor() {
    super();
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "init", () => {
      const table = document.getElementsByClassName('table--summary')[0];
      if (!this.esgst.giveawayPath || !table) return;
      const name = encodeURIComponent(table.getElementsByClassName('table__column__secondary-link')[0].textContent);
      _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(table.getElementsByClassName('table__row-outer-wrap')[0], 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
        className: "table__row-outer-wrap",
        title: getFeatureTooltip('gesl')
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
        className: "table__row-inner-wrap"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
        className: "table__column--width-small"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
        className: "esgst-bold"
      }, "Search Links")), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
        className: "table__column--width-fill esgst-gesl"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: `https://www.steamgifts.com/giveaways/search?q=${name}`,
        target: "_blank",
        rel: "noreferrer",
        title: "Search for active giveaways"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("img", {
        src: this.esgst.sgIcon
      }))), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: `http://store.steampowered.com/search/?term=${name}`,
        target: "_blank",
        rel: "noreferrer",
        title: "Search on Steam"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-steam"
      })), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: `https://steamdb.info/search/?a=app&q=${name}`,
        target: "_blank",
        rel: "noreferrer",
        title: "Search on SteamDB"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("img", {
        src: "https://steamdb.info/static/logos/16px.png"
      }))), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: `https://barter.vg/search?q=${name}`,
        target: "_blank",
        rel: "noreferrer",
        title: "Search on Barter.vg"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("img", {
        src: "https://bartervg.com/imgs/ico/barter/favicon-16x16.png"
      })))))));
    });
    this.info = {
      // by Revadike
      // eslint-disable-next-line react/display-name
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "If you cannot access a giveaway because of many different reasons, a \"Search Links\" row is added to the table of the", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaway/FN2PK/"
      }, "error"), " page containing 4 links that allow you to search for the game elsewhere:"), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "A SteamGifts icon that allows you to search for open giveaways of the game on SteamGifts."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-steam"
      }), " allows you to search for the game on Steam."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("img", {
        src: "https://steamdb.info/static/logos/16px.png"
      })), ' ', "allows you to search for the game on SteamDB."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("img", {
        src: "https://bartervg.com/imgs/ico/barter/favicon-16x16.png"
      })), ' ', "allows you to search for the game on Barter.vg."))),
      id: 'gesl',
      name: 'Giveaway Error Search Links',
      sg: true,
      type: 'giveaways'
    };
  }
}
const giveawaysGiveawayErrorSearchLinks = new GiveawaysGiveawayErrorSearchLinks();


/***/ }),
/* 310 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsCommentFilters", function() { return commentsCommentFilters; });
/* harmony import */ var _Filters__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(311);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




class CommentsCommentFilters extends _Filters__WEBPACK_IMPORTED_MODULE_0__["Filters"] {
  constructor() {
    super('cf');
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Allows you to filter comments.")),
      features: {
        cf_m: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Allows you to hide multiple comments in a page using many different filters."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a toggle switch with a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
            className: "fa fa-sliders"
          }), ") to the main page heading of any comment page. The switch allows you to turn the filters on/off and the button allows you to manage your presets."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a collapsible panel below the same main page heading that allows you to change/save the rules of a preset. The filters are separated in 2 categories:"), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Basic filters are related to a numeric value (such as the length of a comment) and have a slider that you can use to set the range of the filter (any comments that do not apply to the range will be hidden)."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Type filters are related to a boolean value (such as whether or not a comment is a bump comment) and have a checkbox that changes states when you click on it. The checkbox has 3 states:"), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "\"Show all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
            className: "fa fa-check-square"
          }), ") does not hide any comments that apply to the filter (this is the default state)."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "\"Show only\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
            className: "fa fa-square"
          }), ") hides any comments that do not apply to the filter."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "\"Hide all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
            className: "fa fa-square-o"
          }), ") hides any comments that apply to the filter."))), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "A preset contains all of your rules and can be saved to be reused later. You can save as many presets as you want."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a text in parenthesis to the pagination of the page showing how many comments in the page are being filtered by the filters.")),
          features: {
            cf_m_f: {
              name: 'Fix filter bar at the top of the page.',
              sg: true
            },
            cf_m_b: {
              name: 'Hide basic filters.',
              sg: true,
              st: true
            },
            cf_m_a: {
              name: 'Hide advanced filters.',
              sg: true,
              st: true
            },
            cf_bump: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Allows you to filter bump comments.")),
              name: 'Bump',
              sg: true,
              st: true
            },
            cf_length: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Allows you to filter comments by their length.")),
              name: 'Length',
              sg: true,
              st: true
            },
            cf_words: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Allows you to filter comments containing certain words.")),
              name: 'Words',
              sg: true,
              st: true
            }
          },
          name: 'Multiple Filters',
          sg: true,
          st: true
        }
      },
      id: 'cf',
      name: 'Comment Filters',
      sg: true,
      st: true,
      type: 'comments'
    };
  }
  async init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('cf_m') && (_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.commentsPath || _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].common.isCurrentPath('Messages'))) {
      if (!_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.hasAddedFilterContainer) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.style.insertAdjacentText('beforeend', `
					.esgst-gf-container {
						position: ${_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('cf_m_f') ? 'sticky' : 'static'};
						top: ${_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.commentsTop}px;
					}
				`);
      }
      _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].common.createHeadingButton({
        element: this.filters_addContainer(_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.mainPageHeading),
        id: 'cf'
      });
    }
  }
  getFilters() {
    return {
      bump: {
        check: true,
        name: 'Bump',
        type: 'boolean'
      },
      length: {
        check: true,
        minValue: 0,
        name: 'Length',
        type: 'integer'
      },
      words: {
        check: true,
        list: true,
        name: 'Words',
        type: 'string'
      }
    };
  }
}
const commentsCommentFilters = new CommentsCommentFilters();


/***/ }),
/* 311 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Filters", function() { return Filters; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_Checkbox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(246);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(208);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(210);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(211);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(219);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(132);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(212);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(144);
/* harmony import */ var _Sync__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(241);




















const createElements = _Common__WEBPACK_IMPORTED_MODULE_18__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_18__["common"]),
  createFadeMessage = _Common__WEBPACK_IMPORTED_MODULE_18__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_18__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_18__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_18__["common"]),
  setSetting = _Common__WEBPACK_IMPORTED_MODULE_18__["common"].setSetting.bind(_Common__WEBPACK_IMPORTED_MODULE_18__["common"]);
class Filters extends _class_Module__WEBPACK_IMPORTED_MODULE_9__["Module"] {
  constructor(id) {
    super();
    this.id = id;
    this.isProgrammaticChange = false;
  }
  getFilters(popup) {}
  addSingleButton(icon) {
    this.singleButton = _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.createHeadingButton({
      id: `${this.id}_s_s`,
      icons: [icon],
      title: 'Hide / unhide items filtered by single filters temporarily'
    });
    this.singleButton.classList.add('esgst-hidden');
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(this.singleButton, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", null));
    this.singleSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_15__["ToggleSwitch"](this.singleButton.firstElementChild, null, true, '', false, false, null, true);
    this.singleSwitch.onChange = () => this.toggleFilteredItems();
    _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(this.singleButton, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      ref: ref => this.singleCounter = ref
    }, "0"));
  }
  toggleFilteredItems() {
    const elements = document.querySelectorAll(`[data-esgst-not-filterable="${this.id}"]`);
    if (this.singleSwitch.value) {
      for (const element of elements) {
        element.classList.add('esgst-hidden');
      }
    } else {
      for (const element of elements) {
        element.classList.remove('esgst-hidden');
      }
    }
  }
  updateSingleCounter(count = 1) {
    if (!this.singleCounter) return;
    const newCount = parseInt(this.singleCounter.textContent) + count;
    this.singleCounter.textContent = newCount;
    if (newCount > 0) {
      this.singleButton.classList.remove('esgst-hidden');
    }
  }
  filters_addContainer(heading, popup) {
    const obj = {
      basicFilters: {},
      id: this.id,
      key: `${this.id}_presets`,
      popup: popup,
      rules: null,
      type: popup || (this.esgst.gamePath ? 'Games' : this.esgst.groupPath ? 'Groups' : window.location.search.match(/type/) ? {
        wishlist: 'Wishlist',
        recommended: 'Recommended',
        group: 'Group',
        new: 'New'
      }[window.location.search.match(/type=(wishlist|recommended|group|new)/)[1]] : this.esgst.createdPath ? 'Created' : this.esgst.enteredPath ? 'Entered' : this.esgst.wonPath ? 'Won' : this.esgst.userPath ? 'User' : '')
    };
    obj.filters = this.getFilters(popup);
    if (popup) {
      this.esgst[`${this.id}Popup`] = obj;
    } else {
      this.esgst[this.id] = obj;
    }
    const headingButton = document.createElement('div');
    headingButton.className = 'esgst-heading-button esgst-gf-heading-button';
    headingButton.id = `esgst-${obj.id}`;
    headingButton.setAttribute('data-draggable-id', obj.id);
    createElements(headingButton, 'atinner', [{
      attributes: {
        class: 'esgst-gf-toggle-switch'
      },
      type: 'span'
    }, {
      attributes: {
        class: 'fa fa-sliders',
        title: getFeatureTooltip(obj.id, 'Manage presets')
      },
      type: 'i'
    }]);
    const toggleSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_15__["ToggleSwitch"](headingButton.firstElementChild, `${obj.id}_enable${obj.type}`, true, '', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_enable${obj.type}`));
    const presetButton = headingButton.lastElementChild;
    toggleSwitch.onEnabled = this.filters_filter.bind(this, obj);
    toggleSwitch.onDisabled = this.filters_filter.bind(this, obj, true);
    obj.container = createElements(heading, 'afterend', [{
      attributes: {
        class: 'esgst-gf-container'
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'esgst-gf-box'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'esgst-gf-filters esgst-hidden'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'esgst-gf-left-panel'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'esgst-gf-box warning esgst-hidden'
              },
              type: 'div'
            }, {
              attributes: {
                class: 'esgst-gf-basic-filters'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'esgst-gf-number-filters'
                },
                type: 'div'
              }, {
                attributes: {
                  class: 'esgst-gf-boolean-filters'
                },
                type: 'div'
              }, {
                attributes: {
                  class: 'esgst-gf-string-filters'
                },
                type: 'div'
              }]
            }, {
              type: 'div',
              children: [{
                text: 'Advanced ',
                type: 'node'
              }, {
                attributes: {
                  class: 'fa fa-question-circle',
                  title: `Advanced filters offer more options and flexibility, but may be more complex to understand and use. When you change settings in the basic filters, they will also be changed in the advanced ones, and vice-versa. But the two types are not compatible backwards: basic -> advanced conversion works fine, but advanced -> basic conversion does not, and will result in the loss of any settings that are exclusive to the advanced filter. Bear this in mind when saving a preset, since the last applied preset will be saved.`
                },
                type: 'i'
              }]
            }, {
              attributes: {
                class: 'esgst-clickable'
              },
              type: 'div',
              children: [{
                text: 'Manual ',
                type: 'node'
              }, {
                attributes: {
                  class: 'fa fa-book'
                },
                type: 'i'
              }]
            }, {
              attributes: {
                class: 'esgst-gf-advanced-filters'
              },
              type: 'div'
            }]
          }, {
            attributes: {
              class: 'esgst-gf-right-panel'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'esgst-gf-steamgifts-filters'
              },
              type: 'div',
              children: [{
                type: 'div',
                children: [{
                  attributes: {
                    class: 'esgst-bold'
                  },
                  text: `SteamGifts Filters:`,
                  type: 'span'
                }]
              }]
            }, {
              type: 'br'
            }, {
              attributes: {
                class: 'esgst-gf-preset-panel'
              },
              type: 'div',
              children: [{
                type: 'div',
                children: [{
                  attributes: {
                    class: 'esgst-bold'
                  },
                  text: `Preset:`,
                  type: 'span'
                }, {
                  attributes: {
                    class: 'fa fa-question-circle',
                    title: `If you have both the basic and the advanced filters enabled, the last applied preset will be saved. For example, if the last setting you altered was in the basic filters, it will save the basic preset, and if the last setting you altered was in the advanced filters, it will save the advanced preset. The two presets are not compatible, so they will overwrite each other. Be careful with this, as you might lose some settings.`
                  },
                  type: 'i'
                }]
              }, {
                attributes: {
                  class: 'form__input-small',
                  type: 'text'
                },
                type: 'input'
              }, {
                attributes: {
                  class: 'esgst-description esgst-bold'
                },
                type: 'div'
              }, {
                attributes: {
                  class: 'form__row__error esgst-hidden'
                },
                type: 'div',
                children: [{
                  attributes: {
                    class: 'fa fa-exclamation-circle'
                  },
                  type: 'i'
                }, {
                  text: ' Please enter a name for the preset.',
                  type: 'node'
                }]
              }, {
                attributes: {
                  class: 'esgst-description'
                },
                text: 'The name of the preset.',
                type: 'div'
              }]
            }]
          }]
        }]
      }, {
        attributes: {
          class: 'esgst-gf-button'
        },
        type: 'div',
        children: [{
          text: 'Expand',
          type: 'span'
        }, {
          attributes: {
            class: 'esgst-hidden'
          },
          text: 'Collapse',
          type: 'span'
        }, {
          text: ` filters (`,
          type: 'node'
        }, {
          text: '0',
          type: 'span'
        }, {
          text: ' filtered ',
          type: 'node'
        }, ...(obj.id === 'gf' ? [{
          text: '- ',
          type: 'node'
        }, {
          text: '0',
          type: 'span'
        }, {
          text: 'P required to enter all unfiltered ',
          type: 'node'
        }] : []), {
          text: '- ',
          type: 'node'
        }, {
          type: 'span'
        }, {
          text: `)`,
          type: 'node'
        }]
      }]
    }]);
    if (!obj.popup && !_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.hasAddedFilterContainer) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.hasAddedFilterContainer = true;
      this.esgst.commentsTop += 24;
    }
    const box = obj.container.firstElementChild;
    obj.filtersPanel = box.firstElementChild;
    const leftPanel = obj.filtersPanel.firstElementChild;
    obj.warningsPanel = leftPanel.firstElementChild;
    const basicFilters = obj.warningsPanel.nextElementSibling;
    const numberFilters = basicFilters.firstElementChild;
    const booleanFilters = numberFilters.nextElementSibling;
    const stringFilters = booleanFilters.nextElementSibling;
    const advancedFilters = leftPanel.lastElementChild;
    const rightPanel = leftPanel.nextElementSibling;
    const sgFilters = rightPanel.firstElementChild;
    const presetPanel = rightPanel.lastElementChild;
    obj.presetInput = presetPanel.firstElementChild.nextElementSibling;
    obj.presetMessage = obj.presetInput.nextElementSibling;
    obj.presetWarning = obj.presetMessage.nextElementSibling;
    obj.button = box.nextElementSibling;
    obj.expandButton = obj.button.firstElementChild;
    obj.collapseButton = obj.expandButton.nextElementSibling;
    obj.filteredCount = obj.collapseButton.nextElementSibling;
    if (obj.id === 'gf') {
      obj.pointsCount = obj.filteredCount.nextElementSibling;
      obj.presetDisplay = obj.pointsCount.nextElementSibling;
    } else {
      obj.presetDisplay = obj.filteredCount.nextElementSibling;
    }
    advancedFilters.previousElementSibling.addEventListener('click', this.filter_manual.bind(this, {}));
    _components_Button__WEBPACK_IMPORTED_MODULE_16__["Button"].create([{
      template: 'success',
      name: 'Save',
      onClick: this.filters_savePreset.bind(this, obj)
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Saving...'
    }]).insert(presetPanel, 'beforeend');
    let name = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_preset${obj.type}`);
    if (name) {
      let i;
      const presets = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(obj.key);
      for (i = presets.length - 1; i > -1 && presets[i].name !== name; i--) {}
      if (i > -1) {
        obj.rules = presets[i].rules;
      }
    }
    if (!obj.rules) {
      name = `Default${obj.type}`;
      const preset = {
        name,
        rules: {}
      };
      const presets = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(obj.key);
      presets.push(preset);
      setSetting([{
        id: `${obj.id}_preset${obj.type}`,
        value: name
      }, {
        id: obj.key,
        value: presets
      }]);
      obj.rules = {};
    }
    obj.rules_save = obj.rules;
    obj.presetDisplay.textContent = obj.presetInput.value = name;
    presetButton.addEventListener('click', this.filters_openPresetPopup.bind(this, obj));
    obj.button.addEventListener('click', this.filters_toggleFilters.bind(this, obj));
    const filters = [];
    for (const key in obj.filters) {
      if (obj.filters.hasOwnProperty(key)) {
        const filter = obj.filters[key];
        const rule = {
          id: key,
          label: filter.name
        };
        let context;
        let checkbox;
        let textInput;
        let maxInput;
        let minInput;
        switch (filter.type) {
          case 'boolean':
            rule.input = 'radio';
            rule.operators = ['equal'];
            rule.type = 'boolean';
            rule.values = ['true', 'false'];
            if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_b`)) {
              const attributes = {};
              if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_${key}`) || !filter.check) {
                attributes.class = 'esgst-hidden';
              }
              context = createElements(booleanFilters, 'beforeend', [{
                attributes,
                type: 'div',
                children: [{
                  type: 'span'
                }, {
                  attributes: {
                    class: 'esgst-gf-filter-count',
                    title: 'Number of items this rule is hiding'
                  },
                  type: 'span'
                }, {
                  text: filter.name,
                  type: 'node'
                }]
              }]);
              checkbox = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_5__["Checkbox"](context.firstElementChild, 'enabled', true);
              obj.basicFilters[rule.id] = {
                data: {
                  basicCount: context.firstElementChild.nextElementSibling
                },
                input: rule.input,
                operator: 'equal',
                type: rule.type,
                filterType: 'boolean',
                checkbox: checkbox
              };
              checkbox.onChange = this.filters_basicToAdv.bind(this, obj);
            }
            break;
          case 'integer':
          case 'double':
            rule.operators = ['equal', 'not_equal', 'less', 'less_or_equal', 'greater', 'greater_or_equal', 'is_null', 'is_not_null'];
            if (filter.date) {
              rule.input = (rule, name) => {
                return `
									<input class="form-control" name="${name}" type="date">
								`;
              };
              rule.type = 'date';
              if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_b`)) {
                const attributes = {};
                if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_${key}`) || !filter.check) {
                  attributes.class = 'esgst-hidden';
                }
                context = createElements(numberFilters, 'beforeend', [{
                  attributes,
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'esgst-gf-filter-count',
                      title: 'Number of items this rule is hiding'
                    },
                    type: 'span'
                  }, {
                    text: filter.name,
                    type: 'node'
                  }, {
                    type: 'span',
                    children: [{
                      attributes: {
                        type: 'date'
                      },
                      type: 'input'
                    }, {
                      text: '-',
                      type: 'node'
                    }, {
                      attributes: {
                        type: 'date'
                      },
                      type: 'input'
                    }]
                  }]
                }]);
              }
            } else {
              const step = filter.type === 'integer' ? '1' : '0.01';
              rule.input = (rule, name) => {
                return `
									<input type="number" class="form-control" max="${filter.maxValue}" min="${filter.minValue}" name="${name}" step="${step}" novalidate>
								`;
              };
              rule.type = filter.type;
              rule.validation = {
                max: filter.maxValue,
                min: filter.minValue,
                step: filter.type === 'integer' ? '1' : 'any'
              };
              if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_b`)) {
                const attributes = {};
                if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_${key}`) || !filter.check) {
                  attributes.class = 'esgst-hidden';
                }
                context = createElements(numberFilters, 'beforeend', [{
                  attributes,
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'esgst-gf-filter-count',
                      title: 'Number of items this rule is hiding'
                    },
                    type: 'span'
                  }, {
                    text: filter.name,
                    type: 'node'
                  }, {
                    type: 'span',
                    children: [{
                      attributes: {
                        class: 'form-control',
                        type: 'number',
                        max: filter.maxValue,
                        min: filter.minValue,
                        step,
                        novalidate: ''
                      },
                      type: 'input'
                    }, {
                      text: '-',
                      type: 'node'
                    }, {
                      attributes: {
                        class: 'form-control',
                        type: 'number',
                        max: filter.maxValue,
                        min: filter.minValue,
                        step,
                        novalidate: ''
                      },
                      type: 'input'
                    }]
                  }]
                }]);
              }
            }
            if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_b`)) {
              minInput = context.lastElementChild.firstElementChild;
              maxInput = minInput.nextElementSibling;
              obj.basicFilters[rule.id] = {
                data: {
                  basicCount: context.firstElementChild
                },
                input: rule.input,
                type: rule.type,
                filterType: 'number',
                maxInput: maxInput,
                minInput: minInput,
                maxValue: filter.maxValue,
                minValue: filter.minValue
              };
              maxInput.addEventListener('change', this.filters_basicToAdv.bind(this, obj));
              minInput.addEventListener('change', this.filters_basicToAdv.bind(this, obj));
            }
            break;
          case 'string':
            rule.input = 'text';
            rule.operators = ['contains', 'not_contains'];
            rule.placeholder = `Item1, Item2, ...`;
            rule.type = 'string';
            if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_b`)) {
              const attributes = {};
              if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_${key}`) || !filter.check) {
                attributes.class = 'esgst-hidden';
              }
              context = createElements(stringFilters, 'beforeend', [{
                attributes,
                type: 'div',
                children: [{
                  type: 'span',
                  children: [{
                    type: 'span'
                  }, {
                    text: ` ${filter.name}`,
                    type: 'node'
                  }]
                }, {
                  attributes: {
                    class: 'esgst-gf-filter-count',
                    title: 'Number of items this rule is hiding'
                  },
                  type: 'span'
                }, {
                  attributes: {
                    placeholder: `Item1, Item2, ...`,
                    type: 'text'
                  },
                  type: 'input'
                }]
              }]);
              checkbox = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_5__["Checkbox"](context.firstElementChild.firstElementChild, 'enabled', true);
              textInput = context.lastElementChild;
              obj.basicFilters[rule.id] = {
                data: {
                  basicCount: context.firstElementChild.nextElementSibling
                },
                id: rule.id,
                input: rule.input,
                type: rule.type,
                filterType: 'string',
                checkbox: checkbox,
                textInput: textInput
              };
              checkbox.onChange = this.filters_basicToAdv.bind(this, obj);
              textInput.addEventListener('change', this.filters_basicToAdv.bind(this, obj));
            }
            break;
        }
        if (!rule.data) {
          rule.data = {};
        }
        rule.data.check = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_${rule.id}`) && filter.check;
        filters.push(rule);
      }
    }
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_b`)) {
      createElements(stringFilters, 'beforeend', [{
        attributes: {
          class: 'esgst-gf-legend-panel'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'esgst-bold'
          },
          text: `Legend:`,
          type: 'div'
        }, {
          type: 'div',
          children: [{
            attributes: {
              class: 'fa fa-check-square'
            },
            type: 'i'
          }, {
            text: ' - Show All',
            type: 'node'
          }]
        }, {
          type: 'div',
          children: [{
            attributes: {
              class: 'fa fa-square-o'
            },
            type: 'i'
          }, {
            text: ' - Hide All',
            type: 'node'
          }]
        }, {
          type: 'div',
          children: [{
            attributes: {
              class: 'fa fa-square'
            },
            type: 'i'
          }, {
            text: ' - Show Only',
            type: 'node'
          }]
        }]
      }]);
      if (obj.rules.rules && obj.rules.rules.length) {
        this.filters_applyBasic(obj, obj.rules);
      }
    }
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_a`)) {
      const templates = {
        group: ({
          group_id,
          level,
          conditions,
          icons,
          settings,
          translate
        }) => `
					<div id="${group_id}" class="rules-group-container">
						<div class="rules-group-header">
							<span class="esgst-gf-filter-count" title="Number of items this group is hiding">0</span>

							<div class="btn-group pull-right group-actions">
								<button type="button" class="btn btn-xs btn-success" data-add="rule">
									<i class="${icons.add_rule}"></i> ${translate("add_rule")}
								</button>

								${settings.allow_groups === -1 || settings.allow_groups >= level ? `
									<button type="button" class="btn btn-xs btn-success" data-add="group">
										<i class="${icons.add_group}"></i> ${translate("add_group")}
									</button>` : ''}

								${level > 1 ? `
									<button type="button" class="btn btn-xs btn-primary" data-pause="group">
										<i class="${icons.pause_group}"></i> ${translate("pause_group")}
									</button>
									<button type="button" class="btn btn-xs btn-primary" data-resume="group">
										<i class="${icons.resume_group}"></i> ${translate("resume_group")}
									</button>
									<button type="button" class="btn btn-xs btn-danger" data-delete="group">
										<i class="${icons.remove_group}"></i> ${translate("delete_group")}
									</button>` : ''}
							</div>

							<div class="btn-group group-conditions">
								${conditions.map(condition => `
									<label class="btn btn-xs btn-default">
										<input type="radio" name="${group_id}_cond" value="${condition}">
										${translate("conditions", condition)}
									</label>
								`).join('')}
							</div>

							${settings.display_errors ? `
								<div class="error-container">
									<i class="${icons.error}"></i>
								</div>` : ''}
						</div>

						<div class="rules-group-body">
							<div class="rules-list"></div>
						</div>
					</div>
				`,
        rule: ({
          rule_id,
          icons,
          settings,
          translate
        }) => `
					<div id="${rule_id}" class="rule-container">
						<div class="rule-header">
							<div class="btn-group pull-right rule-actions">
								<button type="button" class="btn btn-xs btn-primary" data-pause="rule">
									<i class="${icons.pause_rule}"></i> ${translate("pause_rule")}
								</button>
								<button type="button" class="btn btn-xs btn-primary" data-resume="rule">
									<i class="${icons.resume_rule}"></i> ${translate("resume_rule")}
								</button>
								<button type="button" class="btn btn-xs btn-danger" data-delete="rule">
									<i class="${icons.remove_rule}"></i> ${translate("delete_rule")}
								</button>
							</div>
						</div>

						${settings.display_errors ? `
							<div class="error-container">
								<i class="${icons.error}"></i>
							</div>` : ''}

						<span class="esgst-gf-filter-count" title="Number of items this rule is hiding">0</span>
						<div class="rule-filter-container"></div>
						<div class="rule-operator-container"></div>
						<div class="rule-value-container"></div>
					</div>
				`,
        filterSelect: ({
          rule,
          filters,
          icons,
          settings,
          translate
        }) => {
          let optgroup = null;
          return `
						<select class="form-control" name="${rule.id}_filter">
							${settings.display_empty_filter ? `
								<option value="-1">${settings.select_placeholder}</option>` : ''}

							${filters.map(filter => {
            var _filter$data;
            const className = (_filter$data = filter.data) !== null && _filter$data !== void 0 && _filter$data.check ? '' : 'class="esgst-hidden"';
            let out = '';
            if (optgroup !== filter.optgroup) {
              if (optgroup !== null) out += '</optgroup>';
              optgroup = filter.optgroup;
              if (optgroup !== null) {
                out += `<optgroup label="${translate(settings.optgroups[optgroup])}">`;
              }
            }
            out += `<option ${className} value="${filter.id}" ${filter.icon ? `data-icon="${filter.icon}"` : ''}>
									${translate(filter.label)}
								</option>`;
            return out;
          }).join('')}

							${optgroup !== null ? '</optgroup>' : ''}
						</select>
					`;
        }
      };
      const options = {
        filters: filters,
        icons: {
          add_group: 'fa fa-plus',
          add_rule: 'fa fa-plus',
          pause_group: 'fa fa-pause',
          pause_rule: 'fa fa-pause',
          remove_group: 'fa fa-times',
          remove_rule: 'fa fa-times',
          resume_group: 'fa fa-play',
          resume_rule: 'fa fa-play',
          error: 'fa fa-exclamation'
        },
        plugins: {
          ['bt-checkbox']: {
            font: 'fontawesome'
          },
          ['not-group']: {
            icon_checked: 'fa fa-check-square-o',
            icon_unchecked: 'fa fa-square-o'
          },
          // Requires interactjs
          ['sortable']: {
            icon: 'fa fa-arrows'
          }
        },
        sort_filters: true,
        lang: {
          pause_group: 'Pause',
          pause_rule: 'Pause',
          resume_group: 'Resume',
          resume_rule: 'Resume'
        },
        templates: templates
      };
      if (obj.rules.rules && obj.rules.rules.length) {
        options.rules = obj.rules;
      }
      window.$(advancedFilters).queryBuilder(options);
      obj.builder = window.$(advancedFilters)[0].queryBuilder;
      [obj.rules, obj.rules_save] = this.filters_changeRules(obj);
      obj.builder.$el.on('click.queryBuilder', `[data-pause=group]`, event => {
        const group = event.currentTarget.closest('.rules-group-container');
        group.setAttribute('data-esgst-paused', true);
        this.onRulesChanged(obj, {});
      });
      obj.builder.$el.on('click.queryBuilder', `[data-resume=group]`, event => {
        const group = event.currentTarget.closest('.rules-group-container');
        group.removeAttribute('data-esgst-paused');
        this.onRulesChanged(obj, {});
      });
      obj.builder.$el.on('click.queryBuilder', `[data-pause=rule]`, event => {
        const rule = event.currentTarget.closest('.rule-container');
        rule.setAttribute('data-esgst-paused', true);
        this.onRulesChanged(obj, {});
      });
      obj.builder.$el.on('click.queryBuilder', `[data-resume=rule]`, event => {
        const rule = event.currentTarget.closest('.rule-container');
        rule.removeAttribute('data-esgst-paused');
        this.onRulesChanged(obj, {});
      });
      obj.builder.on('rulesChanged.queryBuilder', () => {
        if (!this.isProgrammaticChange) {
          this.onRulesChanged(obj, {});
        }
      });
      obj.builder.on('getRules.queryBuilder.filter', this.filters_changeRules.bind(this, obj));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_b`)) {
      basicFilters.classList.add('esgst-hidden');
      basicFilters.nextElementSibling.classList.add('esgst-hidden');
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_a`)) {
      advancedFilters.classList.add('esgst-hidden');
      basicFilters.nextElementSibling.classList.add('esgst-hidden');
    }
    if (obj.id === 'gf') {
      [{
        id: 'filter_os',
        key: 'os',
        name: 'OS'
      }, {
        id: 'filter_giveaways_exist_in_account',
        key: 'alreadyOwned',
        name: 'Already Owned'
      }, {
        id: 'filter_giveaways_missing_base_game',
        key: 'dlcMissingBase',
        name: 'DLC Missing Base'
      }, {
        id: 'filter_giveaways_level',
        key: 'aboveLevel',
        name: 'Above Level'
      }, {
        id: 'filter_giveaways_additional_games',
        key: 'manuallyFiltered',
        name: 'Manually Filtered'
      }].forEach(filter => {
        if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_${filter.key}`)) return;
        const children = [{
          text: filter.name,
          type: 'node'
        }];
        if (filter.key === 'os') {
          // @ts-ignore
          children.push({
            type: 'select',
            children: [{
              attributes: {
                value: '0'
              },
              text: 'All',
              type: 'option'
            }, {
              attributes: {
                value: '1'
              },
              text: 'Windows',
              type: 'option'
            }, {
              attributes: {
                value: '2'
              },
              text: 'Linux',
              type: 'option'
            }, {
              attributes: {
                value: '3'
              },
              text: 'Mac',
              type: 'option'
            }]
          });
        }
        const sgFilter = createElements(sgFilters, 'beforeend', [{
          attributes: {
            class: 'esgst-gf-category-filter'
          },
          type: 'div',
          children: [{
            type: 'span',
            children
          }, {
            attributes: {
              class: 'fa fa-circle-o-notch fa-spin esgst-hidden'
            },
            type: 'i'
          }, {
            attributes: {
              class: 'fa fa-check esgst-green esgst-hidden'
            },
            type: 'i'
          }]
        }]);
        const check = sgFilter.lastElementChild;
        const spinning = check.previousElementSibling;
        if (filter.key === 'os') {
          const select = sgFilter.firstElementChild.firstElementChild;
          select.value = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(filter.id);
          select.addEventListener('change', async () => {
            check.classList.add('esgst-hidden');
            spinning.classList.remove('esgst-hidden');
            await setSetting(filter.id, select.value);
            await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].post('/account/settings/giveaways', {
              data: `filter_os=${_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('filter_os')}&filter_giveaways_exist_in_account=${_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('filter_giveaways_exist_in_account')}&filter_giveaways_missing_base_game=${_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('filter_giveaways_missing_base_game')}&filter_giveaways_level=${_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('filter_giveaways_level')}&filter_giveaways_additional_games=${_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('filter_giveaways_additional_games')}&xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_12__["Session"].xsrfToken}`
            });
            spinning.classList.add('esgst-hidden');
            check.classList.remove('esgst-hidden');
          });
        } else {
          const checkbox = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_5__["Checkbox"](sgFilter, !!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(filter.id));
          checkbox.onChange = async () => {
            check.classList.add('esgst-hidden');
            spinning.classList.remove('esgst-hidden');
            await setSetting(filter.id, checkbox.value ? 1 : 0);
            await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].post('/account/settings/giveaways', {
              data: `filter_os=${_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('filter_os')}&filter_giveaways_exist_in_account=${_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('filter_giveaways_exist_in_account')}&filter_giveaways_missing_base_game=${_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('filter_giveaways_missing_base_game')}&filter_giveaways_level=${_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('filter_giveaways_level')}&filter_giveaways_additional_games=${_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('filter_giveaways_additional_games')}&xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_12__["Session"].xsrfToken}`
            });
            spinning.classList.add('esgst-hidden');
            check.classList.remove('esgst-hidden');
          };
        }
      });
    }
    if (sgFilters.children.length === 1) {
      sgFilters.classList.add('esgst-hidden');
    }
    let warnings = [];
    const now = Date.now();
    const usedFilters = this.getUsedFilters(obj.rules);
    for (const key of usedFilters) {
      const filter = obj.filters[key];
      if (filter.category && (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('gc') || !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(filter.category))) {
        warnings.push(`"${filter.name}" requires "${_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.getFeatureName(null, filter.category)}" to be enabled in the settings menu.`);
      } else if (filter.sync) {
        for (const syncKey of filter.sync) {
          if (now - _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`lastSync${syncKey}`) > 2592000000) {
            warnings.push(`"${filter.name}" requires "${_Sync__WEBPACK_IMPORTED_MODULE_19__["SYNC_KEYS"][`sync${syncKey}`].name}" to be synced in the sync menu, but that item has either never been synced or it was last synced more than 30 days ago.`);
          }
        }
      }
    }
    if (warnings.length > 0) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(obj.warningsPanel, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, "You are using some filters that may require your attention:", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
        className: "markdown"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, warnings.map(x => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, x))))));
      obj.button.classList.add('warning');
    }
    return headingButton;
  }
  getUsedFilters(rule, usedFilters = new Set()) {
    if (rule.condition) {
      for (const subRule of rule.rules) {
        usedFilters = this.getUsedFilters(subRule, usedFilters);
      }
    } else if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].isSet(rule.id)) {
      usedFilters.add(rule.id);
    }
    return usedFilters;
  }
  onRulesChanged(obj, event) {
    try {
      [obj.rules, obj.rules_save] = this.filters_changeRules(obj, event);
      if (!obj.basicApplied && !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_b`)) {
        this.filters_resetBasic(obj);
        this.filters_applyBasic(obj, obj.rules);
      }
      this.filters_filter(obj);
    } catch (e) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_8__["Logger"].error(e.message, e.stack);
    }
    obj.basicApplied = false;
  }
  filter_manual(obj) {
    if (obj.manualPopup) {
      obj.manualPopup.open();
      return;
    }
    obj.manualPopup = new _class_Popup__WEBPACK_IMPORTED_MODULE_10__["Popup"]({
      icon: 'fa-book',
      title: 'Advanced Filters Manual',
      addScrollable: 'left'
    });
    obj.manualPopup.getScrollable(_class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
      className: "esgst-bold"
    }, "Interface"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
      className: "markdown"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      className: "esgst-bold"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-square-o"
    }), " NOT"), ' ', "- If checked, only items that do not apply to the group will be shown."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      className: "esgst-bold"
    }, "AND"), " - Turns the group into an AND group, which means that only items that apply to every single rule of the group will be shown."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      className: "esgst-bold"
    }, "OR"), " - Turns the group into an OR group, which means that only items that apply to at least one rule of the group will be shown."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      className: "esgst-bold"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-arrows"
    })), ' ', "- Allows you reorder/move rules/groups. The order of the rules does not alter the result."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      className: "esgst-bold"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
      className: "fa fa-pause"
    }), " Pause"), ' ', "- Allows you to pause the rule/group, so that it does not filter anything until you resume it or refresh the page."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "The other buttons in the interface should be self-explanatory."))), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
      className: "esgst-bold"
    }, "Types of Filters"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
      className: "markdown"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      className: "esgst-bold"
    }, "Boolean"), " - Presents a choice between true and false. Set to true if you only want to see items that apply to the filter, and to false otherwise. For example, if you only want to see giveaways that are on your wishlist, set wishlisted to \"true\"; if you only want to see giveaways that you have not entered, set entered to \"false\"."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      className: "esgst-bold"
    }, "Number"), " - Presents a text field and a choice between equal, not equal, less, less or equal, greater, greater or equal, is null and is not null. Enter the value that you want in the text field and choose the option that you want. For example, if you only want to see giveaways above level 5, you can either set level to \"greater than 4\" or to \"greater or equal to 5\". The is null and is not null options regard the presence of the filter. For example, some giveaways do not have a rating. If you still want to see those giveaways when filtering by rating, add an additional rule and set rating to \"is null\"."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
      className: "esgst-bold"
    }, "Text"), " - Presents a text field and a choice between contains and doesn't contain. Enter the values that you want in the text field, separated by a comma followed by a space, and choose the option that you want. For example, if you only want to see giveaways that have the adventure or the action genres, set genres to \"contains Adventure, Action\". But if you only want to see giveaways that have both the adventure and the action genres, add 2 rules, set one to \"contains Adventure\" and the other to \"contains Action\", and turn the group into an AND group."))), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
      className: "esgst-bold"
    }, "Building the Filters"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
      className: "markdown"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", null, "The process of building the filters might seem intimidating at first, but it is actually quite simple. Just think of it like this:"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Show me a=\"true\" AND b=\"false\"."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Show me a=\"false\" OR b=\"true\"."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Do NOT show me a=\"true\".")), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", null, "The building process for the filters above becomes, respectively:"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Turn group into AND, add rule a=\"true\", add rule b=\"false\"."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Turn group into OR, add rule a=\"false\", add rule b=\"true\"."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Check NOT option, add rule a=\"true\".")), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", null, "For more advanced filters, think in parenthesis:"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Show me (a=\"true\" AND b=\"false\") OR c=\"greater or equal to 5\"."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Show me (a=\"false\" AND b=\"true\" AND c=\"false\") OR (d=\"true\" AND e=\"false\") OR f=\"equal to 2\"."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Show me (a=\"true\" AND b=\"false\" AND c=\"true\" AND d=\"false\") AND do NOT show me e=\"contains Adventure, Action\".")), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", null, "Each parenthesis represents a new group. NOT filters also represent a new group, since there isn't a NOT option for rules. So the building process for the filters above becomes, respectively:"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Turn group into OR, add group (turn group into AND, add rule a=\"true\", add rule b=\"false\"), add rule c=\"greater or equal to 5\"."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Turn group into OR, add group (turn group into AND, add rule a=\"false\", add rule b=\"true\", add rule c=\"false\"), add group (turn group into AND, add rule d=\"true\", add rule e=\"false\"), add rule f=\"equal to 2\"."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Turn group into AND, add group (turn group into AND, add rule a=\"true\", add rule b=\"false\", add rule c=\"true\", add rule d=\"false\"), add group (check NOT option, add rule e=\"contains Adventure, Action\").")), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", null, "Real example: suppose you only want to see giveaways that are for level 5 or more and that have achievements or trading cards. The sentence for that system is:"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Show me level=\"greater or equal to 5\" AND (achievements=\"true\" OR tradingCards=\"true\").")), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", null, "And the building process is:"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Turn group into AND, add rule level=\"greater or equal to 5\", add group (turn group into OR, add rule achievements=\"true\", add rule tradingCards=\"true\").")), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", null, "The final result is illustrated in the picture below:")), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("img", {
      src: "https://i.imgur.com/F1UXcKs.png"
    })));
    obj.manualPopup.open();
  }
  filters_convert(presets) {
    const minValues = {
      level: 0,
      entries: 0,
      copies: 1,
      points: 0,
      comments: 0,
      minutesToEnd: 0,
      minutesFromStart: 0,
      chance: 0,
      chancePerPoint: 0,
      ratio: 0,
      rating: 0,
      reviews: 0,
      releaseDate: 0
    };
    const maxValues = {
      level: 10,
      points: 100,
      minutesToEnd: 43800,
      minutesFromStart: 43800,
      chance: 100,
      chancePerPoint: 100,
      rating: 100,
      releaseDate: 3187209600
    };
    const newPresets = [];
    for (const preset of presets) {
      let newPreset = {
        condition: 'AND',
        not: false,
        rules: []
      };

      // Convert basic rules.
      for (let key in preset) {
        if (preset.hasOwnProperty(key)) {
          if (key.match(/^(authors|creators|exceptions|genres|groups|words|name|overrides)$/)) {
            continue;
          }
          const isMax = key.match(/^max/);
          const isMin = key.match(/^min/);
          const value = preset[key];
          key = key.replace(/(^(max|min))|List$/, '');
          key = `${key[0].toLowerCase()}${key.slice(1)}`;
          if (isMax) {
            if (value !== maxValues[key] && !value.toString().match(/^9+$/)) {
              newPreset.rules.push({
                field: key,
                id: key,
                input: key === 'releaseDate' ? 'date' : 'text',
                operator: 'less_or_equal',
                type: key === 'releaseDate' ? 'text' : key.match(/^(chance|chancePerPoint)$/) ? 'double' : 'integer',
                value: value
              });
            }
          } else if (isMin) {
            if (value !== minValues[key]) {
              newPreset.rules.push({
                field: key,
                id: key,
                input: key === 'releaseDate' ? 'date' : 'text',
                operator: 'greater_or_equal',
                type: key === 'releaseDate' ? 'text' : key.match(/^(chance|chancePerPoint)$/) ? 'double' : 'integer',
                value: value
              });
            }
          } else if (value && typeof value === 'string' && !value.match(/^(enabled|undefined)$/)) {
            if (value === 'disabled') {
              newPreset.rules.push({
                field: key,
                id: key,
                input: 'radio',
                operator: 'equal',
                type: 'boolean',
                value: false
              });
            } else if (value === 'none') {
              newPreset.rules.push({
                field: key,
                id: key,
                input: 'radio',
                operator: 'equal',
                type: 'boolean',
                value: true
              });
            } else {
              const rule = {
                field: key,
                id: key,
                input: 'text',
                operator: preset[key] === 'disabled' ? 'not_contains' : 'contains',
                type: 'string',
                value: value
              };
              if (preset[key] === 'enabled') {
                rule.data = {
                  paused: true
                };
              }
              newPreset.rules.push(rule);
            }
          }
        }
      }

      // Convert exceptions.
      let newExceptions = null;
      if (preset.exceptions) {
        newExceptions = {
          condition: 'OR',
          not: false,
          rules: []
        };
        if (newPreset.rules.length) {
          newExceptions.rules.push(newPreset);
        }
        for (const exception of preset.exceptions) {
          const newException = {
            condition: 'AND',
            not: false,
            rules: []
          };
          for (let key in exception) {
            if (exception.hasOwnProperty(key)) {
              if (key.match(/^(authors|creators|exceptions|genres|groups|words|name|overrides)$/)) {
                continue;
              }
              const isMax = key.match(/^max/);
              const isMin = key.match(/^min/);
              const value = preset[key];
              key = key.replace(/(^(max|min))|List$/, '');
              key = `${key[0].toLowerCase()}${key.slice(1)}`;
              if (isMax) {
                if (value !== maxValues[key] && !value.toString().match(/^9+$/)) {
                  newException.rules.push({
                    field: key,
                    id: key,
                    input: key === 'releaseDate' ? 'date' : 'text',
                    operator: 'less_or_equal',
                    type: key === 'releaseDate' ? 'text' : key.match(/^(chance|chancePerPoint)$/) ? 'double' : 'integer',
                    value: value
                  });
                }
              } else if (isMin) {
                if (value !== minValues[key]) {
                  newException.rules.push({
                    field: key,
                    id: key,
                    input: key === 'releaseDate' ? 'date' : 'text',
                    operator: 'greater_or_equal',
                    type: key === 'releaseDate' ? 'text' : key.match(/^(chance|chancePerPoint)$/) ? 'double' : 'integer',
                    value: value
                  });
                }
              } else if (value && value !== 'undefined') {
                if (key.match(/^(authors|creators|genres|groups|words)$/)) {
                  if (exception[key]) {
                    newException.rules.push({
                      field: key,
                      id: key,
                      input: 'text',
                      operator: 'contains',
                      type: 'string',
                      value: value
                    });
                  }
                } else {
                  newException.rules.push({
                    field: key,
                    id: key,
                    input: 'radio',
                    operator: 'equal',
                    type: 'boolean',
                    value: true
                  });
                }
              }
            }
          }
          if (newException.rules.length) {
            newExceptions.rules.push(newException);
          }
        }

        // Apply overrides.
        if (preset.overrides) {
          for (let i = newPreset.rules.length - 1; i > -1; i--) {
            const rule = newPreset.rules[i];
            if (preset.overrides[rule.id]) {
              for (const exception of newExceptions.rules) {
                if (exception === newPreset) continue;
                exception.rules.push(rule);
              }
            }
          }
        }
        if (newExceptions.rules.length) {
          newPreset = newExceptions;
        }
      }
      if (newPreset.rules.length) {
        newPreset.valid = true;
        newPresets.push({
          name: `__old-preset__${preset.name}`,
          rules: newPreset
        });
      }
    }
    return newPresets;
  }
  filters_changeRules(obj, event) {
    let out = [{
      condition: 'AND',
      not: false,
      rules: [],
      valid: true
    }, {
      condition: 'AND',
      not: false,
      rules: [],
      valid: true
    }];
    let valid = false;
    try {
      valid = obj.builder.validate();
    } catch (e) {
      return out;
    }
    if (!valid) {
      if (event) {
        event.value = out;
      }
      return out;
    }
    out = function parse(group) {
      const groupData = {
        condition: group.condition,
        data: {
          count: group.$el[0].getElementsByClassName('esgst-gf-filter-count')[0]
        },
        rules: []
      };
      const groupData_save = {
        condition: group.condition,
        rules: []
      };
      group.each(function (rule) {
        if (!event) {
          if (rule.data && rule.data.paused) {
            rule.$el[0].setAttribute('data-esgst-paused', true);
          } else {
            rule.$el[0].removeAttribute('data-esgst-paused');
          }
        }
        let value = null;
        if (!rule.operator || rule.operator.nb_inputs !== 0) {
          value = rule.value;
        }
        const ruleData = {
          data: rule.data,
          id: rule.filter ? rule.filter.id : null,
          field: rule.filter ? rule.filter.field : null,
          type: rule.filter ? rule.filter.type : null,
          input: rule.filter ? rule.filter.input : null,
          operator: rule.operator ? rule.operator.type : null,
          value: value
        };
        if (groupData.condition === 'AND') {
          if (!ruleData.data) {
            ruleData.data = {};
          }
          ruleData.data.count = rule.$el[0].getElementsByClassName('esgst-gf-filter-count')[0];
          ruleData.data.count.classList.remove('esgst-hidden');
        } else {
          rule.$el[0].getElementsByClassName('esgst-gf-filter-count')[0].classList.add('esgst-hidden');
        }
        const ruleData_save = {
          id: rule.filter ? rule.filter.id : null,
          field: rule.filter ? rule.filter.field : null,
          type: rule.filter ? rule.filter.type : null,
          input: rule.filter ? rule.filter.input : null,
          operator: rule.operator ? rule.operator.type : null,
          value: value
        };
        if (rule.$el[0].getAttribute('data-esgst-paused')) {
          if (!ruleData.data) {
            ruleData.data = {};
          }
          ruleData.data.paused = true;
          ruleData_save.data = {
            paused: true
          };
        } else if (ruleData.data && ruleData.data.paused) {
          delete ruleData.data.paused;
        }
        groupData.rules.push(obj.builder.change('ruleToJson', ruleData, rule));
        groupData_save.rules.push(obj.builder.change('ruleToJson', ruleData_save, rule));
      }, function (model) {
        if (!event) {
          if (model.data && model.data.paused) {
            model.$el[0].setAttribute('data-esgst-paused', true);
          } else {
            model.$el[0].removeAttribute('data-esgst-paused');
          }
        }
        const [data, data_save] = parse(model);
        if (data.rules.length !== 0) {
          if (model.$el[0].getAttribute('data-esgst-paused')) {
            data_save.data = {
              paused: true
            };
          } else {
            groupData.rules.push(data);
          }
          groupData_save.rules.push(data_save);
        }
      }, obj.builder);
      return [obj.builder.change('groupToJson', groupData, group), obj.builder.change('groupToJson', groupData_save, group)];
    }(obj.builder.model.root);
    out[0].valid = valid;
    out[1].valid = valid;
    if (event) {
      event.value = out;
    }
    return out;
  }
  filters_basicToAdv(obj) {
    const adv = {
      condition: 'AND',
      not: false,
      rules: [],
      valid: true
    };
    for (const id in obj.basicFilters) {
      if (obj.basicFilters.hasOwnProperty(id)) {
        const filter = obj.basicFilters[id];
        switch (filter.filterType) {
          case 'boolean':
            if (filter.checkbox.value === 'enabled') break;
            adv.rules.push({
              data: filter.data,
              field: id,
              id: id,
              input: filter.input,
              operator: filter.operator,
              type: filter.type,
              value: filter.checkbox.value === 'none'
            });
            break;
          case 'number':
            if (filter.maxInput.value) {
              let isValid = false;
              const value = filter.maxInput.value;
              if (filter.type === 'date') {
                isValid = true;
              } else {
                const parsedValue = parseFloat(value);
                if (Number.isNaN(parsedValue)) {
                  filter.maxInput.setCustomValidity('Not a number');
                } else if (filter.type === 'integer' && !Number.isInteger(parsedValue)) {
                  filter.maxInput.setCustomValidity('Not an integer');
                } else if (parsedValue > filter.maxValue) {
                  filter.maxInput.setCustomValidity(`Must be lower than ${filter.maxValue}`);
                } else if (parsedValue < filter.minValue) {
                  filter.maxInput.setCustomValidity(`Must be greater than ${filter.minValue}`);
                } else {
                  filter.maxInput.setCustomValidity('');
                  isValid = true;
                }
              }
              if (isValid) {
                filter.maxInput.classList.remove('has-error');
                adv.rules.push({
                  data: filter.data,
                  field: id,
                  id: id,
                  input: filter.input,
                  operator: 'less_or_equal',
                  type: filter.type,
                  value
                });
              } else {
                filter.maxInput.classList.add('has-error');
              }
            }
            if (filter.minInput.value) {
              let isValid = false;
              const value = filter.minInput.value;
              if (filter.type === 'date') {
                isValid = true;
              } else {
                const parsedValue = parseFloat(value);
                if (Number.isNaN(parsedValue)) {
                  filter.minInput.setCustomValidity('Not a number');
                } else if (filter.type === 'integer' && !Number.isInteger(parsedValue)) {
                  filter.minInput.setCustomValidity('Not an integer');
                } else if (parsedValue > filter.maxValue) {
                  filter.minInput.setCustomValidity(`Must be lower than ${filter.maxValue}`);
                } else if (parsedValue < filter.minValue) {
                  filter.minInput.setCustomValidity(`Must be greater than ${filter.minValue}`);
                } else {
                  filter.minInput.setCustomValidity('');
                  isValid = true;
                }
              }
              if (isValid) {
                filter.minInput.classList.remove('has-error');
                adv.rules.push({
                  data: filter.data,
                  field: id,
                  id: id,
                  input: filter.input,
                  operator: 'greater_or_equal',
                  type: filter.type,
                  value
                });
              } else {
                filter.minInput.classList.add('has-error');
              }
            }
            break;
          case 'string':
            if (!filter.textInput.value) break;
            if (filter.checkbox.value === 'enabled') {
              if (!filter.data) {
                filter.data = {};
              }
              filter.data.paused = true;
            } else if (filter.data && filter.data.paused) {
              delete filter.data.paused;
            }
            adv.rules.push({
              data: filter.data,
              field: id,
              id: id,
              input: filter.input,
              operator: filter.checkbox.value === 'disabled' ? 'not_contains' : 'contains',
              type: filter.type,
              value: filter.textInput.value
            });
            break;
        }
      }
    }
    obj.rules = adv;
    if (obj.rules.rules) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_a`)) {
        obj.rules_save = obj.rules;
        this.filters_filter(obj);
      } else {
        if (!obj.rules.rules.length) {
          obj.rules = {
            condition: 'AND',
            rules: [{
              empty: true
            }],
            valid: true
          };
        }
        obj.basicApplied = true;
        this.isProgrammaticChange = true;
        obj.builder.setRules(obj.rules);
        this.onRulesChanged(obj);
        this.isProgrammaticChange = false;
      }
    }
  }
  filters_applyBasic(obj, rules) {
    if (rules.condition !== 'AND') return;
    for (const rule of rules.rules) {
      if (rule.condition) continue;
      const filter = obj.basicFilters[rule.id];
      switch (rule.type) {
        case 'boolean':
          filter.checkbox.change(false, rule.value ? 'none' : 'disabled');
          break;
        case 'date':
        case 'double':
        case 'integer':
          {
            if (rule.operator === 'less_or_equal') {
              const value = rule.value;
              if (rule.type !== 'date') {
                let isValid = false;
                const parsedValue = parseFloat(value);
                if (Number.isNaN(parsedValue)) {
                  filter.maxInput.setCustomValidity('Not a number');
                } else if (rule.type === 'integer' && !Number.isInteger(parsedValue)) {
                  filter.maxInput.setCustomValidity('Not an integer');
                } else if (parsedValue > filter.maxValue) {
                  filter.maxInput.setCustomValidity(`Must be lower than ${filter.maxValue}`);
                } else if (parsedValue < filter.minValue) {
                  filter.maxInput.setCustomValidity(`Must be greater than ${filter.minValue}`);
                } else {
                  filter.maxInput.setCustomValidity('');
                  isValid = true;
                }
                if (isValid) {
                  filter.maxInput.classList.remove('has-error');
                } else {
                  filter.maxInput.classList.add('has-error');
                }
              }
              filter.maxInput.value = value;
            } else if (rule.operator === 'greater_or_equal') {
              const value = rule.value;
              if (rule.type !== 'date') {
                let isValid = false;
                const parsedValue = parseFloat(value);
                if (Number.isNaN(parsedValue)) {
                  filter.minInput.setCustomValidity('Not a number');
                } else if (rule.type === 'integer' && !Number.isInteger(parsedValue)) {
                  filter.minInput.setCustomValidity('Not an integer');
                } else if (parsedValue > filter.maxValue) {
                  filter.minInput.setCustomValidity(`Must be lower than ${filter.maxValue}`);
                } else if (parsedValue < filter.minValue) {
                  filter.minInput.setCustomValidity(`Must be greater than ${filter.minValue}`);
                } else {
                  filter.minInput.setCustomValidity('');
                  isValid = true;
                }
                if (isValid) {
                  filter.minInput.classList.remove('has-error');
                } else {
                  filter.minInput.classList.add('has-error');
                }
              }
              filter.minInput.value = value;
            }
            break;
          }
        case 'string':
          filter.checkbox.change(false, rule.operator === 'contains' ? rule.data && rule.data.paused ? 'enabled' : 'none' : 'disabled');
          filter.textInput.value = rule.value;
          break;
      }
    }
  }
  filters_resetBasic(obj) {
    for (const id in obj.basicFilters) {
      if (obj.basicFilters.hasOwnProperty(id)) {
        const filter = obj.basicFilters[id];
        switch (filter.filterType) {
          case 'boolean':
            filter.checkbox.change(false, 'enabled');
            break;
          case 'number':
            filter.maxInput.value = '';
            filter.minInput.value = '';
            break;
          case 'string':
            filter.checkbox.change(false, 'enabled');
            filter.textInput.value = '';
            break;
        }
      }
    }
  }
  async filters_savePreset(obj) {
    const name = obj.presetInput.value;
    if (!name) {
      obj.presetWarning.classList.remove('esgst-hidden');
      return;
    }
    obj.presetWarning.classList.add('esgst-hidden');
    const preset = {
      name,
      rules: obj.rules_save
    };
    let i;
    const presets = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(obj.key);
    for (i = presets.length - 1; i > -1 && presets[i].name !== name; i--) {}
    if (i > -1) {
      presets[i] = preset;
    } else {
      presets.push(preset);
    }
    await setSetting([{
      id: `${obj.id}_preset${obj.type}`,
      value: name
    }, {
      id: obj.key,
      value: presets
    }]);
    createFadeMessage(obj.presetMessage, 'Saved!');
  }
  async filters_openPresetPopup(obj) {
    const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_10__["Popup"]({
      addScrollable: true,
      icon: 'fa-sliders',
      isTemp: true,
      title: `Manage presets:`
    });
    createElements(popup.description, 'afterbegin', [{
      attributes: {
        class: 'esgst-description'
      },
      text: `To edit a preset, apply it and save it with the same name. To rename a preset, click the edit icon, enter the new name and hit "Enter". Drag and drop presets to move them.`,
      type: 'div'
    }]);
    let deleted = [];
    const undoButton = createElements(popup.description, 'beforeend', [{
      attributes: {
        class: 'esgst-clickable esgst-hidden'
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'fa fa-rotate-left'
        },
        type: 'i'
      }, {
        text: 'Undo Delete',
        type: 'span'
      }]
    }]);
    undoButton.addEventListener('click', this.filters_undoDeletePreset.bind(this, obj, deleted, undoButton));
    const table = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-text-left popup__keys__list'
      },
      type: 'div'
    }]);
    for (const preset of _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(obj.key)) {
      const attributes = {
        draggable: true
      };
      if (obj.presetInput.value === preset.name) {
        attributes.class = 'esgst-green-highlight';
      }
      const row = createElements(table, 'beforeend', [{
        attributes,
        type: 'div',
        children: [{
          attributes: {
            class: 'esgst-float-left'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'esgst-hidden',
              type: 'text',
              value: preset.name
            },
            type: 'input'
          }, {
            attributes: {
              class: 'esgst-clickable'
            },
            text: preset.name,
            type: 'strong'
          }]
        }, {
          attributes: {
            class: 'esgst-clickable esgst-float-right'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'fa fa-edit',
              title: 'Rename preset'
            },
            type: 'i'
          }, {
            attributes: {
              title: 'Delete preset'
            },
            type: 'span',
            children: [{
              attributes: {
                class: 'fa fa-trash'
              },
              type: 'i'
            }]
          }]
        }, {
          attributes: {
            class: 'esgst-clear'
          },
          type: 'div'
        }]
      }]);
      const renameInput = row.firstElementChild.firstElementChild;
      const heading = renameInput.nextElementSibling;
      const renameButton = row.firstElementChild.nextElementSibling.firstElementChild;
      row.addEventListener('dragstart', this.filters_setSource.bind(this, obj, preset, row));
      row.addEventListener('dragenter', this.filters_getSource.bind(this, obj, row, table));
      row.addEventListener('dragend', this.filters_saveSource.bind(this, obj));
      renameInput.addEventListener('keypress', this.filters_renamePreset.bind(this, obj, heading, preset));
      heading.addEventListener('click', this.filters_applyPreset.bind(this, obj, popup, preset));
      renameButton.addEventListener('click', this.filters_showRenameInput.bind(this, heading, renameInput));
      renameButton.nextElementSibling.addEventListener('click', this.filters_deletePreset.bind(this, obj, deleted, preset, row, undoButton));
    }
    popup.open();
  }
  async filters_setSource(obj, preset, row, event) {
    event.dataTransfer.setData('text/plain', '');
    obj.source = row;
    let i;
    const presets = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(obj.key);
    for (i = presets.length - 1; i > -1 && presets[i].name !== preset.name; i--) {}
    obj.sourceIndex = i;
  }
  filters_getSource(obj, row, table) {
    let current = obj.source;
    let i = 0;
    do {
      current = current.previousElementSibling;
      if (current && current === row) {
        obj.sourceNewIndex = i;
        table.insertBefore(obj.source, row);
        return;
      }
      ++i;
    } while (current);
    obj.sourceNewIndex = i - 1;
    table.insertBefore(obj.source, row.nextElementSibling);
  }
  async filters_saveSource(obj) {
    const presets = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(obj.key);
    presets.splice(obj.sourceNewIndex, 0, presets.splice(obj.sourceIndex, 1)[0]);
    await setSetting(obj.key, presets);
  }
  async filters_applyPreset(obj, popup, preset) {
    if (!preset.rules || !preset.rules.rules || !preset.rules.rules.length) {
      preset.rules = {
        condition: 'AND',
        rules: [{
          empty: true
        }],
        valid: true
      };
    }
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_b`)) {
      this.filters_resetBasic(obj);
      this.filters_applyBasic(obj, preset.rules);
    }
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_m_a`)) {
      this.isProgrammaticChange = true;
      obj.builder.setRules(preset.rules);
      this.onRulesChanged(obj);
      this.isProgrammaticChange = false;
      [obj.rules, obj.rules_save] = this.filters_changeRules(obj);
    }
    popup.close();
    obj.presetDisplay.textContent = obj.presetInput.value = preset.name;
    this.filters_filter(obj);
    setSetting(`${obj.id}_preset${obj.type}`, preset.name);
  }
  filters_showRenameInput(heading, renameInput) {
    heading.classList.add('esgst-hidden');
    renameInput.classList.remove('esgst-hidden');
    const value = renameInput.value;
    renameInput.value = '';
    renameInput.focus();
    renameInput.value = value;
  }
  async filters_renamePreset(obj, heading, preset, event) {
    if (event.key !== 'Enter') return;
    const oldName = preset.name;
    const newName = event.currentTarget.value;
    let i;
    const presets = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(obj.key);
    for (i = presets.length - 1; i > -1 && presets[i].name !== oldName; i--) {}
    preset.name = presets[i].name = newName;
    const values = [{
      id: obj.key,
      value: presets
    }];
    heading.textContent = newName;
    if (obj.presetInput.value === oldName) {
      obj.presetDisplay.textContent = obj.presetInput.value = newName;
    }
    const types = ['', 'Wishlist', 'Recommended', 'Group', 'New', 'Created', 'Entered', 'Won', 'Games', 'Groups', 'User', 'Gb', 'Ge', 'Ged'];
    for (const type of types) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_preset${type}`) === oldName) {
        values.push({
          id: `${obj.id}_preset${type}`,
          value: newName
        });
      }
    }
    event.currentTarget.classList.add('esgst-hidden');
    heading.classList.remove('esgst-hidden');
    await setSetting(values);
  }
  async filters_deletePreset(obj, deleted, preset, row, undoButton, event) {
    const deleteButton = event.currentTarget;
    createElements(deleteButton, 'atinner', [{
      attributes: {
        class: 'fa fa-circle-o-notch fa-spin'
      },
      type: 'i'
    }]);
    let i;
    const presets = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(obj.key);
    for (i = presets.length - 1; i > -1 && presets[i].name !== preset.name; i--) {}
    presets.splice(i, 1);
    await setSetting(obj.key, presets);
    createElements(deleteButton, 'atinner', [{
      attributes: {
        class: 'fa fa-trash'
      },
      type: 'i'
    }]);
    row.classList.add('esgst-hidden');
    deleted.push({
      details: preset,
      row: row
    });
    undoButton.classList.remove('esgst-hidden');
  }
  async filters_undoDeletePreset(obj, deleted, undoButton) {
    const preset = deleted.pop();
    preset.row.classList.remove('esgst-hidden');
    preset.row.parentElement.appendChild(preset.row);
    const presets = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(obj.key);
    presets.push(preset.details);
    await setSetting(obj.key, presets);
    if (deleted.length === 0) {
      undoButton.classList.add('esgst-hidden');
    }
  }
  filters_toggleFilters(obj) {
    obj.collapseButton.classList.toggle('esgst-hidden');
    obj.expandButton.classList.toggle('esgst-hidden');
    if (obj.warningsPanel.firstElementChild) {
      obj.warningsPanel.classList.toggle('esgst-hidden');
    }
    obj.filtersPanel.classList.toggle('esgst-hidden');
  }
  filters_filter(obj, unfilter, endless) {
    if (!unfilter && !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${obj.id}_enable${obj.type}`)) return;
    _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.purgeRemovedElements();
    let items;
    if (obj.id === 'gf') {
      items = _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('current', 'giveaways');
    } else if (obj.id === 'df') {
      items = _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('current', 'discussions');
    } else if (obj.id === 'tf') {
      items = _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('current', 'trades');
    } else if (obj.id === 'gmf') {
      items = _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('current', 'games').map(game => game.game);
    } else if (obj.id === 'gpf') {
      items = _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('current', 'groups');
    } else {
      items = _class_Scope__WEBPACK_IMPORTED_MODULE_11__["Scope"].findData('current', 'comments');
    }
    const counters = document.getElementsByClassName('esgst-gf-filter-count');
    for (const counter of counters) {
      counter.textContent = '0';
    }
    let filteredCount = 0;
    let pointsCount = 0;
    for (const item of items) {
      let tableRow;
      if (item.isGame && item.table) {
        tableRow = item.container.closest('tr');
      }
      const outerWrap = tableRow && tableRow.querySelectorAll('.esgst-gc-panel').length < 2 ? tableRow : item.outerWrap;
      if (!outerWrap.getAttribute('data-esgst-not-filterable')) {
        outerWrap.classList.remove('esgst-hidden');
      }
      if (obj.id === 'cf' && outerWrap.parentElement && !outerWrap.parentElement.getAttribute('data-esgst-not-filterable')) {
        outerWrap.parentElement.classList.remove('esgst-hidden');
      }
      if (unfilter || this.filters_filterItem(obj.filters, item, obj.rules)) {
        if (item.points && !item.entered && !outerWrap.classList.contains('esgst-hidden') && !outerWrap.parentElement.classList.contains('esgst-hidden')) {
          pointsCount += item.points;
        }
      } else {
        if (!outerWrap.classList.contains('esgst-hidden') && !outerWrap.getAttribute('data-esgst-not-filterable')) {
          outerWrap.classList.add('esgst-hidden');
        }
        if (obj.id === 'cf' && !outerWrap.parentElement.classList.contains('esgst-hidden') && !outerWrap.parentElement.getAttribute('data-esgst-not-filterable')) {
          outerWrap.parentElement.classList.add('esgst-hidden');
        }
        filteredCount += 1;
      }
    }
    if (obj.filteredCount) {
      obj.filteredCount.textContent = filteredCount;
    }
    if (obj.id === 'gf' && obj.pointsCount) {
      obj.pointsCount.textContent = pointsCount;
    }
    if ((obj.id === 'gf' || obj.id === 'gmf') && this.esgst.gcToFetch) {
      const games = {
        apps: {},
        subs: {}
      };
      for (const id in this.esgst.gcToFetch.apps) {
        if (this.esgst.gcToFetch.apps.hasOwnProperty(id)) {
          games.apps[id] = [...this.esgst.gcToFetch.apps[id]];
        }
      }
      for (const id in this.esgst.gcToFetch.subs) {
        if (this.esgst.gcToFetch.subs.hasOwnProperty(id)) {
          games.subs[id] = [...this.esgst.gcToFetch.subs[id]];
        }
      }
      // noinspection JSIgnoredPromiseFromCall
      this.esgst.modules.gamesGameCategories.gc_getGames(games, true, null, false, true);
    }
  }

  /**
   * Checks if an item passes a set of filter rules.
   * @param {object} filters An object containing all the filters.
   * @param {object} item An object containing information about the item to be checked.
   * @param {object} rules An object containing the rules to check.
   * @returns {boolean} True if the item passed the filters and false otherwise.
   */
  filters_filterItem(filters, item, rules, notMain) {
    if (!rules || !rules.id && (!rules.condition || _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].isSet(rules.valid) && !rules.valid) || rules.id && !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(`${this.id}_${rules.id}`)) {
      return true;
    }
    let filtered;
    if (rules.condition) {
      if (rules.condition === 'AND') {
        // The giveaway must be filtered by all rules.
        filtered = true;
        for (const rule of rules.rules) {
          if (rule.data && rule.data.paused) continue;
          filtered = filtered && this.filters_filterItem(filters, item, rule, notMain);
          if (!filtered) break;
        }
      } else {
        // The giveaway must be filtered by at least 1 rule.
        filtered = false;
        if (rules.rules.length) {
          for (const rule of rules.rules) {
            if (rule.data && rule.data.paused) continue;
            filtered = filtered || this.filters_filterItem(filters, item, rule, notMain);
            if (filtered) break;
          }
        } else {
          filtered = true;
        }
      }
      filtered = rules.not ? !filtered : filtered;
      /**
       * @property {object} rules.data
       */
      if (!filtered && rules.data && rules.data.count) {
        rules.data.count.textContent = parseInt(rules.data.count.textContent) + 1;
      }
      return filtered;
    }
    filtered = true;
    let key = rules.id;
    const filter = filters[key];
    if (!filter.check || filter.category && (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('gc') || !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get(filter.category) || !item.gcReady) || item.sgTools && key.match(/^(chance|chancePerPoint|comments|entries|ratio)$/)) {
      return filtered;
    }

    /**
     * @property {string} rules.type
     */
    // noinspection FallThroughInSwitchStatementJS
    switch (rules.type) {
      case 'date':
      case 'integer':
      case 'double':
        {
          const ruleValue = rules.type === 'date' ? new Date(rules.value).getTime() : rules.value;
          const value = key === 'minutesToEnd' ? (item.endTime - Date.now()) / 60000 : key === 'minutesFromStart' ? (Date.now() - item.startTime) / 60000 : item[key];
          /**
           * @property {string} rules.operator
           */
          switch (rules.operator) {
            case 'equal':
              filtered = ruleValue === value;
              break;
            case 'not_equal':
              filtered = ruleValue !== value;
              break;
            case 'less':
              filtered = value < ruleValue;
              break;
            case 'less_or_equal':
              filtered = value <= ruleValue;
              break;
            case 'greater':
              filtered = value > ruleValue;
              break;
            case 'greater_or_equal':
              filtered = value >= ruleValue;
              break;
            case 'is_null':
              filtered = !_lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].isSet(value) || value < 0;
              break;
            case 'is_not_null':
              filtered = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].isSet(value) && value > -1;
              break;
          }
          break;
        }
      case 'boolean':
        if (key === 'regionRestricted' && this.esgst.parameters.region_restricted) break;
        if ((key !== 'fullCV' || (rules.value || item.reducedCV || item.noCV) && (!rules.value || !item.reducedCV && !item.noCV)) && (key === 'fullCV' || (!rules.value || item[key]) && (rules.value || !item[key]))) break;
        filtered = false;
        if (!notMain && !item.deleted && key === 'ended' && !rules.value && (this.esgst.createdPath || this.esgst.enteredPath || this.esgst.wonPath || this.esgst.userPath || this.esgst.gamePath || this.esgst.groupPath)) {
          this.esgst.stopEs = true;
        }
        break;
      case 'string':
        {
          const list = rules.value.toLowerCase().split(/,\s/);
          if (key === 'winners') {
            key = 'winnerNames';
          }
          if (rules.operator === 'contains') {
            if (!item[key] || !Array.isArray(item[key])) {
              filtered = false;
              break;
            }
            let i;
            for (i = list.length - 1; i > -1 && item[key].indexOf(list[i]) < 0; i--) {}
            filtered = i > -1;
          } else {
            if (!item[key] || !Array.isArray(item[key])) {
              break;
            }
            let i;
            for (i = list.length - 1; i > -1 && item[key].indexOf(list[i]) < 0; i--) {}
            filtered = i < 0;
          }
          break;
        }
    }
    if (!filtered && rules.data) {
      if (rules.data.count) {
        rules.data.count.textContent = parseInt(rules.data.count.textContent) + 1;
      }
      if (rules.data.basicCount) {
        rules.data.basicCount.textContent = parseInt(rules.data.basicCount.textContent) + 1;
      }
    }
    return filtered;
  }
}


/***/ }),
/* 312 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsDiscussionFilters", function() { return discussionsDiscussionFilters; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(276);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(209);
/* harmony import */ var _class_Process__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(279);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(132);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(144);
/* harmony import */ var _Filters__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(311);












const checkMissingDiscussions = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].checkMissingDiscussions.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  endless_load = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]);
class DiscussionsDiscussionFilters extends _Filters__WEBPACK_IMPORTED_MODULE_11__["Filters"] {
  constructor() {
    super('df');
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions.")),
      features: {
        df_s: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-eye"
          }), " if the discussion is hidden and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-eye-slash"
          }), " if it is not) next to a discussion's title (in any page) that allows you to hide the discussion."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-comments"
          }), ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-eye-slash"
          }), ") to the page heading of this menu that allows you to view all of the discussions that have been hidden.")),
          name: 'Single Filters',
          sg: true,
          features: {
            df_s_s: {
              name: `Show switch to temporarily hide / unhide discussions filtered by the filters in the main page heading, along with a counter.`,
              sg: true
            }
          }
        },
        df_m: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to hide multiple discussions in a page using many different filters."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a toggle switch with a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-sliders"
          }), ") to the main page heading of any ", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
            href: "https://www.steamgifts.com/discussions"
          }, "discussions"), ' ', "page. The switch allows you to turn the filters on/off and the button allows you to manage your presets."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a collapsible panel below the same main page heading that allows you to change/save the rules of a preset. The filters are separated in 2 categories:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Basic filters are related to a numeric value (such as the number of comments of a discussion) and have a slider that you can use to set the range of the filter (any discussions that do not apply to the range will be hidden)."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Type filters are related to a boolean value (such as whether or not a discussion was created by yourself) and have a checkbox that changes states when you click on it. The checkbox has 3 states:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "\"Show all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-check-square"
          }), ") does not hide any discussions that apply to the filter (this is the default state)."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "\"Show only\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-square"
          }), ") hides any discussions that do not apply to the filter."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "\"Hide all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-square-o"
          }), ") hides any discussions that apply to the filter."))), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "A preset contains all of your rules and can be saved to be reused later. You can save as many presets as you want. Each preset contains 3 types of rules:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Basic rules are the ones that you can change directly in the filter panel, using the sliders/checkboxes as explained in the previous item."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Exception rules are the ones that you can change by clicking on the icon "), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-gear"
          }), " in the filter panel. They are exceptions to the basic rules. For example, if you set the basic rule of the \"Created\" filter to \"hide all\" and you add an exception rule for the \"Comments\" filter to the 0-50 range, none of your created discussions that have 0-50 comments will be hidden, because they apply to the exception."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Override rules are the ones that you can change by clicking on the icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-exclamation esgst-faded"
          }), " if set to overridable and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-exclamation"
          }), " if set to non-overridable) next to each filter. They are enforcements of the basic rules. Continuing the previous example, if you set the override rule of the \"Created\" filter to \"non-overridable\", then all of your created discussions will be hidden, because even if they apply to the exception, the basic rule is being enforced by the override rule, so the exception cannot override it.")),
          features: {
            df_m_f: {
              name: 'Fix filter bar at the top of the page.',
              sg: true
            },
            df_m_b: {
              name: 'Hide basic filters.',
              sg: true
            },
            df_m_a: {
              name: 'Hide advanced filters.',
              sg: true
            },
            df_comments: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions by number of comments.")),
              name: 'Comments',
              sg: true
            },
            df_addonsTools: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Add-ons / Tools\".")),
              name: 'Add-ons / Tools',
              sg: true
            },
            df_announcements: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Announcements\".")),
              name: 'Announcements',
              sg: true
            },
            df_bugsSuggestions: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Bugs / Suggestions\".")),
              name: 'Bugs / Suggestions',
              sg: true
            },
            df_deals: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Deals\".")),
              name: 'Deals',
              sg: true
            },
            df_gameShowcase: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Game Showcase\".")),
              name: 'Game Showcase',
              sg: true
            },
            df_general: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"General\".")),
              name: 'General',
              sg: true
            },
            df_groupRecruitment: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Group Recruitment\".")),
              name: 'Group Recruitment',
              sg: true
            },
            df_hardware: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Hardware\".")),
              name: 'Hardware',
              sg: true
            },
            df_help: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Help\".")),
              name: 'Help',
              sg: true
            },
            df_letsPlayTogether: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Let's Play Together\".")),
              name: "Let's Play Together",
              sg: true
            },
            df_moviesTV: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Movies / TV\".")),
              name: 'Movies / TV',
              sg: true
            },
            df_offTopic: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Off Topic\".")),
              name: 'Off Topic',
              sg: true
            },
            df_puzzlesEvents: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Puzzles / Events\".")),
              name: 'Puzzles / Events',
              sg: true
            },
            df_uncategorized: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Uncategorized\".")),
              name: 'Uncategorized',
              sg: true
            },
            df_userProjects: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"User Projects\".")),
              name: 'User Projects',
              sg: true
            },
            df_whitelistRecruitment: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions categorized as \"Whitelist Recruitment\".")),
              name: 'Whitelist Recruitment',
              sg: true
            },
            df_created: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions created by yourself.")),
              name: 'Created',
              sg: true
            },
            df_poll: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions that contain polls.")),
              name: 'Poll',
              sg: true
            },
            df_bookmarked: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions that you have bookmarked.")),
              name: 'Bookmarked',
              sg: true
            },
            df_visited: {
              dependencies: ['gdttt'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions that you have visited.")),
              name: 'Visited',
              sg: true
            },
            df_subscribed: {
              dependencies: ['tds'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions that you have subcribed.")),
              name: 'Subscribed',
              sg: true
            },
            df_unread: {
              dependencies: ['ct'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions that you have read.")),
              name: 'Unread',
              sg: true
            },
            df_authors: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter discussions by author.")),
              name: 'Authors',
              sg: true
            }
          },
          name: 'Multiple Filters',
          sg: true
        }
      },
      id: 'df',
      name: 'Discussion Filters',
      sg: true,
      type: 'discussions'
    };
  }
  async init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('df_s')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('df_s_s')) {
        this.addSingleButton('fa-comments');
      }
      this.esgst.discussionFeatures.push(this.df_addButtons.bind(this));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('df_m') && this.esgst.discussionsPath && !this.esgst.editDiscussionPath) {
      if (!_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.hasAddedFilterContainer) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.style.insertAdjacentText('beforeend', `
					.esgst-gf-container {
						position: ${_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('df_m_f') ? 'sticky' : 'static'};
						top: ${_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.commentsTop}px;
					}
				`);
      }
      createHeadingButton({
        element: this.filters_addContainer(this.esgst.mainPageHeading),
        id: 'df'
      });
    }
    if (!this.esgst.giveawaysPath || !this.esgst.activeDiscussions || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('adots') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('oadd')) return;
    await checkMissingDiscussions();
  }
  df_menu(obj, button) {
    obj.process = new _class_Process__WEBPACK_IMPORTED_MODULE_6__["Process"]({
      button,
      popup: {
        icon: 'fa-comments',
        title: 'Hidden Discussions',
        addProgress: true,
        addScrollable: 'left'
      },
      urls: {
        id: 'df',
        init: this.df_initUrls.bind(this),
        request: {
          request: this.df_requestUrl.bind(this)
        }
      }
    });
  }
  async df_initUrls(obj) {
    obj.popup.getScrollable(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table esgst-text-left"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__heading"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-fill"
    }, "Summary"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Comments")), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__rows",
      ref: ref => obj.discussions = ref
    })));
    const discussions = JSON.parse(getValue('discussions'));
    let hidden = [];
    for (const key in discussions) {
      if (discussions.hasOwnProperty(key)) {
        if (discussions[key].hidden) {
          const discussion = {
            code: key,
            hidden: parseInt(discussions[key].hidden)
          };
          hidden.push(discussion);
        }
      }
    }
    hidden = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_9__["Utils"].sortArray(hidden, true, 'hidden');
    obj.ids = [];
    for (const discussion of hidden) {
      obj.ids.push(discussion.code);
      obj.items.push(`/discussion/${discussion.code}/`);
    }
  }
  async df_requestUrl(obj, details, response, responseHtml) {
    const breadcrumbs = responseHtml.getElementsByClassName('page__heading__breadcrumbs');
    const categoryLink = breadcrumbs[0].firstElementChild.nextElementSibling.nextElementSibling;
    const usernameLink = responseHtml.getElementsByClassName('comment__username')[0].firstElementChild;
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(obj.discussions, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__row-outer-wrap"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__row-inner-wrap"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", null, responseHtml.getElementsByClassName('global__image-outer-wrap')[0]), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-fill"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("h3", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
      className: "table__column__heading",
      href: `/discussion/${obj.ids[obj.index]}/`
    }, categoryLink.nextElementSibling.nextElementSibling.firstElementChild.textContent)), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("p", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
      className: "table__column__secondary-link",
      href: categoryLink.getAttribute('href')
    }, categoryLink.textContent), ' - ', responseHtml.querySelector(`.comment [data-timestamp]`), ' by ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
      className: "table__column__secondary-link",
      href: usernameLink.getAttribute('href')
    }, usernameLink.textContent))), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
      className: "table__column__secondary-link",
      href: `/discussion/${obj.ids[obj.index]}/`
    }, breadcrumbs[1].textContent.match(/(.+) Comments?/)[1]))))));
    await endless_load(obj.discussions);
    if (!this.esgst.giveawaysPath && !this.esgst.discussionsPath && !this.esgst.commentsPath) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gdttt')) {
        await this.esgst.modules.commentsCommentTracker.ct_addDiscussionPanels(obj.discussions, true);
        await this.esgst.modules.generalGiveawayDiscussionTicketTradeTracker.gdttt_checkVisited(obj.discussions);
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('ct')) {
        await this.esgst.modules.commentsCommentTracker.ct_addDiscussionPanels(obj.discussions, true);
      }
      await this.esgst.modules.discussions.discussions_load(obj.discussions);
    }
  }
  df_addButtons(discussions, main) {
    for (const discussion of discussions) {
      if (!discussion.heading.parentElement.getElementsByClassName('esgst-df-button')[0]) {
        new _class_Button__WEBPACK_IMPORTED_MODULE_3__["Button"](discussion.headingContainer.firstElementChild, 'beforebegin', {
          callbacks: [this.df_hideDiscussion.bind(this, discussion, main), null, this.df_unhideDiscussion.bind(this, discussion, main), null],
          className: 'esgst-df-button',
          icons: ['fa-eye-slash esgst-clickable', 'fa-circle-o-notch fa-spin', 'fa-eye esgst-clickable', 'fa-circle-o-notch fa-spin'],
          id: 'df_s',
          index: discussion.saved && discussion.saved.hidden ? 2 : 0,
          titles: ['Hide discussion', 'Hiding discussion...', 'Unhide discussion', 'Unhiding discussion...']
        });
      }
    }
  }
  async df_hideDiscussion(discussion, main) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_5__["Lock"]('discussion', {
      threshold: 300
    });
    await lock.lock();
    let discussions = JSON.parse(getValue('discussions', '{}'));
    if (!discussions[discussion.code]) {
      discussions[discussion.code] = {};
    }
    discussions[discussion.code].hidden = discussions[discussion.code].lastUsed = Date.now();
    await setValue('discussions', JSON.stringify(discussions));
    await lock.unlock();
    if (!main || !this.esgst.discussionPath) {
      discussion.outerWrap.remove();
    }
    return true;
  }
  async df_unhideDiscussion(discussion, main) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_5__["Lock"]('discussion', {
      threshold: 300
    });
    await lock.lock();
    let discussions = JSON.parse(getValue('discussions', '{}'));
    if (discussions[discussion.code]) {
      delete discussions[discussion.code].hidden;
      discussions[discussion.code].lastUsed = Date.now();
    }
    await setValue('discussions', JSON.stringify(discussions));
    await lock.unlock();
    if (!main || !this.esgst.discussionPath) {
      discussion.outerWrap.remove();
    }
    return true;
  }
  getFilters() {
    return {
      comments: {
        check: true,
        minValue: 0,
        name: 'Comments',
        type: 'integer'
      },
      addonsTools: {
        check: true,
        name: 'Add-ons / Tools',
        type: 'boolean'
      },
      announcements: {
        check: true,
        name: 'Announcements',
        type: 'boolean'
      },
      bugsSuggestion: {
        check: true,
        name: 'Bugs / Suggestion',
        type: 'boolean'
      },
      deals: {
        check: true,
        name: 'Deals',
        type: 'boolean'
      },
      gameShowcase: {
        check: true,
        name: 'Game / Showcase',
        type: 'boolean'
      },
      general: {
        check: true,
        name: 'General',
        type: 'boolean'
      },
      groupRecruitment: {
        check: true,
        name: 'Group Recruitment',
        type: 'boolean'
      },
      hardware: {
        check: true,
        name: 'Hardware',
        type: 'boolean'
      },
      help: {
        check: true,
        name: 'Help',
        type: 'boolean'
      },
      letsPlayTogether: {
        check: true,
        name: "Let's Play Together",
        type: 'boolean'
      },
      moviesTV: {
        check: true,
        name: 'Movies / TV',
        type: 'boolean'
      },
      offTopic: {
        check: true,
        name: 'Off Topic',
        type: 'boolean'
      },
      puzzlesEvents: {
        check: true,
        name: 'Puzzles / Events',
        type: 'boolean'
      },
      uncategorized: {
        check: true,
        name: 'Uncategorized',
        type: 'boolean'
      },
      userProjects: {
        check: true,
        name: 'User Projects',
        type: 'boolean'
      },
      whitelistRecruitment: {
        check: true,
        name: 'Whitelist Recruitment',
        type: 'boolean'
      },
      created: {
        check: true,
        name: 'Created',
        type: 'boolean'
      },
      poll: {
        check: true,
        name: 'Poll',
        type: 'boolean'
      },
      bookmarked: {
        check: true,
        name: 'Bookmarked',
        type: 'boolean'
      },
      visited: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gdttt'),
        name: 'Visited',
        type: 'boolean'
      },
      subscribed: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('tds'),
        name: 'Subscribed',
        type: 'boolean'
      },
      unread: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('ct'),
        name: 'Unread',
        type: 'boolean'
      },
      authors: {
        check: true,
        list: true,
        name: 'Authors',
        type: 'string'
      }
    };
  }
}
const discussionsDiscussionFilters = new DiscussionsDiscussionFilters();


/***/ }),
/* 313 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tradesTradeFilters", function() { return tradesTradeFilters; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(276);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(209);
/* harmony import */ var _class_Process__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(279);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(132);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(144);
/* harmony import */ var _Filters__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(311);












const createElements = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  endless_load = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]);
class TradesTradeFilters extends _Filters__WEBPACK_IMPORTED_MODULE_11__["Filters"] {
  constructor() {
    super('tf');
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter trades.")),
      features: {
        tf_s: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-eye"
          }), " if the trade is hidden and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-eye-slash"
          }), " if it is not) next to a trade's title (in any page) that allows you to hide the trade."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-comments"
          }), ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-eye-slash"
          }), ") to the page heading of this menu that allows you to view all of the trades that have been hidden.")),
          name: 'Single Filters',
          st: true,
          features: {
            tf_s_s: {
              name: `Show switch to temporarily hide / unhide trades filtered by the filters in the main page heading, along with a counter.`,
              st: true
            }
          }
        },
        tf_m: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to hide multiple trades in a page using many different filters."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a toggle switch with a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-sliders"
          }), ") to the main page heading of any ", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
            href: "https://www.steamtrades.com/trades"
          }, "trades"), " page. The switch allows you to turn the filters on/off and the button allows you to manage your presets."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a collapsible panel below the same main page heading that allows you to change/save the rules of a preset. The filters are separated in 2 categories:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Basic filters are related to a numeric value (such as the number of comments of a trade) and have a slider that you can use to set the range of the filter (any trades that do not apply to the range will be hidden)."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Type filters are related to a boolean value (such as whether or not a trade was created by yourself) and have a checkbox that changes states when you click on it. The checkbox has 3 states:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "\"Show all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-check-square"
          }), ") does not hide any trades that apply to the filter (this is the default state)."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "\"Show only\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-square"
          }), ") hides any trades that do not apply to the filter."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "\"Hide all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-square-o"
          }), ") hides any trades that apply to the filter."))), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "A preset contains all of your rules and can be saved to be reused later. You can save as many presets as you want. Each preset contains 3 types of rules:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Basic rules are the ones that you can change directly in the filter panel, using the sliders/checkboxes as explained in the previous item."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Exception rules are the ones that you can change by clicking on the icon "), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-gear"
          }), " in the filter panel. They are exceptions to the basic rules. For example, if you set the basic rule of the \"Created\" filter to \"hide all\" and you add an exception rule for the \"Comments\" filter to the 0-50 range, none of your created trades that have 0-50 comments will be hidden, because they apply to the exception."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Override rules are the ones that you can change by clicking on the icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-exclamation esgst-faded"
          }), " if set to overridable and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
            className: "fa fa-exclamation"
          }), " if set to non-overridable) next to each filter. They are enforcements of the basic rules. Continuing the previous example, if you set the override rule of the \"Created\" filter to \"non-overridable\", then all of your created trades will be hidden, because even if they apply to the exception, the basic rule is being enforced by the override rule, so the exception cannot override it.")),
          features: {
            tf_m_f: {
              name: 'Fix filter bar at the top of the page.',
              st: true
            },
            tf_m_b: {
              name: 'Hide basic filters.',
              st: true
            },
            tf_m_a: {
              name: 'Hide advanced filters.',
              st: true
            },
            tf_comments: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter trades by number of comments.")),
              name: 'Comments',
              st: true
            },
            tf_created: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter trades created by yourself.")),
              name: 'Created',
              st: true
            },
            tf_visited: {
              dependencies: ['gdttt'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter trades that you have visited.")),
              name: 'Visited',
              st: true
            },
            tf_subscribed: {
              dependencies: ['tds'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter trades that you have subscribed.")),
              name: 'Subscribed',
              st: true
            },
            tf_unread: {
              dependencies: ['ct'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter trades that you have read.")),
              name: 'Unread',
              st: true
            },
            tf_authors: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter trades by author.")),
              name: 'Authors',
              st: true
            },
            tf_positiveReputation: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter trades by the positive reputation of the author.")),
              name: 'Positive Reputation',
              st: true
            },
            tf_negativeReputation: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter trades by the negative reputation of the author.")),
              name: 'Negative Reputation',
              st: true
            }
          },
          name: 'Multiple Filters',
          st: true
        }
      },
      id: 'tf',
      name: 'Trade Filters',
      st: true,
      type: 'trades'
    };
  }
  async init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('tf_s')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('tf_s_s')) {
        this.addSingleButton('fa-comments');
      }
      this.esgst.tradeFeatures.push(this.tf_addButtons.bind(this));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('tf_m') && _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.tradesPath && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.editTradePath) {
      if (!_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.hasAddedFilterContainer) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.style.insertAdjacentText('beforeend', `
					.esgst-gf-container {
						position: ${_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('tf_m_f') ? 'sticky' : 'static'};
						top: ${_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.commentsTop}px;
					}
				`);
      }
      createHeadingButton({
        element: this.filters_addContainer(_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.mainPageHeading),
        id: 'tf'
      });
    }
  }
  tf_menu(obj, button) {
    obj.process = new _class_Process__WEBPACK_IMPORTED_MODULE_6__["Process"]({
      button,
      popup: {
        icon: 'fa-comments',
        title: 'Hidden Trades',
        addProgress: true,
        addScrollable: 'left'
      },
      urls: {
        id: 'tf',
        init: this.tf_initUrls.bind(this),
        request: {
          request: this.tf_requestUrl.bind(this)
        }
      }
    });
  }
  async tf_initUrls(obj) {
    obj.popup.getScrollable(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table is_trades esgst-text-left"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "header"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "header_summary"
    }, "Summary"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "header_comments"
    }, "Comments")), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__rows",
      ref: ref => obj.trades = ref
    })));
    const trades = JSON.parse(getValue('trades'));
    let hidden = [];
    for (const key in trades) {
      if (trades.hasOwnProperty(key)) {
        if (trades[key].hidden) {
          const trade = {
            code: key,
            hidden: parseInt(trades[key].hidden)
          };
          hidden.push(trade);
        }
      }
    }
    hidden = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_9__["Utils"].sortArray(hidden, true, 'hidden');
    obj.ids = [];
    for (const trade of hidden) {
      obj.ids.push(trade.code);
      obj.items.push(`/trade/${trade.code}/`);
    }
  }
  async tf_requestUrl(obj, details, response, responseHtml) {
    const breadcrumbs = responseHtml.getElementsByClassName('page_heading_breadcrumbs');
    const usernameLink = responseHtml.getElementsByClassName('author_name')[0];
    const avatar = responseHtml.getElementsByClassName('author_avatar')[0];
    avatar.classList.remove('author_avatar');
    avatar.classList.add('avatar');
    const reputation = responseHtml.getElementsByClassName('author_small')[0];
    reputation.classList.remove('author_small');
    reputation.classList.add('reputation');
    createElements(obj.trades, 'beforeend', [{
      type: 'div',
      children: [{
        attributes: {
          class: 'row_outer_wrap'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'row_inner_wrap'
          },
          type: 'div',
          children: [{
            type: 'div',
            children: [{
              context: avatar
            }]
          }, {
            attributes: {
              class: 'row_trade_name'
            },
            type: 'div',
            children: [{
              type: 'h2',
              children: [{
                attributes: {
                  href: `/trade/${obj.ids[obj.index]}/`
                },
                text: breadcrumbs[0].firstElementChild.nextElementSibling.nextElementSibling.firstElementChild.textContent,
                type: 'a'
              }]
            }]
          }, {
            attributes: {
              class: 'row_trade_creator_user'
            },
            type: 'div',
            children: [{
              type: 'p',
              children: [{
                attributes: {
                  class: 'row_expanded'
                },
                text: ' ',
                type: 'span'
              }, {
                context: responseHtml.querySelector(`.comment_outer [data-timestamp]`)
              }, {
                text: ' by ',
                type: 'node'
              }, {
                attributes: {
                  class: 'underline',
                  href: usernameLink.getAttribute('href')
                },
                text: usernameLink.textContent,
                type: 'a'
              }, {
                text: ' ',
                type: 'node'
              }, {
                context: reputation
              }]
            }]
          }, {
            attributes: {
              class: 'row_trade_comments'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'underline',
                href: `/trade/${obj.ids[obj.index]}/`
              },
              text: `${breadcrumbs[1].textContent.match(/(.+) Comments?/)[1]}`,
              type: 'a'
            }]
          }]
        }]
      }]
    }]);
    await endless_load(obj.trades);
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.tradesPath) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gdttt')) {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.modules.commentsCommentTracker.ct_addDiscussionPanels(obj.trades, true);
        await _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.modules.generalGiveawayDiscussionTicketTradeTracker.gdttt_checkVisited(obj.trades);
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('ct')) {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.modules.commentsCommentTracker.ct_addDiscussionPanels(obj.trades, true);
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.modules.discussions.discussions_load(obj.trades);
    }
  }
  tf_addButtons(trades, main) {
    for (const trade of trades) {
      if (!trade.heading.parentElement.getElementsByClassName('esgst-df-button')[0]) {
        new _class_Button__WEBPACK_IMPORTED_MODULE_3__["Button"](trade.headingContainer.firstElementChild, 'beforebegin', {
          callbacks: [this.tf_hideTrade.bind(this, trade, main), null, this.tf_unhideTrade.bind(this, trade, main), null],
          className: 'esgst-df-button',
          icons: ['fa-eye-slash esgst-clickable', 'fa-circle-o-notch fa-spin', 'fa-eye esgst-clickable', 'fa-circle-o-notch fa-spin'],
          id: 'tf_s',
          index: trade.saved && trade.saved.hidden ? 2 : 0,
          titles: ['Hide trade', 'Hiding trade...', 'Unhide trade', 'Unhiding trade...']
        });
      }
    }
  }
  async tf_hideTrade(trade, main) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_5__["Lock"]('trade', {
      threshold: 300
    });
    await lock.lock();
    let trades = JSON.parse(getValue('trades', '{}'));
    if (!trades[trade.code]) {
      trades[trade.code] = {};
    }
    trades[trade.code].hidden = trades[trade.code].lastUsed = Date.now();
    await setValue('trades', JSON.stringify(trades));
    await lock.unlock();
    if (!main || !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.tradePath) {
      trade.outerWrap.remove();
    }
    return true;
  }
  async tf_unhideTrade(trade, main) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_5__["Lock"]('trade', {
      threshold: 300
    });
    await lock.lock();
    let trades = JSON.parse(getValue('trades', '{}'));
    if (trades[trade.code]) {
      delete trades[trade.code].hidden;
      trades[trade.code].lastUsed = Date.now();
    }
    await setValue('trades', JSON.stringify(trades));
    await lock.unlock();
    if (!main || !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.tradePath) {
      trade.outerWrap.remove();
    }
    return true;
  }
  getFilters() {
    return {
      comments: {
        check: true,
        minValue: 0,
        name: 'Comments',
        type: 'integer'
      },
      created: {
        check: true,
        name: 'Created',
        type: 'boolean'
      },
      visited: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gdttt'),
        name: 'Visited',
        type: 'boolean'
      },
      subscribed: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('tds'),
        name: 'Subscribed',
        type: 'boolean'
      },
      unread: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('ct'),
        name: 'Unread',
        type: 'boolean'
      },
      authors: {
        check: true,
        list: true,
        name: 'Authors',
        type: 'string'
      },
      positiveReputation: {
        check: true,
        minValue: 0,
        name: 'Positive Reputation',
        type: 'integer'
      },
      negativeReputation: {
        check: true,
        minValue: 0,
        name: 'Negative Reputation',
        type: 'integer'
      }
    };
  }
}
const tradesTradeFilters = new TradesTradeFilters();


/***/ }),
/* 314 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "groupsGroupFilters", function() { return groupsGroupFilters; });
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(144);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _Filters__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(311);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





class GroupsGroupFilters extends _Filters__WEBPACK_IMPORTED_MODULE_2__["Filters"] {
  constructor() {
    super('gpf');
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a toggle switch with a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-sliders"
      }), ") to the main page heading of the ", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/steam/groups"
      }, "groups"), ' ', "page. The switch allows you to turn the filters on/off and the button allows you to manage your presets."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a collapsible panel below the same main page heading that allows you to change/save the rules of a preset. The filters are separated in 2 categories:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Basic filters are related to a numeric value (such as the number of comments of a group) and have a slider that you can use to set the range of the filter (any groups that do not apply to the range will be hidden)."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Type filters are related to a boolean value (such as whether or not a group was created by yourself) and have a checkbox that changes states when you click on it. The checkbox has 3 states:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "\"Show all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-check-square"
      }), ") does not hide any groups that apply to the filter (this is the default state)."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "\"Show only\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-square"
      }), ") hides any groups that do not apply to the filter."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "\"Hide all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-square-o"
      }), ") hides any groups that apply to the filter."))), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "A preset contains all of your rules and can be saved to be reused later. You can save as many presets as you want. Each preset contains 3 types of rules:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Basic rules are the ones that you can change directly in the filter panel, using the sliders/checkboxes as explained in the previous item."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Exception rules are the ones that you can change by clicking on the icon "), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-gear"
      }), " in the filter panel. They are exceptions to the basic rules. For example, if you set the basic rule of the \"Created\" filter to \"hide all\" and you add an exception rule for the \"Comments\" filter to the 0-50 range, none of your created groups that have 0-50 comments will be hidden, because they apply to the exception."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Override rules are the ones that you can change by clicking on the icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-exclamation esgst-faded"
      }), " if set to overridable and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-exclamation"
      }), " if set to non-overridable) next to each filter. They are enforcements of the basic rules. Continuing the previous example, if you set the override rule of the \"Created\" filter to \"non-overridable\", then all of your created groups will be hidden, because even if they apply to the exception, the basic rule is being enforced by the override rule, so the exception cannot override it."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a text in parenthesis to the pagination of the page showing how many groups in the page are being filtered by the filters.")),
      features: {
        gpf_m_f: {
          name: 'Fix filter bar at the top of the page.',
          sg: true
        },
        gpf_m_b: {
          name: 'Hide basic filters.',
          sg: true
        },
        gpf_m_a: {
          name: 'Hide advanced filters.',
          sg: true
        },
        gpf_firstGiveaway: {
          dependencies: ['gs', 'gs_firstGiveaway'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the date of the first giveaway made.")),
          name: 'First Giveaway',
          sg: true
        },
        gpf_lastGiveaway: {
          dependencies: ['gs', 'gs_lastGiveaway'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the date of the last giveaway made.")),
          name: 'Last Giveaway',
          sg: true
        },
        gpf_averageEntries: {
          dependencies: ['gs', 'gs_averageEntries'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the number of average entries per giveaway.")),
          name: 'Average Entries',
          sg: true
        },
        gpf_contributors: {
          dependencies: ['gs', 'gs_contributors'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the number of members that have contributed.")),
          name: 'Contributors',
          sg: true
        },
        gpf_winners: {
          dependencies: ['gs', 'gs_winners'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the number of members that have won.")),
          name: 'Winners',
          sg: true
        },
        gpf_giftsSent: {
          dependencies: ['gs', 'gs_giftsSent'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the number of gifts that have been sent.")),
          name: 'Gifts Sent',
          sg: true
        },
        gpf_giftsSentValue: {
          dependencies: ['gs', 'gs_giftsSent'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the dollar value of gifts that have been sent.")),
          name: 'Gifts Sent Value',
          sg: true
        },
        gpf_sent: {
          dependencies: ['gs', 'gs_sent'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the number of gifts that you have sent.")),
          name: 'Sent',
          sg: true
        },
        gpf_sentValue: {
          dependencies: ['gs', 'gs_sent'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the dollar value of gifts that you have sent.")),
          name: 'Sent Value',
          sg: true
        },
        gpf_received: {
          dependencies: ['gs', 'gs_received'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the number of gifts that you have received.")),
          name: 'Received',
          sg: true
        },
        gpf_receivedValue: {
          dependencies: ['gs', 'gs_received'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the dollar value of gifts that you have received.")),
          name: 'Received Value',
          sg: true
        },
        gpf_giftDifference: {
          dependencies: ['gs', 'gs_giftDifference'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups on the difference between gifts you have sent and gifts you have receieved.")),
          name: 'Gift Difference',
          sg: true
        },
        gpf_valueDifference: {
          dependencies: ['gs', 'gs_valueDifference'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups based on the dollar difference between the value of gifts you have sent and the value of gifts you have received.")),
          name: 'Value Difference',
          sg: true
        },
        gpf_giveaways: {
          dependencies: ['gs', 'gs_giveaways'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the number of giveaways that have been made.")),
          name: 'Giveaways',
          sg: true
        },
        gpf_users: {
          dependencies: ['gs', 'gs_users'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by the number of users that are members.")),
          name: 'Users',
          sg: true
        },
        gpf_creationDate: {
          dependencies: ['gs', 'gs_creationDate'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups by their creation date.")),
          name: 'Creation Date',
          sg: true
        },
        gpf_officialGameGroup: {
          dependencies: ['gs', 'gs_type'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups that are official game groups.")),
          name: 'Official Game Group',
          sg: true
        },
        gpf_open: {
          dependencies: ['gs', 'gs_type'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups that are open to join.")),
          name: 'Open',
          sg: true
        },
        gpf_restricted: {
          dependencies: ['gs', 'gs_type'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups that are restricted to join.")),
          name: 'Restricted',
          sg: true
        },
        gpf_closed: {
          dependencies: ['gs', 'gs_type'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to filter groups that are closed to join.")),
          name: 'Closed',
          sg: true
        }
      },
      id: 'gpf',
      name: 'Group Filters',
      sg: true,
      type: 'groups'
    };
  }
  async init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].common.isCurrentPath('Steam - Groups')) {
      return;
    }
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.hasAddedFilterContainer) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.style.insertAdjacentText('beforeend', `
				.esgst-gf-container {
					position: ${_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gpf_m_f') ? 'sticky' : 'static'};
					top: ${_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.commentsTop}px;
				}
			`);
    }
    _Common__WEBPACK_IMPORTED_MODULE_0__["common"].createHeadingButton({
      element: this.filters_addContainer(_class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.mainPageHeading),
      id: 'gpf'
    });
  }
  getFilters() {
    return {
      giveaways: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_giveaways'),
        name: 'Giveaways',
        type: 'integer'
      },
      users: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_users'),
        name: 'Users',
        type: 'integer'
      },
      firstGiveaway: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_firstGiveaway'),
        date: true,
        name: 'First Giveaway',
        type: 'integer'
      },
      lastGiveaway: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_lastGiveaway'),
        date: true,
        name: 'Last Giveaway',
        type: 'integer'
      },
      averageEntries: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_averageEntries'),
        name: 'Average Entries',
        type: 'integer'
      },
      contributors: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_contributors'),
        name: 'Contributors',
        type: 'integer'
      },
      winners: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_winners'),
        name: 'Winners',
        type: 'integer'
      },
      giftsSent: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_giftsSent'),
        name: 'Gifts Sent',
        type: 'integer'
      },
      giftsSentValue: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_giftsSent'),
        name: 'Gifts Sent Value',
        type: 'double'
      },
      sent: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_sent'),
        name: 'Sent',
        type: 'double'
      },
      sentValue: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_sent'),
        name: 'Sent Value',
        type: 'double'
      },
      received: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_received'),
        name: 'Received',
        type: 'double'
      },
      receivedValue: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_received'),
        name: 'Received Value',
        type: 'double'
      },
      giftDifference: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_giftDifference'),
        name: 'Gift Difference',
        type: 'double'
      },
      valueDifference: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_valueDifference'),
        name: 'Value Difference',
        type: 'double'
      },
      creationDate: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_creationDate'),
        date: true,
        name: 'Creation Date',
        type: 'integer'
      },
      officialGameGroup: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_type'),
        name: 'Official Game Group',
        type: 'boolean'
      },
      open: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_type'),
        name: 'Open',
        type: 'boolean'
      },
      restricted: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_type'),
        name: 'Restricted',
        type: 'boolean'
      },
      closed: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs') && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('gs_type'),
        name: 'Closed',
        type: 'boolean'
      }
    };
  }
}
const groupsGroupFilters = new GroupsGroupFilters();


/***/ }),
/* 315 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayFilters", function() { return giveawaysGiveawayFilters; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(276);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(209);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(144);
/* harmony import */ var _Filters__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(311);








const createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]);
class GiveawaysGiveawayFilters extends _Filters__WEBPACK_IMPORTED_MODULE_7__["Filters"] {
  constructor() {
    super('gf');
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("fragment", null, "Filter giveaways."),
      features: {
        gf_s: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
            className: "fa fa-eye-slash"
          }), ") next to a giveaway's title in any page that allows you to hide that individual giveaway."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
            className: "fa fa-gift"
          }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
            className: "fa fa-eye-slash"
          }), ") to the page heading of the settings menu that allows you to manage your hidden giveaways.")),
          name: 'Single Filters',
          sg: true,
          features: {
            gf_s_s: {
              name: `Show switch to temporarily hide / unhide giveaways filtered by the filters in the main page heading, along with a counter.`,
              sg: true
            }
          }
        },
        gf_m: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to hide multiple giveaways in a page using many different filters."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a toggle switch with a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
            className: "fa fa-sliders"
          }), ") to the main page heading of any ", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
            href: "https://www.steamgifts.com/giveaways"
          }, "giveaways"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
            href: "https://www.steamgifts.com/giveaways/created"
          }, "created"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
            href: "https://www.steamgifts.com/giveaways/entered"
          }, "entered"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
            href: "https://www.steamgifts.com/giveaways/won"
          }, "won"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
            href: "https://www.steamgifts.com/user/cg"
          }, "user"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
            href: "https://www.steamgifts.com/group/SJ7Bu/"
          }, "group"), " page and some popups (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("span", {
            "data-esgst-feature-id": "gb"
          }), ", ", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("span", {
            "data-esgst-feature-id": "ged"
          }), ",", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("span", {
            "data-esgst-feature-id": "ge"
          }), ", etc...). The switch allows you to turn the filters on/off and the button allows you to manage your presets."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a collapsible panel below the same main page heading that allows you to change/save the rules of a preset. The filters are separated in 3 categories:"), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Basic filters are related to a numeric value (such as the level of a giveaway) and have a slider that you can use to set the range of the filter (any giveaways that do not apply to the range will be hidden)."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Type filters are related to a boolean value (such as whether or not a giveaway was created by yourself) and have a checkbox that changes states when you click on it. The checkbox has 3 states:"), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "\"Show all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
            className: "fa fa-check-square"
          }), ") does not hide any giveaways that apply to the filter (this is the default state)."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "\"Show only\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
            className: "fa fa-square"
          }), ") hides any giveaways that do not apply to the filter."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "\"Hide all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
            className: "fa fa-square-o"
          }), ") hides any giveaways that apply to the filter.")), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Category filters are essentially the same thing as type filters, but for game categories (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("span", {
            "data-esgst-feature-id": "gc"
          }), ").")), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "A preset contains all of your rules and can be saved to be reused later. You can save as many presets as you want. Each preset contains 3 types of rules:"), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Basic rules are the ones that you can change directly in the filter panel, using the sliders/checkboxes as explained in the previous item."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Exception rules are the ones that you can change by clicking on the icon", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
            className: "fa fa-gear"
          }), " in the filter panel. They are exceptions to the basic rules. For example, if you set the basic rule of the \"Created\" filter to \"hide all\" and you add an exception rule for the \"Level\" filter to the 0-5 range, none of your created giveaways that are for the levels 0-5 will be hidden, because they apply to the exception."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Override rules are the ones that you can change by clicking on the icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
            className: "fa fa-exclamation esgst-faded"
          }), " if set to overridable and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
            className: "fa fa-exclamation"
          }), " if set to non-overridable) next to each filter. They are enforcements of the basic rules. Continuing the previous example, if you set the override rule of the \"Created\" filter to \"non-overridable\", then all of your created giveaways will be hidden, because even if they apply to the exception, the basic rule is being enforced by the override rule, so the exception cannot override it."))),
          features: {
            gf_m_f: {
              name: 'Fix filter bar at the top of the page.',
              sg: true
            },
            gf_m_b: {
              name: 'Hide basic filters.',
              sg: true
            },
            gf_m_a: {
              name: 'Hide advanced filters.',
              sg: true
            },
            gf_level: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by level.")),
              name: 'Level',
              sg: true
            },
            gf_entries: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by number of entries.")),
              name: 'Entries',
              sg: true
            },
            gf_copies: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by number of copies.")),
              name: 'Copies',
              sg: true
            },
            gf_points: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by how many points they cost.")),
              name: 'Points',
              sg: true
            },
            gf_comments: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by number of comments.")),
              name: 'Comments',
              sg: true
            },
            gf_minutesToEnd: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by how much time they have left.")),
              name: 'Minutes To End',
              sg: true
            },
            gf_minutesFromStart: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by how long ago they started.")),
              name: 'Minutes From Start',
              sg: true
            },
            gf_chance: {
              dependencies: ['gwc'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by chance (basic).")),
              name: 'Chance',
              sg: true
            },
            gf_projectedChance: {
              dependencies: ['gwc', 'gwc_a'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by projected chance (advanced).")),
              name: 'Projected Chance',
              sg: true
            },
            gf_chancePerPoint: {
              dependencies: ['gwc'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by chance per point using the basic chance.")),
              name: 'Chance Per Point',
              sg: true
            },
            gf_projectedChancePerPoint: {
              dependencies: ['gwc', 'gwc_a'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by chance per point using the advanced chance.")),
              name: 'Projected Chance Per Point',
              sg: true
            },
            gf_ratio: {
              dependencies: ['gwr'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by ratio (basic).")),
              name: 'Ratio',
              sg: true
            },
            gf_projectedRatio: {
              dependencies: ['gwr', 'gwr_a'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by projected ratio (advanced).")),
              name: 'Projected Ratio',
              sg: true
            },
            gf_pointsToWin: {
              dependencies: ['gptw'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by points to win.")),
              name: 'Points To Win',
              sg: true
            },
            gf_rating: {
              dependencies: ['gc', 'gc_r'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by rating percentage of the game.")),
              name: 'Rating',
              sg: true
            },
            gf_reviews: {
              dependencies: ['gc', 'gc_r'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by the number of reviews that the game has.")),
              name: 'Reviews',
              sg: true
            },
            gf_releaseDate: {
              dependencies: ['gc', 'gc_rd'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by release date of the game.")),
              name: 'Release Date',
              sg: true
            },
            gf_pinned: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that are pinned.")),
              name: 'Pinned',
              sg: true
            },
            gf_public: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that are public.")),
              name: 'Public',
              sg: true
            },
            gf_inviteOnly: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that are invite only.")),
              name: 'Invite Only',
              sg: true
            },
            gf_group: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that are for groups.")),
              name: 'Group',
              sg: true
            },
            gf_whitelist: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that are for whitelist.")),
              name: 'Whitelist',
              sg: true
            },
            gf_nonMemberGroup: {
              dependencies: ['cl', 'ggl'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that are for groups/whitelist, where you're not a member of any of the groups.")),
              name: 'Non-Member Group',
              sg: true
            },
            gf_regionRestricted: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that are region restricted.")),
              name: 'Region Restricted',
              sg: true
            },
            gf_enterable: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you filter giveaways that are enterable in", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("span", {
                "data-esgst-feature-id": "ge"
              }), "."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "The difference between this filter and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("span", {
                "data-esgst-feature-id": "gf_currentlyEnterable"
              }), " is that this filter checks if you are allowed to enter the giveaway, not if you can enter the giveaway at the moment (for example, if the giveaway has not started yet or you do not have enough points to enter the giveaway, the giveaway is considered as enterable, just not currently enterable).")),
              name: 'Enterable',
              sg: true
            },
            gf_currentlyEnterable: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you filter giveaways that are currently enterable in", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("span", {
                "data-esgst-feature-id": "ge"
              }), "."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "The difference between this filter and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("span", {
                "data-esgst-feature-id": "gf_enterable"
              }), " is that this filter checks if you can enter the giveaway at the moment, not if you are allowed to enter the giveaway (for example, if the giveaway has not started yet or you do not have enough points to enter the giveaway, the giveaway is not considered as currently enterable, but just enterable).")),
              name: 'Currently Enterable',
              sg: true
            },
            gf_created: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways created by yourself.")),
              name: 'Created',
              sg: true
            },
            gf_received: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that have been marked as received.")),
              name: 'Received',
              sg: true
            },
            gf_notReceived: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that have been marked as not received.")),
              name: 'Not Received',
              sg: true
            },
            gf_awaitingFeedback: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that are awaiting feedback.")),
              name: 'Awaiting Feedback',
              sg: true
            },
            gf_entered: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that you have entered.")),
              name: 'Entered',
              sg: true
            },
            gf_started: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that have started.")),
              name: 'Started',
              sg: true
            },
            gf_ended: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that have ended.")),
              name: 'Ended',
              sg: true
            },
            gf_deleted: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that have been deleted.")),
              name: 'Deleted',
              sg: true
            },
            gf_owned: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that you own on Steam.")),
              name: 'Owned',
              sg: true
            },
            gf_wishlisted: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that you have wishlisted on Steam.")),
              name: 'Wishlisted',
              sg: true
            },
            gf_previouslyWishlisted: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that you previously had on your wishlist.")),
              name: 'Previously Wishlisted',
              sg: true
            },
            gf_followed: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that you have followed on Steam.")),
              name: 'Followed',
              sg: true,
              syncKeys: ['FollowedGames']
            },
            gf_hidden: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that you have hidden on SteamGifts.")),
              name: 'Hidden',
              sg: true
            },
            gf_ignored: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that you have ignored on Steam.")),
              name: 'Ignored',
              sg: true
            },
            gf_previouslyEntered: {
              dependencies: ['egh'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that you have previously entered giveaways for.")),
              name: 'Previously Entered',
              sg: true
            },
            gf_previouslyWon: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that you have previously won.")),
              name: 'Previously Won',
              sg: true
            },
            gf_bookmarked: {
              dependencies: ['gb'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways that you have bookmarked.")),
              name: 'Bookmarked',
              sg: true
            },
            gf_fullCV: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that give full CV.")),
              name: 'Full CV',
              sg: true
            },
            gf_reducedCV: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that give reduced CV.")),
              name: 'Reduced CV',
              sg: true
            },
            gf_noCV: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that give no CV.")),
              name: 'No CV',
              sg: true
            },
            gf_sgTools: {
              dependencies: ['ge'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter SGTools giveaways.")),
              name: 'SGTools',
              sg: true
            },
            gf_groups: {
              dependencies: ['cl', 'ggl'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by group.")),
              name: 'Groups',
              sg: true
            },
            gf_creators: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by creator.")),
              name: 'Creators',
              sg: true
            },
            gf_winners: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by winner.")),
              name: 'Winners',
              sg: true
            },
            gf_learning: {
              dependencies: ['gc', 'gc_lg'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that Steam is learning about.")),
              name: 'Learning',
              sg: true
            },
            gf_removed: {
              dependencies: ['gc', 'gc_rm'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that have been removed from the Steam store.")),
              name: 'Removed',
              sg: true
            },
            gf_banned: {
              dependencies: ['gc', 'gc_bd'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that are banned on Steam.")),
              name: 'Banned',
              sg: true
            },
            gf_tradingCards: {
              dependencies: ['gc', 'gc_tc'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that have trading cards.")),
              name: 'Trading Cards',
              sg: true
            },
            gf_achievements: {
              dependencies: ['gc', 'gc_a'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that have achievements.")),
              name: 'Achievements',
              sg: true
            },
            gf_singleplayer: {
              dependencies: ['gc', 'gc_sp'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that are singleplayer.")),
              name: 'Singleplayer',
              sg: true
            },
            gf_multiplayer: {
              dependencies: ['gc', 'gc_mp'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that are multiplayer.")),
              name: 'Multiplayer',
              sg: true
            },
            gf_steamCloud: {
              dependencies: ['gc', 'gc_sc'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that have Steam Cloud.")),
              name: 'Steam Cloud',
              sg: true
            },
            gf_linux: {
              dependencies: ['gc', 'gc_l'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that have are compatible with Linux.")),
              name: 'Linux',
              sg: true
            },
            gf_mac: {
              dependencies: ['gc', 'gc_m'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that are compatible with Mac.")),
              name: 'Mac',
              sg: true
            },
            gf_dlc: {
              dependencies: ['gc', 'gc_dlc'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that are DLCs.")),
              name: 'DLC',
              sg: true
            },
            gf_dlcOwned: {
              dependencies: ['gc', 'gc_dlc', 'gc_dlc_o'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that are DLCs and have a base game that you own.")),
              name: `DLC (Owned Base)`,
              sg: true
            },
            gf_dlcFree: {
              dependencies: ['gc', 'gc_dlc', 'gc_dlc_b'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that are DLCs and have a free base game.")),
              name: `DLC (Free Base)`,
              sg: true
            },
            gf_dlcNonFree: {
              dependencies: ['gc', 'gc_dlc', 'gc_dlc_b'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that are DLCs and have a non-free base game.")),
              name: `DLC (Non-Free Base)`,
              sg: true
            },
            gf_package: {
              dependencies: ['gc', 'gc_p'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that are packages.")),
              name: 'Package',
              sg: true
            },
            gf_earlyAccess: {
              dependencies: ['gc', 'gc_ea'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways for games that are in early access.")),
              name: 'Early Access',
              sg: true
            },
            gf_genres: {
              dependencies: ['gc', 'gc_g'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by game genre.")),
              name: 'Genres',
              sg: true
            },
            gf_tags: {
              dependencies: ['gt'],
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to filter giveaways by game tags.")),
              name: 'Game Tags',
              sg: true
            },
            gf_os: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to quickly enable/disable SteamGifts' \"Filter by OS\" filter.")),
              name: `OS (SteamGifts)`,
              sg: true
            },
            gf_alreadyOwned: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to quickly enable/disable SteamGifts' \"Hide games you already own\" filter.")),
              name: `Already Owned (SteamGifts)`,
              sg: true
            },
            gf_dlcMissingBase: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to quickly enable/disable SteamGifts' \"Hide DLC if you're missing the base game\" filter.")),
              name: `DLC Missing Base (SteamGifts)`,
              sg: true
            },
            gf_aboveLevel: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to quickly enable/disable SteamGifts' \"Hide giveaways above your level\" filter.")),
              name: `Above Level (SteamGifts)`,
              sg: true
            },
            gf_manuallyFiltered: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to quickly enable/disable SteamGifts' \"Hide games you manually filtered\" filter.")),
              name: `Manually Filtered (SteamGifts)`,
              sg: true
            }
          },
          name: 'Multiple Filters',
          sg: true
        }
      },
      id: 'gf',
      name: 'Giveaway Filters',
      sg: true,
      sync: `Owned/Wishlisted/Ignored Games, Giveaways, Hidden Games, No CV Games, Reduced CV Games, Won Games`,
      syncKeys: ['Games', 'Giveaways', 'HiddenGames', 'NoCvGames', 'ReducedCvGames', 'WonGames'],
      type: 'giveaways'
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gf_s')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gf_s_s')) {
        this.addSingleButton('fa-gift');
      }
      this.esgst.giveawayFeatures.push(this.gf_getGiveaways.bind(this));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gf_m') && (this.esgst.giveawaysPath || this.esgst.createdPath || this.esgst.enteredPath || this.esgst.wonPath || this.esgst.gamePath || this.esgst.groupPath || this.esgst.userPath)) {
      if (!_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.hasAddedFilterContainer) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.style.insertAdjacentText('beforeend', `
					.esgst-gf-container {
						position: ${_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gf_m_f') ? 'sticky' : 'static'};
						top: ${_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.commentsTop}px;
					}
				`);
      }
      createHeadingButton({
        element: this.filters_addContainer(this.esgst.mainPageHeading),
        id: 'gf'
      });
    }
    if (window.location.pathname.match(/^\/account\/settings\/giveaways$/) && (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gf_os') || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gf_alreadyOwned') || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gf_dlcMissingBase') || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gf_aboveLevel') || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gf_manuallyFiltered'))) {
      let key,
        inputs = {
          filter_os: null,
          filter_giveaways_exist_in_account: null,
          filter_giveaways_missing_base_game: null,
          filter_giveaways_level: null,
          filter_giveaways_additional_games: null
        };
      for (key in inputs) {
        inputs[key] = document.querySelector(`[name="${key}"]`);
      }
      document.getElementsByClassName('form__submit-button js__submit-form')[0].addEventListener('click', () => {
        const settings = [];
        for (key in inputs) {
          settings.push({
            id: key,
            value: parseInt(inputs[key].value)
          });
        }
        _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.setSetting(settings);
      });
    }
  }
  gf_getGiveaways(giveaways, main, source) {
    giveaways.forEach(giveaway => {
      if (giveaway.creator !== _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('username') && !giveaway.ended && !giveaway.entered && giveaway.url) {
        if (source === 'gf' || this.esgst.giveawayPath) {
          if (!giveaway.innerWrap.getElementsByClassName('esgst-gf-unhide-button')[0] && this.esgst.giveaways[giveaway.code] && this.esgst.giveaways[giveaway.code].hidden) {
            new _class_Button__WEBPACK_IMPORTED_MODULE_1__["Button"](giveaway.headingName, 'beforebegin', {
              callbacks: [this.gf_hideGiveaway.bind(this, giveaway, main), null, this.gf_unhideGiveaway.bind(this, giveaway, main), null],
              className: 'esgst-gf-unhide-button',
              icons: ['fa-eye-slash esgst-clickable', 'fa-circle-o-notch fa-spin', 'fa-eye esgst-clickable', 'fa-circle-o-notch fa-spin'],
              id: 'gf_s',
              index: 2,
              titles: ['Hide giveaway', 'Hiding giveaway...', 'Unhide giveaway', 'Unhiding giveaway...']
            }).button.setAttribute('data-draggable-id', 'gf');
          }
        }
        if (source !== 'gc' && (this.esgst.giveawaysPath || this.esgst.gamePath || this.esgst.groupPath) || this.esgst.giveawayPath) {
          if (!giveaway.innerWrap.getElementsByClassName('esgst-gf-hide-button')[0] && (!this.esgst.giveaways[giveaway.code] || !this.esgst.giveaways[giveaway.code].hidden || !this.esgst.giveaways[giveaway.code].code)) {
            new _class_Button__WEBPACK_IMPORTED_MODULE_1__["Button"](giveaway.headingName, 'beforebegin', {
              callbacks: [this.gf_hideGiveaway.bind(this, giveaway, main), null, this.gf_unhideGiveaway.bind(this, giveaway, main), null],
              className: 'esgst-gf-hide-button',
              icons: ['fa-eye-slash esgst-clickable', 'fa-circle-o-notch fa-spin', 'fa-eye esgst-clickable', 'fa-circle-o-notch fa-spin'],
              id: 'gf_s',
              index: 0,
              titles: ['Hide giveaway', 'Hiding giveaway...', 'Unhide giveaway', 'Unhiding giveaway...']
            }).button.setAttribute('data-draggable-id', 'gf');
          }
        }
      }
    });
  }
  async gf_hideGiveaway(giveaway, main) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_3__["Lock"]('giveaway', {
      threshold: 300
    });
    await lock.lock();
    let giveaways = JSON.parse(getValue('giveaways', '{}'));
    if (!giveaways[giveaway.code]) {
      giveaways[giveaway.code] = {};
    }
    giveaways[giveaway.code].code = giveaway.code;
    giveaways[giveaway.code].endTime = giveaway.endTime;
    giveaways[giveaway.code].hidden = Date.now();
    await setValue('giveaways', JSON.stringify(giveaways));
    await lock.unlock();
    if (!main || !this.esgst.giveawayPath) {
      giveaway.outerWrap.remove();
    }
    return true;
  }
  async gf_unhideGiveaway(giveaway, main) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_3__["Lock"]('giveaway', {
      threshold: 300
    });
    await lock.lock();
    let giveaways = JSON.parse(getValue('giveaways', '{}'));
    if (giveaways[giveaway.code]) {
      delete giveaways[giveaway.code].hidden;
    }
    await setValue('giveaways', JSON.stringify(giveaways));
    await lock.unlock();
    if (!main || !this.esgst.giveawayPath) {
      giveaway.outerWrap.remove();
    }
    return true;
  }
  getFilters(popup) {
    return {
      level: {
        check: !this.esgst.parameters.level_min && !this.esgst.parameters.level_max && ((!this.esgst.createdPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.wonPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) || popup),
        maxValue: 10,
        minValue: 0,
        name: 'Level',
        type: 'integer'
      },
      entries: {
        check: !this.esgst.parameters.entry_min && !this.esgst.parameters.entry_max && (!this.esgst.wonPath || popup),
        minValue: 0,
        name: 'Entries',
        type: 'integer'
      },
      copies: {
        check: !this.esgst.parameters.copy_min && !this.esgst.parameters.copy_max && (!this.esgst.wonPath || popup),
        minValue: 1,
        name: 'Copies',
        type: 'integer'
      },
      points: {
        check: !this.esgst.parameters.point_min && !this.esgst.parameters.point_max && ((!this.esgst.createdPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.wonPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) || popup),
        maxValue: 100,
        minValue: 0,
        name: 'Points',
        type: 'integer'
      },
      comments: {
        check: popup || !this.esgst.createdPath && !this.esgst.enteredPath && !this.esgst.wonPath,
        minValue: 0,
        name: 'Comments',
        type: 'integer'
      },
      minutesToEnd: {
        check: !this.esgst.wonPath || popup,
        minValue: 0,
        name: 'Minutes To End',
        type: 'integer'
      },
      minutesFromStart: {
        check: !this.esgst.wonPath || popup,
        minValue: 0,
        name: 'Minutes From Start',
        type: 'integer'
      },
      chance: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc') && ((!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && !this.esgst.createdPath && !this.esgst.wonPath || popup),
        maxValue: 100,
        minValue: 0,
        name: 'Chance',
        type: 'double'
      },
      projectedChance: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc') && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_a') && ((!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && !this.esgst.createdPath && !this.esgst.wonPath || popup),
        maxValue: 100,
        minValue: 0,
        name: 'Projected Chance',
        type: 'double'
      },
      chancePerPoint: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc') && ((!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && !this.esgst.createdPath && !this.esgst.wonPath || popup),
        maxValue: 100,
        minValue: 0,
        name: 'Chance Per Point',
        type: 'double'
      },
      projectedChancePerPoint: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc') && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_a') && ((!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && !this.esgst.createdPath && !this.esgst.wonPath || popup),
        maxValue: 100,
        minValue: 0,
        name: 'Projected Chance Per Point',
        type: 'double'
      },
      ratio: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr') && ((!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && !this.esgst.createdPath && !this.esgst.wonPath || popup),
        minValue: 0,
        name: 'Ratio',
        type: 'integer'
      },
      projectedRatio: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr') && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_a') && ((!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && !this.esgst.createdPath && !this.esgst.wonPath || popup),
        minValue: 0,
        name: 'Projected Ratio',
        type: 'integer'
      },
      pointsToWin: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gptw') && ((!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && !this.esgst.createdPath && !this.esgst.wonPath || popup),
        minValue: 0,
        name: 'Points To Win',
        type: 'integer'
      },
      pinned: {
        check: this.esgst.giveawaysPath,
        name: 'Pinned',
        type: 'boolean'
      },
      public: {
        check: !this.esgst.giveawaysPath,
        name: 'Public',
        type: 'boolean'
      },
      inviteOnly: {
        check: (!this.esgst.createdPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.wonPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) || popup,
        name: 'Invite Only',
        type: 'boolean'
      },
      group: {
        check: (!this.esgst.createdPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.wonPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) || popup,
        name: 'Group',
        type: 'boolean'
      },
      whitelist: {
        check: (!this.esgst.createdPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.wonPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) || popup,
        name: 'Whitelist',
        type: 'boolean'
      },
      nonMemberGroup: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cl') && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('ggl') && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('ggl_index') === 0 && ((!this.esgst.createdPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.wonPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) || popup),
        name: 'Non-Member Group',
        type: 'boolean'
      },
      regionRestricted: {
        check: (!this.esgst.createdPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.enteredPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) && (!this.esgst.wonPath || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd')) || popup,
        name: 'Region Restricted',
        type: 'boolean'
      },
      enterable: {
        check: popup === 'Ge',
        name: 'Enterable',
        type: 'boolean'
      },
      currentlyEnterable: {
        check: popup === 'Ge',
        name: 'Currently Enterable',
        type: 'boolean'
      },
      created: {
        check: !this.esgst.createdPath && !this.esgst.enteredPath && !this.esgst.wonPath || popup,
        name: 'Created',
        type: 'boolean'
      },
      received: {
        check: this.esgst.createdPath || this.esgst.wonPath,
        name: 'Received',
        type: 'boolean'
      },
      notReceived: {
        check: this.esgst.createdPath || this.esgst.wonPath,
        name: 'Not Received',
        type: 'boolean'
      },
      awaitingFeedback: {
        check: this.esgst.createdPath || this.esgst.wonPath,
        name: 'Awaiting Feedback',
        type: 'boolean'
      },
      entered: {
        check: !this.esgst.createdPath && !this.esgst.enteredPath && !this.esgst.wonPath || popup,
        name: 'Entered',
        type: 'boolean'
      },
      started: {
        check: !this.esgst.enteredPath && !this.esgst.wonPath || popup,
        name: 'Started',
        type: 'boolean'
      },
      ended: {
        check: !this.esgst.wonPath || popup,
        name: 'Ended',
        type: 'boolean'
      },
      deleted: {
        check: this.esgst.createdPath || this.esgst.enteredPath,
        name: 'Deleted',
        type: 'boolean'
      },
      sgTools: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('ge'),
        name: 'SGTools',
        type: 'boolean'
      },
      bookmarked: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gb'),
        name: 'Bookmarked',
        type: 'boolean'
      },
      groups: {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cl') && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('ggl') && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('ggl_index') === 0,
        list: true,
        name: 'Groups',
        type: 'string'
      },
      creators: {
        check: true,
        list: true,
        name: 'Creators',
        type: 'string'
      },
      winners: {
        check: true,
        list: true,
        name: 'Winners',
        type: 'string'
      },
      ..._class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.modules.gamesGameFilters.getFilters()
    };
  }
}
const giveawaysGiveawayFilters = new GiveawaysGiveawayFilters();


/***/ }),
/* 316 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gamesGameFilters", function() { return gamesGameFilters; });
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(206);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(132);
/* harmony import */ var _Filters__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(311);




class GamesGameFilters extends _Filters__WEBPACK_IMPORTED_MODULE_3__["Filters"] {
  constructor() {
    super('gmf');
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("fragment", null, "Filter games."),
      features: {
        gmf_m: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Allows you to hide multiple games in a page using many different filters."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Adds a toggle switch with a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
            className: "fa fa-sliders"
          }), ") to the main page heading of any page that has games and does not have giveaways. If a page has giveaways, you can filter games through the giveaway filters (the filter settings of this feature are shared with Giveaway Filters). The switch allows you to turn the filters on/off and the button allows you to manage your presets."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "To prevent confusion, in discussion pages the filter bar for this feature will be at the top, while the filter bar for Comment Filters (if enabled) will be at the main page heading."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Adds a collapsible panel below the same main page heading that allows you to change/save the rules of a preset. The filters are separated in 3 categories:"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Basic filters are related to a numeric value and have a slider that you can use to set the range of the filter (any games that do not apply to the range will be hidden)."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Type filters are related to a boolean value and have a checkbox that changes states when you click on it. The checkbox has 3 states:"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "\"Show all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
            className: "fa fa-check-square"
          }), ") does not hide any games that apply to the filter (this is the default state)."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "\"Show only\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
            className: "fa fa-square"
          }), ") hides any games that do not apply to the filter."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "\"Hide all\" (", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
            className: "fa fa-square-o"
          }), ") hides any games that apply to the filter.")), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Category filters are essentially the same thing as type filters, but for game categories (", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("span", {
            "data-esgst-feature-id": "gc"
          }), ").")), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "A preset contains all of your rules and can be saved to be reused later. You can save as many presets as you want. Each preset contains 3 types of rules:"), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Basic rules are the ones that you can change directly in the filter panel, using the sliders/checkboxes as explained in the previous item."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Exception rules are the ones that you can change by clicking on the icon", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
            className: "fa fa-gear"
          }), " in the filter panel. They are exceptions to the basic rules."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Override rules are the ones that you can change by clicking on the icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
            className: "fa fa-exclamation esgst-faded"
          }), " if set to overridable and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
            className: "fa fa-exclamation"
          }), " if set to non-overridable) next to each filter. They are enforcements of the basic rules."))),
          features: {
            gmf_m_f: {
              name: 'Fix filter bar at the top of the page.',
              sg: true
            },
            gmf_m_b: {
              name: 'Hide basic filters.',
              sg: true
            },
            gmf_m_a: {
              name: 'Hide advanced filters.',
              sg: true
            },
            gmf_rating: {
              alias: 'gf_rating'
            },
            gmf_reviews: {
              alias: 'gf_reviews'
            },
            gmf_releaseDate: {
              alias: 'gf_releaseDate'
            },
            gmf_owned: {
              alias: 'gf_owned'
            },
            gmf_wishlisted: {
              alias: 'gf_wishlisted'
            },
            gmf_previouslyWishlisted: {
              alias: 'gf_previouslyWishlisted'
            },
            gmf_followed: {
              alias: 'gf_followed'
            },
            gmf_hidden: {
              alias: 'gf_hidden'
            },
            gmf_ignored: {
              alias: 'gf_ignored'
            },
            gmf_previouslyEntered: {
              alias: 'gf_previouslyEntered'
            },
            gmf_previouslyWon: {
              alias: 'gf_previouslyWon'
            },
            gmf_fullCV: {
              alias: 'gf_fullCV'
            },
            gmf_reducedCV: {
              alias: 'gf_reducedCV'
            },
            gmf_noCV: {
              alias: 'gf_noCV'
            },
            gmf_learning: {
              alias: 'gf_learning'
            },
            gmf_removed: {
              alias: 'gf_removed'
            },
            gmf_banned: {
              alias: 'gf_banned'
            },
            gmf_tradingCards: {
              alias: 'gf_tradingCards'
            },
            gmf_achievements: {
              alias: 'gf_achievements'
            },
            gmf_singleplayer: {
              alias: 'gf_singleplayer'
            },
            gmf_multiplayer: {
              alias: 'gf_multiplayer'
            },
            gmf_steamCloud: {
              alias: 'gf_steamCloud'
            },
            gmf_linux: {
              alias: 'gf_linux'
            },
            gmf_mac: {
              alias: 'gf_mac'
            },
            gmf_dlc: {
              alias: 'gf_dlc'
            },
            gmf_dlcOwned: {
              alias: 'gf_dlcOwned'
            },
            gmf_dlcFree: {
              alias: 'gf_dlcFree'
            },
            gmf_dlcNonFree: {
              alias: 'gf_dlcNonFree'
            },
            gmf_package: {
              alias: 'gf_package'
            },
            gmf_earlyAccess: {
              alias: 'gf_earlyAccess'
            },
            gmf_genres: {
              alias: 'gf_genres'
            },
            gmf_tags: {
              alias: 'gf_tags'
            }
          },
          name: 'Multiple Filters',
          sg: true
        }
      },
      id: 'gmf',
      name: 'Game Filters',
      sg: true,
      sync: `Owned/Wishlisted/Ignored Games, Giveaways, Hidden Games, No CV Games, Reduced CV Games, Won Games`,
      syncKeys: ['Games', 'Giveaways', 'HiddenGames', 'NoCvGames', 'ReducedCvGames', 'WonGames'],
      type: 'games'
    };
  }
  init() {
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('gmf') || !_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].common.isCurrentPath(['Community Wishlist', 'Bundle Games', 'Discussion', 'Settings - Giveaways - Filters', 'Steam - Games'])) {
      return;
    }
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.hasAddedFilterContainer) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.style.insertAdjacentText('beforeend', `
				.esgst-gf-container {
					position: ${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('gmf_m_f') ? 'sticky' : 'static'};
					top: ${_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.commentsTop}px;
				}
			`);
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].common.createHeadingButton({
      element: this.filters_addContainer(_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.discussionPath ? document.querySelector('.page__heading') : _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.mainPageHeading),
      id: 'gmf'
    });
  }
  getFilters() {
    return {
      rating: {
        category: 'gc_r',
        check: true,
        maxValue: 100,
        minValue: 0,
        name: 'Rating',
        type: 'integer'
      },
      reviews: {
        category: 'gc_r',
        check: true,
        minValue: 0,
        name: 'Reviews',
        type: 'integer'
      },
      releaseDate: {
        category: 'gc_rd',
        check: !_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.parameters.release_date_min && !_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.parameters.release_date_max,
        date: true,
        name: 'Release Date',
        type: 'integer'
      },
      owned: {
        check: true,
        name: 'Owned',
        sync: ['Games'],
        type: 'boolean'
      },
      wishlisted: {
        check: true,
        name: 'Wishlisted',
        sync: ['Games'],
        type: 'boolean'
      },
      previouslyWishlisted: {
        check: true,
        name: 'Previously Wishlisted',
        sync: ['Games'],
        type: 'boolean'
      },
      followed: {
        check: true,
        name: 'Followed',
        sync: ['FollowedGames'],
        type: 'boolean'
      },
      hidden: {
        check: true,
        name: 'Hidden',
        sync: ['HiddenGames'],
        type: 'boolean'
      },
      ignored: {
        check: true,
        name: 'Ignored',
        sync: ['Games'],
        type: 'boolean'
      },
      previouslyEntered: {
        check: true,
        name: 'Previously Entered',
        type: 'boolean'
      },
      previouslyWon: {
        check: true,
        name: 'Previously Won',
        sync: ['WonGames'],
        type: 'boolean'
      },
      fullCV: {
        check: true,
        name: 'Full CV',
        sync: ['ReducedCvGames', 'NoCvGames'],
        type: 'boolean'
      },
      reducedCV: {
        check: true,
        name: 'Reduced CV',
        sync: ['ReducedCvGames'],
        type: 'boolean'
      },
      noCV: {
        check: true,
        name: 'No CV',
        sync: ['NoCvGames'],
        type: 'boolean'
      },
      learning: {
        category: 'gc_lg',
        check: true,
        name: 'Learning',
        type: 'boolean'
      },
      removed: {
        check: true,
        name: 'Removed',
        sync: ['DelistedGames'],
        type: 'boolean'
      },
      banned: {
        check: true,
        name: 'Banned',
        sync: ['DelistedGames'],
        type: 'boolean'
      },
      tradingCards: {
        category: 'gc_tc',
        check: true,
        name: 'Trading Cards',
        type: 'boolean'
      },
      achievements: {
        category: 'gc_a',
        check: true,
        name: 'Achievements',
        type: 'boolean'
      },
      singleplayer: {
        category: 'gc_sp',
        check: true,
        name: 'Singleplayer',
        type: 'boolean'
      },
      multiplayer: {
        category: 'gc_mp',
        check: true,
        name: 'Multiplayer',
        type: 'boolean'
      },
      steamCloud: {
        category: 'gc_sc',
        check: true,
        name: 'Steam Cloud',
        type: 'boolean'
      },
      linux: {
        category: 'gc_l',
        check: true,
        name: 'Linux',
        type: 'boolean'
      },
      mac: {
        category: 'gc_m',
        check: true,
        name: 'Mac',
        type: 'boolean'
      },
      dlc: {
        category: 'gc_dlc',
        check: true,
        name: 'DLC',
        type: 'boolean'
      },
      dlcOwned: {
        category: 'gc_dlc_o',
        check: true,
        name: `DLC (Owned Base)`,
        type: 'boolean'
      },
      dlcFree: {
        category: 'gc_dlc_b',
        check: true,
        name: `DLC (Free Base)`,
        type: 'boolean'
      },
      dlcNonFree: {
        category: 'gc_dlc_b',
        check: true,
        name: `DLC (Non-Free Base)`,
        type: 'boolean'
      },
      package: {
        category: 'gc_p',
        check: true,
        name: 'Package',
        type: 'boolean'
      },
      earlyAccess: {
        category: 'gc_ea',
        check: true,
        name: 'Early Access',
        type: 'boolean'
      },
      genres: {
        category: 'gc_g',
        check: true,
        list: true,
        name: 'Genres',
        type: 'string'
      },
      tags: {
        check: true,
        list: true,
        name: 'Game Tags',
        type: 'string'
      }
    };
  }
}
const gamesGameFilters = new GamesGameFilters();


/***/ }),
/* 317 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "groupsGroupLibraryWishlistChecker", function() { return groupsGroupLibraryWishlistChecker; });
/* harmony import */ var core_js_modules_es_array_flat_map_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(318);
/* harmony import */ var core_js_modules_es_array_flat_map_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_flat_map_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_unscopables_flat_map_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(319);
/* harmony import */ var core_js_modules_es_array_unscopables_flat_map_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_unscopables_flat_map_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(210);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(221);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(222);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(132);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(212);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(218);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(224);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(144);




















/**
 * @typedef {Object} GlwcObj
 * @property {NotificationBar} progressBar
 * @property {NotificationBar} overallProgressBar
 */

const createElements = _Common__WEBPACK_IMPORTED_MODULE_18__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_18__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_18__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_18__["common"]),
  createTooltip = _Common__WEBPACK_IMPORTED_MODULE_18__["common"].createTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_18__["common"]);
class GroupsGroupLibraryWishlistChecker extends _class_Module__WEBPACK_IMPORTED_MODULE_8__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-folder"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-star"
      }), " ) to your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/manage/whitelist"
      }, "whitelist"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/manage/blacklist"
      }, "blacklist"), " pages and any ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.steamgifts.com/group/SJ7Bu/"
      }, "group"), " page that allows you to check how many of the whitelist/blacklist/group members have a certain game in their libraries/wishlists."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "The results are separated in 2 sections (\"Libraries\" and \"Wishlists\"). The games in each section are ranked based on the number of members that have them in their libraries/wishlists (each game also has a percentage that represents that number)."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Only the first 100 results are shown for each section, but you can use the search fields to find games that are outside of the top 100. If you are searching in the \"Libraries\" section, it is more accurate to search for games using their app id instead of their name, because the games in that section only have a name if they can also be found in the \"Wishlists\" section, as game names are not available in the libraries data and retrieving them would generate more requests to Steam, which is not good."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "If you hover over the number of libraries/wishlists for a game it shows the usernames of all of the members that have the game in their libraries/wishlists."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "A Steam API key is required to retrieve libraries data. If a key is not set in the last section of this menu, the feature will only retrieve wishlists data.")),
      id: 'glwc',
      name: 'Group Library/Wishlist Checker',
      sg: true,
      type: 'groups',
      features: {
        glwc_gn: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "The new Steam wishlist page does not offer the game names in its source code, so ESGST cannot know the names of the games. However, by enabling this option, ESGST will fetch the list of all games on Steam, so that it can show you the names of the games properly. The only problem is that this list is huge, so it can slow down the feature execution a bit. This list is shared with Have / Want List Checker, if you also use that feature.")),
          name: 'Display game names.',
          sg: true
        },
        glwc_mm: {
          dependencies: ['mm'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Allows checking a custom list of users provided by", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
            "data-esgst-feature-id": "mm"
          }), ".")),
          name: 'Integrate with [id=mm].',
          sg: true
        }
      }
    };
  }
  async init() {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.whitelistPath || _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.blacklistPath || _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.groupPath) {
      let parameters;
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.whitelistPath) {
        parameters = `url=account/manage/whitelist`;
      } else if (_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.blacklistPath) {
        parameters = `url=account/manage/blacklist`;
      } else {
        parameters = `url=${window.location.pathname.match(/\/(group\/(.+?)\/(.+?))(\/.*)?$/)[1]}/users&id=${document.querySelector(`[href*="/gid/"]`).getAttribute('href').match(/\d+/)[0]}`;
      }
      createHeadingButton({
        id: 'glwc',
        icons: ['fa-folder', 'fa-star'],
        title: 'Check libraries/wishlists',
        link: `https://www.steamgifts.com/account/settings/profile?esgst=glwc&${parameters}`
      });
    } else if (_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.isCurrentPath('Account') && _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.parameters.esgst === 'glwc') {
      if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_9__["permissions"].contains([['steamApi', 'steamCommunity', 'steamStore']]))) {
        return;
      }
      let glwc = {
        progressBar: _components_NotificationBar__WEBPACK_IMPORTED_MODULE_15__["NotificationBar"].create().build().setLoading(),
        overallProgressBar: _components_NotificationBar__WEBPACK_IMPORTED_MODULE_15__["NotificationBar"].create()
      };
      let parameters;
      glwc.container = _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.sidebar.nextElementSibling;
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('removeSidebarInFeaturePages')) {
        _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.sidebar.remove();
      }
      glwc.container.innerHTML = '';
      glwc.container.setAttribute('data-esgst-popup', true);
      const pageHeading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_16__["PageHeading"].create('glwc', [{
        name: 'ESGST',
        url: _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.settingsUrl
      }, {
        name: 'Group Library/Wishlist Checker',
        url: `https://www.steamgifts.com/account/settings/profile?esgst=glwc`
      }]).insert(glwc.container, 'beforeend');
      const optionsButton = _components_Button__WEBPACK_IMPORTED_MODULE_14__["Button"].create({
        color: 'alternate-white',
        tooltip: 'Options',
        icons: ['fa-gear']
      }).insert(pageHeading.nodes.outer, 'beforeend');
      const popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_10__["Popout"]('', optionsButton.nodes.outer, 0, true);
      new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_13__["ToggleSwitch"](popout.popout, 'glwc_checkMaxWishlists', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Only check users with a maximum of", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
        className: "esgst-switch-input",
        type: "number",
        min: "0",
        value: _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('glwc_maxWishlists'),
        onchange: event => {
          _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].set('glwc_maxWishlists', parseInt(event.target.value));
          _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.setSetting('glwc_maxWishlists', _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('glwc_maxWishlists'));
        }
      }), ' ', "games in their wishlist."), false, false, 'Enter the maximum number of games that a user must have in their wishlist in order to be checked.', _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('glwc_checkMaxWishlists'));
      glwc.progressBar.insert(glwc.container, 'beforeend');
      glwc.overallProgressBar.insert(glwc.container, 'beforeend');
      glwc.context = createElements(glwc.container, 'beforeend', [{
        type: 'div'
      }]);
      parameters = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_17__["Utils"].getQueryParams();
      glwc.id = parameters.id;
      glwc.url = parameters.url;
      glwc.users = parameters.users ? parameters.users.split(',').map(username => ({
        username
      })) : [];
      glwc.games = {};
      if (glwc.id) {
        glwc.overallProgressBar.setMessage('Preparing...');
        glwc.members = [];
        const members = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`http://steamcommunity.com/gid/${glwc.id}/memberslistxml?xml=1`)).text.match(/<steamID64>.+?<\/steamID64>/g);
        members.forEach(member => {
          glwc.members.push(member.match(/<steamID64>(.+?)<\/steamID64>/)[1]);
        });
      }
      if (glwc.users.length > 0) {
        glwc.overallProgressBar.setMessage('Step 2 of 3');
        // noinspection JSIgnoredPromiseFromCall
        this.glwc_getSteamIds(glwc, 0, glwc.users.length);
      } else {
        glwc.overallProgressBar.setMessage('Step 1 of 3');
        // noinspection JSIgnoredPromiseFromCall
        this.glwc_getUsers(glwc, 1);
      }
    }
  }

  /**
   * @param {GlwcObj} glwc
   */
  async glwc_getUsers(glwc, nextPage) {
    if (glwc.isCanceled) return;
    glwc.progressBar.setMessage(`Retrieving users (page ${nextPage})...`);
    let elements, i, n, pagination, responseHtml;
    responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`/${glwc.url}/search?page=${nextPage}`)).html;
    elements = responseHtml.querySelectorAll(`.table__row-inner-wrap:not(.is-faded)`);
    for (i = 0, n = elements.length; i < n; ++i) {
      glwc.users.push({
        username: elements[i].getElementsByClassName('table__column__heading')[0].textContent
      });
    }
    pagination = responseHtml.getElementsByClassName('pagination__navigation')[0];
    if (pagination && !pagination.lastElementChild.classList.contains('is-selected')) {
      window.setTimeout(() => this.glwc_getUsers(glwc, ++nextPage), 0);
    } else {
      glwc.overallProgressBar.setMessage('Step 2 of 3');
      // noinspection JSIgnoredPromiseFromCall
      this.glwc_getSteamIds(glwc, 0, glwc.users.length);
    }
  }

  /**
   * @param {GlwcObj} glwc
   */
  async glwc_getSteamIds(glwc, i, n) {
    if (glwc.isCanceled) return;
    if (i < n) {
      glwc.progressBar.setMessage(`Retrieving Steam ids (${i + 1} of ${n})...`);
      let steamId = _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.users.steamIds[glwc.users[i].username];
      if (steamId) {
        glwc.users[i].steamId = steamId;
        window.setTimeout(() => this.glwc_getSteamIds(glwc, ++i, n), 0);
      } else {
        var _response$json;
        const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`/user/${glwc.users[i].username}?format=json`);
        if ((_response$json = response.json) !== null && _response$json !== void 0 && _response$json.success) {
          glwc.users[i].steamId = response.json.user.steam_id;
        }
        window.setTimeout(() => this.glwc_getSteamIds(glwc, ++i, n), 0);
      }
    } else {
      glwc.overallProgressBar.setMessage(`Step 3 of 3 (this might take a while)`);
      glwc.memberCount = 0;
      // noinspection JSIgnoredPromiseFromCall

      if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('glwc_gn')) {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.modules.tradesHaveWantListChecker.hwlc_getGames(true);
      }
      this.glwc_getGames(glwc, 0, glwc.users.length);
    }
  }

  /**
   * @param {GlwcObj} glwc
   */
  async glwc_getGames(glwc, i, n) {
    if (glwc.isCanceled) return;
    if (i < n) {
      try {
        glwc.progressBar.setMessage(`Retrieving libraries/wishlists (${i + 1} of ${n})...`);
        if (!glwc.id || glwc.members.indexOf(glwc.users[i].steamId) >= 0) {
          try {
            glwc.users[i].failed = [];
            glwc.users[i].library = [];
            const elements = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`http://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/?key=${_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('steamApiKey')}&steamid=${glwc.users[i].steamId}&format=json`)).json.response.games;
            if (elements) {
              elements.forEach(element => {
                let game = {
                  id: element.appid,
                  logo: `https://steamcdn-a.akamaihd.net/steam/apps/${element.appid}/header.jpg`,
                  name: `${element.appid}`
                };
                if (_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.appList) {
                  const name = _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.appList[element.appid];
                  if (name) {
                    game.name = name;
                  }
                }
                if (!glwc.games[game.id]) {
                  game.libraries = [];
                  game.wishlists = [];
                  glwc.games[game.id] = game;
                }
                glwc.games[game.id].libraries.push(i);
                glwc.users[i].library.push(game.id);
              });
            }
          } catch (e) {
            /**/
          }
          glwc.users[i].wishlist = [];
          const wishlistData = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`https://api.steampowered.com/IWishlistService/GetWishlist/v1/?steamid=${glwc.users[i].steamId}&format=json`)).json.response.items;
          if (wishlistData) {
            const maxWishlists = _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('glwc_checkMaxWishlists') ? parseInt(_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('glwc_maxWishlists')) : Infinity;
            if (wishlistData.length <= maxWishlists) {
              wishlistData.forEach(item => {
                let id = item.appid;
                let game = {
                  id
                };
                game.logo = `https://steamcdn-a.akamaihd.net/steam/apps/${id}/header.jpg`;
                if (_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.appList) {
                  const name = _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.appList[item.appid];
                  if (name) {
                    game.name = name;
                  }
                }
                if (!game.name) {
                  game.name = `${id}`;
                }
                if (glwc.games[id]) {
                  if (game.logo && game.name) {
                    glwc.games[id].logo = game.logo;
                    glwc.games[id].name = game.name;
                  }
                } else {
                  game.libraries = [];
                  game.wishlists = [];
                  glwc.games[id] = game;
                }
                glwc.games[id].wishlists.push(i);
                glwc.users[i].wishlist.push(parseInt(id));
              });
            }
          } else {
            glwc.users[i].failed.push(`<a class="table__column__secondary-link" href="https://steamcommunity.com/profiles/${glwc.users[i].steamId}">${glwc.users[i].username}</a>`);
          }
          glwc.memberCount += 1;
          window.setTimeout(() => this.glwc_getGames(glwc, ++i, n), 0);
        } else {
          window.setTimeout(() => this.glwc_getGames(glwc, ++i, n), 0);
        }
      } catch (err) {
        glwc.users[i].failed.push(`<a class="table__column__secondary-link" href="https://steamcommunity.com/profiles/${glwc.users[i].steamId}">${glwc.users[i].username}</a>`);
        window.setTimeout(() => this.glwc_getGames(glwc, ++i, n), 0);
      }
    } else {
      this.glwc_showResults(glwc);
    }
  }
  glwc_showResults(glwc) {
    const failedUsers = [...new Set(glwc.users.flatMap(user => user.failed.length > 0 ? user.failed : []))];
    if (failedUsers.length > 0) {
      glwc.progressBar.setWarning(`${failedUsers.length} users were not retrieved. Possibly games, wishlists or profile are private. (Hover to view details)`);
      const popout = createTooltip(glwc.container.querySelector('.notification--warning'), failedUsers.join(`, `), true);
      popout.onFirstOpen = () => _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.endless_load(popout.popout);
    } else {
      glwc.progressBar.destroy();
    }
    glwc.overallProgressBar.destroy();
    let game, i, id, j, library, libraryInput, libraryResults, librarySearch, n, user, users, wishlist, wishlistInput, wishlistResults, wishlistSearch;
    glwc.context.classList.add('esgst-glwc-results');
    createElements(glwc.context, 'atinner', [{
      type: 'div',
      children: [{
        attributes: {
          class: 'esgst-glwc-heading'
        },
        text: 'Libraries',
        type: 'div'
      }, {
        attribute: {
          placeholder: 'Search by game name or app id...',
          type: 'text'
        },
        type: 'input'
      }, {
        attributes: {
          class: 'table'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'table__heading'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'table__column--width-small text-center'
            },
            text: 'Rank',
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-fill'
            },
            text: 'Game',
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small text-center'
            },
            text: 'Libraries',
            type: 'div'
          }]
        }, {
          attributes: {
            class: 'table__rows'
          },
          type: 'div'
        }, {
          attributes: {
            class: 'table__rows'
          },
          type: 'div'
        }]
      }]
    }, {
      type: 'div',
      children: [{
        attributes: {
          class: 'esgst-glwc-heading'
        },
        text: 'Wishlists',
        type: 'div'
      }, {
        attribute: {
          placeholder: 'Search by game name or app id...',
          type: 'text'
        },
        type: 'input'
      }, {
        attributes: {
          class: 'table'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'table__heading'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'table__column--width-small text-center'
            },
            text: 'Rank',
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-fill'
            },
            text: 'Game',
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small text-center'
            },
            text: 'Wishlists',
            type: 'div'
          }]
        }, {
          attributes: {
            class: 'table__rows'
          },
          type: 'div'
        }, {
          attributes: {
            class: 'table__rows'
          },
          type: 'div'
        }]
      }]
    }]);
    libraryInput = glwc.context.firstElementChild.firstElementChild.nextElementSibling;
    libraryResults = libraryInput.nextElementSibling.lastElementChild;
    librarySearch = libraryResults.previousElementSibling;
    wishlistInput = glwc.context.lastElementChild.firstElementChild.nextElementSibling;
    wishlistResults = wishlistInput.nextElementSibling.lastElementChild;
    wishlistSearch = wishlistResults.previousElementSibling;
    library = [];
    wishlist = [];
    for (id in glwc.games) {
      if (glwc.games.hasOwnProperty(id)) {
        if (glwc.games[id].libraries.length) {
          library.push(glwc.games[id]);
        }
        if (glwc.games[id].wishlists.length) {
          wishlist.push(glwc.games[id]);
        }
      }
    }
    if (library.length > 0) {
      library = library.sort((a, b) => {
        if (a.libraries.length > b.libraries.length) {
          return -1;
        } else if (a.libraries.length < b.libraries.length) {
          return 1;
        } else {
          return 0;
        }
      });
      for (i = 0, n = library.length; i < 100 && i < n; ++i) {
        game = library[i];
        if (i <= 0 || game.libraries.length !== library[i - 1].libraries.length) {
          j = i + 1;
        }
        users = [];
        game.libraries.forEach(k => {
          user = glwc.users[k];
          users.push(`<a class="table__column__secondary-link" href="http://steamcommunity.com/profiles/${user.steamId}/games?tab=all">${user.username}</a>`);
        });
        const popout = createTooltip(createElements(libraryResults, 'beforeend', [{
          attributes: {
            class: 'table__row-outer-wrap'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'table__row-inner-wrap'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'table__column--width-small text-center'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'table__column__rank'
                },
                text: `${j}.`,
                type: 'span'
              }]
            }, {
              type: 'div',
              children: [{
                attributes: {
                  class: 'table_image_thumbnail',
                  style: `background-image:url(${game.logo});`
                },
                type: 'div'
              }]
            }, {
              attributes: {
                class: 'table__column--width-fill'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'table__column__heading'
                },
                text: game.name,
                type: 'p'
              }, {
                type: 'p',
                children: [{
                  attributes: {
                    class: 'table__column__secondary-link',
                    href: `http://store.steampowered.com/app/${game.id}`,
                    rel: 'nofollow',
                    target: '_blank'
                  },
                  text: `http://store.steampowered.com/app/${game.id}`,
                  type: 'a'
                }]
              }]
            }, {
              attributes: {
                class: 'table__column--width--small text-center'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'table__column__secondary-link esgst-clickable'
                },
                text: `${game.libraries.length} (${Math.round(game.libraries.length / glwc.memberCount * 10000) / 100}%)`,
                type: 'span'
              }]
            }]
          }]
        }]).firstElementChild.lastElementChild.firstElementChild, users.join(`, `), true);
        popout.onFirstOpen = () => _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.endless_load(popout.popout);
      }
    } else {
      createElements(libraryResults, 'atinner', [{
        text: 'To get libraries data you must have a Steam API key set in the settings menu.',
        type: 'node'
      }]);
    }
    wishlist = wishlist.sort((a, b) => {
      if (a.wishlists.length > b.wishlists.length) {
        return -1;
      } else if (a.wishlists.length < b.wishlists.length) {
        return 1;
      } else {
        return 0;
      }
    });
    for (i = 0, n = wishlist.length; i < 100 && i < n; ++i) {
      game = wishlist[i];
      if (i <= 0 || game.wishlists.length !== wishlist[i - 1].wishlists.length) {
        j = i + 1;
      }
      users = [];
      game.wishlists.forEach(k => {
        user = glwc.users[k];
        users.push(`<a class="table__column__secondary-link" href="http://store.steampowered.com/wishlist/profiles/${user.steamId}">${user.username}</a>`);
      });
      const popout = createTooltip(createElements(wishlistResults, 'beforeend', [{
        attributes: {
          class: 'table__row-outer-wrap'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'table__row-inner-wrap'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'table__column--width-small text-center'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'table__column__rank'
              },
              text: `${j}.`,
              type: 'span'
            }]
          }, {
            type: 'div',
            children: [{
              attributes: {
                class: 'table_image_thumbnail',
                style: `background-image:url(${game.logo});`
              },
              type: 'div'
            }]
          }, {
            attributes: {
              class: 'table__column--width-fill'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'table__column__heading'
              },
              text: game.name,
              type: 'p'
            }, {
              type: 'p',
              children: [{
                attributes: {
                  class: 'table__column__secondary-link',
                  href: `http://store.steampowered.com/app/${game.id}`,
                  rel: 'nofollow',
                  target: '_blank'
                },
                text: `http://store.steampowered.com/app/${game.id}`,
                type: 'a'
              }]
            }]
          }, {
            attributes: {
              class: 'table__column--width--small text-center'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'table__column__secondary-link esgst-clickable'
              },
              text: `${game.wishlists.length} (${Math.round(game.wishlists.length / glwc.memberCount * 10000) / 100}%)`,
              type: 'span'
            }]
          }]
        }]
      }]).firstElementChild.lastElementChild.firstElementChild, users.join(`, `), true);
      popout.onFirstOpen = () => _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.endless_load(popout.popout);
    }
    libraryInput.addEventListener('input', () => {
      const value = libraryInput.value.toLowerCase();
      if (value) {
        game = glwc.games[value];
        if (game) {
          if (game.libraries.length) {
            users = [];
            game.libraries.forEach(k => {
              user = glwc.users[k];
              users.push(`<a class="table__column__secondary-link" href="http://steamcommunity.com/profiles/${user.steamId}/games?tab=all">${user.username}</a>`);
            });
            createElements(librarySearch, 'atinner', [{
              attributes: {
                class: 'table__row-outer-wrap'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'table__row-inner-wrap'
                },
                type: 'div',
                children: [{
                  attributes: {
                    class: 'table__column--width-small text-center'
                  },
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'table__column__rank'
                    },
                    text: '-',
                    type: 'span'
                  }]
                }, {
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'table_image_thumbnail',
                      style: `background-image:url(${game.logo});`
                    },
                    type: 'div'
                  }]
                }, {
                  attributes: {
                    class: 'table__column--width-fill'
                  },
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'table__column__heading'
                    },
                    text: game.name,
                    type: 'p'
                  }, {
                    type: 'p',
                    children: [{
                      attributes: {
                        class: 'table__column__secondary-link',
                        href: `http://store.steampowered.com/app/${game.id}`,
                        rel: 'nofollow',
                        target: '_blank'
                      },
                      text: `http://store.steampowered.com/app/${game.id}`,
                      type: 'a'
                    }]
                  }]
                }, {
                  attributes: {
                    class: 'table__column--width-small text-center'
                  },
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'table__column__secondary-link esgst-clickable'
                    },
                    text: `${game.libraries.length} (${Math.round(game.libraries.length / glwc.memberCount * 10000) / 100}%)`,
                    type: 'span'
                  }]
                }]
              }]
            }]);
            const popout = createTooltip(librarySearch.firstElementChild.firstElementChild.lastElementChild.firstElementChild, users.join(`, `), true);
            popout.onFirstOpen = () => _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.endless_load(popout.popout);
          } else {
            createElements(librarySearch, 'atinner', [{
              text: 'Nothing found...',
              type: 'node'
            }]);
          }
        } else {
          librarySearch.innerHTML = '';
          for (i = 0, j = 0, n = library.length; j < 100 && i < n; ++i) {
            game = library[i];
            if (game.name.toLowerCase().match(value)) {
              users = [];
              game.libraries.forEach(k => {
                user = glwc.users[k];
                users.push(`<a class="table__column__secondary-link" href="http://steamcommunity.com/profiles/${user.steamId}/games?tab=all">${user.username}</a>`);
              });
              const popout = createTooltip(createElements(librarySearch, 'beforeend', [{
                attributes: {
                  class: 'table__row-outer-wrap'
                },
                type: 'div',
                children: [{
                  attributes: {
                    class: 'table__row-inner-wrap'
                  },
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'table__column--width-small text-center'
                    },
                    type: 'div',
                    children: [{
                      attributes: {
                        class: 'table__column__rank'
                      },
                      text: '-',
                      type: 'span'
                    }]
                  }, {
                    type: 'div',
                    children: [{
                      attributes: {
                        class: 'table_image_thumbnail',
                        style: `background-image:url(${game.logo});`
                      },
                      type: 'div'
                    }]
                  }, {
                    attributes: {
                      class: 'table__column--width-fill'
                    },
                    type: 'div',
                    children: [{
                      attributes: {
                        class: 'table__column__heading'
                      },
                      text: game.name,
                      type: 'p'
                    }, {
                      type: 'p',
                      children: [{
                        attributes: {
                          class: 'table__column__secondary-link',
                          href: `http://store.steampowered.com/app/${game.id}`,
                          rel: 'nofollow',
                          target: '_blank'
                        },
                        text: `http://store.steampowered.com/app/${game.id}`,
                        type: 'a'
                      }]
                    }]
                  }, {
                    attributes: {
                      class: 'table__column--width--small text-center'
                    },
                    type: 'div',
                    children: [{
                      attributes: {
                        class: 'table__column__secondary-link esgst-clickable'
                      },
                      text: `${game.libraries.length} (${Math.round(game.libraries.length / glwc.memberCount * 10000) / 100}%)`,
                      type: 'span'
                    }]
                  }]
                }]
              }]).firstElementChild.lastElementChild.firstElementChild, users.join(`, `), true);
              popout.onFirstOpen = () => _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.endless_load(popout.popout);
              j += 1;
            }
          }
          if (!librarySearch.innerHTML) {
            createElements(librarySearch, 'atinner', [{
              text: 'Nothing found...',
              type: 'node'
            }]);
          }
        }
        librarySearch.classList.remove('esgst-hidden');
        libraryResults.classList.add('esgst-hidden');
      } else {
        libraryResults.classList.remove('esgst-hidden');
        librarySearch.classList.add('esgst-hidden');
      }
    });
    wishlistInput.addEventListener('input', () => {
      const value = wishlistInput.value;
      if (value) {
        game = glwc.games[value];
        if (game) {
          if (game.wishlists.length) {
            users = [];
            game.wishlists.forEach(k => {
              user = glwc.users[k];
              users.push(`<a class="table__column__secondary-link" href="http://store.steampowered.com/wishlist/profiles/${user.steamId}">${user.username}</a>`);
            });
            createElements(wishlistSearch, 'atinner', [{
              attributes: {
                class: 'table__row-outer-wrap'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'table__row-inner-wrap'
                },
                type: 'div',
                children: [{
                  attributes: {
                    class: 'table__column--width-small text-center'
                  },
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'table__column__rank'
                    },
                    text: '-',
                    type: 'span'
                  }]
                }, {
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'table_image_thumbnail',
                      style: `background-image:url(${game.logo});`
                    },
                    type: 'div'
                  }]
                }, {
                  attributes: {
                    class: 'table__column--width-fill'
                  },
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'table__column__heading'
                    },
                    text: game.name,
                    type: 'p'
                  }, {
                    type: 'p',
                    children: [{
                      attributes: {
                        class: 'table__column__secondary-link',
                        href: `http://store.steampowered.com/app/${game.id}`,
                        rel: 'nofollow',
                        target: '_blank'
                      },
                      text: `http://store.steampowered.com/app/${game.id}`,
                      type: 'a'
                    }]
                  }]
                }, {
                  attributes: {
                    class: 'table__column--width-small text-center'
                  },
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'table__column__secondary-link esgst-clickable'
                    },
                    text: `${game.wishlists.length} (${Math.round(game.wishlists.length / glwc.memberCount * 10000) / 100}%)`,
                    type: 'span'
                  }]
                }]
              }]
            }]);
            const popout = createTooltip(wishlistSearch.firstElementChild.firstElementChild.lastElementChild.firstElementChild, users.join(`, `), true);
            popout.onFirstOpen = () => _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.endless_load(popout.popout);
          } else {
            createElements(wishlistSearch, 'atinner', [{
              text: 'Nothing found...',
              type: 'node'
            }]);
          }
        } else {
          wishlistSearch.innerHTML = '';
          for (i = 0, j = 0, n = wishlist.length; j < 100 && i < n; ++i) {
            game = wishlist[i];
            if (game.name.toLowerCase().match(value)) {
              users = [];
              game.wishlists.forEach(k => {
                user = glwc.users[k];
                users.push(`<a class="table__column__secondary-link" href="http://steamcommunity.com/profiles/${user.steamId}/wishlists">${user.username}</a>`);
              });
              const popout = createTooltip(createElements(wishlistSearch, 'beforeend', [{
                attributes: {
                  class: 'table__row-outer-wrap'
                },
                type: 'div',
                children: [{
                  attributes: {
                    class: 'table__row-inner-wrap'
                  },
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'table__column--width-small text-center'
                    },
                    type: 'div',
                    children: [{
                      attributes: {
                        class: 'table__column__rank'
                      },
                      text: '-',
                      type: 'span'
                    }]
                  }, {
                    type: 'div',
                    children: [{
                      attributes: {
                        class: 'table_image_thumbnail',
                        style: `background-image:url(${game.logo});`
                      },
                      type: 'div'
                    }]
                  }, {
                    attributes: {
                      class: 'table__column--width-fill'
                    },
                    type: 'div',
                    children: [{
                      attributes: {
                        class: 'table__column__heading'
                      },
                      text: game.name,
                      type: 'p'
                    }, {
                      type: 'p',
                      children: [{
                        attributes: {
                          class: 'table__column__secondary-link',
                          href: `http://store.steampowered.com/app/${game.id}`,
                          rel: 'nofollow',
                          target: '_blank'
                        },
                        text: `http://store.steampowered.com/app/${game.id}`,
                        type: 'a'
                      }]
                    }]
                  }, {
                    attributes: {
                      class: 'table__column--width--small text-center'
                    },
                    type: 'div',
                    children: [{
                      attributes: {
                        class: 'table__column__secondary-link esgst-clickable'
                      },
                      text: `${game.wishlists.length} (${Math.round(game.wishlists.length / glwc.memberCount * 10000) / 100}%)`,
                      type: 'span'
                    }]
                  }]
                }]
              }]).firstElementChild.lastElementChild.firstElementChild, users.join(`, `), true);
              popout.onFirstOpen = () => _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.endless_load(popout.popout);
              j += 1;
            }
          }
          if (!wishlistSearch.innerHTML) {
            createElements(wishlistSearch, 'atinner', [{
              text: 'Nothing found...',
              type: 'node'
            }]);
          }
        }
        wishlistSearch.classList.remove('esgst-hidden');
        wishlistResults.classList.add('esgst-hidden');
      } else {
        wishlistResults.classList.remove('esgst-hidden');
        wishlistSearch.classList.add('esgst-hidden');
      }
    });
  }
}
const groupsGroupLibraryWishlistChecker = new GroupsGroupLibraryWishlistChecker();


/***/ }),
/* 318 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(65);
var flattenIntoArray = __webpack_require__(226);
var aCallable = __webpack_require__(44);
var toObject = __webpack_require__(21);
var lengthOfArrayLike = __webpack_require__(53);
var arraySpeciesCreate = __webpack_require__(228);

// `Array.prototype.flatMap` method
// https://tc39.es/ecma262/#sec-array.prototype.flatmap
$({ target: 'Array', proto: true }, {
  flatMap: function flatMap(callbackfn /* , thisArg */) {
    var O = toObject(this);
    var sourceLen = lengthOfArrayLike(O);
    var A;
    aCallable(callbackfn);
    A = arraySpeciesCreate(O, 0);
    flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    return A;
  }
});


/***/ }),
/* 319 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// this method was added to unscopables after implementation
// in popular engines, so it's moved to a separate module
var addToUnscopables = __webpack_require__(12);

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('flatMap');


/***/ }),
/* 320 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayRecreator", function() { return giveawaysGiveawayRecreator; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(213);
/* harmony import */ var _class_Tabs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(231);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(144);








const createElements = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  delValue = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].delValue.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]);
class GiveawaysGiveawayRecreator extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds an icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-rotate-left"
      }), ") next to the game name of a giveaway created by yourself that ended with 0 entries (in any page) that opens the", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/new"
      }, "new giveaway"), " page with all of the details of the giveaway prefilled so that you can quickly recreate the giveaway.")),
      features: {
        gr_a: {
          name: 'Show the icon for all created giveaways.',
          sg: true
        },
        gr_r: {
          name: 'Remove the button for giveaways that have been recreated.',
          sg: true
        }
      },
      id: 'gr',
      name: 'Giveaway Recreator',
      sg: true,
      type: 'giveaways'
    };
  }
  async init() {
    if (!this.esgst.newGiveawayPath) return;
    let template = getValue('grTemplate');
    if (template) {
      await delValue('grTemplate');
      template = JSON.parse(template);
      this.esgst.modules.giveawaysGiveawayTemplates.gts_applyTemplate(template);
    }
  }
  async gr_recreateGiveaway(button, giveaway, event) {
    event.preventDefault();
    event.stopPropagation();
    createElements(button, 'atinner', [{
      attributes: {
        class: 'fa fa-circle-o-notch fa-spin'
      },
      type: 'i'
    }]);
    if (this.esgst.createdPath) {
      let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__["FetchRequest"].get(giveaway.url);
      // noinspection JSIgnoredPromiseFromCall
      this.gr_saveTemplate(button, (await this.esgst.modules.giveaways.giveaways_get(response.html, true, response.url, false, 'giveaway'))[0] || giveaway);
    } else {
      // noinspection JSIgnoredPromiseFromCall
      this.gr_saveTemplate(button, giveaway);
    }
  }
  async gr_saveTemplate(button, giveaway) {
    let context,
      elements,
      giveaways,
      i,
      keys,
      n,
      template = {
        delay: 0,
        description: '',
        duration: giveaway.endTime - giveaway.startTime,
        gameName: giveaway.name,
        groups: '',
        level: giveaway.level,
        region: '0'
      };
    if (giveaway.group || giveaway.whitelist) {
      template.whoCanEnter = 'groups';
      if (giveaway.whitelist) {
        template.whitelist = '1';
      }
    } else if (giveaway.inviteOnly) {
      template.whoCanEnter = 'invite_only';
    } else {
      template.whoCanEnter = 'everyone';
    }
    elements = _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].parse((await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__["FetchRequest"].post('/ajax.php', {
      data: `do=autocomplete_giveaway_game&page_number=1&search_query=${encodeURIComponent(giveaway.name)}`
    })).json.html).getElementsByClassName('table__row-outer-wrap');
    for (i = 0, n = elements.length; i < n && elements[i].getAttribute('data-autocomplete-name') !== giveaway.name; ++i) {}
    if (i < n) {
      template.gameId = elements[i].getAttribute('data-autocomplete-id');
    }
    keys = [];
    if (giveaway.entries === 0 || giveaway.entries < giveaway.copies) {
      context = _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].parse((await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__["FetchRequest"].post('/ajax.php', {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_5__["Session"].xsrfToken}&do=popup_keys&code=${giveaway.code}`
      })).json.html).getElementsByClassName('popup__keys__heading');
      if (context) {
        context = context[context.length - 1];
        elements = context.nextElementSibling.nextElementSibling.children;
        for (i = 0, n = elements.length; i < n; ++i) {
          keys.push(elements[i].textContent);
        }
      }
    }
    if (keys.length > 0) {
      template.gameType = 'key';
      template.keys = keys.join('\n');
    } else {
      template.gameType = 'gift';
      template.copies = giveaway.copies;
    }
    await setValue('grTemplate', JSON.stringify(template));
    giveaways = JSON.parse(getValue('giveaways'));
    if (!giveaways[giveaway.code]) {
      giveaways[giveaway.code] = {};
    }
    giveaways[giveaway.code].recreated = true;
    await setValue('giveaways', JSON.stringify(giveaways));
    button.remove();
    _class_Tabs__WEBPACK_IMPORTED_MODULE_6__["Tabs"].open('https://www.steamgifts.com/giveaways/new');
  }
}
const giveawaysGiveawayRecreator = new GiveawaysGiveawayRecreator();


/***/ }),
/* 321 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "groupsGroupStats", function() { return groupsGroupStats; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(221);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(132);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(218);











class GroupsGroupStats extends _class_Module__WEBPACK_IMPORTED_MODULE_6__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds some columns to your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/steam/groups"
      }, "groups"), " page that show some stats about each group.")),
      features: {
        gs_sent: {
          name: 'Sent',
          sg: true
        },
        gs_received: {
          name: 'Received',
          sg: true
        },
        gs_giftDifference: {
          name: 'Gift Difference',
          sg: true
        },
        gs_valueDifference: {
          name: 'Value Difference',
          sg: true
        },
        gs_firstGiveaway: {
          name: 'First Giveaway',
          sg: true
        },
        gs_lastGiveaway: {
          name: 'Last Giveaway',
          sg: true
        },
        gs_averageEntries: {
          name: 'Average Entries',
          sg: true
        },
        gs_contributors: {
          name: 'Contributors',
          sg: true
        },
        gs_winners: {
          name: 'Winners',
          sg: true
        },
        gs_giftsSent: {
          name: 'Gifts Sent',
          sg: true
        },
        gs_giveaways: {
          name: 'Giveaways',
          sg: true
        },
        gs_users: {
          name: 'Users',
          sg: true
        },
        gs_creationDate: {
          name: `Creation Date (takes a bit longer to retrieve the date from Steam)`,
          sg: true
        },
        gs_type: {
          name: `Type (takes a bit longer to check if the group is open, restricted, closed or an official game group on Steam)`,
          sg: true
        }
      },
      id: 'gs',
      name: 'Group Stats',
      sg: true,
      type: 'groups'
    };
  }
  async init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.isCurrentPath('Steam - Groups')) {
      return;
    }
    if ((_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_creationDate') || _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_type')) && !(await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['steamCommunity']]))) {
      return;
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(document.getElementsByClassName('table__heading')[0], 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("fragment", null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_sent') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Sent") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_received') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Received") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_giftDifference') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Gift Difference") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_valueDifference') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Value Difference") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_firstGiveaway') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "First Giveaway") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_lastGiveaway') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Last Giveaway") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_averageEntries') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Average Entries") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_contributors') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Contributors") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_winners') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Winners") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_giftsSent') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Gifts Sent") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_giveaways') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Giveaways") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_users') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Users") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_creationDate') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Creation Date") : null, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_type') ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small text-center"
    }, "Type") : null));
    this.notification = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_10__["NotificationBar"].create().insert(_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.pagination.previousElementSibling, 'beforebegin');
    this.numGroups = 0;
    _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.groupFeatures.push(this.gs_getGroups.bind(this));
  }
  gs_getGroups(groups, main) {
    this.notification.setLoading('Loading stats for groups...');
    this.numGroups += groups.length;
    const promises = [];
    for (const group of groups) {
      const promise = this.gs_addStatus(group, main);
      promise.then(() => this.notification.setMessage(`Loading stats for groups (${--this.numGroups} left)...`));
      promises.push(promise);
    }
    Promise.all(promises).then(() => {
      if (this.numGroups === 0) {
        this.notification.setSuccess('Stats for groups loaded.');
      }
    });
  }
  async gs_addStatus(group, main) {
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`${group.url}/users/search?q=${_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('username')}`);
    const userContext = response.html.querySelector('.table__row-inner-wrap');
    if (!userContext || userContext.querySelector('.table__column__heading').textContent !== _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('username')) {
      return;
    }
    const items = [];
    Object.assign(group, {
      firstGiveaway: 0,
      lastGiveaway: 0,
      averageEntries: 0,
      contributors: 0,
      winners: 0,
      giveaways: 0,
      users: 0,
      giftsSent: 0,
      giftsSentValue: 0,
      sent: 0,
      sentValue: 0,
      received: 0,
      receivedValue: 0,
      giftDifference: 0,
      valueDifference: 0
    });
    const columnRegex = /^([+-]?\$?\d+(?:\.\d+)?)(?:.*?\(\$?([+-]?\d+(?:\.\d+)?)\))?$/;
    const columnCache = new Map();
    function parseColumnText(text) {
      const cleaned = (text || '').trim().replace(/,/g, '');
      if (columnCache.has(cleaned)) return columnCache.get(cleaned);
      const matches = columnRegex.exec(cleaned);
      const result = matches ? {
        main: parseFloat(matches[1].replace('$', '')),
        value: matches[2] !== undefined ? parseFloat(matches[2]) : null
      } : {
        main: null,
        value: null
      };
      columnCache.set(cleaned, result);
      return result;
    }
    const columnConfig = {
      0: {
        setting: 'gs_sent',
        assign: (main, value) => {
          group.sent = main;
          group.sentValue = value !== null && value !== void 0 ? value : 0;
        }
      },
      1: {
        setting: 'gs_received',
        assign: (main, value) => {
          group.received = main;
          group.receivedValue = value !== null && value !== void 0 ? value : 0;
        }
      },
      2: {
        setting: 'gs_giftDifference',
        assign: main => {
          group.giftDifference = main;
        }
      },
      3: {
        setting: 'gs_valueDifference',
        assign: main => {
          group.valueDifference = main;
        }
      }
    };
    const tableColumns = userContext.querySelectorAll('.table__column--width-small');
    for (const [index, column] of tableColumns.entries()) {
      const cfg = columnConfig[index];
      if (cfg && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(cfg.setting)) {
        const {
          main,
          value
        } = parseColumnText(column.textContent);
        if (main !== null) {
          cfg.assign(main, value);
          items.push(column);
        }
      }
    }
    function parseTimestamp(element) {
      const timestampElement = element.querySelector('[data-timestamp]');
      return timestampElement ? parseInt(timestampElement.getAttribute('data-timestamp')) * 1e3 : 0;
    }
    const rowConfig = {
      'First Giveaway': {
        setting: 'gs_firstGiveaway',
        assign: el => {
          group.firstGiveaway = parseTimestamp(el);
        }
      },
      'Last Giveaway': {
        setting: 'gs_lastGiveaway',
        assign: el => {
          group.lastGiveaway = parseTimestamp(el);
        }
      },
      'Average Entries': {
        setting: 'gs_averageEntries',
        assign: el => {
          group.averageEntries = parseInt(el.textContent.replace(/,/g, '')) || 0;
        }
      },
      Contributors: {
        setting: 'gs_contributors',
        assign: el => {
          group.contributors = parseInt(el.textContent.replace(/,/g, '')) || 0;
        }
      },
      Winners: {
        setting: 'gs_winners',
        assign: el => {
          group.winners = parseInt(el.textContent.replace(/,/g, '')) || 0;
        }
      },
      'Gifts Sent': {
        setting: 'gs_giftsSent',
        assign: el => {
          const matches = el.textContent.replace(/,/g, '').match(/^(\d+).*?\(\$?([+-]?\d+(?:\.\d+)?)\)/);
          group.giftsSent = matches ? parseInt(matches[1]) : 0;
          group.giftsSentValue = matches ? parseFloat(matches[2]) : 0;
        }
      }
    };
    const tableRows = response.html.querySelectorAll('.featured__table__row__left');
    for (const row of tableRows) {
      const label = row.textContent.trim();
      const cfg = rowConfig[label];
      if (cfg && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(cfg.setting)) {
        const el = row.nextElementSibling;
        cfg.assign(el);
        el.classList.remove('featured__table__row__right');
        el.classList.add('table__column--width-small', 'text-center');
        items.push(el);
      }
    }
    const sidebarItems = response.html.querySelectorAll('.sidebar__navigation__item__name');
    for (const item of sidebarItems) {
      const text = item.textContent.trim();
      const element = item.nextElementSibling.nextElementSibling;
      let append = false;
      if (text === 'Giveaways' && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_giveaways')) {
        group.giveaways = parseInt(element.textContent.replace(/,/g, '')) || 0;
        append = true;
      } else if (text === 'Users' && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_users')) {
        group.users = parseInt(element.textContent.replace(/,/g, '')) || 0;
        append = true;
      }
      if (append) {
        element.classList.remove('sidebar__navigation__item__count');
        element.classList.add('table__column--width-small', 'text-center');
        items.push(element);
      }
    }
    const steamIdElement = response.html.querySelector(`a[href*="/gid/"]`);
    group.steamId = steamIdElement.getAttribute('href').match(/\/gid\/(\d+)/)[1];
    group.creationDate = 0;
    group.type = '-';
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_creationDate') || _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_type')) {
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`https://steamcommunity.com/gid/${group.steamId}?cc=us&l=english`, {
        anon: true
      });
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_creationDate')) {
        const groupStatLabels = response.html.querySelectorAll('.groupstat > .label');
        let date = '-';
        for (const label of groupStatLabels) {
          if (/founded/i.test(label.textContent)) {
            date = label.nextElementSibling.textContent.trim();
            group.creationDate = new Date(date);
            break;
          }
        }
        items.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
          className: "table__column--width-small text-center"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("span", {
          "data-timestamp": group.creationDate / 1e3
        }, date)));
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('gs_type')) {
        if (response.url.match(/steamcommunity\.com\/games\//)) {
          group.type = 'Official Game Group';
          group.officialGameGroup = true;
        } else {
          const groupType = response.html.querySelector('.grouppage_join_area');
          const text = groupType ? groupType.textContent.trim() : '';
          if (/join group/i.test(text)) {
            group.type = 'Open';
            group.open = true;
          } else if (/request to join/i.test(text)) {
            group.type = 'Restricted';
            group.restricted = true;
          } else if (/membership by invitation only/i.test(text)) {
            group.type = 'Closed';
            group.closed = true;
          }
        }
        items.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
          className: "table__column--width-small text-center"
        }, group.type));
      }
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(group.container, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("fragment", null, items));
    if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gpf && _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gpf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`gpf_enable${_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gpf.type}`)) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.modules.groupsGroupFilters.filters_filter(_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gpf);
    }
  }
}
const groupsGroupStats = new GroupsGroupStats();


/***/ }),
/* 322 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsDiscussionTags", function() { return discussionsDiscussionTags; });
/* harmony import */ var _Tags__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(323);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);


class DiscussionsDiscussionTags extends _Tags__WEBPACK_IMPORTED_MODULE_0__["Tags"] {
  constructor() {
    super('dt');
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-tag"
      }), " ) next a discussion's title (in any page) that allows you to save tags for the discussion (only visible to you)."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "You can press Enter to save the tags."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Each tag can be colored individually."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "There is a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-list"
      }), " ) in the tags popup that allows you to view a list with all of the tags that you have used ordered from most used to least used."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-comments"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-tags"
      }), ") to the page heading of this menu that allows you to manage all of the tags that have been saved.")),
      features: {
        dt_s: {
          name: 'Show tag suggestions while typing.',
          sg: true
        }
      },
      id: 'dt',
      name: 'Discussion Tags',
      sg: true,
      type: 'discussions'
    };
  }
  init() {
    this.esgst.discussionFeatures.push(this.tags_addButtons.bind(this));
    // noinspection JSIgnoredPromiseFromCall
    this.tags_getTags();
  }
}
const discussionsDiscussionTags = new DiscussionsDiscussionTags();


/***/ }),
/* 323 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tags", function() { return Tags; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _class_Checkbox__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(246);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(206);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(211);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(144);














const createElements = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]),
  formatTags = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].formatTags.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]),
  lockAndSaveDiscussions = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].lockAndSaveDiscussions.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]),
  lockAndSaveGames = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].lockAndSaveGames.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]),
  lockAndSaveGroups = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].lockAndSaveGroups.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]),
  getUser = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].getUser.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]),
  saveUser = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].saveUser.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]),
  saveUsers = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].saveUsers.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]),
  setSetting = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].setSetting.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]),
  triggerSetOnEnter = _Common__WEBPACK_IMPORTED_MODULE_13__["common"].triggerSetOnEnter.bind(_Common__WEBPACK_IMPORTED_MODULE_13__["common"]);
class Tags extends _class_Module__WEBPACK_IMPORTED_MODULE_8__["Module"] {
  constructor(id) {
    super();
    this.id = id;
  }
  async tags_getTags() {
    const allTags = [];
    switch (this.id) {
      case 'dt':
        {
          const savedDiscussions = JSON.parse(getValue('discussions'));
          for (const id in savedDiscussions) {
            if (savedDiscussions.hasOwnProperty(id)) {
              const tags = savedDiscussions[id].tags;
              if (tags && Array.isArray(tags)) {
                allTags.push(...tags);
              }
            }
          }
          break;
        }
      case 'gpt':
        {
          const savedGroups = JSON.parse(getValue('groups'));
          for (const group of savedGroups) {
            const tags = group.tags;
            if (tags && Array.isArray(tags)) {
              allTags.push(...tags);
            }
          }
          break;
        }
      case 'gt':
        {
          const savedGames = JSON.parse(getValue('games'));
          for (const id in savedGames.apps) {
            if (savedGames.apps.hasOwnProperty(id)) {
              const tags = savedGames.apps[id].tags;
              if (tags && Array.isArray(tags)) {
                allTags.push(...tags);
              }
            }
          }
          for (const id in savedGames.subs) {
            if (savedGames.subs.hasOwnProperty(id)) {
              const tags = savedGames.subs[id].tags;
              if (tags && Array.isArray(tags)) {
                allTags.push(...tags);
              }
            }
          }
          break;
        }
      case 'ut':
        {
          const savedUsers = JSON.parse(getValue('users'));
          for (const id in savedUsers.users) {
            if (savedUsers.users.hasOwnProperty(id)) {
              const tags = savedUsers.users[id].tags;
              if (tags && Array.isArray(tags)) {
                allTags.push(...tags);
              }
            }
          }
          break;
        }
    }
    const tagCount = {};
    for (const tag of allTags) {
      if (!tagCount[tag]) {
        tagCount[tag] = 0;
      }
      tagCount[tag] += 1;
    }
    this.esgst[`${this.id}Tags`] = [];
    for (const tag in tagCount) {
      if (tagCount.hasOwnProperty(tag)) {
        this.esgst[`${this.id}Tags`].push({
          count: tagCount[tag],
          tag
        });
      }
    }
    this.esgst[`${this.id}Tags`] = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_12__["Utils"].sortArray(this.esgst[`${this.id}Tags`], true, 'count').map(x => x.tag);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get(`${this.id}_s`)) {
      this.esgst.documentEvents.keydown.add(this.tags_navigateSuggestions.bind(this));
      this.esgst.documentEvents.click.add(this.tags_closeSuggestions.bind(this));
    }
  }
  tags_navigateSuggestions(event) {
    if (!event.key.match(/^(ArrowDown|ArrowUp|Enter)$/) || event.repeat) {
      return;
    }
    const selected = document.querySelector('.esgst-tag-suggestion.esgst-selected');
    let element = null;
    if (selected) {
      if (event.key === 'ArrowDown') {
        element = selected.nextElementSibling;
        while (element && element.classList.contains('esgst-hidden')) {
          element = element.nextElementSibling;
        }
      } else if (event.key === 'ArrowUp') {
        element = selected.previousElementSibling;
        while (element && element.classList.contains('esgst-hidden')) {
          element = element.previousElementSibling;
        }
      } else if (event.key === 'Enter') {
        event.stopPropagation();
        selected.click();
      }
      selected.classList.remove('esgst-selected');
      if (element) {
        element.classList.add('esgst-selected');
      }
    } else if (event.key !== 'Enter') {
      element = document.querySelector(`.esgst-tag-suggestion:not(.esgst-hidden)`);
      if (element) {
        element.classList.add('esgst-selected');
      }
    }
  }
  tags_closeSuggestions(event) {
    const suggestions = document.querySelector(`.esgst-tag-suggestions:not(.esgst-hidden)`);
    if (suggestions && !suggestions.contains(event.target) && event.target.tagName !== 'INPUT') {
      this.tags_hideSuggestions(suggestions);
    }
  }
  tags_hideSuggestions(suggestions) {
    suggestions.classList.add('esgst-hidden');
    for (const item of suggestions.children) {
      item.classList.remove('esgst-selected');
    }
  }
  async tags_addButtons(items) {
    items = items.all || items;
    for (const item of items) {
      const obj = {
        item,
        key: this.id,
        colorSetting: _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get(`${this.id}_colors`)
      };
      if (!item.container.getElementsByClassName('esgst-tag-button')[0]) {
        createElements(item.tagContext, item.tagPosition, [{
          attributes: {
            class: 'esgst-tag-button esgst-faded',
            ['data-draggable-id']: this.id,
            title: getFeatureTooltip(this.id, 'Edit tags')
          },
          type: 'a',
          children: [{
            attributes: {
              class: 'fa fa-tag'
            },
            type: 'i'
          }, {
            attributes: {
              class: 'esgst-tags'
            },
            type: 'span'
          }]
        }]).addEventListener('click', this.tags_openPopup.bind(this, obj), true);
      }
      if (item.saved && item.saved.tags) {
        item.tags = item.saved.tags.map(tag => tag.toLowerCase());
        await this.tags_addTags(item, obj, item.saved.tags);
      }
    }
  }
  async tags_openMmPopup(mmObj, items) {
    const key = {
      Discussions: 'dt',
      Games: 'gt',
      Groups: 'gpt',
      Users: 'ut'
    }[this.id];
    const obj = {
      items: [],
      key: this.id,
      colorSetting: _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get(`${this.id}_colors`)
    };
    obj.items = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_12__["Utils"].sortArray(items.filter(item => item.mm && (item.outerWrap.offsetParent || item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`))), false, 'code');
    const savedDiscussions = JSON.parse(getValue('discussions'));
    const savedGames = JSON.parse(getValue('games'));
    const savedGroups = JSON.parse(getValue('groups'));
    const savedUsers = JSON.parse(getValue('users'));
    for (const item of obj.items) {
      item.tags = [];
      item.uniqueTags = [];
      switch (key) {
        case 'dt':
          {
            const discussion = savedDiscussions[item.code];
            if (discussion && discussion.tags && Array.isArray(discussion.tags)) {
              item.tags = discussion.tags;
            }
            break;
          }
        case 'gpt':
          {
            const group = savedGroups.filter(subGroup => subGroup.code === item.code)[0];
            if (group && group.tags && Array.isArray(group.tags)) {
              item.tags = group.tags;
            }
            break;
          }
        case 'gt':
          {
            const game = savedGames[item.type][item.code];
            if (game && game.tags && Array.isArray(game.tags)) {
              item.tags = game.tags;
            }
            break;
          }
        case 'ut':
          {
            const user = await getUser(savedUsers, {
              username: item.code
            });
            if (user && user.tags && Array.isArray(user.tags)) {
              item.tags = user.tags;
            }
            break;
          }
      }
    }
    obj.hasUnique = false;
    obj.sharedTags = new Set();
    for (const item of obj.items) {
      for (const tag of item.tags) {
        if (obj.items.length === obj.items.filter(subItem => subItem.tags.indexOf(tag) > -1).length) {
          obj.sharedTags.add(tag);
        } else {
          obj.hasUnique = true;
          item.uniqueTags.push(tag);
        }
      }
    }
    if (obj.hasUnique) {
      obj.sharedTags.add(`[*]`);
    }
    obj.sharedTags = Array.from(obj.sharedTags);
    // noinspection JSIgnoredPromiseFromCall
    this.tags_openPopup(obj);
  }
  async tags_openPopup(obj, event) {
    if (event) {
      event.preventDefault();
      event.stopPropagation();
    }
    obj.popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
      addScrollable: true,
      buttons: [[{
        template: 'success',
        name: 'Save',
        onClick: this.tags_saveTags.bind(this, obj)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Saving...'
      }]],
      icon: 'fa-tag',
      isTemp: true,
      title: _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("fragment", null, "Edit tags for", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", null, obj.items && `${obj.items.length} items` || obj.item.name || obj.item.id), ":")
    });
    createElements(obj.popup.description, 'beforeend', [{
      attributes: {
        class: 'esgst-description'
      },
      type: 'div',
      children: [{
        text: 'Drag the tags to move them.',
        type: 'p'
      }, {
        type: 'br'
      }, {
        text: `When editing a tag color, it will also alter the color for all items with that tag (you have to refresh the page for it to take effect).`,
        type: 'p'
      }, ...(obj.hasUnique ? [{
        type: 'br'
      }, {
        text: `[*] means that there are tags that are not shared between all items. If you delete the [*] tag, those unique tags will be deleted.`,
        type: 'p'
      }] : [])]
    }]);
    obj.tags = createElements(obj.popup.description, 'beforeend', [{
      attributes: {
        class: 'esgst-tags'
      },
      type: 'div'
    }]);
    obj.input = createElements(obj.popup.description, 'beforeend', [{
      attributes: {
        type: 'text'
      },
      events: {
        focus: this.tags_createTags.bind(this, obj),
        input: this.tags_createTags.bind(this, obj),
        keydown: triggerSetOnEnter.bind(this, obj.popup.buttons[0])
      },
      type: 'input'
    }]);
    createElements(obj.popup.description, 'beforeend', [{
      attributes: {
        class: 'esgst-tag-list-button esgst-clickable fa fa-list',
        title: 'Select from existing tags'
      },
      type: 'i'
    }]).addEventListener('click', this.tags_showTagList.bind(this, obj));
    const children = [];
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get(`${obj.key}_s`)) {
      obj.suggestions = createElements(obj.popup.description, 'beforeend', [{
        attributes: {
          class: 'esgst-tag-suggestions esgst-hidden'
        },
        type: 'div'
      }]);
      for (const tag of this.esgst[`${obj.key}Tags`]) {
        children.push({
          attributes: {
            class: 'esgst-tag-suggestion esgst-hidden'
          },
          events: {
            click: this.tags_addSuggestion.bind(this, obj),
            mouseenter: this.tags_selectSuggestion,
            mouseleave: this.tags_unselectSuggestion
          },
          text: tag,
          type: 'div'
        });
      }
      createElements(obj.suggestions, 'atinner', children);
    }
    createElements(obj.popup.description, 'beforeend', [{
      attributes: {
        class: 'esgst-description'
      },
      text: `Use commas to separate tags, for example: Tag1, Tag2, ...`,
      type: 'div'
    }]);
    obj.popup.open(this.tags_loadTags.bind(this, obj));
  }
  async tags_saveTags(obj) {
    let tags = obj.input.value.replace(/(,\s*)+/g, formatTags).split(`, `);
    if (tags.length === 1 && !tags[0].trim()) {
      tags = '';
    }
    switch (obj.key) {
      case 'dt':
        {
          const discussions = {};
          if (obj.items) {
            for (const item of obj.items) {
              item.multiTags = tags;
              if (tags) {
                const index = tags.indexOf(`[*]`);
                if (index > -1) {
                  item.multiTags = [...tags];
                  item.multiTags.splice(index, 1, ...item.uniqueTags);
                }
              }
              discussions[item.code] = {
                name: item.name,
                tags: item.multiTags
              };
            }
          } else {
            discussions[obj.item.id] = {
              name: obj.item.name,
              tags
            };
          }
          await lockAndSaveDiscussions(discussions);
          break;
        }
      case 'gpt':
        {
          const groups = {};
          if (obj.items) {
            for (const item of obj.items) {
              item.multiTags = tags;
              if (tags) {
                const index = tags.indexOf(`[*]`);
                if (index > -1) {
                  item.multiTags = [...tags];
                  item.multiTags.splice(index, 1, ...item.uniqueTags);
                }
              }
              groups[item.code] = {
                code: item.code,
                name: item.name,
                tags: item.multiTags
              };
            }
          } else {
            groups[obj.item.id] = {
              code: obj.item.id,
              name: obj.item.name,
              tags
            };
          }
          await lockAndSaveGroups(groups);
          break;
        }
      case 'gt':
        {
          const games = {
            apps: {},
            subs: {}
          };
          if (obj.items) {
            for (const item of obj.items) {
              item.multiTags = tags;
              if (tags) {
                const index = tags.indexOf(`[*]`);
                if (index > -1) {
                  item.multiTags = [...tags];
                  item.multiTags.splice(index, 1, ...item.uniqueTags);
                }
              }
              games[item.type][item.code] = {
                tags: item.multiTags
              };
            }
          } else {
            games[obj.item.type][obj.item.id] = {
              tags
            };
          }
          await lockAndSaveGames(games);
          break;
        }
      case 'ut':
        {
          if (obj.items) {
            const users = [];
            for (const item of obj.items) {
              item.multiTags = tags;
              if (tags) {
                const index = tags.indexOf(`[*]`);
                if (index > -1) {
                  item.multiTags = [...tags];
                  item.multiTags.splice(index, 1, ...item.uniqueTags);
                }
              }
              users.push({
                steamId: item.sg ? null : item.code,
                username: item.sg ? item.code : null,
                values: {
                  tags: item.multiTags
                }
              });
            }
            await saveUsers(users);
          } else {
            const user = {
              steamId: obj.item.steamId,
              username: obj.item.username,
              values: {
                tags
              }
            };
            await saveUser(null, null, user);
          }
          break;
        }
    }
    await setSetting(`${obj.key}_colors`, obj.colorSetting);
    if (obj.items) {
      for (const item of obj.items) {
        await this.tags_addTags(item, obj, item.multiTags);
      }
    } else {
      await this.tags_addTags(obj.item, obj, tags);
    }
    obj.popup.close();
  }
  async tags_addTags(item, obj, tags) {
    let items = null;
    switch (obj.key) {
      case 'dt':
        {
          items = [];
          const discussions = _class_Scope__WEBPACK_IMPORTED_MODULE_10__["Scope"].findData(null, 'discussions');
          items = items.concat(discussions.filter(discussion => discussion.code === item.code || discussion.code === item.id));
          break;
        }
      case 'gpt':
        items = this.esgst.currentGroups[item.code || item.id].elements;
        break;
      case 'gt':
        items = (await this.esgst.modules.games.games_get(document, true, this.esgst.games))[item.type][item.id || item.code];
        break;
      case 'ut':
        items = this.esgst.currentUsers[item.code || item.id].elements;
        break;
    }
    if (!items) {
      return;
    }
    const elements = tags.length && tags[0] ? tags.map(x => this.tags_template(x)) : [{
      text: '',
      type: 'node'
    }];
    for (const subItem of items) {
      let context = null;
      switch (obj.key) {
        case 'dt':
          context = subItem.container;
          break;
        case 'gpt':
          context = subItem.parentElement;
          break;
        case 'gt':
          context = subItem.container;
          break;
        case 'ut':
          {
            const container = subItem.parentElement;
            if (!container) {
              break;
            }
            context = container.classList.contains('comment__username') ? container : subItem;
            context = context.parentElement;
            break;
          }
      }
      if (!context) {
        continue;
      }
      const button = context.getElementsByClassName('esgst-tag-button')[0];
      if (!button) {
        continue;
      }
      button.classList[elements ? 'remove' : 'add']('esgst-faded');
      const tagsContainer = button.lastElementChild;
      createElements(tagsContainer, 'atinner', elements);
      for (const tagsBox of tagsContainer.children) {
        const colors = obj.colorSetting[tagsBox.textContent];
        if (!colors) {
          continue;
        }
        tagsBox.style.color = colors.color;
        tagsBox.style.backgroundColor = colors.bgColor;
      }
    }
  }
  tags_template(text) {
    return {
      attributes: {
        class: 'esgst-tag global__image-outer-wrap author_avatar is_icon'
      },
      text,
      type: 'span'
    };
  }
  tags_createTags(obj) {
    obj.tags.innerHTML = '';
    const tags = obj.input.value.replace(/(,\s*)+/g, formatTags).split(`, `).filter(x => x);
    if (tags.length) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get(`${obj.key}_s`)) {
        if (obj.input.value.slice(-1).match(/\s|,/)) {
          this.tags_hideSuggestions(obj.suggestions);
        } else {
          const lastTag = tags[tags.length - 1].toLowerCase();
          let selected = document.querySelector('.esgst-tag-suggestion.esgst-selected');
          if (selected) {
            selected.classList.remove('esgst-selected');
          }
          selected = null;
          for (const child of obj.suggestions.children) {
            const value = child.textContent.toLowerCase();
            if (value !== lastTag && value.match(new RegExp(`^${lastTag}`))) {
              child.classList.remove('esgst-hidden');
              if (!selected) {
                selected = child;
              }
            } else {
              child.classList.add('esgst-hidden');
            }
          }
          if (selected) {
            obj.suggestions.classList.remove('esgst-hidden');
          } else {
            this.tags_hideSuggestions(obj.suggestions);
          }
        }
      }
      for (const tag of tags) {
        this.tags_createTag(obj, tag);
      }
    } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get(`${obj.key}_s`)) {
      this.tags_hideSuggestions(obj.suggestions);
    }
  }
  tags_createTag(obj, tag) {
    const container = createElements(obj.tags, 'beforeend', [{
      attributes: {
        class: 'esgst-tag-preview',
        draggable: true
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'esgst-tags'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'esgst-tag global__image-outer-wrap author_avatar is_icon'
          },
          text: tag,
          type: 'span'
        }]
      }, {
        attributes: {
          class: 'esgst-hidden',
          type: 'text'
        },
        type: 'input'
      }, {
        attributes: {
          title: 'Set text color for this tag',
          type: 'color'
        },
        type: 'input'
      }, {
        attributes: {
          title: 'Set background color for this tag',
          type: 'color'
        },
        type: 'input'
      }, {
        attributes: {
          class: 'esgst-clickable fa fa-edit',
          title: 'Edit tag'
        },
        type: 'i'
      }, {
        attributes: {
          class: 'esgst-clickable fa fa-trash',
          title: 'Delete tag'
        },
        type: 'i'
      }, {
        attributes: {
          class: 'esgst-clickable fa fa-rotate-left',
          title: 'Reset tag color'
        },
        type: 'i'
      }]
    }]);
    const tagContainer = container.firstElementChild;
    const tagBox = tagContainer.firstElementChild;
    const input = tagContainer.nextElementSibling;
    const colorInput = input.nextElementSibling;
    const bgColorInput = colorInput.nextElementSibling;
    const editButton = bgColorInput.nextElementSibling;
    const deleteButton = editButton.nextElementSibling;
    const resetButton = deleteButton.nextElementSibling;
    const colors = obj.colorSetting[tag];
    if (colors) {
      colorInput.value = tagBox.style.color = colors.color;
      bgColorInput.value = tagBox.style.backgroundColor = colors.bgColor;
    }
    container.addEventListener('dragstart', this.tags_startDrag.bind(this, container, obj));
    container.addEventListener('dragenter', this.tags_continueDrag.bind(this, container, obj));
    container.addEventListener('dragend', this.tags_endDrag.bind(this, obj));
    input.addEventListener('keydown', this.tags_editTag.bind(this, bgColorInput, colorInput, input, obj, tagBox, tagContainer));
    colorInput.addEventListener('change', this.tags_saveColor.bind(this, colorInput, 'color', obj, 'color', tagBox));
    bgColorInput.addEventListener('change', this.tags_saveColor.bind(this, bgColorInput, 'backgroundColor', obj, 'bgColor', tagBox));
    editButton.addEventListener('click', this.tags_showEdit.bind(this, input, tagBox, tagContainer));
    deleteButton.addEventListener('click', this.tags_deleteTag.bind(this, container, obj));
    resetButton.addEventListener('click', this.tags_resetColor.bind(this, bgColorInput, colorInput, obj, tagBox));
  }
  tags_startDrag(container, obj, event) {
    event.dataTransfer.setData('text/plain', '');
    obj.dragged = container;
  }
  tags_continueDrag(container, obj) {
    let current;
    current = obj.dragged;
    do {
      current = current.previousElementSibling;
      if (current && current === container) {
        obj.tags.insertBefore(obj.dragged, container);
        return;
      }
    } while (current);
    obj.tags.insertBefore(obj.dragged, container.nextElementSibling);
  }
  tags_endDrag(obj) {
    const tags = [];
    for (const element of obj.tags.children) {
      tags.push(element.firstElementChild.firstElementChild.textContent);
    }
    obj.input.value = tags.join(`, `);
  }
  tags_editTag(bgColorInput, colorInput, input, obj, tagBox, tagContainer, event) {
    if (event.key !== 'Enter') {
      return;
    }
    tagContainer.classList.remove('esgst-hidden');
    input.classList.add('esgst-hidden');
    const tag = input.value;
    tagBox.textContent = tag;
    const colors = obj.colorSetting[tag];
    if (colors) {
      colorInput.value = tagBox.style.color = colors.color;
      bgColorInput.value = tagBox.style.backgroundColor = colors.bgColor;
    }
    this.tags_endDrag(obj);
  }
  tags_saveColor(input, key, obj, saveKey, tagBox) {
    const tag = tagBox.textContent;
    if (!obj.colorSetting[tag]) {
      obj.colorSetting[tag] = {
        bgColor: '',
        color: ''
      };
    }
    obj.colorSetting[tag][saveKey] = tagBox.style[key] = input.value;
  }
  tags_showEdit(input, tagBox, tagContainer) {
    tagContainer.classList.add('esgst-hidden');
    input.classList.remove('esgst-hidden');
    input.value = tagBox.textContent;
    input.focus();
  }
  tags_deleteTag(container, obj) {
    container.remove();
    this.tags_endDrag(obj);
  }
  tags_resetColor(bgColorInput, colorInput, obj, tagBox) {
    bgColorInput.value = '';
    colorInput.value = '';
    tagBox.style.backgroundColor = '';
    tagBox.style.color = '';
    delete obj.colorSetting[tagBox.textContent];
  }
  async tags_showTagList(obj) {
    obj.listPopup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
      addScrollable: true,
      buttons: [{
        template: 'success',
        name: 'Add Tags',
        onClick: this.tags_addTagsFromList.bind(this, obj)
      }],
      icon: 'fa-list',
      isTemp: true,
      title: `Select from existing tags:`
    });
    const list = createElements(obj.listPopup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-tag-list popup__keys__list'
      },
      type: 'div'
    }]);
    obj.selectedTags = [];
    for (const tag of this.esgst[`${obj.key}Tags`]) {
      const item = createElements(list, 'beforeend', [{
        type: 'div',
        children: [{
          type: 'span'
        }, {
          text: ` ${tag}`,
          type: 'node'
        }]
      }]);
      if (obj.colorSetting[tag]) {
        item.style.color = obj.colorSetting[tag].color;
        item.style.backgroundColor = obj.colorSetting[tag].bgColor;
      }
      const checkbox = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_6__["Checkbox"](item);
      checkbox.onEnabled = this.tags_selectTag.bind(this, obj, tag);
      checkbox.onDisabled = this.tag_unselectTag.bind(this, obj, tag);
    }
    obj.listPopup.open();
  }
  tags_addTagsFromList(obj) {
    for (const tag of obj.selectedTags) {
      this.tags_createTag(obj, tag);
    }
    if (obj.input.value) {
      obj.selectedTags.unshift(obj.input.value);
    }
    obj.input.value = obj.selectedTags.join(`, `);
    obj.listPopup.close();
  }
  tags_selectTag(obj, tag) {
    obj.selectedTags.push(tag);
  }
  tag_unselectTag(obj, tag) {
    obj.selectedTags.splice(obj.selectedTags.indexOf(tag), 1);
  }

  /**
   * @param event
   */
  tags_addSuggestion(obj, event) {
    obj.tags.innerHTML = '';
    const tags = obj.input.value.replace(/(,\s*)+/g, formatTags).split(`, `);
    const value = event.currentTarget.textContent;
    tags.pop();
    tags.push(value);
    obj.input.value = tags.join(`, `);
    this.tags_hideSuggestions(obj.suggestions);
    for (const tag of tags) {
      this.tags_createTag(obj, tag);
    }
    obj.input.focus();
  }
  tags_selectSuggestion(event) {
    for (const item of event.currentTarget.parentElement.children) {
      item.classList.remove('esgst-selected');
    }
    event.currentTarget.classList.add('esgst-selected');
  }
  tags_unselectSuggestion(event) {
    const parent = event.currentTarget.parentElement;
    if (event.relatedTarget !== parent && parent.contains(event.relatedTarget)) {
      event.currentTarget.classList.remove('esgst-selected');
    }
  }
  async tags_loadTags(obj) {
    let item = null;
    if (obj.items) {
      item = {
        tags: obj.sharedTags
      };
    } else {
      switch (obj.key) {
        case 'dt':
          {
            const savedDiscussions = JSON.parse(getValue('discussions'));
            item = savedDiscussions[obj.item.id];
            break;
          }
        case 'gpt':
          {
            const savedGroups = JSON.parse(getValue('groups'));
            item = savedGroups.filter(group => group.code === obj.item.id)[0];
            break;
          }
        case 'gt':
          {
            const savedGames = JSON.parse(getValue('games'));
            item = savedGames[obj.item.type][obj.item.id];
            break;
          }
        case 'ut':
          {
            item = await getUser(null, {
              steamId: obj.item.steamId,
              username: obj.item.username
            });
            break;
          }
      }
    }
    obj.input.focus();
    if (!item || !item.tags) {
      return;
    }
    obj.tags.innerHTML = '';
    for (const tag of item.tags) {
      this.tags_createTag(obj, tag);
    }
    obj.input.value = item.tags.join(`, `);
  }
}


/***/ }),
/* 324 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gamesGameTags", function() { return gamesGameTags; });
/* harmony import */ var _Tags__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(323);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class GamesGameTags extends _Tags__WEBPACK_IMPORTED_MODULE_0__["Tags"] {
  constructor() {
    super('gt');
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-tag"
      }), ") next to a game's name (in any page) that allows you to save tags for the game (only visible to you)."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "You can press Enter to save the tags."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Each tag can be colored individually."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "There is a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-list"
      }), ") in the tags popup that allows you to view a list with all of the tags that you have used ordered from most used to least used."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-gamepad"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-tags"
      }), ") to the page heading of this menu that allows you to manage all of the tags that have been saved.")),
      features: {
        gt_s: {
          name: 'Show tag suggestions while typing.',
          sg: true,
          st: true
        }
      },
      id: 'gt',
      name: 'Game Tags',
      sg: true,
      type: 'games'
    };
  }
  init() {
    _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.gameFeatures.push(this.tags_addButtons.bind(this));
    // noinspection JSIgnoredPromiseFromCall
    this.tags_getTags();
  }
}
const gamesGameTags = new GamesGameTags();


/***/ }),
/* 325 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "groupsGroupTags", function() { return groupsGroupTags; });
/* harmony import */ var _Tags__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(323);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class GroupsGroupTags extends _Tags__WEBPACK_IMPORTED_MODULE_0__["Tags"] {
  constructor() {
    super('gpt');
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-tag"
      }), ") next to a group's name (in any page) that allows you to save tags for the group (only visible to you)."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "You can press Enter to save the tags."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Each tag can be colored individually."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "There is a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-list"
      }), ") in the tags popup that allows you to view a list with all of the tags that you have used ordered from most used to least used."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-gamepad"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-tags"
      }), ") to the page heading of this menu that allows you to manage all of the tags that have been saved.")),
      features: {
        gpt_s: {
          name: 'Show tag suggestions while typing.',
          sg: true,
          st: true
        }
      },
      id: 'gpt',
      name: 'Group Tags',
      sg: true,
      type: 'groups'
    };
  }
  init() {
    _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.groupFeatures.push(this.tags_addButtons.bind(this));
    // noinspection JSIgnoredPromiseFromCall
    this.tags_getTags();
  }
}
const groupsGroupTags = new GroupsGroupTags();


/***/ }),
/* 326 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysNewGiveawayDescriptionChecker", function() { return giveawaysNewGiveawayDescriptionChecker; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




class GiveawaysNewGiveawayDescriptionChecker extends _class_Module__WEBPACK_IMPORTED_MODULE_1__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "When you click on \"Review Giveaway\" in the new giveaway page (also extends to the \"Create Giveaway\" button from ", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
        "data-esgst-feature-id": "gts"
      }), " and the \"Add\" button from ", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
        "data-esgst-feature-id": "mgc"
      }), "), this feature checks if there are possible Steam keys / Humble Bundle gift links in the description and warns you about it, in case you pasted them there by mistake."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "This feature replaces the native \"Review Giveaway\" button, so that ESGST can intercept the click.")),
      id: 'ngdc',
      name: 'New Giveaway Description Checker',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.newGiveawayPath) {
      return;
    }
    const reviewButton = document.querySelector('.js__submit-form');
    const textArea = document.querySelector(`[name=description]`);
    if (!reviewButton || !textArea) {
      return;
    }
    reviewButton.classList.remove('js__submit-form');
    const newReviewButton = reviewButton.cloneNode(true);
    reviewButton.parentElement.insertBefore(newReviewButton, reviewButton);
    reviewButton.remove();
    newReviewButton.setAttribute('data-esgst', 'reviewButton');
    newReviewButton.addEventListener('click', async () => {
      if (await this.check(textArea.value)) {
        return;
      }
      const form = newReviewButton.closest('form');
      if (newReviewButton.classList.contains('js__edit-giveaway')) {
        form.querySelector(`[name=next_step]`).value = 1;
      }
      form.submit();
    });
  }
  check(value) {
    return new Promise(async resolve => {
      let message;
      if (value.match(/[\d\w]{5}(-[\d\w]{5}){2,}/)) {
        message = 'There appears to be a Steam key in the description of the giveaway.';
      } else if (value.match(/https?:\/\/(www\.)?humblebundle\.com\/gift/)) {
        message = 'There appears to be a Humble Bundle gift link in the description of the giveaway.';
      }
      if (message) {
        message = `${message} Are you sure you want to continue?`;
        await _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].common.createConfirmation(message, () => resolve(false), () => resolve(true));
      } else {
        resolve(false);
      }
    });
  }
}
const giveawaysNewGiveawayDescriptionChecker = new GiveawaysNewGiveawayDescriptionChecker();


/***/ }),
/* 327 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayTemplates", function() { return giveawaysGiveawayTemplates; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_Checkbox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(246);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(208);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(209);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(211);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(212);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(144);
















const createElements = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  setSetting = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setSetting.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]);
class GiveawaysGiveawayTemplates extends _class_Module__WEBPACK_IMPORTED_MODULE_9__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Adds a section 9 to the", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/new"
      }, "new giveaway"), " page that allows you to save the details that you have filled (except for the name of the game and the number of copies/keys) as a template so that you can reuse it later. For example, if you often make public level 5 giveaways that last 2 days, you can save a template with those details so that when you create a new giveaway all of the fields in the page are automatically filled and all you have to do is select the game and set the number of copies/keys."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Also adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-file"
      }), ") to the main page heading of the same page that allows you manage all of the templates that have been saved and select the template that you want to use.")),
      id: 'gts',
      name: 'Giveaway Templates',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (!this.esgst.newGiveawayPath) return;
    let rows = document.getElementsByClassName('form__rows')[0];
    if (!rows) return;
    this.gts_addButtonSection(createHeadingButton({
      id: 'gts',
      icons: ['fa-file'],
      title: 'View/apply templates'
    }), rows);
  }
  gts_addButtonSection(button, rows) {
    let createGiveawayButton, delay, endTime, message, preciseEndCheckbox, preciseEndDateCheckbox, preciseEndOption, preciseEndDateOption, preciseStartCheckbox, preciseStartDateCheckbox, preciseStartOption, preciseStartDateOption, reviewButton, section, startTime, warning;
    if (!rows) return;
    let gts = {};
    gts.deletedTemplates = [];
    reviewButton = rows.lastElementChild;
    createGiveawayButton = _components_Button__WEBPACK_IMPORTED_MODULE_14__["Button"].create([{
      color: 'green',
      icons: ['fa-plus-circle'],
      name: 'Create Giveaway',
      onClick: async () => {
        const textArea = document.querySelector(`[name="description"]`);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('ngdc') && (await _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].esgst.modules.giveawaysNewGiveawayDescriptionChecker.check(textArea.value))) {
          return;
        }
        return new Promise(async resolve => {
          let data = `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_11__["Session"].xsrfToken}&next_step=3&`;
          data += `game_id=${document.querySelector(`[name="game_id"]`).value}&`;
          data += `type=${document.querySelector(`[name="type"]`).value}&`;
          data += `copies=${document.querySelector(`[name="copies"]`).value}&`;
          data += `key_string=${encodeURIComponent(document.querySelector(`[name="key_string"]`).value)}&`;
          data += `timezone=${new Date().getTimezoneOffset()}&`;
          data += `start_time=${encodeURIComponent(document.querySelector(`[name="start_time"]`).value)}&`;
          data += `end_time=${encodeURIComponent(document.querySelector(`[name="end_time"]`).value)}&`;
          data += `region_restricted=${document.querySelector(`[name="region_restricted"]`).value}&`;
          data += `country_item_string=${encodeURIComponent(document.querySelector(`[name="country_item_string"]`).value.trim())}&`;
          data += `group_item_string=${encodeURIComponent(document.querySelector(`[name="group_item_string"]`).value.trim())}&`;
          data += `who_can_enter=${document.querySelector(`[name="who_can_enter"]`).value}&`;
          data += `whitelist=${document.querySelector(`.form__row--who-can-enter [name="whitelist"]`).value}&`;
          data += `contributor_level=${document.querySelector(`[name="contributor_level"]`).value}&`;
          data += `description=${encodeURIComponent(textArea.value)}`;
          const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].post('/giveaways/new', {
            data: data.replace(/start_time=(.+?)&/, this.esgst.modules.giveawaysMultipleGiveawayCreator.mgc_correctTime.bind(this.esgst.modules.giveawaysMultipleGiveawayCreator))
          });
          if (response.url.match(/\/giveaways\/new/)) {
            resolve();
            const errors = response.html.getElementsByClassName('form__row__error');
            let message = `Unable to create giveaway because of the following errors:\n\n`;
            for (const error of errors) {
              message += `* ${error.textContent.trim()}`;
            }
            window.alert(message);
          } else {
            window.location.href = response.url;
          }
        });
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Creating...'
    }]).insert(rows, 'beforeend');
    button.addEventListener('click', this.gts_openPopup.bind(this, gts));
    section = createElements(reviewButton, 'beforebegin', [{
      attributes: {
        class: 'esgst-form-row'
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'esgst-form-heading'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'esgst-form-heading-number'
          },
          text: '9.',
          type: 'div'
        }, {
          attributes: {
            class: 'esgst-form-heading-text'
          },
          text: 'Template',
          type: 'div'
        }]
      }, {
        attributes: {
          class: 'esgst-gts-section esgst-form-row-indent'
        },
        type: 'div',
        children: [{
          type: 'div',
          children: [{
            text: 'Use precise start time.',
            type: 'span'
          }, {
            attributes: {
              class: 'fa fa-question-circle',
              title: `For example, if you picked 12:00 pm for the start date in section 4, when you apply the template the start date will be set to the next 12:00 pm hour, so if you apply the template on January 1 11:00 pm, the start date will be set to January 1 12:00 pm, and if you apply the template on January 1 13:00 pm, the start date will be set to January 2 12:00 pm. The end date will then be set based on the time range that you picked.`
            },
            type: 'i'
          }]
        }, {
          type: 'div',
          children: [{
            text: 'Use precise end time.',
            type: 'span'
          }, {
            attributes: {
              class: 'fa fa-question-circle',
              title: `For example, if you picked 12:00 pm for the end date and a time range of 2 days in section 4, when you apply the template the end date will be set to the next 12:00 pm hour after 2 days, so if you apply the template on January 1 11:00 pm, the end date will be set to January 3 12:00 pm, and if you apply the template on January 1 13:00 pm, the end date will be set to January 4 12:00 pm. The start date will then be set based on the time range that you picked.`
            },
            type: 'i'
          }]
        }, {
          type: 'div',
          children: [{
            text: 'Use precise start date.',
            type: 'span'
          }, {
            attributes: {
              class: 'fa fa-question-circle',
              title: `With this option enabled, the template will use the exact start date that you picked in section 4. This is only useful if you are creating multiple giveaways and want all of them to begin at a specific later date, because the template is not reusable after the date has passed.`
            },
            type: 'i'
          }]
        }, {
          type: 'div',
          children: [{
            text: 'Use precise end date.',
            type: 'span'
          }, {
            attributes: {
              class: 'fa fa-question-circle',
              title: `With this option enabled, the template will use the exact end date that you picked in section 4. This is only useful if you are creating multiple giveaways and want all of them to end at a specific later date, because the template is not reusable after the date has passed.`
            },
            type: 'i'
          }]
        }, {
          attributes: {
            class: 'esgst-description'
          },
          text: `By not selecting one of the options above, the template will use the time range that you picked in section 4. For example, if the time range that you picked was 2 days, when you apply the template the start date will be set to your current date and the end date will be set to 2 days later.`,
          type: 'div'
        }, {
          attributes: {
            class: 'form__input-small',
            type: 'text'
          },
          type: 'input'
        }, {
          attributes: {
            class: 'esgst-description esgst-hidden'
          },
          text: 'Saved!',
          type: 'span'
        }, {
          attributes: {
            class: 'esgst-hidden form__row__error'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'fa fa-exclamation-circle'
            },
            type: 'i'
          }, {
            text: ' Please enter a name for the template.',
            type: 'node'
          }]
        }, {
          attributes: {
            class: 'esgst-description'
          },
          text: 'The name of the template.',
          type: 'div'
        }]
      }]
    }]).lastElementChild;
    preciseStartOption = section.firstElementChild;
    preciseEndOption = preciseStartOption.nextElementSibling;
    preciseStartDateOption = preciseEndOption.nextElementSibling;
    preciseEndDateOption = preciseStartDateOption.nextElementSibling;
    gts.input = preciseEndDateOption.nextElementSibling.nextElementSibling;
    message = gts.input.nextElementSibling;
    warning = message.nextElementSibling;
    preciseStartCheckbox = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_5__["Checkbox"](preciseStartOption, _class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('gts_preciseStart'));
    preciseEndCheckbox = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_5__["Checkbox"](preciseEndOption, _class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('gts_preciseEnd'));
    preciseStartDateCheckbox = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_5__["Checkbox"](preciseStartDateOption, _class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('gts_preciseStartDate'));
    preciseEndDateCheckbox = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_5__["Checkbox"](preciseEndDateOption, _class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('gts_preciseEndDate'));
    preciseStartOption.addEventListener('click', () => {
      setSetting('gts_preciseStart', preciseStartCheckbox.input.checked);
    });
    preciseEndOption.addEventListener('click', () => {
      setSetting('gts_preciseEnd', preciseEndCheckbox.input.checked);
    });
    preciseStartDateOption.addEventListener('click', () => {
      setSetting('gts_preciseStartDate', preciseStartDateCheckbox.input.checked);
    });
    preciseEndDateOption.addEventListener('click', () => {
      setSetting('gts_preciseEndDate', preciseEndDateCheckbox.input.checked);
    });
    _components_Button__WEBPACK_IMPORTED_MODULE_14__["Button"].create([{
      template: 'success',
      name: 'Save Template',
      onClick: async () => {
        let i, n, template, savedTemplates, startDate, endDate;
        if (gts.input.value) {
          warning.classList.add('esgst-hidden');
          startDate = new Date(document.querySelector(`[name="start_time"]`).value);
          startTime = startDate.getTime();
          endDate = new Date(document.querySelector(`[name="end_time"]`).value);
          endTime = endDate.getTime();
          delay = startTime - Date.now();
          if (delay < 0) {
            delay = 0;
          }
          template = {
            countries: document.querySelector(`[name="country_item_string"]`).value.trim(),
            delay: delay,
            description: document.querySelector(`[name="description"]`).value,
            duration: endTime - startTime,
            gameType: document.querySelector(`[name="type"]`).value,
            groups: document.querySelector(`[name="group_item_string"]`).value.trim(),
            level: document.querySelector(`[name="contributor_level"]`).value,
            name: gts.input.value,
            region: document.querySelector(`[name="region_restricted"]`).value,
            whoCanEnter: document.querySelector(`[name="who_can_enter"]`).value,
            whitelist: document.querySelector(`.form__row--who-can-enter [name="whitelist"]`).value,
            createTrain: _class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('mgc_createTrain'),
            removeLinks: _class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('mgc_removeLinks'),
            startTime: undefined,
            endTime: undefined,
            startDate: undefined,
            endDate: undefined
          };
          if (preciseStartCheckbox.input.checked) {
            template.startTime = startTime;
          }
          if (preciseEndCheckbox.input.checked) {
            template.endTime = endTime;
          }
          if (preciseStartDateCheckbox.input.checked) {
            template.startDate = {
              day: startDate.getDate(),
              month: startDate.getMonth(),
              year: startDate.getFullYear()
            };
          }
          if (preciseEndDateCheckbox.input.checked) {
            template.endDate = {
              day: endDate.getDate(),
              month: endDate.getMonth(),
              year: endDate.getFullYear()
            };
          }
          const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_8__["Lock"]('template', {
            threshold: 300
          });
          await lock.lock();
          savedTemplates = JSON.parse(getValue('templates', '[]'));
          for (i = 0, n = savedTemplates.length; i < n && savedTemplates[i].name !== template.name; ++i) {}
          if (i < n) {
            if (gts.edit) {
              savedTemplates[i] = template;
              message.classList.remove('esgst-hidden');
              window.setTimeout(() => {
                message.classList.add('esgst-hidden');
              }, 2000);
            } else if (window.confirm('There already exists a template with this name. Do you want to overwrite it?')) {
              savedTemplates[i] = template;
              message.classList.remove('esgst-hidden');
              window.setTimeout(() => {
                message.classList.add('esgst-hidden');
              }, 2000);
            }
          } else {
            savedTemplates.push(template);
            message.classList.remove('esgst-hidden');
            window.setTimeout(() => {
              message.classList.add('esgst-hidden');
            }, 2000);
          }
          await setValue('templates', JSON.stringify(savedTemplates));
          await lock.unlock();
        } else {
          warning.classList.remove('esgst-hidden');
        }
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Saving...'
    }]).insert(section, 'beforeend');
    rows.insertBefore(createGiveawayButton.nodes.outer, rows.firstElementChild);
    rows.insertBefore(reviewButton, rows.firstElementChild);
    createGiveawayButton.nodes.outer.style.display = 'inline-block';
    createGiveawayButton.nodes.outer.style.margin = '20px 5px';
    reviewButton.style.margin = '20px 0';
    let first, last;
    first = true;
    last = false;
    window.addEventListener('scroll', () => {
      if (window.scrollY < 138) {
        if (!first) {
          rows.insertBefore(createGiveawayButton.nodes.outer, rows.firstElementChild);
          rows.insertBefore(reviewButton, rows.firstElementChild);
          createGiveawayButton.nodes.outer.style.margin = '20px 5px';
          reviewButton.style.margin = '20px 0';
          first = true;
          last = false;
        }
      } else if (!last) {
        rows.appendChild(reviewButton);
        rows.appendChild(createGiveawayButton.nodes.outer);
        reviewButton.style.margin = '';
        createGiveawayButton.nodes.outer.style.margin = '0 5px';
        last = true;
        first = false;
      }
    });
  }
  async gts_openPopup(gts) {
    let popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_10__["Popup"]({
      addScrollable: true,
      icon: 'fa-file',
      isTemp: true,
      title: `View/apply templates:`
    });
    createElements(popup.description, 'afterbegin', [{
      attributes: {
        class: 'esgst-description'
      },
      text: 'Drag and drop templates to move them.',
      type: 'div'
    }]);
    gts.undo = createElements(popup.description, 'beforeend', [{
      attributes: {
        class: 'esgst-clickable esgst-hidden'
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'fa fa-rotate-left'
        },
        type: 'i'
      }, {
        text: 'Undo Delete',
        type: 'span'
      }]
    }]);
    gts.undo.addEventListener('click', this.gts_undoDelete.bind(this, gts));
    let templates = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-text-left popup__keys__list'
      },
      type: 'div'
    }]);
    let savedTemplates = JSON.parse(getValue('templates', '[]'));
    for (let i = 0, n = savedTemplates.length; i < n; ++i) {
      let savedTemplate = savedTemplates[i];
      if (!savedTemplate.gameType) {
        savedTemplate.gameType = 'gift';
      }
      if (!savedTemplate.whoCanEnter) {
        savedTemplate.whoCanEnter = savedTemplate.type;
      }
      let details = `${savedTemplate.gameType}, `;
      if (savedTemplate.startTime || savedTemplate.endTime) {
        if (savedTemplate.startTime) {
          let time = new Date(savedTemplate.startTime);
          if (savedTemplate.startDate) {
            details += `${savedTemplate.startDate.year}-${savedTemplate.startDate.month + 1}-${savedTemplate.startDate.day} `;
          }
          details += `${`0${time.getHours()}`.slice(-2)}:${`0${time.getMinutes()}`.slice(-2)} to`;
        } else {
          details += '? to';
        }
        if (savedTemplate.endTime) {
          let time = new Date(savedTemplate.endTime);
          if (savedTemplate.endDate) {
            details += ` ${savedTemplate.endDate.year}-${savedTemplate.endDate.month + 1}-${savedTemplate.endDate.day}`;
          }
          details += ` ${`0${time.getHours()}`.slice(-2)}:${`0${time.getMinutes()}`.slice(-2)}`;
        } else {
          details += ' ?';
        }
        details += `, `;
      } else if (savedTemplate.startDate || savedTemplate.endDate) {
        if (savedTemplate.startDate) {
          details += `${savedTemplate.startDate.year}-${savedTemplate.startDate.month + 1}-${savedTemplate.startDate.day} to`;
        } else {
          details += '? to';
        }
        if (savedTemplate.endDate) {
          details += ` ${savedTemplate.endDate.year}-${savedTemplate.endDate.month + 1}-${savedTemplate.endDate.day}`;
        } else {
          details = ' ?';
        }
        details += `, `;
      }
      let hours = Math.floor(savedTemplate.duration / 3600000);
      if (hours > 23) {
        let days = Math.floor(hours / 24);
        if (days > 6) {
          let weeks = Math.floor(days / 7);
          if (weeks === 1) {
            details += '1 week';
          } else {
            details += `${weeks} weeks`;
          }
        } else if (days === 1) {
          details += '1 day';
        } else {
          details += `${days} days`;
        }
      } else if (hours === 1) {
        details += '1 hour';
      } else {
        details += `${hours} hours`;
      }
      if (savedTemplate.region !== '0') {
        details += `, region restricted`;
      }
      if (savedTemplate.whoCanEnter === 'everyone') {
        details += `, public`;
      } else if (savedTemplate.whoCanEnter === 'invite_only') {
        details += `, invite only`;
      } else {
        if (savedTemplate.whitelist === '1') {
          details += `, whitelist`;
        }
        if (savedTemplate.groups.trim()) {
          details += `, groups`;
        }
      }
      details += `, level ${savedTemplate.level}`;
      let template = createElements(templates, 'beforeend', [{
        attributes: {
          draggable: true
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'esgst-clickable',
            style: `float: left;`
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'esgst-bold'
            },
            text: savedTemplate.name,
            type: 'span'
          }]
        }, {
          attributes: {
            class: 'esgst-clickable',
            style: `float: right;`
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'fa fa-trash',
              title: 'Delete template'
            },
            type: 'i'
          }]
        }, {
          attributes: {
            style: `clear: both;`
          },
          type: 'div'
        }, {
          attributes: {
            class: 'esgst-description'
          },
          text: details,
          type: 'div'
        }]
      }]);
      template.addEventListener('dragstart', this.gts_setSource.bind(this, gts, savedTemplate.name, template));
      template.addEventListener('dragenter', this.gts_getSource.bind(this, gts, template, templates));
      template.addEventListener('dragend', this.gts_saveSource.bind(this, gts));
      this.gts_setTemplate(gts, popup, template, savedTemplate);
    }
    popup.open();
  }
  gts_setTemplate(gts, popup, template, savedTemplate) {
    let applyButton = template.firstElementChild,
      deleteButton = applyButton.nextElementSibling;
    applyButton.addEventListener('click', () => {
      this.gts_applyTemplate(savedTemplate);
      gts.input.value = savedTemplate.name;
      gts.edit = true;
      popup.close();
    });
    deleteButton.addEventListener('click', async () => {
      createElements(deleteButton, 'atinner', [{
        attributes: {
          class: 'fa fa-circle-o-notch fa-spin'
        },
        type: 'i'
      }]);
      const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_8__["Lock"]('template', {
        threshold: 300
      });
      await lock.lock();
      savedTemplates = JSON.parse(getValue('templates', '[]')), i = 0;
      for (const n = savedTemplates.length; i < n && savedTemplates[i].name !== savedTemplate.name; ++i) {}
      savedTemplates.splice(i, 1);
      await setValue('templates', JSON.stringify(savedTemplates));
      await lock.unlock();
      createElements(deleteButton, 'atinner', [{
        attributes: {
          class: 'fa fa-trash'
        },
        type: 'i'
      }]);
      template.classList.add('esgst-hidden');
      gts.deletedTemplates.push({
        template: template,
        savedTemplate: savedTemplate
      });
      gts.undo.classList.remove('esgst-hidden');
      gts.edit = false;
    });
  }
  async gts_undoDelete(gts) {
    let deletedTemplate = gts.deletedTemplates.pop();
    deletedTemplate.template.classList.remove('esgst-hidden');
    deletedTemplate.template.parentElement.appendChild(deletedTemplate.template);
    let savedTemplates = JSON.parse(getValue('templates', '[]'));
    savedTemplates.push(deletedTemplate.savedTemplate);
    await setValue('templates', JSON.stringify(savedTemplates));
    if (gts.deletedTemplates.length === 0) {
      gts.undo.classList.add('esgst-hidden');
    }
  }
  gts_applyTemplate(savedTemplate) {
    let context, countries, currentDate, days, endTime, groups, i, id, j, matches, newEndTime, newStartTime, startTime, selected;
    if (!savedTemplate.gameType) {
      savedTemplate.gameType = 'gift';
    }
    if (!savedTemplate.whoCanEnter) {
      savedTemplate.whoCanEnter = savedTemplate.type;
    }
    currentDate = new Date();
    this.clickCheckbox(savedTemplate.gameType);
    if (savedTemplate.edit) {
      _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('start_time', new Date(savedTemplate.startTime));
      _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('end_time', new Date(savedTemplate.endTime));
    } else {
      if (savedTemplate.startTime && savedTemplate.endTime) {
        startTime = new Date(savedTemplate.startTime);
        newStartTime = new Date(currentDate.getTime());
        newStartTime.setHours(startTime.getHours(), startTime.getMinutes(), startTime.getSeconds(), startTime.getMilliseconds());
        if (newStartTime.getTime() < currentDate.getTime()) {
          newStartTime.setDate(newStartTime.getDate() + 1);
        }
        endTime = new Date(savedTemplate.endTime);
        newEndTime = new Date(newStartTime.getTime());
        if (endTime.getMonth() !== startTime.getMonth()) {
          days = new Date(startTime.getFullYear(), startTime.getMonth() + 1, 0).getDate() - newStartTime.getDate() + endTime.getDate();
        } else {
          days = endTime.getDate() - startTime.getDate();
        }
        newEndTime.setDate(newStartTime.getDate() + days);
        newEndTime.setHours(endTime.getHours(), endTime.getMinutes(), endTime.getSeconds(), endTime.getMilliseconds());
        _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('start_time', newStartTime);
        _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('end_time', newEndTime);
      } else if (savedTemplate.startTime) {
        startTime = new Date(savedTemplate.startTime);
        newStartTime = new Date(currentDate.getTime());
        newStartTime.setHours(startTime.getHours(), startTime.getMinutes(), startTime.getSeconds(), startTime.getMilliseconds());
        if (newStartTime.getTime() < currentDate.getTime()) {
          newStartTime.setDate(newStartTime.getDate() + 1);
        }
        newEndTime = new Date(newStartTime.getTime() + savedTemplate.duration);
        _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('start_time', newStartTime);
        _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('end_time', newEndTime);
      } else if (savedTemplate.endTime) {
        endTime = new Date(savedTemplate.endTime);
        newStartTime = new Date(currentDate.getTime() + savedTemplate.delay);
        newEndTime = new Date(newStartTime.getTime() + savedTemplate.duration);
        newEndTime.setHours(endTime.getHours(), endTime.getMinutes(), endTime.getSeconds(), endTime.getMilliseconds());
        if (newEndTime.getTime() < newStartTime.getTime()) {
          newEndTime.setDate(newEndTime.getDate() + 1);
        }
        _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('start_time', newStartTime);
        _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('end_time', newEndTime);
      } else {
        newStartTime = new Date(currentDate.getTime() + savedTemplate.delay);
        newEndTime = new Date(currentDate.getTime() + savedTemplate.delay + savedTemplate.duration);
        _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('start_time', newStartTime);
        _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('end_time', newEndTime);
      }
      if (savedTemplate.startDate) {
        newStartTime.setFullYear(savedTemplate.startDate.year);
        newStartTime.setMonth(savedTemplate.startDate.month);
        newStartTime.setDate(savedTemplate.startDate.day);
        _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('start_time', newStartTime);
      }
      if (savedTemplate.endDate) {
        newEndTime.setFullYear(savedTemplate.endDate.year);
        newEndTime.setMonth(savedTemplate.endDate.month);
        newEndTime.setDate(savedTemplate.endDate.day);
        _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setDatePickerDate('end_time', newEndTime);
      }
    }
    if (!savedTemplate.region.match(/^[10]$/)) {
      savedTemplate.region = '0';
    }
    this.clickCheckbox(savedTemplate.region);
    if (savedTemplate.countries) {
      matches = document.querySelector(`.form_list[data-input="country_item_string"]`).children;
      countries = savedTemplate.countries.trim().split(/\s/);
      for (i = matches.length - 1; i > 0; --i) {
        context = matches[i];
        id = context.getAttribute('data-item-id');
        selected = context.classList.contains('is-selected');
        j = countries.indexOf(id);
        if (selected && j < 0 || !selected && j >= 0) {
          context.click();
        }
      }
    }
    this.clickCheckbox(savedTemplate.whoCanEnter);
    if (savedTemplate.gameName) {
      document.getElementsByClassName('js__autocomplete-name')[0].value = savedTemplate.gameName;
    }
    if (savedTemplate.gameId) {
      document.querySelector(`[name="game_id"]`).value = savedTemplate.gameId;
    }
    if (savedTemplate.keys) {
      document.querySelector(`[name="key_string"]`).value = savedTemplate.keys;
    } else if (savedTemplate.copies) {
      document.querySelector(`[name="copies"]`).value = savedTemplate.copies;
    }
    if (savedTemplate.whoCanEnter === 'groups') {
      matches = document.querySelector(`.form_list[data-input="group_item_string"]`).children;
      context = matches[0];
      if (savedTemplate.whitelist === '1' && !context.classList.contains('is-selected') || savedTemplate.whitelist !== '1' && context.classList.contains('is-selected')) {
        context.click();
      }
      if (savedTemplate.groups) {
        groups = savedTemplate.groups.trim().split(/\s/);
        for (i = matches.length - 1; i > 0; --i) {
          context = matches[i];
          id = context.getAttribute('data-item-id');
          selected = context.classList.contains('is-selected');
          j = groups.indexOf(id);
          if (selected && j < 0 || !selected && j >= 0) {
            context.click();
          }
        }
      } else {
        for (i = matches.length - 1; i > 0; --i) {
          context = matches[i];
          if (context.classList.contains('is-selected')) {
            context.click();
          }
        }
      }
    }
    if (savedTemplate.level > 0) {
      document.getElementsByClassName('ui-slider-range')[0].style.width = `${savedTemplate.level * 10}%`;
      document.getElementsByClassName('form__level')[0].textContent = `level ${savedTemplate.level}`;
      document.getElementsByClassName('form__input-description--no-level')[0].classList.add('is-hidden');
      document.getElementsByClassName('form__input-description--level')[0].classList.remove('is-hidden');
    } else {
      document.getElementsByClassName('ui-slider-range')[0].style.width = '0%';
      document.getElementsByClassName('form__input-description--level')[0].classList.add('is-hidden');
      document.getElementsByClassName('form__input-description--no-level')[0].classList.remove('is-hidden');
    }
    document.getElementsByClassName('ui-slider-handle')[0].style.left = `${savedTemplate.level * 10}%`;
    document.querySelector(`[name="contributor_level"]`).value = savedTemplate.level;
    document.querySelector(`[name="description"]`).value = savedTemplate.description;
    if (this.esgst.mgc_createTrainSwitch) {
      if (savedTemplate.createTrain) {
        this.esgst.mgc_createTrainSwitch.enable();
      } else {
        this.esgst.mgc_createTrainSwitch.disable();
      }
    }
    if (this.esgst.mgc_removeLinksSwitch) {
      if (savedTemplate.removeLinks) {
        this.esgst.mgc_removeLinksSwitch.enable();
      } else {
        this.esgst.mgc_removeLinksSwitch.disable();
      }
    }
  }
  async gts_setSource(gts, name, template, event) {
    let i, n, savedTemplates;
    event.dataTransfer.setData('text/plain', '');
    gts.source = template;
    savedTemplates = JSON.parse(getValue('templates', '[]'));
    for (i = 0, n = savedTemplates.length; i < n && savedTemplates[i].name !== name; ++i) {}
    if (i < n) {
      gts.sourceIndex = i;
    }
  }
  gts_getSource(gts, template, templates) {
    let current, i;
    current = gts.source;
    i = 0;
    do {
      current = current.previousElementSibling;
      if (current && current === template) {
        gts.sourceNewIndex = i;
        templates.insertBefore(gts.source, template);
        return;
      }
      ++i;
    } while (current);
    gts.sourceNewIndex = i - 1;
    templates.insertBefore(gts.source, template.nextElementSibling);
  }
  async gts_saveSource(gts) {
    let savedTemplates = JSON.parse(getValue('templates', '[]'));
    savedTemplates.splice(gts.sourceNewIndex, 0, savedTemplates.splice(gts.sourceIndex, 1)[0]);
    setValue('templates', JSON.stringify(savedTemplates));
  }
  clickCheckbox(value) {
    if (value === null) {
      return;
    }
    let checkbox = document.querySelector(`[data-checkbox-value="${value}"]`);
    if (checkbox) {
      checkbox.click();
    }
  }
}
const giveawaysGiveawayTemplates = new GiveawaysGiveawayTemplates();


/***/ }),
/* 328 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGridView", function() { return giveawaysGridView; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var date_fns_formatDistanceStrict__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(242);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(220);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(222);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(144);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(206);









const createElements = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]),
  setSetting = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].setSetting.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]);
class GiveawaysGridView extends _class_Module__WEBPACK_IMPORTED_MODULE_3__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Turns each giveaway in the main page, groups, game pages, profile pages and some popups(", _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("span", {
        "data-esgst-feature-id": "gb"
      }), ", ", _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("span", {
        "data-esgst-feature-id": "ged"
      }), " and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("span", {
        "data-esgst-feature-id": "ge"
      }), ") into a small box where only the game's image is shown. Overlaying the image you will find the start/end times, type and level of the giveaway. To get the other details of the giveaway (such as the game name, the number of points it costs to enter, the number of entries/comments and the creator's username), you can hover over the box and a popout will appear containing them.This allows multiple giveaways to be shown per line, which reduces the size of the page and allows you to view all of the giveaways in the page at a single glance."), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Also adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("i", {
        className: "fa fa-th-large"
      }), ") to the main page heading of the same page that allows you to set the size of the space between each box.")),
      features: {
        gv_gb: {
          name: 'Extend to Giveaway Bookmarks.',
          sg: true
        },
        gv_ged: {
          name: 'Extend to Giveaway Encrypter / Decrypter.',
          sg: true
        },
        gv_ge: {
          name: 'Extend to Giveaway Extractor.',
          sg: true
        },
        gv_gp: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Extends to Game Pages.")), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("strong", null, "example: "), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("a", {
            href: "https://www.steamgifts.com/game/Q6JGq/garrys-mod"
          }, "https://www.steamgifts.com/game/Q6JGq/garrys-mod"))),
          name: 'Extend to Game Pages.',
          sg: true
        },
        gv_pro: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Extends to \"Gifts Won\" and \"Gifts Sent\" in a user's profile page.")), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("strong", null, "example: "), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("a", {
            href: "https://www.steamgifts.com/user/cg"
          }, "https://www.steamgifts.com/user/cg"))),
          name: 'Extend to Profile.',
          sg: true
        },
        gv_grp: {
          name: 'Extend to Groups.',
          sg: true
        }
      },
      id: 'gv',
      name: 'Grid View',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (this.esgst.giveawaysPath || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_gb') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_ged') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_ge') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_gp') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_pro') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_grp')) {
      this.esgst.giveawayFeatures.push(this.gv_setContainer.bind(this));
      this.esgst.style.insertAdjacentText('beforeend', `
				.esgst-gv-creator {
					margin: ${_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('ib') ? 10 : 5}px 5px 5px;
				}

				.esgst-gv-popout .giveaway__links {
					display: block;
					height: auto;
					margin: 5px 5px ${_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('ib') ? 10 : 5}px;
					text-align: center;
				}
			`);
      if (this.esgst.groupPath && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_grp') || this.esgst.gamePath && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_gp') || this.esgst.giveawaysPath || this.esgst.userPath && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_pro')) {
        let button, display, element, elements, i, n, popout, spacing, slider;
        button = createHeadingButton({
          id: 'gv',
          icons: ['fa-th-large'],
          title: 'Set Grid View spacing'
        });
        popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_4__["Popout"]('esgst-gv-spacing', button, 0, true);
        spacing = _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_spacing');
        element = createElements(popout.popout, 'beforeend', [{
          type: 'div',
          children: [{
            type: 'div'
          }, {
            text: `${spacing}px`,
            type: 'div'
          }]
        }]);
        slider = element.firstElementChild;
        display = slider.nextElementSibling;
        window.$(slider).slider({
          slide: (event, ui) => {
            spacing = ui.value;
            elements = document.getElementsByClassName('esgst-gv-container');
            for (i = 0, n = elements.length; i < n; ++i) {
              elements[i].style.margin = `${spacing}px`;
            }
            popout.reposition();
            display.textContent = `${spacing}px`;
            setSetting('gv_spacing', spacing);
          },
          max: 10,
          value: spacing
        });
      }
    }
  }
  gv_setContainer(giveaways, main, source) {
    if ((!main || !(this.esgst.groupPath && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_grp') || this.esgst.gamePath && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_gp') || this.esgst.giveawaysPath || this.esgst.userPath && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_pro'))) && (main || (source !== 'gb' || !_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_gb')) && (source !== 'ged' || !_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_ged')) && (source !== 'ge' || !_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_ge')))) return;
    let username, avatar;
    if (this.esgst.userPath && !this.esgst.userWonPath) {
      avatar = document.getElementsByClassName('global__image-inner-wrap')[0].style.backgroundImage.match(/\("(.+)"\)/)[1];
      username = document.getElementsByClassName('featured__heading__medium')[0].textContent;
    }
    giveaways.forEach(giveaway => {
      giveaway.grid = true;
      let popup = giveaway.outerWrap.closest('.esgst-popup-scrollable') || _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.isCurrentPath('Account') && this.esgst.parameters.esgst;
      if (popup) {
        giveaway.outerWrap.parentElement.parentElement.classList.add('esgst-gv-view');
        giveaway.outerWrap.parentElement.style.display = 'inline-block';
        giveaway.outerWrap.classList.add('esgst-gv-container');
        giveaway.outerWrap.style.margin = `${_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_spacing')}px`;
      } else {
        giveaway.outerWrap.parentElement.classList.add('esgst-gv-view');
        giveaway.outerWrap.classList.add('esgst-gv-container');
        giveaway.outerWrap.style.margin = `${_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gv_spacing')}px`;
      }
      giveaway.innerWrap.classList.add('esgst-gv-box');
      const now = Date.now();
      giveaway.gvIcons = createElements(giveaway.innerWrap, 'afterbegin', [{
        attributes: {
          class: 'esgst-gv-icons giveaway__columns'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'esgst-gv-time',
            ['data-draggable-id']: 'time',
            draggable: true
          },
          type: 'div',
          children: [{
            attributes: {
              title: `${giveaway.started ? 'Ends' : 'Starts'} ${giveaway.endTimeColumn.lastElementChild.textContent}`
            },
            // @ts-ignore
            text: Object(date_fns_formatDistanceStrict__WEBPACK_IMPORTED_MODULE_2__["default"])(giveaway.endTime, now, {
              locale: this.esgst.formatDistanceLocale
            }),
            type: 'span'
          }, {
            attributes: {
              class: 'fa fa-clock-o'
            },
            type: 'i'
          }, {
            attributes: {
              title: `Created ${giveaway.startTimeColumn.firstElementChild.textContent}`
            },
            // @ts-ignore
            text: Object(date_fns_formatDistanceStrict__WEBPACK_IMPORTED_MODULE_2__["default"])(giveaway.startTime, now, {
              locale: this.esgst.formatDistanceLocale
            }),
            type: 'span'
          }]
        }]
      }]);
      giveaway.endTimeColumn_gv = giveaway.gvIcons.firstElementChild.firstElementChild;
      if (giveaway.inviteOnly) {
        giveaway.gvIcons.appendChild(giveaway.inviteOnly);
      }
      if (giveaway.regionRestricted) {
        giveaway.gvIcons.appendChild(giveaway.regionRestricted);
      }
      if (giveaway.group) {
        giveaway.gvIcons.appendChild(giveaway.group);
      }
      if (giveaway.whitelist) {
        giveaway.gvIcons.appendChild(giveaway.whitelist);
      }
      if (giveaway.levelColumn) {
        giveaway.levelColumn.textContent = giveaway.levelColumn.textContent.replace(/Level\s/, '');
        giveaway.gvIcons.appendChild(giveaway.levelColumn);
      }
      giveaway.innerWrap.insertBefore(giveaway.image, giveaway.gvIcons);
      giveaway.summary.classList.add('esgst-gv-popout', 'global__image-outer-wrap');
      let temp;
      _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].insert(giveaway.links, 'beforebegin', _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("div", {
        style: {
          alignItems: 'center',
          display: 'flex',
          justifyContent: 'space-between'
        },
        ref: ref => temp = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("div", {
        style: {
          display: 'flex',
          flex: '1',
          flexDirection: 'column'
        }
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("div", {
        className: "esgst-gv-creator"
      }, "by "))));
      if (this.esgst.userPath && !this.esgst.userWonPath && source !== 'gb') {
        giveaway.creatorContainer = _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("a", {
          className: "giveaway__username",
          href: `/user/${username}`
        }, " ", username);
        giveaway.avatar = _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("a", {
          href: `/user/${username}`,
          className: "giveaway_image_avatar",
          style: `background-image:url(${avatar});`
        });
      }
      temp.firstElementChild.firstElementChild.appendChild(giveaway.creatorContainer);
      temp.firstElementChild.appendChild(giveaway.links);
      temp.appendChild(giveaway.avatar);
      temp.after(giveaway.endTimeColumn.nextElementSibling);
      giveaway.endTimeColumn.classList.add('esgst-hidden');
      giveaway.startTimeColumn.classList.add('esgst-hidden');
      giveaway.entriesLink.lastElementChild.textContent = giveaway.entriesLink.textContent.replace(/[^\d,]+/g, '');
      giveaway.commentsLink.lastElementChild.textContent = giveaway.commentsLink.textContent.replace(/[^\d,]+/g, '');
      new _class_Popout__WEBPACK_IMPORTED_MODULE_4__["Popout"]('', giveaway.outerWrap, 100, false, giveaway.summary);
    });
  }
}
const giveawaysGridView = new GiveawaysGridView();


/***/ }),
/* 329 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalHiddenBlacklistStats", function() { return generalHiddenBlacklistStats; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




class GeneralHiddenBlacklistStats extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Hides the blacklist stats of your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: "https://www.steamgifts.com/stats/personal/community"
      }, "stats"), " page.")),
      id: 'hbs',
      name: 'Hidden Blacklist Stats',
      sg: true,
      type: 'general'
    };
  }
  init() {
    if (!window.location.pathname.match(/^\/stats\/personal\/community/)) return;
    let chart = document.getElementsByClassName('chart')[4];

    // remove any "blacklist" text from the chart
    let heading = chart.firstElementChild;
    heading.lastElementChild.remove();
    heading.lastElementChild.remove();
    let subHeading = heading.nextElementSibling;
    subHeading.textContent = subHeading.textContent.replace(/and\sblacklists\s/, '');

    // create a new graph without the blacklist points
    let script = document.createElement('script');
    script.textContent = chart.previousElementSibling.textContent.replace(/,{name:\s"Blacklists".+?}/, '');
    document.body.appendChild(script);
    script.remove();
  }
}
const generalHiddenBlacklistStats = new GeneralHiddenBlacklistStats();


/***/ }),
/* 330 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysHiddenGamesEnterButtonDisabler", function() { return giveawaysHiddenGamesEnterButtonDisabler; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(144);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




const createElements = _Common__WEBPACK_IMPORTED_MODULE_2__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_2__["common"]);
class GiveawaysHiddenGamesEnterButtonDisabler extends _class_Module__WEBPACK_IMPORTED_MODULE_1__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Disables the enter button of any giveaway if you have hidden the game on SteamGifts so that you do not accidentally enter it.")),
      id: 'hgebd',
      name: "Hidden Game's Enter Button Disabler",
      sg: true,
      sync: 'Hidden Games',
      syncKeys: ['HiddenGames'],
      type: 'giveaways'
    };
  }
  init() {
    if (!this.esgst.giveawayPath || document.getElementsByClassName('table--summary')[0]) {
      return;
    }
    const hideButton = document.getElementsByClassName('featured__giveaway__hide')[0];
    if ((this.esgst.enterGiveawayButton || this.esgst.giveawayErrorButton && !this.esgst.giveawayErrorButton.textContent.match(/Exists\sin\sAccount/)) && !hideButton) {
      const parent = (this.esgst.enterGiveawayButton || this.esgst.giveawayErrorButton).parentElement;
      if (this.esgst.enterGiveawayButton) {
        this.esgst.enterGiveawayButton.remove();
      }
      if (this.esgst.giveawayErrorButton) {
        this.esgst.giveawayErrorButton.remove();
      }
      createElements(parent, 'afterbegin', [{
        attributes: {
          class: 'sidebar__error is-disabled'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'fa fa-exclamation-circle'
          },
          type: 'i'
        }, {
          text: ' Hidden Game',
          type: 'node'
        }]
      }]);
    }
  }
}
const giveawaysHiddenGamesEnterButtonDisabler = new GiveawaysHiddenGamesEnterButtonDisabler();


/***/ }),
/* 331 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysHiddenGamesManager", function() { return giveawaysHiddenGamesManager; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(146);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(211);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(132);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(212);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(218);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(144);
















const createElements = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]);
class GiveawaysHiddenGamesManager extends _class_Module__WEBPACK_IMPORTED_MODULE_7__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-eye-slash"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-plus-circle"
      }), ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-times-circle"
      }), ") to your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/settings/giveaways/filters"
      }, "giveaway filters"), ' ', "page that allows you to add / remove games to / from your hidden list."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "You can add all your owned / ignored games with a single click."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "You can remove all your owned / wishlisted games with a single click.")),
      id: 'hgm',
      name: 'Hidden Games Manager',
      sg: true,
      type: 'giveaways',
      features: {
        hgm_s: {
          name: `Automatically add / remove games from the list when syncing, based on the settings you have defined.`,
          sg: true
        }
      }
    };
  }
  init() {
    if (!window.location.pathname.match(/^\/account\/settings\/giveaways\/filters/)) return;
    let button = createHeadingButton({
      id: 'hgm',
      icons: ['fa-eye-slash', 'fa-plus-circle', 'fa-times-circle'],
      title: 'Add / remove games to / from the list'
    });
    button.addEventListener('click', this.openPopup.bind(this, {
      button
    }));
  }
  openPopup(obj) {
    if (obj.popup) {
      obj.popup.open();
      return;
    }
    obj.popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_8__["Popup"]({
      addScrollable: true,
      icon: 'fa-plus fa-times',
      title: `Add / remove hidden games:`
    });
    obj.result = createElements(obj.popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'markdown'
      },
      type: 'div'
    }]);
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(obj.popup.description, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("textarea", {
      className: "esgst-textarea-small",
      placeholder: "https://store.steampowered.com/app/400\\nhttps://store.steampowered.com/sub/1280",
      ref: ref => obj.textArea = ref
    }));
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](obj.popup.scrollable, 'hgm_addOwned', false, 'Add all owned games.', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_addOwned'));
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](obj.popup.scrollable, 'hgm_addIgnored', false, 'Add all ignored games.', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_addIgnored'));
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](obj.popup.scrollable, 'hgm_addBanned', false, `Add all banned games (requires syncing delisted games in the settings menu).`, false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_addBanned'));
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](obj.popup.scrollable, 'hgm_removeTextArea', false, 'Only remove games from text area.', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeTextArea'));
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](obj.popup.scrollable, 'hgm_removeOwned', false, 'Only remove owned games.', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeOwned'));
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](obj.popup.scrollable, 'hgm_removeWishlisted', false, 'Only remove wishlisted games.', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeWishlisted'));
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](obj.popup.scrollable, 'hgm_removeFollowed', false, 'Only remove followed games.', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeFollowed'));
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](obj.popup.scrollable, 'hgm_removeTagged', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Only remove games tagged with:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
      className: "esgst-switch-input esgst-switch-input-large",
      placeholder: "tag1, tag2, tag3, ...",
      type: "text",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_tags').join(', '),
      onchange: event => {
        _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].set('hgm_tags', Array.from(new Set(event.target.value.toLowerCase().split(/,\s*/))));
        _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].common.setSetting('hgm_tags', _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_tags'));
      }
    })), false, false, 'Enter the tags for the games that you want to remove, separated by a comma.', _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeTagged'));
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_12__["ToggleSwitch"](obj.popup.scrollable, 'hgm_removeBanned', false, `Only remove banned games (requires syncing delisted games in the settings menu).`, false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeBanned'));
    _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
      color: 'green',
      icons: ['fa-arrow-circle-right'],
      name: 'Add',
      onClick: this.startAdding.bind(this, obj)
    }, {
      template: 'error',
      name: 'Cancel',
      switchTo: {
        onReturn: 0
      },
      onClick: this.stop.bind(this, obj)
    }]).insert(obj.popup.description, 'beforeend');
    _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
      color: 'green',
      icons: ['fa-arrow-circle-right'],
      name: 'Remove',
      onClick: this.startRemoving.bind(this, obj, false)
    }, {
      template: 'error',
      name: 'Cancel',
      switchTo: {
        onReturn: 0
      },
      onClick: this.stop.bind(this, obj)
    }]).insert(obj.popup.description, 'beforeend');
    _components_Button__WEBPACK_IMPORTED_MODULE_13__["Button"].create([{
      color: 'green',
      icons: ['fa-arrow-circle-down'],
      name: 'Export',
      onClick: this.startExporting.bind(this, obj)
    }, {
      template: 'error',
      name: 'Cancel',
      switchTo: {
        onReturn: 0
      },
      onClick: this.stop.bind(this, obj)
    }]).insert(obj.popup.description, 'beforeend');
    obj.progressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_14__["NotificationBar"].create().insert(obj.popup.description, 'beforeend').hide();
    obj.popup.open();
  }
  async startAdding(obj) {
    if (obj.running) {
      return;
    }
    obj.running = true;
    obj.canceled = false;
    obj.button.classList.add('esgst-busy');
    obj.progressBar.setLoading('Adding games...').show();
    obj.result.innerHTML = '';
    const appIds = [];
    const subIds = [];
    obj.textArea.value.split(/\n/).map(x => {
      const match = x.match(/(app|sub)\/(\d+)/);
      if (match) {
        const id = match[2];
        const type = `${match[1]}s`;
        const savedGame = this.esgst.games[type][id];
        if (!savedGame || !savedGame.hidden) {
          (type === 'apps' ? appIds : subIds).push(id);
        }
      }
    });
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_addOwned')) {
      appIds.push(...Object.keys(this.esgst.games.apps).filter(x => this.esgst.games.apps[x].owned && !this.esgst.games.apps[x].hidden));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_addIgnored')) {
      appIds.push(...Object.keys(this.esgst.games.apps).filter(x => this.esgst.games.apps[x].ignored && !this.esgst.games.apps[x].hidden));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_addBanned')) {
      appIds.push(..._class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.delistedGames.banned);
    }
    obj.hideObj = {
      appIds,
      subIds,
      update: message => obj.progressBar.setMessage(message)
    };
    const result = await _Common__WEBPACK_IMPORTED_MODULE_15__["common"].hideGames(obj.hideObj);
    let message = '';
    if (result.apps.length) {
      message += `The following apps were not found and therefore not hidden (they are most likely internal apps, such as demos, game editors etc): ${result.apps.join(`, `)}\n`;
    }
    if (result.subs.length) {
      message += `The following subs were not found and therefore not hidden: ${result.subs.join(`, `)}\n`;
    }
    if (message) {
      window.alert(message);
    }
    obj.button.classList.remove('esgst-busy');
    obj.progressBar.reset().hide();
    obj.running = false;
  }
  startExporting(obj) {
    return this.startRemoving(obj, true);
  }
  async startRemoving(obj, exportOnly) {
    if (obj.running) {
      return;
    }
    obj.running = true;
    obj.canceled = false;
    obj.lastPage = '';
    obj.button.classList.add('esgst-busy');
    obj.progressBar.setLoading(`${exportOnly ? 'Exporting' : 'Removing'} games...`).show();
    if (!exportOnly) {
      createElements(obj.result, 'atinner', [{
        attributes: {
          class: 'esgst-bold'
        },
        text: `Removed Games:`,
        type: 'span'
      }]);
    }
    const appIds = [];
    const subIds = [];
    if (!exportOnly) {
      obj.textArea.value.split(/\n/).map(x => {
        const match = x.match(/(app|sub)\/(\d+)/);
        if (match) {
          (match[1] === 'app' ? appIds : subIds).push(match[2]);
        }
      });
    }
    const newGames = {
      apps: {},
      subs: {}
    };
    let url = `/account/settings/giveaways/filters/search?page=`;
    let nextPage = 1;
    let pagination = null;
    do {
      let context = null;
      if (nextPage === this.esgst.currentPage) {
        context = document;
      } else if (document.getElementsByClassName(`esgst-es-page-${nextPage}`)[0]) {
        nextPage += 1;
        continue;
      } else {
        context = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`${url}${nextPage}`)).html;
      }
      if (!obj.lastPage) {
        obj.lastPage = this.esgst.modules.generalLastPageLink.lpl_getLastPage(context, context === document);
        obj.lastPage = obj.lastPage === 999999999 ? '' : ` of ${obj.lastPage}`;
      }
      obj.progressBar.setMessage(`${exportOnly ? 'Exporting' : 'Removing'} games (page ${nextPage}${obj.lastPage})...`);
      let elements = context.getElementsByClassName('table__row-outer-wrap');
      for (let i = 0, n = elements.length; i < n; i++) {
        let element = elements[i];
        let info = await this.esgst.modules.games.games_getInfo(element);
        if (!info) continue;
        if (exportOnly) {
          (info.type === 'apps' ? appIds : subIds).push(info.id);
          continue;
        }
        let game = this.esgst.games[info.type][info.id];
        if ((!_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeOwned') || !game || !game.owned) && (!_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeWishlisted') || !game || !game.wishlisted) && (!_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeFollowed') || !game || !game.followed) && (!_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeTagged') || !game || !game.tags || !game.tags.filter(tag => _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_tags').includes(tag.toLowerCase())).length) && (!_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeBanned') || _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.delistedGames.banned.indexOf(parseInt(info.id) < 0)) && (!_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeTextArea') || (info.type === 'apps' ? appIds : subIds).indexOf(info.id) < 0) && (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeOwned') || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeWishlisted') || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeFollowed') || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeTagged') || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeBanned') || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('hgm_removeTextArea'))) {
          continue;
        }
        newGames[info.type][info.id] = {
          hidden: null
        };
        let button = element.getElementsByClassName('table__remove-default')[0];
        if (context === document) {
          button.dispatchEvent(new Event('click'));
        } else {
          await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].post('/ajax.php', {
            data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_9__["Session"].xsrfToken}&do=remove_filter&game_id=${button.parentElement.querySelector(`[name="game_id"]`).value}`
          });
        }
        createElements(obj.result, 'beforeend', [{
          attributes: {
            href: `http://store.steampowered.com/${info.type.slice(0, -1)}/${info.id}`
          },
          text: element.getElementsByClassName('table__column__heading')[0].textContent,
          type: 'a'
        }]);
      }
      nextPage += 1;
      pagination = context.getElementsByClassName('pagination__navigation')[0];
    } while (!obj.canceled && pagination && !pagination.lastElementChild.classList.contains('is-selected'));
    if (exportOnly) {
      const file = [].concat(...appIds.map(id => `https://store.steampowered.com/app/${id}`), ...subIds.map(id => `https://store.steampowered.com/sub/${id}`)).join('\n');
      _Common__WEBPACK_IMPORTED_MODULE_15__["common"].downloadFile(file, 'steamgifts-hidden-games.txt');
    } else {
      await _Common__WEBPACK_IMPORTED_MODULE_15__["common"].lockAndSaveGames(newGames);
      if (obj.result.children.length === 1) {
        createElements(obj.result, 'atinner', [{
          attributes: {
            class: 'esgst-bold'
          },
          text: '0 games removed.',
          type: 'span'
        }]);
      }
    }
    obj.button.classList.remove('esgst-busy');
    obj.progressBar.reset().hide();
    obj.running = false;
  }
  stop(obj) {
    obj.canceled = true;
    if (obj.hideObj) {
      obj.hideObj.canceled = true;
    }
    obj.button.classList.remove('esgst-busy');
    obj.progressBar.reset().hide();
  }
}
const giveawaysHiddenGamesManager = new GiveawaysHiddenGamesManager();


/***/ }),
/* 332 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalHeaderRefresher", function() { return generalHeaderRefresher; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(235);
/* harmony import */ var core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(144);
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(90);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(210);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(207);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(216);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(208);
/* harmony import */ var _constants_Namespaces__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(214);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(213);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(132);
/* harmony import */ var _components_Header__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(249);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(96);
/* harmony import */ var _class_Tabs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(231);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(206);




















class GeneralHeaderRefresher extends _class_Module__WEBPACK_IMPORTED_MODULE_5__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_19__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_19__["DOM"].element("li", null, "Refreshes the header icons (created/won/inbox for SteamGIFTS and inbox for SteamTrades) and the points on SteamGifts (in any page) every specified number of minutes."), _class_DOM__WEBPACK_IMPORTED_MODULE_19__["DOM"].element("li", null, "There are also options to notify you when there are new wishlist giveaways open, when the key for a game you won is delivered, when you reach 400P and when you receive a new message."), _class_DOM__WEBPACK_IMPORTED_MODULE_19__["DOM"].element("li", null, "You can upload a custom sound for the browser notifications."), _class_DOM__WEBPACK_IMPORTED_MODULE_19__["DOM"].element("li", null, "If you enable the options to show browser notifications, you will be asked to give the permission to ESGST by your browser.")),
      features: {
        hr_w: {
          features: {
            hr_w_n: {
              features: {
                hr_w_n_s: {
                  name: 'Play a sound with this notification.',
                  inputItems: true,
                  sg: true
                }
              },
              name: 'Also show as a browser notification.',
              sg: true
            },
            hr_w_h: {
              name: 'Only indicate for giveaways ending in a specified number of hours.',
              inputItems: [{
                id: 'hr_w_hours',
                prefix: `Hours: `
              }],
              sg: true
            }
          },
          inputItems: [{
            id: 'hr_w_format',
            prefix: `Format: `,
            tooltip: `Use # to represent a number. For example, '(#❤)' would show '(8❤)' if there are 8 unentered wishlist giveaways open.`
          }],
          name: "Indicate if there are unentered wishlist giveaways open in the tab's title.",
          sg: true
        },
        hr_g: {
          features: {
            hr_g_n: {
              features: {
                hr_g_n_s: {
                  name: 'Play a sound with this notification.',
                  inputItems: true,
                  sg: true
                }
              },
              name: 'Also show as a browser notification.',
              sg: true
            }
          },
          inputItems: [{
            id: 'hr_g_format',
            prefix: `Format: `
          }],
          name: "Indicate if there are unviewed keys for won gifts in the tab's title.",
          sg: true
        },
        hr_b: {
          name: 'Keep refreshing in the background when you go to another tab or minimize the browser.',
          sg: true,
          st: true
        },
        hr_c: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_19__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_19__["DOM"].element("li", null, "With this option disabled, notifications will automatically close after a few seconds.")),
          name: 'Only close notifications manually.',
          sg: true,
          st: true
        },
        hr_fp: {
          features: {
            hr_fp_p: {
              name: 'Minimum number of points required to show a browser notification.',
              inputItems: [{
                id: 'hr_fp_points',
                prefix: 'Notify when points reach ',
                attributes: {
                  type: 'number',
                  min: '1',
                  max: '400',
                  step: '1'
                }
              }],
              sg: true
            },
            hr_fp_s: {
              name: 'Play a sound with this notification.',
              inputItems: true,
              sg: true
            }
          },
          name: 'Show a browser notification when points reach a specified threshold.',
          sg: true
        },
        hr_p: {
          inputItems: [{
            id: 'hr_p_format',
            prefix: `Format: `,
            tooltip: `Use # to represent a number. For example, '(#P)' would show '(100P)' if you have 100 points.`
          }],
          name: "Show the number of points in the tab's title.",
          sg: true
        },
        hr_m: {
          features: {
            hr_m_n: {
              features: {
                hr_m_n_s: {
                  name: 'Play a sound with this notification.',
                  inputItems: true,
                  sg: true,
                  st: true
                }
              },
              name: 'Also show as a browser notification.',
              sg: true,
              st: true
            }
          },
          name: "Show the number of unread messages in the tab's icon.",
          sg: true,
          st: true
        },
        hr_a: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_19__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_19__["DOM"].element("li", null, "With this option disabled, clicking on a notification will always open a new tab.")),
          features: {
            hr_a_r: {
              name: 'Refresh the page after setting it as active.',
              sg: true,
              st: true
            },
            hr_a_a: {
              name: `If the page is not open, set any SteamGifts/SteamTrades tab as active.`,
              sg: true,
              st: true
            }
          },
          extensionOnly: true,
          name: `When clicking on a browser notification, check if the related page is open and set it as active.`,
          sg: true,
          st: true
        }
      },
      inputItems: [{
        id: 'hr_minutes',
        prefix: 'Refresh every ',
        suffix: ' minutes'
      }],
      id: 'hr',
      name: 'Header Refresher',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_10__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_11__["Events"].WON_UPDATED, this.notifyWon.bind(this, false));
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_10__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_11__["Events"].MESSAGES_UPDATED, this.notifyMessages.bind(this, false));
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_10__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_11__["Events"].POINTS_UPDATED, this.notifyPoints.bind(this, false));
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_10__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_11__["Events"].WISHLIST_UPDATED, this.notifyWishlist.bind(this, false));
    this.notifyWon(true, _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.won, _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.won);
    this.notifyMessages(true, _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.messages, _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.messages);
    this.notifyPoints(true, _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.points, _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.points);
    this.startRefresher();
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_b')) {
      window.addEventListener('focus', this.startRefresher.bind(this));
      window.addEventListener('blur', () => window.clearTimeout(this.refresher));
    }
  }
  async startRefresher() {
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_12__["FetchRequest"].get(_class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.sg ? '/giveaways/search?type=wishlist' : '/');
    await this.refreshHeader(response.html);
    this.refresher = window.setTimeout(() => this.continueRefresher(), _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_minutes') * 60000);
  }
  async continueRefresher() {
    const cache = JSON.parse(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__["LocalStorage"].get('hrCache'));
    const now = Date.now();
    if (cache.username !== _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('username') || now - cache.timestamp > _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_minutes') * 60000) {
      cache.timestamp = now;
      _class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__["LocalStorage"].set('hrCache', JSON.stringify(cache));
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_12__["FetchRequest"].get(_class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.sg ? '/giveaways/search?type=wishlist' : '/');
      await this.refreshHeader(response.html);
      this.refresher = window.setTimeout(() => this.continueRefresher(), _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_minutes') * 60000);
    } else {
      await this.refreshHeader(null, cache);
      this.wishlist = cache.wishlist;
      this.newWishlist = cache.newWishlist;
      this.refresher = window.setTimeout(() => this.continueRefresher(), _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_minutes') * 60000);
    }
  }

  /**
   * @param {Document} context
   * @param {IHeaderRefresherCache} cache
   */
  async refreshHeader(context, cache) {
    if (context) {
      /** @type {import('../../components/Header').IHeader} */
      const header = new _components_Header__WEBPACK_IMPORTED_MODULE_16__["Header"]();
      header.parse(context);
      switch (_class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].namespace) {
        case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_13__["Namespaces"].SG:
          {
            const createdContainer = header.buttonContainers['giveawaysCreated'];
            if (createdContainer) {
              await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updateCounter('giveawaysCreated', createdContainer.data.counter);
            }
            const wonContainer = header.buttonContainers['giveawaysWon'];
            if (wonContainer) {
              await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updateCounter('giveawaysWon', wonContainer.data.counter, wonContainer.data.isFlashing);
            }
            const messagesContainer = header.buttonContainers['messages'];
            if (messagesContainer) {
              await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updateCounter('messages', messagesContainer.data.counter);
            }
            const accountContainer = header.buttonContainers['account'];
            if (accountContainer) {
              await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updatePoints(accountContainer.data.points);
              await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updateLevel(accountContainer.data.level);
            }
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_w')) {
              this.wishlist = 0;
              this.newWishlist = 0;
              const cache = JSON.parse(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__["LocalStorage"].get('hrWishlistCache', '[]'));
              const codes = [];
              const now = Date.now();
              const giveaways = await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.modules.giveaways.giveaways_get(context, false, null, true);
              for (const giveaway of giveaways) {
                codes.push(giveaway.code);
                if (giveaway && giveaway.level <= _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.level.base && !giveaway.pinned && !giveaway.entered && (!_class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.giveaways[giveaway.code] || !_class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.giveaways[giveaway.code].visited && !_class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.giveaways[giveaway.code].hidden) && (!_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_w_h') || giveaway.endTime - now < _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_w_hours') * 3600000)) {
                  this.wishlist += 1;
                  if (cache.indexOf(giveaway.code) < 0) {
                    this.newWishlist += 1;
                    cache.push(giveaway.code);
                  }
                }
              }
              for (let i = cache.length - 1; i > -1; i--) {
                if (codes.indexOf(cache[i]) < 0) {
                  cache.splice(i, 1);
                }
              }
              _class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__["LocalStorage"].set('hrWishlistCache', JSON.stringify(cache));
              await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_10__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_11__["Events"].WISHLIST_UPDATED, 0, this.newWishlist, this.wishlist);
            }
            break;
          }
        case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_13__["Namespaces"].ST:
          {
            const messagesContainer = header.buttonContainers['messages'];
            if (messagesContainer) {
              await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updateCounter('messages', messagesContainer.data.counter);
            }
            break;
          }
        default:
          {
            throw 'Invalid namespace.';
          }
      }
    } else if (cache) {
      switch (_class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].namespace) {
        case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_13__["Namespaces"].SG:
          {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updateCounter('giveawaysCreated', cache.created);
            await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updateCounter('giveawaysWon', cache.won, cache.wonDelivered);
            await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updateCounter('messages', cache.messages);
            await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updatePoints(cache.points);
            await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updateLevel(cache.level);
            await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_10__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_11__["Events"].WISHLIST_UPDATED, this.newWishlist, cache.newWishlist, cache.wishlist);
            break;
          }
        case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_13__["Namespaces"].ST:
          {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].header.updateCounter('messages', cache.messages);
            break;
          }
        default:
          {
            throw 'Invalid namespace.';
          }
      }
    }
    await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_10__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_11__["Events"].HEADER_REFRESHED);
  }
  notifyWon(firstRun, oldWon, newWon, delivered) {
    if (delivered && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_g')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_g_n') && !firstRun) {
        this.showNotification({
          msg: 'You have new gifts delivered.',
          won: true
        });
      }
      this.deliveredTitle = _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_g_format');
    } else {
      this.deliveredTitle = null;
    }
    this.notifyTitleChange();
  }
  notifyMessages(firstRun, oldMessages, newMessages) {
    const difference = newMessages - oldMessages;
    if (newMessages > 0 && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_m')) {
      const canvas = document.createElement('canvas');
      const image = new Image();
      canvas.width = 16;
      canvas.height = 16;
      const context = canvas.getContext('2d');
      image.crossOrigin = 'esgst';
      image.onload = () => {
        context.drawImage(image, 0, 0);
        context.fillStyle = '#e9202a';
        context.fillRect(8, 6, 8, 10);
        context.fillStyle = '#fff';
        context.font = 'bold 10px Arial';
        context.textAlign = 'left';
        context.fillText(newMessages > 9 ? '+' : newMessages, 9, 14);
        _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.favicon.href = canvas.toDataURL('image/png');
      };
      image.src = _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst[`${_class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.name}Icon`];
      if (difference > 0 && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_m_n') && !firstRun) {
        this.showNotification({
          inbox: true,
          msg: `You have ${difference} new messages.`
        });
      }
    } else {
      _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.favicon.href = _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst[`${_class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.name}Icon`];
    }
    this.notifyTitleChange();
  }
  notifyPoints(firstRun, oldPoints, newPoints) {
    if (oldPoints < 400 && newPoints >= _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_fp_points') && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_fp') && !firstRun) {
      this.showNotification({
        msg: `You have ${newPoints}P.`,
        points: true
      });
    }
    this.pointsTitle = _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_p') ? `${_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_p_format').replace(/#/, newPoints)}` : null;
    this.notifyTitleChange();
  }
  notifyWishlist(firstRun, oldWishlist, newWishlist, wishlist) {
    if (newWishlist && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_w') && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_w_n') && !firstRun) {
      this.showNotification({
        msg: _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_w_h') ? `You have ${newWishlist} new wishlist giveaways ending in ${_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_w_hours')} hours.` : `You have ${newWishlist} new wishlist giveaways.`,
        wishlist: true
      });
    }
    this.wishlistTitle = wishlist && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_w') ? `${_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_w_format').replace(/#/, wishlist)}` : null;
    this.notifyTitleChange();
  }
  notifyTitleChange() {
    const titleParts = [];
    if (this.pointsTitle) {
      titleParts.push(this.pointsTitle);
    }
    if (this.deliveredTitle) {
      titleParts.push(this.deliveredTitle);
    }
    if (this.wishlistTitle) {
      titleParts.push(this.wishlistTitle);
    }
    titleParts.push(_class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.originalTitle);
    const title = titleParts.join(' ');
    if (document.title !== title) {
      document.title = title;
    }
    this.updateCache();
  }
  updateCache() {
    _class_LocalStorage__WEBPACK_IMPORTED_MODULE_17__["LocalStorage"].set('hrCache', JSON.stringify({
      created: _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.created,
      level: _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.level,
      messages: _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.messages,
      newWishlist: this.newWishlist,
      points: _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.points,
      timestamp: Date.now(),
      username: _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].user.username,
      wishlist: this.wishlist,
      won: _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.won,
      wonDelivered: _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.wonDelivered
    }));
  }
  async showNotification(details) {
    const result = await window.Notification.requestPermission();
    if (result !== 'granted') {
      return;
    }
    if (details.won && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_g_n_s') || details.inbox && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_m_n_s') || details.points && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_fp_s') || details.wishlist && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_w_n_s')) {
      try {
        if (!this.audioContext) {
          this.audioContext = new AudioContext();
          this.wonPlayer = await this.createPlayer(_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_g_n_s_sound') || this.getDefaultSound());
          this.messagesPlayer = await this.createPlayer(_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_m_n_s_sound') || this.getDefaultSound());
          this.pointsPlayer = await this.createPlayer(_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_fp_s_sound') || this.getDefaultSound());
          this.wishlistPlayer = await this.createPlayer(_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_w_n_s_sound') || this.getDefaultSound());
        }
        if (details.won && this.wonPlayer) {
          this.wonPlayer.play();
        }
        if (details.inbox && this.messagesPlayer) {
          this.messagesPlayer.play();
        }
        if (details.points && this.pointsPlayer) {
          this.pointsPlayer.play();
        }
        if (details.wishlist && this.wishlistPlayer) {
          this.wishlistPlayer.play();
        }
      } catch (error) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_9__["Logger"].warning(error.message);
      }
    }
    const notification = new Notification('ESGST Notification', {
      body: details.msg,
      icon: 'https://dl.dropboxusercontent.com/s/lr3t3bxrxfxylqe/esgstIcon.ico?raw=1',
      requireInteraction: !!_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_c'),
      tag: details.msg
    });
    notification.onclick = () => {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_a')) {
        _browser__WEBPACK_IMPORTED_MODULE_7__["browser"].runtime.sendMessage({
          action: 'tabs',
          any: !!_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_a_a'),
          inbox_sg: _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.sg && !!details.inbox,
          inbox_st: _class_Shared__WEBPACK_IMPORTED_MODULE_15__["Shared"].esgst.st && !!details.inbox,
          refresh: !!_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('hr_a_r'),
          wishlist: !!details.wishlist,
          won: !!details.won
        });
      } else {
        if (details.won) {
          _class_Tabs__WEBPACK_IMPORTED_MODULE_18__["Tabs"].open('https://www.steamgifts.com/giveaways/won');
        }
        if (details.inbox) {
          _class_Tabs__WEBPACK_IMPORTED_MODULE_18__["Tabs"].open('https://www.steamgifts.com/messages');
        }
        if (details.wishlist) {
          _class_Tabs__WEBPACK_IMPORTED_MODULE_18__["Tabs"].open('https://www.steamgifts.com/giveaways/search?type=wishlist');
        }
      }
      notification.close();
    };
  }
  async createPlayer(string) {
    const binary = window.atob(string);
    const buffer = new ArrayBuffer(binary.length);
    const bytes = new Uint8Array(buffer);
    for (let i = buffer.byteLength - 1; i > -1; i--) {
      bytes[i] = binary.charCodeAt(i) & 0xff;
    }
    if (!this.audioContext) {
      try {
        this.audioContext = new AudioContext();
      } catch (error) {
        return null;
      }
    }
    return {
      play: this.playSound.bind(this, await this.audioContext.decodeAudioData(buffer))
    };
  }
  playSound(buffer) {
    const source = this.audioContext.createBufferSource();
    source.buffer = buffer;
    source.loop = false;
    source.connect(this.audioContext.destination);
    source.start(0);
  }
  getDefaultSound() {
    return '//uQxAAB1MYI8KMM3gqqwV+AYZpBBAAEOmeT08nttJ5Mnd3zCCGXpiDk7P2IMUQz9yZNO4w8Bhe/wnsRER/dnpuDrjIhyeuTu0IOwADMISf8AKTAAAQ96xhBNnTh073uDhadkydJxNt/EMQgxAsBrjXJpnk0+yZSD2eDgMnl3zCDpmBZMmmZlmINabZd7BO2MIEMJpuTJkwcL0hjk02jxlx2j3ZNdmIPrdoJp60fwh7KACGHp2g+mIOnTCjTMCA6NJRgGfmJu1kjWIp8LtgtBXijXwh0UIgq0RLWS7rTWdNTsQakRJOgS8LwiZpaF2QlEGLRS1G+TdiB5GzlGsilxSjieMHGVCzy0aKLbhymNZPGs+ie3ZF0gsQNhpoRp1LNI6bBAgNVpCjzTtMKIaHcxZbyzFwYxyxRiZWGkDAgYYrmAzIOQZKem+Taz5PPc4yoU4Xt3i0mJ12dpJWGwAh3IEaSlDDnWTzcUitNywAMPdaY/p31QkaFPzXMsFAKB8YWSXgSC2zL0UkUM6RFHqUPOAyTihaT3o58O1NwAniZFPCR//uSxB2D1Y4K/AMU0ALqwd9AYyW4z0cMVKTUSP1NjzxKyJqAvDnKt6kmkBqoEQkZdnkrPdKVFIMbunlQN4OfHLBrgwzbejae3RwNJmFxZyjEJhsV2GgYxYHaT3y6UWBaw2kcfDFzT7ASDkpctKaFSjGtkdjThZph7J9P4g5JyiaCSJtAFDVEDzBie7mA4YhHlHEVE4JJCz9QYpZpSiZyIOyrAnxKTkJIEnYogLQhyY9A5R5wgvKYim22OubNSVbPeepwkk1GKO2Seyea7dTWlYncadKqi5NUhRsEse8zTGyQMYlUBEZdSBnrFlZ4jWi2rBSBhEQF5RUPkHYlJJ8kGtIGmstIQFBQjvLyRuJlGMPZnKXVbqShxh8H457nyVZVe1uLMakQtC4nksyURMlcI2Uk11LbYVXUKrJISKjRhy76Ec2OCQBwRB8udiILEpmT7rlLKJAhRr9lW/K5sSmJUcrmzhmDWk2Za+u8FFGrlWCiOXHEBQtsy6JplDBaT3sWWKxXS3CSSmN5Oatsqws7PKdCtkjkzF+S59ZbU62WNv1JNf/7ksQwgBcCCvwUxIAMSDqi5z9AAA+jaWfBWJyOvYjqBIyioohVnBR3WtCitx5Di69uMNNJeKRAQSuSUKcxTbcYLoUZyX1dt0Wob3sL2lOZ/UL0ZOypCRnSmQJFXTtdJElGEIoJJdNlZSajpAAAIIMIAAAAADAxAe4wjQDeMl1LjjO7gC4yAV8NMSEEDzBGQOEwJwBkMOPBVzBLwV8wW4JIMgrBHQMAcmAMgAZgHYJ6YHCAZmACBNJg6oDKAEAC2AG7JAKWRJRgGYnMh4Ay8DJgAUKjVIgM4LjE7izxOYLEwLAgtJDaxek2RQolw1L6RIBywbCJzFxAVAmJTHWTILFU003dYbWKWGiN8ZIZEPuxQOrLDs16ZJjiIKSZBidJcurc6aqMU6dalVk0TpWIsTpbIcSx8zVRuZFUz3Zab6pNE6WzYOLEPLxqfLyJ846IhKDgaPX3/XSz5ki6Rq6SLpIuky1qtdrNTZ3tX3auqtv/n0jIMm3Ay8Yaf7Xe1ZEEDBsA1cxQpRtMhhLVDFXQnowXkEcMA1AkyICJMB6AYzBaRjT/+5LEEgMZZY0WPfoAEwkxYwX9UboxqAPbMX3BaRoGGMB3ADTA6gLMwjgSSMB+AZDAbQDoKgAwjUDEAw0AFghiaOXy8TRiLUNckimgbmqi4gXygkaFwplBzGMkyZuT5XPnSsEIIBheZMbJDHma2SY6nUzJE2LepE0Kh7WgXziS2TWgcLjGCz9VqBdKz2aarl5zE8y5gmtGm291LKoCEwuArKWjbT7srv2rq+mtXUvqdtXoFxBGru/9/Ir9NAQGCPguRhaxlSajUKfGEGAgJgX4CcBgNAwHkBNMDMA1DCpyUswnROmMUsB/TCRwJswDYAKMA3AMDBKRXU7ogJsBUCzdlrljxuTzvLNDR27kDwY/d2cpt/blfMs8+fu5FIdxuxujq4WZTJw41R52e1JPSFAn01oFAnFnSNEvGMJgnTBNNk3dJCtFNOyUsO27JmBNmnpIIu56Z6RqgvME2e70jEDApSCpVum9aVlrqZA8/XQr71KZb2//qUTrlZD9af1dKgBFAKkIlYOJjzEjH3QKKYrAERgxgCmAgAEYAQHJgthRGYUk//uSxBGCFpmNIO89scM3sWWp1474obXuMpmnA2mOSCUYIwEpgGgdmDacAPAVoc3Plya0nRg2r3Uj+PGTyeetV0RiR0yNb2Cu64jw4926Np1eXE24KSiWxldU8N/h/e0d/XLojpoJpqxsjNSlhVcITNd3SDEokVMzrW61GLoJqoqRekuaqQVXo6vWmAiB1am7bNU6Dr09Ppsmv2ZtfX/1zI3UroX//6iAAARESCglmJXkHrzRmGwcGB4Jy4AA8QDWbTggfcH2bPnIDgzMFwAMIAAMcFpZYCQWHgFBQALCphr+TEf1TeAncrWK0PS9/IowOHlLyeI1R6wrG9bT9nmr39O8gq9sZFyqy6HSOgb58IEWMvitVcl7TP2yJDVkrhDtEh7pnefjXzuBml/6Q51ZBcH8Cu9f/FFexODnG04T0v3NsbXJkZGNqexwlSwr7XxTL+EyG+tE7NgxSFm4qWfdN01fcCr/AuI7JTL+OaUxcK/B/8cUTQAAAHnNtbJLKR1gHfz9egiaZBNKYtRmmp5wZKUPgAw3ET4YchRE49DitrlPpv/7ksQWgBuRZ1ms4e3jEyyqqa3TkuG5+xUlLbv4z1VzjKkbjG0w14RlhaANSKD7XgIBOkyhTaWFLjtxcduD8IC3adRTeOonlnKZbZGD3LmuHUBOKVpeLtemmiSpJNJ8OMBPEEAQA/CGEHOoJAPch5BFCZC5PM5G1jTEE9SlQ9NtEJwT7c4PNQWlkeu2S/gKxtNNLxID+Hm0u/WHPamssDyGx2PUF0CVVz+tIH3umrx3kRniP4ysiP/AcoMAwGxVWRIEzn6gQAJCbciknVjE7t72W51VWmZcgFyYKGUN5FiIAZgBxzkqQMxC5PZa7GaGKvrP7na1rvMt/NP85V/kqkVEzqBoyz5FZw0eUJkbpqtmak8OySjflHUmURyXzkuoZbWpcKbv/rLLWdWSQsGAR5wKGBq0nlZVC3Jepgz4whrUQa9N2Iap6WempRLqWW403bNBYyfe40kUVGTrb/7JjtLqBNECLZBR0g0QiGk8tE1quoyNjE1JonikViZLRNHzEzMiUsWW7FyP+xUAMAB2OAYYYsOcZlIYNgWyxCsQAGYUg2b/+5LEDAIXGbk2zuaPgy03ZUHtyji6MoAqZMJhuKOPGhVJgSMIwwMPUePZ0ZARNEKILHAVT5M6tS6/HGms5fmJS5G2WzNPGu1q/M6vunXqX5xr0ani5tn7+rfMdWrdACjZrOrpb76JsiZGIFTgHheiARMm5dHp2au2gpE6w1EHsik6iitFAvHzEwDrhyBqWjZik7IsjUuY65HkRdGZkykbBQCJOeTbeqz/6Vf26r/tt//+RxJ/qMCcFwwTkFzJ4G2MDgEUiA3RoEYHIsBUaPII5lro3GMoxQZP4WRgZAKmBGAeYcAOZhlmbmuWa8YZIPJgggniQtJgyAFBwDbNIHnI01Sihq1UjSh1NOTtFLZJ/LVSWsMiM5HqaJS6JCEQk9ec7Z/PdamWUNIUH2dYzWOP61f73mt1t0kFqKBUvOdri0bSJA66rZzL/4plOkYrWYiRDJqqdaKSkTyF3cugtpsyk1I/oLa1h9oWRY4kRwCcINev2tXZa/v/7ft///ykMJPpADAAUmBSBEYVQzJrFBFGDkASGAPFQAcwHAODB5BFMwAx//uSxBCDF9m7LM9qr4K4p6XN7tD4swVjazBNVQMcYKYwFQFR4BgwtQqjDEH/NtYgYwugAQQ4OwCN4ZR+YjMXo1qtVps6zN5BG4hVzxsdtZdc/dmplHa1p44phl9zuee7MlUAs6Qd3ro6SKNTGxqXgEAMDZArDSB7MyUK69DutGy1G5El7m6WpmqQTEQD9ZWc2Y8hu6zqTKprHSb00FJIkyF6xvO+h2pUavV//////+mW36UQSC5DABAPMHQeg0Mg2TBOAOCAG1QhcDYlBsNSfANWjMN5UQJ35FiPMIgOMUiRMbpcP1q7MfBcMKAuByJAYj0RG/g6/Yp7+HbFVYtPO08aW13TKo5p5A4WCwboE666jM0zZSxHJ5Fk7WezsnppLSKINQAHfDixGqi6XklvV1X41yu2unZUyXTYZ4HBjyS2MW/SU/UYm60LnVF4NtIOgdcuKiQCvDDSVelOsKi+z9oBzA0CbMB1oowOS1zAHB6HQMQMAQYFoNhhEARmL28+ZLaIhg/utmkkHiYG4FgQAUYYIMhirnAHjyVaEFNGf8n7Fv/7ksQgg5ptuSIvao9TOSfjhe5R8HvgGEDpfMha9DsGvJ2YiFReWV14bFe5Zq361t4qfO5FpZZtvtavucMXdbpGYYKPsgeWdRMkEHoH6jJZoZkYDUKB9LQ1y5PiyUDI+pA8taSlrZxIS4pFCSheMkl1XMVDPhq48gbJkyzoMtnJlys1TyepugkbpBbodyRtSVWyk0qaCrVb2VdmZ2s/poPqU1etX6s6wjCcC3McVlI9JyiTE/ByMHIDMwMQEAIByDgRDWmcYMB6C0yJLxzElGHMEYH4wKQlTGqCOMUdo04q33DEPErNLpU9wSTeQcMVgEmBiz5NDcFXn7qUEuSfltNlZpZDaklW9AUN6pqZfd21GYLl1+3KJJPSfW6unUs0hxlmvNrObMkVTQnjAcsEAADe/QywQ8xLQnJNjA+ZKW1RguiOkZFLmRoZFtqSkcsiBU1JLdn0nWZJFNWgpKrSUWSHmRsbrA4xReImzA3bbxKp+yjCtytFAELjAsAIMQMj84VRFDC1AVHgUC4wNBVMFwHUziwLTFaHUMOAtszSwQwEDAj/+5LEFgIUYU8kT2qOQqonJJnuzDjyYcoNhh7EInFgHcAiBDMWAh4bZKW6WjEozpE2MZxY1Fkc6M6jaWjVjFIlSSNS+gizIJoKVWmV6T2roVZ9a3RZZoXwDFBfSOSqg6WrVovMCp5meU63ZbozAnadBJ2+dYy1n1OyvOjwZsbslet1HAmyWo9slKsxiQyKF5gHg3GBuoyd5x0YRiyDAYLVmAgVmDY2na2Lmi85GtGwHgozGGgShUJjI4kTGS9jrLgzEgcjCwJjLkEAwwx4BBUiRK5qOszk4kiH7pqY2SRRUpaSSalEMMUD7sgzrRRWfsXmrrU620ndKp3dSAJ1JBNM0K1B2ahrvkcar51l1ruylmRbQdSkzta01Ocu1TVsfWxk7DqUBn3ME6VCwqOpbGH7VhqNUoX+hRkMHMKYxLmSzjUKYMNIHMwOwIgEAyCABzBRCiMj1gwxI0FQI0oYi4bxgIAcmBGBAUCRGJCNELnlmJiBGYFYNqCMwJwLBAAKuaAYlQmCaJ2pAou5c8sfe1zB4TjVG4qXTQRp+4ej0xiEG9yk//uSxDWCE/E3Hi8uc0JzoSQZ7sk49z7fX73TrQ1EPAf4i55JZozpH31qbXJR1KW5ir6qaS0M4p7exiijU9f+R7Db/2P/4V9ivuDAASmCeAMYqAWx02BBiQ7gYEEYCAAIXBSMBcD0w/UgTH8GuNy+AOXhIDheCgOmTQxGHuKmm+6GDIzmE4KmWQEjxkFADNWgain5iUXaKtRPHenct6qasdtVahmgyZcKR4mKklJOqyJkRJN1+tq9DZtyYAysiCZ1JNaCZsgkyP1HD9Wgv021uYqd0ZiYNRA5rMaMOp9pbrq5rUB2s/0KABCSQFzCZ5jggzzAwCGLgYCACApgGGhnAYxhGShiCSIc2qol6kQtGFwYnIQTg4aAsAjLlyy67xTpJGl4LekkYf62cjChaLaU44p98rKv6v4ysYTrRCydbaq1IsK+MyZvW9nkrmwRX8sd5WP9e9Y8DV3wdTfPDjKyCzsFX8ee6K+7CA7AFeCwivBAdhAh2Pp8+TFVDCFcoJwwTInBwAggAALz99pdbVSeST0IQAXhxZAhLV6zl6Wvz0seh//7ksRdgBONATBOvHHU8y/r/czrX6/pL9/hiMLmJSGDiuYKERpnJmyomPI412OzKK5MPlUyOEAwdGLiSYJCxjoAiocaMBAapWLB8mAQsIUKwgKhUZhCOMHCQxUGTEhYMTjMzSqxwUGQAeBQCg4gTXyBlmcgoBSwwZzrjCJzLPM/013DOyPwg9JBFCZbBlmiSgWEUdMkcve3J93Qjcll8kgSCZVJoCydV4GvvTLk81zLTSPQBs8SeBgaHwhFAgIFKHARogs8wNEVQcabGCLQGMoMA0EoqDjozaOQDCw9sACHuqyqMSxaiOiFZbdTdW9TMHB0v4g/0awnY5KJxgD5KZmGOGoNIoqTfRlDTKSH30vTtSLtzZ3CnQizSHNf9nbD5E4EmqXpuL425XT36mTK5DRWlsfVAAAADzcsEvimphcWBLnMMgIgAKiCmIKKpkDLDJgNT49gYUXBrkMP2jka3BREE1pvzGHWL8izmIxMvyDGmngZ5lz0F6550jiQt6+ipi70WikFNs6Kxm5sxZywtpymIElAr9rNC4QYWAOc11hqyGL/+5LENwIfZWc9rmNvQoAsJgHcwfijriBQxOVS1IlDEwFRAwC0CKT8y/NLdhl9XFx/K1a+3rmW8ccdVu2ZVRwSpioK4s6/JABsGfqHpU/1qtKV2Z2pdDTvS7NMoeH6kPfyghp/oahqGb1bK1jVlMZh7sZdmGbMaUOgZBoz+xM2EQMEoKurRQ0/0tubqY7hlyX5777EI0n1TxmyQDoaKgq///SKAMYbrqc7kwBg3EgERpMDwBMKh9N5bJMPyYM0PvNxQ1MTqQMxwMAwWFQjzFYmEOLhkTqEMna9e1adqHt4wHOLY5XQUpcfyx1D0SuUsZlsod6jf0LC61f3jzmuMlES4aZGYzhBpnSOvnvdnWW/56qqmMkW27p+taKli0k49qM4N4xRRRZFimIBM1Tf//qOkNUbgTRRzR//92ELDsNf/+/2KiAAAwJCowUn80IQQwICkQgIyAYEswZHE+CYYx2Tk1mHcnxYwu2IzUFYwXBUwWA42oE8DB4XsQudOAkS67Cx71WJxT3UAD2zK2AzSx1CrDxzrN/WEDiS9zxgXlLQKxkL//uSxC+DE4FjLE6+kRKjK+UJ7dG4JAzgkkDE+OYBpQInw+bnDJ9tVnUgRFFv5t6tBJh29lrLA00X+NUT5NaP/f/5xIsALjhxI//+sSseX///6DgQAwIwIDCUGzNNAJgwZAERoC4AACCoL4JABNE0wgxMxcDEuYmMzcNQwbzDjKuBiGACwrgHl4YBBGSDRkNA1JHp+mqR3LdmxcnKOnLIvLIY7Jr8sfC1Ju195416V14pQZaq49+glzMh4qi3mAvwM0hDfycNC+Z/sb0zhSHG6LOzIqNSpatVqhTB4fW9Mc5u7LNA31L/+pvW+pJExDoxspf/9BYroe///6YwEAMAkA8wlB+jUsDlMGYAQMASJQATAiA+MIUIszFl3zCeDuMKeAoxrg7DNkJD5oDjDUDzBkNTdceAcIaIYcAqgDVae32mq2rufaqysMiEBKWGpRPWZbbZ9aQnKaoyqa6zjuZGqI+wxQi5iPgE0AXKPHCii11VueWtSyaQQSoVsgY6ttQkRN9aDojZoqrrJQg9//X6rd5jMxCr9/1/qKBb/////6SBDv/7ksRTgBSZYyZPdouCSywl2ded+AAQEB0cgAxwNMkBZrrVhEFhg2QRgZqwUIM0rfQDqIYssCbsBCBgiCwwmOwiJ0sI8TFljPly5v1w93CepPEVa3GrM+cXm5n7KtyuC29aluTxLfX9Iidvr8czJe+sXzi/wZZLMrLdUedRdbqPEksjIi1er4a22fbbbfffMCzt/09z4jExZoAsU0WWwZaPNkvf/ooAABxgwcC0xziA/jNMxJA4MBV8QaIRg0BZwL1ZgCcxorp56kUpjjf5tYM4wAwGGE0SDVHAVwXI92hsUjEftVLGcp14+Nu2WGrYs2a/PpCn3Jmjm45/3a2MWXlFqtXpVn1ndrWtj/8/6V3NTLZas08edB5eFw/ic1iquclVtqDU6Io+Og2dCR5ySzTtNqqbPH8+oXHbdduc2mtRBRX8EBmQwFQw7xhzetDEMKkBMaBgBwBaBABAoGncUIYVBDZgTvSmMEJuYTyZpgvBTkwG4ACcCwNICASWWRABEQAz0tjfavLGrOFKotHQ6Et0kCl5fSdumKyH18ZXUoOlcrf/+5LEfgMToU8obr1vyn8sJAnmNpiCaftykY/ZRmCel1kXX6GkrWS9FSnopKNWrQWYLsGkljVO1lGtSlPrGTq//Uja7PVnB6qb1Muowd2XztqdqrreagSa2yQSIBhjtJ0qvBg2GIwBjADAkRxImT2N0jKcADVjazj0czJSszVUFTC4DDB8EDPcBA4I1jxF2nlMw5VFtcKZiYKTtGjcOy7t2+lh+uomoFJ25mQ//6l+cY6YK+/bnJiS2nCWBC/h956e9Mois9N+lJ7Oa5yWc0DIm51lOHW51TiPtv2qyWr79CJu23kACYAwUwhDDSU7NlIiwwlgWzAtAaEAB5gGAmmCWHKZ9SpZgwBOGModgaKIIRiIFamYKBgYEADxgDhBmC+EYCgJ0jxIAVWnFNxscoiaxFqOo2Z0yoPy4Zhg0sXDza2q4d388stluPujtW1ukTDh7FaEDAXO3n9bZ2/nG9AJTEPpSpREVSJSG4kih0MmO6Hp9Tvava/t29ort0ylbDC+u99Oj/+2nvRVEC8jAxAKMOIEE3PACSITQaA3AgA4iAgE//uSxKYDEdE5JG69UcKSpuOJ5iqgCScp+QZiC+bF3cc/iGYyDkcGhEYtAuYKjGYmBmXWTzVUUQf5ozYKeYfaIyyW5iqNXGgYKSmBfE0fEpehzjqKY6msm1xBDEzOAmnbfo6aAROePrMdc03a+oqCac3zq62PZm6LZKHI//8sHf8s9d4p0PRKxstCwBDtMZKoQ9QkxTEcDKMGMFswBAFDAXAFMBsS8zxFuzD+CaMNocszJw1DCdHZMiUO4wDQXDBeDBM6QRQMBVIHGgxUOvqH2dskkSXaOq1LMAQmQX2kCSm2lL7ubG5198K9qkg2ZkVmq50I19Nhjnl2am0sq9crNgFsZLpsrs7ImqkFGoDJIc6bmc+6l1K/Mm36HWtSehT3vs2rUvVUztUTh9JRNBkFxqBEMa4OIeIVuFUlIsSSd86lvU4b9COpAO/zBqDNMM9941xTXTCLCYMCwEMwEwJBgEchBaMEU9YwpQhTGXMPDj40UrTpYdEAhMZw41c9zBAELeBxeEge4Lqy57HCSQZa3tmfRExqqOk+Tbfa7jrVIegsiP/7ksTSg5GFNyBPdUXC9qbiCew18HoQKzn0eXu6oRShXXJIkIc5bULbd7eH+4h3xcbYq/r57vh823qXx8c8xX8/93W/99Nmm//aok1O8/ziDYqPpqnf5Pz13/0rQRB8wVwEbMQ3H2jfJQtEww8CUMEGARTAmwBIwGgBHMCzAVTDCSO0wEUEWMCzHYjBKANowIwAbMP1APjASgCowFEEyMWVBgTAuwAgwBMA5MArAITAHQAooACEqkn2gsRMAVAHGoySnSJF8AITIIyAPmgwU+ch0N7KeyWSq038vDFIA5I2aFWE/aqRpihJa/VzzRGlMt4raeFLvV76nzSoYDMu61tiuPy0hQlWOQSu/mtZiaRRy8ipzOVUFW3plRC1HG3eGl54Y4CajhmqhMrCJBjdadWfuv55hjj07KoeNO1Ozb/J31Nux3N271VMQU0JTAWgNQwncpNNOxEzDBxwO0wJQBaMBPAOzAKAFIwD8BUMMaFCjA0gTcwX0TsMOKAEDFJ0jb8SDIcXzE1SzfGGjCcQzAMARovRIRFRroSye5wWWNedF+L/+5LE9AMUcTcWT3FpS6c0IQX3jqkejzsQWiAzl1aGfc2dk8WkeT/0sLmLz/R9ikQvOXTFE1QNGFiJ0mTDZAZRQmRcZGtNSTKrYaAmqafdBFSupTtrQtQ7qWtWhTskpTo1GGm/n+uPcRsbL8lV/ecKzevPWbqf2EDHHkVf+bX/Z39FZV6/a+tdr/cjTQITcbZgkhcGCU7+Y3BnxgYBImASB4FAEwSBUYBgEhj5iLmBsKEYW5EpkCAbmA+HIYQIHAYDAFQPwMfAPAWhQAKMLFdgkrR1KYKFQwiZLqd1CIC1dir4ttutNqGdYM3K5Zn1lVustRM94OvuzmRdM29n5uA9JT+ipR2pnrXWnZSLoXf7JKWtVHqVdnrRrWpm11rmB2TQ0ith5wuQUFl2vKNF5ymlTEFNRTMuOTkuNVVVVVUCDBSQWQw5otbNpMEjDCmgPUwPEAyMCMAQzAXQBIwBwAMMSwB2zARwkUwKki5MJUAVTMiCDMEfzRE6TDU+jMSQzGsKg4CDF8AiYVlFGhGCgBo/M1C4EoJiICZNRrtHNo4hByTj//uSxPIDGcUTDC/1q8qOpuLN5jYwbcT9nfp1tbjQgPXrA/IS1vXcWkO0Oj+qkMdYfZbhyYv66x75v7ffo2kQ9ntqm8wcZ1qtqWtubNL5h5pfMy0QAWtq5MHaeJ+hySV22F6vwKzVdxMehIjHEXYqd9cm5VjUl2P/Pfth2gHOnBtnpnxhy39BTjkcMDsCUxUDbDqoGjMOwDgwOwFQMBoYCoHJgSARGJiG8YYQWZg3GEmLiDGYJwLRg1gMGCcCMLADmKyBoPA/oI1LIg3VeUyZgSnIgqz5ozZUoQzqlOm6yallAaotbXRntmoO3egtNi1LUa0BZrBTWsyte//np8V2rkz8E/aoVkS+fDqMTU5mViGZrWk8mt/O8h3P1/znfzyTfiO6Hg+1FdpLQj82pVVVlSHrowRA+TBSoMNIhHEwPAyhGC6IQIBwGcwMgYzCeAPMOsUIxag8DLvD0EQM5gAgMAIHIwQguTFGDAMAEAu2UAYpAt0bqnO6srQkMkjOD+COSztAqWtTiU8Tzuq+Dz6OI/UGs3ZR+1iFWqQWQSeNAYOFjf/7ksT4gxqo6wgv9esKpC1izeYOOVm6ZXq/ad/GzqO2z/fPae0bVszqEtak/TIhTO24axpCAeehiv8uZwzSRf/2ikxHmtQsz3hc38TPhKThA5cfVVbb/4lbocIDLGCTAw5hb5qcalOLFmELghRgXQCiYDuAmGAnAFpgJoC6YIOB2mADAMhgLI6kYJ2ApGCDAYhgQwCUYFUA/GBDAnhhnAImYAKAbJcGAQgBReNcw6ABpeJXumJMRknCVJywuStbRhJRFrZoSohMZP/LVCN9HRm8Y51wo0smqSTc9Ca5keRy91mxT1pjON+mJJWwpZ6x8VvNi1tYNVnbT4ebJqBDv2rDHxsrqhm3stqqv4f7mfJN15ysy81++0vyc/SIE+ZSVsjN21doZG+Ya5xz5mv7SLFqPwThyF1hCPX/OhhpzNPWdOH+LSVVUwKgABMKdCrzUCwZIwd0AvNDBIBKMxEIggDmHjqYJBp8M5HshcYxhwchTKqpMBxg36yQhtI2hBHEhUsUlJECYJULQV6HvEUcypYmERxxXKvT7yKXGGt0utP0Ner/+5LE/4MW7YMQTzB1Q6W0IQn3mnEUKiSDm+tO74wulh9p9glrnSt9X3nN8apq2bEOnv8/cD6tj61j6xbOsf41je/81t/nXhV5C6W+IUON5Y5p3+ZaLVDnckwTLhs+pnfqPJ7u6P/G9v5od97V8/33o//vskCZMB0TIxV8uzvtW4MPkQ8wQgeguByMgMGAWAKYB4nxhQA5GBKfuYIQPpgjgtkQhJgaATGBuG6Zi4Uhg7gLjoAI0A4hgw1xGvw+/ip1zqbw09brzM2opNzeDK3Zpaa69DOXFwlD91uzqzocnGPq4t7ygcLW9YB0tPMVP7/aGDCF2lZ+N3HmnojkozkIHhOWyWU7XPvHBlZAmcLQpwGnRnKg8ZKBIkJ3+ehFto5n7vDO7BjWkN3BdCruNH9TFDvqw/YF+OuwpsP0MFJCCDCtkk00tAfSMHwBgTAsQKgwGgBPMBRAZTABgAUyKuk1hRw880U9lI00KYs2xN8wDGkwpcU7eb4wfBNGYeLUHCSLAWKACpELABCxUEFMIHfqG7615CvAwIAR/CceF4fjx0g6//uSxPWDF5EDDE/x44shtKFJ5Y9JVJpOHc0d4IaQ7ST2oaHVSVY9Gp3TYAqvd2bwyaPSg1tXAGTzDzauImmNYstKrN2+n3tdfzdLst8xEq9RUsn5j5uN8RzbXxPERtrhnbqUl8e7bFMe5yvKrqvj7Q6ufmLp1Mp0d0i+66j2st0L03i96pxqiY9CvmI0nMDRAeDCygsM1R4CeMICAITApwAQIAsTAcKTEYJjEk0jNJDzRbMDlsajBY8za0mgEFpkgZhz0XZhUDhagaEIs2wR+QgBV8vwhznHNgdtgJj49mw2j6VIEwnqnTNNMqqxyQ4hDsSm4NbbxZ4G3mm0RD3UxH/F3xOF2x3HMNvir+v2fU7+Ou++F7MTcY53+++71sq/NNdx3O8wYW/WN9PgufNY0ExDVMX6f//H1rj8r1jMWsIdnDG6MAvBKzCYDTQ02oYNMGuBADAlwHEwEgAkBQAOYCGA9mEChHpgVgXgYFsLSGAdATBgJQG6YMKAZmAeAZpmGkH7XyYVDIGAIGLQYLkHAKA1AaOSkoDa6p7B3XCkcPUDO//7ksT5g9vZ6wQP9WfK1x/hQf6suZY1+C5i1jJ4nSS2kjsol8MRh56a9WqdqU/d5yVi09iHMg2EUYlsbNPCp1DoBCf0l2q/u9+04pKhoSnn+VXuZRPtZe/qKnHxNLt3FJH/bP1N1cVd3CTGOiHu+71ujJ6ifiOY5u34uH794HxELFr+OnS/dEb+eSOzJ+oGML4XcxM97DffYJMNERYwVAdwSBYAgKTBvAMMjQTYw+yqzCjNCMnQG4wOg1DHdAYBALBg+hAmMCFsJABLvFgKURF3t4m28jGi6jEZa9cBMyiV/BrTULr1sHqTxKVFMKp46fDxeW51XPtv9QtOaujHnp+v3/v6emZhqEkH3XapffnuecZiiw7md1bUqm5dSv8KkrkrxcVFq5bU585FU4c45Nl8P0LfZWlidvFJ+6GlU3z4eh8ucgUl9MltlMhU4moAJlKsYSwRJjwo9Hx+NWYrIKBloNmIwQHBSQnJVUbaUxmkhnzhoYX1BvsDBURhdNmdB+t1ubC2mxV9myxe+82Mw9JlC7zgeR9EclDcTBoIEeh4Oor/+5LE9YPbAgEGD/ENyvk7YQHmDtmmrVTQllzl0bTY9N4jm7zi1kpSulZZW/d7/But7PY/7qrm7q5c3i4nuJ+qbxHP88OqL9lXs289Ro3Nfx/t54ipt9uiZnexrLUZJIND4lBMR5OlCxXZ9FtajENCKDJgPAFsYVqTCmqriPxg9YGCYFcAeGAhgEpgBwBcYBuAimCHCKZg44S8YA8FVmCgAARiBwBhwUAwCJgABJk+D4cR6QCz04IcXkp+BqheR8GYW5DDLq3aZfUjgmcitqBJVELcDV5HQSHHJolXRbZAprHaoKRyo1FAUTijqi2tupc66ySPmvM79rZqpbKFRTaOTTavbNn2rHEXxa7K7qHnY4qH1pvYa2mdh0nl1VvOw47MLOOSfg6cqWVyflrV2KKV0elLXanmn8hoEBOxP/bkWq4wALJJorTKSyaNJ9VADCXGCMEDtcxA2hjAME1MBsIgCAfoCQKDyYBRyRiDEtmJbUmJASmPfYHJALGDYRGCxNmaoamDoFJFlx1PMTlqf7VokjZII3Puk8baWYyzGHpM+0nj//uQxPCCFc17Ds9xY8N2MWDJ/q15EWeyPWxNL0JRELgFrHwb11QHjltDAKJqU24f7n1YFtVffwnxMynonXVw8TMek+Xcvolz3UN18TTzzFNKPapafD89/0kL2u8RExdXUXQ26Ti+bXmluYR+UqlMRxuMl01DhzUGJGd3OTiUJgf4JUYVoT5mnnCBRg+wGeYFGAoGAsAEIKFoFIoY/MuYksQZrCqNCwZ9w0Tz6CQEC5wmBYxBwRvRE4YdBVIqgC/TpLWYc2svlY9E1o8AsICRoBJetI6yk68fEzEdhgTT5x6hmqjsYajRbZsFz55J9bbRYjU/UEMasfvdLHS63zxp8Me26mnqS1s7T1d+6/Ujri+n7tk9XbKtk3C192x251s7uZq9v99Rur99pVmZkcr6CvaWV38dJKGt31jZd5B6zuiHSDA3QFMw6odANwiDqzCpAJAwOkAxMCIADDAOwA0EACRCDbGAqgzZgtYbaYJmAtmB+hJoKHhTAXwJIwG4BtMGCAwAgAFdMwAgACRpfeGWNxpQ5WV04cpZCyBUklhuHZCT//uSxPCDV7m7Bi91CdsQsSDF/qy5yCFjqaFoxL6JN0JwtILS3m96JuGMaB9YSbEcR1Y+l8yY82b230TlH3q2z2oQyBzGSHJsWQKQkPnmCRMnoqwwi7HUPpjFirToVaChEU0BI0UYUxm6UqOW7bg72lE5UJHQkBPXREFVlBtqCQGhOsOTRSUb0hZHnbkZ44im5hzAluREoswCAYTA2SSMt4f8wIASgqGwoAiEAgAGhYumFBiYAoYKpY63TQwPGACYGDRmoDhAMWI0OF3R1COxw1rILID0O81LATCxM5ZMKbO2bIjuOpmpmUFiJ8+aWi2pIALnTaVzpMiXtq5ufj4kvp39W2+rj4ZVqTcccvpkNhkGi6rvfNTPr1y5txcezdW5nLjs3V8vhzrUtkIcGyOB6GyCYsRVZFQofJIQDBVAeMwyNCMNZBG/TCQQVowMQCrMA3ATjAQAHkwBsBtMAFC9jBDweQwnwI3CCCowC4PXMCUAKTAKgAwwDwBkMNzBey/BgEIAaDgEsSABnsgEcAA3LtkAAE60h9eINk6V2hJmGUiXFP/7ksT2AhuKDQIPsHcCnizi6e4sdTnBaZEazn91M5P5HjBBrH0u30R1iw2DKuZFYQ+nT2DC1f4Zp9Y+M+CZFp739IFr4xSBjfznhKpk4wmcY9TvKOTy5tNmpmX3IeRf7yYe9Ses9XznTmyjtdS0/Woa2RPQQDEI3I6Kf2kpmj275Up1Ktky0dIXSeQ80SvxDWi6tkmVCsOtuXlHVp2uSRLmfZhEAQmQmF2f+4WgGL3Hg3RoGYwFABQKCOYFwyphThNGDEUEYqYDhgdDemCCBUYCoBhgZgLmEaIgIgEVMyIEQeAIqCQbjwenaGeUKkTy+qJpbVvcaYybrmOZOY4/tDNJ3fLi/e7Bpbzd/8rltsV1QK/dzaX2Q7N3T/1q5uyr5uyInrSyEdUqVGdD5XuedrWTLfOtRmMoExF7eKuuHoQLnCdZaBwLP2mlNRUAKUiEP4xba+zxLT2MQMN0wSgTjAfAtMCIBAwZwNDCKEcMKMH8xITKjDoBSMIgScwTwJTBSApMEgA8yygIQgKQYAIRuW2rpRFyTZsgbG4fiMgJ9x2hRVP/+5LE+oNepgcAL7zVWqEw4UHmCjAzg4N07lZ8i4sF5uIztR0Zdxo1K4xjc5H2tDqXSNGzrObzVtgubqCb2Zp2Ih5wbMURoCDhOMivSTIkcjuTnZuLtqsiMxtSuTlCjJpOlCPMTkpCHBMZukgxJvVzJhKG1B1jIljHMmj0WtBnGoWsjuMnOiWKYeCY7eyYFAwsxODFouBOdxOww/A7zBVBmMBgCcwBQRjAiB5MbMRcwMAoDDLDSMUQAsAhtGHuA0YFIKpim4GKH2YCDAIAA8UyITNcZ601xHpcpzYEkFPEZqvGHBpKJ3M8pJW7JKXGvMbhukcOv8qtRXLLOrYjr7a7gxadanarMSwgeIJaxF3MRpo+MfSLQRATMTvU5opmpsGwqGKqEp3al1lE0i+Z6f1YqbcJJuhc9YCRm/KSM6wjLLnRDTSGX5ZxuyXhObs123Jz8SpKCZIKMDBAiDCfA8s0s4E4MHMAJzJcGDD4DTBcFh0DTo4WjDQKDIAbDYgXzARdDB0IjGwLxCHJ2KAZgqA4XAduaty0Y4u1scAgRAAAXIjB//uSxPICGdndBq88cYsmwGDJ7g25gFYoBgCTkMO4t1GCtMcKDwWUtZvpRMhrYiCaibpl5Ud1tTNMLXzA77obLUroVfVQ2yVxpPM7vMQU6QkxSytW3XC1NNX3FPVzxQxuVvmV7r4+J9amVue8bLjC7Cpiy0VBME0Dqc30u+HrqY8zsRgmURMC8LExxofD6GPpMT4KgwZQMTA0AkCAVwuB8YwpLxh6grmAGJIYygGoiEsMJIB4BBHmBWF+FxDh0A9B8aBVFgHW/ksNtngiBGTTc/YFEfHxi0OZoUUx6Xj1GytW3cM1gXuOwHyukD/QLzvp7kK6+bTdvpcw0cWYJXK/A+4kLIX3hVqdIiKUOZRVBBjcgYcQasIMhWgk9JexIkcZ1I/GvxCnG5AuYLfVoymWLJRZkfaEEvKEnfqvlctxB5LwOMJKeHJOGuv7ic8wtBgTDr54NY1k8wmRMDAmBlMBMDwDAKAQHw1I50wsJUxfNszeE8ylNI0CBUSHwwIQg9qAMxWAIGAoxIVAFRqDVK5iUwFTQ5Jaz0P1bjMazoIQ9LHqP//7ksTsAxchlwYP9QPLI7QgyeYOoSzw7gXLsOjxsoxljKGoAQuFHDxzq6cRcsMka7jQ+s0jihjLnfDefaOX5qcQ1NNo4+B2TFTNJUVB0XB5Raq1Wu/2a7VY+h6zENbksMa7Gs6yP66o9hqRNPJvuOESO5YwbSVDInEw7Wt1rNLdcIlyeK3CySfVjHlakfI6BgXAF2YRSMSGgRhMZgxoDUYDkAZgYBiDgxMIQ6Ms0MMTjaMBZHMWAlMUSzBzmmLYPmGqcGK6PmAYCFxBoYysG1cydyZHim/DUOUU4IwQhsBgKhYk8XP7KGrQrlknA0KjRSzX4cIeqLEzddSjvffEwoiUt7ukE2ft9Xxfc9Q/99R7TdPp3RVcVtvbStX6crPLRNVVj7n+utZta5ZaSm9ujo66vndo17enZOy6TedqnGWZpSeKZbH2i/ZJfnVADAbAGwwj0aXNGfDJjBkwHEwH4AmDAGswKBkEiYaCFgaTluI4bNPSrMBHBMgA/MTgkMQw4PbwcDCSMAQTEAAoEIjGm4wNFY44UpfjMVBdINgUmxYihcP/+5LE8YNZ+gcCD3UHyu85oMX+oLmBwgB5yJ3gUckciwNoTSg9jdroYzlzd1Uwq+8B0IcLcJLysxbNpP5Q7WptHRosZa3rerdxff3E2KI7RXEXU1EJOuvNmIfDTS3HKQfKRNTumTojOlW0kPY9ndJqaG9xHZaybV2N5nHL2fcpbzKXEW0znLo/ZDBxFSMCnUM0HV2jAnELMBRiHQ9IApEAeGYIQgYPTKQujkcXzA6FxY/jCUAjDBtTG9mjA4Mw4ByIkCYRE+m0aVOSIFAoWIoLjiTwUgGExoscHklsNMDkYEIoMEEOD3ciXy2RrHUJpnYpamoVLWiIeBbdLhaUdVUltwdVmCssUQ0urmVy8L59rA52ux1RMWKwhPjWmVo5F4P5v7HPcktVLc3vakoat9WzzE+lXCzXL3SaHa7Hy00xSNBAzSZkWh1ud6k5DORlW1psNZswN8EcMJMJwzQ0hAQwaQDNMB5ANDAMABcwFCQIJgw+aswTX4yPoI2HA4wwc8zXAow8AYxuEMD8YBjgAgOIvIIXaglnLWouxao/3xEGjsDg//uSxPIDWU4DBC/1BcsqwSBF7qB5OiWhFOQRkcLC9JJxZ4gmQ4pUxPz1AyJmkqxuOeafmUPT6elhYuaobqMkZN2OdJH1ixCULisOWt1fI4zW+ZhSbqht3Q7mkWequr6SE6iuqhxkDy7S5huXPqnWbbX+5jipx5LQv73Y3WaGoQOgcOrRbmdO7V4VVWZfodRIDAiZhIAaIaL4DemDRAFxgSIAGAgGAwBkAOMA1ATjIttjOsxwRPAgDAw2LE0xAswHCcwTUIxkXUwSBwtILDkTBVCJO+sVkLkzUiuxp9JTqGne6gCjhzA1ycQgUEbPtRBRI5QoEGyl1iGwmARZkRrndSyNSnpkmOHEuCYM5QHzSm+SIoxism7PL3NbCNqf/CiPTzYuugm9rQtVlklBasZm9aQlhmZ4Q67O9IvIiJadcyC4HAkWSKRh0Ze62MJEKiAMCgRUw/rgjlMUlMLAOwwMQazAEAeEIGimBk/UJpsHJnGagdgBgwLhq+B5gYBpiiFx6GJAGHMAg6pqmlAPW3i91n0gzp39giGInm6l0VHknGSWPP/7ksTuA9k6CQIP9QXK9cEggf6M+aUFggOHAqKYgwcI1m1yo6LocHS3Uab225V2O5qbuWXYmxAqrReiFXZom0ualZRYLU/8meDVeJkaNmyXe8eixdra3Ka2rMyXSTRI0wlJe8q5tSlHSx9Q72oydzjZQ+0sYhEu1jN25GQ6NlSOiVGkDNSi6Q+p04UyqMML4SUxtakDw7R3MTUN4xYG0wlCQCAQHBcaISwZFhcYZ0ubMCWI2sFqXMExKMCV1MOUKCoPoXjQwlAWS9+H/ylQNAKHnJAjmmHB7IiuNERxo8Vig6HiYRDWD6ZGGNTQNWWtQlWku3nSL0FJhhhMmo9XnS/rSQeTPVn2lSt8wOgmJmLl46Xqod1nq61n5c6Id1yGR5pK0Vy+VbLFkmqPhtrhPXbR7hWLdTx8wyo1vMKqMMmrQ2800yF3t745FCXQVr5EU1UwKwBRMJ1BTDSsQAQwcEAKIgS0eAfzBgAwgZjaVlTGQ4TGR2zIAKzD90DEMIDAwIyJIRtUTD4Ai5DpJUvdI5XY90XWiWcTYRkcRTBBEEffQxH/+5LE8INZkfUCL3UHywq+YEHuoHlOEccgnGB+bcysQKJQghqiFhrneDGlJeNG55ITOXHPEFHohyJBXQ65ZoJxrmVCM7DYWjotutFX1OJpLjepmRlHt1krbTbzU7vav/HcJXb3UTo4we42FRR9pfw3Pbq73d8PNXY+2kyVikqRtDBl08WiWNgUGAMHkY1tV58HptGJuGaYLwLBgSgVg4DQwOAETIuEoMPIQwLQkwCcjBbiEiyYxHhBVDQkFMKBIsoGE4oFzFKZj1umS8hqrcg65PWo9DNgkYjT24Ox0Yzhxhz3xiYZoo6TH5TzT2fOt/25fMpjWhn3I+9WM2TDtZaWZa8qWjLOGbjXWfbi5PI9olk2aNuJ7zZdd7zUdnas9+nLY1NlfTdQaikcK05LLlJWzcnWZk7blLqlbGOznZhniqV7Y9U36lE7shGPJTHH7aGmlXIwlRGjEOqfN1BJIwwA3THJIMPCUwaFCYuHP58VtkxgaAcawEegclDEh3MSpg/GHQcPxUBlq0foJCcGx7g4WCsg8wRLGMScKNQ+JTp4MOGC//uSxO8D2IYDAg/1BcsqQSAB7hkw70PgajDCVHAygzS2GOdmTdKqXI9xR9FGGwt414Z3q+XSl3mVGL6DtnTUbmTyZUE9VBAxyIeTPRKtJFpr7XgcsERvQ1Fteb+kPIYtkHpD8UtcElEGqrVuhBfCDJ4WmZomHUqJeitUNkfApVMwCMcHmBXgSBhGgjmaE8DMGDJAHZgPoBAUAOph8OA4Jmf26agCpllZnNwaYNZZooOmJRMYCWZx9kGIwSXLFhCRACF3IndrtClUbq0qA0MEgWPIhxNNls1PDjXIZphpv2Gh9Z6KSqvNIlM5tRa8heShsyNldTdnKtzNZlFncwxSqunxxlQ0K11NEQ4osVdVD2k3RaURdD2moXihhekbprm3MdW0j3GmIXcFVw0p15bCajxiaypCMUXNXeRV0OpFdDBlsNG+PTlD5qI9ljBJCdMfh/Q/4jtTFqCgMG0EUwIAEjAYDMlm0z0FxEBzOS4OqioxM5TOpPMRA8wMfz2xuL8I8BwEQGy5/aeRSxvIKzu5sJkGAWuWF/mp06GXe0pWJmWeKP/7ksTuA9fF8QIPcQOLGr9gQf4gubY3LeTDzkmop2pT5zLnkCwjTWMztamZPs3bTtt+mXMbKd3uwyX1HNrDk/V4htV58fqekW687oGIdakGuJyUbh5aXQ8pTRu52k58Wl5h92SMT29HJcpsCfB+F2W573OZGkaQxZNcLkty7vWfuVR+4pswehKTBrt6MfVQMwQw9DB4ZTA0MBAE5gGDxncvQgF0xYkgyLEYWOU0hBgMA4wsKY0yIkDBoXACASRrdyNu3F7QCQBTRGHQPHWIJggjBWlQILvPctDhBcWrHFHk2xF2w2iYNqxlDeKvkvmAhRNJLUZcIPVkNoqEHQnFOepkjCEayni9HsbT5O8UVVuLFUJpdkEa80tstEKlLlR1jJZmYumIyDGhGe7qyGJkcS5aNKSVBnC000LtFqNfIVFhkV3RJcelnHj4gfElVQyrS6Q6ajC+DVMiNyI/5S2TGJCIMIICUwSwCjAeAODAKj6qzCq0Nv+44YZjCM4A1GMOCEwqxDg5TBoAdMOAaI0y+nK0cgmllNvOvneisipynE2cKKP/+5LE8gPY4gcAD3DFyzVBYAHuoHism65KLBHX6mLTdzH5ZbvHxUKMLbl+yVbB6NI6tpeIyLbtH/d5IXEIiyVUVNe7282jKK1JbPVOR9ItdmO7AWFz5QvXY+TjnO7mpwfUQbUCWhN2q2x/WUaxrkob4QhmZaT9qkxe5Dp6YgcyyJmxUOUaY2xNlYdqNVTkdO7IQYLgGhjpoynzWREYpoJJmIVGKwiYWFxgUXnRC6Y1aZgN8nkAUYFogckhYYmKzKc7Iic6c6zWcU5ISFAenF0jK0CkBzLLWzb4pPS5SmqV9ureoXl3zt9GdsmsW900NWKa4jXr9fr3M23vMytatc/X3f7Kzf8TQS3zvjLrKKpm7Zp5v1HzTmZfr4nj4+5S2h0D79zrzh5e3Rm9vL85218ik3WgWu3h7/lkVeI1CrQZ/z11fRuNzD+RgsUQDBDD+MGulE1LUkDBNDLBAKxVAhBIFRgYAbGQbEGQwfGXNFmdwamAbeGQwrGD4DChUmSwxAYAWdFAEFAC7mqeTcciHZrtyPTX4z1laFVmnwYtRuyfXJ0S//uSxO4D2XYNAA9wx8LgQCBB7hhxUTQVY0ECDUxVhd2v0zszmtSFQXMEEej93Tm8dNaDy9uQPMPzO23r6z7eav6blxl7twdXfWW9kNaFU87S4Q0x6IU8YhyyC+ppLNpGGa1JMQL6yp7tMYjAN99Eo6G2y8WTZy4MuiKfncs0KQinl2+cy4K8tDJJAYR4Yxi7OfnWsX8YhgQ5gmgbGAwAGBgHgIBKY7xaYhoMZGSaZ2gqF0EM2gTTYGgwNKgVBwcJyNaeuYkMQhdq7P7v08/K90USqfblHLJnpWN7CURRDoL90XCqIs8O/iUsfWnUP05qSk0Xfo5uZNRno4uiDL3u6W89M+Xmm18x65ZaR5xaT/VVLZubM3Wey8yXMNThE8+vvvcF+XtWNLE8iWbchpfEq9PSFflM3Qghu47WhBvwzTHZH1pT6j2hsdu9rzLxVej9GAADCDAGMg4cY/9hGTF6AgARzgYVDA8H1FTRqjjIlNRpeDcsDzCcEAVNhEQZhGWAhHdTCGCIClXSaSS6tKhcFRrQOiyG3FRMQMnOMDwOQkEER//7ksTyg1mN9QAvdMfLGsGgSe6Y+BQNMH3byPi2Y9SBmGO7isfm9xaFHMHTwNo9XZXdqSi0+BHd2abLqaKd5mJepJWB8nNezowxhAQxLdBU6BjNpaTU2cPZ0MYWQ0qZge8a3xOMkRqQ8eZkvdZjj0pjLnVlaTVuTlWSbQbN2y0PR8UGw8dHoVElIrOxgCBkmHlGEcUB9phUBZGA2CCBAGhUAswFgPTIRETC4hRivyHbwUAH2GX0FEgwCDRMrBgjLrwS+0zOwxG8JPJLPZ2nmcoGeek5Av/T9NHl4lrHKk4pkAJRwUHQxmkeqNxJqPQ3mPPviP8jDTkkdULxmlRpayveT9bXIY+poOrZfZvXc/WS/udzvZBdGc2EC4my7vddaaXnLgq90xVJYibu1WIGrcvbJxqrto+XmhlwUR153NTSahpaGdi7bKUQYmnOFeeVT9UZBqZRbyL4DCKDpMS+K44hTrzDXCkMDoD8wJQGCyJg+gOmRwM6EAMGA+WcIQQCDhDxUKFxjNaY7GIT2nhwgiRJ7k7n2G4Yu2dTFepOwmlNKAj/+5LE74NZAfEAT3UDyy7BIAXuGTHyiqNMQLfMJhsJkTKTo61H5YGDHhKLkDm3BT/HrsuivdI3U4yfdE9jUdu3s/W2tmogs3724RcF65TW97NlHQlGV8VMWaye4cnyrQ2vrSo6KiT8vc6BK5nlfz9hnVNujuUxxHCbQhqSbP2q8qNSXTVa/uWS3M3UTT2Nhrfc0CC6NEMHQEUxqx6DzhB7MS0AYmZAcSjAABMLkg7L1jBAzNH4YPAoVQ4jEoMAJlIanUA8PDheDSHBlQEQSxE42ZJJdVzEmRG4ZRemyQOAf6SO7iEHPqsx91Npeqz4ZscvamtqrxfqLX1FzM69Y/f0t11iVsS/17jPn2a2N82fm+pT12i9+POXnw3N9P7XdyVSLtVtbpot5qb2SFs1nRkSnm/05l67RWsVc54RrHfHnZ/9vBB38VeFIFkqKkAMBII4xQ27TqjMoMOcH8wNAMDAJARMAYDAwEASyr/zH6gMNLQ50CjBACAzDCgqAh6NNHcFBRYg0CkY5ZSXc60ns2eTc5T2exDwIgPIlkEAiBbxNGof//uSxOwDWV4DAC9sy0rZwCBF7hhx7qMaBURJ7N6eW5BdQz5rZ73zZUzl1+gkamz2TcD4O6sWx64dt6WJtOMUddwHra2fT5Eruv9VkmM2HvV7hVS+bL+YPsuDO960JElF9mmeYRrM6+zhj6ZAr7SEI3ux4MRLStzGN3HnHzJZ+x1kU+zbDQcsJlGgwZw2jCkiHNGQ6wwbgqTCo+AghEI6MCjc4QpDHRXM/vMPXBg8NGMQEYLIJgU6HESCJAZqqV6vqJihGSiRYVLCay4s48WdxFkxTAgkaJzBMHrCAwmFxHE83AmACCKQ5G7ZTuK11cOxHlChZj7Io5ldT0ujFqVvg+EoUPbi4NIlqEpQvN3CsQU5j41as63PF9BwwlpEViySWeZQ0+7g10ezsmiIUecw2xcu1sa9GowvXZBsDXRZshj4XdTGc8xz7MuEGUp6qLpTdbtW0Lrj6jCHB+Ma5D08yBljEwBDMrhIxMBzDIWMXDYxG7DNKSMO2018JR5HgoghQaGK0OchJwOBaY6MLBJnCYkfQwDHESiHk4BfYujsKaGLm//7ksTxg1kyAwAvcMfLN0EgCe4gcKM7MUmRuYc/oZlvhjy+6rqdCU3JSkhsJ57mNnXLgxNlS9tuViG0a/yrOQ3aK13Re9nU9qeVjbGbBqFRqKN+FnTzNgwyZyo+41XF0dTttEvOu3Leje/Dw0bHgosnESMjvP1hG1q3dXOsvF8Snm2ouKNlkEi7LDA3BRMWxOg7liSzEEBWMEMAswEAAjBoCHgsaV0Zj4UmKOaYHCZgQdGBQWISeYeUJvpCA4SxASBiEM/OyLDk5DV/t/MWQuSQolR4pCDCRJkKCAZ7RQNMV+cZr7b3RXfCLJIblLfE7UtfvDoa2/o5OEbKHNNeUjYydamR8oTV0r3cbTtaKO3NF2+5tPdXR/dbVhqe0kkVV1j4ou8q+UzzqOUvHKjwmXLtdpblCEpnmPFR2tfr1aMNi0lMF9oGuxU+6VDLfZQojs8wDBADBMAN+wxGjdRGEwDAOyUBYZCI8ADeFoJSoFqqJXcwAZhEAgAODBQ8OjHsDCRGwrAa934n61JyHq35440JQdeFyooyMCLsjyIlBOEV7l7/+5LE7ANX7f8AD3DDyx5BYAXuGLnCNkyfTqYt6xEqur4ZmWVM1S8k3W0jeRiFW6KKUKNXrt3h0l68TTfbjV6ghjeKvGUYvWPRVh+qerrCj33cLObauHwVarx3z+Ny5IIuVlHES3SMWjrU+9NaOc8yK1DSyl+DrwCMg/ZPs/3emf7RpZTImpsAEAA3JbCiSjBgIzGt2D58szEcEAMCKPyE0MAww3BkwRAMBBCGEEDAmb0YAkdBgxHA2Hoit9e1L8gwgVXWgoQzYBxyARwYRWRKFWzR96ZxYSUY6Za1C/AxVnvbec2V/7eb7OZTHqKPMgysxqh+ho2bU9HZjAUTU778ZiRUVVtFuXNrddfWTd0iPQMc+paGgPlM0TiUGJKOme2cnRz//DcW+lFr+IbMGmnS9nT69RntpqVgDBsAWMfE5k/Mx0jFjA9M3AoDHcw8DDE4COfbc2oUBHmDQYSC6cM3BIweNDCprOymwwKAUTxIGqWb7a8p0wlpZPbe4o9/EBEIlWHJJIIjYlYg3JnVEkcsw8glC1vbeS1SZlPUT1yuYbnB//uSxO8AGGYJAC9wxcLBtGI11JokV8qtE4pcxpYmmguoxQolnnIsU0yRQhDYZb4FlMRTvfJyeL3iaOSauLyikfZOSScRNqoU5QpGjnrEZPNJobabbmoafPFXXOCJicqepVTjrbLD5YpSNjIHVEyp0+9bUkjs2mGGLk3rDUlEdrRijqUGbTIrXgxAwHQujCBf3NWk4YwWQnTBALjAEDRECRg2BRljMRk2EhhGqBiUEQkCgcohKD5gQOZkMDScslVpRZl4GSIOBS4ZBFakYRDTBvP1LVEoWEEKrtWUhDrMoqi6vaREmK8+6KrGdZm0xkGFU8SVlQU55yaLmyaxmGMyomtEio7X4OoEKMRRWe826YKOVCRCkyjOecyBbxBpT6iSLFcti7JaRjqu6T08jCsS9JFaCfkH8wTVLRBIto92RIN/vlBPwQe9MYFdAatOk7xoSEndkOSSbTBpCeMQpg031igjC8BzMXiwwYFwKEBEJzK+1MDDUxqDTPACMVl0BR0wmCAALRLYJiOA+0N0szen7oTsQuVczZiB2hkDqFqLD5h8wP/7ksT7g1vaDPwvcSODNEEfwe6YcftZk9ZoeWtWoy2GEIaPrnL5VhaTB6qMq6FZHoK1yq5wvD7sQbLl5TLmyPhepHKPsxjTCeznhXLTsmbGpJRqrNmmpCtFVOl1FnSlJ/Ynt+pyTVILMzizrHc+bEIetOULUMd9UNjNPmKspB3RNFxZjJLHyc0IZUhg0gOGNABMeVwNJQSaDlkLEkHBcLiQ4kVDIQzMqzEysBTJcFMMC1uYoTiAtsqfhLNqU6RFmSUvLJuFc2XSky25DHNe2lWsJG6buDcLlqNys0t2basYvmn4XKSHMSu2oWsGydbXIVY2ujyoI6UkpKU1k0tRtv1+S07SPJyulJPTm1UdzYd8EvbTVwThVRnTF1XW8Za0fXjLGrbSpZJJWaRxB+1eVs/FO7e90Ow1qjrtCkjl6tC9nJp5OexSVcstCOFYpOzF4daHjivRsCAJQeTC+XGNsYpcwhAaDEIpAAIBIVMKB85CyjBJgM2KMWYYWiYQp2eg4JgazEQHbnFYhmCHAM0yhyb27sjz1a0NKwhJTs2nkyc/cn7/+5LE7APYHgcAD3EDyyxAn8HuJHFirWMtetqSBnOpZqovLpZbnTbNtf3sl/NzUFFuRXJ3jEvCTQZqBHmlmwkazkk9m0ZuNbbg7EYpklzWUlWHnNp7e26Ksc9p7pt5MzkDy9Sd9YrpmySrD/p5SEvWNKOYd/vtDXM1yE1rYZj26AunIp5iJaQkwYgtTDJcQNbswEwiQgjEw1MBhACA8w2IzM1vASzMRCgeqRlBXg69iILEBbABKaS46rGO5+tJCGwLJ06FDkYB5Q3dX199cgl6Nv/SaGhar/a+QJ6xtIqKi0DILOhLKAlw1tlUxz+q+oQCw5Z96tz3lApGV1FtWOkgyGmSgTyTckp1Ock8JesPwK1C3UUS6tPjSnNVGWozUDzznwpy0DEFbb2mEBrrGo9JiUqYGsoxvokt3wlXk5CgYRp2IOx2wTVaDpwFlkS0VvUQDBsBNMXsno7cQzTENAcMFIAMDAfGCAOl0aepgiSZjVmByqMIHY2OClmDgOIuwjCtCmfG1XpN00GRerbslJn01Zadtj3pT6iXdF1YJo42iiKi//uSxOyDV9oFAC9ww4sewZ/B7hhwdA0dacbOImUPhNPazpvSCd50tZgPwo3XdRmbUWqcKPJ5pzQRpMsfIgtbhWESsir8VSjLxBDYkhcFtQlE1XEmTfExO/mynzy0ni/OonkSGJaaiY7dFVJUdSyKLWa7Xi+6dtolWemPh9MhWarLXjFDiAjWSD3KmbMBYFwxE1CzkJJMMMEFkxUDjB4JQGFUCGpamYLWQJFxEZzGEMNKgwuOVS4YhN6g0gKAG0Kzag6DKysU8IMdc0zvUY6QGaeXqY5ngwiSLenxGqbkrIn6RSLbZzpkkpR2HHLJU1DsOL5hyOQdmJFbEQ0qtEt2g1F+QXjFXZtzZ6ypNW56F3jwfJTPXYgQMQbHY0nq7otkOiTAopKO0nag6xDP9ezITebZWi3vWc8wtinghZq0eWtR1UXfznIIL1HEyaJT2zou5CEwDBFCmMFJs0yNi7jAwCDEIuFAik8AgOZ+CBiFfjgNMJgYwDFgsIAQDQKAjbYMGg+yttYIrm46sVJYZzc5yW3GWNxfHkuCOYnSksKAXYYxfP/7ksTvg1kSCP4vcMXLGUGfwe4YcEJOlFVUhk5q4SxtONtpxyaW5N8zircF15vrJoE8Ta1IXlN2PVdVPlvkqhk3JnN2Url2GmkEffkeyOT2TtnC155eKN2wkul4tTnK5zvVjLbiZW54pWMpW32Gl1e0pGCNKPO+SCSq8WK20FN2lksP3FafmiYlGa9RnqWXB8U4mpQxlmRgzg1GKIe6c3wvhhzAgmjggKNUBwkagRsN2SguwAoaMnqAF8swEJKZooMBoE2GoWlKWkJI2aIrMY3o6fRac1I9BqPJW1GFHb7StMnN1YPCbGbDyk7rpHGSfdNPImg59QRyG1/KD0RktlFkCaMUeQuanNerMmXz27+BhRo5gdviMDZkpm8HK4x4hgfFkcZMobuyydGmQWYRs3EeG3NvW3wQUh9NA72XLewiH8aSsvfkzKSzZSoeYcfKT6cfpSNKwqpmFTAnAhMQIu44WhYTC0AmMpCwggSjIQY0dEPBlDNLYygQMLNQWMIDzEAI6gVT4fSBof1qdZVHzpaq6eeXu8lF1fcpNr9PJ6K8tyr/+5DE7oNaPgz+L3EjgwXAn8HtmHHZyZeF3LXO7hetGa24nn1sq9282uafi+01tx3x7Y29bGncQydjFQ0QSy+soutye4vlE6Qk41k80nTckWfmTr3EKyTFeXpcv2zWlFi87VUw0sw4t+Rm7FMyNS24YjGkaWVia35kWUXp8N62ulOYFgVJgNOIGUUYuYBgQRIBWOADMQMAUAAADWmDUIGFeIB3oruk5IDhAVYDT0VSqyt9i1LQ0tFSY59zncJVuk1qZu0EkpK26gwxHD/DoaR1CMkpK08qEjJ9s7sJndIQdZRSZM6xpHgaa0mktZxEREakWooZ0jAGRZl4W/KTQcmm7z1IueP9hOHPGSeSC6DEd3lnUopP7CelAvNkL9QRYUHCyhgEHuNMMSOJJVB8v4k6ciCxYIfYGfRGI6SbYWYyW8yGTugzy92QURJokYvopGv0CcpuMFoHkxA0pjfBHjMLcEYxgIzA4CThMFhIzR3jApiMhlEBXkwOxRAEw4FuWHXpCNrcM0Fp8vrWYgMiHLK0eaBCT1UDIlkWwy1vssNSXhj/+5LE6oPWpgcAD2zDi0tBn4HtmThSO4hKlGc42JotAHxyqc5B/CdqJY5kVDa1HyyNIusD7qW6iylFsSUTOqIT3RcsWc1JFUYsUdWjiCd5Gm1T7MX81rpZSElPDJdLCRE9VwR07dc4kjuY6HRiQKGtKc8GuRgOB9l0fjnF05sVaG84hiY/0oLa0C4W+Vrl6QhMDIYgYqpwfhZGFqAKVgVEwB6tKYphXifmCuAaYY9mlBYpCgKjMGAgSWiE0a3F2OPlTUVSn/lvCkz7b1Xt2qtPSZSvUZiaCB88kVy74owkgbh/NJFOYWa8aUUg+IVsvpXS8TD25KvJ9WGz7tSju9zpaKepMOn50att8KRfD1lI08qkq5uUUi4KBTCpXzfeMVN7uRR7u0UkVsvaEK2dVkGXr8tmhpPPqsc5izbdJi/B07rhR3swofGIrOo7EnP0ueRxqknw+gAkAYAIORg4qqmkaS0YJoL5hQ0OhagCXx9TgbQCmBWIJJTChkeugCFpMEbynw/lalmEEAP9KC1T4ikfM0meXbBRAlbizCYWUZF70ZJ1//uSxO0DWNYM/g9ww4MXwSAJ7Zk5+RaicQz66LczUCFhEQmjZpxi1oakHMJW5Mg4fGMQSzvlI+USjUTM3O048xElktl9ayRdxU5lQo7rO10DUILuH6DZlhXQX6hBimSZVGrLOd8XMFPoEekb15sEspzKe8hboTUJTGp8+Do9Ec3xqDJYzpeIW1Jglg+GFwn+axhChg/AsmQhwKEUIzDAM9tsNdMjDZM3EDACELWwKFBgyCx20iypy1KiYDUIFjdslJtxaSD/1OFlojyzkcLQXG7ETTFaShNpY0PSTO/WvETqdNkizGVll9AqcEEzGTgKs/lQbybXZhmUusRcy/kNyW9j8k/4XCKGxtZsHTdHyt37PHst0qeNF7Oc98gjrEUTFOapy1Y6c6+7wJbf9ogGIOI0uF7M0gcY4QBSYfyaGcs3U5L9EiGsXSZWIjBRAiMUQOM6AABgEOKPP4YWo1hACddmmXEpjUOceBmFPgOihUHJgMNlkB8NwdOVShR9FOFxPBZIkmCe6HJkXtG7k0ooswrBBxIzziyaIi6klCKPLD4BpP/7ksTtAlgeBv6vbMODB8Ffwe2YcMmtEKQuK3ludCI1IUB4T1PseGXAs04NLYBHpkjSB8JC6QyjEEGQpeKYwkk0nwekx5nF8D3ZOAliufBMugyQ00KRJ3Zn0gYo84iYCXuEU168FZVqJnq8k0+PwCll8wLOQDwLbkZQIPRgs80FMLdMuJ5xxdZZc0QBZQgGgvmGEnQbYRGphEAoGQjpggQFw0ZBDEcw00mM+WBr6AjgPBQECCqdmWIUMwMt1zb9yBkTvj9YFNyHTKh3nQnDCBDQGcjwhKaiLdiXZzAKxWG7EXUqHKgFKUmh2P9ZiC6xZqZKM662z4oJv4wMf+MrPSAfmDGp6wiRkMhjEh8wg9eRkU6QXdshAHv1uoULB6BEUThX/Ai3Pp02OKMqKTMa9sDyic6mXYEim7IjRZA4cooSahrryRikgY5WgSSGfmowa0J0YTw8D6mqIAwNAdzBrT8MzEh0wQwWDDB0CgAiA0djFRsxcdMSpDPQgLHwGKAaAlyDdg9SAIBpdOaGu+BhWGpVI5TOoYswowmvhGYySA8JtjH/+5LE8gPaAgz8D2zDgyVBn4HtmHDVI1WYn537jzdz6DaatWSbEI5rCyUy7fQronSh6cjS90yiV8b6b5yVhckUpJ7k14xxHtyuK8cWRpM25NbsbmJFb82stVBUUkoX1vSKNNS9MRZQ6ku2/MV8o2QxMq9lHcIbqdbUWDWTX07lRTxuEZ5lNr2ytBWSPK1xhBsDTaSwgwOALzDXHiNssKUwlwEAxFGhZLEwkBMLSzJiwwS4CEwQHQOGVmA0KMJG366+c9etSsN7viyV1bNMFqw849YKgo6j93HdDO8CPurNejtM6zW+TgHeUxyoVNOfklSXJKV9RBGHUmJxlnu2wjVYxKotzfxyZtSxZT1FEET6OiYVmmJszsjs5VEKVb5SLGsxE+S36eaYV2ytJvJZWG0XdEtyt1TMrdfJuUayyk4gDMsq54kqNrSiqxNGIEZSMA4CwwxTJTahFuMIkCsx4EDg9SC0jWNIBERm7sHghg5oaAAIHITTPwyDwsMEGkSjHwkVEGoYqMcupNYovs2mlmYdS7wijKNP3USvSoZYbbcw5BV1//uSxOuD2TIE/i9tI1rlPmAB7ZhxSOxsNhxle2PIGTRzu5UylhRN9OnN5jmEEGqfpyVmHSQgbbpGT5OIOkcrsZrj2XKdlyTnUTdPaEhVRdP3enlV2SlWpQmlqikW1VFT6+UQd9KJHvhjJ0p0SLoFwfA0kHj0bmFHEdw1cPF1SCRISW6VUwREowG5sxIYgEByKgQn6vJXBiOLJKF5guN40XINAYSGFvRwAQcHEhSc58U5EaSFnJtWl5OrrOWWITLXmiieuUCxcpFk4HkZIfzfBR6OnA6wCpMoWTd7k5vZ+oDLTliVQYRnXJrovJJF60avGei8wsI9/suYjGHwc7OSmT4kpGIJUWi8NAepotTnGIviSR1JPZ6cLJlUcdKWRRiUT294UzY9Metn7wVc7KEMzlPMMfhptb1u2pPtbtzlbc9A4pQwWwZjEUPnOGQYgwxAPzHYMAwRL1A4GmhC6ZiIRjWomJBOYNEI0rR4DAQIGFALgJDT23MugYi0OSpiCDKolNze3XQKsRWZipgoURmFiKRqCiJ5vF4QkyRsWmMDjDovnP/7ksTwghf6Cv4PbMNLCUFgZdSZ8fv5Zk6jrt/XcjLkaOF4btlsgkownpFaU1kEi8KMo2g8kIWlItvkLz3FmcWTWn5p8l7M1WEQuoZcusyyq9c667JjM2oCch80aU2j+PLihjoV0S7pMF14UoI0apO2fmRVpI+BEREtsUyUYyo+bHOFYTkkRkDV6gcv9moSpmrs5khgPgDmGgPQbaAc5hHAJApDEgQAgKUBisETQZpUebOHglXDlFIVEwHC8PWLsPbTnDVxGdKpQyENw4hfVXfYlxCXJ8soqUMneTwqKQazZuDDDyykNgs8qINPTe8lD88GvaVRTwm7QISM9sMTpzNIWDyRDJGKQIlJrLg5bkeklpZSsRKsegkqZeoouuT1ZVzSEXY48ynwvoFNFAVNXKuZLnJUxSUKtzL+V8svJYpKJw4y9pR+0HCzT8Pfdlwv6ykpempQAwEEkwa6o38ZcwODoRgWjoSACl6YSjiFA1MDBUEiKMAhPgVlypw4Wo3NBTCc0uxHYwQTTQx0hZQHWnPHm1hOdIlzqzC6rRcwYgjTQrP/+5LE9gPbvgr6D3EjSvrAn8HtmHELtKXZA01pxhYIKqIYU6aKBmBaaOWeND/Eu6eJFWakia8PqE415WGzLcx0oxuzGx78+fOMrDRCONMa9O7m810VZRWy1F87Nl+t+ptG1h0MgY2yUxweTCiR+Y1/Mlmk1Htkm+04xzpO8lVXZSsgtUkMWRMD4GEwuT6DWpGZMH8DwxwJBQEglEg405qMgNjP7geNjCDsSI2uCgiZAFRWYsJZ2MTk0gYzGW/NVaJRdd6K3JM3F+zWhKMUkTFLsEVO36gi9kPSerCjrk1EeIdcsqVRMJOWlkdT1k0eQqyTX7a6cmxHGLSS9ocFGa1BNLWVS7yeBxQ+iyzy8JYu2xCKi80KpZ9yXhkLwumtFtFUayTZa4aeYYZnJaNRXIx2rbUXkxTEceupDwXWvCI4pHpCNMgtiPxKGI4IVmjJRRphWSFiEUcnxK9ykDADATTDLCHNpMFQIEXHnKB6RIcDO+lC44wQYvUGBRZteReATmHCAfRo9i63ZNp0IR1L7qrUYw7SJ2JvXNI48iNoJIxHqIrR//uSxO4DGBH5AE6kz8tSQZ+B7aRoHs9/mvibWIJ9OCSjB+snm6735QbvJpclOzucYnVr15KuzCHi133L41a9IU4wUyUamnyq3uooE5ooYr4wVam1JVZ0tQViOpQTMec0Xx3rGY3FvVySoUg2UIrlkF2tfO3XW61Qai+Tdd8HtyXYb2HnO5XaUczr1sXFxlFQTDBpQJNC0cYwRQQTCgov+xQiADijMzAhBpYmkCCIOFmsEoIZaBy5KRqm14qpm11FspjGGEqXvzIh2BQ6qJtdQLjDkkCkjqJRGR69JGwheWFZweQSTYPk09mxkcZNyVQrWo5aQgSiu1LE0jNt7NqoYixQhbJcKqRbg03FvGWknIDeQ7D5G4n8rKY6TUlMOViR6KE2pzO+4Ub8YJpoKbxFVzJ2sqlClJzjCLC80a67LkC7R+bcm3tIWpRx+vZadJiM04tTeT4kliyxdSDUWJI55EVIajCcUDGbkz1ZejEINzFii4K0kqDv4gaBMngKzgqyZgymCzEgoHvQmxhaEEdkwrecimWGTZtdtja64dlELJlrVv/7ksTqA1fqBv4vaSNLVEGfie2kaDVc6mDVPsy1l1dNjJzGUezQh9iGzKPchvVkHJXHKKRfnr0piB0m3dJKur0rWLbTKqTkgLCRiKZKs4tLMkyv3Ob2cxC7SNzBeWyEAzky8NtVJV3CZSMs/TDDVWuEEaXeZacvaDsWxMYZJZpgElUtEWigXZi8cpM4SWlpgfgRGH0KOb6gKRhXABhFYeKlohGBC/s1SQ1og7QoBCiZ4hEk6UOKBLR1t1NLxT2acsVMtwMnf+lFzpNGO1IiQ0hNKrkz1I5GimMPORQEH1VGzSSLIM4rGczdPehM4apleDqlLe2giQm3sGHvLNoKREy+683Sqilu3YtsmUUBBUlRALSWQxSqToAgTCSqljMI0nPt6abp9xGUSFmoC1qbqNowjXQMTe8shuCFBaTT4xeii+JgnjRlaVqNybcoUo0lNFSBxMKmTCDESOc9jkIHkElEQqoKg+YzTMfyIeYiA0CiaYDT16kBohABWWGYTFrxZQtV9EDbME/p/lGPUHrU7kXg+WQE47X0ZMh9cqVHfnR+h7j/+5LE5gPXFgj+DujDg07BX0HtJGmgOZqmqS8dJyIsvoQh+T6pM0vTi8q9IaSxONaEcXjzRmMxc6sE7VOzBhmKh/sJv0TUZSmjtdLcbFhuV8n6oo69xHpbqONMtGNRtDrF0tLJs79VE5UpUJucRpksJdzVltkY2Ia+MzJTuvmxTQqNOecwgFcw3/w3TbEwhEAEB6NxUAx0GM4FQAIhaJUVES6OAKumBDRHPq1iHVElpoLnKpLRZZZbYjro9VlAuhRTRpIycQMqvjFS0ktlG4KMI11IwlIiuqVqloP1plUq3KMNNivqZKMLQrU9CSxOkFJpShhl9WgUi2QVpdzWLLrktJPsvA6IizmI1F/tjWENJRkhucp6XtKbzrS2UnCEKQNtJJwhEwrzmrJyQF02qlztosittWfpyCS8pqykcXifVySCquCkJJMtxUalvxmaN88AAAhkAAwMALzC7IINe8L0wgQEgM1Dgxd1Dw5roBBjIUwj2FppEzSYql9KfmECHWVVMuCCUlF3QnR+5vXgobDwqEINKhfH5476E5Unm2ojfLUa//uSxOYD1cIJAA7ow0svwV+B3aRppGnrFZFiCO6UZUludaSaJnzZTchkhQ3R/NUW1C9DBRPJ4cWVTY6R5pVhA2inWIM6NOaZI5Oz7k8W88kyw2qrGKt3uaTEGPTYjsklNYNs6dvFDTOzRHXlJm4SgRdJlaC8lWLj21FtzUshS6V1BAwg5ATorlLMnrCznNJxOY3VYthDAGAKMIkec0zQ2jBfARDjiNbFSAGYLmDAhniBF+Bg0evxJghWS7Cm2lEDaUaZhD6mp8rMUjsiZheocsuhQlWdlB0EciBWNxha2wUajUZRj5/U00VxpVOW5C02lXxpnaisrGevM7B1J71kTeprI45vUuWsrx6Dvi5a6zIz6OD01ZPUWRJdtDOkl9uKSpfUo1HnIyeS59TRY12r1BTudekxii0ZQye7WpTtnJWm3kIe4h443kzFpvdFK2IXC5pI8pWB5JUAI0AAYGiYVOvMtWSLAcjIGJvtEBQBmDRIBcLwaSBhKAxgAEQ8NSjCNzG6zB8faxa1sLMMGT0Gy0y9KZAVtFOotPDQRUKyRHkAhf/7ksTvglo+DP0vaSNDCcGfxe0kaBiM6IFSwpWJnRK434449BQgIwUYqTSSOG8R0r5ZF5CiWEHOW1JDFcxoQuKIUce5M9yZnRIQiaPOKB+Pk6j0XoJx0iQeITZBr5YIXhp2nIwmMESQPBhBgqaMR0265Z8d5ij7xIh8J80k+mEzVYaGDFwieCVVo1kHwi4EsmSPQZHnVrPDMkuk0G2GCYOGLjannBSGHQFg4CmCv0tgwTE0wWCgwFE4SBQhBxA6B7xQD1t8r7R3m7zTtnf8OkLc4wxlIMBMBGJJ6nnNri0J6KpC1iC45WCAbk6Lsgs2I4DvRgoMiqClzkKY4RwaBIzhAI21Iopif9ASplRPyRlUiMQuGUGKV6Avg5RV8MHih3ZnMkscRjPhB2INeTLiGgH0Y7qQgqpLh1CHKyLVKWHiLI4OjACGgHAXmFEJIawARpg4AAD1aNDN07j0UJrxwkJlMOBVsVVTSMibWLQTSkYQ/XslF0k5zeQK7Aqw2wqgtyrjxK4s8mhMgVUWPDrBO6rim8sKmi0WGJyL3ImLqtkeGDP/+5LE64JaOgj8zqTPip1A4EXTDekELfPNyKJIek5yipmRpR52ppN1qarMpNIImk0SjCAlmrRjxWTey2/WmUiXd1C3K1WkD2yROa+LV0UIG8fJA4qorpvS8CRvYYosnjSCdIVoI6VuZWaVMI3LNQ3TOoFM97aqLsTZmqwhhVtMpm3NjNuaisegIAgkmGnWHUzNmDwcA0ajYkeiKd3oYCyMvSaAk2jSx5tCahQKHW6iwT3NknIFnKIYv7EnWsq3A/Z1pSGRxeWrr84qy10lbW589CbYw8LoTRxeaLdggEBYbI1UzkKVlD6ysmJGUmTRgjRo5Ix/NkQRXnGVzRRPYSwbtjQkSokTFWlBQoecm7GFp2g1wy2dQObaWZSaSOp3hmoHDsGU1XGTzG3c5tMJJJkDDKZo5Nszq2zYYZXnOEpr2ZaSaeTSRMS6h5owaQNmULS551ibBVizpwTZxuYwgD0xttY+LSUxHCYwIANIZ1aMwmKMECwdFj1RWMKaaqsFQ6JTZNGiBpA3NqD5XiNJJRNfGVtd49md63s28QrNnJ02mOQ2//uSxPWCGjoI/K9lI0tMwZ9B3SRotKIEDNsoWULGWov3Oi3qK+RzlFKVsvUVkvGd88gjBWlpQn2FHwNUlPFrRMkbVoXNKYulNifQuTSSYa2cGW5rS6cJanGC+stNr4TncsjtypuOlW5vb0gHG1i6qXglOEesVlGFIHK+126ivCfe3cCjaB1+K2x3okWxTLrw1dWUG5GIlAcBKYQ4ARpGgDFAWY8ZTyZynMSWAarAqlTUVErrjzRxZdI5eExaDPQzZcozY0wgmdW7hsHLI2+ESglySZailrxAzMuVoGO+leKDTiOnwUX+CUtIcgW+iU2Cae01nKggVOWmZ5k8041bGl5CeQmgZboEniyrNOUQ2Fmyt80E7r27x2cyTjPZeUy0ub7AiKREwsye0VT2o6E6/N0MUejSihG2f4oT8QuNcmtBN5ZnYh7ujg+65FIpZToETmrACQKDE+ozz9JjDUIzABFh6RDEw4MyQ0Z5hyt7iYO6pUBqUXdBBVSy7NxTQoVmECAlJ2ybrGWTEkiXWsV10FfPXy7dRmopL0krz50mfpIhhf/7ksTpg9kCCvwO4SiK6kHfwe0YaM+icMJKIyc0iYmjkyVxJJs+ZX9bU3W/LmpZtrcLruSgj1ltFfIZPQuUZZnoikzrTcljpPd05hBFlyHtLQxq46upJqNpr4/Ja5yPZNNvUpD0lFXF12OnJ1PaZTurlCWvNprOxA9cmQTSpOidODU/TLJiMYvl67k5IoqyMFQ6MPrjOMEwMJglMEJSmNDBo7CMpG4qP9ghYoPgprI+BFCJLxbkpJVeDqXPounetxXkuzspIZOR41qT0TUI6eXybKhMzzVNUpBisaZQqzmp7rYeDUYJSUkinCl1mVbuTMcjFJhhzeyjOK8YsT5MWhTDo3zLlVKIxGkUVkkmsw25aDePnOF5bCQo1eLGI9xlKR6DiKBKq3iN2ROK0rBq5yEzdKNG8J0924vunqRaaig0+xC8gVpZHBJqaFAhI21ZtOatswpIsokpMCUBYwohNTVSBaAQbokVIwtTgozYmBAmY5BGYgRYLENmckgAFAOUKDzUJiJHWPYxeD25ICfHQoiMvNlpzKs/ZldCbFGEJqUyhm7/+5LE7oNZQgz8LukjQyPBX4HcpGmghRMNRSIVwk3K4UiYbXWyC3KCPdL3RongpD0qSLWokjaXYX4ktY65i7XcoqhztxIsVbb1GO6WWhs1IU1sfStYQt6o1ixRbFJt+E6INXUNITDRITYOQJMLGCgoOJXFhqJCvK5uP2gxbcIkhHBZdHJotJkggT524LChxDSihA2myVkiu+n9toULHmSziHEICmHSmHQBGmEgCI5uJL4uGB8YBgIFxMFgAIQAdS3mTAvm+tdRBlplRrNOx4t2c4suoNS0043EX3t+DLTitJJs+h5NPSkVTqzQrCDQV0jflRJEV9WtAHkQnd4HfAUSxiZqLRnDu/ToN0OgwoY91R2NaTjqCYWNw0NRZrwagjIcUiJTHELGMkGMGcvcCJVBoHCDrCVXWA42tDB5O2yJsADvdE8SMBkwWEswZ5wzvYcwNDoKA6i2aVxiUKYcBmNrg9csiKBCGiUJFQTYPEh5QnVkWSUICU01iEmIiFLuYRpJQSIh+E5RKJuSKMzgKyhtVmKZxGiuCUBlhklQomyd7Rcj//uSxOuCWqoM+g9tI0KaQKBV0w35qJIaTaQKIBWwrFZtJZJtvWiNNAitFJPPu8TygqSsIeQn+XJY8qocER2OxEpJzSqjchlCjyDBokSPI4Il4lfWo0E+gSSPsXOa7K9qh9ijYfZxZlZyFpeLf0ZUaIT8i2psF4vVYV0kYnMRTs6ampbBp6aJckUONpSgSi6kiBBALzaS85g0DpjmzB/iSZiaBAkRVicVnggvPSFSY+FYcRCIPdwmiQcljOlVYMpRUWSVy2SBi+vT2K6bTUJVOcUTLUp9PZ3BBIV7I7WpMEJxSqfJdRc2yjTm3Oqg35XstQKksdS1CqzBeXsRkTMkGwrV4yUsqvSk9WXYyalP8SSDS8ZxMPFKKqTmbYIEU7ZvFpIsO5F0kc4NM6ofteMHroEkJjqXlNpPUOwu3FGYMrJq3Ao7FpIpLCRyGNOiynUjTcSW7potGj2KNu6JvqQVAwAGNqin95IGJIBiRBdbgKUmDxpmkEkaQx5C3RAAL60hBImNRiEVWeQSoso20YKQA5ksn79EkUTJIKxJJo1Nk8FSbP/7ksT0A9umCPgO7SNLHMGfgd0kaBNE+rN/s8qq54bUkkSJBEo5BiDEkmqyEKSr4ecDYcrllMSeTKpbk3UHLNohFvKUJH1E4Yfi1SjEkJHoWm48qCzCZMjJKapgGlEscfaaGXidqSLWtioQgm08Wb00klayB3SgoUdKayRMgZU5JRdkkxIEWIvAu2PTBwMfpDSzrmcCQoAs/mfqGCEHyAAxl4GtmslGGEjDlp7CE8a8aKH8PF1Fk0KnQ4vt/k5hndXgeRsygfMk8l5on6gI3bEzix8hBxy601Uo7BRqT0NrVrE4t3SVY9Cg7FTZlFmRK0TY2uom91qXOSs3opSlnUmrF+ssb19rZdlJAuzMwg3G2rjGbc3sUtBpHYqayqejKoFo05iakWy5uCstUvF8OGV/JZvzTYwgkgZamGq+xJ4YieSsM0ghBca7MjimpqyY8lyyqBhTJL9iGtzVEAwVCIxWec8WLww4A8HBLVc9lpG8FyjMfIrlFCISNJtoSrZ0lchvYtt3QlI6WxNeLoTR32CLn05UYnZEkRYUf0cNeoKVdiT/+5LE6ANYMgr8DujDSxtBn4XdJGgSRaojzzQIIJKJXcpeUY+kbKWpKolyRVZ+k6Z9uNPQz6bLmt62qzQVUY6gRlpLoL1KewnBOMF1kGIG1e2dd0E3lSVtEjkJTCj6JD8POLlSJBC0VprI21l27S3YodLNoUtr65HrcoX1JEiJIur1HSnLprMosd11IwlBWNfVsaOok1pwlJgKMXBqPXgzFh0JjtWht1Dl9QZa5N+TkSZt9ScFJbbMGrUUbk+OqnUNd9KSYQKRk1p8ZiGlnmTKVLNyQ2TqLrOVZUL9k1c2mCGR2fQZBO4cyhXm9m8hnWuaq7eIWNIl3z2bKxSS0U46ik7EcFWU18k3PGIZ7njMGmK3YJaTXHdZpqGRktS6rs8r9s60+Ou5qSqOPtBjZ17Mme35t+UGq6GTQ69pFySOycrIqyundrq5aaS12lG6fJHFNCvI+qoATADAOmEEQG9BzmCALJzug3eSA1wq8KzKRjJ08IuoYj7SaKoxfJ3jcyTWrkkXoWMqOZXimUUOUqykVXjRJOaorR69dVR+xR9e4KXJ//uSxOoDWRIE/C7lI0r7wJ/J3CRpObRBCz9wJWUGyxvaevSHW10bKlvZWTxqfQL3rDdqo3RxJOcjGRJqtATaRso7guQ7BUtNS7xcwJV0FzjiTmE0puQFV4Nrzehdis0LmGFZEiNRHKaCaSBuEZvyLSnZkqTLStSCb3romp9NCrCGCtBIjpEszZyMUFLndYxmHUWgbpkEy/KKYCCpiXFHo0yYVBCgrvP7SPIIQE0weF4oA4zLW7DwPrdHFV7JtZW/FNSRDSStoiPXoGFZibSUCHiyYJqLXY0GwbBUUEQWFLTmCaHHWhAZWXlSNA88kxo4zy8LOILbU6l1mvDOwmbJPZknqR89HvSXzIBiui6iqY3tesQZsWC2kBmW6VlPSNvIfobyfRY5NZE/SDlJTJ0r05jKEpApR+H4aeG72pLIcqyS0Whfc2oSo6px9PMmzMalu74hkosAIioFAqYxiwG42PEETASuN7IPMAAFHgPCgTDwHFgC2nzCwZb6vHMRQVtyi0rShFZFo/h+0/kSRhLfPSkFrazCDNRUTZ2CY6jb6NHWVP/7ksTsgBmCCvyu4SNLCT/gGcSZ+cRKjKCiZENIcc4IZ7PEhgtTZcw56Y5nECDTJomyROi7IXiZImxE2Sw2fD7SXyzixqKSMxNH1zH1FRZMmk9WgHWSw6g806Hu8sJDMKWSScqWZyaeiTyKIUaTJDkyKZJ94LjpUSIRPSQ7KO+Zy/qQsHLLvYwWUURE0dQQTtcG1cqiQAQxDPz66GMIgNYRy4AXchyTFEYiVgZyt7CDUaJCotacFXKvrJG5rihG9pqqOBmiGwomydkMhkROjo+ZI1lHo0iUVFVuYTfTimdOkjZKjiii0JSBFSyj4J0biFJGXdhB3XJoKH55RyJxIjCytYpiUUe4G5qChrO5LdZql/DB9T+NqblUjr4kTNClJLLfDLIW1aniRC450CkPPUClJRPTOghJNzXbXcpRyGr15g667zRh0kEsy++xtao/WXswLCgwekM1QOowOBdE5nLcn2BoTCYGgHwIcGhSl4EFaVU2bQqvz9lasWFetB5Coqo2NUhZNSaWbt5SPWgzxVvm20yevG2WF1qUNrYhRKsLLE3/+5LE64AYwgr8DqTPyv/BYBnEmfA1kC0/TcorYo0OrKjU2z7LC8CRJxV1NI3Tw3qEruNzpeR6DSuoYijNNIMLtGG0SSBqkS7JEk15uTUXyRthSbQErXrBY+iUKFEKBli9YMKkZrqN0joktpjBUkkqswUb0jUZOqipq4IYHpo4IBNOL+qq9U6mtNGKy6xWQ9NRdIVpIyRsMcYFgIYpG6eDB8DhtQicVr2KCUQNSpSgIRRSliSr8V2mGl31CkJG2rSDT3qJ43zyJEo6YeBeSMQOHEziziYQp6Gl4FoUzsVEKAoylSk8NGW10Dl5LSxlEzKldk1NkiWj5MXWsU0xmNI7li8MozBsowpPsLE7Kb6jtRminBDaG14oUy6o5raJllaK6O5pXBGsfVlv9tYu06oRyMSp7paotWdNAqkVxfdhsTSdQ5SMoIqe3FVpToNvuutYMMsHNdGnwvXZNa0KWoFC55h8kR00QIGEhHNrj7qHAAFkyl7MceBitQ7HKNPA9VOsaVRbekCc5jWt3vC7AoPr0VL1XmB1V0cWSufuqUhiYxOB//uSxO8DWnoK+g7hI0sSwV+F3CRoMhvg8oGVCybEAUIkKNEH8nqsYJpIGzZo+soJHZBhnWjmVytvQSlIbUQ99eGTUNoo0pJxHUrKkyaqBqDC3eFidiWKoSRNo8sLuags2WWKlFSqBjaTkrDE4NZaKcZjC0ZJPiyhjFnW9WY1WU/PWV9cxBjzjGcqeVklJt1PmqhXYQWqqyw5I4vdxWToKAEhvqRUEI7wEqmm89M12dMFDYtBG25wjVDINZZ407WZMxKRKfCjsQ08DEgQ8GJmBJDS5M0ScjZcmWdqwJHmaaTKiycPQG6RMKbycGiEXutIntqIMQYQdwqQckD10BXTBubnJOvxaje2hAsLc6YMXyEagz3VbLazmqPBiQrBRC6LZI8i7QuLmt5w/RKRv6L1L8wc4TldD0UhK/jpWiAMFgfMbW6PnyhMQwKDBLBmKqSOw6DDpceBSEuvWXvwrRSFGAobJK6FtWHgqnNJglExGOlUUAPNBQBwbgRAiMikjBBIdwPa0Q0EyJCQbGYlGGzJPQiMkSCUDNa22083EhbkzM6KCP/7ksTpAhoaBPxOsS3Kazrg5bMOOaoTsZUJSoqWUIAodD50TDQIxRkhQ23ciSdL6mtIjIYxA0ZUaMkQ2Qqtg0G3+GIRx1FVChssuH0EUZlgVEB1GWJemJ0Unj40aZTWFQXRp/qHmWZGUQmlMYC5CYVPCyrBHixQxJ6hXBsiLlR8jPMI2XIyx6cx62JWTSIVikFwtg+8UJCDCySiNBh+Tp0qIgYJ6cD3YtiDXgEkkbLxwl18Yak9cpNJdGYWkVQxBMyPqZmGlMeKSMIxQIHXqiCFED6PKAjsLRPMgWkYQjutAupIRXOQIFnFaHFSfVMhQL7xJNNAgBWvSnpFaCz3KclpdVRYNZKyiB1/HSTNJByd7llG2SRPNK7J0ZhBTJlFyJZI9a9bnnAE4Dv84SU5xJQ88cVH0KyXYThZrHKTOYk5hiHoJHikFAzIpJilwiCqOxR8cfhgeDegahWFQAVCABwpt9QBcDqOQG7jIzCwjMAA92F/oMoE7Ftb9PepJqqpPlR1KMWf4HomkZAEkKIReitKPpIxFEBlOYTqzyQ89PuciSH/+5DE+YPddgr2LukjSwBBX4HcmGlvgG6ykENUOdG3SPKGmHk+gQwiUaCRUmn7al0EpHh0UVjiRpNYM6LIHECAym2SNlgNYEmR0xgnlkPXcshRC1m3SZiVA2rymTCjkBh7iz+iCoNJZ59y8Ki0rJY1p7jmg6J/11hKZdF4mhHSHnkaASgkCwdKoM/QpIeSNjJPYs0EQ0wJBgw6ak5SKAwkAlBZ3a1IZGQKDCVAziKFAedib4VtFLKaqMT9uK6BAaBZCiRsMEJdgmmsFWGCLQ9MR0WCmlx4UjxonbIU1YkKNCdbEM5wRz9liUCkCxtx0xGEWMXRdV/QlxUXQbw5bSNrrviXXKyXFl5NQZXMQsoVNz7QPMrvtQs3cECdpfUWYgwkO4u2ULzXmojyVqtJKkZkLokojDC6E40FRLA0PNaMG2NWQoEYfZR3B15A4IZnHDp69cg3zKnuq0yrqNqBpVY22qRMkRNBJRCRGzK0NzVIKlfGJgAfSAJQJFPyaXQ4FgO08EMEwRg27uite4VblS75bdF2bryZLlqK7FNmPzI+J9r/+5LE6YNY6g78LiTPA2fBnwHdJGjMraOiT0Ky3ZtYt4L1KfN3EE9zUFFSjc5Ul7u5R+l4TVjTKHxFdoN4eTjsT3NleHlH+q7UV02zKj7aO/OSp4KPj3MYXbsnZyzN9ailty+8hRsyg6Gt2TlXhRzR3QSjoJNU3GqjGPuNcxBOLu2JCCqc05gIyFgFmFrMeIS5gYDLDvRlEAUJFgKrJokomp05Eh81iBEwy1qBulK2KhylpoiRFBMjGyATI3MgKoijxSiiwce3MwhJBDA6yZQWhJfOW1qNuB5GhbkiXRFOimntjgpVRSgsh1yNHIwouw98UaJLFYSYk0WSaVUlUiakc2LYmdcgihYrymlzmSnKak/Bshb8TyBJ4meqUVVFAlFC0Fi1QaL9OMF4rzN+mCAgSNTxRXCVY2trXxEsqm6KSCcyyKA60QIjC8mlEClrMr6fIEaxpJNcqjX2BlBAICzCdAONnkwKAlyvtKYYhxkxYEq9UCqemstTrlMgfpCUQxqbVKFooETjzYQpXFE0IWOTUEhUvEoiFABzwZhESLA4/DpI//uSxN8CVGIFAA48yItLQd9ZzCRgQQmWcqcQhQ7AVoXFmFVFmgoTxQtt1I8zOkl2k5qt2zM3ia8Ci17JAef21nXbMpW1W9VVB0MXHkjszOomUHRHkc8kicZQNNnyYSjhSnJoYdbqPZNrNsIfL6sQKYTqGzLIpIEUUno0M2miF0aVokdKDqqK7dY0hNm7NnUGpuhHWN1ha5sIV0JRAwDAAhFE08Y+uAR4VMVh6QuGkG3URBdUask5vF1u4tSrzqMrTY1zUhRfp8mDNi80g40t8bT0hx0F0juny8hLCYSKIYhpSjEk9zuhEJuz2zMtQXUHGFwKOLRL5Ai5vKSPxOGtJN4ydpJM1SCEMRnGO68dJSikq+PpkHZps+qhhkpshSkneomU98X0hxdYniSYGmc1NU05WWySVTibq7lfSduWaii5PX8t7Ojk3a33clFqACYAwAhhWl5waQBgqAKdDrwdD43FKx+SucScygp16VEb3ImCvYzX6wrWtXPvYO6wG6xqBdWxwdWSI3Dqh5xKPiApYM1R+mf9SiUxYqcN5RROEZ91iv/7ksTqghouCPxOGS8KuMGf0a4YMDjSk7yBxGtgSrI1ap35judRTdDjXFdF2upXqMJ2H1pMOnDqX+2rFXoT1Fp+uUNsoeUabvkTd7Ma46rxdLeMuqj5SYKkOzNzxIdOP8ePrHso/FeyhamtQ/PGr25YqWrWlq/0N4pq1Z8uP3EUGFrD4YPULSxu4kV0nr0Ty15fx087Auo0tPmVzqy61hURgIEQMy8YEBLtR2a6ZULWKhFGb7yZzTa45OQ7RFn9XnzJbKhOzLRJAUGL5+phPfDix9OZDUh0JiCIPrGMxs4234NQXJE3KX7NQkp4KlHUUaISTE1OEIKrLOOJQckpkmstnungwpF/qLh6KLezaZycrLlbcUl9Yi7p2+qMbr00kbOFHIoYPSQKfW39R7Jo0eXFNZE5iel3zibG4RZGZTuHi1nLc5wjeh4v46SRTNUwMCM2yzkgOgcIqSUtmn/CgQqYhcFGPRFoM23J16GI89tbtqTQisuqycNQZ1KBrSBgSRbhychRsEB9sq9rtoYnDrGWR+EJnzpKhP2wRRkPGdEo2Sr/+5LE8QJcAgr4ruGDSrTBX8HMGGkmVUKIjUQNUKmTTa3QlTS8tgyT6wbPNL4fXLY5noxaV0wGRNOIrwgRdu12yIhKXjdroulHH4RTdB+F/JsrNZCTpWVtC4VqNmDXUZsmHiZGaHzrEF5K1FZjFBk+wwiIW1Cu+R8wZxRVUgs4sdJvJgQG2F2YkTC+qMmkCM2R2w0sjeLJKDmJFIfYIoYJFY34k8GDFGAEBMXTeWaxX9beaITija2wrSzbO72ImVGmpnV1UQeIyBuem4ml3qtELJIQKhg2hWKsSXiTUugK5C5qKOqaE2q1SsE6+SDknICdqEVBQUamSSZX1tWU1IfY/VEeQRsK2cQxLEyGasWoqopqym7UktUYOTxhjTojhFqEZmJqtQQtL1bclWyMkWllzSbQDMsRNssoWqSlPESSJ7xMWJJSmavwQLlC01pzkbZqpnlUzSiAhaZTYLtEjCk4smVqcAUAZBBjZZUCnxjlBYLnucvhtHplMsGwxH3BKbnLPqmzeajRmkmjrJMiKwJe1OBdJkmtzbMsBA2j5G7UBhMo//uSxPCD2sYM+A31IYMvwd9BzCRouuRMKKN6jjyFSQqg0xJt6qHKrFW2FCLimotl5WyWtk1hgY+b9Y3wWZeqtT0EtWmrFo61az0VM3K1GIMeEJW+WsSSYjJ8y6qznsrNzjNQ6aXZoqvcZsqlttISsPORmyiu1YqKKt7BpBOOui9KKzZu7ybpQgsnso0g3DKBqSI6hQo3gBKF1TDK2OqjkMCS6XevPO2aHW6ObS09fTm0mq9zPcqs14rXB0VKOI9RowNGBZoLFcaUVXRqI7fwHJ1BEiPLT0sWRK4bVMx6m+b9tHhuJlC/Eci7cJ21OCzWo5womkVEe1RhbYzRpMlpRzoE0xxVsgP2Q706EEKlSVWBSeWnd5cAZZhcQYQ77WJzEjTgNA2g/MopCiTyZpAw0zAUuzswVOByTp5WXVMYRJVCZEitW1JbF8qzD6NSizTK1JAODCBpNJRM9mAYoaWGfJDhEJ2KRqMTSwy+lg1aSA+uMBso9ARTZTa1nTMmILPYggHESiyMKoDBqQpCg+dPk6hG1NRCRZKVTMf6TH8YQwdM9P/7ksTmA1gmBvwuaSFLC8HficSaeIpNAuommnTTazLDGmFrQrKFESJi5ELRVSajJLibE7dF5lqbDKvXRZ8meX3zJauKiSjTC5CSQJ5KptQYlOmCojUWbZKWaRRw2qcXQj7oRKYwNId0xRDyRofQoVCFSLsMRkgI9uOoGSqxGhqT+90UqTJ4ymK0Ka4qScfWg8WiuxaEkpebcg9D4E/Z3rAX/cCvhbSFkpUEYS9EqpsYGp+mKtRAPFp7WnEElrCemsBNZAkFE4BKJIUcWL0hBDNcZ8kKNNIUiEFo0IwEtGRKmGXLNqHUppkCK1NttkiRk8y4mZVigZPnXJH0fMKrJtN0nA4yjRWRk6aq1TafCclU3QOLqf0zUULZk/a0UcWl4LVKZRcpM1JxEozaGIXJGjS2rsWrA0hUIb5C0cW3EowPtpwexhPZ8gxpJa1GLx6yiGZHBqcWpr0UbRF2GInS0SgrXbmqLdGFX59B8GALXojfusydVP1i7xRTaYAnRp0pqNQPBY4c9yipIC6ezhKtSvmoE26kTI9NyipdqexYrJmbWnL/+5LE6oNZogj6LXEhCyTB30GzJfhEuzCkb7hFCVbpBsYLfILxlk2C8fKTLsRq2xJXZqJUNRPoZTgqzCNa9df/GppW5tHuQhibpJUfYnG3oV7yE17dJiDT9xYo2QbGHetTK85otmvq7UHYo+O+SB2WbFN8nphRAnrME9qCXv1VroJr4TpvrFkNlYoZKoWSSYYDL/Sy6wYGkealjCrO7Ltxx+Gz6g7eGbXi61ySbSjeNVCUrSsngRkKzZoCd6E3qap+iJwjgT2rIdZQJj2VQS6ZOJyY7xgGEIoj9PsUC6kgjbnzDoIH5YlTkUSisocJjSQaD8tFyQMSJucjJdQhV0YcYrn49YJLdE7oQTMRRPTUqiddSGVIS8wXvfGk1rJpNNZRbp4cuE2q2zGNnlm1HfcX9k35ra57zrwqvd0ZfSP7nMPJVQE003I3YkSDNjEx9Bw5G72qd5JKk5LqGQ3VEca1Bc8PYRomr1bSI5I2mQvjkpFnjgJSA2yTCI+J4tWLQQ4SpGGkZWnmtgtVGQ6WIkr1zikZhFMOixZei1nKjELYi2sB//uSxOWCFyYK/A2ZLYrIQKBltJm5GSRktFPmNhhppijDGxGrc+yjmTAz3wXnlog/Cr6bnLzM+LOI07tRHyg76jKnZ4jxHrK6saih3tEsYNrrMpVIEFfZIUaQArSgAIBpgulG6T+YBAjIW7VX+TDVgEYIU8mW2aQvDXb2fbEtOcCVgoq3jK+dKRWn8rn6fSczBJJOo1OrherSHqk/FC1J+GXVqH0Yg9CAYDhQo80QuKgRLVwwGJGHN48NEsTRfH0QS6pJwDSc6anZN8+K5TSLH1a9QVYTFG8wqEtJAZGTdDkiNVYXHq6TGjNkM3LD49pzJOta+l0pOPl46yP8Ck9s2iXRPn5JpCtPJTN1ufqDw4dUHZDODwfETZufD2vPSsfsGa2MnRGiAenV2jUpnVTqykfuTnK1lwu7GoVwz/Fo7iWn7AloZabbQjk5ho1BAcLcebxIlaQ3zs7jTXmVAACmrqRa6YCPBMOq6Hb/Mn8iU1CXpqZ40mdNhhcm0CptLsGJCWy0+rj9/3kJ5z/xt+G8UK11rjAyLs3MNdGqik5zVVrl5f/7ksT2ABRxow2spM3kB0FemcexubElvDtK6YHXWrl1qVxe0WcMQjRSsLPpAi5IQeMqiNpk32c08nU9R75S/SKT74Ordnqyi7pHJKshJkl9jUPr7pfOmSNOJRbTnK2SWOpaSBXrNpOD4+xk9K0NycXrN2aP4p+zvmUaa/hmx6iSowp1mkGGVedzIwOB7iW5RtPdsKyX5C0nroB1LcKy9z9LhmyTnzKCqCetPqq3UJTInLCyibQ24WFKj1iIE0iI6uGIRIA+wGnY8ka5AbVXMjrzZYgbPmFE4CBAbLk0Q8gpQG2A+8ViqRP3EjC5gyq/Bx4MDxdCumQEJA5FKplotuIYC0QEZODBZOALEsmiY5iOCNGGi6KbU4rhYRnlaP+ZxbGXqKisdXPIllXmYahWXatYlW1DS4yygYHUYneSHGEOGVBKjasbI9QHxIRk5MicXOpCp84jbc+i1iCqzAkH2TcknSJNIUwzFEJYEeoVy0BlBNNbC83WR2bRytdpCiusnaPETeqH0D0cWU4PQPRMKoE2CZDBaTTzQq46WfUJ/zLmiyf/+5LE6YIWigsDLbDRy33BXsHGJXEpOHKdkVYIovJXLIIrRcFGFTLaTFEd5NeTFsZLW1ThZJZRpqOKLQPkC3iTLMO1BpREbgVWmbXWfOkU5SkhE0mDNLdmDUEPWkPvSh2UK82W3PtAeTEBApS0CqhcmVdBLyatlZ6qhnU35iJCg9xlZlaSrBGKcHW2ESyqDJs2tMmOntfA01WqYx2s4oGBICvdFT5QC4hfDI9i5MgQsKEKHZiKbI0uWnApEjynPO8WafqCmkK6qyhPBI0cyCxFHFEOcaTbu8RxqZEvyFPksUWIJFZTkqZWe+1YpIyUn6LCyXYIp4PoIm3Yv5kS7FnTUFDtrWzNomJBQjJZW8ke9uLEUCN6modWi9rrdemZv7fdjdWPM3tQZoo4iYMkLK7Mk3ETa2nCS0mTiJycjeEhZUhlZQ6iYMFn7ElJVk4KtrodMTKTQJ0jIp7bVKkMw6oALwQ+YMbH4CKNEjsVohYjzh4SSe5N1L0zGJrx/LqKzxe2xGpaAhJU3GxO8aYcjQClEQsJl4iMnOidCuQNkxceQJAe//uSxOYD2GYK+g2xIwsUwV9BriQJaSjj7PsFkQg0BJjgg1PFi2KXbmQUdCUrMOaCthSFEg7podPsccFo7diGStKRhKT6CZJ8qKnwQxKglrbQCDjnSmXSZRZ0CBSQKjcYtjQ6Za3RWmKKIQiiUckWwkpikjpEopWPR6zP41IYLRHoLQht5xSZgqOcNZItatJHzJg7TXSJRUgojPDtpA9poYhHAODrTAsXXHCzysBrEZg8iko0MVFaaKKNfbYMqKjTCRNSFxc0RzaTEJfRNYpIEbMVUn0KiiNRrFFpIWmzhKWgQJk8OaxfxI5SojmYx7RFFzcaKtC3dM03S8nr/DMeKcNMCkqVRkxIdQuxWGwQXF7SyJ7TNusqyn0poFBE4siF1ll0ZhODBVGJrTQMvIy8kc17dNmipCswMEacYlItKks1HqJkGr6c6jBwf/F0lVVhWiJZKkRpWK0yY0ty2HW4kiaSYCAWY60ZWsDImIR4CQioDZ412uWWfhjHHcmOIUYKN4izJtAwllJ4dqmg9zyrFuxHMCiSrPtAxM2sOMB9CEiAPv/7ksToAlhmCvytpM/DMsFfRbYkWReixCzif9loSkXSbpEkDiwqmLSeSCBFVy3BkoxxpAayOn0xtpuVybktIBlDMTQaaMEvpSbIU5yRtCEkUaa9UiwxgSh97DHkXihistHqWdzSZSzh43m73TctBapdFG4BjLk8sMJykZsyCkgERokYrQUeiogWla3pvWcpABWA3srzsrUuZ8tr7T5Q6ZTq3I6Ph9GrWI2+TOccWKoTm6y2KS27E23WRYmQsoFHnlY00GmyBCKhCzMGD4JxQMzd0xcjgeMnZLnlrJV9aWkfVPHUjaTjrS7T3jpOgiSMI1YULJkjBxpy0B0qIRMb7JRSbCEj6fcocaUmESbzREpZAJ50szqiBSaxO61SE+zElUtfuIFMD5hALzLQWMkTcSmHWY6eIzgpUIz0BCtI6kKEIXEdTVETaKmVjpA7CHDwiJYpqtli0SUvhhi17XoDBEWpUBuwh2nnRM7lF3V1+WxtwkHxuVXcMLW5qkwxrVYJcMvtdLE/lCWbNNVOGj4qtltchldCGCl3B8NLHQ5n6i3LmaP/+5LE5oPWrgj8DaTCw0jBXwGOJCEXdM+PkNSyy6rPVqnk91qw/w715q8BssfSGaeyyJBocr1h5fXF6tuE0xcn6Wbgc9vMZULRRMfCbEdBqAywZgQm2Qri6n2gtXw7JwasxNjkkyEJzKXKOo4EMtV6i9InhaDItKMzMMmeF1/DYcZhw4ejwo6CMcMhOFFS0+LMWnGLRTLddNIwCnOoNkNVNBXow5l0SNGHERHqFmCdsheIqKwB0kNJohWueOIBUgNNxQRRk0npjloqgywQFyTtzChc085s1mgeNGykl0BGaXkshTI0ESYeP8kJE2BQomWhRUVErExEYVMNajkGRUK2o4cWnMTKKChAKUUiNFukwaSpDMlGAyrtI/MTEE0zxBGxW/jRxNnWzUK0qK14JRCJAmWXXNr2hPgmaFYUISElUdqh0wULaQsRwuRqB8jIWxEY0RqJIVkbCZQmZZKNYuXOkpKskqcTTSaEhghZYaJkfaeTtx4ATqU5EmkkhWoUwEi9OPs3R2ftXrNfXrcac19fdJ0x0yiq4ORJLTMB9LR1QgMW//uSxOkAGPIK/S0w08txQV7Bt6RZilSFQycgcrBSPIw4N1RPUUPuRbuwkCDBEsFkCRmcCNohzqL8cM0as9dVTyYJhaRVTrufFi70iYTAq5ZnSpRlvpkGYw4omoyeYACKnxZEYi+bfsuNn5liFhzBJI+g3RwcugwpUbGGxOLRkMxCQ2kRoC48QE0V3s9YTnoFBsRrrKmiAEpH9IlVNRiXiM5Y5IJi+nSIS18incr4SYfl1UJBIP3YGToxUHjDa4pFyh+PLB3rJUpEmXoRM06M1U4STo5tPQGKEuIapvmNjVEs5PqNOv8XXolJaooPViaxYOiqndUiSQDxxOeFI6NLoEJKD1aykLSpEVsLh8hpzeq545UL6F2I+HSxIuWDw5NDJYW8K5XPTZmquhdOjUnHrZdQ0ykeVLAuLJeqsLXNLl76F1zAtmJUXLSUZFR5YeVUHY7HBUjM1kKypWoABIWpkB2RmgaEnDVLju5G41UlVDXuTNJfprXaTDWGG2G4ml2mfTUGpIIMFcJzttFQIHb1yMeRr0K2B+BgWXZV1Fi+l2lJNv/7ksTdgBCpiw1KGG3DuEDegbSxeSZkKM2iAwIC4PiNuGHw9ZGoDlpUPQSToILCHYGrSYFtDZsvDF17DvdGrLU1xzLDy5T6ayRSyrfUFURh+mSxRp45E03bLWcN8FFpUy9Sl9BGSN10aotM32MWBnOfcKlI+3IIXmQTpZBZInJlsGmopkrpR3fCF93UzAIDgZyYKYAOnTiMXzA5Ayl7TI+yeVNUfwXmCCDiM2pGJLN51oVrOmappxCoSjweaEw0AIHyVALsj4iDYqC4NHDJ0VgqTCThsbSYWFRJ1JnKhqAaIGRQf18VkkBBBywqc9dtrCXW6Kq0hycHEbTuSsaKn0kRHFtP9GTTaQjD50byU8LI0m2oM4gZihogaQtNI7QOJ2HkGrjZyE5+kDMTZBgpaOLzRHVYQJmTVPkT6UeuRPaG3EDLR1CKA9qhMjhBBCDJOXcQ6w2mWaVRQFEURhHAshghEygDEAAEoCqE+YRtzDqaC1HOQ2iCRDoF6ySgreWot2+Dbazfp56pT3oYnkKNNom0Yk5NXh63XNxGEr1dv4hMraj/+5LE6gAX5gj/LSTRy1tBXxW2JFFH7FIRDHoU7zasJo6Ru9QHKh8murKqz7IXRI6neDGKdoMnRy1wimtaWrCNSCchjGU+So8mYXZZRDcorY+NKSN8minYW266rSInEB6ZW4insNURh9Ok1HKpEWGmjD4PRu0CC+y9XDGAU/nSKkOISxqt+AaaWMEp7luIT8NpDwyPky0pNL2VdXjBf4hFg/bJC0lpk6NDiHAG58htDs+WoXTw+PBCFROVImokqoRjA2ZEbFJAiJHSsykSniEugC7chSREJEOISZtEQoajjU9o76QkUVDtESIUEc4h9uBZZpcOo4lijE2pCgaWNmzxtodVeiWmqsaYGoIVInSeYOj2KikfVuAURMgusoR4sOIGg0ujeZYFSOLPGDxoFlTqyoxCVY0qWPuA5JgfVWZRkKO+TSLoYoZjsE2RS46OSFi9h9YSOwZPJsoonCorLTLOAKVSAQ0FkoDiOLTXsqlPUl1yprHWFS9yzaVQs2nONp0vZ9NIncITRsU0aZKDEmdOkKpKKW5lBShioVbznTfFRFof//uSxOWBVMYE/q0kwouLwZ7FtiW4LhhtGJShFtLqNsqshhQwvJI+SoDeck4kpaLaXjovdENx0NXr3rnGIG4rCWbKIHOInlmBy4dG9zU/iCGlrXJpfKIfS39aRvnF5BZdCFIWqkJgPDKkqkVhBhEwuR1GSQs24L+oUnxlxKBbG6pRRFBdIHo0tMqKiO1BeyU4IFAGsr8LRE+5ZjGqJrDtKEszS4pTbJxKFswhOnDsnLNtkKKImVEa0rFzRgF0yRWSARvJ2FDAtiBxsQw00tclxng+u2wOpSaOikSiyEkavTaqSxZn0w0sqSnlqsqbPwgTkBCwsTSaCzB+VCo+sofJWaRrTJzkpspJoEEW7WIjSMQChEh0GCx1ZdlRWQzyixRGmvZtK3GEnUSm3QUpQgQk5tFUSF50y2RjJoihR4UGCZunG1EbNLQtd5FaBzBlM9FAS9NaMUCiFupmjNkpD1CiofP6EAcEMjnx+bKBGxbQdcaMJEqOB/Z6wm04rbyTatHrezx89iYJzkvNUhbk2kKizSBCKiNBNJpZELtkVCJdV90ikP/7ksTnghd2CP7NJNHLTUHfAbYkWFVZM4tmQnKZJVLRZYmosigyxBSFkPXJVF+jlvthVdkTojccWjSpu1mNFSiMn+F2W2CqA3SOosNoN6saXlUdkw30yCivcpmNE2G20DAoZUQT8Y+DT8XtObkDket0lBRGzcv2mqpKy8zMCm2qusriU15nNITxwqam9NFMzalLYh9Qu8OyJbYxIFFAsWDYhL8qjmjU08zFtA0ljLSWo0GTL1WolCSUnmSVhMwndKGYlEkkK+SS9GVRXEyjXLIbIsTJ5RkKSc8/DPMsH1KkbFaEjaVVNZJNZRDjNYKBZlQwdaQkC7JiDGCCFiPcg/SsCFkwUi85HuyJBZGwjKdhFhpVmCKBk5PV1LbgwdKlKmpEgLtGCeK6No40+BXWdjsy4pgWRI8dWNnYLxaRCWVWeyidBC1GsM0StwagsRa9jFqEVqkpWbDjClVEh7FzJj4GJoiMNDwVQjLJLdJmRVpCjiqobKrICpBsRQpCCOBhljrLI1TLJGmnRKTMTRi0ESblXGYqmk8VkdQnSKtXrwEhVeD/+5LE5oFXygr8rOEgAxfBn0GmJFBnrtl5ESpG1OUcwUGoIVEA29BFlE0TJEi6ZC9GjQTVVUK05DdQgaMdar6c2hWXSXuSB1kxsNRTTeq2ygJSQUTZxQuSqyVWaRAqdOuDsiNIuqWWFaFHTCEvNCoPFjUWBYUTI1w3bKM+gbioV1GggQZBdGomx7JkkETYi1qdF1DkESBtSjRkmQ1AckEep/mNbhySzmMlmy4PShYTaZzh+iXo/CYwi4O0QpmJFpajrSiBAfhr6RaFiw0km9AlIuy2RyYAKTzOToDsqxB0m6YagQG6absmtDNYmrE0adIEGrnpbbcotkE8u0Z5PEGKNHljzoJRWofWjR+X6JtGj2B12RE5Vs7SsUKyOVz1CyVyR/abPwmn6Q6Sr7JxXpwK32DySG2LNqyQSbLssnmUZxtWBM1OUjqDUKBCdtWM05ubezF+JITbWLiNGXpFaACMyokPAh4RVlUBvxA0ReKafqK4LVKO4r3xillaVySyxSyYnBlQbPoCdjgJky1oZuJC1EQQ9AdaeoaZyTvmkjLPfJxR//uSxOqCWeYO+AftIAMHwV9VkyUwiGvkk1uyirGnruzlooKFkaoTFhSzofn+DvpVxbQVJdOafrUYSVRcEzYTdPKFGJyui5NKG0USmrFwfVoYt7Y4ya3CiqvdmrSYFiUt5sd2z1k6jbs5UzKaCJrN0zMt+ajTr8EWg1SDuWcDIeBUkWWLcRD47PiCRzocH7FqhVWFNbcr53+iMeaOLslOM7YK6ommqxSbkBdc5GkyUrloaL1D6AbrXydY2cLB+clclNj4tKKI5q+IaZwqDzApBEKOFgacIwI111YDRwjjqyiEYMi8UIno+mqzsRfDwnbSUHV2lgQTpEbRJqOFBCzSBRcogVXXMEjZEnJRAmqqmw2oIz4gclWISVxVVtQjFCBgiDCFI9GQWRMkhORn5uZxlgCC8xdJCu2sRRJCeLhUY1tW6lahpUSEM7FElBnUxAMrE5cVSoCwoDKzEUlVEAAElVfqkpGDuk2E2p6VZJBUlpx7MloqvMusd7z08Oc/sWiYQTCAIsbYHDjptKh5VAMgIJoESYEk56AKATSiT9BJk+lAQP/7ksToghWmAwDMJMnLdcFe1MMnwcJ3vkhwhwoQkEaaCoTKEoEB4yRJ4hBZ6DCgM8/Zs8FTM0Qacimhk1DWEZyWoMD3FBdxLbKayF+pRxd2wRIlGj9RnSJJU2o6Ez5DiKTh3eYhtqRWcsnSHHIxJtSEzSROhGEK8ylGYrKeaBcnbxztZZiNpKTew1yq05mvBCv+pTBFEwO9MPOAuib5Sd+6bvSvBA53GmdxvRPU2SJyQyEYIzArQKErMQ9MYc5YPU3otgJnYohgSQOIxLkzKAhLyFlCpJqkuqG4RJwqxuFuxhMIjnLRkiKA+aTkdKRKRhhEiah5AVSOhFd45WrLRrbMm24FbEcUf51A1obEWRnCZdaoDpImgpSCUM96cyBlL6TY8tvapd78FQZtQUpE6HY3OrLeNkx9LjUco0vOA240sLiAaFYpNLhgMBFAsjaTCgyjaOOlhZsVvYBENiMgRCEbGRidCIfjS8atuOieDQ9K5VgqwIh+0cL7ojpW+U7lw2W4+fohLQ0O7b62iAUw+xk4pQ7TF8uVeEIrHGojWNCSurH/+5LE6YAX2gr6pJk3mry/oGRkmqE7qJaZi3R8P164Sz9awasHTexvmCzFb1yKUlhYMz8aSywbi9GcwGxu6lKqcfpjVHhWdOb3QmjAHCxoChpx4NID4WBshJSRAqKSZgpGKMlmKRAU5YVLTEaJGdORLqEhLEuhDsZUaIiANMEALWPnwohOFZclFUw+dRBsTooikRrnEbI0jIRkydLv0RKSN0LWTtVEFlYeRBdQjFajaMy9vGFVCkVH0WexgYeTCaIrLePkom+VTFMyNxKR/K4ss4iURiYs+Dwuu+paWomkmbZyzVikwM15yUHnOmVEba/KMpsWcpHGSeTyJDDS2Im1piI1AgTPTTcprogkPaozFNQo/17MOT5ZK+5H6BnlKkbtyU4ScNcxhaRFC0mnLpLSoND0QU1IWTmYhkSZ5mFyjTsVemXVbTGEUixkxTiWLJAKQfsySkdh0XdMecWImES82BS0IhtssuGTTUFqEMVHqrHGz7hKgUTQHiEZYQqlIEdhUnxhZGKyNql0lTh3JjKMyVUYRmmiVePIw8OvT7kcVzpd//uSxPkB3bIO9ASxN8KbwR+UYxigACCjDCGoXEk60pLFKyh0UzdchVGhUtRX1ETTA5NmGlK5W4lTOpi89ZKsXGcZDXF8kEtAWCCwPDZxY750prmlxZXGloFr0LpaZiW8ycKiedOIkM4VHhsyvxxJCZcUkiGVFzR4nmr6RIWFi1RVBKq6Ma05aSrkFBbfdbNKJ62SFW7lErrh1AcJ7Q+XmvyRZDAmWHYI1BGQSQpIEEN0LWhgUQMI3yGaxzEScrNNGiiH1ijiRlBKo5MnpsyuU5w0u9/ZTWixAaQlaOzkNK4mu0gRjbDTMGT5ggElwD5wuXt+sEqjJhLYcT68qoxFc2LR2ROcQ6ZFbQuig2XSDyd2SyIF9eurBYgNNu3JFUTa+zEqnTnibaJReiBpkieICjMjGE6FNibDnanTU0Tai1LRKNWs0gfBQtIQtNxKpvC6qOBAkm6Bm4YiRIhSQossgJLvPru7hiZhql7cPyMavirCLV5G7eekooRUgbxxRJQnaDnKgwEWZmjptM+XR5RmaJPV0TROLqRZVSJFCJUqjQAo2P/7kMT1A9veDPYEpZPDE0FfAJGkiSxc/EDTkFguuUojVQzVLkJC3yVCsYbHT7g8qSLspsk1dDMsP3AuQnDbmLRGKnOw0MbtWFnmHVU+jnTiiIxAGPRPAO1CulUHG2mk2ORPkq1zSzYNtzT1JKq5PQPEXOlFos5G9989KNDkAbLUne+KaxBolHLoxmOgyCADQqEUaKaTsQNSP6INkkjUN055GRIPAibo1zdMbfhbSJ/J7tgUNiAMaQkkmkMQ3oXB6JZegklAxIwTsrPTIElvkrfsBUSoNQhdNUTvJGLLKtMMM6qhXRk8TsyQ5oXDSNppwLoUApPn6RsktiPkE6RoiRRhNSRMdMORTnFIuk46jXXhFYQyiwdw65aEE7bPJ1LLgNwWZk3UoKMzezT5sFD6qJLpddNTLVmosTspRMnouQttKYbmRmys4rzaiYXJprE6KGoGXkwebPpxViNqZNymNGERUKmRoUH+USOELZkqNCeI2nlTRIfB3Z9dU6KN7MJlriGXvvGcpKMNxIrGbX0X4qLXK1h6lX6VDw6Vn50c0JWq+v/7ksTpABfCDPzEpNXDNUFfWJYmYayY8SlCzFyNCUicqQnykhGpEXOp3WyUhyYnS64njTxbD9qmmxGG03FBXQjJ8RiWYgE6I0ZJDUS5VEPPxERCKjrjTCBEhYI0SwmJNWIRATIS0iBEyi1CzIXLlBXsyQ5Nch1pATCohOCCY22gB1RAYSHlcXESIsXDxOXVF2CY4ZRniAS8yXcblUy6yEH37KQ2bkqTnT53pvIgTeE0logRYMW2IC1MvBhyEJpdMGA2Ci5StKWJBKiLjwIMAJAYQTA7MKtnFLY1AF6RJ4RUzMBkblkUeY/QSJ3EG6IKNvNk0jQtqEpyZgGgEy5jxSbrWkXQQ1oF28cjbmfq8kglAk1tZjH4x8n4cMwmPY4JR4g1RJEPok9fqaqXxc/dqIfH6hk1I3iaqKMU1k1orM0hVNwkQKMpymcjy9xlrZXEoIiqNTTM7V1GsiRsKMmC7dUQIptswVtaBSXIK1MijqBKuoggSQc0l76x06yIE2IqmagfRswbVXJUbjIkGTgoLIiw8qiweYsXJPuyYGacGAaYosP/+5LE6YNbkgz2BLEzwtDB34RjJvhpBxJLnEkDh60gpJhrpI2tqQXItwg3wGvjLTME2id9CVrhQ4KAwoPKNah1CixkV6m0iSr2y6GonEkEKJ5GrLZQYgXFa7THNyNLqTmKMktJzoPkozE2gSYFaRYnJlb3TIgpkbT9qqKOUh9IFiPTqhNdsSTPqTJWG5RPuY1NRUQEEM20oJrdoawec5aIodowN4JMbA7E5UAALCKBtInHhQxabYnHTjCRCOt5OmRaE0SxwQH0MOhCM1qRyEDY0eJEtqUiky6Ad2ZrwXLLoURZkSkhRCSitCrN3ID0GGGVROiNSbaETDptJqMs7GV0jYRBFAgQ8mBLVxtDBR0h1UnVRORkLKqJSBjXoy58nIJvRwJVmyNUiwminRGYWVeNUQmSBVZ7FHUJ9d6JytH1MEglHGFE2zo4iUbIIeTkDAiJgyhI9FLlqUWRA6qiF8WqAlZEzCB6NHM5F7cXp4UlYeu0zqMmOGSsKTkRFG0fXLGy1kLFhSachqRjEZdEkLpqihEXKDJki5AsgkYLVzAKqGhh//uSxOeBV+oK+iSZPMszwV8UkyWoUqdWrD6gSFVEE4rk7mTRICQfVCqUhIlJuCrCxNNtvIoqi1GZGe1hmCN41A/iBNyhO0wURo11alZIueQ38RkmEDKus6+xiSUsK8wgiWVQHoQSCya5mUkKpaGMqSqJApG2Yimaa7TrIokzckKZY1nk+5sJo3mR6mQqSo5ImTSTWK1NEo1NAAACwG7TnFycYtJNSOkKGmYCtEKNatlhlY64qkgRVqBHZC2uXIGLKMmV83wUH5HkxCjHwugFShIqRCgiKE7IkXEenQCA2QOGjzrgqSEImJYeHRLwSB+Ekj6CUGhRnQe+8xh7bmqLPayZl7RckTvRghifKa9JtRRNA0WXSTcZe87UobFBHVyOCIf0ssfhT+li6Z2evUYlrDB2GI4kEc1V51EwkgRvhSk+gguhUQhokjraG3bAugcweRC5qbJhNdTJoZQbkogPAhSyjZNR6RikCJAJMIE9MmlOB5mrKiEinqDEpmgqdNzcCJlcumRIBdRxPM6PTgQkGm5nxASmBgZAVAGiQVigmDiPqP/7ksTngBi+CvqkmTxLD8EfYJMnyayp9JFWiQ6i75ucszvK4wTzhu6JWHPtLQ4OggfBhuILODmqI4QKoHPs6+ipE1BIaRs+yBzTJA0PpyTsgefIGDA3SRCQj3+TiwYzdIw6h2ccDHixwlCkEwQoHJDSIsSpCw9aLFkBikpuDiRhqZoQNDEyQGURPNAhhQQmmcfqeydKEDCL60gOCBs4UkskXiwqgZowiL5ZDeP0quYEpOSBgbH4nMB+amSw6dB20qriNkoQjpG0UbcCYaUHunM8RqxkJ5rMr5hickmOVxPosPRW6pZjNRitOR5po+Q5Ag3chbbTkVdp2RPRbmxk2WbQCNRrSJGkwfQ3DUmYJpkLBto5h1iBCw9yF6DIEhtt6GT4lEbR1pxFSEniujdRNrzFRKIHOg5yfhBs9kMcyogWXZUo2NCx57FR09EiUIiGDLmkMYJmFsXpCkrVGFpxh7pLTk0iFjZSP1aIkBmIANCtBi4erNCFGkSYMKXqyjDV3aOHFER9OQAoDp6xGmWacskxjVMIhYnMq6feZPwkyTimEjD/+5LE6QFYlgz6oyTTwxZBX2SWJsG6AjnZxKLLamybkSrtJIlUhCSkBQw9uZlRZNQgtgE2yxImMNmzDLDXUXZNIIyE9SS1NNoUkZk0cxfleQOZIzK1yWEcUSorJ4ozmro3wLyaVyytmtDwYYiMt2aLIlxRm0wiRTZiBWoYRbiOllhCk0pBOidtRabUTih9fQonInbjiSHV1ILrI0DTSEaakebshlarjZGE9UVg2VOHWyGc/R6TDyiR5EpJzJDkT5pI1x8BhTELEAxpQLKQmQkC6Jc0YmOBSSUjCFnjQgBsNJOYPwUYWIIgIJBJ1Gw6XNbbximW4olm0c9Ll0bkJMs2PJjhIzMrSCTSiSNMQE5snkyIlVEazbxAjXXRBEpTBAPmUmFC8TYoHkSBpi2CFCmPt0usqW1QggsuJY0emwTMvFaZRqIrFD0ESQZTaG0BbOSkq7QqZUEK9kjGmyrCFI+oTwLMyMSswag0HBTzTMkoaKfuoyYiibwseWnOWgDaGWgzqMGFlkivTxZxsRVisFlKPSxF7+oHhKDw5zIEig9z6tFY//uSxOoDWMYK+AMZLcs/QV8EkyfJiUE5bAVV0ZOgSGmaSOJSzFFtCaTgx4QTIKNNU1dmLKZFJGYUVC9HUzIFEbqzWkCgos2CBmOHZA9M9bM8xqtTm6rGsnhqyinmx4GaYm1mpGFqSNEr+pJlqCU08gjzrmyuvoFOwEJRJcm6OIMFBKBRRxElSdwBDpJTZ4VhUQFhwsTn0PSTagyeMtRQCjEiYZHpNLvNHEYgKxQkCSaJGcGyaZRdAiNqSQQRo0eKwTRpQ0tF5aDAoX0LzmoTFigZcYEzJR6M22jlIBA0JWEAkDAHETBGmq1qSxOuWmSqo/I6gRqrwFJg2gQkpBAUsBQNIT/FZcEueRoiUnB4lxdUTzJioqQxI6gKUpBIS2jcKXuiCbiVtOCpgXICok5DkB5C+0S8G1jb1pLguMlBKFWDhMiPCFBNEw2jBs5ImMrmTcEYLBtEX+wMKUADAiFG2MMgAHxscWQCvkikPPFSirKVO7LDtJRNooUmqSkQfNaoj1FFZOiI4MEp1gfKhkJguQDAhQoLER8G0Inm0smQikaPkP/7ksTlgdUmDPwDDM4DZ0Ge1GSluKI6s8iTE70LcDU4ONLhjSzkkCvkwyfVaL6iRzecQ8+RLdIEiexCMrpcQkwB5MLsDysiCYoXMGl2jxFAxIusaelGeq3ArSyDVyRSM2K2JHuiMdihRMMrvWJ0jhGkDiI3JkmgiRQhicYRYaETkC5DnPOxlEwpGiy59oVtk5/WyF0krNMKr2qMCh6YhPtbH20jcyjpZqU+096qAvFNBvYNb8JOrGoUgWs/dw8nYzObko8cgqRMSezaiaZTKJmsBZIGgQM9KmWvZO0JLxSCVpPBIuFECOFIlR8YQRBHSF7CHvkzylHHelJ5RxADPgymWQQfCsktAgKRrMiMqNgP2ACN8wQa9oPpI56VFMkkXmKJJkkFmRaWlYievC+ow+TEYsaskncDi+lmVVS3KLLLucX7mxQrHHWqXb0gBgIx8hCg+OJSRURnyh1A8BkTB9CS2K0YKiMfmuyorARk0yhcqmSQOFCAyUJNTZ5CbIRMNBQ6ZRisyZk5I/A8isdKTkWRmQwu2oTIlC+NiggXVo1FGQD/+5LE6oFaMgz4oxkgirJB34CTJ6iYqOqnJSjhcRFNOuoqdiwqtBFhQogttAZhB71hNizM2IoU2hVGERWWahMySpMylPSecg9gzkzpN4TJFUVDKMffcpJGDTZlmJFEmtlRluZ4gRHUlqoyiJyhcUdAYiigUxEThmA+SuInaRzd0Q88+KVYGGxJqjULVxtASbEnack0B9FIRvbI4WEwaINDVEq08uophgNTPNksRIje2jIUTWRUJUPQjB1UmTOMzMIBiTw8ZZYpsskR4fVMEZMX0/YeQHJpiteLOEjC7BtEmbDxREXWRn5jJ9VEygUFzoFCojpEmlBpLZIxSd1SMy6766DEc0l4FTEz+oE5NNLKI5CtMnRTQaTwggNigNLOf5sHy5WUW0zeSJE2yNBiMw0F5G2JMD6whMoTaO2pFDCCypkhg+KiiMlsntZzTS0MPIZNIxxo03dRVkcSdioEAAEhgnMAE4DFtycxrNtpEybOcYLI0UZIg4gHWThMVFRSOrKih7LKEKEzJ64JKJlVMkrDsKyPSx0bjR48unAkSZX0j7BA//uSxPIBWkoK+KSZIEsrwd8AkyUgQyTEw0qrsXRXGGly7yZdC0mpaSKk12iVdz5qmWTpWaDRNFjCU9mkUEeRsqzT7kiHLorCNkYgsw8gJQCmKwCpiNMDsJJukbYOaDI0INogYmBLKTMOPPgiDES5soXCZVIlIDTKMAKGjWTnDAZRxMcGTC6kBoUYdiZR6VAqTJwWTlk1RQgCiEENFESYMFBSzC9RB6oipIgDMErwmiUshokLhIgH5yh5DCdaeQVJPFMXhRMSGycXQMoUaz2S8YEh1pxpAtEu2l12FmV1CRG0CWeahEmMKJGQo2dSFWJnylJqTtQwibi5I6D1dZVmRp8ViY3AGiVNm0Q2S4qbe2jaICqiBNcqqoec9CoerSCJEbZFREsgUtd8kMOSrbGU4nmaRSBhGwIkBd9Ntc2jRrI4UwUQONLjnWYstMgUnROO0tnM6oowgQrh1cCIppIjSRS6fUMJa4BJnJOLUZA/hZG0wQmwkmdRGRhrbwVLLJKillJC5QkaQQcZ5s8iQxQJCOE0hWsTmILpIEdJkjDnn1QFfP/7ksTpgdguDPqjJNeTJEFfAJMleRoZXEGFSdVJhVE9lNvBtcQqxPLoUBK7CMQKmEbjFKFDxsgXQrLW5EQG2ZjKx3CIoXXZYKEbcEjkRWdbpA5hKUjoQnRgoyWIiehKXaQoL4yTvSYTkqSs2keM0j9tmSRCgd0l22NXYHSQkZRR1OC4nKo044aVRWimaogiu0cCxcjbxihIQrruWVVRqCNlAQtwQpem2SFY6kg1OAg3EjApgY2gUBUqRCQQOKojIMgsLahFQEMl4kizorHUSg1rBRCugxo0RiAU/ihm0z69Ea6JpOR/oESZsfsRl5JlGWRShWlsZrI4NoU1Dh1omfLZahtR6Hihsss0MkC+MwjT1eHG4J21JRCYNtkRr64Em70+HkUXPo0jJ2V1EkW5MkOWgnAjecp56llJolReZmaJaNECRCYbRwTkYJGCFYxE2zJJmKMnFBySI6tZiiA/TKowIRTwSEINihwPoWzEDhJNHk0SsOfC7k4STQFSSPRNSKLLj7RiRslLFSpyJGVQMOcmdaZWkucmkhwVtlGPJgSyY0X/+5LE6oPZOgz4AxkpwyHBXwCTJpF2uyuzBWrXitaJPyUSRKsTgRa0qXYekSEKFD0aG26kY3akolBmoF2Zo23KfGV01Ec3IXTeiXQi8PM27LlkKcgTnc+el1xHFWjakh0m2ctYXXI0+wx0B06cIEyrj6Um04wgiOScoxc/FpcREcjbkmFSx9pY0s+T3yl8XfOQKEAae1EZnR3RxCPFTjz687zbJMMandD7zh9Y/msL2FvRR43YxL4UrF5WEBzD/i4WVZSBdIZlUkHKUrRyCP5ATaRjn2osFEQmHAOmy5ZEKRk41d4o3LSkoL1A94hGKFeUyJWnASCD0geNC5KJhYTRBFcMqCZhBQEZYuw4UsUHKEIGBZpP4lZJJSEl0WSGpgqS0TKJpyyJxcKJrJ3fSINnBlpQ3BSSKolo2QoFENsHNW2MFpSwgt0lydDbVUsfJiMhZkpAgYwgIqohd6RE1IoESWMWjoZDxBNc3zjCdHtLr4dHYLGnL1ZUVcXn5YLxw6FrpdPrix86wjQtI7LMwJTKISo/BeF0RCReCxkhZ0UniM+o//uSxOeCF6YK+iMZKcsXwd9YwyeoZtd7ix008Kxbmo2hFMJiegwpUUBU6qQYYdKLaTKNCTpomnhdZk8oabKAtROQoq0bNa2QFJNUoekOCA9KnHjx5R6xoiINxVGJBQQlxCixVkfWiyYUMRtEZFm1kHIEKBdCPXRDdxbFSZIqugOtkr3MaVeoONIziGUR9CfgPWacImWIOzSTIARiqZAkRJ6gmVhmjUzqwouk+PDpbdxz6EozKRiRw4NRbyRkLjpZo8wDSBtA2oiPgqjTjZGCqKi0iEJnQyG5oR8iORSySFZ/JNmgOzdNjGo6MN4D58nOjIxegqKMIMRWiWmSHJTpRIsucAyS40wqYRJXRKrt4srVx7dCiNoO8j5/xNW9X8WmakQMNPhXlA1aizCUygVGvRLOMqjTqnBjpeCBAtE2kyOlHEnDJNi+spD7RllHeNJySUIDgwAowUeSEJLw8FCWgS8a8MmXroGpWIUCenl4oTopZt2LArBeKL9ZMmuQCnibQ8HaCxUwSCY2QCcFJg4bmicsdA0D0VxRA0FhXIGMMFYoQ//7ksTsgBomCvgksTZK20Cf2GSbISEjxxQU2mZItnABjSOAI3sIYgJhklsa1U6JFgHQMqlkKFyzaStohiwgm1FpJy4iXOuosmusjHBkRGkPSRpkopNLMpNpGUmx44ysaiVcRkrIyQDZ4iQ+NEzLKwZeYNqUi0uKidokG0iFGgaZmZtESyIzaFCmYFWzi04jYtJZV+yBJZ9dE+b05ywCgFbVxWNEJLYpcRNKu96rklUmoxlcY5JE8KtoY50mlarfcVtVZKmSxpXFXAkgDSaGiJ4VPRITwqapMUnCWpWkTEJkiZIm2cqVwxEmZInoXETKyLbIWSJoqgBJGGYTwVQalPFkyU4GSga2yFkiJkhUuhikTLhkqw0rm1K7SJipLBZFKiImEIlIkW3JpNlaebUa2tQ5LZWsmys1yqIuCJQ1iIqJVWY1rKzyGeWhqVbHrTZ2KSJNq2UlukxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+5LE7wAawgr2pBkhiu/AHIBgJQGqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq';
  }
}
const generalHeaderRefresher = new GeneralHeaderRefresher();


/***/ }),
/* 333 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tradesHeaderTradesButton", function() { return tradesHeaderTradesButton; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class TradesHeaderTradesButton extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Brings back the Trades button to the SteamGifts header.")),
      id: 'htb',
      name: 'Header Trades Button',
      sg: true,
      type: 'trades'
    };
  }
  init() {
    const tradesButton = _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].header.addButtonContainer({
      buttonName: 'Trades',
      position: 'beforeend',
      openInNewTab: true,
      side: 'left',
      url: 'https://www.steamtrades.com'
    });
    _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].header.nodes.leftNav.insertBefore(tradesButton.nodes.outer, _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].header.buttonContainers.discussions.nodes.outer);
  }
}
const tradesHeaderTradesButton = new TradesHeaderTradesButton();


/***/ }),
/* 334 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tradesHaveWantListChecker", function() { return tradesHaveWantListChecker; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(208);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(96);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(221);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(211);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(132);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(144);












const createElements = _Common__WEBPACK_IMPORTED_MODULE_11__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_11__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_11__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_11__["common"]),
  getTextNodesIn = _Common__WEBPACK_IMPORTED_MODULE_11__["common"].getTextNodesIn.bind(_Common__WEBPACK_IMPORTED_MODULE_11__["common"]);
const WHITELIST = {
  borderlandsgameoftheyear: 'borderlandsgoty',
  mafia2: 'mafiaii'
};
class TradesHaveWantListChecker extends _class_Module__WEBPACK_IMPORTED_MODULE_7__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-list"
      }), ") to the right side of the first page heading of any trade that allows you to check the have/want list against your wishlisted/owned games, along with some filtering options.")),
      id: 'hwlc',
      name: 'Have/Want List Checker',
      st: true,
      type: 'trades'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.tradePath) {
      return;
    }
    let obj = {
      button: createHeadingButton({
        context: document.getElementsByClassName('page_heading')[0],
        id: 'hwlc',
        icons: ['fa-list']
      })
    };
    obj.button.addEventListener('click', this.hwlc_openPopup.bind(this, obj));
  }
  async hwlc_openPopup(obj) {
    if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_8__["permissions"].contains([['steamApi'], ['steamStore']]))) {
      return;
    }
    if (obj.popup) {
      obj.popup.open();
      return;
    }
    obj.popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
      icon: 'fa-list',
      title: 'Have/Want List Checker',
      addScrollable: 'left'
    });
    this.hwlc_addPanel(obj);
    obj.popup.open();
    window.setTimeout(async () => {
      await this.hwlc_getGames();
      obj.games = {};
      // noinspection JSIgnoredPromiseFromCall
      this.hwlc_addGames(obj, 'have', _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.appList);
      // noinspection JSIgnoredPromiseFromCall
      this.hwlc_addGames(obj, 'want', _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.appList);
    }, 1000);
  }
  hwlc_addPanel(obj) {
    obj.panel = obj.popup.getScrollable();
    obj.panel.classList.add('esgst-hwlc-panel', 'markdown');
    obj.sections = {};
    this.hwlc_addSection(obj, 'have', 'want');
    this.hwlc_addSection(obj, 'want', 'have');
  }
  hwlc_addSection(obj, key, counterKey) {
    obj[key] = document.querySelector(`.${key}`);
    createElements(obj.panel, 'beforeend', [{
      attributes: {
        class: 'esgst-hwlc-section'
      },
      type: 'div',
      children: [{
        text: `You ${counterKey}:`,
        type: 'h2'
      }, {
        type: 'br'
      }, {
        attributes: {
          id: `esgst-hwlc-${key}-textArea`
        },
        type: 'textarea'
      }, {
        type: 'br'
      }, {
        type: 'br'
      }, {
        text: `Matches (you ${counterKey} x they ${key}):`,
        type: 'h2'
      }, {
        attributes: {
          id: `esgst-hwlc-${key}-matches`
        },
        type: 'ul',
        children: [{
          attributes: {
            class: 'fa fa-circle-o-notch fa-spin'
          },
          type: 'i'
        }]
      }, {
        type: 'br'
      }, {
        text: `They ${key}:`,
        type: 'h2'
      }, {
        attributes: {
          id: `esgst-hwlc-${key}-games`
        },
        type: 'ul',
        children: [{
          attributes: {
            class: 'fa fa-circle-o-notch fa-spin'
          },
          type: 'i'
        }]
      }, {
        type: 'br'
      }, {
        type: 'h2',
        children: [{
          text: `Unable to identify: `,
          type: 'node'
        }, {
          attributes: {
            class: 'fa fa-question-circle',
            title: 'You can report unidentified games in the ESGST thread so that exceptions can be added for them'
          },
          type: 'i'
        }]
      }, {
        attributes: {
          id: `esgst-hwlc-${key}-unidentified`
        },
        type: 'ul',
        children: [{
          attributes: {
            class: 'fa fa-circle-o-notch fa-spin'
          },
          type: 'i'
        }]
      }]
    }]);
    obj.sections[key] = {
      textArea: document.getElementById(`esgst-hwlc-${key}-textArea`),
      matches: document.getElementById(`esgst-hwlc-${key}-matches`),
      games: document.getElementById(`esgst-hwlc-${key}-games`),
      unidentified: document.getElementById(`esgst-hwlc-${key}-unidentified`)
    };
    obj.sections[key].textArea.addEventListener('input', this.hwlc_filter.bind(this, obj, key, null));
  }
  async hwlc_getGames(convertToObj) {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.appList) {
      return;
    }
    try {
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get('https://api.steampowered.com/ISteamApps/GetAppList/v2/');
      const appList = response.json;
      if (convertToObj) {
        // eslint-disable-next-line require-atomic-updates
        _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.appList = {};
        for (const app of appList.applist.apps) {
          _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.appList[app.appid] = app.name;
        }
      } else {
        // eslint-disable-next-line require-atomic-updates
        _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.appList = appList;
      }
    } catch (error) {
      window.console.log(error);
      window.alert('Could not retrieve list of Steam games. Games will not be identified by name.');
    }
  }

  /**
   * @param obj
   * @param key
   * @returns {Promise<void>}
   */
  async hwlc_addGames(obj, key, json) {
    obj.games[key] = {
      apps: [],
      subs: []
    };
    const unidentified = [];
    const elements = getTextNodesIn(obj[key]);
    for (const element of elements) {
      const parent = element.parentElement;
      const striked = parent.closest('del');
      if (striked) {
        // Game assumed to no longer be available.
        continue;
      }
      const name = element.textContent.trim();
      const link = parent.closest('a');
      const url = link && link.getAttribute && link.getAttribute('href');
      if (url) {
        const match = url.match(/\/(app|sub)\/(\d+)/);
        if (match) {
          obj.games[key][`${match[1]}s`].push({
            id: parseInt(match[2]),
            name,
            parent
          });
          continue;
        }
      }
      if (!this.hwlc_tidyName(name)) {
        continue;
      }
      if (json) {
        const matches = json.applist.apps.filter(x => this.hwlc_formatName(x.name) === this.hwlc_formatName(name));
        if (matches.length) {
          obj.games[key].apps.push({
            id: parseInt(matches[0].appid),
            name,
            parent
          });
          continue;
        }
      }
      if (unidentified.filter(x => x.name === name).length) {
        // Name has already been found (duplicate).
        continue;
      }
      unidentified.push({
        name,
        parent
      });
    }
    if (key === 'want') {
      try {
        const steamId = document.querySelector('.author_name').getAttribute('href').match(/\d+/)[0];
        const wishlistData = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`https://api.steampowered.com/IWishlistService/GetWishlist/v1/?steamid=${steamId}&format=json`)).json.response.items;
        if (wishlistData) {
          wishlistData.forEach(item => {
            const id = parseInt(item.appid);
            const found = obj.games[key].apps.filter(x => x.id === id)[0];
            if (found) {
              found.wishlisted = true;
              return;
            }
            const app = json.applist.apps.filter(x => parseInt(x.appid) === id)[0] || null;
            if (app) {
              obj.games[key].apps.push({
                id,
                name: app.name,
                wishlisted: true
              });
            } else {
              obj.games[key].apps.push({
                id,
                name: `${id}`,
                wishlisted: true
              });
            }
          });
        }
      } catch (e) {
        /**/
      }
    }
    for (const section in obj.sections[key]) {
      if (obj.sections[key].hasOwnProperty(section)) {
        obj.sections[key][section].innerHTML = '';
      }
    }
    obj.games[key].apps = obj.games[key].apps.map(game => {
      if (key === 'want' && game.wishlisted) {
        game.html = {
          type: 'li',
          children: [{
            attributes: {
              class: 'fa fa-star',
              title: 'On their wishlist'
            },
            type: 'i'
          }, {
            attributes: {
              href: `https://store.steampowered.com/app/${game.id}`
            },
            text: game.name,
            type: 'a'
          }]
        };
        return game;
      }
      if (key === 'have' && _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.games.apps[game.id]) {
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.games.apps[game.id].owned) {
          game.owned = true;
          game.html = {
            type: 'li',
            children: [{
              attributes: {
                class: 'fa fa-folder',
                title: 'On your library'
              },
              type: 'i'
            }, {
              attributes: {
                href: `https://store.steampowered.com/app/${game.id}`
              },
              text: game.name,
              type: 'a'
            }]
          };
          return game;
        } else if (_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.games.apps[game.id].wishlisted) {
          game.wishlisted = true;
          game.html = {
            type: 'li',
            children: [{
              attributes: {
                class: 'fa fa-star',
                title: 'On your wishlist'
              },
              type: 'i'
            }, {
              attributes: {
                href: `https://store.steampowered.com/app/${game.id}`
              },
              text: game.name,
              type: 'a'
            }]
          };
          return game;
        }
      }
      game.html = {
        type: 'li',
        children: [{
          attributes: {
            href: `https://store.steampowered.com/app/${game.id}`
          },
          text: game.name,
          type: 'a'
        }]
      };
      return game;
    }).sort(this.hwlc_sortGames);
    obj.games[key].subs = obj.games[key].subs.sort(this.hwlc_sortGames);
    const appItems = [];
    for (const game of obj.games[key].apps) {
      appItems.push(game.html);
    }
    createElements(obj.sections[key].games, 'beforeend', appItems);
    const subItems = [];
    for (const game of obj.games[key].subs) {
      subItems.push({
        type: 'li',
        children: [{
          attributes: {
            class: 'fa fa-suitcase',
            title: `This is a package (packages are not checked for wishlisted/owned status)`
          },
          type: 'i'
        }, {
          attributes: {
            href: `https://store.steampowered.com/sub/${game.id}`
          },
          text: game.name || game.id,
          type: 'a'
        }]
      });
    }
    createElements(obj.sections[key].games, 'beforeend', subItems);
    const unidentifiedItems = [];
    for (const game of unidentified) {
      unidentifiedItems.push({
        text: game.name,
        type: 'li'
      });
    }
    createElements(obj.sections[key].unidentified, 'beforeend', unidentifiedItems);
    for (const section in obj.sections[key]) {
      if (obj.sections[key].hasOwnProperty(section)) {
        if (section === 'textArea' || obj.sections[key][section].innerHTML) {
          continue;
        }
        createElements(obj.sections[key][section], 'atinner', [{
          text: 'None.',
          type: 'node'
        }]);
      }
      const query = _class_LocalStorage__WEBPACK_IMPORTED_MODULE_6__["LocalStorage"].get(`hwlc_${key}`);
      if (query) {
        obj.sections[key].textArea.value = query;
        this.hwlc_filter(obj, key);
      }
    }
  }
  hwlc_filter(obj, key) {
    obj.sections[key].matches.innerHTML = '';
    const query = obj.sections[key].textArea.value;
    _class_LocalStorage__WEBPACK_IMPORTED_MODULE_6__["LocalStorage"].set(`hwlc_${key}`, query);
    let found = [];
    const values = query.split(/\n/);
    for (let value of values) {
      value = value.trim().toLowerCase();
      if (!value) {
        continue;
      }
      obj.games[key].apps.filter(game => game.name.toLowerCase().match(value)).forEach(game => {
        if (found.filter(x => x.name === game.name).length) {
          return;
        }
        found.push({
          id: game.id,
          name: game.name,
          owned: game.owned,
          wishlisted: game.wishlisted,
          type: 'app'
        });
      });
      obj.games[key].subs.filter(game => game.name.toLowerCase().match(value)).forEach(game => {
        if (found.filter(x => x.name === game.name).length) {
          return;
        }
        found.push({
          id: game.id,
          name: game.name,
          owned: game.owned,
          wishlisted: game.wishlisted,
          type: 'sub'
        });
      });
    }
    found = found.sort(this.hwlc_sortGames);
    const items = [];
    for (const game of found) {
      items.push({
        type: 'li',
        children: [key === 'have' && game.owned ? {
          attributes: {
            class: 'fa fa-folder',
            title: 'On your library'
          },
          type: 'i'
        } : null, game.wishlisted ? {
          attributes: {
            class: 'fa fa-star',
            title: `On ${key === 'want' ? 'their' : 'your'} wishlist`
          },
          type: 'i'
        } : null, {
          attributes: {
            href: `https://store.steampowered.com/${game.type}/${game.id}`
          },
          text: game.name || game.id,
          type: 'a'
        }]
      });
    }
    createElements(obj.sections[key].matches, 'beforeend', items);
    if (!obj.sections[key].matches.innerHTML) {
      createElements(obj.sections[key].matches, 'atinner', [{
        text: 'None.',
        type: 'node'
      }]);
    }
  }
  hwlc_tidyName(name) {
    return name.replace(/[^\w]/g, '').toLowerCase().replace(/steamkeys/, '');
  }
  hwlc_formatName(name) {
    name = name.replace(/[^\w]/g, '').toLowerCase().replace(/windowsedition/, '');
    return WHITELIST[name] || name;
  }
  hwlc_sortGames(a, b) {
    if (a.wishlisted && !b.wishlisted) {
      return -1;
    }
    if (!a.wishlisted && b.wishlisted) {
      return 1;
    }
    if (a.owned && !b.owned) {
      return 1;
    }
    if (!a.owned && b.owned) {
      return -1;
    }
    return a.name.localeCompare(b.name, {
      sensitivity: 'base'
    });
  }
}
const tradesHaveWantListChecker = new TradesHaveWantListChecker();


/***/ }),
/* 335 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalLastPageLink", function() { return generalLastPageLink; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





const createElements = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]);
class GeneralLastPageLink extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a \"Last Page\" link to the pagination navigation of some pages that do not have it. For example: user pages, group pages with 100+ pages, etc...")),
      id: 'lpl',
      name: 'Last Page Link',
      sg: true,
      type: 'general'
    };
  }
  init() {
    if (!this.esgst.paginationNavigation) return;
    if (this.esgst.userPath) {
      this.lpl_addUserLink();
    } else if (this.esgst.groupPath) {
      this.lpl_addGroupLink();
    }
  }
  lpl_getLastPage(context, main, user, userWon, group, groupUsers, groupWishlist) {
    let element, first, lastPage, pagination, paginationNavigation, paginationResults, second, third;
    pagination = context.getElementsByClassName('pagination')[0];
    paginationResults = context.getElementsByClassName('pagination__results')[0];
    paginationNavigation = context.getElementsByClassName('pagination__navigation')[0];
    if (paginationNavigation) {
      element = paginationNavigation.lastElementChild;
      if (element.classList.contains('is-selected') || element.classList.contains('is_selected') || element.querySelector('.fa-angle-double-right')) {
        lastPage = parseInt(element.getAttribute('data-page-number'));
      } else if (main && this.esgst.userPath || user) {
        if (main && window.location.pathname.match(/\/giveaways\/won/) || userWon) {
          lastPage = Math.ceil(parseInt(context.querySelector(`.featured__table__row__right a[href*="/giveaways/won"]`).textContent.replace(/,/g, '')) / 25);
        } else {
          lastPage = Math.ceil(parseInt(context.getElementsByClassName('sidebar__navigation__item__count')[0].textContent.replace(/,/g, '')) / 25);
        }
      } else if (main && this.esgst.groupPath || group) {
        if (main && window.location.pathname.match(/\/users/) || groupUsers) {
          lastPage = Math.ceil(parseInt(context.getElementsByClassName('sidebar__navigation__item__count')[1].textContent.replace(/,/g, '')) / 25);
        } else if (main && this.esgst.groupWishlistPath || groupWishlist) {
          lastPage = 999999999;
        } else {
          lastPage = Math.ceil(parseInt(context.getElementsByClassName('sidebar__navigation__item__count')[0].textContent.replace(/,/g, '')) / 25);
        }
      } else {
        lastPage = 999999999;
      }
    } else {
      lastPage = 999999999;
    }
    if (lastPage === 999999999 && paginationResults) {
      first = paginationResults.firstElementChild;
      if (first) {
        second = first.nextElementSibling;
        if (second) {
          third = second.nextElementSibling;
          if (third && !third.textContent.match(/Giveaway\sFilters/)) {
            lastPage = Math.ceil(parseInt(third.textContent.replace(/,/g, '')) / (main && this.esgst.itemsPerPage || parseInt(second.textContent.replace(/,/g, '')) - parseInt(first.textContent.replace(/,/g, '')) + 1));
          }
        }
      }
    }
    return lastPage;
  }
  lpl_addUserLink() {
    let lastLink, url, username;
    username = window.location.pathname.match(/^\/user\/(.+?)(\/.*?)?$/)[1];
    if (window.location.pathname.match(/\/giveaways\/won/)) {
      url = `/user/${username}/giveaways/won/search?page=${this.esgst.lastPage}`;
    } else {
      url = `/user/${username}/search?page=${this.esgst.lastPage}`;
    }
    this.esgst.lastPageLink = [{
      attributes: {
        ['data-page-number']: this.esgst.lastPage,
        href: url
      },
      type: 'a',
      children: [{
        text: 'Last',
        type: 'span'
      }, {
        attributes: {
          class: 'fa fa-angle-double-right'
        },
        type: 'i'
      }]
    }];
    lastLink = this.esgst.paginationNavigation.lastElementChild;
    if (this.esgst.currentPage !== this.esgst.lastPage && !lastLink.classList.contains('is-selected') && !lastLink.querySelector('.fa-angle-double-right')) {
      createElements(this.esgst.paginationNavigation, 'beforeend', this.esgst.lastPageLink);
    }
  }
  lpl_addGroupLink() {
    let group, lastLink, url;
    group = window.location.pathname.match(/^\/group\/(.+?\/.+?)(\/.*?)?$/)[1];
    if (window.location.pathname.match(/\/users/)) {
      url = `/group/${group}/users/search?page=${this.esgst.lastPage}`;
    } else if (this.esgst.groupWishlistPath) {
      url = `/group/${group}/wishlist/search?page=${this.esgst.lastPage}`;
    } else {
      url = `/group/${group}/search?page=${this.esgst.lastPage}`;
    }
    this.esgst.lastPageLink = [{
      attributes: {
        ['data-page-number']: this.esgst.lastPage,
        href: url
      },
      type: 'a',
      children: [{
        text: 'Last',
        type: 'span'
      }, {
        attributes: {
          class: 'fa fa-angle-double-right'
        },
        type: 'i'
      }]
    }];
    lastLink = this.esgst.paginationNavigation.lastElementChild;
    if (this.esgst.currentPage !== this.esgst.lastPage && !lastLink.classList.contains('is-selected') && !lastLink.querySelector('.fa-angle-double-right')) {
      createElements(this.esgst.paginationNavigation, 'beforeend', this.esgst.lastPageLink);
    }
  }
}
const generalLastPageLink = new GeneralLastPageLink();


/***/ }),
/* 336 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalLevelProgressVisualizer", function() { return generalLevelProgressVisualizer; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(144);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(208);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(210);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(207);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(216);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(213);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(96);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(206);















const createElements = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]),
  round = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].round.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]);
class GeneralLevelProgressVisualizer extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      colors: {
        barColor: 'Bar Color',
        projectedBarColor: 'Projected Bar Color',
        barColorHover: `Bar Color (Hover / Account Page)`,
        projectedBarColorHover: `Projected Bar Color (Hover / Account Page)`,
        barColorSelected: `Bar Color (Account Page Hover)`,
        projectedBarColorSelected: `Projected Bar Color (Account Page Hover)`
      },
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "Displays a green bar in the account button at the header of any page that represents your level progress.")),
      features: {
        lpv_e: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_14__["DOM"].element("li", null, "Also displays a lighter green bar, if you have any giveaways open, to estimate what your level will be when the giveaways are marked as received. If you hover over the account button, it shows the number of the estimated level."),
          name: 'Show estimated level.',
          sg: true,
          sync: `Giveaways, No CV Games, Reduced CV Games`,
          syncKeys: ['Giveaways', 'NoCvGames', 'ReducedCvGames']
        }
      },
      id: 'lpv',
      name: 'Level Progress Visualizer',
      sg: true,
      type: 'general'
    };
  }
  async init() {
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_10__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_11__["Events"].LEVEL_UPDATED, this.lpv_setStyle.bind(this));
    await this.lpv_setStyle(null, _class_Session__WEBPACK_IMPORTED_MODULE_12__["Session"].counters.level);
    this.joinStyles();
  }
  async getCache() {
    if (_class_LocalStorage__WEBPACK_IMPORTED_MODULE_13__["LocalStorage"].get('lpvCache_v2')) {
      _class_LocalStorage__WEBPACK_IMPORTED_MODULE_13__["LocalStorage"].delete('lpvCache_v2');
    }
    const cache = JSON.parse(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_13__["LocalStorage"].get('lpvCache', `{ "cv": 0, "level": 0, "v": 3 }`));
    const currentLevel = _class_Session__WEBPACK_IMPORTED_MODULE_12__["Session"].counters.level.full;
    if (cache.v !== 3 || currentLevel !== cache.level) {
      cache.v = 3;
      cache.level = currentLevel;
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(`/user/${_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('username')}`);
      const element = response.html.querySelectorAll('.featured__table__row__right')[6];
      cache.cv = _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.round(parseFloat(JSON.parse(element.firstElementChild.lastElementChild.getAttribute('data-ui-tooltip')).rows[0].columns[1].name.replace(/[$,]/g, '')));
      _class_LocalStorage__WEBPACK_IMPORTED_MODULE_13__["LocalStorage"].set('lpvCache', JSON.stringify(cache));
    }
    return cache;
  }
  async lpv_setStyle(oldLevel, newLevel) {
    if (newLevel.base === 10) {
      return;
    }
    const mainButtonWidth = _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].header.buttonContainers['account'].nodes.button.offsetWidth;
    const fullButtonWidth = _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].header.buttonContainers['account'].nodes.outer.offsetWidth;
    const currentPercentage = Math.trunc(round(newLevel.full - newLevel.base) * 100);
    const currentProgress = Math.trunc(currentPercentage * (fullButtonWidth / 100));
    const firstBar = `${currentProgress}px`;
    const secondBar = `${Math.max(0, currentProgress - mainButtonWidth)}px`;
    let projectedFirstBar = '0';
    let projectedSecondBar = '0';
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('lpv_e')) {
      const cache = await this.getCache();
      const cv = this.lpv_getCv();
      if (cv > 0) {
        const predictedFullLevel = _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.getLevelFromCv(cache.cv + cv);
        //Logger.info(`Current CV: ${cache.cv}`);
        //Logger.info(`CV to gain: ${cv}`);
        //Logger.info(`Predicted level: ${predictedFullLevel}`);
        const predictedLevel = Math.trunc(predictedFullLevel);
        const predictedPercentage = Math.trunc(round(predictedFullLevel - predictedLevel) * 100);
        const predictedProgress = Math.trunc(Math.min(100, predictedPercentage) * (fullButtonWidth / 100));
        projectedFirstBar = `${predictedProgress}px`;
        projectedSecondBar = `${Math.max(0, predictedProgress - mainButtonWidth)}px`;
        _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].header.buttonContainers['account'].nodes.level.title = getFeatureTooltip('lpv', `${newLevel.full} (${predictedFullLevel})`);
      }
    }
    const barColor = _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('lpv_barColor');
    const projectedBarColor = _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('lpv_projectedBarColor');
    const barColorHover = _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('lpv_barColorHover');
    const projectedBarColorHover = _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('lpv_projectedBarColorHover');
    const barColorSelected = _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('lpv_barColorSelected');
    const projectedBarColorSelected = _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('lpv_projectedBarColorSelected');
    this.esgst.lpvStyleArray = [{
      selector: '.esgst-lpv-container',
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColor} ${firstBar}, ${projectedBarColor} ${firstBar}, ${projectedBarColor} ${projectedFirstBar}, transparent ${firstBar})`, `var(--esgst-lpv-button, linear-gradient(#8a92a1 0px, #757e8f 8px, #4e5666 100%))`]
      }]
    }, {
      selector: `.esgst-lpv-container .nav__button--is-dropdown:hover`,
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorHover} ${firstBar}, ${projectedBarColorHover} ${firstBar}, ${projectedBarColorHover} ${projectedFirstBar}, transparent ${firstBar})`, `var(--esgst-lpv-button-hover, linear-gradient(#9ba2b0 0px, #8c94a3 8px, #596070 100%))`]
      }]
    }, {
      selector: `.esgst-lpv-container .nav__button--is-dropdown-arrow:hover`,
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorHover} ${secondBar}, ${projectedBarColorHover} ${secondBar}, ${projectedBarColorHover} ${projectedSecondBar}, transparent ${secondBar})`, `var(--esgst-lpv-button-hover, linear-gradient(#9ba2b0 0px, #8c94a3 8px, #596070 100%))`]
      }]
    }, {
      selector: '.esgst-lpv-container .nav__button--is-dropdown-arrow.is-selected',
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColor} ${secondBar}, ${projectedBarColor} ${secondBar}, ${projectedBarColor} ${projectedSecondBar}, transparent ${secondBar})`, `var(--esgst-lpv-arrow, linear-gradient(#4e525f 0px, #434857 5px, #2b2e3a 100%))`]
      }]
    }, {
      selector: '.esgst-lpv-container.is-selected .nav__button--is-dropdown',
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorHover} ${firstBar}, ${projectedBarColorHover} ${firstBar}, ${projectedBarColorHover} ${projectedFirstBar}, transparent ${firstBar})`, `var(--esgst-lpv-button-selected, linear-gradient(#d0d5de 0px, #c9cdd7 5px, #9097a6 100%))`]
      }]
    }, {
      selector: '.esgst-lpv-container.is-selected .nav__button--is-dropdown-arrow ',
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorHover} ${secondBar}, ${projectedBarColorHover} ${secondBar}, ${projectedBarColorHover} ${projectedSecondBar}, transparent ${secondBar})`, `var(--esgst-lpv-button-selected, linear-gradient(#d0d5de 0px, #c9cdd7 5px, #9097a6 100%)) `]
      }]
    }, {
      selector: `.esgst-lpv-container.is-selected .nav__button--is-dropdown:hover`,
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorSelected} ${firstBar}, ${projectedBarColorSelected} ${firstBar}, ${projectedBarColorSelected} ${projectedFirstBar}, transparent ${firstBar})`, `var(--esgst-lpv-button-selected-hover, linear-gradient(#f0f1f5 0px, #d1d4de 100%)) `]
      }]
    }, {
      selector: `.esgst-lpv-container.is-selected .nav__button--is-dropdown-arrow:hover:not(.is-selected)`,
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorSelected} ${secondBar}, ${projectedBarColorSelected} ${secondBar}, ${projectedBarColorSelected} ${projectedSecondBar}, transparent ${secondBar})`, `var(--esgst-lpv-button-selected-hover, linear-gradient(#f0f1f5 0px, #d1d4de 100%))`]
      }]
    }, {
      selector: '.esgst-lpv-container.is-selected .nav__button--is-dropdown-arrow.is-selected ',
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorSelected} ${secondBar}, ${projectedBarColorSelected} ${secondBar}, ${projectedBarColorSelected} ${projectedSecondBar}, transparent ${secondBar})`, `var(--esgst-lpv-arrow-selected, linear-gradient(#4e525f 0px, #434857 5px, #2b2e3a 100%)) `]
      }]
    }];
  }
  joinStyles() {
    let style;
    if (this.esgst.lpvStyleArray) {
      style = JSON.parse(JSON.stringify(this.esgst.lpvStyleArray));
      if (this.esgst.pvStyleArray) {
        for (const [i, item] of style.entries()) {
          for (const [j, rule] of item.rules.entries()) {
            rule.values = rule.values.concat(JSON.parse(JSON.stringify(this.esgst.pvStyleArray[i].rules[j].values)));
          }
          item.rules.push({
            name: 'background-position',
            values: ['left top', 'left top', 'left bottom', 'left bottom']
          }, {
            name: 'background-repeat',
            values: new Array(4).fill('no-repeat')
          }, {
            name: 'background-size',
            values: ['auto 50%', '0', 'auto 50%', 'auto']
          });
        }
      }
    } else if (this.esgst.pvStyleArray) {
      style = JSON.parse(JSON.stringify(this.esgst.pvStyleArray));
    }
    if (!style || !Array.isArray(style)) {
      return;
    }
    let styleString = '';
    for (const item of style) {
      styleString += `${item.selector} {\n`;
      for (const rule of item.rules) {
        styleString += `  ${rule.name}: ${rule.values.join(`, `)} !important;\n`;
      }
      styleString += '}\n\n';
    }
    if (!this.esgst.lpvStyle) {
      this.esgst.lpvStyle = createElements(this.esgst.style, 'afterend', [{
        attributes: {
          id: 'esgst-lpv-style'
        },
        type: 'style'
      }]);
    }
    this.esgst.lpvStyle.textContent = styleString;
    _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].header.buttonContainers['account'].nodes.outer.classList.add('esgst-lpv-container');
  }
  lpv_getCv() {
    //Logger.info('Beginning CV calculation...');
    let cv = 0;
    const user = this.esgst.users.users[_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('steamId')];
    if (!user) {
      return cv;
    }
    const giveaways = user.giveaways;
    if (!giveaways) {
      return cv;
    }
    const currentTime = Date.now();
    for (const type of ['apps', 'subs']) {
      const items = giveaways.sent[type];
      for (const id in items) {
        if (items.hasOwnProperty(id)) {
          let open = 0;
          let sent = 0;
          let value = 0;
          for (const code of items[id]) {
            const giveaway = this.esgst.giveaways[code];
            if (!giveaway) {
              _class_Logger__WEBPACK_IMPORTED_MODULE_9__["Logger"].info(`Could not find giveaway ${code}...`);
              continue;
            }
            value = giveaway.points;
            if (currentTime < giveaway.endTime || !giveaway.started) {
              // giveaway is open or has not started yet
              open += giveaway.copies;
            } else {
              // giveaway is closed
              if (giveaway.entries >= 5 || !giveaway.inviteOnly && !giveaway.group && !giveaway.whitelist) {
                // giveaway counts for cv
                if (Array.isArray(giveaway.winners)) {
                  // user is using the new database, which is more accurate
                  for (const winner of giveaway.winners) {
                    if (winner.status === 'Received') {
                      sent += 1;
                    }
                  }
                } else if (giveaway.winners > 0) {
                  sent += Math.min(giveaway.entries, giveaway.winners);
                }
              }
            }
          }
          const game = this.esgst.games[type][id];
          if (game) {
            if (game.noCV) {
              // game gives no cv
              value = 0;
            } else if (game.reducedCV) {
              // game gives reduced cv (15% of the value)
              value *= 0.15;
            }
          }
          if (sent > 5 || sent + open > 5) {
            // after 5 copies each next copy is worth only 90% of the previous value
            for (let i = sent - 5; i > 0; i--) {
              value *= 0.9;
            }
            let realValue = 0;
            for (let i = open; i > 0; i--) {
              value *= 0.9;
              realValue += value;
            }
            if (realValue > 0) {
              cv += realValue;
              //Logger.info(`Adding ${realValue} CV from: http://store.steampowered.com/${type.slice(0, -1)}/${id}${game && game.name ? ` (${game.name})` : ''}`);
              //Logger.info(`Total CV: ${cv}`);
            }
          } else if (open > 0) {
            value *= open;
            if (value > 0) {
              cv += value;
              //Logger.info(`Adding ${value} CV from: http://store.steampowered.com/${type.slice(0, -1)}/${id}${game && game.name ? ` (${game.name})` : ''}`);
              //Logger.info(`Total CV: ${cv}`);
            }
          }
        }
      }
    }
    //Logger.info('CV calculation ended...');
    return cv;
  }
}
const generalLevelProgressVisualizer = new GeneralLevelProgressVisualizer();


/***/ }),
/* 337 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysMultipleGiveawayCreator", function() { return giveawaysMultipleGiveawayCreator; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(146);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_object_from_entries_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(123);
/* harmony import */ var core_js_modules_es_object_from_entries_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_from_entries_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(168);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(208);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(96);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(211);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(132);
/* harmony import */ var _class_Tabs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(231);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(212);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(224);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(144);























const buildGiveaway = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].buildGiveaway.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  copyValue = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].copyValue.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  createAlert = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].createAlert.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  createElements = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  createTooltip = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].createTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  downloadFile = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].downloadFile.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  getFeatureNumber = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].getFeatureNumber.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  getUser = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].getUser.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  lockAndSaveGiveaways = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].lockAndSaveGiveaways.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  parseMarkdown = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].parseMarkdown.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  saveUser = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].saveUser.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]),
  setCountdown = _Common__WEBPACK_IMPORTED_MODULE_22__["common"].setCountdown.bind(_Common__WEBPACK_IMPORTED_MODULE_22__["common"]);
class GiveawaysMultipleGiveawayCreator extends _class_Module__WEBPACK_IMPORTED_MODULE_12__["Module"] {
  constructor() {
    super();
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mgc_toggleEditButton", mgc => {
      if (mgc.selected.length > 0) {
        mgc.addButton.hide();
        mgc.editButton.show();
      } else {
        mgc.editButton.hide();
        mgc.addButton.show();
      }
    });
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Adds a section 0 to the", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/new"
      }, "new giveaway"), " page that allows you to create multiple giveaways at once."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "There is also a special tool to create a train (multiple giveaways linked to each other), which has the option to automatically create a discussion for the train."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "The icon ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
        className: "fa fa-question-circle"
      }), " next to \"Create Multiple Giveaways\" in the section contains all of the steps that you have to follow to use the feature correctly."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "When you add a giveaway to the queue, a small numbered box appears at the panel below the buttons to represent that giveaway. If you hover over the box it shows the details of the giveaway."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "You can re-order/remove a giveaway by dragging and dropping the box."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "The giveaways will be created without reviewing or validating, so make sure that all of the fields were filled correctly or the creation will fail (if a train is being created, the failed giveaway will be disconnected and the previous giveaway will be connected to the next one instead).")),
      id: 'mgc',
      name: 'Multiple Giveaway Creator',
      sg: true,
      type: 'giveaways'
    };
  }
  async init() {
    if (this.esgst.newGiveawayPath) {
      this.mgc_addSection();
    }
    if (this.esgst.newDiscussionPath) {
      if (_class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].get('mgcAttach_step1') || _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].get('mgcAttach_step2')) {
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].delete('mgcAttach_step1');
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].delete('mgcAttach_step2');
        this.mgc_addCreateAndAttachButton();
      }
    } else if (this.esgst.editDiscussionPath) {
      if (_class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].get('mgcAttach_step4')) {
        this.mgc_editDiscussion();
      }
    } else if (this.esgst.discussionPath) {
      if (_class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].get('mgcAttach_step2')) {
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].delete('mgcAttach_step2');
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].set('mgcAttach_step3', window.location.pathname.match(/\/discussion\/(.+?)\//)[1]);
        await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].post(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.locationHref, {
          data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].xsrfToken}&do=close_discussion`
        });
        window.close();
      } else if (_class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].get('mgcAttach_step4')) {
        document.querySelector(`form[action="/discussions/edit"]`).submit();
      } else if (_class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].get('mgcAttach_step5')) {
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].delete('mgcAttach_step5');
        await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].post(_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.locationHref, {
          data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].xsrfToken}&do=reopen_discussion`
        });
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].set('mgcAttach_step6', true);
        window.location.reload();
      } else if (_class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].get('mgcAttach_step6')) {
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].delete('mgcAttach_step6');
        new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
          addScrollable: true,
          icon: 'fa-check',
          isTemp: true,
          title: 'Train created with success! You can close this now.'
        }).open();
      }
    }
  }
  mgc_addSection() {
    let attachButton, createTrainDescription, createTrainOption, detach, mgc, removeIcon, rows, section;
    rows = document.getElementsByClassName('form__rows')[0];
    if (rows) {
      mgc = {
        countries: document.querySelector(`[name="country_item_string"]`),
        gameId: document.querySelector(`[name="game_id"]`),
        gameType: document.querySelector(`[name="type"]`),
        copies: document.querySelector(`[name="copies"]`),
        keys: document.querySelector(`[name="key_string"]`),
        startTime: document.querySelector(`[name="start_time"]`),
        endTime: document.querySelector(`[name="end_time"]`),
        region: document.querySelector(`[name="region_restricted"]`),
        whoCanEnter: document.querySelector(`[name="who_can_enter"]`),
        whitelist: document.querySelector(`.form__row--who-can-enter [name="whitelist"]`),
        groups: document.querySelector(`[name="group_item_string"]`),
        level: document.querySelector(`[name="contributor_level"]`),
        description: document.querySelector(`[name="description"]`),
        timezone: new Date().getTimezoneOffset(),
        datas: [],
        values: [],
        selected: [],
        created: [],
        createdValues: [],
        countryNames: {},
        groupNames: {},
        gameName: undefined,
        editButton: undefined,
        discussionPanel: undefined,
        discussionLink: undefined,
        giveaways: undefined
      };
      let elements = document.querySelector(`[data-input="country_item_string"]`).querySelectorAll(`[data-item-id]`);
      for (let i = 0, n = elements.length; i < n; i++) {
        let element = elements[i];
        mgc.countryNames[element.getAttribute('data-item-id')] = element.getAttribute('data-name');
      }
      elements = document.querySelector(`[data-input="group_item_string"]`).querySelectorAll(`[data-item-id]`);
      for (let i = 0, n = elements.length; i < n; i++) {
        let element = elements[i];
        mgc.groupNames[element.getAttribute('data-item-id')] = element.getAttribute('data-name');
      }
      mgc.gameName = mgc.gameId.nextElementSibling;
      let context = createElements(rows, 'afterbegin', [{
        attributes: {
          class: 'esgst-form-row',
          title: getFeatureTooltip('mgc')
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'esgst-form-heading'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'esgst-form-heading-number'
            },
            text: '0.',
            type: 'div'
          }, {
            attributes: {
              class: 'esgst-form-heading-text'
            },
            type: 'div',
            children: [{
              text: 'Create Multiple Giveaways ',
              type: 'node'
            }, {
              attributes: {
                class: 'fa fa-question-circle esgst-clickable'
              },
              type: 'i'
            }]
          }]
        }, {
          attributes: {
            class: 'esgst-gm-section esgst-form-row-indent'
          },
          type: 'div',
          children: [{
            type: 'div',
            children: [{
              type: 'div'
            }, {
              attributes: {
                class: 'esgst-hidden'
              },
              type: 'div',
              children: [{
                type: 'div'
              }]
            }]
          }]
        }]
      }]);
      section = context.lastElementChild;
      createTooltip(context.firstElementChild.lastElementChild.lastElementChild, `
				<div class="esgst-bold">How To Use</div>
				<ol>
					<li>If you want to create a train, enable 'Create train', otherwise go to step 3.</li>
					<li>If you want to attach a discussion to the train, click 'Attach' and follow the steps.</li>
					<li>Fill the details of the giveaway (you can use Giveaway Templates for this).</li>
					<li>If you are creating a train, you must generate next/previous links by clicking 'Generate' and following the steps, otherwise go to the next step.</li>
					<li>If you want to add a counter to the giveaways, click 'Generate' and follow the steps.</li>
					<li>You can either add each giveaway at a time, by typing the game name, filling the copies/keys fields and clicking 'Add', or all giveaways at the same time, by clicking 'Import' and following the steps.</li>
					<li>If you want to play with the order of the giveaways you can use 'Shuffle' to change their order.</li>
					<li>When you have added all the giveaways and are ready to create them, click 'Create' and wait until the process is done.</li>
				</ol>
				<div>You can add certain variables to the description of the giveaways (before clicking 'Add') that will be replaced with certain details for each giveaway:</div>
				<ul>
					<li>[esgst-level] - The level of the giveaway.</li>
					<li>[esgst-name] - The name of the game being given away.</li>
					<li>[esgst-steam-id] - The Steam app/sub id of the game being given away.</li>
					<li>[esgst-steam-type] - The Steam type of the game being given away ("app" or "sub").</li>
					<li>[esgst-steam-url] - The Steam store URL of the game being given away (https://store.steampowered.com/type/id).</li>
				</ul>
			`);
      createTrainOption = section.firstElementChild;
      createTrainDescription = createTrainOption.lastElementChild;
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_createTrain')) {
        createTrainDescription.classList.remove('esgst-hidden');
      }
      this.esgst.mgc_createTrainSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_18__["ToggleSwitch"](createTrainOption.firstElementChild, 'mgc_createTrain', false, 'Create train.', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_createTrain'));
      this.esgst.mgc_createTrainSwitch.dependencies.push(createTrainDescription);
      this.esgst.mgc_removeLinksSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_18__["ToggleSwitch"](createTrainDescription.firstElementChild, 'mgc_removeLinks', false, 'Remove previous/next links from the first/last wagons.', false, false, 'Disabling this keeps the links as plain text.', _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_removeLinks'));
      _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
        color: 'green',
        icons: ['fa-gear'],
        name: 'Generate',
        onClick: this.mgc_generateFormat
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Generating...'
      }]).insert(section, 'beforeend');
      mgc.addButton = _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
        color: 'green',
        icons: ['fa-plus-circle'],
        name: 'Add',
        onClick: this.mgc_getValues.bind(this, mgc)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Adding...'
      }]).insert(section, 'beforeend');
      mgc.editButton = _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
        color: 'green',
        icons: ['fa-edit'],
        name: 'Edit',
        onClick: this.mgc_getValues.bind(this, mgc, true)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Editing...'
      }]).insert(section, 'beforeend').hide();
      _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
        color: 'green',
        icons: ['fa-arrow-circle-up'],
        name: 'Import',
        onClick: this.mgc_importGiveaways.bind(this, mgc)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Importing...'
      }]).insert(section, 'beforeend');
      _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
        color: 'green',
        icons: ['fa-arrow-circle-down'],
        name: 'Export',
        onClick: this.mgc_exportGiveaways.bind(this, mgc)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Exporting...'
      }]).insert(section, 'beforeend');
      _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
        color: 'green',
        icons: ['fa-random'],
        name: 'Shuffle',
        onClick: this.mgc_shuffleGiveaways.bind(this, mgc)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Shuffling...'
      }]).insert(section, 'beforeend');
      _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
        color: 'green',
        icons: ['fa-trash'],
        name: 'Empty',
        onClick: this.mgc_emptyGiveaways.bind(this, mgc)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Emptying...'
      }]).insert(section, 'beforeend');
      attachButton = _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
        color: 'green',
        icons: ['fa-paperclip'],
        name: 'Attach',
        onClick: this.mgc_attachDiscussion.bind(this, mgc)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Attaching...'
      }]).insert(section, 'beforeend');
      this.esgst.mgc_createTrainSwitch.dependencies.push(attachButton);
      if (!_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_createTrain')) {
        attachButton.hide();
      }
      mgc.viewButton = _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
        color: 'green',
        icons: ['fa-eye'],
        name: 'View Results',
        onClick: this.mgc_viewResults.bind(this, mgc)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Opening...'
      }]).insert(section, 'beforeend').hide();
      _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
        color: 'green',
        icons: ['fa-arrow-circle-right'],
        name: 'Create',
        onClick: () => {
          return new Promise(resolve => this.mgc_createGiveaways(mgc, resolve));
        }
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Creating...'
      }]).insert(section, 'beforeend');
      mgc.discussionPanel = createElements(section, 'beforeend', [{
        attributes: {
          class: 'esgst-hidden'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'esgst-bold'
          },
          text: `Discussion Attached:`,
          type: 'span'
        }, {
          type: 'a'
        }, {
          attributes: {
            class: 'esgst-clickable fa fa-times',
            title: 'Detach discussion'
          },
          type: 'i'
        }]
      }]);
      detach = mgc.discussionPanel.lastElementChild;
      detach.addEventListener('click', this.mgc_detachDiscussion.bind(this, mgc));
      mgc.discussionLink = detach.previousElementSibling;
      new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_18__["ToggleSwitch"](mgc.discussionPanel, 'mgc_bumpLast', false, 'Only insert the bump link in the last wagon.', false, false, `If disabled, the bump link will appear on all wagons.`, _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_bumpLast'));
      mgc.giveaways = createElements(section, 'beforeend', [{
        attributes: {
          class: 'pinned-giveaways__outer-wrap'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'pinned-giveaways__inner-wrap'
          },
          type: 'div'
        }, {
          attributes: {
            class: 'fa fa-trash',
            title: 'Drag a giveaway here to remove it'
          },
          type: 'i'
        }, {
          attributes: {
            class: 'esgst-description'
          },
          text: `To edit a giveaway, click on it and a 'Edit' button will appear. Then make your alterations and click 'Edit'.`,
          type: 'div'
        }, {
          attributes: {
            class: 'esgst-description'
          },
          text: `To edit multiple giveaways at once, hold the Ctrl key and click on the giveaways that you want tot edit. When giveaways are selected, an 'Edit' button will appear. Then make your alterations and click 'Edit'. When editing multiple giveaways, alterations to game, giveway type, number of copies and key list are not applied.`,
          type: 'div'
        }, {
          attributes: {
            class: 'esgst-description'
          },
          text: `Giveaways successfully created will turn green, giveaways successfully connected will be strikethrough (for train creations) and giveaways that were not successfully created will turn red.`,
          type: 'div'
        }]
      }]).firstElementChild;
      removeIcon = mgc.giveaways.nextElementSibling;
      removeIcon.addEventListener('dragenter', this.mgc_removeGiveaway.bind(this, mgc));
      JSON.parse(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].get('mgcCache', '[]')).forEach(values => {
        this.mgc_addGiveaway(mgc, values);
      });
    }
  }
  mgc_generateFormat() {
    let popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
      addScrollable: true,
      icon: 'fa-gear',
      title: `Generate formats:`
    });
    createElements(popup.description, 'afterbegin', [{
      attributes: {
        class: 'esgst-description'
      },
      type: 'div',
      children: [{
        text: `1. Generate the format you want by editing the input fields (the text outside of the blue box is what the result will look like).`,
        type: 'p'
      }, {
        type: 'br'
      }, {
        text: `2. Copy the text inside of the blue box (you can use the copy icon for that).`,
        type: 'p'
      }, {
        type: 'br'
      }, {
        text: `3. Paste it in the giveaway description (section 8 in this page), wherever you want it to appear.`,
        type: 'p'
      }]
    }]);
    let inputs = {};
    createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-bold'
      },
      text: 'Next/previous links',
      type: 'div'
    }]);
    inputs.previousPrefix = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-input',
        placeholder: '← ',
        type: 'text'
      },
      type: 'input'
    }]);
    inputs.previous = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-input',
        placeholder: 'Previous',
        type: 'text'
      },
      type: 'input'
    }]);
    inputs.previousSuffix = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-input',
        placeholder: ' ←',
        type: 'text'
      },
      type: 'input'
    }]);
    inputs.separator = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-input',
        placeholder: ' | ',
        type: 'text'
      },
      type: 'input'
    }]);
    inputs.nextPrefix = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-input',
        placeholder: '→ ',
        type: 'text'
      },
      type: 'input'
    }]);
    inputs.next = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-input',
        placeholder: 'Next',
        type: 'text'
      },
      type: 'input'
    }]);
    inputs.nextSuffix = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-input',
        placeholder: ' →',
        type: 'text'
      },
      type: 'input'
    }]);
    let output = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-preview esgst-text-left markdown'
      },
      type: 'div',
      children: [{
        type: 'div',
        children: [{
          type: 'p',
          children: [{
            text: '← ',
            type: 'node'
          }, {
            attributes: {
              href: '#'
            },
            text: 'Previous',
            type: 'a'
          }, {
            text: ' ← | → ',
            type: 'node'
          }, {
            attributes: {
              href: '#'
            },
            text: 'Next',
            type: 'a'
          }, {
            text: ' →',
            type: 'node'
          }]
        }]
      }, {
        type: 'br'
      }, {
        type: 'pre',
        children: [{
          text: `[ESGST-P]← [P]Previous[/P] ←[/ESGST-P] | [ESGST-N]→ [N]Next[/N] →[/ESGST-N]`,
          type: 'code'
        }]
      }, {
        attributes: {
          class: 'esgst-clickable fa fa-copy'
        },
        type: 'i'
      }]
    }]);
    let outputPreview = output.firstElementChild;
    let outputCopy = output.lastElementChild;
    let outputCode = outputCopy.previousElementSibling.firstElementChild;
    outputCopy.addEventListener('click', () => {
      copyValue(outputCopy, outputCode.textContent);
    });
    createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-bold'
      },
      text: 'Counter',
      type: 'div'
    }]);
    inputs.counter = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-input',
        placeholder: ' of ',
        type: 'text'
      },
      type: 'input'
    }]);
    let counterOutput = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-preview esgst-text-left markdown'
      },
      type: 'div',
      children: [{
        type: 'div',
        children: [{
          text: '1 of 10',
          type: 'p'
        }]
      }, {
        type: 'br'
      }, {
        type: 'pre',
        children: [{
          text: `[ESGST-C] of [/ESGST-C]`,
          type: 'code'
        }]
      }, {
        attributes: {
          class: 'esgst-clickable fa fa-copy'
        },
        type: 'i'
      }]
    }]);
    let counterOutputPreview = counterOutput.firstElementChild;
    let counterOutputCopy = counterOutput.lastElementChild;
    let counterOutputCode = counterOutputCopy.previousElementSibling.firstElementChild;
    counterOutputCopy.addEventListener('click', () => {
      copyValue(counterOutputCopy, counterOutputCode.textContent);
    });
    createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-bold'
      },
      text: `Bump link (for attached discussions)`,
      type: 'div'
    }]);
    inputs.bump = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-input',
        placeholder: 'Bump',
        type: 'text'
      },
      type: 'input'
    }]);
    let bumpOutput = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-preview esgst-text-left markdown'
      },
      type: 'div',
      children: [{
        type: 'div',
        children: [{
          type: 'p',
          children: [{
            attributes: {
              href: '#'
            },
            text: 'Bump',
            type: 'a'
          }]
        }]
      }, {
        type: 'br'
      }, {
        type: 'pre',
        children: [{
          text: `[ESGST-B]Bump[/ESGST-B]`,
          type: 'code'
        }]
      }, {
        attributes: {
          class: 'esgst-clickable fa fa-copy'
        },
        type: 'i'
      }]
    }]);
    let bumpOutputPreview = bumpOutput.firstElementChild;
    let bumpOutputCopy = bumpOutput.lastElementChild;
    let bumpOutputCode = bumpOutputCopy.previousElementSibling.firstElementChild;
    createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-bold'
      },
      text: `First train wagon link (for attached discussions)`,
      type: 'div'
    }]);
    inputs.train = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-input',
        placeholder: 'Choo choo!',
        type: 'text'
      },
      type: 'input'
    }]);
    let trainOutput = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-mgc-preview esgst-text-left markdown'
      },
      type: 'div',
      children: [{
        type: 'div',
        children: [{
          type: 'p',
          children: [{
            attributes: {
              href: '#'
            },
            text: 'Choo choo!',
            type: 'a'
          }]
        }]
      }, {
        type: 'br'
      }, {
        type: 'pre',
        children: [{
          text: `[ESGST-T]Choo choo![/ESGST-T]`,
          type: 'code'
        }]
      }, {
        attributes: {
          class: 'esgst-clickable fa fa-copy'
        },
        type: 'i'
      }]
    }]);
    let trainOutputPreview = trainOutput.firstElementChild;
    let trainOutputCopy = trainOutput.lastElementChild;
    let trainOutputCode = trainOutputCopy.previousElementSibling.firstElementChild;
    trainOutputCopy.addEventListener('click', () => {
      copyValue(trainOutputCopy, trainOutputCode.textContent);
    });
    for (let key in inputs) {
      if (inputs.hasOwnProperty(key)) {
        let input = inputs[key];
        input.addEventListener('input', async () => {
          if (key === 'counter') {
            counterOutputCode.textContent = `[ESGST-C]${input.value}[/ESGST-C]`;
            _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(counterOutputPreview, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, await parseMarkdown(null, `1${input.value}10`)));
          } else if (key === 'bump') {
            bumpOutputCode.textContent = `[ESGST-B]${input.value}[/ESGST-B]`;
            _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(bumpOutputPreview, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, await parseMarkdown(null, `[${input.value}](#)`)));
          } else if (key === 'train') {
            trainOutputCode.textContent = `[ESGST-B]${input.value}[/ESGST-B]`;
            _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(trainOutputPreview, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, await parseMarkdown(null, `[${input.value}](#)`)));
          } else {
            let markdown = '';
            let text = '';
            if (inputs.previousPrefix.value || inputs.previousSuffix.value) {
              text += `[ESGST-P]${inputs.previousPrefix.value}[P]${inputs.previous.value}[/P]${inputs.previousSuffix.value}[/ESGST-P]`;
              markdown += `${inputs.previousPrefix.value}[${inputs.previous.value}](#)${inputs.previousSuffix.value}`;
            } else {
              text += `[ESGST-P]${inputs.previous.value}[/ESGST-P]`;
              markdown += `[${inputs.previous.value}](#)`;
            }
            if (inputs.separator.value) {
              text += inputs.separator.value;
              markdown += inputs.separator.value;
            }
            if (inputs.nextPrefix.value || inputs.nextSuffix.value) {
              text += `[ESGST-N]${inputs.nextPrefix.value}[N]${inputs.next.value}[/N]${inputs.nextSuffix.value}[/ESGST-N]`;
              markdown += `${inputs.nextPrefix.value}[${inputs.next.value}](#)${inputs.nextSuffix.value}`;
            } else {
              text += `[ESGST-N]${inputs.next.value}[/ESGST-N]`;
              markdown += `[${inputs.next.value}](#)`;
            }
            outputCode.textContent = text;
            _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].insert(outputPreview, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, await parseMarkdown(null, markdown)));
          }
          input.style.width = `${input.value.length + 75}px`;
        });
      }
    }
    popup.open();
  }
  async mgc_getValues(mgc, edit) {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('ngdc') && (await _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.giveawaysNewGiveawayDescriptionChecker.check(mgc.description.value))) {
      return;
    }
    const editSelected = edit && mgc.selected.length > 0;
    let values = {};
    if (!editSelected) {
      values.gameId = mgc.gameId.value;
      values.gameType = mgc.gameType.value;
      values.copies = mgc.copies.value;
      values.keys = mgc.keys.value;
    }
    if (editSelected || values.gameId && (values.gameType === 'gift' && parseInt(values.copies) > 0 || values.gameType === 'key' && values.keys)) {
      this.esgst.busy = true;
      values.countries = mgc.countries.value.trim();
      if (!editSelected) {
        values.gameName = mgc.gameName.value;
      }
      values.startTime = mgc.startTime.value;
      values.endTime = mgc.endTime.value;
      values.region = mgc.region.value;
      values.whoCanEnter = mgc.whoCanEnter.value;
      values.whitelist = mgc.whitelist.value;
      values.groups = mgc.groups.value.trim();
      values.level = mgc.level.value;
      values.description = mgc.description.value;
      if (!editSelected) {
        const context = document.querySelector(`[data-autocomplete-id="${values.gameId}"]`);
        if (context) {
          values.steam = await this.esgst.modules.games.games_getInfo(context);
        }
        if (!values.steam) {
          values.steam = mgc.values[mgc.editPos] && mgc.values[mgc.editPos].steam;
        }
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_createTrain') && mgc.description.value.match(/\[ESGST-P|\[ESGST-N/) || !_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_createTrain')) {
        if (mgc.discussion && mgc.description.value.match(/\[ESGST-B]/) || !mgc.discussion) {
          if (editSelected) {
            let filteredValues = Object.fromEntries(Object.entries(values).filter(([, value]) => value));
            for (const pos of mgc.selected) {
              this.mgc_addGiveaway(mgc, {
                ...mgc.values[pos],
                ...filteredValues
              }, pos);
              mgc.giveaways.children[pos].classList.remove('selected');
            }
          } else {
            this.mgc_addGiveaway(mgc, values, edit ? mgc.editPos : null);
          }
          this.mgc_updateCache(mgc);
          mgc.copies.value = '1';
          mgc.keys.value = '';
          if (edit) {
            mgc.editButton.hide();
            mgc.addButton.show();
          }
          if (editSelected) {
            mgc.selected = [];
          }
        } else {
          createAlert('The bump link format is missing from the description.');
        }
      } else {
        createAlert('The next/previous links format is missing from the description.');
      }
    } else {
      createAlert('You must first fill the details of the giveaway.');
    }
  }
  mgc_addGiveaway(mgc, values, editPos) {
    let data, details;
    details = `${values.gameName.replace(/"/g, '&quot;')}\n`;
    if (values.gameType === 'gift') {
      details += `Gift\n${values.copies} Copies\n`;
    } else {
      details += `Keys\n${values.keys}\n`;
    }
    details += `\n${values.startTime} - ${values.endTime}\n`;
    if (values.region === '1') {
      details += 'Region Restricted\n';
    }
    if (values.whoCanEnter === 'everyone') {
      details += 'Public\n';
    } else if (values.whoCanEnter === 'invite_only') {
      details += 'Invite Only\n';
    } else {
      if (values.whitelist === '1') {
        details += 'Whitelist\n';
      }
      if (values.groups.trim()) {
        details += 'Groups\n';
      }
    }
    values.description = values.description.replace(/\[ESGST-LEVEL]/gi, values.level).replace(/\[ESGST-NAME]/gi, values.gameName).replace(/\[ESGST-STEAM-ID]/gi, values.steam ? values.steam.id : `$0`).replace(/\[ESGST-STEAM-TYPE]/gi, values.steam ? values.steam.type.slice(0, -1) : `$0`).replace(/\[ESGST-STEAM-URL]/gi, values.steam ? `http://store.steampowered.com/${values.steam.type.slice(0, -1)}/${values.steam.id}` : `$0`);
    details += `Level ${values.level}\n\n${values.description}`;
    data = `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].xsrfToken}&next_step=3&game_id=${values.gameId}&type=${values.gameType}&copies=${values.copies}&key_string=${encodeURIComponent(values.keys)}&timezone=${mgc.timezone}&start_time=${encodeURIComponent(values.startTime)}&end_time=${encodeURIComponent(values.endTime)}&region_restricted=${values.region}&country_item_string=${encodeURIComponent(values.countries)}&who_can_enter=${values.whoCanEnter}&whitelist=${values.whitelist}&group_item_string=${encodeURIComponent(values.groups)}&contributor_level=${values.level}&description=${encodeURIComponent(values.description)}`;
    if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_21__["Utils"].isSet(editPos)) {
      mgc.datas[editPos] = data;
      mgc.values[editPos] = values;
      mgc.giveaways.children[editPos].title = details;
    } else {
      mgc.datas.push(data);
      mgc.values.push(values);
      this.mgc_setGiveaway(createElements(mgc.giveaways, 'beforeend', [{
        attributes: {
          class: 'esgst-gm-giveaway',
          draggable: true,
          title: details
        },
        text: mgc.datas.length,
        type: 'div'
      }]), mgc);
    }
  }
  mgc_setGiveaway(giveaway, mgc) {
    giveaway.addEventListener('click', event => {
      if (event.ctrlKey) {
        const pos = parseInt(giveaway.textContent) - 1;
        if (mgc.selected.includes(pos)) {
          mgc.selected = mgc.selected.filter(selectedPos => selectedPos !== pos);
        } else {
          mgc.selected.push(pos);
        }
        giveaway.classList.toggle('selected');
        this.mgc_toggleEditButton(mgc);
      } else {
        this.mgc_setValues(giveaway, mgc);
      }
    });
    giveaway.addEventListener('dragstart', this.mgc_setSource.bind(this, giveaway, mgc));
    giveaway.addEventListener('dragenter', this.mgc_getSource.bind(this, giveaway, mgc));
  }
  mgc_setValues(giveaway, mgc) {
    let pos, values;
    pos = parseInt(giveaway.textContent) - 1;
    values = mgc.values[pos];
    mgc.countries.value = values.countries;
    mgc.gameId.value = values.gameId;
    mgc.gameType.value = values.gameType;
    mgc.copies.value = values.copies;
    mgc.keys.value = values.keys || '';
    mgc.gameName.value = values.gameName;
    mgc.startTime.value = values.startTime;
    mgc.endTime.value = values.endTime;
    mgc.region.value = values.region;
    mgc.whoCanEnter.value = values.whoCanEnter;
    mgc.whitelist.value = values.whitelist;
    mgc.groups.value = values.groups;
    mgc.level.value = values.level;
    mgc.description.value = values.description;
    values.edit = true;
    this.esgst.modules.giveawaysGiveawayTemplates.gts_applyTemplate(values);
    mgc.editPos = pos;
    mgc.editButton.show();
    mgc.addButton.hide();
  }
  mgc_setSource(giveaway, mgc, event) {
    mgc.source = giveaway;
    event.dataTransfer.setData('text/plain', '');
  }
  mgc_getSource(giveaway, mgc) {
    let current;
    current = mgc.source;
    do {
      current = current.previousElementSibling;
      if (current && current === giveaway) {
        mgc.giveaways.insertBefore(mgc.source, giveaway);
        this.mgc_updateCache(mgc);
        return;
      }
    } while (current);
    mgc.giveaways.insertBefore(mgc.source, giveaway.nextElementSibling);
    this.mgc_updateCache(mgc);
  }
  mgc_importGiveaways(mgc) {
    let counter, popup, progress, progressPanel, textArea;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
      addScrollable: true,
      icon: 'fa-arrow-up',
      isTemp: true,
      title: 'Import Giveaways'
    });
    popup.popup.classList.add('esgst-popup-large');
    createElements(popup.description, 'afterbegin', [{
      attributes: {
        class: 'esgst-description'
      },
      type: 'div',
      children: [{
        text: 'Insert the keys below. ',
        type: 'node'
      }, {
        attributes: {
          class: 'fa fa-question-circle'
        },
        type: 'i'
      }]
    }]);
    createTooltip(popup.description.firstElementChild.lastElementChild, `
			<div>Before importing, make sure you have filled the details of the giveaway (start/end times, regions, who can enter, whitelist, groups, level and description) or applied a template (with ${getFeatureNumber('gts').number} Giveaway Templates). You can also specify separate details for each giveaway using the parameters below:</div>
			<ul>
				<li><span class="esgst-bold">[countries="..."]</span> (Replace the 3 dots with the ids of the countries that the giveaway must be restricted to, separated by a comma followed by a space. The ids must be exactly how they appear in the country selection list. For example, "BR, US". If you do not want the giveaway to be region restricted, use the id "*", for example, [countries="*"].)</li>
				<li><span class="esgst-bold">[startTime="..."]</span> (Replace the 3 dots with the date that the giveaway must start, in the format "Mon D, YYYY H:MM xm". For example, "Jan 15, 2018 12:00 am". For the names of the months, use "Jan", "Feb", "Mar", "Apr", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov" and "Dec". For single-digit days/hours, do not put a 0 at the beginning. For example, use "Jan 1" instead of "Jan 01" and "9:00 am" instead of "09:00 am".)</li>
				<li><span class="esgst-bold">[endTime="..."]</span> (Replace the 3 dots with the date that the giveaway must end, in the same format as the start time.)</li>
				<li><span class="esgst-bold">[whoCanEnter="..."]</span> (Replace the 3 dots with either: "everyone", if the giveaway must be public; "invite_only", if the giveaway must be private; or "groups", if the giveaway must be restricted to groups/whitelist.)</li>
				<li><span class="esgst-bold">[groups="..."]</span> (Replace the 3 dots with the names of the groups that the giveaway must be restricted to, separated by a comma followed by a space. The names must be exactly how they appear on the group selection list. Use "My Whitelist" to include your whitelist in the groups. For example, "My Whitelist, Playing Appreciated, S.Gifts" or "My Whitelist".)</li>
				<li><span class="esgst-bold">[level="..."]</span> (Replace the 3 dots with the level that the giveaway must be restricted to. For example, "5".)</li>
				<li><span class="esgst-bold">[description="..."]</span> (Replace the 3 dots with the description that the giveaway must have. Use "\\n" to represent a new line. You can use all of the variables explained in the "How To Use" tooltip from section 0 here. For example, "The winner will be added on Steam for the delivery.\\n\\nPlease be patient.".)</li>
			</ul>
			<div>Put each giveaway in a separate line, using one of the formats below:</div>
			<ul>
				<li>Gift giveaways for 1 copy.</li>
				<ul>
					<li><span class="esgst-bold">Game Name</span></li>
					<li><span class="esgst-bold">Game Name https://store.steampowered.com/xxx/XXXXX</span></li>
					<li><span class="esgst-bold">https://store.steampowered.com/xxx/XXXXX</span></li>
				</ul>
				<li>Gift giveaways for more than 1 copy. Replace the X with the number of copies.</li>
				<ul>
					<li><span class="esgst-bold">Game Name (X Copies)</span></li>
					<li><span class="esgst-bold">Game Name https://store.steampowered.com/xxx/XXXXX (X Copies)</span></li>
					<li><span class="esgst-bold">https://store.steampowered.com/xxx/XXXXX (X Copies)</span></li>
				</ul>
				<li>Key giveaways. Gift links are also acceptable, so instead of "XXXXX-XXXXX-XXXXX" you can have "https://www.humblebundle.com/?gift=XxXXxxXXxXxxxXxx". For a link to be recognized it must start with either "http" or "https".</li>
				<ul>
					<li><span class="esgst-bold">Game Name XXXXX-XXXXX-XXXXX</span></li>
					<li><span class="esgst-bold">Game Name https://store.steampowered.com/xxx/XXXXX XXXXX-XXXXX-XXXXX</span></li>
					<li><span class="esgst-bold">https://store.steampowered.com/xxx/XXXXX XXXXX-XXXXX-XXXXX</span></li>
					<li><span class="esgst-bold">XXXXX-XXXXX-XXXXX Game Name</span></li>
					<li><span class="esgst-bold">XXXXX-XXXXX-XXXXX Game Name https://store.steampowered.com/xxx/XXXXX</span></li>
					<li><span class="esgst-bold">XXXXX-XXXXX-XXXXX https://store.steampowered.com/xxx/XXXXX</span></li>
				</ul>
			</ul>
			<div>By using the format that includes the link to the Steam store page of the game (https://store.steampowered.com/xxx/XXXXX), you make sure that if there are multiple games with the same name there will be a 100% match. If you do not use that format and there are multiple games with the same name, a popup will appear for you to decide which game should be used.</div>
			<br>
			<div>Here's an example:</div>
			<br>
			<div class="esgst-bold">Portal</div>
			<div class="esgst-bold">Portal XXXXX-XXXXX-XXXXX</div>
			<div class="esgst-bold">YYYYY-YYYYY-YYYYY Portal</div>
			<div class="esgst-bold">Portal https://store.steampowered.com/app/400 (2 Copies)</div>
			<div class="esgst-bold">https://store.steampowered.com/app/400 ZZZZZ-ZZZZZ-ZZZZZ</div>
			<br>
			<div>This example will create the 5 following giveaways if the options "Group adjacent keys for the same game." and "Group all keys for the same game." are disabled:</div>
			<br>
			<div>1 Portal giveaway for 1 gift copy.</div>
			<div>1 Portal giveaway for 1 key (XXXXX-XXXXX-XXXXX).</div>
			<div>1 Portal giveaway for 1 key (YYYYY-YYYYY-YYYYY).</div>
			<div>1 Portal giveaway for 2 gift copies.</div>
			<div>1 Portal giveaway for 1 key (ZZZZZ-ZZZZZ-ZZZZZ).</div>
			<br>
			<div>If the option "Group adjacent keys for the same game." is enabled, however, only 4 giveaways will be created, because the keys in the 2nd and 3rd giveaways are for the same game (Portal) and are adjacent (next to each other), so they will be grouped together in the same giveaway. Note that the key in the 5th giveaway is not adjacent, because the 4th giveaway is separating it from the others. So with this option enabled the 4 following giveaways will be created:</div>
			<br>
			<div>1 Portal giveaway for 1 gift copy.</div>
			<div>1 Portal giveaway for 2 keys (XXXXX-XXXXX-XXXXX and YYYYY-YYYYY-YYYYY).</div>
			<div>1 Portal giveaway for 2 gift copies.</div>
			<div>1 Portal giveaway for 1 key (ZZZZZ-ZZZZZ-ZZZZZ).</div>
			<br>
			<div>But if the option "Group all keys for the same game." is enabled, then only 3 giveaways will be created, because every single key found for the same game will be grouped together in a single giveaway, regardless of whether or not they are next to each other. So with this option enabled the 3 following giveaways will be created:</div>
			<br>
			<div>1 Portal giveaway for 1 gift copy.</div>
			<div>1 Portal giveaway for 3 keys (XXXXX-XXXXX-XXXXX, YYYYY-YYYYY-YYYYY and ZZZZZ-ZZZZZ-ZZZZZ).</div>
			<div>1 Portal giveaway for 2 gift copies.</div>
			<br>
			<div>And here's an example using separate details for each giveaway:</div>
			<br>
			<div class="esgst-bold">Portal [countries="BR, US"] [level="5"]</div>
			<div class="esgst-bold">Portal XXXXX-XXXXX-XXXXX [whoCanEnter="groups"] [groups="Playing Appreciated"]</div>
			<div class="esgst-bold">YYYYY-YYYYY-YYYYY Portal [whoCanEnter="groups"] [groups="My Whitelist"]</div>
			<div class="esgst-bold">Portal (2 Copies) [startTime="Apr 1, 2018 9:00 am"] [endTime="Apr 11, 2018 15:00 pm"] [whoCanEnter="invite_only"]</div>
			<div class="esgst-bold">Portal ZZZZZ-ZZZZZ-ZZZZZ [level="8"] [description="Appreciation for high level users.\\n\\nEnjoy!"]</div>
			<br>
			<div>Note that any missing parameters will be copied from the details that you have filled for the giveaway in the SteamGifts page. So, for example, if you have selected Everyone for Who Can Enter, the 1st and 5th giveaways will be public, because [whoCanEnter="..."] was not specified for them, so that detail will be copied over from the SteamGifts page.</div>
			<br>
			<div>Imported giveaways will not be automatically created, you still have to review them by clicking on the 'Create' button.</div>
			<br>
		`);
    let groupKeys = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_18__["ToggleSwitch"](popup.description, 'mgc_groupKeys', false, 'Group adjacent keys for the same game.', false, false, '', _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_groupKeys'));
    let groupAllKeys = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_18__["ToggleSwitch"](popup.description, 'mgc_groupAllKeys', false, 'Group all keys for the same game.', false, false, '', _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_groupAllKeys'));
    groupKeys.exclusions.push(groupAllKeys.container);
    groupAllKeys.exclusions.push(groupKeys.container);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_groupKeys')) {
      groupAllKeys.container.classList.add('esgst-hidden');
    } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_groupAllKeys')) {
      groupKeys.container.classList.add('esgst-hidden');
    }
    textArea = createElements(popup.scrollable, 'beforeend', [{
      type: 'textarea'
    }]);
    progressPanel = createElements(popup.description, 'beforeend', [{
      type: 'div',
      children: [{
        attributes: {
          class: 'esgst-progress-bar'
        },
        type: 'div'
      }, {
        type: 'div',
        children: [{
          text: '0',
          type: 'span'
        }, {
          text: ' of ',
          type: 'node'
        }, {
          text: '0',
          type: 'span'
        }, {
          text: ' giveaways imported.',
          type: 'node'
        }]
      }]
    }]);
    progress = {
      bar: progressPanel.firstElementChild,
      current: undefined,
      total: undefined
    };
    counter = progressPanel.lastElementChild;
    progress.current = counter.firstElementChild;
    progress.total = progress.current.nextElementSibling;
    _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
      color: 'green',
      icons: ['fa-arrow-circle-up'],
      name: 'Import',
      onClick: () => {
        return new Promise(resolve => this.mgc_getGiveaways(mgc, popup, progress, textArea, resolve));
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Importing...'
    }]).insert(popup.description, 'beforeend');
    popup.open(this.mgc_focusTextArea.bind(this, textArea));
    textArea.style.height = `${window.innerHeight * 0.9 - (popup.popup.offsetHeight - popup.scrollable.offsetHeight) - 25}px`;
    textArea.style.overflow = 'auto';
    textArea.addEventListener('paste', this.mgc_resizeTextArea.bind(this, popup, textArea));
  }
  mgc_resizeTextArea(popup, textArea) {
    let interval, value;
    value = textArea.value;
    interval = window.setInterval(() => {
      if (value !== textArea.value) {
        window.clearInterval(interval);
        textArea.style.height = `${window.innerHeight * 0.9 - (popup.popup.offsetHeight - popup.scrollable.offsetHeight) - 25}px`;
        textArea.style.overflow = 'auto';
      }
    }, 250);
  }
  mgc_getGiveaways(mgc, popup, progress, textArea, callback) {
    let giveaways, lines, max, n, value;
    this.esgst.busy = true;
    giveaways = [];
    lines = textArea.value.trim().split(/\n/);
    for (let i = 0, n = lines.length; i < n; ++i) {
      const line = lines[i].trim();
      if (line) {
        giveaways.push(line);
      }
    }
    textArea.value = `${giveaways.join('\n')}\n`;
    n = giveaways.length;
    if (window.$(progress.bar).progressbar('instance')) {
      max = window.$(progress.bar).progressbar('option', 'max');
      value = window.$(progress.bar).progressbar('option', 'value');
      if (value + n !== max) {
        window.$(progress.bar).progressbar({
          max: value + n,
          value: value
        });
        progress.total.textContent = value + n;
      }
    } else {
      window.$(progress.bar).progressbar({
        max: n
      });
      progress.total.textContent = n;
    }
    // noinspection JSIgnoredPromiseFromCall
    this.mgc_importGiveaway(giveaways, 0, mgc, n, popup, progress, textArea, () => {
      this.mgc_updateCache(mgc);
      popup.close();
    }, callback);
  }
  async mgc_importGiveaway(giveaways, i, mgc, n, popup, progress, textArea, mainCallback, callback) {
    let copies, found, giveaway, key, keyPos, match, name, namePos, values;
    if (i < n) {
      let countries = giveaways[i].match(/\[countries="(.+?)"]/);
      let startTime = giveaways[i].match(/\[startTime="(.+?)"]/);
      let endTime = giveaways[i].match(/\[endTime="(.+?)"]/);
      let whoCanEnter = giveaways[i].match(/\[whoCanEnter="(.+?)"]/);
      let groups = giveaways[i].match(/\[groups="(.+?)"]/);
      let level = giveaways[i].match(/\[level="(.+?)"]/);
      let description = giveaways[i].match(/\[description="(.+?)"]/);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_createTrain') && !(description && description[1] || mgc.description.value || '').match(/\[ESGST-P]|\[ESGST-N]/)) {
        createAlert('The next/previous links format is missing from the description.');
        callback();
        return;
      }
      if (mgc.discussion && !(description && description[1] || mgc.description.value || '').match(/\[ESGST-B]/)) {
        createAlert('The bump link format is missing from the description.');
        callback();
        return;
      }
      if (countries) {
        if (countries[1] === '*') {
          countries = '*';
        } else {
          let ids = countries[1].split(/,\s/);
          countries = '';
          ids.forEach(id => {
            let element = document.querySelector(`[data-input="country_item_string"]`).querySelector(`[data-name$="${id}"]`);
            if (element) {
              countries += `${element.getAttribute('data-item-id')} `;
            }
          });
        }
      }
      let whitelist = '';
      if (groups) {
        let ids = groups[1].split(/,\s/);
        groups = '';
        ids.forEach(id => {
          if (id === 'My Whitelist') {
            whitelist = '1';
            return;
          }
          let element = document.querySelector(`[data-input="group_item_string"]`).querySelector(`[data-name$="${id}"]`);
          if (element) {
            groups += `${element.getAttribute('data-item-id')} `;
          }
        });
      }
      let steamLink = giveaways[i].match(/https?:\/\/.*?store\.steampowered\.com\/(app|sub)\/(\d+)/);
      let steamInfo = null;
      if (steamLink) {
        steamInfo = {
          id: steamLink[2],
          type: `${steamLink[1]}s`
        };
      }
      giveaways[i] = giveaways[i].replace(/\[(.+?)="(.+?)"]/g, '').replace(/https?:\/\/.*?store\.steampowered\.com(.*?\s|.*)/, `[ESGST] `).trim();
      match = giveaways[i].match(/^(([\d\w]{5}(-[\d\w]{5}){2,}\s?|https?:\/\/.+?\s?)+)\s(.+)$/);
      if (match) {
        key = true;
        keyPos = 1;
        namePos = 4;
      } else {
        match = giveaways[i].match(/^(.+?)\s(([\d\w]{5}(-[\d\w]{5}){2,}\s?|https?:\/\/.+?\s?)+)$/);
        if (match) {
          key = true;
          keyPos = 2;
          namePos = 1;
        } else {
          match = giveaways[i].match(/^(.+?)(\s\((\d+?)\sCopies\))?$/);
          if (match) {
            key = false;
            namePos = 1;
          }
        }
      }
      if (match) {
        name = match[namePos].replace(/\[ESGST]/, '').trim().toLowerCase();
        values = {
          countries: (countries === '*' ? '' : countries || mgc.countries.value || '').trim(),
          startTime: startTime && startTime[1] || mgc.startTime.value || '',
          endTime: endTime && endTime[1] || mgc.endTime.value || '',
          region: countries === '*' ? '0' : countries ? '1' : mgc.region.value || '0',
          whoCanEnter: whoCanEnter && whoCanEnter[1] || mgc.whoCanEnter.value || 'everyone',
          whitelist: whitelist || mgc.whitelist.value || '0',
          groups: (groups || mgc.groups.value || '').trim(),
          level: level && level[1] || mgc.level.value || '0',
          description: description ? description[1].replace(/\\n/g, '\n') : mgc.description.value || '',
          gameType: undefined,
          keys: undefined,
          copies: undefined
        };
        if (key) {
          values.gameType = 'key';
          values.keys = match[keyPos].replace(/\s/g, '\n');
        } else {
          values.gameType = 'gift';
          copies = match[3];
          if (copies) {
            values.copies = copies;
          } else {
            values.copies = '1';
          }
        }
        let toRemove = [giveaways[i]];
        if ((_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_groupKeys') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_groupAllKeys')) && key) {
          let k = i;
          do {
            found = false;
            giveaway = giveaways[k + 1];
            if (giveaway) {
              let nextSteamLink = giveaway.match(/https?:\/\/.*?store\.steampowered\.com\/(app|sub)\/(\d+)/);
              let nextSteamInfo = null;
              if (nextSteamLink) {
                nextSteamInfo = {
                  id: nextSteamLink[2],
                  type: `${nextSteamLink[1]}s`
                };
              }
              giveaway = giveaway.replace(/\[(.+?)="(.+?)"]/g, '').replace(/https?:\/\/.*?store\.steampowered\.com(.*?\s|.*)/, `[ESGST] `).trim();
              match = giveaway.match(/^(([\d\w]{5}(-[\d\w]{5}){2,}\s?|https?:\/\/.+?\s?)+)\s(.+)$/);
              if (match) {
                key = true;
                keyPos = 1;
                namePos = 4;
              } else {
                match = giveaway.match(/^(.+?)\s(([\d\w]{5}(-[\d\w]{5}){2,}\s?|https?:\/\/.+?\s?)+)$/);
                if (match) {
                  key = true;
                  keyPos = 2;
                  namePos = 1;
                } else {
                  key = false;
                }
              }
              if (match && key && (name && match[namePos].replace(/\[ESGST]/, '').trim().toLowerCase() === name || nextSteamInfo && steamInfo && nextSteamInfo.type === steamInfo.type && nextSteamInfo.id === steamInfo.id)) {
                found = true;
                values.keys += `\n${match[keyPos].replace(/\s/g, '\n')}`;
                toRemove.push(giveaways.splice(k + 1, 1)[0]);
                k--;
                n--;
              }
            }
            k++;
          } while (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_groupKeys') && found || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_groupAllKeys') && giveaways[k + 1]);
        }
        // noinspection JSIgnoredPromiseFromCall
        this.mgc_getGiveaway(giveaways, i + 1, toRemove, mgc, n, name, popup, progress, steamInfo, textArea, values, mainCallback, callback, await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].post('/ajax.php', {
          data: `do=autocomplete_giveaway_game&page_number=1&search_query=${encodeURIComponent(steamInfo && steamInfo.id || name)}`
        }));
      } else {
        createAlert('The next giveaway is not in the right format. Please correct it and click on "Import" again to continue importing.');
        callback();
      }
    } else {
      mainCallback();
    }
  }
  async mgc_getGiveaway(giveaways, i, toRemove, mgc, n, name, popup, progress, steamInfo, textArea, values, mainCallback, callback, response) {
    let conflictPopup, context, element, elements, exactMatch, info, k, matches, numElements, value;
    elements = _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].parse(response.json.html).getElementsByClassName('table__row-outer-wrap');
    exactMatch = null;
    matches = [];
    for (k = 0, numElements = elements.length; k < numElements; k++) {
      element = elements[k];
      if (element.getAttribute('data-autocomplete-name').toLowerCase() === name) {
        if (steamInfo) {
          info = await this.esgst.modules.games.games_getInfo(element);
          if (steamInfo.type === info.type && steamInfo.id === info.id) {
            exactMatch = element;
            break;
          }
        } else {
          matches.push(element);
        }
      } else if (steamInfo) {
        info = await this.esgst.modules.games.games_getInfo(element);
        if (steamInfo.type === info.type && steamInfo.id === info.id) {
          exactMatch = element;
          break;
        }
      }
    }
    if (!exactMatch && matches.length === 1) {
      exactMatch = matches[0];
    }
    if (exactMatch) {
      values.gameName = exactMatch.getAttribute('data-autocomplete-name');
      values.gameId = exactMatch.getAttribute('data-autocomplete-id');
      values.steam = await this.esgst.modules.games.games_getInfo(exactMatch);
      this.mgc_addGiveaway(mgc, values);
      value = window.$(progress.bar).progressbar('option', 'value') + toRemove.length;
      window.$(progress.bar).progressbar('option', 'value', value);
      progress.current.textContent = value;
      toRemove.forEach(line => {
        textArea.value = textArea.value.replace(`${line}\n`, '');
      });
      window.setTimeout(() => this.mgc_importGiveaway(giveaways, i, mgc, n, popup, progress, textArea, mainCallback, callback), 0);
    } else if (matches.length > 0) {
      conflictPopup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
        icon: 'fa-exclamation',
        isTemp: true,
        title: `There are ${matches.length} matches for ${name}. Please select the correct match.`,
        addScrollable: 'left'
      });
      context = conflictPopup.getScrollable();
      matches.forEach(match => {
        let element = createElements(context, 'beforeend', [{
          context: match.cloneNode(true)
        }]);
        element.classList.remove('is-clickable');
        const button = _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create({
          color: 'green',
          icons: ['fa-arrow-circle-right'],
          name: 'Select',
          onClick: async () => {
            conflictPopup.close();
            values.gameName = element.getAttribute('data-autocomplete-name');
            values.gameId = element.getAttribute('data-autocomplete-id');
            values.steam = await this.esgst.modules.games.games_getInfo(element);
            this.mgc_addGiveaway(mgc, values);
            value = window.$(progress.bar).progressbar('option', 'value') + toRemove.length;
            window.$(progress.bar).progressbar('option', 'value', value);
            progress.current.textContent = value;
            toRemove.forEach(line => {
              textArea.value = textArea.value.replace(`${line}\n`, '');
            });
            window.setTimeout(() => this.mgc_importGiveaway(giveaways, i, mgc, n, popup, progress, textArea, mainCallback, callback), 0);
          }
        }).insert(element, 'afterbegin');
        button.nodes.outer.style.position = 'absolute';
        button.nodes.outer.style.right = '50px';
      });
      conflictPopup.onClose = callback;
      conflictPopup.open();
    } else {
      createAlert(`${steamInfo && `${steamInfo.type}/${steamInfo.id}` || name} was not found! Please correct the title of the game and click on "Import" again to continue importing (it must be exactly like on Steam).`);
      callback();
    }
  }
  mgc_focusTextArea(textArea) {
    textArea.focus();
  }
  mgc_exportGiveaways(mgc) {
    let file, i, j, n, popup, values;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
      addScrollable: true,
      icon: 'fa-arrow-down',
      title: 'Export'
    });
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_18__["ToggleSwitch"](popup.description, 'mgc_reversePosition', false, `Export keys in reverse position (before the name of the game).`, false, false, '', _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_reversePosition'));
    _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create({
      color: 'green',
      icons: ['fa-arrow-down'],
      name: 'Export',
      onClick: () => {
        file = '';
        for (i = 0, n = mgc.giveaways.children.length; i < n; ++i) {
          values = mgc.giveaways.children[i].title.split(/\n/);
          if (values[1] === 'Gift') {
            if (parseInt(values[2].match(/\d+/)[0]) > 1) {
              file += `${values[0]} (${values[2]})\r\n`;
            } else {
              file += `${values[0]}\r\n`;
            }
          } else {
            for (j = 2; values[j]; ++j) {
              if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_reversePosition')) {
                file += `${values[j]} ${values[0]}\r\n`;
              } else {
                file += `${values[0]} ${values[j]}\r\n`;
              }
            }
          }
        }
        downloadFile(file, 'giveaways.txt');
      }
    }).insert(popup.description, 'beforeend');
    popup.open();
  }
  mgc_emptyGiveaways(mgc) {
    if (window.confirm('Are you sure you want to empty the creator?')) {
      _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].delete('mgcCache');
      this.esgst.busy = false;
      mgc.datas = [];
      mgc.values = [];
      mgc.selected = [];
      mgc.created = [];
      mgc.createdValues = [];
      mgc.giveaways.innerHTML = '';
      mgc.copies.value = '1';
      mgc.keys.value = '';
    }
  }
  mgc_createGiveaways(mgc, callback) {
    if (!mgc.datas.length) {
      createAlert('There are no giveaways in the queue. Click on the "Add" button to add a giveaway to the queue.');
      callback();
      return;
    }
    let popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
      addScrollable: true,
      icon: 'fa-arrow-circle-right',
      title: 'ESGST will create the giveaways below. Are you sure you want to continue?'
    });
    let rows = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'table esgst-mgc-table'
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'table__heading'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'No.',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-fill'
          },
          text: 'Game',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'Copies/Keys',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'Start Time',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'End Time',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'Region Restricted',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'Who Can Enter',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'Level',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small'
          },
          text: 'Description',
          type: 'div'
        }]
      }, {
        attributes: {
          class: 'table__rows'
        },
        type: 'div'
      }]
    }]).lastElementChild;
    for (let i = 0, n = mgc.giveaways.children.length; i < n; i++) {
      let values = mgc.values[parseInt(mgc.giveaways.children[i].textContent) - 1];
      let regionRestricted = 'No';
      if (values.region === '1') {
        regionRestricted = `Yes (`;
        values.countries.split(/\s/).forEach(id => {
          //Logger.info(id, mgc.countryNames[id]);
          regionRestricted += `${mgc.countryNames[id].match(/.+\s(.+)$/)[1]}, `;
        });
        regionRestricted = `${regionRestricted.slice(0, -2)})`;
      }
      let whoCanEnter = 'Everyone';
      if (values.whoCanEnter === 'invite_only') {
        whoCanEnter = 'Invite Only';
      } else if (values.whoCanEnter === 'groups') {
        whoCanEnter = `Groups (`;
        if (values.whitelist === '1') {
          whoCanEnter += `Whitelist, `;
        }
        if (values.groups) {
          values.groups.split(/\s/).forEach(id => {
            whoCanEnter += `${mgc.groupNames[id]}, `;
          });
        }
        whoCanEnter = `${whoCanEnter.slice(0, -2)})`;
      }
      let keys = [];
      if (values.keys) {
        for (const key of values.keys.split(/\n/)) {
          if (!key) {
            continue;
          }
          keys.push({
            text: key,
            type: 'node'
          }, {
            type: 'br'
          });
        }
      }
      createElements(rows, 'beforeend', [{
        attributes: {
          class: 'table__row-outer-wrap'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'table__row-inner-wrap'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'table__column--width-small'
            },
            text: i + 1,
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-fill'
            },
            type: 'div',
            children: [values.steam ? {
              attributes: {
                class: 'table__column__secondary-link',
                href: `https://store.steampowered.com/${values.steam.type.slice(0, -1)}/${values.steam.id}`
              },
              text: values.gameName,
              type: 'a'
            } : {
              text: values.gameName,
              type: 'span'
            }]
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: keys.length ? null : `${values.copies} Copies`,
            type: 'div',
            children: keys.length ? keys : null
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: values.startTime,
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: values.endTime,
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: regionRestricted,
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: whoCanEnter,
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small'
            },
            text: values.level,
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small',
              title: values.description.replace(/"/g, '&quot;')
            },
            text: values.description.length > 100 ? `${values.description.slice(0, 100)}...` : values.description,
            type: 'div'
          }]
        }]
      }]);
    }
    _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create({
      template: 'success',
      name: 'Yes',
      onClick: this.mgc_createGiveaways_2.bind(this, mgc, popup, callback)
    }).insert(popup.description, 'beforeend');
    _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create({
      template: 'error',
      name: 'No',
      onClick: () => popup.close()
    }).insert(popup.description, 'beforeend');
    popup.onClose = () => {
      if (popup.isOpen) {
        callback();
      }
    };
    popup.open();
  }
  mgc_createGiveaways_2(mgc, popup, callback) {
    popup.onClose = null;
    popup.close();
    mgc.copies.value = '1';
    mgc.keys.value = '';
    mgc.viewButton.hide();
    mgc.saveGiveaways = {};
    // noinspection JSIgnoredPromiseFromCall
    this.mgc_createGiveaway(0, mgc, mgc.giveaways.children.length, _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cewgd') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_gi') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('lpv') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('rcvc') ? this.mgc_saveGiveaways.bind(this, mgc, this.mgc_completeCreation.bind(this, mgc, callback)) : this.mgc_completeCreation.bind(this, mgc, callback));
  }
  async mgc_createGiveaway(i, mgc, n, callback) {
    if (i < n) {
      if (!mgc.giveaways.children[i].classList.contains('success')) {
        const j = parseInt(mgc.giveaways.children[i].textContent) - 1;
        // noinspection JSIgnoredPromiseFromCall
        this.mgc_checkCreation(i, mgc, n, callback, await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].post('/giveaways/new', {
          data: mgc.datas[j].replace(/start_time=(.+?)&/, this.mgc_correctTime.bind(this))
        }));
      } else {
        window.setTimeout(() => this.mgc_createGiveaway(i + 1, mgc, n, callback), 0);
      }
    } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_createTrain')) {
      // noinspection JSIgnoredPromiseFromCall
      this.mgc_createTrain(0, mgc, mgc.created.length, callback);
    } else {
      callback();
    }
  }
  mgc_correctTime(fullMatch, match1) {
    const offsetTime = Date.now() + 5000;
    if (new Date(decodeURIComponent(match1)).getTime() < offsetTime) {
      return `start_time=${encodeURIComponent(Object(date_fns_format__WEBPACK_IMPORTED_MODULE_8__["default"])(offsetTime, this.esgst.newGiveawayDateFormat))}&`;
    } else {
      return fullMatch;
    }
  }
  async mgc_checkCreation(i, mgc, n, callback, response) {
    let errors, errorsTitle, giveaway, j, numErrors, responseHtml;
    giveaway = mgc.giveaways.children[i];
    if (response.url.match(/\/giveaways\/new/)) {
      if (response.text.match(/Error\.\sYou\salready\sposted\san\sidentical\sgiveaway\swithin\sthe\spast\s2\sminutes\.\sTo\sprevent\sdouble\sposts,\sit's\sbeen\sblocked\./)) {
        const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
          addScrollable: true,
          icon: 'fa-circle-o-notch fa-spin',
          title: _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, "Waiting ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", null), " minutes to create another identical giveaway... Please do not close this popup. If you do not want this waiting period, create a single multiple-copy giveaway for the game.")
        });
        popup.open();
        setCountdown(popup.title.firstElementChild, 120, async () => {
          popup.close();
          const j = parseInt(mgc.giveaways.children[i].textContent) - 1;
          window.setTimeout(async () => this.mgc_checkCreation(i, mgc, n, callback, await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].post('/giveaways/new', {
            data: mgc.datas[j].replace(/start_time=(.+?)&/, this.mgc_correctTime.bind(this))
          })), 0);
        });
      } else {
        giveaway.classList.add('error');
        errors = response.html.getElementsByClassName('form__row__error');
        errorsTitle = `Errors:\n`;
        for (j = 0, numErrors = errors.length; j < numErrors; ++j) {
          errorsTitle += `${errors[j].textContent}\n`;
        }
        errorsTitle += '\n';
        giveaway.title = `${errorsTitle}${giveaway.title}`;
        window.setTimeout(() => this.mgc_createGiveaway(++i, mgc, n, callback), 0);
      }
    } else {
      giveaway.classList.add('success');
      responseHtml = response.html;
      mgc.created.push({
        giveaway: giveaway,
        html: (await buildGiveaway(responseHtml, response.url)).html,
        url: response.url
      });
      mgc.createdValues.push(mgc.values[i]);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cewgd') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gc_gi') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('lpv') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('rcvc')) {
        giveaway = (await this.esgst.modules.giveaways.giveaways_get(responseHtml, false, response.url))[0];
        if (giveaway) {
          mgc.saveGiveaways[giveaway.code] = giveaway;
        }
        window.setTimeout(() => this.mgc_createGiveaway(++i, mgc, n, callback), 0);
      } else {
        window.setTimeout(() => this.mgc_createGiveaway(++i, mgc, n, callback), 0);
      }
    }
  }
  async mgc_saveGiveaways(mgc, callback) {
    let user = {
      steamId: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('steamId'),
      username: _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('username')
    };
    let ugd;
    const savedUser = await getUser(null, user);
    let giveaways = null;
    if (savedUser) {
      giveaways = savedUser.giveaways;
    }
    if (!giveaways) {
      giveaways = {
        sent: {
          apps: {},
          subs: {}
        },
        won: {
          apps: {},
          subs: {}
        },
        sentTimestamp: 0,
        wonTimestamp: 0
      };
      if (savedUser) {
        ugd = savedUser.ugd;
        if (ugd) {
          if (ugd.sent) {
            for (let key in ugd.sent.apps) {
              if (ugd.sent.apps.hasOwnProperty(key)) {
                giveaways.sent.apps[key] = [];
                for (let i = 0, n = ugd.sent.apps[key].length; i < n; ++i) {
                  mgc.saveGiveaways[ugd.sent.apps[key][i].code] = ugd.sent.apps[key][i];
                  giveaways.sent.apps[key].push(ugd.sent.apps[key][i].code);
                }
              }
            }
            for (let key in ugd.sent.subs) {
              if (ugd.sent.subs.hasOwnProperty(key)) {
                giveaways.sent.subs[key] = [];
                for (let i = 0, n = ugd.sent.subs[key].length; i < n; ++i) {
                  mgc.saveGiveaways[ugd.sent.subs[key][i].code] = ugd.sent.subs[key][i];
                  giveaways.sent.subs[key].push(ugd.sent.subs[key][i].code);
                }
              }
            }
            giveaways.sentTimestamp = ugd.sentTimestamp;
          }
          if (ugd.won) {
            for (let key in ugd.won.apps) {
              if (ugd.won.apps.hasOwnProperty(key)) {
                giveaways.won.apps[key] = [];
                for (let i = 0, n = ugd.won.apps[key].length; i < n; ++i) {
                  mgc.saveGiveaways[ugd.won.apps[key][i].code] = ugd.won.apps[key][i];
                  giveaways.won.apps[key].push(ugd.won.apps[key][i].code);
                }
              }
            }
            for (let key in ugd.won.subs) {
              if (ugd.won.subs.hasOwnProperty(key)) {
                giveaways.won.subs[key] = [];
                for (let i = 0, n = ugd.won.subs[key].length; i < n; ++i) {
                  mgc.saveGiveaways[ugd.won.subs[key][i].code] = ugd.won.subs[key][i];
                  giveaways.won.subs[key].push(ugd.won.subs[key][i].code);
                }
              }
            }
            giveaways.wonTimestamp = ugd.wonTimestamp;
          }
        }
      }
    }
    for (const key in mgc.saveGiveaways) {
      if (mgc.saveGiveaways.hasOwnProperty(key)) {
        let giveaway = mgc.saveGiveaways[key];
        if (!giveaways.sent[giveaway.gameType][giveaway.gameSteamId]) {
          giveaways.sent[giveaway.gameType][giveaway.gameSteamId] = [];
        }
        if (giveaways.sent[giveaway.gameType][giveaway.gameSteamId].indexOf(giveaway.code) < 0) {
          giveaways.sent[giveaway.gameType][giveaway.gameSteamId].push(giveaway.code);
        }
      }
    }
    user.values = {
      giveaways: giveaways
    };
    await lockAndSaveGiveaways(mgc.saveGiveaways);
    await saveUser(null, null, user);
    callback();
  }
  async mgc_createTrain(i, mgc, n, callback) {
    if (i >= n || n - 1 === 0) {
      callback();
    } else {
      let responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].get(mgc.created[i].url)).html;
      let id = responseHtml.querySelector(`[name="giveaway_id"]`).value;
      let description = responseHtml.querySelector(`[name="description"]`).value;
      let replaceCallback = null;
      if (i === 0) {
        mgc.firstWagon = mgc.created[i].url;
        replaceCallback = this.mgc_getNext;
      } else if (i === n - 1) {
        replaceCallback = this.mgc_getPrevious;
      } else {
        replaceCallback = this.mgc_getBoth;
      }
      description = description.replace(/\[ESGST-P](.+?)\[\/ESGST-P](.+?)\[ESGST-N](.+?)\[\/ESGST-N]/g, replaceCallback.bind(this, i, mgc, false));
      description = description.replace(/\[ESGST-P](.+?)\[\/ESGST-P]|\[ESGST-N](.+?)\[\/ESGST-N]/g, replaceCallback.bind(this, i, mgc, true));
      description = description.replace(/\[ESGST-C](.+?)\[\/ESGST-C]/g, this.mgc_getCounter.bind(this, i, n));
      if (mgc.discussion && (!_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_bumpLast') || i === n - 1)) {
        description = description.replace(/\[ESGST-B](.+?)\[\/ESGST-B]/g, `[$1](/discussion/${mgc.discussion}/)`);
      } else {
        description = description.replace(/\[ESGST-B](.+?)\[\/ESGST-B]/g, '');
      }
      await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].post('/ajax.php', {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].xsrfToken}&do=edit_giveaway_description&giveaway_id=${id}&description=${encodeURIComponent(description.trim())}`
      });
      mgc.created[i].giveaway.classList.add('connected');
      window.setTimeout(() => this.mgc_createTrain(i + 1, mgc, n, callback), 0);
    }
  }
  mgc_getNext(i, mgc, single, fullMatch, match1, match2, match3) {
    let match, next, nextPref, nextSuf;
    if (single && match2 || !single) {
      match = (single ? match2 : match3).match(/(.*?)\[N](.+?)\[\/N](.*?)$/);
      if (match) {
        nextPref = match[1];
        next = match[2];
        nextSuf = match[3];
      } else {
        nextPref = '';
        next = single ? match2 : match3;
        nextSuf = '';
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_removeLinks') || single) {
        return `${nextPref}[${next}](${mgc.created[i + 1].url})${nextSuf}`;
      } else {
        return `${match1}${match2}${nextPref}[${next}](${mgc.created[i + 1].url})${nextSuf}`;
      }
    } else {
      return '';
    }
  }
  mgc_getPrevious(i, mgc, single, fullMatch, match1, match2, match3) {
    let match, prev, prevPref, prevSuf;
    if (single && match1 || !single) {
      match = match1.match(/(.*?)\[P](.+?)\[\/P](.*?)$/);
      if (match) {
        prevPref = match[1];
        prev = match[2];
        prevSuf = match[3];
      } else {
        prevPref = '';
        prev = match1;
        prevSuf = '';
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mgc_removeLinks') || single) {
        return `${prevPref}[${prev}](${mgc.created[i - 1].url})${prevSuf}`;
      } else {
        return `${prevPref}[${prev}](${mgc.created[i - 1].url})${prevSuf}${match2}${match3}`;
      }
    } else {
      return '';
    }
  }
  mgc_getBoth(i, mgc, single, fullMatch, match1, match2, match3) {
    let match, next, nextPref, nextSuf, prev, prevPref, prevSuf;
    if (single) {
      if (match1) {
        return this.mgc_getPrevious(i, mgc, true, fullMatch, match1);
      } else {
        return this.mgc_getNext(i, mgc, true, fullMatch, null, match2);
      }
    } else {
      match = match1.match(/(.*?)\[P](.+?)\[\/P](.*?)$/);
      if (match) {
        prevPref = match[1];
        prev = match[2];
        prevSuf = match[3];
      } else {
        prevPref = '';
        prev = match1;
        prevSuf = '';
      }
      match = match3.match(/(.*?)\[N](.+?)\[\/N](.*?)$/);
      if (match) {
        nextPref = match[1];
        next = match[2];
        nextSuf = match[3];
      } else {
        nextPref = '';
        next = match3;
        nextSuf = '';
      }
      return `${prevPref}[${prev}](${mgc.created[i - 1].url})${prevSuf}${match2}${nextPref}[${next}](${mgc.created[i + 1].url})${nextSuf}`;
    }
  }
  mgc_getCounter(i, n, fullMatch, match1) {
    return `${i + 1}${match1}${n}`;
  }
  mgc_completeCreation(mgc, callback) {
    if (mgc.discussion) {
      if (mgc.created.length) {
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].delete('mgcCache');
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].set('mgcAttach_step4', mgc.firstWagon);
        _class_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tabs"].open(`https://www.steamgifts.com/discussion/${mgc.discussion}/`);
        mgc.viewButton.show();
      }
      callback();
    } else {
      if (mgc.created.length) {
        _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].delete('mgcCache');
        mgc.viewButton.show();
      }
      callback();
    }
  }
  mgc_shuffleGiveaways(mgc) {
    if (!mgc.datas.length) {
      createAlert('There are no giveaways in the queue. Click on the "Add" button to add a giveaway to the queue.');
      return;
    }
    let i;
    for (i = mgc.giveaways.children.length; i > -1; --i) {
      mgc.giveaways.appendChild(mgc.giveaways.children[Math.random() * i | 0]);
    }
    this.mgc_updateCache(mgc);
  }
  mgc_updateCache(mgc) {
    let cache, i, n;
    cache = [];
    for (i = 0, n = mgc.giveaways.children.length; i < n; ++i) {
      cache.push(mgc.values[parseInt(mgc.giveaways.children[i].textContent) - 1]);
    }
    _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].set('mgcCache', JSON.stringify(cache));
  }
  mgc_attachDiscussion(mgc) {
    let input, popup;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
      addScrollable: true,
      icon: 'fa-comments',
      title: `Attach discussion:`
    });
    createElements(popup.description, 'afterbegin', [{
      attributes: {
        class: 'esgst-description'
      },
      type: 'div',
      children: [{
        text: `You can attach an existing or a new discussion. To attach an existing discussion, simply enter its code below and click "Attach Existing". To attach a new discussion, simply click "Attach New".`,
        type: 'div'
      }, {
        type: 'br'
      }, {
        text: `Use [ESGST-B][/ESGST-B] to delimit the bump link in the description of the giveaway, for example: ### [ESGST-B]Bump[/ESGST-B]`,
        type: 'div'
      }, {
        type: 'br'
      }, {
        text: `Use [ESGST-T][/ESGST-T] to delimit the train link in the description of the discussion (this link will lead to the first giveaway of the train), for example: ### [ESGST-T]Choo choo![/ESGST-T]`,
        type: 'div'
      }, {
        type: 'br'
      }, {
        text: `When the discussion page opens in your browser at the end of the train creation, wait until it has completely finished altering it (you will get a popup when this happens).`,
        type: 'div'
      }, {
        type: 'br'
      }]
    }]);
    input = createElements(popup.description, 'beforeend', [{
      attributes: {
        placeholder: 'XXXXX',
        type: 'text'
      },
      type: 'input'
    }]);
    _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
      color: 'green',
      icons: ['fa-paperclip'],
      name: 'Attach Existing',
      onClick: this.mgc_attachExistingDiscussion.bind(this, input, mgc, popup)
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Attaching...'
    }]).insert(popup.description, 'beforeend');
    _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
      color: 'green',
      icons: ['fa-paperclip'],
      name: 'Attach New',
      onClick: () => {
        return new Promise(resolve => this.mgc_attachNewDiscussion(mgc, popup, resolve));
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Attaching...'
    }]).insert(popup.description, 'beforeend');
    popup.open();
  }
  mgc_attachExistingDiscussion(input, mgc, popup) {
    mgc.discussion = input.value;
    mgc.discussionPanel.classList.remove('esgst-hidden');
    mgc.discussionLink.href = `/discussion/${mgc.discussion}/`;
    mgc.discussionLink.textContent = mgc.discussion;
    popup.close();
  }
  mgc_attachNewDiscussion(mgc, popup, callback) {
    let win;
    _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].set('mgcAttach_step1', true);
    win = _class_Tabs__WEBPACK_IMPORTED_MODULE_17__["Tabs"].open('https://www.steamgifts.com/discussions/new');
    window.setTimeout(() => this.mgc_checkAttached(mgc, popup, win, callback), 100);
  }
  mgc_checkAttached(mgc, popup, win, callback) {
    if (win.closed) {
      mgc.discussion = _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].get('mgcAttach_step3');
      _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].delete('mgcAttach_step3');
      mgc.discussionPanel.classList.remove('esgst-hidden');
      mgc.discussionLink.href = `/discussion/${mgc.discussion}/`;
      mgc.discussionLink.textContent = mgc.discussion;
      callback();
      popup.close();
    } else {
      window.setTimeout(() => this.mgc_checkAttached(mgc, popup, win, callback), 100);
    }
  }
  mgc_addCreateAndAttachButton() {
    let rows;
    rows = document.getElementsByClassName('form__rows')[0];
    _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
      template: 'success',
      name: 'Create & Attach',
      onClick: this.mgc_createAndAttachDiscussion.bind(this, rows)
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Creating & attaching...'
    }]).insert(rows, 'beforeend');
  }
  mgc_createAndAttachDiscussion(rows) {
    _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].set('mgcAttach_step2', true);
    rows.parentElement.submit();
  }
  mgc_editDiscussion() {
    const description = document.querySelector(`[name=description]`);
    description.value = description.value.replace(/\[ESGST-T(.+?)\[\/ESGST-T/g, `[$1](${_class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].get('mgcAttach_step4')})`);
    _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].delete('mgcAttach_step4');
    _class_LocalStorage__WEBPACK_IMPORTED_MODULE_11__["LocalStorage"].set('mgcAttach_step5', true);
    document.getElementsByClassName('js__submit-form')[0].click();
  }
  mgc_detachDiscussion(mgc) {
    mgc.discussion = null;
    mgc.discussionPanel.classList.add('esgst-hidden');
  }
  async mgc_viewResults(mgc) {
    const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
      addScrollable: true
    });
    const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_20__["PageHeading"].create('mgc', ['Results']).insert(popup.description, 'afterbegin');
    const items = [];
    for (const item of mgc.created) {
      items.push(...item.html);
    }
    createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'popup__keys__list'
      },
      type: 'div',
      children: items
    }]);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mm')) {
      const giveaways = await this.esgst.modules.giveaways.giveaways_get(popup.scrollable);
      this.esgst.modules.generalMultiManager.mm(heading.nodes.outer, giveaways, 'Giveaways');
    }
    _components_Button__WEBPACK_IMPORTED_MODULE_19__["Button"].create([{
      color: 'white',
      icons: ['fa-copy'],
      name: 'Copy Giveaway List',
      onClick: () => new Promise(resolve => {
        _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].common.copyValue(null, mgc.createdValues.map((values, index) => `${values.gameName} - ${mgc.created[index].url}`).join('\n'));
        window.setTimeout(resolve, 2000);
      })
    }, {
      template: 'success',
      isDisabled: true,
      name: 'Copied!'
    }]).insert(heading.nodes.outer, 'beforeend');
    popup.open();
  }
  mgc_removeGiveaway(mgc) {
    if (window.confirm('Are you sure you want to remove this giveaway?')) {
      mgc.source.remove();
      mgc.source = null;
      this.mgc_updateCache(mgc);
    }
  }
}
const giveawaysMultipleGiveawayCreator = new GiveawaysMultipleGiveawayCreator();


/***/ }),
/* 338 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalMultiManager", function() { return generalMultiManager; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(146);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(168);
/* harmony import */ var _class_Checkbox__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(246);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(220);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(222);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(211);
/* harmony import */ var _class_Process__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(279);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(219);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(97);
/* harmony import */ var _class_Tabs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(231);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(212);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(218);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(144);
























const createElements = _Common__WEBPACK_IMPORTED_MODULE_23__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"]),
  createFadeMessage = _Common__WEBPACK_IMPORTED_MODULE_23__["common"].createFadeMessage.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_23__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"]),
  createTooltip = _Common__WEBPACK_IMPORTED_MODULE_23__["common"].createTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"]),
  downloadFile = _Common__WEBPACK_IMPORTED_MODULE_23__["common"].downloadFile.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"]),
  escapeMarkdown = _Common__WEBPACK_IMPORTED_MODULE_23__["common"].escapeMarkdown.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"]),
  getChildByClassName = _Common__WEBPACK_IMPORTED_MODULE_23__["common"].getChildByClassName.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"]),
  lockAndSaveDiscussions = _Common__WEBPACK_IMPORTED_MODULE_23__["common"].lockAndSaveDiscussions.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"]),
  lockAndSaveGiveaways = _Common__WEBPACK_IMPORTED_MODULE_23__["common"].lockAndSaveGiveaways.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"]),
  selectSwitches = _Common__WEBPACK_IMPORTED_MODULE_23__["common"].selectSwitches.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"]);
class GeneralMultiManager extends _class_Module__WEBPACK_IMPORTED_MODULE_11__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
        className: "fa fa-gears"
      }), ") to the main page heading of any page that allows you to do stuff with multiple giveaways/discussions/users/games at once."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "When you click on the button, a popout appears where you can select what type of item you want to manage (giveaways, discussions, users or games) and enable the manager for that type. When you do this, checkboxes are added in front of each item in the page, allowing you to select which ones you want to manage."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "You can:"), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Search and replace something in the description of the selected giveaways."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Hide the selected giveaways, if ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "gf_s"
      }), " is enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Bookmark/unbookmark the selected giveaways, if", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "gb"
      }), " is enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Calculate how much time you have to wait until you have enough points to enter the selected giveaways, if ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "ttec"
      }), " is enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Export the selected giveaways to encrypted giveaways, if", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "ged"
      }), " is enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Hide the selected discussions, if ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "df_s"
      }), " is enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Mark the selected discussions as visited/unvisited, if", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "gdttt"
      }), " is enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Tag the selected users with the same tags, if ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "ut"
      }), ", is enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Check the selected users for whitelists/blacklists, if", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "wbc"
      }), " is enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Check the selected users for suspensions, if ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "usc"
      }), ' ', "is enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Tag the selected games with the same tags, if ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "gt"
      }), ", is enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Export the selected giveaways/discussions/users/games to links or to a custom format that you can specify."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Tag the selected groups with the same tags, if", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "gpt"
      }), ", is enabled.")), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "On SteamTrades you can only manage users.")),
      id: 'mm',
      name: 'Multi-Manager',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    if (this.esgst.parameters.esgst) return;
    this.mm();
  }
  mm(context, items, itemsKey) {
    if (!context && !this.esgst.mainPageHeading) return;
    let obj = {};
    obj.button = createHeadingButton({
      context,
      id: 'mm',
      icons: ['fa-gears'],
      title: 'Multi-manage'
    });
    obj.checkboxes = {
      Giveaways: {},
      Discussions: {},
      Users: {},
      Games: {},
      Groups: {}
    };
    obj.counters = {
      Giveaways: 0,
      Discussions: 0,
      Users: 0,
      Games: 0,
      Groups: 0
    };
    obj.counterElements = {};
    this.esgst.mm_enable = this.mm_enable.bind(this, obj);
    this.esgst.mm_disable = this.mm_disable.bind(this, obj);
    obj.button.addEventListener('click', this.mm_openPopout.bind(this, obj, items, itemsKey));
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('mm_enableGames')) {
      this.esgst.gameFeatures.push(this.mm_getGames.bind(this));
    }
  }
  mm_getGames(games, main) {
    this.esgst.mm_enable(_class_Scope__WEBPACK_IMPORTED_MODULE_15__["Scope"].findData('current', 'games'), 'Games');
  }
  mm_openPopout(obj, items, itemsKey) {
    if (obj.popout) return;
    obj.popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_12__["Popout"]('esgst-mm-popout', obj.button, 0, true);
    obj.headings = createElements(obj.popout.popout, 'afterbegin', [{
      attributes: {
        class: 'esgst-mm-headings'
      },
      type: 'div'
    }, {
      attributes: {
        class: 'esgst-mm-sections'
      },
      type: 'div'
    }]);
    obj.sections = obj.headings.nextElementSibling;
    let activeIndex = 0;
    Object.keys(obj.checkboxes).forEach((key, i) => {
      if (!this.esgst.sg && key !== 'Users') return;
      let heading = createElements(obj.headings, 'beforeend', [{
        type: 'div',
        children: [{
          type: 'span'
        }, {
          text: ` ${key}`,
          type: 'node'
        }, {
          type: 'br'
        }, {
          attributes: {
            class: 'esgst-bold'
          },
          text: obj.counters[key],
          type: 'span'
        }, {
          text: ' selected',
          type: 'node'
        }]
      }]);
      obj.counterElements[key] = heading.lastElementChild;
      let toggleSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_19__["ToggleSwitch"](heading.firstElementChild, `mm_enable${key}`, true, '', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get(`mm_enable${key}`));
      toggleSwitch.onEnabled = this.mm_enable.bind(this, obj, itemsKey === key ? items : null, key);
      toggleSwitch.onDisabled = this.mm_disable.bind(this, obj, itemsKey === key ? items : null, key);
      this.mm_setSection(obj, createElements(obj.sections, 'beforeend', [{
        type: 'div'
      }]), itemsKey === key ? items : null, key);
      if (this.esgst.sg) {
        heading.addEventListener('click', this.mm_changeActiveSection.bind(this, obj, i));
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get(`mm_enable${key}`)) {
        activeIndex = i;
      }
    });
    this.mm_changeActiveSection(obj, this.esgst.sg ? activeIndex : 0);
    obj.popout.open();
  }
  mm_changeActiveSection(obj, i) {
    for (let j = obj.headings.children.length - 1; j > -1; j--) {
      obj.headings.children[j].classList.remove('esgst-selected');
    }
    obj.headings.children[i].classList.add('esgst-selected');
    for (let j = obj.sections.children.length - 1; j > -1; j--) {
      obj.sections.children[j].classList.remove('esgst-selected');
    }
    obj.sections.children[i].classList.add('esgst-selected');
  }
  mm_enable(obj, items, key) {
    if (!items) {
      items = _class_Scope__WEBPACK_IMPORTED_MODULE_15__["Scope"].findData('current', key.toLowerCase());
    }
    items.forEach(item => {
      let checkbox = getChildByClassName(item.innerWrap, 'esgst-mm-checkbox') || getChildByClassName(item.innerWrap.parentElement, 'esgst-mm-checkbox');
      if (checkbox) return;
      checkbox = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_8__["Checkbox"](createElements(item.innerWrap, key.match(/Giveaways|Discussions/) ? 'afterbegin' : 'beforebegin', [{
        attributes: {
          class: 'esgst-mm-checkbox'
        },
        type: 'div'
      }]), false, false, {
        select: 'Add item to Multi-Manager selection',
        unselect: 'Remove item from Multi-Manager selection'
      });
      item[`mmCheckbox${key}`] = checkbox;
      checkbox.checkbox.setAttribute('data-mm-key', key);
      checkbox.onPreEnabled = this.mm_selectItem.bind(this, obj, item, key, 1);
      checkbox.onPreDisabled = this.mm_selectItem.bind(this, obj, item, key, 0);
      let itemKey = item.type ? `${item.type}_${item.code}` : item.code;
      if (!obj.checkboxes[key][itemKey]) {
        obj.checkboxes[key][itemKey] = [];
      }
      obj.checkboxes[key][itemKey].push(checkbox);
    });
    this.mm_resetCounters(obj);
  }
  mm_disable(obj, items, key) {
    obj.checkboxes[key] = {};
    if (!items) {
      items = _class_Scope__WEBPACK_IMPORTED_MODULE_15__["Scope"].findData('current', key.toLowerCase());
    }
    items.forEach(item => {
      let checkbox = getChildByClassName(item.innerWrap, 'esgst-mm-checkbox') || getChildByClassName(item.innerWrap.parentElement, 'esgst-mm-checkbox');
      if (checkbox) {
        checkbox.remove();
      }
      item.mm = 0;
    });
    this.mm_resetCounters(obj);
  }
  mm_selectItem(obj, item, key, value, event) {
    if (event) {
      if (event.shiftKey) {
        const currentKey = `mmCheckbox${key}`;
        const items = _class_Scope__WEBPACK_IMPORTED_MODULE_15__["Scope"].findData('current', key.toLowerCase());
        const elements = document.querySelectorAll(`[data-mm-key="${key}"]`);
        let foundStart = false;
        // @ts-ignore
        for (const element of elements) {
          if (element.closest(`.is-hidden, .is_hidden, .esgst-hidden`)) {
            continue;
          }
          if (!foundStart) {
            if (element === this.esgst.mmSelectionStart) {
              foundStart = true;
            }
            continue;
          }
          if (element === (item[currentKey] && item[currentKey].checkbox)) {
            break;
          }
          const currentItem = items.filter(subItem => element === (subItem[currentKey] && subItem[currentKey].checkbox))[0];
          if (currentItem) {
            currentItem[currentKey].change(true, null, null, event);
          }
        }
        this.esgst.mmSelectionStart = null;
      } else {
        this.esgst.mmSelectionStart = event.currentTarget;
      }
    }
    let isNew = false;
    item.mm = value;
    obj.checkboxes[key][item.type ? `${item.type}_${item.code}` : item.code].forEach(checkbox => {
      if (value) {
        if (!checkbox.value) {
          isNew = true;
          checkbox.isBlocked = true;
          checkbox.check();
          checkbox.isBlocked = false;
        }
      } else {
        if (checkbox.value) {
          isNew = true;
          checkbox.isBlocked = true;
          checkbox.uncheck();
          checkbox.isBlocked = false;
        }
      }
    });
    if (isNew && (!value || item.outerWrap.offsetParent)) {
      obj.counters[key] += value ? 1 : -1;
      if (obj.counterElements[key]) {
        obj.counterElements[key].textContent = obj.counters[key];
      }
    }
  }
  mm_resetCounters(obj) {
    for (let key in obj.counters) {
      if (obj.counters.hasOwnProperty(key)) {
        obj.counters[key] = 0;
        if (obj.counterElements[key]) {
          obj.counterElements[key].textContent = 0;
        }
      }
    }
  }
  mm_setSection(obj, context, items, key) {
    if (!items) {
      items = _class_Scope__WEBPACK_IMPORTED_MODULE_15__["Scope"].findData('current', key.toLowerCase());
    }
    let sections = {
      default: [{
        buttons: [{
          check: true,
          options: [{
            color: 'white',
            tooltip: 'All',
            icons: ['fa-square'],
            name: '',
            onClick: selectSwitches.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"], obj.checkboxes[key], 'check', null)
          }, {
            template: 'loading',
            isDisabled: true,
            name: ''
          }]
        }, {
          check: true,
          options: [{
            color: 'white',
            tooltip: 'None',
            icons: ['fa-square-o'],
            name: '',
            onClick: selectSwitches.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"], obj.checkboxes[key], 'uncheck', null)
          }, {
            template: 'loading',
            isDisabled: true,
            name: ''
          }]
        }, {
          check: true,
          options: [{
            color: 'white',
            tooltip: 'Inverse',
            icons: ['fa-plus-square-o'],
            name: '',
            onClick: selectSwitches.bind(_Common__WEBPACK_IMPORTED_MODULE_23__["common"], obj.checkboxes[key], 'toggle', null)
          }, {
            template: 'loading',
            isDisabled: true,
            name: ''
          }]
        }],
        name: `Select:`
      }, {
        buttons: [],
        name: ''
      }, {
        buttons: [{
          check: true,
          options: [{
            color: 'green',
            tooltip: 'Links',
            icons: ['fa-globe'],
            name: '',
            onClick: this.mm_exportLinks.bind(this, obj, items, key)
          }, {
            template: 'loading',
            isDisabled: true,
            name: ''
          }]
        }, {
          check: true,
          options: [{
            color: 'green',
            tooltip: 'Custom',
            icons: ['fa-pencil'],
            name: '',
            onClick: this.mm_exportCustom.bind(this, obj, items, key)
          }, {
            template: 'loading',
            isDisabled: true,
            name: ''
          }]
        }],
        name: `Export to:`
      }],
      Giveaways: [[], [{
        check: true,
        key: 'searchReplace',
        options: {
          color: 'green',
          tooltip: 'Search and replace in descriptions of selected giveaways',
          icons: ['fa-search'],
          name: ''
        }
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('gf') && _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('gf_s'),
        options: [{
          color: 'green',
          tooltip: "Add selected giveaways to ESGST's single filter list",
          icons: ['fa-eye-slash'],
          name: '',
          onClick: this.mm_hideGiveaways.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('ttec'),
        options: [{
          color: 'green',
          tooltip: 'Calculate time to enter for selected giveaways',
          icons: ['fa-clock-o'],
          name: '',
          onClick: this.mm_calculateGiveaways.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('gb'),
        options: [{
          color: 'green',
          tooltip: 'Bookmark selected giveaways',
          icons: ['fa-bookmark'],
          name: '',
          onClick: this.mm_bookmarkGiveaways.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('gb'),
        options: [{
          color: 'green',
          tooltip: 'Unbookmark selected giveaways',
          icons: ['fa-bookmark-o'],
          name: '',
          onClick: this.mm_unbookmarkGiveaways.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }], [{
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('ged'),
        options: [{
          color: 'green',
          tooltip: 'Encrypted giveaways',
          icons: ['fa-puzzle-piece'],
          name: '',
          onClick: this.mm_exportEncryptedGiveaways.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }]],
      Discussions: [[], [{
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('df') && _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('df_s'),
        options: [{
          color: 'green',
          tooltip: "Add selected discussions to ESGST's single filter list",
          icons: ['fa-eye-slash'],
          name: '',
          onClick: this.mm_hideDiscussions.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: true,
        options: [{
          color: 'green',
          tooltip: 'Bookmark selected discussions',
          icons: ['fa-bookmark'],
          name: '',
          onClick: this.mm_bookmarkDiscussions.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: true,
        options: [{
          color: 'green',
          tooltip: 'Unbookmark selected discussions',
          icons: ['fa-bookmark-o'],
          name: '',
          onClick: this.mm_unbookmarkDiscussions.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('gdttt'),
        options: [{
          color: 'green',
          tooltip: 'Mark selected discussions as visited',
          icons: ['fa-check'],
          name: '',
          onClick: this.mm_visitDiscussions.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('gdttt'),
        options: [{
          color: 'green',
          tooltip: 'Mark selected discussions as unvisited',
          icons: ['fa-times'],
          name: '',
          onClick: this.mm_unvisitDiscussions.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }], []],
      Users: [[], [{
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('ut'),
        options: [{
          color: 'green',
          tooltip: 'Tag selected users',
          icons: ['fa-tags'],
          name: '',
          onClick: this.esgst.modules.usersUserTags.tags_openMmPopup.bind(this.esgst.modules.usersUserTags, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('wbc'),
        options: [{
          color: 'green',
          tooltip: 'Check selected users for whitelists / blacklists',
          icons: ['fa-heart', 'fa-ban', 'fa-question-circle'],
          name: '',
          onClick: this.mm_selectWbcUsers.bind(this, obj, items, 'wbc')
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('usc'),
        options: [{
          color: 'green',
          tooltip: 'Check selected users for suspensions',
          icons: ['fa-ban', 'fa-question-circle'],
          name: '',
          onClick: this.mm_selectWbcUsers.bind(this, obj, items, 'usc')
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('glwc') && _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('glwc_mm'),
        options: [{
          color: 'green',
          tooltip: 'Check libraries / wishlists of selected users',
          icons: ['fa-folder', 'fa-star', 'fa-question-circle'],
          name: '',
          onClick: this.mm_selectGlwcUsers.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }], []],
      Games: [[], [{
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('gt'),
        options: [{
          color: 'green',
          tooltip: 'Tag selected games',
          icons: ['fa-tags'],
          name: '',
          onClick: this.esgst.modules.gamesGameTags.tags_openMmPopup.bind(this.esgst.modules.gamesGameTags, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: true,
        options: [{
          color: 'green',
          tooltip: "Add selected games to SteamGifts' filter list",
          icons: ['fa-eye-slash'],
          name: '',
          onClick: this.mm_hideGames.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }, {
        check: true,
        options: [{
          color: 'green',
          tooltip: 'Categorize games for Steam',
          icons: ['fa-clone'],
          name: '',
          onClick: this.mm_categorizeGames.bind(this, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }], []],
      Groups: [[], [{
        check: _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('gpt'),
        options: [{
          color: 'green',
          tooltip: 'Tag selected groups',
          icons: ['fa-tags'],
          name: '',
          onClick: this.esgst.modules.groupsGroupTags.tags_openMmPopup.bind(this.esgst.modules.groupsGroupTags, obj, items)
        }, {
          template: 'loading',
          isDisabled: true,
          name: ''
        }]
      }], []]
    };
    sections.default.forEach((section, i) => {
      let group = createElements(context, 'beforeend', [{
        attributes: {
          class: 'esgst-button-group esgst-mm-button-group'
        },
        type: 'div',
        children: [{
          text: `${section.name}`,
          type: 'span'
        }]
      }]);
      let buttons = sections[key][i].concat(section.buttons);
      buttons.forEach(button => {
        if (!button.check) return;
        let element = _components_Button__WEBPACK_IMPORTED_MODULE_20__["Button"].create(button.options).insert(group, 'beforeend').nodes.outer;
        if (button.key === 'searchReplace') {
          new _class_Process__WEBPACK_IMPORTED_MODULE_14__["Process"]({
            button: element,
            context: _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("div", {
              className: "markdown"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("ul", null)),
            popup: {
              icon: 'fa-search',
              title: 'Search & Replace',
              options: [{
                check: true,
                description: _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, "Use", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("a", {
                  className: "esgst-bold",
                  href: "https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/Regular_Expressions"
                }, "regular expression"), "."),
                id: 'mm_useRegExp',
                tooltip: null
              }],
              textInputs: [{
                placeholder: `Example without regular expression: query | Example with regular expression: /query/flags`,
                title: `Search for: `
              }, {
                placeholder: 'Do not use regular expression here.',
                title: `Replace with: `
              }],
              addProgress: true,
              addScrollable: true
            },
            urls: {
              arguments: [items],
              doNotTrigger: true,
              id: 'mm',
              init: this.mm_initUrls.bind(this),
              lockPerLoad: true,
              request: {
                request: this.mm_getSearchReplaceUrlRequest.bind(this)
              },
              restart: true
            }
          });
        }
      });
    });
    obj[`progress${key}`] = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_21__["NotificationBar"].create().insert(context, 'beforeend').hide();
    createTooltip(createElements(context, 'beforeend', [{
      attributes: {
        class: 'esgst-description'
      },
      type: 'div',
      children: [...(key === 'Games' ? [{
        text: `You can enter Steam links for the games that you want to hide below (in the https://store.steampowered.com/app/909580/ format and with one link per line). If you click on "Hide" and the text area has links, the games in the text area will be hidden instead of the selected ones.`,
        type: 'node'
      }, {
        type: 'br'
      }, {
        type: 'br'
      }] : []), {
        text: 'Enter the custom format below. ',
        type: 'node'
      }, {
        attributes: {
          class: 'fa fa-question-circle'
        },
        type: 'i'
      }]
    }]).lastElementChild, `
			<div>Delimit the line to be replaced and duplicated (in case more than one items were selected) with [line][/line]. If you want the lines to be sorted in ascending order use [line-asc][/line] instead, and for descending order use [line-desc][/line]. Then build your custom format between [line] and [/line] using the templates below. Some templates are not available depending on which page you are on.</div>
			<br/>
			<div class="esgst-bold">Giveaways:</div>
			<ul>
				<li>[code] - The 5-character code of the giveaway.</li>
				<li>[comments] - The current number of comments that the giveaway has.</li>
				<li>[copies] - The number of copies being given away.</li>
				<li>[creator] - The creator of the giveaway.</li>
				<li>[end-time="$"] - When the giveaway ended/will end. Replace $ with the date templates specified at the end of this tooltip.</li>
				<li>[entries] - The current number of entries that the giveaway has.</li>
				<li>[groups] - The groups of the giveaway (only works when Content Loader > Giveaway Groups is enabled as "Panel (On Page Load)").</li>
				<li>[level] - The level of the giveaway.</li>
				<li>[name] - The name of the game being given away.</li>
				<li>[points] - The number of points that the giveaway is worth.</li>
				<li>[short-url] - The short URL of the giveaway (https://www.steamgifts.com/giveaway/XXXXX/).</li>
				<li>[start-time="$"] - When the giveaway started. Replace $ with the date templates specified at the end of this tooltip.</li>
				<li>[steam-id] - The Steam app/sub id of the game being given away.</li>
				<li>[steam-type] - The Steam type of the game being given away ("app" or "sub").</li>
				<li>[steam-url] - The Steam store URL of the game being given away.</li>
				<li>[type] - The type of the giveaway ("Public", "Invite Only", "Group", "Whitelist", "Region Restricted", "Invite Only + Region Restricted", "Group + Whitelist", "Group + Region Restricted" or "Whitelist + Region Restricted").</li>
				<li>[url] - The full URL of the giveaway (https://www.steamgifts.com/giveaway/XXXXX/game-name).</li>
				<li>[winners] - The name of the winners of the giveaway (only the maximum 3 winners shown in the page).</li>
				<li>[winners-status] - The name of the winners of the giveaway (only the maximum 3 winners shown in the page), along with their status ("Awaiting Feedback", "Received" or "Not Received").</li>
			</ul>
			<div class="esgst-bold">Discussions:</div>
			<ul>
				<li>[author] - The author of the discussion.</li>
				<li>[category] - The category of the discussion.</li>
				<li>[code] - The 5-character code of the discussion.</li>
				<li>[comments] - The current number of comments that the discussion has.</li>
				<li>[created-time="$"] - When the discussion was created. Replace $ with the date templates specified at the end of this tooltip.</li>
				<li>[poll] - "Yes" if the discussion has a poll and "No" otherwise.</li>
				<li>[short-url] - The short URL of the discussion (https://www.steamgifts.com/discussion/XXXXX/).</li>
				<li>[title] - The title of the discussion.</li>
				<li>[url] - The full URL of the discussion (https://www.steamgifts.com/discussion/XXXXX/title).</li>
			</ul>
			<div class="esgst-bold">Users:</div>
			<ul>
				<li>[url] - The URL of the user (https://www.steamgifts.com/user/username).</li>
				<li>[username] - The username of the user.</li>
				<li>[sentCount] - The number of giveaways that a user has given in a group (only available in group user pages).</li>
				<li>[sentValue] - The amount in dollars that a user has given in a group (only available in group user pages).</li>
				<li>[receivedCount] - The number of giveaways that a user has won in a group (only available in group user pages).</li>
				<li>[receivedValue] - The amount in dollars that a user has won in a group (only available in group user pages).</li>
				<li>[giftDifference] - The difference between the number of giveaways that a user has given and the number of giveaways that they have won in a group (only available in group user pages).</li>
				<li>[valueDifference] - The difference between the amount in dollars that a user has given and the amount in dollars that they have won in a group (only available in group user pages).</li>
			</ul>
			<div class="esgst-bold">Games:</div>
			<ul>
				<li>[id] - The Steam app/sub id of the game.</li>
				<li>[name] - The name of the game.</li>
				<li>[type] - The Steam type of the game ("app" or "sub").</li>
				<li>[url] - The Steam store URL of the game.</li>
			</ul>
			<div class="esgst-bold">Groups:</div>
			<ul>
				<li>[code] - The 5-character code of the group.</li>
				<li>[name] - The name of the group.</li>
				<li>[url] - The short URL of the group (https://www.steamgifts.com/group/XXXXX/).</li>
			</ul>
			<div>For the date templates, ESGST uses date-fns v2.0.0-alpha.25, so check the accepted tokens <a href="https://date-fns.org/v2.0.0-alpha.25/docs/Getting-Started">here</a>.</div>
			<br/>
			<div>Here is an example that generates a table with links to giveaways sorted in ascending order:</div>
			<br/>
			<div>Game | Giveaway | Level | Points | Ends</div>
			<div>:-: | :-: | :-: | :-: | :-:</div>
			<div>[line-asc][[name]]([steam-url]) | [Enter]([short-url]) | [level] | [points] | [end-time="MMM d, yyyy"][/line]
			<br/>
			<br/>
		`);
    obj[`textArea${key}`] = createElements(context, 'beforeend', [{
      attributes: {
        class: 'page_outer_wrap'
      },
      type: 'div',
      children: [{
        type: 'textarea'
      }]
    }]).firstElementChild;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('cfh')) {
      this.esgst.modules.commentsCommentFormattingHelper.cfh_addPanel(obj[`textArea${key}`]);
    }
    obj[`message${key}`] = createElements(context, 'beforeend', [{
      attributes: {
        class: 'esgst-description'
      },
      type: 'div'
    }]);
    _components_Button__WEBPACK_IMPORTED_MODULE_20__["Button"].create([{
      color: 'white',
      icons: ['fa-copy'],
      name: 'Copy',
      onClick: this.mm_copyOutput.bind(this, obj, key)
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Copying...'
    }]).insert(context, 'beforeend');
  }
  mm_exportLinks(obj, items, key) {
    let links = [];
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
      links.push(`[${escapeMarkdown(item.name || item.title || item.code)}](https://${key === 'Games' ? `store.steampowered.com/${item.type.slice(0, -1)}/${item.code}` : `${window.location.hostname}/${key.toLowerCase().slice(0, -1)}/${item.code}/`})`);
    });
    obj[`textArea${key}`].value = links.join('\n');
  }
  mm_exportCustom(obj, items, key) {
    let match = obj[`textArea${key}`].value.match(/\[LINE(.*?)](.+)\[\/LINE]/i),
      links = [];
    if (!match) return;
    let sorting = match[1],
      line = match[2];
    switch (key) {
      case 'Giveaways':
        items.forEach(item => {
          if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
          let type = '';
          if (item.public) {
            type += 'Public';
          } else if (item.inviteOnly) {
            type += 'Invite Only';
            if (item.regionRestricted) {
              type += 'Region Restricted';
            }
          } else if (item.group) {
            type += 'Group';
            if (item.whitelist) {
              type += 'Whitelist';
            }
            if (item.regionRestricted) {
              type += 'Region Restricted';
            }
          } else if (item.whitelist) {
            type += 'Whitelist';
            if (item.regionRestricted) {
              type += 'Region Restricted';
            }
          } else if (item.regionRestricted) {
            type += 'Region Restricted';
          }
          const winners = item.winners;
          if (item.winnerColumns.awaitingFeedback) {
            winners.push({
              status: 'Awaiting Feedback',
              username: 'Anonymous'
            });
          }
          links.push(line.replace(/\[CODE]/gi, item.code).replace(/\[COMMENTS]/gi, item.comments).replace(/\[COPIES]/gi, item.copies).replace(/\[CREATOR]/gi, item.creator).replace(/\[END-TIME="(.+?)"]/gi, this.mm_formatDate.bind(this, item.endTime)).replace(/\[ENTRIES]/gi, item.entries).replace(/\[GROUPS]/gi, (item.groupNames || []).join(`, `)).replace(/\[LEVEL]/gi, item.level).replace(/\[NAME]/gi, escapeMarkdown(item.name)).replace(/\[POINTS]/gi, item.points).replace(/\[SHORT-URL]/gi, `https://www.steamgifts.com/giveaway/${item.code}/`).replace(/\[START-TIME="(.+?)"]/gi, this.mm_formatDate.bind(this, item.startTime)).replace(/\[STEAM-ID]/gi, item.id).replace(/\[STEAM-TYPE]/gi, item.type.slice(0, -1)).replace(/\[STEAM-URL]/gi, `http://store.steampowered.com/${item.type.slice(0, -1)}/${item.id}`).replace(/\[TYPE]/gi, type).replace(/\[URL]/gi, `https://www.steamgifts.com${item.url.match(/\/giveaway\/.+/)[0]}`).replace(/\[WINNERS]/gi, winners.map(x => x.username).join(`, `)).replace(/\[WINNERS-STATUS]/gi, winners.map(x => `${x.username} (${x.status})`).join(`, `)));
        });
        break;
      case 'Discussions':
        items.forEach(item => {
          if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
          links.push(line.replace(/\[AUTHOR]/gi, item.author).replace(/\[CATEGORY]/gi, escapeMarkdown(item.category)).replace(/\[CODE]/gi, item.code).replace(/\[COMMENTS]/gi, item.comments).replace(/\[CREATED-TIME="(.+?)"]/gi, this.mm_formatDate.bind(this, item.createdTimestamp)).replace(/\[POLL]/gi, item.poll ? 'Yes' : 'No').replace(/\[SHORT-URL]/gi, `https://www.steamgifts.com/discussion/${item.code}/`).replace(/\[TITLE]/gi, escapeMarkdown(item.title)).replace(/\[URL]/gi, `https://www.steamgifts.com${item.url.match(/\/discussion\/.+/)[0]}`));
        });
        break;
      case 'Users':
        items.forEach(item => {
          if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
          links.push(line.replace(/\[URL]/gi, `https://${window.location.hostname}/user/${item.code}`).replace(/\[USERNAME]/gi, item.code).replace(/\[SENTCOUNT]/gi, item.sentCount).replace(/\[SENTVALUE]/gi, item.sentValue).replace(/\[RECEIVEDCOUNT]/gi, item.receivedCount).replace(/\[RECEIVEDVALUE]/gi, item.receivedValue).replace(/\[GIFTDIFFERENCE]/gi, item.giftDifference).replace(/\[VALUEDIFFERENCE]/gi, item.valueDifference));
        });
        break;
      case 'Games':
        items.forEach(item => {
          if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
          links.push(line.replace(/\[ID]/gi, item.code).replace(/\[NAME]/gi, escapeMarkdown(item.name)).replace(/\[TYPE]/gi, item.type.slice(0, -1)).replace(/\[URL]/gi, `https://store.steampowered.com/${item.type.slice(0, -1)}/${item.code}`));
        });
        break;
      case 'Groups':
        items.forEach(item => {
          if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
          links.push(line.replace(/\[CODE]/gi, item.code).replace(/\[NAME]/gi, escapeMarkdown(item.name)).replace(/\[URL]/gi, `https://www.steamgifts.com/group/${item.code}/`));
        });
        break;
      default:
        break;
    }
    if (sorting) {
      links = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_22__["Utils"].sortArray(links, sorting === '-desc');
    }
    obj[`textArea${key}`].value = obj[`textArea${key}`].value.replace(/\[LINE.*?].+\[\/LINE]/i, links.join('\n'));
  }
  mm_formatDate(timestamp, match, p1) {
    return escapeMarkdown(Object(date_fns_format__WEBPACK_IMPORTED_MODULE_7__["default"])(timestamp, p1));
  }
  mm_initUrls(obj, items) {
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
      obj.items.push({
        name: item.name,
        url: `https://www.steamgifts.com/giveaway/${item.code}/`
      });
    });
    obj.perLoad = obj.items.length;
  }
  async mm_getSearchReplaceUrlRequest(obj, details, response, responseHtml) {
    let replaceValue, searchValue;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('mm_useRegExp')) {
      try {
        let parts = obj.popup.getTextInputValue(0).match(/^\/(.+)\/(.*)$/);
        searchValue = new RegExp(parts[1], parts[2]);
        replaceValue = obj.popup.getTextInputValue(1);
      } catch (error) {
        obj.popup.progressBar.setError('Invalid regular expression!').show();
        return;
      }
    } else {
      searchValue = obj.popup.getTextInputValue(0);
      replaceValue = obj.popup.getTextInputValue(1);
    }
    let description = responseHtml.querySelector(`.page__description textarea[name=description]`),
      name = obj.items[obj.index].name,
      url = obj.items[obj.index].url;
    if (description) {
      let match = _class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('mm_useRegExp') ? description.value.match(searchValue) : description.value.includes(searchValue);
      if (match) {
        const idContext = description.previousElementSibling;
        let responseJson = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_10__["FetchRequest"].post('/ajax.php', {
          data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_16__["Session"].xsrfToken}&do=edit_giveaway_description&giveaway_id=${idContext.value}&description=${encodeURIComponent(description.value.replace(searchValue, replaceValue))}`
        })).json;
        if (responseJson.type === 'success') {
          createElements(obj.context.firstElementChild.firstElementChild, 'beforeend', [{
            type: 'li',
            children: [{
              text: 'Found and replaced in ',
              type: 'node'
            }, {
              attributes: {
                href: url
              },
              text: name,
              type: 'a'
            }]
          }]);
        } else {
          createElements(obj.context.firstElementChild.firstElementChild, 'beforeend', [{
            type: 'li',
            children: [{
              text: `Found, but failed to replace, in `,
              type: 'node'
            }, {
              attributes: {
                href: url
              },
              text: name,
              type: 'a'
            }]
          }]);
        }
      } else {
        createElements(obj.context.firstElementChild.firstElementChild, 'beforeend', [{
          type: 'li',
          children: [{
            text: 'Not found in ',
            type: 'node'
          }, {
            attributes: {
              href: url
            },
            text: name,
            type: 'a'
          }]
        }]);
      }
    } else {
      createElements(obj.context.firstElementChild.firstElementChild, 'beforeend', [{
        type: 'li',
        children: [{
          text: 'Not found in ',
          type: 'node'
        }, {
          attributes: {
            href: url
          },
          text: name,
          type: 'a'
        }]
      }]);
    }
  }
  async mm_hideGiveaways(obj, items) {
    let newItems = {};
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
      newItems[item.code] = {
        code: item.code,
        endTime: item.endTime,
        hidden: true
      };
      if (obj.source !== 'main' || !this.esgst.giveawayPath) {
        item.outerWrap.remove();
      }
    });
    await lockAndSaveGiveaways(newItems);
  }
  async mm_bookmarkGiveaways(obj, items) {
    let newItems = {};
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`) || !item.gbButton || item.gbButton.index !== 1) return;
      newItems[item.code] = {
        bookmarked: true,
        code: item.code,
        endTime: item.endTime,
        name: item.name,
        started: item.started
      };
      // noinspection JSIgnoredPromiseFromCall
      item.gbButton.change(null, 2);
    });
    await lockAndSaveGiveaways(newItems);
  }
  async mm_unbookmarkGiveaways(obj, items) {
    let newItems = {};
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`) || !item.gbButton || item.gbButton.index !== 3) return;
      newItems[item.code] = {
        bookmarked: false
      };
      // noinspection JSIgnoredPromiseFromCall
      item.gbButton.change(null, 0);
    });
    await lockAndSaveGiveaways(newItems);
  }
  mm_calculateGiveaways(obj, items) {
    let points = 0;
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`) || item.ended) return;
      points += item.points;
    });
    let nextRefresh = 60 - new Date().getMinutes();
    while (nextRefresh > 15) nextRefresh -= 15;
    if (points > _class_Session__WEBPACK_IMPORTED_MODULE_16__["Session"].counters.points) {
      obj.textAreaGiveaways.value = `You will need to wait ${this.esgst.modules.giveawaysTimeToEnterCalculator.ttec_getTime(Math.round((nextRefresh + 15 * Math.floor((points - _class_Session__WEBPACK_IMPORTED_MODULE_16__["Session"].counters.points) / 6)) * 100) / 100)} to enter all selected giveaways for a total of ${points}P.${points > 400 ? `\n\nSince each 400P regeneration takes about 17h, you will need to return in 17h and use all your points so more can be regenerated.` : ''}`;
    } else {
      obj.textAreaGiveaways.value = 'You have enough points to enter all giveaways right now.';
    }
  }
  mm_exportEncryptedGiveaways(obj, items) {
    let encrypted = [];
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
      encrypted.push(`[](ESGST-${this.esgst.modules.giveawaysGiveawayEncrypterDecrypter.ged_encryptCode(item.code)})`);
    });
    obj.textAreaGiveaways.value = encrypted.join(' ');
  }
  mm_copyOutput(obj, key) {
    obj[`textArea${key}`].select();
    document.execCommand('copy');
    createFadeMessage(obj[`message${key}`], 'Copied!');
  }
  async mm_hideDiscussions(obj, items) {
    let newItems = {};
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
      let currentDate = Date.now();
      newItems[item.code] = {
        hidden: currentDate,
        lastUsed: currentDate
      };
      if (obj.source !== 'main' || !this.esgst.discussionPath) {
        item.outerWrap.remove();
      }
    });
    await lockAndSaveDiscussions(newItems);
  }
  async mm_bookmarkDiscussions(obj, items) {
    for (const item of items) {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`) || !item.idbButton || item.idbButton.index !== 1) {
        continue;
      }
      await item.idbButton.triggerCallback();
    }
  }
  async mm_unbookmarkDiscussions(obj, items) {
    for (const item of items) {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`) || !item.idbButton || item.idbButton.index !== 3) {
        continue;
      }
      await item.idbButton.triggerCallback();
    }
  }
  async mm_visitDiscussions(obj, items) {
    let newItems = {};
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`) || !item.gdtttButton || item.gdtttButton.index !== 1) return;
      newItems[item.code] = {
        visited: true,
        lastUsed: Date.now()
      };
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_17__["Settings"].get('ct_s')) {
        newItems[item.code].count = item.count;
      }
      item.gdtttButton.callbacks[0]();
      // noinspection JSIgnoredPromiseFromCall
      item.gdtttButton.change(null, 2);
    });
    await lockAndSaveDiscussions(newItems);
  }
  async mm_unvisitDiscussions(obj, items) {
    let newItems = {};
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`) || !item.gdtttButton || item.gdtttButton.index !== 3) return;
      newItems[item.code] = {
        count: 0,
        visited: false,
        lastUsed: Date.now()
      };
      item.gdtttButton.callbacks[2]();
      // noinspection JSIgnoredPromiseFromCall
      item.gdtttButton.change(null, 0);
    });
    await lockAndSaveDiscussions(newItems);
  }
  mm_selectWbcUsers(obj, items, key) {
    if (!this.esgst[`${key}Button`]) return;
    this.esgst.mmWbcUsers = [];
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
      this.esgst.mmWbcUsers.push(item.code);
    });
    this.esgst[`${key}Button`].setAttribute('data-mm', true);
    this.esgst[`${key}Button`].click();
  }
  mm_selectGlwcUsers(obj, items) {
    const users = [];
    items.forEach(item => {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`)) return;
      users.push(item.code);
    });
    _class_Tabs__WEBPACK_IMPORTED_MODULE_18__["Tabs"].open(`https://www.steamgifts.com/account/settings/profile?esgst=glwc&users=${users.join(',')}`);
  }
  async mm_hideGames(obj, items) {
    const values = obj.textAreaGames.value.split(/\n/).map(x => {
      const match = x.match(/(app|sub)\/(\d+)/);
      if (!match) {
        return null;
      }
      return {
        code: match[2],
        fromTextArea: true,
        name: x,
        type: `${match[1]}s`
      };
    }).filter(x => x);
    if (values.length) {
      items = values;
    }
    const appIds = [];
    const subIds = [];
    for (const item of items) {
      if (!item.fromTextArea && (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`))) continue;
      const savedGame = this.esgst.games[item.type][item.code];
      if (!savedGame || !savedGame.hidden) {
        (item.type === 'apps' ? appIds : subIds).push(item.code);
      }
    }
    obj.progressGames.setLoading(null).show();
    const result = await _Common__WEBPACK_IMPORTED_MODULE_23__["common"].hideGames({
      appIds,
      subIds,
      update: message => obj.progressGames.setMessage(message)
    });
    obj.progressGames.reset().hide();
    let message = '';
    if (result.apps.length) {
      message += `The following apps were not found and therefore not hidden (they are most likely internal apps, such as demos, game editors etc): ${result.apps.join(`, `)}\n`;
    }
    if (result.subs.length) {
      message += `The following subs were not found and therefore not hidden: ${result.subs.join(`, `)}\n`;
    }
    if (message) {
      window.alert(message);
    }
  }
  async mm_categorizeGames(obj, items) {
    const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_13__["Popup"]({
      addScrollable: true,
      buttons: [[{
        template: 'success',
        name: 'Categorize',
        onClick: this.mm_loadFile.bind(this, obj, items)
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Categorizing...'
      }]],
      icon: 'fa-clone',
      textInputs: [{
        placeholder: `Category1, Category2, Category3, ...`
      }],
      title: _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("fragment", null, "Categorize Games ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
        className: "fa fa-question-circle"
      }))
    });
    obj.categorizePopup = popup;
    obj.categorizeInput = createElements(popup.description, 'afterbegin', [{
      attributes: {
        type: 'file'
      },
      type: 'input'
    }]);
    createTooltip(popup.title.lastElementChild, `
			How To Use
			<br>
			<br>
			1. Exit Steam.
			<br>
			2. Click "Browse..." to select a file from your computer.
			<br>
			3. Navigate to where "sharedconfig.vdf" is located and select it. The file should be located at "[YourSteamFolder]/userdata/[YourSteamId]/7/remote".
			<br>
			4. Enter the categories that you want to assign to the games, separated by a comma and followed by a space.
			<br>
			5. Click "Categorize".
			<br>
			6. If you did everything correctly, a new "sharedconfig.vdf" file will be downloaded to your computer.
			<br>
			7. Replace the old file with the new file. Make sure to make a backup of the old file, just in case.
			<br>
			8. Start Steam. You should see the games categorized as you wanted.
			<br>
		`);
    popup.open();
  }
  mm_loadFile(obj, items) {
    return new Promise(resolve => {
      const file = obj.categorizeInput.files[0];
      if (!file) {
        window.alert('No file selected!');
        resolve();
        return;
      }
      if (file.name !== 'sharedconfig.vdf') {
        window.alert('File invalid!');
        resolve();
        return;
      }
      const reader = new FileReader();
      reader.onload = this.mm_readFile.bind(this, obj, items, reader, resolve);
      reader.readAsText(file);
    });
  }
  mm_readFile(obj, items, reader, resolve) {
    if (!reader) {
      window.alert('An error occurred!');
      resolve();
      return;
    }
    const categories = obj.categorizePopup.getTextInputValue(0).replace(/,\s*/g, `,`).split(/,/);
    /**
     * @type {Object}
     * @property {Object} UserRoamingConfigStore.Software.Valve.Steam.Apps
     */
    const data = VDF.parse(reader.result);
    for (const item of items) {
      if (!item.mm || !item.outerWrap.offsetParent && !item.outerWrap.closest(`.esgst-gv-container:not(.is-hidden):not(.esgst-hidden)`) || item.type !== 'apps') {
        continue;
      }
      const game = data.UserRoamingConfigStore.Software.Valve.Steam.Apps[item.code];
      if (!game) {
        continue;
      }
      if (!game.tags) {
        game.tags = [];
      }
      game.tags.push(...categories);
      game.tags = Array.from(new Set(game.tags));
    }
    downloadFile(VDF.stringify(data, true), 'sharedconfig.vdf');
    resolve();
  }
}
const generalMultiManager = new GeneralMultiManager();


/***/ }),
/* 339 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsMainPostPopup", function() { return discussionsMainPostPopup; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(144);







const createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]);
class DiscussionsMainPostPopup extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Hides the main post of a discussion and adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-home"
      }), ") to its main page heading that allows you to open the main post through a popup."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "This feature is useful if you have ", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
        "data-esgst-feature-id": "fmph"
      }), " enabled, which allows you to view the main post of a discussion from any scrolling position.")),
      features: {
        mpp_r: {
          dependencies: ['ct'],
          name: 'Only hide the main post if it has been marked as read.',
          sg: true
        }
      },
      id: 'mpp',
      name: 'Main Post Popup',
      sg: true,
      type: 'discussions'
    };
  }
  init() {
    if (!this.esgst.discussionPath) {
      return;
    }
    let button = createHeadingButton({
      id: 'mpp',
      icons: ['fa-home'],
      title: 'Open the main post'
    });
    let MPPPost = document.createElement('div');
    MPPPost.className = 'page__outer-wrap';
    let Sibling;
    do {
      Sibling = this.esgst.mainPageHeading.previousElementSibling;
      if (Sibling) {
        MPPPost.insertBefore(Sibling, MPPPost.firstElementChild);
      }
    } while (Sibling);
    this.esgst.mainPageHeading.parentElement.insertBefore(MPPPost, this.esgst.mainPageHeading);
    let Hidden;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('mpp_r')) {
      let discussion = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getValue('discussions', '{}'))[window.location.pathname.match(/^\/discussion\/(.+?)\//)[1]];
      if (discussion) {
        if (discussion.readComments && discussion.readComments['']) {
          Hidden = true;
          window.scrollTo(0, 0);
        } else {
          Hidden = false;
        }
      } else {
        Hidden = false;
      }
    } else {
      Hidden = true;
      window.scrollTo(0, 0);
    }
    MPPPost.classList.add(Hidden ? 'esgst-mpp-hidden' : 'esgst-mpp-visible', 'esgst-text-left');
    button.addEventListener('click', () => {
      if (!Hidden) {
        MPPPost.classList.remove('esgst-mpp-visible');
        MPPPost.classList.add('esgst-mpp-hidden');
      }
      let popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_3__["Popup"]({
        icon: '',
        title: '',
        popup: MPPPost
      });
      MPPPost.classList.add('esgst-mpp-popup');
      popup.open();
      popup.onClose = () => {
        MPPPost.classList.remove('esgst-mpp-popup');
        if (!Hidden) {
          MPPPost.classList.remove('esgst-mpp-hidden');
          MPPPost.classList.add('esgst-mpp-visible');
          MPPPost.removeAttribute('style');
          this.esgst.mainPageHeading.parentElement.insertBefore(MPPPost, this.esgst.mainPageHeading);
        }
      };
    });
  }
}
const discussionsMainPostPopup = new DiscussionsMainPostPopup();


/***/ }),
/* 340 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsMainPostSkipper", function() { return discussionsMainPostSkipper; });
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





const goToComment = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].goToComment.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]);
class DiscussionsMainPostSkipper extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Skips to the comments of a discussion if you have used the pagination navigation. For example, if you enter a discussion and use the pagination navigation to go to page 2, on page 2 the feature will skip the main post and take you directly to the comments.")),
      id: 'mps',
      name: 'Main Post Skipper',
      sg: true,
      type: 'discussions'
    };
  }
  init() {
    if (!window.location.hash && this.esgst.discussionPath && this.esgst.pagination && document.referrer.match(new RegExp(`/discussion/${[window.location.pathname.match(/^\/discussion\/(.+?)\//)[1]]}/`))) {
      const context = this.esgst.pagination.previousElementSibling;
      if (context.classList.contains('comments')) {
        goToComment('', context.firstElementChild.firstElementChild, true);
      }
    }
  }
}
const discussionsMainPostSkipper = new DiscussionsMainPostSkipper();


/***/ }),
/* 341 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalNotificationMerger", function() { return generalNotificationMerger; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(208);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(210);
/* harmony import */ var _constants_Namespaces__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(214);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(213);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _components_Header__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(249);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(207);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(216);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(206);










class GeneralNotificationMerger extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      // by Revadike
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "Adds a second inbox icon colored as red (", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("i", {
        className: "fa fa-envelope esgst-red"
      }), ") to the header of any page that allows you to be notified about messages from SteamTrades on SteamGifts and vice-versa."), _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("li", null, "This feature is compatible with ", _class_DOM__WEBPACK_IMPORTED_MODULE_9__["DOM"].element("span", {
        "data-esgst-feature-id": "hr_b"
      }), ".")),
      id: 'nm',
      name: 'Notification Merger',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header) {
      return;
    }
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_8__["Events"].HEADER_REFRESHED, this.getNotifications.bind(this));
    this.getNotifications();
  }
  async getNotifications() {
    switch (_class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].namespace) {
      case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_3__["Namespaces"].SG:
        {
          /** @type {import('../../components/Header').IHeader} */
          const header = new _components_Header__WEBPACK_IMPORTED_MODULE_6__["Header"](_constants_Namespaces__WEBPACK_IMPORTED_MODULE_3__["Namespaces"].ST);
          try {
            header.parse((await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_1__["FetchRequest"].get('https://www.steamtrades.com')).html);
          } catch (error) {
            _class_Logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].error(error.message);
          }
          if (!header.buttonContainers['messages']) {
            if (_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['stMessages']) {
              _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['stMessages'].nodes.outer.classList.add('esgst-hidden');
            }
            return;
          }
          if (_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['stMessages']) {
            _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['stMessages'].nodes.outer.classList.remove('esgst-hidden');
            _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.updateCounter('stMessages', header.buttonContainers['messages'].data.counter);
          } else {
            _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.addButtonContainer({
              buttonIcon: 'fa fa-envelope esgst-nm-icon',
              buttonName: 'ST Messages',
              context: _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['messages'].nodes.outer,
              counter: header.buttonContainers['messages'].data.counter,
              isActive: true,
              isNotification: true,
              position: 'afterend',
              url: 'https://www.steamtrades.com/messages'
            });
          }
          const counterNode = header.buttonContainers['messages'].nodes.counter;
          if (!counterNode) {
            _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['stMessages'].nodes.outer.classList.add('esgst-hidden');
          }
          break;
        }
      case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_3__["Namespaces"].ST:
        {
          /** @type {import('../../components/Header').IHeader} */
          const header = new _components_Header__WEBPACK_IMPORTED_MODULE_6__["Header"](_constants_Namespaces__WEBPACK_IMPORTED_MODULE_3__["Namespaces"].SG);
          try {
            header.parse((await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_1__["FetchRequest"].get('https://www.steamgifts.com')).html);
          } catch (error) {
            _class_Logger__WEBPACK_IMPORTED_MODULE_2__["Logger"].error(error.message);
          }
          if (!header.buttonContainers['messages']) {
            if (_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['sgMessages']) {
              _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['sgMessages'].nodes.outer.classList.add('esgst-hidden');
            }
            return;
          }
          if (_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['sgMessages']) {
            _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['sgMessages'].nodes.outer.classList.remove('esgst-hidden');
            _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.updateCounter('sgMessages', header.buttonContainers['messages'].data.counter);
          } else {
            _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.addButtonContainer({
              buttonIcon: 'fa fa-envelope esgst-nm-icon',
              buttonName: 'SG Messages ',
              context: _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['messages'].nodes.outer,
              counter: header.buttonContainers['messages'].data.counter,
              isActive: true,
              position: 'afterend',
              url: 'https://www.steamgifts.com/messages'
            });
          }
          const counterNode = header.buttonContainers['messages'].nodes.counter;
          if (!counterNode) {
            _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['sgMessages'].nodes.outer.classList.add('esgst-hidden');
          }
          break;
        }
      default:
        {
          throw 'Invalid namespace.';
        }
    }
  }
}
const generalNotificationMerger = new GeneralNotificationMerger();


/***/ }),
/* 342 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysNextPreviousTrainHotkeys", function() { return giveawaysNextPreviousTrainHotkeys; });
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_Tabs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(231);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);







const createAlert = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].createAlert.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]);
class GiveawaysNextPreviousTrainHotkeys extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Allows you to navigate through a train using hotkeys."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "This feature is not 100% accurate, because the feature looks for a link with any variation of \"previous\"/\"next\" in the giveaway's description to make sure that it is going backward/forward, so if it does not find such a link, it will not work."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "It also does not work if you press the hotkey inside of an input/text area."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "If you press Ctrl together with the hotkey, the giveaway is open in a new tab.")),
      id: 'npth',
      name: 'Next/Previous Train Hotkeys',
      inputItems: [{
        event: 'keydown',
        id: 'npth_previousKey',
        prefix: `Enter the key you want to use for previous links: `
      }, {
        event: 'keydown',
        id: 'npth_nextKey',
        prefix: `Enter the key you want to use for next links: `
      }, {
        id: 'npth_previousRegex',
        prefix: `Enter the regex you want to use to detect previous links: `
      }, {
        id: 'npth_nextRegex',
        prefix: `Enter the regex you want to use to detect next links: `
      }],
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    const previousRegex = new RegExp(_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('npth_previousRegex'));
    const nextRegex = new RegExp(_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('npth_nextRegex'));
    let description, element, elements, i, n, next, previous, text;
    if (this.esgst.giveawayCommentsPath) {
      description = document.getElementsByClassName('page__description')[0];
      if (description) {
        elements = description.querySelectorAll(`[href*="/giveaway/"]`);
        n = elements.length;
        for (i = 0; i < n && (!previous || !next); ++i) {
          element = elements[i];
          text = element.textContent.toLowerCase();
          if (!previous && text.match(previousRegex)) {
            previous = element;
          } else if (!next && text.match(nextRegex)) {
            next = element;
          }
        }
        if (!previous || !next) {
          if (n > 1) {
            previous = elements[0];
            next = elements[1];
          } else {
            next = elements[0];
          }
        }
        if (previous || next) {
          this.esgst.documentEvents.keydown.add(this.npth_loadGiveaway.bind(this, next, previous));
        }
      }
    }
  }
  npth_loadGiveaway(next, previous, event) {
    let referrer;
    if (!event.target.closest(`input, textarea`)) {
      if (event.key === _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('npth_previousKey')) {
        if (previous) {
          if (event.ctrlKey) {
            _class_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tabs"].open(previous.getAttribute('href'));
          } else {
            window.location.href = previous.getAttribute('href');
          }
        } else {
          referrer = document.referrer;
          if (referrer.match(/\/giveaway\//) && (next && referrer !== next.getAttribute('href') || !next)) {
            if (event.ctrlKey) {
              _class_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tabs"].open(referrer);
            } else {
              window.location.href = referrer;
            }
          } else {
            createAlert('No previous link found.');
          }
        }
      } else if (event.key === _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('npth_nextKey')) {
        if (next) {
          if (event.ctrlKey) {
            _class_Tabs__WEBPACK_IMPORTED_MODULE_5__["Tabs"].open(next.getAttribute('href'));
          } else {
            window.location.href = next.getAttribute('href');
          }
        } else {
          createAlert('No next link found.');
        }
      }
    }
  }
}
const giveawaysNextPreviousTrainHotkeys = new GiveawaysNextPreviousTrainHotkeys();


/***/ }),
/* 343 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalPaginationNavigationOnTop", function() { return generalPaginationNavigationOnTop; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(206);








const getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]);
class GeneralPaginationNavigationOnTop extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Moves the pagination navigation of any page to the main page heading of the page.")),
      features: {
        pnot_s: {
          name: `Enable simplified view (will show only the numbers and arrows).`,
          sg: true,
          st: true
        }
      },
      id: 'pnot',
      name: 'Pagination Navigation On Top',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    if (!this.esgst.paginationNavigation || !this.esgst.mainPageHeading) return;
    if (this.esgst.st) {
      this.esgst.paginationNavigation.classList.add('page_heading_btn');
    }
    this.esgst.paginationNavigation.title = getFeatureTooltip('pnot');
    this.pnot_simplify();
    _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].insert(this.esgst.mainPageHeading.querySelector(`.page__heading__breadcrumbs, .page_heading_breadcrumbs`), 'afterend', this.esgst.paginationNavigation);
  }
  pnot_simplify() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('pnot') && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('pnot_s')) {
      const elements = this.esgst.paginationNavigation.querySelectorAll('span');
      // @ts-ignore
      for (const element of elements) {
        if (element.textContent.match(/[A-Za-z]+/)) {
          element.textContent = element.textContent.replace(/[A-Za-z]+/g, '');
          if (element.previousElementSibling) {
            element.appendChild(element.previousElementSibling);
          }
          if (element.nextElementSibling) {
            element.appendChild(element.nextElementSibling);
          }
        }
      }
    }
  }
}
const generalPaginationNavigationOnTop = new GeneralPaginationNavigationOnTop();


/***/ }),
/* 344 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysPinnedGiveawaysButton", function() { return giveawaysPinnedGiveawaysButton; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



const createElements = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class GiveawaysPinnedGiveawaysButton extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Modifies the arrow button in the pinned giveaways box of the main page so that you are able to collapse the box again after expanding it.")),
      id: 'pgb',
      name: 'Pinned Giveaways Button',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    let button = document.getElementsByClassName('pinned-giveaways__button')[0];
    if (!button) return;
    const container = button.previousElementSibling;
    container.classList.add('esgst-pgb-container');
    button.remove();
    button = createElements(container, 'afterend', [{
      attributes: {
        class: 'esgst-pgb-button'
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'esgst-pgb-icon fa fa-angle-down'
        },
        type: 'i'
      }]
    }]);
    const icon = button.firstElementChild;
    button.addEventListener('click', this.pgb_toggle.bind(this, container, icon));
  }
  pgb_toggle(container, icon) {
    container.classList.toggle('pinned-giveaways__inner-wrap--minimized');
    icon.classList.toggle('fa-angle-down');
    icon.classList.toggle('fa-angle-up');
  }
}
const giveawaysPinnedGiveawaysButton = new GiveawaysPinnedGiveawaysButton();


/***/ }),
/* 345 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsPuzzleMarker", function() { return discussionsPuzzleMarker; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(276);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(209);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(144);








const getValue = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]);
class DiscussionsPuzzleMarker extends _class_Module__WEBPACK_IMPORTED_MODULE_5__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a checkbox in front of a discussion categorized as \"Puzzles\" (in any page) that changes states (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-circle-o esgst-grey"
      }), " by default,", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-times-circle esgst-red"
      }), " for \"unsolved\",", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-exclamation-circle esgst-orange"
      }), " for \"in progress\" and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-check-circle esgst-green"
      }), "for \"solved\") and allows you to mark the puzzle as unsolved/in progress / solved.")),
      features: {
        pm_a: {
          name: `Show the checkbox for all discussions, regardless of their category.`,
          sg: true
        }
      },
      id: 'pm',
      name: 'Puzzle Marker',
      sg: true,
      type: 'discussions',
      featureMap: {
        discussion: this.pm_addButtons.bind(this)
      }
    };
  }
  pm_addButtons(discussions, main) {
    for (const discussion of discussions) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('pm_a') || discussion.category === 'Puzzles') {
        let context = main && this.esgst.discussionPath ? discussion.headingContainer : discussion.outerWrap;
        if (!context.getElementsByClassName('esgst-pm-button')[0]) {
          context.classList.add('esgst-relative');
          new _class_Button__WEBPACK_IMPORTED_MODULE_2__["Button"](context, 'afterbegin', {
            callbacks: [this.pm_change.bind(this, discussion.code, 'unsolved'), null, this.pm_change.bind(this, discussion.code, 'in progress'), null, this.pm_change.bind(this, discussion.code, 'solved'), null, this.pm_change.bind(this, discussion.code, 'off'), null],
            className: 'esgst-pm-button',
            icons: ['fa-circle-o esgst-clickable esgst-grey', 'fa-circle-o-notch fa-spin', 'fa-times-circle esgst-clickable esgst-red', 'fa-circle-o-notch fa-spin', 'fa-exclamation-circle esgst-clickable esgst-orange', 'fa-circle-o-notch fa-spin', 'fa-check-circle esgst-clickable esgst-green', 'fa-circle-o-notch fa-spin'],
            id: 'pm',
            index: ['off', '', 'unsolved', '', 'in progress', '', 'solved'].indexOf(discussion.saved && discussion.saved.status || 'off'),
            titles: [`Current status is 'off', click to change to 'unsolved'`, 'Changing status...', `Current status is 'unsolved', click to change to 'in progress'`, 'Changing status...', `Current status is 'in progress', click to change to 'solved'`, 'Changing status...', `Current status is 'solved', click to change to 'off'`, 'Changing status...']
          });
        }
      }
    }
  }
  async pm_change(code, status) {
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_4__["Lock"]('comment', {
      threshold: 300
    });
    await lock.lock();
    let discussions = JSON.parse(getValue('discussions'));
    if (!discussions[code]) {
      discussions[code] = {
        readComments: {}
      };
    }
    if (status === 'off') {
      delete discussions[code].status;
    } else {
      discussions[code].status = status;
    }
    discussions[code].lastUsed = Date.now();
    await setValue('discussions', JSON.stringify(discussions));
    await lock.unlock();
    return true;
  }
}
const discussionsPuzzleMarker = new DiscussionsPuzzleMarker();


/***/ }),
/* 346 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalPointsVisualizer", function() { return generalPointsVisualizer; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(207);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(216);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(213);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);







class GeneralPointsVisualizer extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      colors: {
        barColor: 'Bar Color',
        barColorHover: `Bar Color (Hover / Account Page)`,
        barColorSelected: `Bar Color (Account Page Hover)`
      },
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Displays a green bar in the account button at the header of any page that represents the amount of points that you have.")),
      id: 'pv',
      name: 'Points Visualizer',
      sg: true,
      type: 'general'
    };
  }
  init() {
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_2__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_3__["Events"].POINTS_UPDATED, this.pv_setStyle.bind(this));
    this.pv_setStyle(null, _class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].counters.points);
    this.esgst.modules.generalLevelProgressVisualizer.joinStyles();
  }
  pv_setStyle(oldPoints, newPoints) {
    const points = Math.min(400, newPoints);
    const percentage = points / 400 * 100;
    const mainButtonWidth = _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['account'].nodes.button.offsetWidth;
    const fullButtonWidth = _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].header.buttonContainers['account'].nodes.outer.offsetWidth;
    const progress = Math.trunc(percentage * (fullButtonWidth / 100)); // 186px is the width of the button
    const firstBar = `${progress}px`;
    const secondBar = `${Math.max(0, progress - mainButtonWidth)}px`; // 157px is the width of the button without the arrow
    const barColor = _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('pv_barColor');
    const barColorHover = _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('pv_barColorHover');
    const barColorSelected = _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('pv_barColorSelected');
    this.esgst.pvStyleArray = [{
      selector: '.esgst-lpv-container',
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColor} ${firstBar}, transparent ${firstBar})`, `var(--esgst-lpv-button, linear-gradient(#8a92a1 0px, #757e8f 8px, #4e5666 100%))`]
      }]
    }, {
      selector: `.esgst-lpv-container .nav__button--is-dropdown:hover`,
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorHover} ${firstBar}, transparent ${firstBar})`, `var(--esgst-lpv-button-hover, linear-gradient(#9ba2b0 0px, #8c94a3 8px, #596070 100%))`]
      }]
    }, {
      selector: `.esgst-lpv-container .nav__button--is-dropdown-arrow:hover`,
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorHover} ${secondBar}, transparent ${secondBar})`, `var(--esgst-lpv-button-hover, linear-gradient(#9ba2b0 0px, #8c94a3 8px, #596070 100%))`]
      }]
    }, {
      selector: '.esgst-lpv-container .nav__button--is-dropdown-arrow.is-selected',
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColor} ${secondBar}, transparent ${secondBar})`, `var(--esgst-lpv-arrow, linear-gradient(#4e525f 0px, #434857 5px, #2b2e3a 100%))`]
      }]
    }, {
      selector: '.esgst-lpv-container.is-selected .nav__button--is-dropdown',
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorHover} ${firstBar}, transparent ${firstBar})`, `var(--esgst-lpv-button-selected, linear-gradient(#d0d5de 0px, #c9cdd7 5px, #9097a6 100%))`]
      }]
    }, {
      selector: '.esgst-lpv-container.is-selected .nav__button--is-dropdown-arrow',
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorHover} ${secondBar}, transparent ${secondBar})`, `var(--esgst-lpv-button-selected, linear-gradient(#d0d5de 0px, #c9cdd7 5px, #9097a6 100%))`]
      }]
    }, {
      selector: `.esgst-lpv-container.is-selected .nav__button--is-dropdown:hover`,
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorSelected} ${firstBar}, transparent ${firstBar})`, `var(--esgst-lpv-button-selected-hover, linear-gradient(#f0f1f5 0px, #d1d4de 100%))`]
      }]
    }, {
      selector: `.esgst-lpv-container.is-selected .nav__button--is-dropdown-arrow:hover:not(.is-selected)`,
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorSelected} ${secondBar}, transparent ${secondBar})`, `var(--esgst-lpv-button-selected-hover, linear-gradient(#f0f1f5 0px, #d1d4de 100%))`]
      }]
    }, {
      selector: '.esgst-lpv-container.is-selected .nav__button--is-dropdown-arrow.is-selected',
      rules: [{
        name: 'background-image',
        values: [`linear-gradient(to right, ${barColorSelected} ${secondBar}, transparent ${secondBar})`, `var(--esgst-lpv-arrow-selected, linear-gradient(#4e525f 0px, #434857 5px, #2b2e3a 100%))`]
      }]
    }];
  }
}
const generalPointsVisualizer = new GeneralPointsVisualizer();


/***/ }),
/* 347 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysQuickGiveawaySearch", function() { return giveawaysQuickGiveawaySearch; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





const createElements = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class GiveawaysQuickGiveawaySearch extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a search box before the \"Giveaways\" box at the header of any page that allows you to quickly search for giveaways from any page."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Has ", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("span", {
        "data-esgst-feature-id": "ags"
      }), " built-in.")),
      features: {
        qgs_h: {
          name: 'Hide the native search on the main page.',
          sg: true
        }
      },
      id: 'qgs',
      name: 'Quick Giveaway Search',
      options: {
        title: `Position:`,
        values: ['Left', 'Right']
      },
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    let container = createElements(_class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].header.nodes.leftNav, _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('qgs_index') === 0 ? 'afterbegin' : 'beforeend', [{
      attributes: {
        class: 'esgst-qgs-container',
        title: getFeatureTooltip('qgs')
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'esgst-qgs-input',
          placeholder: 'Search...',
          type: 'text'
        },
        type: 'input'
      }, {
        attributes: {
          class: 'fa fa-search'
        },
        type: 'i'
      }]
    }]);
    container.addEventListener('mouseenter', this.qgs_expand.bind(this));
    container.addEventListener('mouseleave', this.qgs_collapse.bind(this));
    container.firstElementChild.addEventListener('keypress', this.qgs_trigger.bind(this));
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('qgs_h') && this.esgst.giveawaysPath) {
      document.getElementsByClassName('sidebar__search-container')[0].remove();
    }
  }
  qgs_expand(event) {
    event.currentTarget.classList.add('esgst-qgs-container-expanded');
  }
  qgs_collapse(event) {
    if (event.relatedTarget && event.relatedTarget.closest('.esgst-popout')) return;
    event.currentTarget.classList.remove('esgst-qgs-container-expanded');
  }
  qgs_trigger(event) {
    if (event.key !== 'Enter') return;
    event.preventDefault();
    window.location.href = `/giveaways/search?q=${encodeURIComponent(event.currentTarget.value)}`;
  }
}
const giveawaysQuickGiveawaySearch = new GiveawaysQuickGiveawaySearch();


/***/ }),
/* 348 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysAdvancedGiveawaySearch", function() { return giveawaysAdvancedGiveawaySearch; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_Checkbox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(246);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(222);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(206);









const createElements = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  observeChange = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].observeChange.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  observeNumChange = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].observeNumChange.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  triggerOnEnter = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].triggerOnEnter.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]);
class GiveawaysAdvancedGiveawaySearch extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Adds a panel below the search field of the main page that allows you to easily search for giveaways using SteamGifts'", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("a", {
        href: "https://www.steamgifts.com/discussion/8SzdT/"
      }, "search parameters"), ".")),
      id: 'ags',
      name: 'Advanced Giveaway Search',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    let query = '';
    if (this.esgst.giveawaysPath) {
      query += `.sidebar__search-container, `;
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('qgs')) {
      query += `.esgst-qgs-container, `;
    }
    if (!query) return;
    const elements = document.querySelectorAll(query.slice(0, -2));
    for (const element of elements) {
      this.ags_addPanel(element);
    }
  }
  ags_addPanel(context) {
    const qgs = context.classList.contains('esgst-qgs-container');
    let obj = {
      qgs
    };
    context.firstElementChild.remove();
    obj.input = createElements(context, 'afterbegin', [{
      attributes: {
        class: `${qgs ? 'esgst-qgs-input' : 'sidebar__search-input'}`,
        placeholder: 'Search...',
        type: 'text'
      },
      type: 'input'
    }]);
    let icon = obj.input.nextElementSibling;
    icon.classList.add('esgst-clickable');
    icon.title = getFeatureTooltip('ags', 'Use advanced search');
    if (!qgs) {
      let match = window.location.search.match(/q=(.*?)(&.*?)?$/);
      if (match) {
        obj.input.value = decodeURIComponent(match[1]);
      }
    }
    if (!qgs && (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('adots') && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('adots_index') === 0 || !_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('adots'))) {
      obj.panel = createElements(context, 'afterend', [{
        attributes: {
          class: 'esgst-ags-panel'
        },
        type: 'div'
      }]);
    } else {
      obj.panel = new _class_Popout__WEBPACK_IMPORTED_MODULE_5__["Popout"]('esgst-ags-panel', context, 100).popout;
    }
    let filterDetails = [{
      key: 'ags_type',
      parameter: 'type',
      name: 'Type',
      options: [{
        name: 'All',
        value: ''
      }, {
        name: 'Wishlist',
        value: 'wishlist'
      }, {
        name: 'Recommended',
        value: 'recommended'
      }, {
        name: 'Group',
        value: 'group'
      }, {
        name: 'New',
        value: 'new'
      }],
      type: 'select'
    }, {
      maxKey: 'ags_maxDate',
      minKey: 'ags_minDate',
      maxParameter: 'release_date_max',
      minParameter: 'release_date_min',
      name: 'Release Date',
      type: 'input'
    }, {
      maxKey: 'ags_maxScore',
      minKey: 'ags_minScore',
      maxParameter: 'metascore_max',
      minParameter: 'metascore_min',
      name: 'Metascore',
      type: 'input'
    }, {
      maxKey: 'ags_maxLevel',
      minKey: 'ags_minLevel',
      maxParameter: 'level_max',
      minParameter: 'level_min',
      name: 'Level',
      type: 'select'
    }, {
      maxKey: 'ags_maxEntries',
      minKey: 'ags_minEntries',
      maxParameter: 'entry_max',
      minParameter: 'entry_min',
      name: 'Entries',
      type: 'input'
    }, {
      maxKey: 'ags_maxCopies',
      minKey: 'ags_minCopies',
      maxParameter: 'copy_max',
      minParameter: 'copy_min',
      name: 'Copies',
      type: 'input'
    }, {
      maxKey: 'ags_maxPoints',
      minKey: 'ags_minPoints',
      maxParameter: 'point_max',
      minParameter: 'point_min',
      name: 'Points',
      type: 'input'
    }, {
      key: 'ags_regionRestricted',
      name: 'Region Restricted',
      parameter: 'region_restricted',
      type: 'checkbox'
    }, {
      key: 'ags_dlc',
      name: 'DLC',
      parameter: 'dlc',
      type: 'checkbox'
    }, {
      key: 'ags_app',
      name: 'App',
      parameter: 'app',
      type: 'checkbox'
    }, {
      key: 'ags_sub',
      name: 'Sub',
      parameter: 'sub',
      type: 'checkbox'
    }];
    obj.filters = [];
    for (let i = 0, n = filterDetails.length; i < n; ++i) {
      this.ags_createFilter(obj, filterDetails[i]);
    }
    obj.input.addEventListener('keydown', triggerOnEnter.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"], this.ags_searchQuery.bind(this, obj)));
    icon.addEventListener('click', this.ags_searchQuery.bind(this, obj));
  }
  ags_createFilter(obj, details) {
    if (details.key === 'ags_type' && !obj.qgs) {
      return;
    }
    if (details.type === 'checkbox') {
      let element = createElements(obj.panel, 'beforeend', [{
          attributes: {
            class: 'esgst-ags-checkbox-filter'
          },
          type: 'div',
          children: [{
            text: details.name,
            type: 'span'
          }]
        }]),
        filter = new _class_Checkbox__WEBPACK_IMPORTED_MODULE_3__["Checkbox"](element, _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get(details.key)).input;
      observeChange(filter, details.key, true, 'checked', 'click');
      obj.filters.push({
        filter: filter,
        key: 'checked',
        parameter: details.parameter
      });
    } else if (details.options) {
      let html = [{
        type: 'select',
        children: []
      }];
      details.options.forEach(option => {
        html[0].children.push({
          attributes: {
            value: option.value
          },
          text: option.name,
          type: 'option'
        });
      });
      let element = createElements(obj.panel, 'beforeend', [{
          attributes: {
            style: `display: block;`
          },
          type: 'div',
          children: [{
            text: `${details.name} `,
            type: 'node'
          }, {
            attributes: {
              class: 'esgst-ags-filter'
            },
            type: 'class',
            children: html
          }]
        }]),
        filter = element.firstElementChild.firstElementChild;
      filter.value = _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get(details.key);
      observeNumChange(filter, details.key, true);
      obj.filters.push({
        filter: filter,
        key: 'value',
        parameter: details.parameter
      });
    } else {
      let items = [];
      if (details.type === 'select') {
        items.push({
          type: 'select',
          children: [{
            type: 'option'
          }]
        });
        for (let i = 0; i <= 10; ++i) {
          items[0].children.push({
            text: i,
            type: 'option'
          });
        }
      } else if (details.maxKey === 'ags_maxDate') {
        items = [{
          attributes: {
            type: 'date'
          },
          type: 'input'
        }];
      } else {
        items = [{
          attributes: {
            type: 'text'
          },
          type: 'input'
        }];
      }
      let element = createElements(obj.panel, 'beforeend', [{
        type: 'div',
        children: [{
          text: `${details.name} `,
          type: 'node'
        }, {
          attributes: {
            class: 'esgst-ags-filter'
          },
          type: 'div',
          children: items
        }, {
          attributes: {
            class: 'esgst-ags-filter'
          },
          type: 'div',
          children: items
        }]
      }]);
      let maxFilter = element.lastElementChild.lastElementChild;
      maxFilter.value = _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get(details.maxKey);
      observeNumChange(maxFilter, details.maxKey, true);
      let minFilter = element.firstElementChild.lastElementChild;
      minFilter.value = _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get(details.minKey);
      observeNumChange(minFilter, details.minKey, true);
      if (details.type === 'input') {
        maxFilter.addEventListener('keypress', triggerOnEnter.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"], this.ags_searchQuery.bind(this, obj)));
        minFilter.addEventListener('keypress', triggerOnEnter.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"], this.ags_searchQuery.bind(this, obj)));
      }
      obj.filters.push({
        filter: minFilter,
        key: 'value',
        parameter: details.minParameter
      });
      obj.filters.push({
        filter: maxFilter,
        key: 'value',
        parameter: details.maxParameter
      });
    }
  }
  ags_searchQuery(obj) {
    let url;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('ags_app') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('ags_sub')) {
      url = `https://www.steamgifts.com/giveaways/search?q=`;
    } else {
      url = `https://www.steamgifts.com/giveaways/search?q=${encodeURIComponent(obj.input.value)}`;
    }
    if (!obj.qgs) {
      let match = window.location.search.match(/(type=.*?)(&.*?)?$/);
      if (match) {
        url += `&${match[1]}`;
      }
    }
    for (let i = 0, n = obj.filters.length; i < n; ++i) {
      let filter = obj.filters[i],
        value = filter.filter[filter.key];
      if (value) {
        if (filter.parameter === 'app') {
          url += `&app=${obj.input.value}`;
        } else if (filter.parameter === 'sub') {
          url += `&sub=${obj.input.value}`;
        } else {
          url += `&${filter.parameter}=${value}`;
        }
      }
    }
    window.location.href = url;
  }
}
const giveawaysAdvancedGiveawaySearch = new GiveawaysAdvancedGiveawaySearch();


/***/ }),
/* 349 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalSearchMagnifyingGlassButton", function() { return generalSearchMagnifyingGlassButton; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





class GeneralSearchMagnifyingGlassButton extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Turns the magnifying glass icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-search"
      }), ") in the search field of any page into a button that submits the search when you click on it.")),
      id: 'smgb',
      name: 'Search Magnifying Glass Button',
      sg: true,
      type: 'general'
    };
  }
  init() {
    let buttons, i;
    buttons = document.querySelectorAll(`.sidebar__search-container .fa-search, .esgst-qgs-container .fa-search`);
    for (i = buttons.length - 1; i > -1; --i) {
      let button, input;
      button = buttons[i];
      input = button.previousElementSibling;
      button.classList.add('esgst-clickable');
      button.addEventListener('click', () => {
        let value = input.value.trim();
        if (value) {
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('as') && value.match(/"|id:/)) {
            this.esgst.modules.giveawaysArchiveSearcher.as_openPage(input);
          } else {
            window.location.href = `${this.esgst.searchUrl.replace(/page=/, '')}q=${value}`;
          }
        }
      });
    }
  }
}
const generalSearchMagnifyingGlassButton = new GeneralSearchMagnifyingGlassButton();


/***/ }),
/* 350 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsRefreshActiveDiscussionsButton", function() { return discussionsRefreshActiveDiscussionsButton; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




const checkMissingDiscussions = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].checkMissingDiscussions.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class DiscussionsRefreshActiveDiscussionsButton extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-refresh"
      }), ") to the page heading of the active discussions that allows you to refresh the active discussions without having to refresh the entire page.")),
      id: 'radb',
      name: 'Refresh Active Discussions Button',
      sg: true,
      sgPaths: /^Discussion|Giveaway|Browse\sGiveaways/,
      type: 'discussions'
    };
  }
  init() {
    if (!this.esgst.commentsPath || _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('oadd') || _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('adots')) {
      return;
    }
    this.radb_addButtons();
  }
  radb_addButtons() {
    let elements, i;
    elements = this.esgst.activeDiscussions.querySelectorAll(`.block_header, .esgst-heading-button`);
    for (i = elements.length - 1; i > -1; --i) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(elements[i], 'beforebegin', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
        className: `esgst-radb-button${_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('oadd') ? '' : ' block_header'}`,
        title: getFeatureTooltip('radb', 'Refresh active discussions/deals'),
        onclick: event => {
          let icon = event.currentTarget.firstElementChild;
          icon.classList.add('fa-spin');
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('oadd')) {
            // noinspection JSIgnoredPromiseFromCall
            this.esgst.modules.discussionsOldActiveDiscussionsDesign.oadd_load(true, () => {
              icon.classList.remove('fa-spin');
            });
          } else {
            checkMissingDiscussions(true, () => {
              icon.classList.remove('fa-spin');
            });
          }
        }
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-refresh"
      })));
    }
  }
}
const discussionsRefreshActiveDiscussionsButton = new DiscussionsRefreshActiveDiscussionsButton();


/***/ }),
/* 351 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsActiveDiscussionsToDisplay", function() { return discussionsActiveDiscussionsToDisplay; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class DiscussionsActiveDiscussionsToDisplay extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Allows you to customize the number of active discussions displayed.")),
      inputItems: [{
        id: 'activeDiscussions_displayed',
        prefix: 'Number of active discussions to display ',
        suffix: '( More than 7 will require an additional page request. )',
        attributes: {
          type: 'number',
          min: '1',
          step: '1'
        }
      }],
      id: 'adtd',
      name: 'Active Discussions To Display',
      sg: true,
      sgPaths: /^Discussion|Giveaway|Browse\sGiveaways/,
      type: 'discussions'
    };
  }
  init() {
    if (!(this.esgst.giveawaysPath || this.esgst.discussionPath || this.esgst.giveawayPath || this.esgst.activeDiscussions) || _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('oadd') || _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('adots')) {
      return;
    }
    this.adtd_remove();
  }
  adtd_remove() {
    if (this.esgst.activeDiscussions) {
      const activeDiscussions = this.esgst.activeDiscussions;
      const activeDiscussionsDisplayed = _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('activeDiscussions_displayed');
      const adotsIndex = _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('adots_index');
      const leftSide = activeDiscussions.firstElementChild.querySelector('.table');
      const rightSide = activeDiscussions.lastElementChild.querySelector('.table');
      const leftSideChildren = Array.from(leftSide.firstElementChild.children);
      const rightSideChildren = Array.from(rightSide.firstElementChild.children);
      const discussionsToRemove = Math.max(leftSideChildren.length, rightSideChildren.length) - activeDiscussionsDisplayed;
      for (let i = 0; i < discussionsToRemove; i++) {
        leftSideChildren[leftSideChildren.length - 1 - i].remove();
        rightSideChildren[rightSideChildren.length - 1 - i].remove();
      }
      const leftSideHeight = leftSide.getBoundingClientRect().height;
      const rightSideHeight = rightSide.getBoundingClientRect().height;
      const adjustment = adotsIndex === 0 ? 0 : activeDiscussionsDisplayed * 14;
      leftSide.style.minHeight = `${leftSideHeight - adjustment}px`;
      rightSide.style.minHeight = `${rightSideHeight - adjustment}px`;
    }
  }
}
const discussionsActiveDiscussionsToDisplay = new DiscussionsActiveDiscussionsToDisplay();


/***/ }),
/* 352 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsReplyBoxPopup", function() { return commentsReplyBoxPopup; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(211);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(212);







class CommentsReplyBoxPopup extends _class_Module__WEBPACK_IMPORTED_MODULE_3__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-comment"
      }), ") to the main page heading of any page that allows you to add comments to the page through a popup."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "This feature is useful if you have ", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("span", {
        "data-esgst-feature-id": "fmph"
      }), " enabled, which allows you to add comments to the page from any scrolling position.")),
      id: 'rbp',
      name: 'Reply Box Popup',
      sg: true,
      st: true,
      type: 'comments'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.replyBox) return;
    let button = _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.createHeadingButton({
      id: 'rbp',
      icons: ['fa-comment'],
      title: 'Add a comment'
    });
    let popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_4__["Popup"]({
      addProgress: true,
      addScrollable: true,
      icon: 'fa-comment',
      title: `Add a comment:`
    });
    _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].insert(popup.scrollable, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("textarea", {
      name: "description",
      ref: ref => popup.textArea = ref
    }));
    _components_Button__WEBPACK_IMPORTED_MODULE_6__["Button"].create([{
      template: 'success',
      name: 'Save',
      onClick: async () => {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.saveComment(null, _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.sg ? '' : document.querySelector(`[name="trade_code"]`).value, '', popup.textArea.value, _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.sg ? _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.locationHref.match(/(.+?)(#.+?)?$/)[1] : '/ajax.php', popup.progressBar, true);
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Saving...'
    }]).insert(popup.description, 'beforeend');
    button.addEventListener('click', popup.open.bind(popup, popup.textArea.focus.bind(popup.textArea)));
  }
}
const commentsReplyBoxPopup = new CommentsReplyBoxPopup();


/***/ }),
/* 353 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsCommentFormattingHelper", function() { return commentsCommentFormattingHelper; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(210);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(221);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(222);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(212);















class CommentsCommentFormattingHelper extends _class_Module__WEBPACK_IMPORTED_MODULE_8__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "When you click on any text area (in any page) to start writing a comment, a panel is added above it that helps you use SteamGifts'", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.steamgifts.com/about/comment-formatting"
      }, "comment formatting"), "."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "There is a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-paste"
      }), " if enabled and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-paste esgst-faded"
      }), " if disabled) in the panel that allows the feature to automatically format links/images pasted into the text area."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "There are also buttons (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-rotate-right"
      }), " to redo and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-rotate-left"
      }), " to undo) in the panel that allow you to redo/undo any formatting added.")),
      features: {
        cfh_bq: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-quote-left"
          }), " ) to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("blockquote", null, "Blockquote")),
          name: 'Blockquote',
          sg: true,
          st: true
        },
        cfh_b: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (B) to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("strong", null, "Bold")),
          name: 'Bold',
          sg: true,
          st: true
        },
        cfh_h1: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (H\xB9) to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("h1", null, "Heading 1")),
          name: 'Heading 1',
          sg: true,
          st: true
        },
        cfh_h2: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (H\xB2) to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("h2", null, "Heading 2")),
          name: 'Heading 2',
          sg: true,
          st: true
        },
        cfh_h3: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (H\xB3) to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("h3", null, "Heading 3")),
          name: 'Heading 3',
          sg: true,
          st: true
        },
        cfh_ic: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-code"
          }), " ) to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("p", null, "Inline ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("code", null, "Code"))),
          name: 'Inline Code',
          sg: true,
          st: true
        },
        cfh_i: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (I) to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("em", null, "Italic")),
          name: 'Italic',
          sg: true,
          st: true
        },
        cfh_lb: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-minus"
          }), ") to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("p", null, "Line"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("hr", null), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("p", null, "Break")),
          name: 'Line Break',
          sg: true,
          st: true
        },
        cfh_lc: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-code"
          }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-indent"
          }), ") to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("code", null, "Line Code")),
          name: 'Line Code',
          sg: true,
          st: true
        },
        cfh_ol: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-list-ol"
          }), ") to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ol", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Ordered"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "List"))),
          name: 'Ordered List',
          sg: true,
          st: true
        },
        cfh_pc: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-code"
          }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-paragraph"
          }), ") to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("pre", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("code", null, "Paragraph Code"))),
          name: 'Paragraph Code',
          sg: true,
          st: true
        },
        cfh_s: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-eye-slash"
          }), ") to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
            className: "spoiler"
          }, "Spoiler")),
          name: 'Spoiler',
          sg: true,
          st: true
        },
        cfh_st: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa- strikethrough"
          }), ") to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("del", null, "Strikethrough")),
          name: 'Strikethrough',
          sg: true,
          st: true
        },
        cfh_ul: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-list-ul"
          }), ") to the panel that allows you to write text like shown below.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Unordered"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "List"))),
          name: 'Unordered List',
          sg: true,
          st: true
        },
        cfh_img: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button(", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-image"
          }), ") to the panel that allows you to add images to your comments with an interface where you can enter the title and the URL of the image and let ESGST format it."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "You can also upload images from your computer instead of using a URL. The images will be uploaded to ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
            href: "https://imgur.com"
          }, "Imgur"), ".")),
          name: 'Image',
          sg: true,
          st: true
        },
        cfh_l: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button(", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-globe"
          }), ") to the panel that allows you to add links to your comments with an interface where you can enter the title and the URL of the link and let ESGST format it.")),
          name: 'Link',
          sg: true,
          st: true
        },
        cfh_t: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button(", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-table"
          }), ") to the panel that allows you to add tables to your comments with an interface where you can dynamically add as many rows / columns as you want, align each column however you want, enter the value for each cell and let ESGST format it.")),
          name: 'Table',
          sg: true,
          st: true
        },
        cfh_e: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button(", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-smile-o"
          }), ") to the panel that allows you to add emojis to your comments by selecting them out of a huge list of emojis.")),
          name: 'Emoji',
          sg: true,
          st: true
        },
        cfh_g: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button(", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-star"
          }), ") to the panel that allows you to add encrypted giveaways (see ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
            "data-esgst-feature-id": "ged"
          }), " for more details about them) to your comments.")),
          name: 'Giveaway Encrypter',
          sg: true,
          st: true
        },
        cfh_p: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button(", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-eye"
          }), ") to the panel that allows you to preview your comment before submitting it.")),
          features: {
            cfh_p_a: {
              name: 'Automatically preview while typing.',
              sg: true,
              st: true
            }
          },
          name: 'Preview',
          sg: true,
          st: true
        },
        cfh_sr: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button(", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-floppy-o"
          }), " ) to the panel that allows you to save replies that you frequently use so that you can reuse them later.")),
          name: 'Saved Replies',
          sg: true,
          st: true,
          features: {
            cfh_sr_s: {
              name: 'Use separate storage on SteamTrades.',
              st: true
            }
          }
        },
        cfh_cf: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-question-circle"
          }), ") to the panel that links to SteamGifts'", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
            href: "https://www.steamgifts.com/about/comment-formatting"
          }, "comment formatting page"), ".")),
          name: 'Comment Formatting',
          sg: true,
          st: true
        },
        cfh_ghwsgi: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: "fa fa-github"
          }), " ) to the panel that allows you to easily generate links for", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
            href: "https://www.steamgifts.com/discussion/fVwFM/github-wiki-steamgifts-integration"
          }, "GitHub Wiki SteamGifts Integration"), ".")),
          name: 'GitHub Wiki SteamGifts Integration',
          sg: true,
          st: true
        }
      },
      id: 'cfh',
      name: 'Comment Formatting Helper',
      sg: true,
      st: true,
      type: 'comments'
    };
  }
  async init() {
    this.savedRepliesId = `savedReplies${_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_sr_s') ? '_st' : ''}`;
    this.esgst.endlessFeatures.push(this.cfh_setTextAreas.bind(this));
    this.esgst.cfh = {
      backup: [],
      history: [],
      panel: document.createElement('div'),
      preview: document.createElement('div')
    };
    this.esgst.cfh.panel.className = 'esgst-cfh-panel';
    let items = [{
      id: 'cfh_i',
      icons: ['fa-italic'],
      name: 'Italic',
      prefix: '*',
      suffix: '*'
    }, {
      id: 'cfh_b',
      icons: ['fa-bold'],
      name: 'Bold',
      prefix: '**',
      suffix: '**'
    }, {
      id: 'cfh_s',
      icons: ['fa-eye-slash'],
      name: 'Spoiler',
      prefix: '~',
      suffix: '~'
    }, {
      id: 'cfh_st',
      icons: ['fa-strikethrough'],
      name: 'Strikethrough',
      prefix: '~~',
      suffix: '~~'
    }, {
      id: 'cfh_h1',
      icons: ['fa-header'],
      name: 'Heading 1',
      prefix: '# ',
      text: '1'
    }, {
      id: 'cfh_h2',
      icons: ['fa-header'],
      name: 'Heading 2',
      prefix: '## ',
      text: '2'
    }, {
      id: 'cfh_h3',
      icons: ['fa-header'],
      name: 'Heading 3',
      prefix: '### ',
      text: '3'
    }, {
      id: 'cfh_bq',
      icons: ['fa-quote-left'],
      name: 'Blockquote',
      prefix: '> '
    }, {
      id: 'cfh_lb',
      icons: ['fa-minus'],
      name: 'Line Break',
      prefix: '---'
    }, {
      id: 'cfh_ol',
      icons: ['fa-list-ol'],
      multiline: true,
      name: 'Ordered List',
      prefix: `[n]. `
    }, {
      id: 'cfh_ul',
      icons: ['fa-list-ul'],
      multiline: true,
      name: 'Unordered List',
      prefix: '* '
    }, {
      id: 'cfh_ic',
      icons: ['fa-code'],
      name: 'Inline Code',
      prefix: '`',
      suffix: '`'
    }, {
      id: 'cfh_lc',
      icons: ['fa-code', 'fa-indent'],
      name: 'Line Code',
      prefix: '    '
    }, {
      id: 'cfh_pc',
      icons: ['fa-code', 'fa-paragraph'],
      name: 'Paragraph Code',
      prefix: '```\n',
      suffix: '\n```'
    }, {
      id: 'cfh_l',
      icons: ['fa-globe'],
      name: 'Link',
      setPopout: popout => {
        let title, url;
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popout.popout, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, "URL:", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
          placeholder: "http://www.example.com",
          type: "text",
          ref: ref => url = ref
        })), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, "Title:", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
          placeholder: "Cat",
          type: "text",
          ref: ref => title = ref
        })), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "form__saving-button btn_action white",
          onclick: async () => {
            await this.cfh_formatLink(title.value, url.value);
            url.value = '';
            title.value = '';
            popout.close();
          }
        }, "Add")));
      },
      callback: popout => {
        let title, url;
        url = popout.firstElementChild.firstElementChild;
        title = popout.firstElementChild.nextElementSibling.firstElementChild;
        title.value = this.esgst.cfh.textArea.value.slice(this.esgst.cfh.textArea.selectionStart, this.esgst.cfh.textArea.selectionEnd);
        if (url.value && title.value) {
          popout.lastElementChild.click();
        } else if (url.value) {
          title.focus();
        } else {
          url.focus();
        }
      }
    }, {
      id: 'cfh_img',
      icons: ['fa-image'],
      name: 'Image',
      setPopout: popout => {
        let title, url;
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popout.popout, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, "URL:", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
          placeholder: "http://www.example.com/image.jpg",
          type: "text",
          ref: ref => url = ref
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
          className: "fa fa-upload esgst-clickable",
          title: "Upload image to Imgur and use it",
          onclick: async () => {
            if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_9__["permissions"].contains([['imgur']]))) {
              return;
            }
            _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.multiChoice('white', 'fa-user-secret', 'Anonymously', 'white', 'fa-user', 'Through Account', 'How would you like to upload?', this.cfh_uploadImage.bind(this, 'Client-ID e25283ef48ab9aa', popout, url), async () => {
              await _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.delValue('imgurToken');
              _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.openSmallWindow(`https://api.imgur.com/oauth2/authorize?client_id=e25283ef48ab9aa&response_type=token&state=imgur`);
              // noinspection JSIgnoredPromiseFromCall
              this.cfh_checkImgur(popout, url);
            });
          }
        })), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, "Title:", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
          placeholder: "Cat",
          type: "text",
          ref: ref => title = ref
        })), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "form__saving-button btn_action white",
          onclick: async () => {
            await this.cfh_formatLink(title.value, url.value, true);
            url.value = '';
            title.value = '';
            popout.close();
          }
        }, "Add")));
      },
      callback: popout => {
        let title, url;
        url = popout.firstElementChild.firstElementChild;
        title = popout.firstElementChild.nextElementSibling.firstElementChild;
        title.value = this.esgst.cfh.textArea.value.slice(this.esgst.cfh.textArea.selectionStart, this.esgst.cfh.textArea.selectionEnd);
        if (url.value && title.value) {
          popout.lastElementChild.click();
        } else if (url.value) {
          title.focus();
        } else {
          url.focus();
        }
      }
    }, {
      id: 'cfh_t',
      icons: ['fa-table'],
      name: 'Table',
      setPopup: popup => {
        let table;
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popup.scrollable, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("table", {
          ref: ref => table = ref
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "form__saving-button btn_action white",
          onclick: () => this.cfh_insertTableRows(1, table)
        }, "Insert Row"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "form__saving-button btn_action white",
          onclick: () => this.cfh_insertTableColumns(1, table)
        }, "Insert Column"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "form__saving-button btn_action white",
          onclick: () => {
            let end, i, j, numColumns, numRows, rows, start, value;
            rows = table.rows;
            for (i = 1, numRows = rows.length; i < numRows; ++i) {
              for (j = 1, numColumns = rows[0].cells.length; j < numColumns; ++j) {
                if (!rows[i].cells[j].firstElementChild.value) {
                  i = numRows + 1;
                  j = numColumns + 1;
                }
              }
            }
            if (i <= numRows || i > numRows && window.confirm('Some cells are empty. This might lead to unexpected results. Are you sure you want to continue?')) {
              value = '';
              for (i = 1; i < numRows; ++i) {
                value += '\n';
                for (j = 1; j < numColumns; ++j) {
                  value += `${rows[i].cells[j].firstElementChild.value}${j < numColumns - 1 ? ' | ' : ''}`;
                }
              }
              value = value.replace(/^\n/, '');
              start = this.esgst.cfh.textArea.selectionStart;
              end = this.esgst.cfh.textArea.selectionEnd;
              this.esgst.cfh.textArea.value = `${this.esgst.cfh.textArea.value.slice(0, start)}${value}${this.esgst.cfh.textArea.value.slice(end)}`;
              this.esgst.cfh.textArea.setSelectionRange(end + value.length, end + value.length);
              this.esgst.cfh.textArea.focus();
              popup.close();
            }
          }
        }, "Add")));
        this.cfh_insertTableRows(4, table);
        this.cfh_insertTableColumns(2, table);
      }
    }, {
      id: 'cfh_e',
      icons: ['fa-smile-o'],
      name: 'Emojis',
      setPopout: async popout => {
        let emojis, popup;
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popout.popout, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "esgst-cfh-emojis",
          ref: ref => emojis = ref
        }, await this.cfh_getEmojis()), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "form__saving-button btn_action white",
          onclick: async () => {
            try {
              let emoji = window.prompt(`Enter the custom emoji:`).trim();
              const codes = [];
              for (let i = 0, n = emoji.length; i < n; i++) {
                codes.push(emoji.codePointAt(i));
              }
              emoji = String.fromCodePoint(...codes);
              this.cfh_setEmoji(_class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(emojis, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
                "data-draggable-id": emoji
              }, emoji)));
              _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.draggable_set({
                addTrash: true,
                context: emojis,
                id: 'emojis',
                item: {}
              });
              const emojiArray = [];
              for (const element of emojis.children) {
                emojiArray.push(element.getAttribute('data-draggable-id'));
              }
              await _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.setValue('emojis', JSON.stringify(emojiArray));
            } catch (error) {
              window.alert('Invalid emoji!');
              _class_Logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].warning(error.message, error.stack);
            }
          }
        }, "Add Custom Emoji"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "form__saving-button btn_action white",
          onclick: async () => {
            if (popup) {
              popup.open(() => {
                popout.popout.classList.add('esgst-hidden');
              });
            } else {
              let emoji, emojis, filter, i;
              popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_11__["Popup"]({
                icon: 'fa-smile-o',
                title: `Select emojis:`,
                addScrollable: true
              });
              popup.getScrollable(_class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
                placeholder: "Filter emojis...",
                type: "text",
                ref: ref => filter = ref
              }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
                className: "esgst-cfh-emojis"
              }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
                className: "esgst-description"
              }, "Simply click on an emoji above to add it to your selection. You can re-order emojis in your selection by dragging and dropping them. To remove an emoji from your selection, start dragging it and a trash area will appear, then drop it there."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
                className: "global__image-outer-wrap page_heading_btn esgst-cfh-emojis"
              })));
              emojis = filter.nextElementSibling;
              const savedEmojis = emojis.nextElementSibling.nextElementSibling;
              _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(savedEmojis, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, await this.cfh_getEmojis()));
              const obj = {
                addTrash: true,
                context: savedEmojis,
                id: 'emojis',
                item: {}
              };
              _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.draggable_set(obj);
              for (const emoji of emojisUtils.emojis) {
                _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(emojis, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
                  "data-draggable-id": emoji.emoji,
                  title: `${emoji.name} (Keyword: :${emoji.short_name}:)`,
                  onclick: () => {
                    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(savedEmojis, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
                      "data-draggable-id": emoji.emoji,
                      title: `${emoji.name} (Keyword: :${emoji.short_name}:)`
                    }, emoji.emoji));
                    _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.draggable_set(obj);
                  }
                }, emoji.emoji));
              }
              popup.onClose = () => {
                const emojiArray = [];
                for (const element of savedEmojis.children) {
                  emojiArray.push(element.getAttribute('data-draggable-id'));
                }
                _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.setValue('emojis', JSON.stringify(emojiArray));
              };
              filter.addEventListener('input', () => {
                if (filter.value) {
                  for (i = emojis.children.length - 1; i > -1; --i) {
                    emoji = emojis.children[i];
                    if (emoji.getAttribute('title').toLowerCase().match(filter.value)) {
                      emoji.classList.remove('esgst-hidden');
                    } else {
                      emoji.classList.add('esgst-hidden');
                    }
                  }
                } else {
                  for (i = emojis.children.length - 1; i > -1; --i) {
                    emojis.children[i].classList.remove('esgst-hidden');
                  }
                }
              });
              popup.open(() => {
                popout.popout.classList.add('esgst-hidden');
              });
            }
          }
        }, "Select Emojis")));
        _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.draggable_set({
          addTrash: true,
          context: emojis,
          id: 'emojis',
          item: {}
        });
        this.cfh_setEmojis(emojis);
      },
      callback: async popout => {
        let emojis = popout.firstElementChild;
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(emojis, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, await this.cfh_getEmojis()));
        _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.draggable_set({
          addTrash: true,
          context: emojis,
          id: 'emojis',
          item: {}
        });
        this.cfh_setEmojis(emojis);
      }
    }, {
      id: 'cfh_g',
      icons: ['fa-star'],
      name: 'Giveaway Encrypter',
      setPopout: popout => {
        let code;
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popout.popout, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Giveaway Code:", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
          placeholder: "XXXXX",
          type: "text",
          ref: ref => code = ref
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "form__saving-button btn_action white",
          onclick: async () => {
            if (code.value.match(/^[\d\w]{5}$/)) {
              let encodedCode = this.esgst.modules.giveawaysGiveawayEncrypterDecrypter.ged_encryptCode(code.value);
              await this.cfh_formatLink('', `ESGST-${encodedCode}`);
              code.value = '';
              popout.close();
            } else {
              window.alert('Wrong format. The right format is XXXXX.');
            }
          }
        }, "Add")));
      },
      callback: popout => {
        let code = popout.firstElementChild;
        code.value = this.esgst.cfh.textArea.value.slice(this.esgst.cfh.textArea.selectionStart, this.esgst.cfh.textArea.selectionEnd);
        code.focus();
      }
    }, {
      id: 'cfh_sr',
      icons: ['fa-floppy-o'],
      name: 'Saved Replies',
      setPopout: async popout => {
        let i, n, replies, savedReplies;
        savedReplies = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.getValue(this.savedRepliesId, '[]'));
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popout.popout, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
          placeholder: "Filter replies...",
          type: "text",
          oninput: this.cfh_filterReplies.bind(this, replies)
        })), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "esgst-cfh-sr-container",
          ref: ref => replies = ref
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "form__saving-button btn_action white",
          onclick: this.cfh_openReplyPopup.bind(this, null, null, replies, null)
        }, "Add New Reply"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "form__saving-button btn_action white",
          onclick: () => this.cfh_saveReply(null, this.esgst.cfh.textArea.value, null, 'Untitled', null, null, replies, null)
        }, "Save Reply")));
        for (i = 0, n = savedReplies.length; i < n; ++i) {
          this.cfh_setReply(replies, savedReplies[i]);
        }
        this.savedRepliesObj = {
          addTrash: true,
          context: replies,
          id: this.savedRepliesId,
          item: {}
        };
        _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.draggable_set(this.savedRepliesObj);
      },
      callback: popout => {
        popout.firstElementChild.firstElementChild.focus();
      }
    }, {
      id: 'cfh_ghwsgi',
      icons: ['fa-github'],
      name: 'GitHub Wiki SteamGifts Integration',
      setPopout: popout => {
        let url;
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popout.popout, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, "Wiki URL:", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
          placeholder: "https://github.com/username/repository/wiki",
          type: "text",
          ref: ref => url = ref
        })), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          className: "form__saving-button btn_action white",
          onclick: async () => {
            const ghwsgiLink = `wiki-gh/${url.value.replace(/https?:\/\/(www\.)?github\.com\//, '')}`;
            await this.cfh_formatItem(`This thread contains a Wiki visible with the [GHWSGI userscript](https://www.steamgifts.com/discussion/fVwFM/). If you prefer to see it directly on GitHub instead, [click here](${url.value}).\n`);
            await this.cfh_formatLink('', ghwsgiLink);
            url.value = '';
            popout.close();
          }
        }, "Add")));
      },
      callback: popout => {
        let url = popout.firstElementChild.firstElementChild;
        url.focus();
      }
    }, {
      addSpan: true,
      icons: ['fa-paste'],
      name: `Automatic Links / Images Paste Formatting: OFF`,
      callback: context => {
        this.esgst.cfh.alipf = context;
        this.cfh_setAlipf(_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_pasteFormatting'), true);
      },
      onClick: () => this.cfh_setAlipf()
    }, {
      icons: ['fa-rotate-left'],
      name: 'Undo Formatting',
      callback: context => {
        this.esgst.cfh.undo = context.firstElementChild;
        this.esgst.cfh.undo.classList.add('esgst-faded');
      },
      onClick: () => {
        let end, value;
        if (this.esgst.cfh.history.length) {
          this.cfh_redo(this.esgst.cfh.textArea, this.esgst.cfh.textArea.value);
          value = this.esgst.cfh.history.pop();
          end = this.esgst.cfh.textArea.selectionEnd - (this.esgst.cfh.textArea.value.length - value.length);
          this.esgst.cfh.textArea.value = value;
          this.esgst.cfh.textArea.setSelectionRange(end, end);
          if (!this.esgst.cfh.history.length) {
            this.esgst.cfh.undo.classList.add('esgst-faded');
          }
          this.esgst.cfh.textArea.focus();
        }
      }
    }, {
      icons: ['fa-rotate-right'],
      name: 'Redo Formatting',
      callback: context => {
        this.esgst.cfh.redo = context.firstElementChild;
        this.esgst.cfh.redo.classList.add('esgst-faded');
      },
      onClick: () => {
        let end, value;
        if (this.esgst.cfh.backup.length) {
          this.cfh_undo(this.esgst.cfh.textArea, this.esgst.cfh.textArea.value);
          value = this.esgst.cfh.backup.pop();
          end = this.esgst.cfh.textArea.selectionEnd + (value.length - this.esgst.cfh.textArea.value.length);
          this.esgst.cfh.textArea.value = value;
          this.esgst.cfh.textArea.setSelectionRange(end, end);
          if (!this.esgst.cfh.backup.length) {
            this.esgst.cfh.redo.classList.add('esgst-faded');
          }
          this.esgst.cfh.textArea.focus();
        }
      }
    }];
    for (let i = 0, n = items.length; i < n; i++) {
      let item = items[i];
      if (!item.id || _class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get(item.id)) {
        let button;
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.esgst.cfh.panel, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
          title: `${_class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.getFeatureTooltip(item.id || 'cfh', item.name)}`,
          ref: ref => button = ref
        }));
        item.icons.forEach(icon => {
          _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(button, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
            className: `fa ${icon}`
          }));
        });
        if (item.addSpan) {
          _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(button, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", null));
        }
        if (item.text) {
          button.insertAdjacentText('beforeend', item.text);
        }
        if (item.setPopout) {
          await item.setPopout(new _class_Popout__WEBPACK_IMPORTED_MODULE_10__["Popout"]('esgst-cfh-popout', button, 0, true, null, item.callback));
        } else if (item.setPopup) {
          let popup;
          button.addEventListener('click', () => {
            if (popup) {
              popup.open();
            } else {
              popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_11__["Popup"]({
                addScrollable: true,
                icon: 'fa-table',
                title: `Add a table:`
              });
              item.setPopup(popup);
              popup.open();
            }
          });
        } else {
          if (item.callback) {
            item.callback(button);
          }
          button.addEventListener('click', async () => {
            if (item.onClick) {
              item.onClick();
            } else {
              await this.cfh_formatItem(item.prefix, item.suffix, item.multiline);
            }
          });
        }
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_cf')) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.esgst.cfh.panel, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "/about/comment-formatting",
        title: _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.getFeatureTooltip('cfh_cf', 'Comment Formatting')
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-question-circle"
      })));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_p') && !_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_p_a')) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.esgst.cfh.panel, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        title: _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.getFeatureTooltip('cfh_p', 'Preview'),
        onclick: async () => {
          _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.esgst.cfh.preview, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, await _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.parseMarkdown(this.esgst.cfh.textArea, this.esgst.cfh.textArea.value)));
          this.cfh_formatImages(this.esgst.cfh.preview);
        }
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-eye"
      })));
    }
    this.esgst.cfh.preview.className = 'esgst-cfh-preview markdown';
  }
  async cfh_getEmojis() {
    let emojis = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.getValue('emojis', '[]'));
    return emojis.map(emoji => {
      const emojiData = emojisUtils.emojis.filter(x => x.emoji === emoji || emojisUtils.getEntities(x.emoji).join('') === emoji)[0];
      emoji = emojiData ? emojiData.emoji : emoji;
      return _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
        "data-draggable-id": emoji,
        title: emojiData ? `${emojiData.name} (Keyword: :${emojiData.short_name}:)` : ''
      }, emoji);
    }).filter(emoji => emoji !== null);
  }
  cfh_setTextAreas(context, main, source, endless) {
    const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} textarea[name*="description"], .esgst-es-page-${endless}textarea[name*="description"]` : `textarea[name*="description"]`}`);
    let hasAdded = false;
    for (const element of elements) {
      element.onfocus = this.cfh_addPanel.bind(this, element);
      if (!hasAdded && !element.closest(`.is-hidden, .is_hidden, .esgst-hidden`)) {
        this.cfh_addPanel(element);
        hasAdded = true;
      }
    }
    const descriptionEdit = context.querySelector('.page__description__edit');
    if (descriptionEdit) {
      descriptionEdit.addEventListener('click', this.cfh_addPanel.bind(this, descriptionEdit.closest('.page__description').querySelector('textarea')));
    }
  }
  cfh_addPanel(textArea) {
    if (textArea === this.esgst.cfh.textArea) return;
    const isNotMain = textArea.closest(`.esgst-popup, .esgst-popout`);
    if (isNotMain) {
      this.esgst.cfh.panel.style.top = '0px';
    } else {
      this.esgst.cfh.panel.style.top = `${this.esgst.commentsTop}px`;
    }
    textArea.parentElement.insertBefore(this.esgst.cfh.panel, textArea);
    textArea.onfocus = this.cfh_addPanel.bind(this, textArea);
    textArea.onpaste = async event => {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_pasteFormatting')) {
        let clipboard, value;
        clipboard = event.clipboardData.getData('text/plain');
        if (clipboard.match(/^https?:/)) {
          event.preventDefault();
          value = textArea.value;
          this.cfh_undo(textArea, `${value.slice(0, textArea.selectionStart)}${clipboard}${value.slice(textArea.selectionEnd)}`);
          await this.cfh_formatLink('', clipboard, clipboard.match(/\.(jpg|jpeg|gif|bmp|png)/i), true);
        }
      }
    };
    textArea.onclick = () => _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].esgst.cfh.recent = false;
    textArea.onkeydown = event => {
      if (event.key === 'Backspace' && this.esgst.cfh.recent) {
        event.preventDefault();
        this.esgst.cfh.undo.click();
      }
      this.esgst.cfh.recent = false;
      if (!event.ctrlKey) {
        return;
      }
      if (event.key === 'y' && (this.esgst.cfh.backup.length || this.esgst.cfh.history.length)) {
        event.preventDefault();
        this.esgst.cfh.redo.click();
      } else if (event.key === 'z' && this.esgst.cfh.history.length) {
        event.preventDefault();
        this.esgst.cfh.undo.click();
      }
    };
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_p')) {
      this.esgst.cfh.preview.innerHTML = '';
      textArea.parentElement.insertBefore(this.esgst.cfh.preview, textArea.nextElementSibling);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_p_a')) {
        textArea.oninput = async () => {
          _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.esgst.cfh.preview, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, await _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.parseMarkdown(textArea, textArea.value)));
          this.cfh_formatImages(this.esgst.cfh.preview);
        };
      }
    }
    this.esgst.cfh.textArea = textArea;
  }
  cfh_undo(textArea, value) {
    this.esgst.cfh.history.push(value);
    this.esgst.cfh.undo.classList.remove('esgst-faded');
  }
  cfh_redo(textArea, value) {
    this.esgst.cfh.backup.push(value);
    this.esgst.cfh.redo.classList.remove('esgst-faded');
  }
  async cfh_formatItem(prefix = '', suffix = '', multiline) {
    let end, n, range, start, text, value;
    value = this.esgst.cfh.textArea.value;
    this.cfh_undo(this.esgst.cfh.textArea, value);
    start = this.esgst.cfh.textArea.selectionStart;
    end = this.esgst.cfh.textArea.selectionEnd;
    text = value.slice(start, end);
    range = text.length;
    if (multiline) {
      n = 0;
      text = text.replace(/^|\n/g, match => {
        n += 1;
        return `${match}${prefix.replace(/\[n]/, n)}`;
      });
    } else {
      text = `${prefix}${text}${suffix}`;
    }
    range += range > 0 ? start + text.length - range : start + text.length - range - suffix.length;
    this.esgst.cfh.textArea.value = `${value.slice(0, start)}${text}${value.slice(end)}`;
    this.esgst.cfh.textArea.setSelectionRange(range, range);
    this.esgst.cfh.textArea.focus();
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_p') && _class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_p_a')) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.esgst.cfh.preview, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, await _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.parseMarkdown(this.esgst.cfh.textArea, this.esgst.cfh.textArea.value)));
      this.cfh_formatImages(this.esgst.cfh.preview);
    }
  }
  async cfh_formatLink(title, url, isImage, isPaste) {
    let end, start, value;
    if (isPaste) {
      this.esgst.cfh.recent = true;
    } else {
      this.cfh_undo(this.esgst.cfh.textArea, this.esgst.cfh.textArea.value);
    }
    start = this.esgst.cfh.textArea.selectionStart;
    end = this.esgst.cfh.textArea.selectionEnd;
    url = url.replace(/\[/g, '%5B').replace(/\]/g, '%5D').replace(/\(/g, '%28').replace(/\)/g, '%29');
    value = isImage ? `![${title}](${url})` : `[${title}](${url})`;
    this.esgst.cfh.textArea.value = `${this.esgst.cfh.textArea.value.slice(0, start)}${value}${this.esgst.cfh.textArea.value.slice(end)}`;
    if (title) {
      this.esgst.cfh.textArea.setSelectionRange(end + value.length, end + value.length);
    } else {
      this.esgst.cfh.textArea.setSelectionRange(end + value.indexOf(`[`) + 1, end + value.indexOf(`[`) + 1);
    }
    this.esgst.cfh.textArea.focus();
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_p') && _class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_p_a')) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(this.esgst.cfh.preview, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, await _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.parseMarkdown(this.esgst.cfh.textArea, this.esgst.cfh.textArea.value)));
      this.cfh_formatImages(this.esgst.cfh.preview);
    }
  }
  async cfh_checkImgur(popout, url) {
    let value = _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.getValue('imgurToken');
    if (value) {
      this.cfh_uploadImage(`Bearer ${value}`, popout, url);
    } else {
      window.setTimeout(() => this.cfh_checkImgur(popout, url), 250);
    }
  }
  cfh_uploadImage(authorization, popout, url) {
    let input, popup, warning;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_11__["Popup"]({
      addScrollable: true,
      icon: 'fa-upload',
      isTemp: true,
      title: 'Upload Image'
    });
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popup.description, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
      type: "file",
      ref: ref => input = ref
    }));
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popup.description, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-description esgst-warning",
      ref: ref => warning = ref
    }));
    _components_Button__WEBPACK_IMPORTED_MODULE_14__["Button"].create([{
      color: 'green',
      icons: ['fa-upload'],
      name: 'Upload',
      onClick: () => {
        return new Promise(resolve => {
          let file = input.files[0];
          if (file) {
            if (file.type.match(/^image/)) {
              if (file.size / 1024 / 1024 <= 10) {
                let reader = new FileReader();
                reader.onload = this.cfh_readImgur.bind(this, authorization, popout, popup, reader, url, warning, resolve);
                reader.readAsDataURL(file);
              } else {
                _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.createFadeMessage(warning, 'Image is larger than 10 MB!');
                resolve();
              }
            } else {
              _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.createFadeMessage(warning, 'File is not an image!');
              resolve();
            }
          } else {
            _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.createFadeMessage(warning, 'No file was loaded!');
            resolve();
          }
        });
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Uploading...'
    }]).insert(popup.description, 'beforeend');
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_img_remember')) {
      _components_Button__WEBPACK_IMPORTED_MODULE_14__["Button"].create([{
        color: 'white',
        icons: ['fa-rotate-left'],
        name: 'Reset',
        onClick: async () => {
          await _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.setSetting('cfh_img_remember', false);
          popup.close();
        }
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Resetting...'
      }]).insert(popup.description, 'beforeend');
    }
    popup.open();
  }
  async cfh_readImgur(authorization, popout, popup, reader, url, warning, callback) {
    let responseJson = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].post(`https://api.imgur.com/3/image`, {
      data: `image=${encodeURIComponent(reader.result.match(/base64,(.+)/)[1])}`,
      headers: {
        authorization
      }
    })).json;
    if (responseJson.success) {
      callback();
      popup.close();
      url.value = responseJson.data.link;
      popout.open();
    } else {
      _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.createFadeMessage(warning, 'Could not upload image!');
      callback();
    }
  }
  cfh_insertTableRows(rows, table) {
    let deleteRow, i, j, n, row;
    while (rows > 0) {
      n = table.rows.length;
      row = table.insertRow(n);
      for (i = 0, j = table.rows[0].cells.length - 1; i < j; ++i) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(row.insertCell(0), 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
          placeholder: "Value",
          type: "text"
        }));
      }
      deleteRow = row.insertCell(0);
      if (n > 2) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(deleteRow, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
          className: "fa fa-times-circle",
          title: "Delete row",
          onclick: () => {
            if (table.rows.length > 4) {
              deleteRow.remove();
              row.remove();
            } else {
              window.alert('A table must have a least one row and two columns.');
            }
          }
        })));
      }
      --rows;
    }
  }
  cfh_insertTableColumns(columns, table) {
    let column, i, j, n, rows;
    while (columns > 0) {
      rows = table.rows;
      n = rows[0].cells.length;
      for (i = 3, j = rows.length; i < j; ++i) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(rows[i].insertCell(n), 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
          placeholder: "Value",
          type: "text"
        }));
      }
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(rows[2].insertCell(n), 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("select", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("option", {
        value: ":-"
      }, "Left"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("option", {
        value: ":-:"
      }, "Center"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("option", {
        value: "-:"
      }, "Right")));
      column = rows[1].insertCell(n);
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(column, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
        placeholder: "Header",
        type: "text"
      }));
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(rows[0].insertCell(n), 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-times-circle",
        title: "Delete column",
        onclick: () => {
          rows = table.rows;
          n = rows[1].cells.length;
          if (n > 3) {
            do {
              --n;
            } while (rows[1].cells[n] !== column);
            for (i = 0, j = rows.length; i < j; ++i) {
              rows[i].deleteCell(n);
            }
          } else {
            window.alert('A table must have at least one row and two columns.');
          }
        }
      })));
      --columns;
    }
  }
  cfh_setEmojis(emojis) {
    let emoji, i;
    for (i = emojis.children.length - 1; i > -1; --i) {
      emoji = emojis.children[i];
      this.cfh_setEmoji(emoji);
    }
  }
  cfh_setEmoji(emoji) {
    emoji.addEventListener('click', this.cfh_formatItem.bind(this, emoji.textContent, ''));
  }
  cfh_setReply(replies, savedReply) {
    let description, name, reply, summary;
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(replies, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-cfh-sr-box",
      "data-draggable-id": `${savedReply.name}${savedReply.description}`,
      "data-draggable-obj": JSON.stringify(savedReply),
      ref: ref => reply = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-cfh-sr-summary",
      ref: ref => summary = ref,
      onclick: () => {
        this.cfh_undo(this.esgst.cfh.textArea, this.esgst.cfh.textArea.value);
        let end, i, matches, n, value;
        end = this.esgst.cfh.textArea.selectionEnd;
        value = savedReply.description;
        matches = value.match(/\[ESGST-R][\s\S]+?\[\/ESGST-R]/g);
        if (matches) {
          n = matches.length;
          i = Math.floor(Math.random() * n);
          value = matches[i].match(/\[ESGST-R]([\s\S]+?)\[\/ESGST-R]/)[1];
        }
        this.esgst.cfh.textArea.value = `${this.esgst.cfh.textArea.value.slice(0, this.esgst.cfh.textArea.selectionStart)}${value}${this.esgst.cfh.textArea.value.slice(end)}`;
        this.esgst.cfh.textArea.dispatchEvent(new Event('input'));
        this.esgst.cfh.textArea.setSelectionRange(end + value.length, end + value.length);
        this.esgst.cfh.textArea.focus();
      }
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-cfh-sr-name",
      ref: ref => name = ref
    }, savedReply.name), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-cfh-sr-description",
      ref: ref => description = ref
    }, savedReply.description)), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-cfh-sr-controls"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
      className: "esgst-clickable fa fa-retweet",
      title: "Replace description with current reply",
      onclick: () => this.cfh_saveReply(reply, savedReply.description, this.esgst.cfh.textArea, savedReply.name, null, null, replies, summary)
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
      className: "esgst-clickable fa fa-edit",
      title: "Edit reply",
      onclick: this.cfh_openReplyPopup.bind(this, savedReply.description, savedReply.name, replies, summary)
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
      className: "fa fa-question-circle",
      title: "Drag the reply to move / delete it"
    }))));
  }
  cfh_openReplyPopup(description, name, replies, summary) {
    let descriptionArea, nameArea, panel, popup;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_11__["Popup"]({
      addScrollable: true,
      icon: 'fa-floppy-o',
      isTemp: true,
      title: summary ? `Edit reply:` : `Save new reply:`
    });
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popup.scrollable, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-description"
    }, "You can save a defined list of replies to be picked at random when using it. To do so, enclose each option with ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
      className: "esgst-bold"
    }, "[ESGST-R][/ESGST-R]"), ". For example, a defined list that renders a random \"thank you\" comment when using it would look like this:", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null), "[ESGST-R]Thanks![/ESGST-R]", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null), "[ESGST-R]Thank you![/ESGST-R]", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null), "[ESGST-R]Thank you so much!", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null), "Can't wait to play this game![/ESGST-R]"));
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popup.scrollable, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      ref: ref => panel = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, "Name"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
      type: "text",
      value: name || ''
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, "Description"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("textarea", null, description || ''))));
    nameArea = panel.firstElementChild;
    descriptionArea = nameArea.nextElementSibling;
    nameArea = nameArea.lastElementChild;
    descriptionArea = descriptionArea.lastElementChild;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh')) {
      this.cfh_addPanel(descriptionArea);
    }
    _components_Button__WEBPACK_IMPORTED_MODULE_14__["Button"].create([{
      template: 'success',
      name: 'Save',
      onClick: () => this.cfh_saveReply(null, description, descriptionArea, name, nameArea, popup, replies, summary)
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Saving...'
    }]).insert(popup.description, 'beforeend');
    popup.open();
  }
  async cfh_saveReply(reply, description, descriptionArea, name, nameArea, popup, replies, summary) {
    let [descVal, nameVal] = [descriptionArea ? descriptionArea.value.trim() : description, nameArea ? nameArea.value.trim() : name];
    if (descVal && nameVal) {
      let savedReplies = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.getValue(this.savedRepliesId, '[]'));
      let savedReply = {
        description: descVal,
        name: nameVal
      };
      if (summary) {
        let i;
        for (i = savedReplies.length - 1; i > -1 && (savedReplies[i].name !== name || savedReplies[i].description !== description); i--) {}
        if (i > -1) {
          savedReplies[i] = savedReply;
          summary.firstElementChild.textContent = nameVal;
          summary.lastElementChild.textContent = descVal;
        }
        reply.setAttribute('data-draggable-obj', JSON.stringify(savedReply));
      } else {
        savedReplies.push(savedReply);
        this.cfh_setReply(replies, savedReply);
        _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.draggable_set(this.savedRepliesObj);
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.setValue(this.savedRepliesId, JSON.stringify(savedReplies));
      if (popup) {
        popup.close();
      }
    } else if (popup) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.createAlert('Both fields are required.');
    }
  }
  cfh_filterReplies(replies, event) {
    let i, reply, value;
    value = event.currentTarget.value;
    for (i = replies.children.length - 1; i > -1; --i) {
      reply = replies.children[i];
      if (reply.textContent.toLowerCase().match(value.toLowerCase())) {
        reply.classList.remove('esgst-hidden');
      } else {
        reply.classList.add('esgst-hidden');
      }
    }
  }
  cfh_setAlipf(value, firstTime) {
    if (typeof value === 'undefined') {
      value = !_class_Settings__WEBPACK_IMPORTED_MODULE_12__["Settings"].get('cfh_pasteFormatting');
    }
    if (!firstTime) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.setSetting('cfh_pasteFormatting', value);
    }
    if (value) {
      this.esgst.cfh.alipf.title = _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.getFeatureTooltip('cfh', `Automatic Links / Images Paste Formatting: ON`);
      this.esgst.cfh.alipf.classList.remove('esgst-faded');
      this.esgst.cfh.alipf.lastElementChild.textContent = 'ON';
    } else {
      this.esgst.cfh.alipf.title = _class_Shared__WEBPACK_IMPORTED_MODULE_13__["Shared"].common.getFeatureTooltip('cfh', `Automatic Links / Images Paste Formatting: OFF`);
      this.esgst.cfh.alipf.classList.add('esgst-faded');
      this.esgst.cfh.alipf.lastElementChild.textContent = 'OFF';
    }
    if (this.esgst.cfh.textArea) {
      this.esgst.cfh.textArea.focus();
    }
  }
  cfh_formatImages(context) {
    let i, images, n;
    images = context.getElementsByTagName('img');
    for (i = 0, n = images.length; i < n; ++i) {
      const image = images[0];
      context.appendChild(image);
      image.classList.add('is-hidden', 'is_hidden');
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(image, 'atouter', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
        className: `${this.esgst.sg ? 'comment__toggle-attached' : 'view_attached'}`
      }, "View attached image."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: image.getAttribute('src'),
        rel: "nofollow noreferrer",
        target: "_blank"
      }, image.cloneNode(true))));
    }
  }
}
const commentsCommentFormattingHelper = new CommentsCommentFormattingHelper();


/***/ }),
/* 354 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsCommentVariables", function() { return commentsCommentVariables; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(207);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(132);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(216);











class CommentsCommentVariables extends _class_Module__WEBPACK_IMPORTED_MODULE_7__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Replaces certain variables with values when submitting a comment.")),
      id: 'cv',
      name: 'Comment Variables',
      sg: true,
      st: true,
      type: 'comments',
      features: {
        cv_e: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Allows you to enter keywords that are replaced by emojis. To see the keywords, open the emojis popup with ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
            "data-esgst-feature-id": "cfh_e"
          }), " and hover over the emojis."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Since the keyword format is ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("code", null, ":short_name:"), ", if you want to use that format without replacing it with an emoji, simply escape it with a backslash e.g.", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("code", null, "\\:short_name:"), ".")),
          name: 'Enable emojis.',
          dependencies: ['cfh', 'cfh_e'],
          sg: true,
          st: true
        }
      },
      inputItems: [{
        id: 'cv_username',
        prefix: `Your username: `
      }, {
        id: 'cv_steamId',
        prefix: `Your Steam id: `
      }, {
        id: 'cv_creator',
        prefix: `The creator of the giveaway/thread: `
      }, {
        id: 'cv_replyUser',
        prefix: `The user you are replying to: `
      }, {
        id: 'cv_esgstFeature',
        prefix: `Link a ESGST feature (must have a (.+?) field to represent where you will type either the ID of the feature or a term to search for the feature): `
      }]
    };
  }
  init() {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.replyBox) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.addReplyButton(_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.replyBox);
    }
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_6__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_10__["Events"].BEFORE_COMMENT_SUBMIT, this.replaceVariables.bind(this));
    this.usernameRegex = this.getRegExp('username');
    this.steamIdRegex = this.getRegExp('steamId');
    this.creatorRegex = this.getRegExp('creator');
    this.replyUserRegex = this.getRegExp('replyUser');
    this.featureRegex = this.getRegExp('esgstFeature');
    this.localFeatureRegex = this.getRegExp('esgstFeature', true);
    this.emojiRegex = /(^|[^\\])(:\w+?:)/g;
    this.escapedEmojiRegex = /\\(:\w+?:)/g;
  }
  replaceVariables(obj) {
    obj.comment = obj.comment.replace(this.usernameRegex, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('username')).replace(this.steamIdRegex, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('steamId'));
    const creatorElement = document.querySelector(`.featured__column--width-fill.text-right a, .comment__username, .author_name`);
    if (creatorElement) {
      const creator = creatorElement.textContent;
      obj.comment = obj.comment.replace(this.creatorRegex, creator);
    }
    if (obj.context) {
      let replyUser = obj.context.closest(`.comment__children, .comment_children`);
      replyUser = replyUser && replyUser.closest(`.comment, .comment_outer`).querySelector(`.comment__username, .author_name`) || document.querySelector(`.featured__column--width-fill.text-right a, .comment__username, .author_name`);
      if (replyUser) {
        replyUser = replyUser.textContent;
        obj.comment = obj.comment.replace(this.replyUserRegex, replyUser);
      }
    }
    const featureMatches = obj.comment.match(this.featureRegex);
    if (featureMatches) {
      for (const featureMatch of featureMatches) {
        const subMatches = featureMatch.match(this.localFeatureRegex);
        if (subMatches) {
          const idOrTerm = subMatches[1];
          let feature = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.featuresById[idOrTerm];
          if (!feature) {
            feature = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.findFeature(idOrTerm);
          }
          if (feature) {
            let featurePath = `[${feature.name}](https://www.steamgifts.com/account/settings/profile?esgst=settings&id=${feature.id})`;
            let ancestorId = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.featuresAncestors[feature.id];
            while (ancestorId) {
              const ancestor = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.featuresById[ancestorId];
              featurePath = `[${ancestor.name}](https://www.steamgifts.com/account/settings/profile?esgst=settings&id=${ancestor.id}) > ${featurePath}`;
              ancestorId = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.featuresAncestors[ancestorId];
            }
            obj.comment = obj.comment.replace(featureMatch, featurePath);
          }
        }
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('cv_e')) {
      obj.comment = obj.comment.replace(this.emojiRegex, (...matches) => {
        const emoji = emojisUtils.getEmoji(matches[2].slice(1, -1));
        if (emoji) {
          return `${matches[1]}${emoji}`;
        }
        return `${matches[1]}\\${matches[2]}`;
      }).replace(this.escapedEmojiRegex, '$1');
    }
  }
  getRegExp(key, isLocal) {
    return new RegExp(_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get(`cv_${key}`), isLocal ? 'i' : 'gi');
  }
}
const commentsCommentVariables = new CommentsCommentVariables();


/***/ }),
/* 355 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysRealCVCalculator", function() { return giveawaysRealCVCalculator; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(208);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(210);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(221);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(144);










const createElements = _Common__WEBPACK_IMPORTED_MODULE_9__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"]),
  delValue = _Common__WEBPACK_IMPORTED_MODULE_9__["common"].delValue.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_9__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_9__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"]);
class GiveawaysRealCVCalculator extends _class_Module__WEBPACK_IMPORTED_MODULE_6__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a \"Real CV\" row containing how much real CV you should get for a giveaway to the table of the review giveaway page (the page where you can confirm the creation of a giveaway).")),
      id: 'rcvc',
      name: 'Real CV Calculator',
      sg: true,
      sync: `Giveaways, No CV Games, Reduced CV Games`,
      syncKeys: ['Giveaways', 'NoCvGames', 'ReducedCvGames'],
      type: 'giveaways'
    };
  }
  async init() {
    if (this.esgst.newGiveawayPath) {
      if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['steamStore']]))) {
        return;
      }
      let table = document.getElementsByClassName('table--summary')[0],
        button;
      if (table) {
        let game = getValue('rcvcGame');
        if (game) {
          let type = game.type;
          let id = game.id;
          let i, n;
          let headings = document.getElementsByClassName('featured__heading__small');
          let copies = headings.length > 1 ? parseInt(headings[0].textContent.match(/\d+/)[0]) : 1;
          try {
            let responseJson = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].get(`http://store.steampowered.com/api/${type === 'apps' ? 'appdetails?appids' : 'packagedetails?packageids'}=${id}&cc=us&filters=price,price_overview`)).json[id].data;
            let value = Math.ceil((responseJson.price_overview || responseJson.price).initial / 100);
            let games, user;
            games = JSON.parse(getValue('games'));
            if (games[type][id]) {
              if (games[type][id].noCV) {
                value = 0;
              } else if (games[type][id].reducedCV) {
                value *= 0.15;
              }
            }
            user = {
              Username: _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('username'),
              SteamID64: _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('steamId')
            };
            let users = JSON.parse(getValue('users'));
            let savedUser = users.users[user.SteamID64];
            let sent = 0;
            let currentDate = Date.now();
            if (savedUser && savedUser.giveaways && savedUser.giveaways.sent && savedUser.giveaways.sent[type][id]) {
              let giveaways = savedUser.giveaways.sent[type][id];
              for (i = 0, n = giveaways.length; i < n; ++i) {
                let giveaway = this.esgst.giveaways[giveaways[i]];
                if (giveaway) {
                  if (giveaway.entries >= 5 || !giveaway.inviteOnly && !giveaway.group && !giveaway.whitelist) {
                    if (Array.isArray(giveaway.winners)) {
                      if (giveaway.winners.length > 0) {
                        giveaway.winners.forEach(winner => {
                          if (winner.status === 'Received') {
                            sent += 1;
                          }
                        });
                      } else if (currentDate < giveaway.endTime) {
                        sent += giveaway.copies;
                      }
                    } else if (giveaway.winners > 0) {
                      sent += Math.min(giveaway.entries, giveaway.winners);
                    }
                  } else if (currentDate < giveaway.endTime) {
                    sent += giveaway.copies;
                  }
                }
              }
              if (sent > 5) {
                for (i = 0, n = sent - 5; i < n; ++i) {
                  value *= 0.9;
                }
              }
            }
            let cv;
            if (copies > 1) {
              let total = copies + sent;
              if (total > 5) {
                n = total - 5;
                cv = (copies - n) * value;
                for (i = 0; i < n; ++i) {
                  value *= 0.9;
                  cv += value;
                }
              } else {
                cv = value * copies;
              }
            } else if (sent + 1 > 5) {
              cv = value * 0.9;
            } else {
              cv = value;
            }
            cv = Math.round(cv * 100) / 100;
            createElements(table, 'beforeend', [{
              attributes: {
                class: 'table__row-outer-wrap'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'table__row-inner-wrap'
                },
                type: 'div',
                children: [{
                  attributes: {
                    class: 'table__column--width-medium table__column--align-top'
                  },
                  type: 'div',
                  children: [{
                    attributes: {
                      class: 'esgst-bold'
                    },
                    text: 'Real CV',
                    type: 'span'
                  }]
                }, {
                  attributes: {
                    class: 'table__column--width-fill'
                  },
                  text: `You should get ~$${cv} real CV for this giveaway.`,
                  type: 'div'
                }]
              }]
            }]);
          } catch (e) {
            _class_Logger__WEBPACK_IMPORTED_MODULE_5__["Logger"].warning(e.message, e.stack);
          }
          button = document.getElementsByClassName('js__submit-form')[0];
          button.addEventListener('click', () => {
            delValue('rcvcGame');
          });
        }
      } else {
        button = document.querySelector(`.js__submit-form, [data-esgst=reviewButton]`);
        let input = document.querySelector(`[name="game_id"]`);
        button.addEventListener('click', async () => {
          let selectedId = input.value;
          let selected = document.querySelector(`[data-autocomplete-id="${selectedId}"]`);
          let info = await this.esgst.modules.games.games_getInfo(selected);
          setValue('rcvcGame', {
            type: info.type,
            id: info.id
          });
        });
      }
    }
  }
}
const giveawaysRealCVCalculator = new GiveawaysRealCVCalculator();


/***/ }),
/* 356 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysStickiedGiveawayCountries", function() { return giveawaysStickiedGiveawayCountries; });
/* harmony import */ var _class_Button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(276);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(132);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(144);





const getValue = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]);
class GiveawaysStickiedGiveawayCountries extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-thumb-tack"
      }), " if the country is stickied and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-thumb-tack esgst-faded"
      }), " if it is not) next to each country in the ", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/new"
      }, "new giveaway"), " page that allows you to sticky the country so that it appears at the top of the country list when creating a giveaway for quick use.")),
      id: 'sgac',
      name: 'Stickied Giveaway Countries',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (!this.esgst.newGiveawayPath) return;
    let rows = document.getElementsByClassName('form__rows')[0];
    if (!rows) return;
    let container, context, elements, i, id, n, stickiedCountries;
    stickiedCountries = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].common.getValue('stickiedCountries', '[]'));
    container = document.querySelector(`.form_list[data-input="country_item_string"]`);
    elements = container.children;
    const obj = {
      separator: container.firstElementChild
    };
    for (i = 0, n = elements.length; i < n; ++i) {
      context = elements[i];
      id = context.getAttribute('data-item-id');
      if (stickiedCountries.indexOf(id) >= 0) {
        if (context === obj.separator) {
          obj.separator = obj.separator.nextElementSibling;
        }
        container.insertBefore(context, obj.separator);
      }
      new _class_Button__WEBPACK_IMPORTED_MODULE_0__["Button"](context, 'afterbegin', {
        callbacks: [this.sgac_stickyCountry.bind(this, obj, container, context, id), null, this.sgac_unstickyCountry.bind(this, obj, container, context, id), null],
        className: 'esgst-sgac-button',
        icons: ['fa-thumb-tack esgst-clickable esgst-faded', 'fa-circle-o-notch fa-spin', 'fa-thumb-tack esgst-clickable', 'fa-circle-o-notch fa-spin'],
        id: 'sgac',
        index: stickiedCountries.indexOf(id) >= 0 ? 2 : 0,
        titles: ['Sticky country', 'Stickying...', 'Unsticky country', 'Unstickying...']
      });
    }
  }
  async sgac_stickyCountry(obj, container, context, id, event) {
    event.stopPropagation();
    if (container) {
      if (context === obj.separator) {
        obj.separator = obj.separator.nextElementSibling;
      }
      container.insertBefore(context, obj.separator);
    }
    let stickiedCountries = JSON.parse(getValue('stickiedCountries', '[]'));
    if (stickiedCountries.indexOf(id) < 0) {
      stickiedCountries.push(id);
      await setValue('stickiedCountries', JSON.stringify(stickiedCountries));
    }
    return true;
  }
  async sgac_unstickyCountry(obj, container, context, id, event) {
    event.stopPropagation();
    if (container) {
      container.insertBefore(context, obj.separator);
      obj.separator = obj.separator.previousElementSibling;
    }
    let stickiedCountries = JSON.parse(getValue('stickiedCountries', '[]'));
    let index = stickiedCountries.indexOf(id);
    if (index >= 0) {
      stickiedCountries.splice(index, 1);
      await setValue('stickiedCountries', JSON.stringify(stickiedCountries));
    }
    return true;
  }
}
const giveawaysStickiedGiveawayCountries = new GiveawaysStickiedGiveawayCountries();


/***/ }),
/* 357 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalShortcutKeys", function() { return generalShortcutKeys; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




class GeneralShortcutKeys extends _class_Module__WEBPACK_IMPORTED_MODULE_1__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Allows you to perform many different tasks by pressing certain keys.")),
      features: {
        sk_cp: {
          inputItems: 'sk_closePopups',
          name: 'Close all currently opened popups.',
          sg: true,
          st: true
        },
        sk_sb: {
          inputItems: 'sk_searchBox',
          name: 'Focus on the search box.',
          sg: true,
          st: true
        },
        sk_fp: {
          inputItems: 'sk_firstPage',
          name: 'Go to the first page.',
          sg: true,
          st: true
        },
        sk_pp: {
          inputItems: 'sk_previousPage',
          name: 'Go to the previous page.',
          sg: true,
          st: true
        },
        sk_np: {
          inputItems: 'sk_nextPage',
          name: 'Go to the next page.',
          sg: true,
          st: true
        },
        sk_lp: {
          inputItems: 'sk_lastPage',
          name: 'Go to the last page.',
          sg: true,
          st: true
        },
        sk_tf: {
          inputItems: 'sk_toggleFilters',
          name: 'Toggle the giveaway filters.',
          sg: true
        },
        sk_hg: {
          inputItems: 'sk_hideGame',
          name: 'Hide the game when inside of a giveaway.',
          sg: true
        },
        sk_hga: {
          inputItems: 'sk_hideGiveaway',
          name: 'Hide the giveaway when inside of a giveaway.',
          sg: true
        },
        sk_ge: {
          inputItems: 'sk_giveawayEntry',
          name: 'Enter/leave the giveaway when inside of a giveaway.',
          sg: true
        },
        sk_c: {
          inputItems: 'sk_creator',
          name: 'Insert the username of the creator of the giveaway/discussion/trade to the current reply box.',
          sg: true,
          st: true
        },
        sk_rb: {
          inputItems: 'sk_replyBox',
          name: 'Focus on the reply box.',
          sg: true,
          st: true
        },
        sk_ru: {
          inputItems: 'sk_replyUser',
          name: 'Insert the username of the user to whom you are replying to the current reply box.',
          sg: true,
          st: true
        },
        sk_sr: {
          inputItems: 'sk_submitReply',
          name: 'Submit the current reply.',
          sg: true,
          st: true
        }
      },
      id: 'sk',
      name: 'Shortcut Keys',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    let methods = {};
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_cp')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_closePopups')] = event => {
        if (!event.target.tagName.match(/^(INPUT|TEXTAREA)$/)) {
          let buttons = document.querySelectorAll(`.b-close, .esgst-popup-close, .lightbox_header_icon--close`),
            i;
          for (i = buttons.length - 1; i > -1; --i) {
            buttons[i].click();
          }
          event.preventDefault();
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_sb')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_searchBox')] = event => {
        if (!event.target.tagName.match(/^(INPUT|TEXTAREA)$/)) {
          let search = document.getElementsByClassName('sidebar__search-input')[0];
          if (search) {
            search.focus();
            event.preventDefault();
          }
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_fp')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_firstPage')] = event => {
        if (!event.target.tagName.match(/^(INPUT|TEXTAREA)$/) && this.esgst.paginationNavigation && this.esgst.currentPage > 1) {
          window.location.href = `${this.esgst.searchUrl}1`;
          event.preventDefault();
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_pp')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_previousPage')] = event => {
        if (!event.target.tagName.match(/^(INPUT|TEXTAREA)$/) && this.esgst.paginationNavigation && this.esgst.currentPage > 1) {
          window.location.href = `${this.esgst.searchUrl}${this.esgst.currentPage - 1}`;
          event.preventDefault();
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_np')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_nextPage')] = event => {
        if (!event.target.tagName.match(/^(INPUT|TEXTAREA)$/) && this.esgst.paginationNavigation && this.esgst.currentPage < this.esgst.lastPage) {
          window.location.href = `${this.esgst.searchUrl}${this.esgst.currentPage + 1}`;
          event.preventDefault();
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_lp')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_lastPage')] = event => {
        if (!event.target.tagName.match(/^(INPUT|TEXTAREA)$/) && this.esgst.paginationNavigation && this.esgst.currentPage < this.esgst.lastPage && this.esgst.lastPage !== 999999999) {
          window.location.href = `${this.esgst.searchUrl}${this.esgst.lastPage}`;
          event.preventDefault();
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_tf')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_toggleFilters')] = event => {
        if (!event.target.tagName.match(/^(INPUT|TEXTAREA)$/)) {
          let toggle = document.querySelector('.esgst-gf-toggle-switch');
          if (toggle) {
            toggle.click();
            event.preventDefault();
          }
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_hg')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_hideGame')] = event => {
        if (!event.target.tagName.match(/^(INPUT|TEXTAREA)$/) && this.esgst.giveawayPath) {
          let button = document.getElementsByClassName('popup--hide-games')[0].style.display && document.getElementsByClassName('popup--hide-games')[0].style.display !== 'none' && document.getElementsByClassName('js__submit-hide-games')[0] || document.querySelector(`.esgst-ochgb, .giveaway__hide, .featured__giveaway__hide`);
          if (button) {
            (button.classList.contains('esgst-ochgb') ? button.firstElementChild : button).click();
            event.preventDefault();
          }
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_hga')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_hideGiveaway')] = event => {
        if (!event.target.tagName.match(/^(INPUT|TEXTAREA)$/) && this.esgst.giveawayPath) {
          let button = document.querySelector(`.esgst-gf-hide-button, .esgst-gf-unhide-button`);
          if (button) {
            button.firstElementChild.dispatchEvent(new Event('click'));
            event.preventDefault();
          }
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_ge')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_giveawayEntry')] = event => {
        if (!event.target.tagName.match(/^(INPUT|TEXTAREA)$/) && this.esgst.enterGiveawayButton) {
          if (this.esgst.enterGiveawayButton.classList.contains('is-hidden')) {
            this.esgst.leaveGiveawayButton.click();
          } else {
            this.esgst.enterGiveawayButton.click();
          }
          event.preventDefault();
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_c')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_creator')] = event => {
        if (event.target.tagName.match(/^(INPUT|TEXTAREA)$/)) {
          let text = event.target.value;
          let end = event.target.selectionEnd;
          const creatorElement = document.querySelector(`.featured__column--width-fill.text-right a, .comment__username, .author_name`);
          if (creatorElement) {
            const creator = creatorElement.textContent;
            let range = end + creator.length;
            event.target.value = `${text.slice(0, event.target.selectionStart)}${creator}${text.slice(end)}`;
            event.target.setSelectionRange(range, range);
            event.target.focus();
            event.preventDefault();
          }
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_rb')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_replyBox')] = event => {
        if (!event.target.tagName.match(/^(INPUT|TEXTAREA)$/) && this.esgst.replyBox) {
          this.esgst.replyBox.getElementsByTagName('textarea')[0].focus();
          event.preventDefault();
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_ru')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_replyUser')] = event => {
        if (event.target.tagName === 'TEXTAREA') {
          let text = event.target.value;
          let end = event.target.selectionEnd;
          let user = event.target.closest(`.comment__children, .comment_children`);
          user = user && user.closest(`.comment, .comment_outer`).querySelector(`.comment__username, .author_name`) || document.querySelector(`.featured__column--width-fill.text-right a, .comment__username, .author_name`);
          if (user) {
            user = user.textContent;
            let range = end + user.length;
            event.target.value = `${text.slice(0, event.target.selectionStart)}${user}${text.slice(end)}`;
            event.target.setSelectionRange(range, range);
            event.target.focus();
            event.preventDefault();
          }
        }
      };
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_sr')) {
      methods[_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sk_submitReply')] = event => {
        if (event.target.tagName === 'TEXTAREA') {
          let reply = event.target.closest(`.comment, .reply_form, .esgst-popup`);
          if (reply) {
            let button = reply.querySelector(`.esgst-button, .js__submit-form, .js_submit`);
            if (button) {
              button.click();
              event.preventDefault();
            }
          }
        }
      };
    }
    if (Object.keys(methods).length > 0) {
      this.esgst.documentEvents.keydown.add(event => {
        let value = '';
        if (event.ctrlKey) {
          value += 'ctrlKey + ';
        } else if (event.shiftKey) {
          value += 'shiftKey + ';
        } else if (event.altKey) {
          value += 'altKey + ';
        }
        value += event.key.toLowerCase();
        if (methods[value]) {
          event.stopPropagation();
          methods[value](event);
        }
      });
    }
  }
}
const generalShortcutKeys = new GeneralShortcutKeys();


/***/ }),
/* 358 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysSentKeySearcher", function() { return giveawaysSentKeySearcher; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(211);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(212);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(218);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(144);















const createElements = _Common__WEBPACK_IMPORTED_MODULE_14__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_14__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_14__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_14__["common"]),
  downloadFile = _Common__WEBPACK_IMPORTED_MODULE_14__["common"].downloadFile.bind(_Common__WEBPACK_IMPORTED_MODULE_14__["common"]),
  observeChange = _Common__WEBPACK_IMPORTED_MODULE_14__["common"].observeChange.bind(_Common__WEBPACK_IMPORTED_MODULE_14__["common"]),
  observeNumChange = _Common__WEBPACK_IMPORTED_MODULE_14__["common"].observeNumChange.bind(_Common__WEBPACK_IMPORTED_MODULE_14__["common"]);
class GiveawaysSentKeySearcher extends _class_Module__WEBPACK_IMPORTED_MODULE_7__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-key"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-search"
      }), ") to the main page heading of your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/created"
      }, "created"), " page that allows you to search for a key or a set of keys in all of keys that you have ever sent."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "There is also an option to export all of the keys that you have ever sent to a text file.")),
      id: 'sks',
      name: 'Sent Key Searcher',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (!this.esgst.createdPath) return;
    let button = createHeadingButton({
      id: 'sks',
      icons: ['fa-key', 'fa-search'],
      title: 'Search keys'
    });
    button.addEventListener('click', this.sks_openPopup.bind(this, {
      button
    }));
  }
  sks_openPopup(sks) {
    if (sks.popup) {
      sks.popup.open();
      return;
    }
    sks.popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_8__["Popup"]({
      addScrollable: true,
      icon: 'fa-key',
      title: `Search for keys:`
    });
    sks.textArea = createElements(sks.popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-description'
      },
      text: `Insert the keys below, one per line.`,
      type: 'div'
    }, {
      type: 'textarea'
    }]);
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_11__["ToggleSwitch"](sks.popup.description, 'sks_exportKeys', false, 'Export all keys ever sent.', false, false, "This will search all your giveaways and export a file with all keys ever sent. You don't need to enter any keys if this option is enabled.", _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_exportKeys'));
    let searchCurrent = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_11__["ToggleSwitch"](sks.popup.description, 'sks_searchCurrent', false, 'Only search the current page.', false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_searchCurrent'));
    let minDate = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_11__["ToggleSwitch"](sks.popup.description, 'sks_limitDate', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Limit search by date, from", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
      className: "esgst-switch-input esgst-switch-input-large",
      type: "date",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_minDate')
    }), ' to ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
      className: "esgst-switch-input esgst-switch-input-large",
      type: "date",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_maxDate')
    }), "."), false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_limitDate')).name.firstElementChild;
    let maxDate = minDate.nextElementSibling;
    let limitPages = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_11__["ToggleSwitch"](sks.popup.description, 'sks_limitPages', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Limit search by pages, from", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
      className: "esgst-switch-input",
      min: "1",
      type: "number",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_minPage')
    }), ' to ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
      className: "esgst-switch-input",
      min: "1",
      type: "number",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_maxPage')
    }), "."), false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_limitPages'));
    let minPage = limitPages.name.firstElementChild;
    let maxPage = minPage.nextElementSibling;
    searchCurrent.exclusions.push(limitPages.container);
    limitPages.exclusions.push(searchCurrent.container);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_searchCurrent')) {
      limitPages.container.classList.add('esgst-hidden');
    } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_limitPages')) {
      searchCurrent.container.classList.add('esgst-hidden');
    }
    observeChange(minDate, 'sks_minDate', true);
    observeChange(maxDate, 'sks_maxDate', true);
    observeNumChange(minPage, 'sks_minPage', true);
    observeNumChange(maxPage, 'sks_maxPage', true);
    sks.results = createElements(sks.popup.scrollable, 'beforeend', [{
      type: 'div'
    }]);
    _components_Button__WEBPACK_IMPORTED_MODULE_12__["Button"].create([{
      color: 'green',
      icons: ['fa-search'],
      name: 'Search',
      onClick: this.sks_searchGiveaways.bind(this, sks)
    }, {
      template: 'error',
      name: 'Cancel',
      switchTo: {
        onReturn: 0
      },
      onClick: this.sks_cancelSearch.bind(this, sks)
    }]).insert(sks.popup.description, 'beforeend');
    sks.progressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_13__["NotificationBar"].create().insert(sks.popup.description, 'beforeend').hide();
    sks.overallProgressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_13__["NotificationBar"].create().insert(sks.popup.description, 'beforeend').hide();
    sks.popup.open();
  }
  async sks_searchGiveaways(sks) {
    // initialize stuff
    sks.button.classList.add('esgst-busy');
    sks.canceled = false;
    sks.count = 0;
    sks.giveaways = {};
    sks.allKeys = [];
    sks.keys = [];
    sks.progressBar.setLoading(null).show();
    sks.overallProgressBar.reset().show();
    sks.results.innerHTML = '';
    let keys = sks.textArea.value.trim().split(/\n/);
    let n = keys.length;
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_exportKeys') && n < 1) {
      return;
    }
    for (let i = 0; i < n; i++) {
      let key = keys[i].trim();
      if (key) {
        sks.keys.push(key);
        sks.count += 1;
      }
    }
    sks.textArea.value = sks.keys.join('\n');

    // search keys
    let [nextPage, maxPage] = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_limitPages') ? [_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_minPage'), _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_maxPage') + 1] : _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_searchCurrent') ? [this.esgst.currentPage, this.esgst.currentPage + 1] : [this.esgst.currentPage, null];
    let [minDate, maxDate] = _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_limitDate') ? [new Date(_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_minDate')).getTime() - 1, new Date(_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_maxDate')).getTime() + 1] : [null, null];
    let pagination = null;
    let skipped = false;
    let stopped = false;
    do {
      let context = null;
      skipped = false;
      if (nextPage === this.esgst.currentPage) {
        context = document;
        sks.lastPage = this.esgst.modules.generalLastPageLink.lpl_getLastPage(context, true);
        sks.lastPage = maxPage ? ` of ${maxPage - 1}` : sks.lastPage === 999999999 ? '' : ` of ${sks.lastPage}`;
      } else if (document.getElementsByClassName(`esgst-es-page-${nextPage}`)[0]) {
        skipped = true;
        continue;
      } else {
        context = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`/giveaways/created/search?page=${nextPage}`)).html;
        if (!sks.lastPage) {
          sks.lastPage = this.esgst.modules.generalLastPageLink.lpl_getLastPage(context);
          sks.lastPage = maxPage ? ` of ${maxPage - 1}` : sks.lastPage === 999999999 ? '' : ` of ${sks.lastPage}`;
        }
      }
      sks.overallProgressBar.setMessage(`Page ${nextPage}${sks.lastPage} (${sks.count} keys left)`);
      let elements = context.getElementsByClassName('trigger-popup--keys');
      for (let i = 0, n = elements.length; !sks.canceled && i < n; i++) {
        sks.progressBar.setMessage(`Retrieving keys (${i + 1} of ${n})...`);
        let element = elements[i];
        let endDate = parseInt(element.closest('.table__row-inner-wrap').querySelector(`[data-timestamp]`).getAttribute('data-timestamp')) * 1e3;
        if (minDate && maxDate) {
          if (endDate > maxDate) {
            skipped = true;
            continue;
          }
          if (endDate < minDate) {
            stopped = true;
            continue;
          }
        }
        let giveaway = {
          active: Date.now() < endDate,
          code: element.parentElement.querySelector(`[name=code]`).value,
          name: element.getAttribute('data-name')
        };
        let heading = _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].parse((await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].post('/ajax.php', {
          data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_9__["Session"].xsrfToken}&do=popup_keys&code=${giveaway.code}`
        })).json.html).getElementsByClassName('popup__keys__heading')[0];
        if (!heading || heading.textContent !== 'Assigned' && !giveaway.active) {
          continue;
        }
        let keys = heading.nextElementSibling.nextElementSibling.children;
        for (let j = keys.length - 1; !sks.canceled && j > -1; j--) {
          let key = keys[j].textContent;
          if (sks.keys.indexOf(key) > -1) {
            sks.giveaways[key] = giveaway;
            sks.count -= 1;
          }
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_exportKeys')) {
            sks.allKeys.push(`${giveaway.active ? 'UNASSIGNED ' : 'ASSIGNED'},"${key.replace(/"/g, '""')}","${giveaway.name.replace(/"/g, '""')}",https://www.steamgifts.com/giveaway/${giveaway.code}/`);
          }
        }
      }
      nextPage += 1;
      pagination = sks.count > 0 || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_exportKeys') ? context.getElementsByClassName('pagination__navigation')[0] : null;
    } while (!sks.canceled && !stopped && (!maxPage || nextPage < maxPage) && (skipped || pagination && !pagination.lastElementChild.classList.contains('is-selected')));
    if (sks.canceled) {
      // search has been canceled
      return;
    }

    // finish the search
    let found = [];
    let notFound = [];
    for (let i = 0, n = sks.keys.length; i < n; i++) {
      let key = sks.keys[i];
      let giveaway = sks.giveaways[key];
      if (giveaway) {
        found.push({
          type: 'li',
          children: [{
            text: `${giveaway.active ? `[UNASSIGNED] ` : ''}${key} (`,
            type: 'node'
          }, {
            attributes: {
              href: `/giveaway/${giveaway.code}/`
            },
            text: giveaway.name,
            type: 'a'
          }, {
            text: `)`,
            type: 'node'
          }]
        });
      } else {
        notFound.push({
          text: key,
          type: 'li'
        });
      }
    }
    const items = [{
      array: found,
      name: 'Found'
    }, {
      array: notFound,
      name: 'Did not find'
    }];
    for (const item of items) {
      let n = item.array.length;
      if (n < 1) {
        continue;
      }
      createElements(sks.results, 'beforeend', [{
        attributes: {
          class: 'markdown'
        },
        type: 'div',
        children: [{
          type: 'div',
          children: [{
            attributes: {
              class: 'esgst-bold'
            },
            text: `${item.name} ${n} keys:`,
            type: 'span'
          }]
        }, {
          type: 'ul',
          children: item.array
        }]
      }]);
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('sks_exportKeys')) {
      downloadFile(sks.allKeys.join('\r\n'), `esgst_sks_keys_${new Date().toISOString()}.csv`);
    }
    sks.progressBar.reset().hide();
    if (sks.count > 0) {
      sks.overallProgressBar.setWarning(`${sks.count} keys were not found.`);
    } else {
      sks.overallProgressBar.setSuccess('All keys were found!');
    }
    sks.button.classList.remove('esgst-busy');
  }
  sks_cancelSearch(sks) {
    sks.canceled = true;
    sks.button.classList.remove('esgst-busy');
    sks.progressBar.reset().hide();
  }
}
const giveawaysSentKeySearcher = new GiveawaysSentKeySearcher();


/***/ }),
/* 359 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalScrollToBottomButton", function() { return generalScrollToBottomButton; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





const animateScroll = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].animateScroll.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  createElements = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class GeneralScrollToBottomButton extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-chevron-down"
      }), ") either to the bottom right corner, the main page heading or the footer (you can decide where) of any page that takes you to the bottom of the page.")),
      id: 'stbb',
      name: 'Scroll To Bottom Button',
      options: {
        title: `Show in:`,
        values: ['Bottom Right Corner', 'Main Page Heading', 'Footer']
      },
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    let button;
    switch (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('stbb_index')) {
      case 0:
        button = createElements(document.body, 'beforeend', [{
          attributes: {
            class: 'esgst-stbb-button esgst-stbb-button-fixed',
            title: `${getFeatureTooltip('stbb', 'Scroll to bottom')}`
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'fa fa-chevron-down'
            },
            type: 'i'
          }]
        }]);
        window.addEventListener('scroll', () => {
          if (document.documentElement.offsetHeight - window.innerHeight >= window.scrollY + 100) {
            button.classList.remove('esgst-hidden');
          } else {
            button.classList.add('esgst-hidden');
          }
        });
        break;
      case 1:
        button = createHeadingButton({
          id: 'stbb',
          icons: ['fa-chevron-down'],
          title: 'Scroll to bottom'
        });
        button.classList.add('esgst-stbb-button');
        break;
      case 2:
        {
          const linkContainer = _class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].footer.addLinkContainer({
            icon: 'fa fa-chevron-down',
            position: 'beforeend',
            side: 'right'
          });
          linkContainer.nodes.outer.classList.add('esgst-stbb-button');
          linkContainer.nodes.outer.title = getFeatureTooltip('stbb', 'Scroll to bottom');
          button = linkContainer.nodes.outer;
          break;
        }
    }
    button.addEventListener('click', () => animateScroll(document.documentElement.offsetHeight, () => {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('es') && this.esgst.es.paginations) {
        this.esgst.modules.generalEndlessScrolling.es_changePagination(this.esgst.es, this.esgst.es.reverseScrolling ? 1 : this.esgst.es.paginations.length);
      }
    }));
  }
}
const generalScrollToBottomButton = new GeneralScrollToBottomButton();


/***/ }),
/* 360 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalScrollToTopButton", function() { return generalScrollToTopButton; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





const animateScroll = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].animateScroll.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  createElements = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class GeneralScrollToTopButton extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-chevron-up"
      }), ") either to the bottom right corner, the main page heading or the footer (you can decide where) of any page that takes you to the top of the page.")),
      id: 'sttb',
      name: 'Scroll To Top Button',
      options: {
        title: `Show in:`,
        values: ['Bottom Right Corner', 'Main Page Heading', 'Footer']
      },
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    let button;
    switch (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('sttb_index')) {
      case 0:
        button = createElements(document.body, 'beforeend', [{
          attributes: {
            class: 'esgst-sttb-button esgst-sttb-button-fixed',
            title: `${getFeatureTooltip('sttb', 'Scroll to top')}`
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'fa fa-chevron-up'
            },
            type: 'i'
          }]
        }]);
        button.classList.add('esgst-hidden');
        window.addEventListener('scroll', () => {
          if (window.scrollY > 100) {
            button.classList.remove('esgst-hidden');
          } else {
            button.classList.add('esgst-hidden');
          }
        });
        break;
      case 1:
        button = createHeadingButton({
          id: 'sttb',
          icons: ['fa-chevron-up'],
          title: 'Scroll to top'
        });
        button.classList.add('esgst-sttb-button');
        break;
      case 2:
        {
          const linkContainer = _class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].footer.addLinkContainer({
            icon: 'fa fa-chevron-up',
            position: 'beforeend',
            side: 'right'
          });
          linkContainer.nodes.outer.classList.add('esgst-sttb-button');
          linkContainer.nodes.outer.title = getFeatureTooltip('sttb', 'Scroll to top');
          button = linkContainer.nodes.outer;
          break;
        }
    }
    button.addEventListener('click', animateScroll.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"], 0, () => {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('es') && this.esgst.es.paginations) {
        this.esgst.modules.generalEndlessScrolling.es_changePagination(this.esgst.es, this.esgst.es.reverseScrolling ? this.esgst.es.paginations.length : 1);
      }
    }));
  }
}
const generalScrollToTopButton = new GeneralScrollToTopButton();


/***/ }),
/* 361 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tradesTradeBumper", function() { return tradesTradeBumper; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(220);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(132);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(144);











const createElements = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]);
class TradesTradeBumper extends _class_Module__WEBPACK_IMPORTED_MODULE_6__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-chevron-circle-up"
      }), ") to the main page heading of your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: `https://www.steamtrades.com/trades/search?user=${_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('steamId')}`
      }, "created trades"), ' ', " page that allows you to bump all of your open trades at once.")),
      features: {
        tb_a: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Automatically bumps all of your trades every hour."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Requires either SteamGifts or SteamTrades to be open, depending on where you have this option enabled.")),
          name: 'Auto bump every hour.',
          sg: true,
          st: true
        }
      },
      id: 'tb',
      name: 'Trade Bumper',
      sg: true,
      st: true,
      type: 'trades'
    };
  }
  init() {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.locationHref.match(new RegExp(`\\/trades\\/search\\?user=${_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('steamId')}`))) {
      const button = createHeadingButton({
        id: 'tb',
        icons: ['fa-chevron-circle-up'],
        title: 'Bump trades'
      });
      button.addEventListener('click', this.tb_getTrades.bind(this, button, document));
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('tb_a')) {
        // noinspection JSIgnoredPromiseFromCall
        this.tb_setAutoBump(button);
      }
    } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('tb_a')) {
      // noinspection JSIgnoredPromiseFromCall
      this.tb_setAutoBump();
    }
  }
  async tb_getTrades(button, context) {
    if (button) {
      createElements(button, 'atinner', [{
        attributes: {
          class: 'fa fa-circle-o-notch fa-spin'
        },
        type: 'i'
      }]);
    }
    const elements = context.querySelectorAll(`.row_inner_wrap:not(.is_faded)`);
    for (const element of elements) {
      await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].post('https://www.steamtrades.com/ajax.php', {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].xsrfToken}&do=trade_bump&code=${element.querySelector(`[href*="/trade/"]`).getAttribute('href').match(/\/trade\/(.+?)\//)[1]}`
      });
    }
    if (button) {
      window.location.reload();
    } else {
      window.setTimeout(this.tb_setAutoBump.bind(this), 3900000, button);
    }
  }
  async tb_setAutoBump(button) {
    const currentTime = Date.now();
    const diff = currentTime - getValue('lastBump', 0);
    if (diff > 3600000) {
      await setValue('lastBump', currentTime);
      // noinspection JSIgnoredPromiseFromCall
      this.tb_autoBumpTrades(button);
    } else {
      window.setTimeout(this.tb_setAutoBump.bind(this), 3600000 - diff, button);
    }
  }
  async tb_autoBumpTrades(button) {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.locationHref.match(new RegExp(`\\/trades\\/search\\?user=${_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('steamId')}`))) {
      // noinspection JSIgnoredPromiseFromCall
      this.tb_getTrades(button, document);
    } else {
      // noinspection JSIgnoredPromiseFromCall
      this.tb_getTrades(null, (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`https://www.steamtrades.com/trades/search?user=${_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('steamId')}`, {
        queue: true
      })).html);
    }
  }
}
const tradesTradeBumper = new TradesTradeBumper();


/***/ }),
/* 362 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalTimeToPointCapCalculator", function() { return generalTimeToPointCapCalculator; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(207);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(216);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(213);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(206);








class GeneralTimeToPointCapCalculator extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "If you have less than 400P and you hover over the number of points at the header of any page, it shows how much time you have to wait until you have 400P.")),
      features: {
        ttpcc_a: {
          name: 'Show time alongside points.',
          sg: true
        }
      },
      id: 'ttpcc',
      name: 'Time To Point Cap Calculator',
      sg: true,
      type: 'general'
    };
  }
  init() {
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_3__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_4__["Events"].POINTS_UPDATED, this.update.bind(this));
    this.update(null, _class_Session__WEBPACK_IMPORTED_MODULE_5__["Session"].counters.points);
  }
  update(oldPoints, newPoints) {
    if (newPoints >= 400) {
      return;
    }
    let nextRefresh = 60 - new Date().getMinutes();
    while (nextRefresh > 15) {
      nextRefresh -= 15;
    }
    const time = this.esgst.modules.giveawaysTimeToEnterCalculator.ttec_getTime(Math.round((nextRefresh + 15 * Math.floor((400 - newPoints) / 6)) * 100) / 100);
    const pointsNode = _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].header.buttonContainers['account'].nodes.points;
    pointsNode.textContent = `${newPoints.toLocaleString('en-US')}${_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('ttpcc_a') ? `P / ${time} to 400` : ''}`;
    pointsNode.title = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].getFeatureTooltip('ttpcc', `${time} to 400P`);
  }
}
const generalTimeToPointCapCalculator = new GeneralTimeToPointCapCalculator();


/***/ }),
/* 363 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysUnsentGiftSender", function() { return giveawaysUnsentGiftSender; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(221);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(211);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(132);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(212);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(218);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(144);

















const createElements = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  getSteamId = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].getSteamId.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  getUser = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].getUser.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  observeNumChange = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].observeNumChange.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  saveUsers = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].saveUsers.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]);
class GiveawaysUnsentGiftSender extends _class_Module__WEBPACK_IMPORTED_MODULE_7__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-gift"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-send"
      }), ") to the main page heading of your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/created"
      }, "created"), " page that allows you to send all of your unsent gifts at once."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "You can limit which gifts are sent based on whether or not the winner has any not activated/multiple wins (using ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.sgtools.info/"
      }, "SGTools"), "), whether or not the winner is still a member of the group and has a certain gift difference for group giveaways, and whether or not the winner is on your whitelist/blacklist.")),
      id: 'ugs',
      name: 'Unsent Gift Sender',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (this.esgst.createdPath) {
      let button = createHeadingButton({
        id: 'ugs',
        icons: ['fa-gift', 'fa-send'],
        title: 'Send unsent gifts'
      });
      button.addEventListener('click', this.ugs_openPopup.bind(this, {
        button
      }));
    } else if (this.esgst.newTicketPath) {
      document.getElementsByClassName('form__submit-button')[0].addEventListener('click', this.ugs_saveReroll.bind(this, document.querySelector(`[name="category_id"]`), document.querySelector(`[name="reroll_winner_id"]`)));
    }
  }
  async ugs_saveReroll(category, winner) {
    let rerolls;
    if (category.value === '1') {
      const id = winner.value;
      if (id) {
        rerolls = JSON.parse(getValue('rerolls'));
        if (rerolls.indexOf(id) < 0) {
          rerolls.push(id);
          setValue('rerolls', JSON.stringify(rerolls));
        }
      }
    }
  }
  ugs_openPopup(ugs) {
    if (!ugs.popup) {
      ugs.popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
        addScrollable: true,
        icon: 'fa-gift',
        title: `Send unsent gifts:`
      });
      new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_13__["ToggleSwitch"](ugs.popup.description, 'ugs_checkRules', false, 'Do not send if the winner has any not activated/multiple wins.', false, false, 'The winners will be checked in real time.', _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkRules'));
      const checkMemberSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_13__["ToggleSwitch"](ugs.popup.description, 'ugs_checkMember', false, 'Do not send if the winner is no longer a member of at least one of the groups for group giveaways.', false, false, 'The winners will be checked in real time.', _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkMember'));
      const checkDifferenceSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_13__["ToggleSwitch"](ugs.popup.description, 'ugs_checkDifference', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Do not send if the winner has a gift difference lower than", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
        className: "esgst-ugs-difference",
        step: "0.1",
        type: "number",
        value: _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_difference')
      }), "."), false, false, 'The winners will be checked in real time.', _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkDifference'));
      new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_13__["ToggleSwitch"](ugs.popup.description, 'ugs_checkWhitelist', false, 'Do not send if the winner is not on your whitelist.', false, false, `You must sync your whitelist through the settings menu. Whitelisted winners get a pass for broken rules, so if this option is enabled and the winner is whitelisted, the gift will be sent regardless of whether or not the first option is enabled.`, _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkWhitelist'));
      new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_13__["ToggleSwitch"](ugs.popup.description, 'ugs_checkBlacklist', false, 'Do not send if the winner on your blacklist.', false, false, `You must sync your blacklist through the settings menu. If the winner is blacklisted, but is a member of one of the groups, the gift will be sent anyway.`, _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkBlacklist'));
      if (!_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkMember')) {
        checkDifferenceSwitch.container.classList.add('esgst-hidden');
      }
      observeNumChange(checkDifferenceSwitch.name.firstElementChild, 'ugs_setDifference', true);
      checkMemberSwitch.dependencies.push(checkDifferenceSwitch.container);
      ugs.results = createElements(ugs.popup.scrollable, 'beforeend', [{
        attributes: {
          class: 'esgst-hidden markdown'
        },
        type: 'div',
        children: [{
          type: 'ul',
          children: [{
            attributes: {
              class: 'esgst-inline-list'
            },
            type: 'li',
            children: [{
              attributes: {
                class: 'esgst-bold'
              },
              type: 'span',
              children: [{
                text: 'Successfully sent gifts to ',
                type: 'node'
              }, {
                text: '0',
                type: 'span'
              }, {
                text: ` winners:`,
                type: 'node'
              }]
            }, {
              attributes: {
                class: 'esgst-inline-list'
              },
              type: 'span'
            }]
          }, {
            attributes: {
              class: 'esgst-inline-list'
            },
            type: 'li',
            children: [{
              attributes: {
                class: 'esgst-bold'
              },
              type: 'span',
              children: [{
                text: 'Failed to send gifts to ',
                type: 'node'
              }, {
                text: '0',
                type: 'span'
              }, {
                text: ` winners (check the tooltips to find out the cause of the failures):`,
                type: 'node'
              }]
            }, {
              attributes: {
                class: 'esgst-inline-list'
              },
              type: 'span'
            }]
          }, {
            attributes: {
              class: 'esgst-inline-list'
            },
            type: 'li',
            children: [{
              attributes: {
                class: 'esgst-bold'
              },
              type: 'span',
              children: [{
                text: '0',
                type: 'span'
              }, {
                text: ` giveaways with leftover gifts/keys:`,
                type: 'node'
              }]
            }, {
              attributes: {
                class: 'esgst-inline-list'
              },
              type: 'span'
            }]
          }]
        }]
      }]);
      ugs.sent = ugs.results.firstElementChild.firstElementChild;
      ugs.sentCount = ugs.sent.firstElementChild.firstElementChild;
      ugs.sentGifts = ugs.sent.lastElementChild;
      ugs.unsent = ugs.sent.nextElementSibling;
      ugs.unsentCount = ugs.unsent.firstElementChild.firstElementChild;
      ugs.unsentGifts = ugs.unsent.lastElementChild;
      ugs.leftover = ugs.unsent.nextElementSibling;
      ugs.leftoverCount = ugs.leftover.firstElementChild.firstElementChild;
      ugs.leftoverGifts = ugs.leftover.lastElementChild;
      _components_Button__WEBPACK_IMPORTED_MODULE_14__["Button"].create([{
        color: 'green',
        icons: ['fa-send'],
        name: 'Send',
        onClick: this.ugs_start.bind(this, ugs)
      }, {
        template: 'error',
        name: 'Cancel',
        switchTo: {
          onReturn: 0
        },
        onClick: this.ugs_cancel.bind(this, ugs)
      }]).insert(ugs.popup.description, 'beforeend');
      ugs.progressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_15__["NotificationBar"].create().insert(ugs.popup.description, 'beforeend').hide();
      ugs.overallProgressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_15__["NotificationBar"].create().insert(ugs.popup.description, 'beforeend').hide();
      ugs.popup.description.appendChild(ugs.popup.scrollable);
    }
    ugs.popup.open();
  }
  async ugs_start(ugs) {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkMember') && !(await _class_Permissions__WEBPACK_IMPORTED_MODULE_8__["permissions"].contains([['steamCommunity']]))) {
      return;
    }

    // initialize/reset stuff
    ugs.isCanceled = false;
    ugs.giveaways = [];
    ugs.groups = {};
    ugs.button.classList.add('esgst-busy');
    ugs.results.classList.add('esgst-hidden');
    ugs.sent.classList.add('esgst-hidden');
    ugs.unsent.classList.add('esgst-hidden');
    ugs.leftover.classList.add('esgst-hidden');
    ugs.sentGifts.innerHTML = '';
    ugs.unsentGifts.innerHTML = '';
    ugs.leftoverGifts.innerHTML = '';
    ugs.sentCount.textContent = ugs.unsentCount.textContent = ugs.leftoverCount.textContent = '0';
    if (!_class_Session__WEBPACK_IMPORTED_MODULE_10__["Session"].counters.created) {
      // there are no unsent giveaways
      ugs.button.classList.remove('esgst-busy');
      ugs.progressBar.setWarning('You do not have any unsent gifts.').show();
      return;
    }
    ugs.progressBar.setLoading(null).show();
    ugs.overallProgressBar.reset().show();

    // retrieve unsent giveaways
    ugs.count = _class_Session__WEBPACK_IMPORTED_MODULE_10__["Session"].counters.created;
    let giveaways = [];
    let nextPage = 1;
    let pagination = null;
    let skipped = false;
    do {
      let context = null;
      skipped = false;
      if (nextPage === this.esgst.currentPage) {
        context = document;
      } else if (document.getElementsByClassName(`esgst-es-page-${nextPage}}`)[0]) {
        // page has been loaded with endless scrolling, so its giveaways were already retrieved when the context was the document
        skipped = true;
        continue;
      } else {
        context = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`/giveaways/created/search?page=${nextPage}`)).html;
      }
      if (nextPage === 1) {
        ugs.lastPage = this.esgst.modules.generalLastPageLink.lpl_getLastPage(context, context === document);
        ugs.lastPage = ugs.lastPage === 999999999 ? '' : ` of ${ugs.lastPage}`;
      }
      ugs.progressBar.setMessage(`Searching for unsent gifts (page ${nextPage}${ugs.lastPage})...`);
      ugs.continue = false;
      let elements = context.getElementsByClassName('table__row-outer-wrap');
      for (let i = 0, n = elements.length; i < n; i++) {
        let element = elements[i];
        let unsent = element.getElementsByClassName('fa icon-red fa-warning')[0];
        if (unsent) {
          let heading = element.getElementsByClassName('table__column__heading')[0];
          let url = heading.getAttribute('href');
          giveaways.push({
            code: url.match(/\/giveaway\/(.+?)\//)[1],
            context: unsent,
            name: heading.firstChild.textContent.trim().match(/(.+?)(\s\(.+\sCopies\))?$/)[1],
            url: url
          });
          ugs.continue = true;
          ugs.count -= 1;
        }
      }
      pagination = context.getElementsByClassName('pagination__navigation')[0];
      nextPage += 1;
    } while (!ugs.isCanceled && (ugs.count > 0 || ugs.continue) && (skipped || pagination && !pagination.lastElementChild.classList.contains('is-selected')));

    // retrieve the winners/groups of each giveaway
    for (let i = 0, n = giveaways.length; !ugs.isCanceled && i < n; i++) {
      ugs.overallProgressBar.setMessage(`${i} of ${n} giveaways checked`);
      let giveaway = giveaways[i];
      ugs.giveaways[giveaway.code] = {
        code: giveaway.code,
        copies: 0,
        context: giveaway.context,
        name: giveaway.name,
        url: giveaway.url,
        totalWinners: 0,
        winners: []
      };

      // retrieve the winners of the giveaway
      let nextPage = 1;
      let pagination = null;
      do {
        let context = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`${giveaway.url}/winners/search?page=${nextPage}`)).html;
        if (nextPage === 1) {
          ugs.lastWinnersPage = this.esgst.modules.generalLastPageLink.lpl_getLastPage(context);
          ugs.lastWinnersPage = ugs.lastWinnersPage === 999999999 ? '' : ` of ${ugs.lastWinnersPage}`;
        }
        ugs.progressBar.setMessage(`Retrieving winners (page ${nextPage}${ugs.lastWinnersPage})...`);
        if (!ugs.giveaways[giveaway.code].copies) {
          const elements = context.querySelectorAll('.featured__heading__small');
          if (elements && elements.length === 2) {
            ugs.giveaways[giveaway.code].copies = parseInt(elements[0].textContent.replace(/,|\(|\)|Copies/g, '').trim());
          }
        }
        let elements = context.getElementsByClassName('table__row-outer-wrap');
        const n = elements.length;
        ugs.giveaways[giveaway.code].totalWinners += n;
        for (let i = 0; i < n; i++) {
          let element = elements[i];
          if (element.querySelector(`.table__gift-not-sent:not(.is-hidden)`)) {
            ugs.giveaways[giveaway.code].winners.push({
              username: element.getElementsByClassName('table__column__heading')[0].textContent,
              values: {},
              winnerId: element.querySelector(`[name="winner_id"]`).value
            });
            ugs.count -= 1;
          }
        }
        if (!ugs.giveaways[giveaway.code].group) {
          ugs.giveaways[giveaway.code].group = context.getElementsByClassName('featured__column--group')[0];
        }
        if (!ugs.giveaways[giveaway.code].whitelist) {
          ugs.giveaways[giveaway.code].whitelist = context.getElementsByClassName('featured__column--whitelist')[0];
        }
        pagination = context.getElementsByClassName('pagination__navigation')[0];
        nextPage += 1;
      } while (!ugs.isCanceled && pagination && !pagination.lastElementChild.classList.contains('is-selected'));
      if (!ugs.giveaways[giveaway.code].copies) {
        ugs.giveaways[giveaway.code].copies = 1;
      }
      if (ugs.giveaways[giveaway.code].copies > ugs.giveaways[giveaway.code].totalWinners) {
        ugs.leftover.classList.remove('esgst-hidden');
        ugs.leftoverCount.textContent = parseInt(ugs.leftoverCount.textContent) + 1;
        createElements(ugs.leftoverGifts, 'beforeend', [{
          type: 'span',
          children: [{
            attributes: {
              href: giveaway.url
            },
            text: giveaway.name,
            type: 'a'
          }, {
            text: ` (${ugs.giveaways[giveaway.code].copies - ugs.giveaways[giveaway.code].totalWinners})`,
            type: 'node'
          }]
        }]);
      }

      // retrieve the groups of the giveaway
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkMember') && ugs.giveaways[giveaway.code].group) {
        ugs.giveaways[giveaway.code].groups = [];
        let nextPage = 1;
        let pagination = null;
        do {
          let context = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`${giveaway.url}/groups/search?page=${nextPage}`)).html;
          if (nextPage === 1) {
            ugs.lastGroupsPage = this.esgst.modules.generalLastPageLink.lpl_getLastPage(context);
            ugs.lastGroupsPage = ugs.lastGroupsPage === 999999999 ? '' : ` of ${ugs.lastGroupsPage}`;
          }
          ugs.progressBar.setMessage(`Retrieving groups (page ${nextPage}${ugs.lastGroupsPage})...`);
          let elements = context.getElementsByClassName('table__row-outer-wrap');
          for (let i = 0, n = elements.length; i < n; i++) {
            let element = elements[i];
            let heading = element.getElementsByClassName('table__column__heading')[0];
            let match = heading.getAttribute('href').match(/\/group\/(.+?)\/(.+)/);
            ugs.giveaways[giveaway.code].groups.push({
              avatar: element.getElementsByClassName('table_image_avatar')[0].style.backgroundImage.match(/url\("(.+)"\)/)[1],
              code: match[1],
              name: heading.textContent,
              urlName: match[2]
            });
          }
          pagination = context.getElementsByClassName('pagination__navigation')[0];
          nextPage += 1;
        } while (!ugs.isCanceled && pagination && !pagination.lastElementChild.classList.contains('is-selected'));
      }
    }
    if (ugs.isCanceled) {
      // process canceled
      return;
    }
    let codes = Object.keys(ugs.giveaways);
    let n = codes.length;
    if (n > 0) {
      // send gifts
      ugs.rerolls = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].common.getValue('rerolls', '[]'));
      ugs.sentWinners = {};
      ugs.winners = {};
      ugs.results.classList.remove('esgst-hidden');
      for (let i = 0; !ugs.isCanceled && i < n; i++) {
        ugs.overallProgressBar.setMessage(`${i} of ${n} giveaways checked`);
        let giveaway = ugs.giveaways[codes[i]];
        for (let j = 0, numWinners = giveaway.winners.length; j < numWinners; j++) {
          let winner = giveaway.winners[j];
          let savedUser = await getUser(this.esgst.users, winner);

          // check order:
          // 1. check if the winner is being rerolled
          // 2. check if the winner has not activated/multiple wins
          // 3. if passed and it's a group giveaway, check if the winner is still a group member, otherwise go to 3
          // 4. check if the winner is whitelisted, which would give them a pass for not activated/multiple wins
          // 5. finally check if the winner is blacklisted

          if (ugs.rerolls.indexOf(winner.winnerId) > -1) {
            // winner is being rerolled, cannot send gift
            winner.error = `${winner.username} is currently being rerolled.`;
          } else {
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkRules')) {
              // check if winner has not activated/multiple wins
              ugs.progressBar.setMessage(`Checking if ${winner.username} has not activated/multiple wins...`);
              winner.values.namwc = {
                lastCheck: Date.now(),
                results: {}
              };
              try {
                await this.esgst.modules.usersNotActivatedMultipleWinChecker.namwc_checkNotActivated(ugs, winner);
                await this.esgst.modules.usersNotActivatedMultipleWinChecker.namwc_checkMultiple(ugs, winner);
                let notActivated = Array.isArray(winner.values.namwc.results.notActivated) ? winner.values.namwc.results.notActivated.length : winner.values.namwc.results.notActivated;
                let multiple = Array.isArray(winner.values.namwc.results.multiple) ? winner.values.namwc.results.multiple.length : winner.values.namwc.results.multiple;
                let unknown = Array.isArray(winner.values.namwc.results.unknown) ? winner.values.namwc.results.unknown.length : winner.values.namwc.results.unknown;
                if (unknown) {
                  winner.error = `Could not check ${winner.username}'s not activated / multiple wins (probably a private profile).`;
                } else if (notActivated && multiple) {
                  winner.error = `${winner.username} has ${notActivated} not activated wins and ${multiple} multiple wins.`;
                } else if (notActivated) {
                  winner.error = `${winner.username} has ${notActivated} not activated wins.`;
                } else if (multiple) {
                  winner.error = `${winner.username} has ${multiple} multiple wins.`;
                }
                winner.sgToolsErrorNAW = notActivated;
                winner.sgToolsErrorMW = multiple;
              } catch (e) {
                winner.error = `Could not check ${winner.username}'s not activated / multiple wins (probably a connection error).`;
              }
            }
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkMember') && giveaway.group && !winner.error) {
              // check if winner is still a group member
              ugs.progressBar.setMessage(`Checking if ${winner.username} is a member of one of the groups...`);
              await getSteamId(null, false, this.esgst.users, winner);
              let member = false;
              for (let k = 0, numGroups = giveaway.groups.length; k < numGroups; k++) {
                let group = giveaway.groups[k];
                let code = group.code;
                if (!ugs.groups[code]) {
                  // retrieve group members and store them in case another giveaway has the same group
                  let l;
                  for (l = this.esgst.groups.length - 1; l > -1 && this.esgst.groups[l].code !== code; l--) {}
                  if (l < 0) {
                    this.esgst.groups.push({
                      avatar: group.avatar,
                      code: code,
                      name: group.name
                    });
                    l = this.esgst.groups.length - 1;
                  }
                  if (!this.esgst.groups[l].steamId) {
                    this.esgst.groups[l].steamId = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`/group/${code}/`)).html.getElementsByClassName('sidebar__shortcut-inner-wrap')[0].firstElementChild.getAttribute('href').match(/\d+/)[0];
                  }
                  ugs.groups[code] = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`http://steamcommunity.com/gid/${this.esgst.groups[l].steamId}/memberslistxml?xml=1`)).text.match(/<steamID64>.+?<\/steamID64>/g);
                  for (l = ugs.groups[code].length - 1; l > -1; l--) {
                    ugs.groups[code][l] = ugs.groups[code][l].match(/<steamID64>(.+?)<\/steamID64>/)[1];
                  }
                }
                if (ugs.groups[code].indexOf(winner.steamId) < 0) {
                  // winner is not a member of this group, continue to check the next group
                  continue;
                }
                if (!_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkDifference')) {
                  // no need to check gift difference, gift can be sent
                  member = true;
                  break;
                }

                // check winner's gift difference
                ugs.progressBar.setMessage(`Checking if ${winner.username} has a gift difference higher than the one set...`);
                let element = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`/group/${code}/${group.urlName}/users/search?q=${winner.username}`)).html.getElementsByClassName('table__row-outer-wrap')[0];
                if (element && element.getElementsByClassName('table__column__heading')[0].textContent === winner.username) {
                  let difference = parseFloat(element.getElementsByClassName('table__column--width-small')[2].textContent);
                  if (difference >= _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_difference')) {
                    member = true;
                    break;
                  }
                  winner.error = `${winner.username} has a ${difference} gift difference.`;
                  break;
                }
              }
              if (!winner.error && !member) {
                winner.error = `${winner.username} is not a member of one of the groups.`;
              }
            }
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkWhitelist')) {
              // check if winner is whitelisted
              winner.error = savedUser && savedUser.whitelisted ? null : `${winner.username} is not whitelisted.`;
            }
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugs_checkBlacklist') && savedUser && savedUser.blacklisted && !winner.error) {
              // check if winner is blacklisted
              winner.error = `${winner.username} is blacklisted.`;
            }
          }

          // send gift to the winner or not, based on the previous checks
          if (!ugs.winners[winner.username]) {
            ugs.winners[winner.username] = [];
          }
          if (ugs.winners[winner.username].indexOf(giveaway.name) < 0) {
            if (winner.error) {
              ugs.unsent.classList.remove('esgst-hidden');
              ugs.unsentCount.textContent = parseInt(ugs.unsentCount.textContent) + 1;
              createElements(ugs.unsentGifts, 'beforeend', [{
                type: 'span',
                children: [{
                  attributes: {
                    href: `/user/${winner.username}`
                  },
                  text: winner.username,
                  type: 'a'
                }, {
                  text: ` (`,
                  type: 'node'
                }, {
                  attributes: {
                    href: `${giveaway.url}/winners`
                  },
                  text: giveaway.name,
                  type: 'a'
                }, {
                  text: `) `,
                  type: 'node'
                }, winner.sgToolsErrorNAW ? {
                  attributes: {
                    class: 'esgst-red',
                    href: `http://www.sgtools.info/nonactivated/${winner.username}`
                  },
                  type: 'a',
                  children: [{
                    text: `${winner.sgToolsErrorNAW} `,
                    type: 'node'
                  }, {
                    attributes: {
                      class: 'fa fa-steam',
                      title: 'Not activated wins'
                    },
                    type: 'i'
                  }]
                } : null, winner.sgToolsErrorMW ? {
                  attributes: {
                    class: 'esgst-red',
                    href: `http://www.sgtools.info/multiple/${winner.username}`
                  },
                  type: 'a',
                  children: [{
                    text: `${winner.sgToolsErrorMW} `,
                    type: 'node'
                  }, {
                    attributes: {
                      class: 'fa fa-clone',
                      title: 'Multiple wins'
                    },
                    type: 'i'
                  }]
                } : null, {
                  attributes: {
                    class: 'fa fa-question-circle',
                    title: winner.error
                  },
                  type: 'i'
                }]
              }]);
            } else if (!ugs.isCanceled) {
              await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].post('/ajax.php', {
                data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_10__["Session"].xsrfToken}&do=sent_feedback&action=1&winner_id=${winner.winnerId}`
              });
              if (!ugs.sentWinners[giveaway.code]) {
                ugs.sentWinners[giveaway.code] = [];
              }
              ugs.sent.classList.remove('esgst-hidden');
              ugs.sentWinners[giveaway.code].push(winner.username);
              ugs.sentCount.textContent = parseInt(ugs.sentCount.textContent) + 1;
              createElements(ugs.sentGifts, 'beforeend', [{
                type: 'span',
                children: [{
                  attributes: {
                    href: `/user/${winner.username}`
                  },
                  text: winner.username,
                  type: 'a'
                }, {
                  text: ` (`,
                  type: 'node'
                }, {
                  attributes: {
                    href: `${giveaway.url}/winners`
                  },
                  text: giveaway.name,
                  type: 'a'
                }, {
                  text: `)`,
                  type: 'node'
                }]
              }]);
              ugs.winners[winner.username].push(giveaway.name);
              if (document.body.contains(giveaway.context)) {
                giveaway.context.className = 'fa fa-check-circle icon-green';
                giveaway.context.nextElementSibling.textContent = 'Sent';
              }
            }
          } else {
            // exact same game has already been sent to this winner, meaning they won multiple copies of the same game, so extra gifts cannot be sent
            ugs.unsent.classList.remove('esgst-hidden');
            ugs.unsentCount.textContent = parseInt(ugs.unsentCount.textContent) + 1;
            createElements(ugs.unsentGifts, 'beforeend', [{
              type: 'span',
              children: [{
                attributes: {
                  href: `/user/${winner.username}`
                },
                text: winner.username,
                type: 'a'
              }, {
                text: ` (`,
                type: 'node'
              }, {
                attributes: {
                  href: `${giveaway.url}/winners`
                },
                text: giveaway.name,
                type: 'a'
              }, {
                text: `) `,
                type: 'node'
              }, {
                attributes: {
                  class: 'fa fa-question-circle',
                  title: `${winner.username} already won ${giveaway.name} from another giveaway of yours`
                },
                type: 'i'
              }]
            }]);
          }
        }
      }

      // finalize process
      let winners = JSON.parse(getValue('winners', '{}'));
      for (let key in ugs.sentWinners) {
        if (ugs.sentWinners.hasOwnProperty(key)) {
          if (!winners[key]) {
            winners[key] = [];
          }
          for (let i = 0, n = ugs.sentWinners[key].length; i < n; i++) {
            winners[key].push(ugs.sentWinners[key][i]);
          }
        }
      }
      let savedUsers = [];
      for (let key in ugs.giveaways) {
        if (ugs.giveaways.hasOwnProperty(key)) {
          for (let i = 0, n = ugs.giveaways[key].winners.length; i < n; i++) {
            savedUsers.push(ugs.giveaways[key].winners[i]);
          }
        }
      }
      ugs.progressBar.setMessage('Saving data...');
      ugs.overallProgressBar.hide();
      await Promise.all([setValue('winners', JSON.stringify(winners)), saveUsers(savedUsers), setValue('groups', JSON.stringify(this.esgst.groups))]);
      ugs.button.classList.remove('esgst-busy');
      ugs.progressBar.reset().hide();
      ugs.overallProgressBar.setSuccess('All giveaways checked!').show();
    } else {
      // there are no unsent gifts
      ugs.button.classList.remove('esgst-busy');
      ugs.progressBar.setWarning('You do not have any unsent gifts.');
      ugs.overallProgressBar.reset().hide();
    }
  }
  ugs_cancel(ugs) {
    ugs.isCanceled = true;
    ugs.button.classList.remove('esgst-busy');
    ugs.progressBar.reset().hide();
  }
}
const giveawaysUnsentGiftSender = new GiveawaysUnsentGiftSender();


/***/ }),
/* 364 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersUserSuspensionChecker", function() { return usersUserSuspensionChecker; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(132);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(212);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(218);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(122);















class UsersUserSuspensionChecker extends _class_Module__WEBPACK_IMPORTED_MODULE_7__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-user"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-ban"
      }), ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-question-circle"
      }), ") to the main page heading of any page that allows you to check which users in the page are suspended.")),
      id: 'usc',
      name: 'User Suspension Checker',
      sg: true,
      type: 'users'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.mainPageHeading) {
      return;
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.uscButton = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.createHeadingButton({
      id: 'usc',
      icons: ['fa-user', 'fa-ban', 'fa-question-circle'],
      title: 'Check users for suspensions'
    });
    this.addButton(_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.uscButton);
  }
  addButton(button) {
    const uscObj = {};
    if (window.location.pathname.match(new RegExp(`^/user/(?!${_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('username')})`))) {
      uscObj.username = document.getElementsByClassName('featured__heading__medium')[0].textContent;
    }
    const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_8__["Popup"]({
      addScrollable: true,
      icon: 'fa-question',
      title: `Check users for suspensions:`
    });
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popup.description, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      ref: ref => uscObj.options = ref
    }));
    let checkSingleSwitch;
    if (uscObj.username) {
      checkSingleSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_11__["ToggleSwitch"](uscObj.options, 'usc_checkSingle', false, `Only check ${uscObj.username || 'current user'}.`, false, false, `If disabled, all users in the current page will be checked.`, _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkSingle'));
    }
    const mmFeature = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.getFeatureNumber('mm');
    const checkSelectedSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_11__["ToggleSwitch"](uscObj.options, 'usc_checkSelected', false, 'Only check selected.', false, false, `Use ${mmFeature.number} ${mmFeature.name} to select the users that you want to check. Then click the button 'Check Suspensions' in the Multi-Manager popout and you will be redirected here.`, _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkSelected'));
    let checkAllSwitch;
    let checkPagesSwitch;
    if (!window.location.pathname.match(/^\/(discussions|users|archive)/)) {
      checkAllSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_11__["ToggleSwitch"](uscObj.options, 'usc_checkAll', false, 'Check all pages.', false, false, `If disabled, only the current page will be checked.`, _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkAll'));
      checkPagesSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_11__["ToggleSwitch"](uscObj.options, 'usc_checkPages', false, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Check only pages from", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
        className: "esgst-switch-input",
        min: "1",
        type: "number",
        value: _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_minPage')
      }), ' to ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
        className: "esgst-switch-input",
        min: "1",
        type: "number",
        value: _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_maxPage')
      }), "."), false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkPages'));
      const minPage = checkPagesSwitch.name.firstElementChild;
      const maxPage = minPage.nextElementSibling;
      const lastPage = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.modules.generalLastPageLink.lpl_getLastPage(document, true);
      if (lastPage !== 999999999) {
        maxPage.setAttribute('max', lastPage);
      }
      _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.observeNumChange(minPage, 'usc_minPage', true);
      _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.observeNumChange(maxPage, 'usc_maxPage', true);
    }
    if (checkSingleSwitch || checkAllSwitch || checkPagesSwitch) {
      if (checkSingleSwitch) {
        if (checkAllSwitch) {
          checkSingleSwitch.exclusions.push(checkAllSwitch.container);
        }
        if (checkPagesSwitch) {
          checkSingleSwitch.exclusions.push(checkPagesSwitch.container);
        }
        checkSingleSwitch.exclusions.push(checkSelectedSwitch.container);
        checkSelectedSwitch.exclusions.push(checkSingleSwitch.container);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkSingle')) {
          if (checkAllSwitch) {
            checkAllSwitch.container.classList.add('esgst-hidden');
          }
          if (checkPagesSwitch) {
            checkPagesSwitch.container.classList.add('esgst-hidden');
          }
          checkSelectedSwitch.container.classList.add('esgst-hidden');
        } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkSelected')) {
          checkSingleSwitch.container.classList.add('esgst-hidden');
        }
      }
      if (checkAllSwitch) {
        if (checkSingleSwitch) {
          checkAllSwitch.exclusions.push(checkSingleSwitch.container);
        }
        if (checkPagesSwitch) {
          checkAllSwitch.exclusions.push(checkPagesSwitch.container);
        }
        checkSelectedSwitch.exclusions.push(checkAllSwitch.container);
        checkAllSwitch.exclusions.push(checkSelectedSwitch.container);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkAll')) {
          if (checkSingleSwitch) {
            checkSingleSwitch.container.classList.add('esgst-hidden');
          }
          if (checkPagesSwitch) {
            checkPagesSwitch.container.classList.add('esgst-hidden');
          }
          checkSelectedSwitch.container.classList.add('esgst-hidden');
        } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkSelected')) {
          checkAllSwitch.container.classList.add('esgst-hidden');
        }
      }
      if (checkPagesSwitch) {
        if (checkSingleSwitch) {
          checkPagesSwitch.exclusions.push(checkSingleSwitch.container);
        }
        if (checkAllSwitch) {
          checkPagesSwitch.exclusions.push(checkAllSwitch.container);
        }
        checkSelectedSwitch.exclusions.push(checkPagesSwitch.container);
        checkPagesSwitch.exclusions.push(checkSelectedSwitch.container);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkPages')) {
          if (checkSingleSwitch) {
            checkSingleSwitch.container.classList.add('esgst-hidden');
          }
          if (checkAllSwitch) {
            checkAllSwitch.container.classList.add('esgst-hidden');
          }
          checkSelectedSwitch.container.classList.add('esgst-hidden');
        } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkSelected')) {
          checkPagesSwitch.container.classList.add('esgst-hidden');
        }
      }
    }
    _components_Button__WEBPACK_IMPORTED_MODULE_12__["Button"].create([{
      color: 'green',
      icons: ['fa-question-circle'],
      name: 'Check',
      onClick: async () => {
        button.classList.add('esgst-busy');
        await this.setCheck(uscObj);
        uscObj.progressBar.setSuccess('All users checked!');
        button.classList.remove('esgst-busy');
        popup.setDone();
      }
    }, {
      template: 'error',
      name: 'Cancel',
      switchTo: {
        onReturn: 0
      },
      onClick: () => {
        uscObj.canceled = true;
        window.setTimeout(() => {
          uscObj.progressBar.reset().hide();
        }, 500);
        button.classList.remove('esgst-busy');
      }
    }]).insert(popup.description, 'beforeend');
    uscObj.progressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_13__["NotificationBar"].create().insert(popup.description, 'beforeend').hide();
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(popup.scrollable, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      ref: ref => uscObj.results = ref
    }));
    _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.createResults(uscObj.results, uscObj, [{
      Icon: 'fa fa-times-circle esgst-red',
      Description: `Suspended: `,
      Key: 'suspended'
    }, {
      Icon: 'fa fa-times esgst-red',
      Description: `Banned: `,
      Key: 'banned'
    }, {
      Icon: 'fa fa-check esgst-green',
      Description: `None: `,
      Key: 'none'
    }]);
    button.addEventListener('click', () => {
      if (button.getAttribute('data-mm')) {
        if (!_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkSelected')) {
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkSingle') && checkSingleSwitch) {
            let element = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.createElements(checkSingleSwitch.container, 'afterbegin', [{
              attributes: {
                class: 'esgst-bold esgst-red'
              },
              text: 'Disable this -->',
              type: 'span'
            }]);
            window.setTimeout(() => element.remove(), 5000);
          } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkAll')) {
            let element = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.createElements(checkAllSwitch.container, 'afterbegin', [{
              attributes: {
                class: 'esgst-bold esgst-red'
              },
              text: 'Disable this -->',
              type: 'span'
            }]);
            window.setTimeout(() => element.remove(), 5000);
          } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkPages')) {
            let element = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.createElements(checkPagesSwitch.container, 'afterbegin', [{
              attributes: {
                class: 'esgst-bold esgst-red'
              },
              text: 'Disable this -->',
              type: 'span'
            }]);
            window.setTimeout(() => element.remove(), 5000);
          }
          let element = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.createElements(checkSelectedSwitch.container, 'afterbegin', [{
            attributes: {
              class: 'esgst-bold esgst-red'
            },
            text: 'Enable this -->',
            type: 'span'
          }]);
          window.setTimeout(() => element.remove(), 5000);
        }
        button.removeAttribute('data-mm');
      }
      popup.open();
    });
  }
  async setCheck(uscObj) {
    uscObj.progressBar.setLoading(null).show();
    uscObj.suspended.classList.add('esgst-hidden');
    uscObj.banned.classList.add('esgst-hidden');
    uscObj.none.classList.add('esgst-hidden');
    uscObj.suspendedCount.textContent = uscObj.bannedCount.textContent = uscObj.noneCount.textContent = '0';
    uscObj.suspendedUsers.innerHTML = '';
    uscObj.bannedUsers.innerHTML = '';
    uscObj.noneUsers.innerHTML = '';
    uscObj.users = [];
    uscObj.canceled = false;
    if (uscObj.username && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkSingle')) {
      uscObj.users.push(uscObj.username);
      await this.checkUsers(uscObj);
    } else {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkSelected')) {
        uscObj.users = Array.from(_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.mmWbcUsers);
      } else if (!_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkPages')) {
        const elements = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.pageOuterWrap.querySelectorAll(`a[href*="/user/"]`);
        for (const element of elements) {
          const match = element.getAttribute('href').match(/\/user\/(.+)/);
          if (!match) {
            continue;
          }
          const username = match[1];
          if (uscObj.users.indexOf(username) > -1 || username === _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('username') || username !== element.textContent || element.closest('.markdown')) {
            continue;
          }
          uscObj.users.push(username);
        }
      }
      if ((_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkAll') || _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkPages')) && (uscObj.username && !_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkSingle') || !uscObj.username) && !window.location.pathname.match(/^\/(discussions|users|archive)/)) {
        await this.getUsers(uscObj);
      }
      uscObj.users = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_14__["Utils"].sortArray(uscObj.users);
      if (window.location.pathname.match(/^\/users/)) {
        uscObj.users = uscObj.users.slice(0, 25);
      }
      await this.checkUsers(uscObj);
    }
  }
  async checkUsers(uscObj) {
    let i, n;
    for (i = 0, n = uscObj.users.length; i < n && !uscObj.canceled; i++) {
      uscObj.progressBar.setMessage(`Checking users (${i} of ${n})...`);
      const username = uscObj.users[i];
      const html = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`/user/${username}`)).html;
      if (uscObj.canceled) {
        return;
      }
      let key = '';
      let text = '';
      const suspension = html.querySelector('.sidebar__suspension');
      if (suspension) {
        if (suspension.textContent.match(/Suspended/)) {
          key = 'suspended';
          const suspensionTime = html.querySelector('.sidebar__suspension-time');
          text = suspensionTime.textContent;
        } else {
          key = 'banned';
        }
      } else {
        key = 'none';
      }
      uscObj[key].classList.remove('esgst-hidden');
      _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(uscObj[`${key}Users`], 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: `/user/${username}`
      }, username), " ", text ? ` (${text})` : null));
      uscObj[`${key}Count`].textContent = parseInt(uscObj[`${key}Count`].textContent) + 1;
    }
    uscObj.progressBar.setMessage(`Checking users (${i} of ${n})...`);
  }
  async getUsers(uscObj) {
    if (uscObj.canceled) {
      return;
    }
    let pagination = null;
    let nextPage;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkPages')) {
      nextPage = _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_minPage');
      uscObj.lastPage = `of ${_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_maxPage')}`;
    } else {
      nextPage = 1;
      uscObj.lastPage = '';
    }
    do {
      let html;
      if (nextPage === _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.currentPage) {
        html = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.pageOuterWrap;
      } else {
        html = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`${_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.searchUrl}${nextPage}`)).html;
      }
      if (uscObj.canceled) {
        return;
      }
      if (!uscObj.lastPage) {
        uscObj.lastPage = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.modules.generalLastPageLink.lpl_getLastPage(html, true);
        uscObj.lastPage = uscObj.lastPage === 999999999 ? '' : ` of ${uscObj.lastPage}`;
      }
      uscObj.progressBar.setMessage(`Retrieving users (page ${nextPage}${uscObj.lastPage})...`);
      const elements = html.querySelectorAll(`a[href*="/user/"]`);
      for (const element of elements) {
        const match = element.getAttribute('href').match(/\/user\/(.+)/);
        if (match) {
          const username = match[1];
          if (uscObj.users.indexOf(username) < 0 && username !== _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('username') && username === element.textContent && !element.closest('.markdown')) {
            uscObj.users.push(username);
          }
        }
      }
      pagination = html.querySelector('.pagination__navigation');
      nextPage += 1;
    } while (!uscObj.canceled && pagination && !pagination.lastElementChild.classList.contains('is-selected') && (!_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_checkPages') || nextPage <= _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('usc_maxPage')));
  }
}
const usersUserSuspensionChecker = new UsersUserSuspensionChecker();


/***/ }),
/* 365 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersWhitelistBlacklistChecker", function() { return usersWhitelistBlacklistChecker; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(146);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(208);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(210);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(220);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(222);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(211);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(132);
/* harmony import */ var _class_Table__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(272);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(212);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(218);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(224);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(144);






















const createElements = _Common__WEBPACK_IMPORTED_MODULE_21__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_21__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_21__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_21__["common"]),
  getFeatureNumber = _Common__WEBPACK_IMPORTED_MODULE_21__["common"].getFeatureNumber.bind(_Common__WEBPACK_IMPORTED_MODULE_21__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_21__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_21__["common"]),
  getTimestamp = _Common__WEBPACK_IMPORTED_MODULE_21__["common"].getTimestamp.bind(_Common__WEBPACK_IMPORTED_MODULE_21__["common"]),
  getUser = _Common__WEBPACK_IMPORTED_MODULE_21__["common"].getUser.bind(_Common__WEBPACK_IMPORTED_MODULE_21__["common"]),
  getUserId = _Common__WEBPACK_IMPORTED_MODULE_21__["common"].getUserId.bind(_Common__WEBPACK_IMPORTED_MODULE_21__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_21__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_21__["common"]),
  observeNumChange = _Common__WEBPACK_IMPORTED_MODULE_21__["common"].observeNumChange.bind(_Common__WEBPACK_IMPORTED_MODULE_21__["common"]),
  saveUser = _Common__WEBPACK_IMPORTED_MODULE_21__["common"].saveUser.bind(_Common__WEBPACK_IMPORTED_MODULE_21__["common"]);
class UsersWhitelistBlacklistChecker extends _class_Module__WEBPACK_IMPORTED_MODULE_9__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-heart"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-ban"
      }), ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-question-circle"
      }), ") to the main page heading of any page that allows you to check which users in the page have whitelisted/blacklisted you."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "That information is retrieved by searching for whitelist giveaways in the user's", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "profile"), " page and checking if you can access them. If no whitelist giveaways are found, the feature searches for group + whitelist giveaways instead and checks if you can access them using the groups that you are a member of to determine whether you can access them for being a group member or for being in the user's whitelist."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "There are many options that allow you to narrow down the check: you can select which users to check, check only if the user has blacklisted you (which is faster than checking if they have whitelisted you because it does not need to find a whitelist giveaway), how many pages to check, whether or not to check again users that were already checked and whether or not to skip users that the feature is taking too long to find whitelist giveaways from."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "There are also options to return whitelists/blacklists, which means that if a user that has whitelisted/blacklisted you is found, they will be whitelisted/blacklisted back."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-heart"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-ban"
      }), ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-gear"
      }), ") to the page heading of this menu that allows you to view/update all of the users that have been checked."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Results are cached for 24 hours, so if you check the same user again within that timeframe, their status will not change, unless you check them with the option to clear the cache enabled.")),
      features: {
        wbc_h: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Adds an icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
            className: "fa fa-check esgst-whitelist"
          }), " if the user has whitelisted you and ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
            className: "fa fa-times esgst-blacklist"
          }), " if they have blacklisted you) next to a checked user's username (in any page)."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "If you hover over the icon, it shows the date when they were checked for the last time.")),
          name: 'Highlight checked users.',
          sg: true,
          st: true
        },
        wbc_n: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "If you have ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
            "data-esgst-feature-id": "un"
          }), " enabled, a note will be saved for a user if they were whitelisted / blacklisted back.")),
          name: 'Save automatic notes when returning whitelists/blacklists.',
          sg: true
        },
        wbc_hb: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "With this option enabled, the feature will not tell you if a user has blacklisted you (in fact, the name of the feature will change to Whitelist Checker for you). If the feature finds a user that has blacklisted you, it will tell you that it could not determine their status.")),
          name: 'Hide blacklist information.',
          sg: true
        }
      },
      id: 'wbc',
      name: 'Whitelist/Blacklist Checker',
      sg: true,
      sync: 'Steam Groups',
      syncKeys: ['Groups'],
      type: 'users'
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_h')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.userFeatures.push(this.wbc_users.bind(this));
    }
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.mainPageHeading) return;
    let [icons, title] = !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_hb') ? [['fa-heart', 'fa-ban', 'fa-question-circle'], 'Check for whitelists/blacklists'] : [['fa-heart', 'fa-question-circle'], 'Check for whitelists'];
    _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.wbcButton = createHeadingButton({
      id: 'wbc',
      icons,
      title
    });
    this.wbc_addButton(true, _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.wbcButton);
  }
  wbc_users(users) {
    for (const user of users) {
      if (user.saved && user.saved.wbc && !user.context.parentElement.getElementsByClassName('esgst-wbc-icon')[0]) {
        let result = user.saved.wbc.result;
        if (result === 'whitelisted' || result === 'blacklisted' && !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_hb')) {
          createElements(user.context, 'beforebegin', [{
            attributes: {
              class: 'esgst-wbc-icon esgst-user-icon',
              title: getFeatureTooltip('wbc', `${user.username} has ${result} you (last checked ${getTimestamp(user.saved.wbc.lastCheck)})`)
            },
            type: 'span',
            children: [{
              attributes: {
                class: `fa ${result === 'whitelisted' ? 'fa-check esgst-whitelist' : 'fa-times esgst-blacklist'}`
              },
              type: 'i'
            }]
          }]);
        }
      }
    }
  }
  wbc_addButton(Context, WBCButton) {
    let checkAllSwitch, checkPagesSwitch, checkSingleSwitch, popup;
    let WBC = {};
    WBC.Update = !Context;
    WBC.B = !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_hb');
    WBC.Username = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('username');
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_11__["Popup"]({
      addScrollable: true
    });
    if (window.location.pathname.match(new RegExp(`^/user/(?!${WBC.Username})`))) {
      WBC.User = {
        Username: document.getElementsByClassName('featured__heading__medium')[0].textContent,
        ID: document.querySelector(`[name="child_user_id"]`).value,
        SteamID64: document.querySelector(`a[href*="/profiles/"]`).href.match(/\d+/)[0]
      };
    }
    let optionsButton;
    this.heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_19__["PageHeading"].create('wbc', [WBC.Update ? 'Manage Whitelist/Blacklist Checker caches' : `Check for whitelists${WBC.B ? '/blacklists' : ''}`]).insert(popup.description, 'beforeend');
    optionsButton = _components_Button__WEBPACK_IMPORTED_MODULE_17__["Button"].create({
      color: 'alternate-white',
      tooltip: 'Options',
      icons: ['fa-gear']
    }).insert(this.heading.nodes.outer, 'beforeend');
    const popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_10__["Popout"]('', optionsButton.nodes.outer, 0, true);
    popup.Options = createElements(popout.popout, 'beforeend', [{
      type: 'div'
    }]);
    if (WBC.User) {
      checkSingleSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__["ToggleSwitch"](popup.Options, 'wbc_checkSingle', false, `Only check ${WBC.User ? WBC.User.Username : 'current user'}.`, false, false, `If disabled, all users in the current page will be checked.`, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSingle'));
    }
    let feat = getFeatureNumber('mm');
    let checkSelectedSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__["ToggleSwitch"](popup.Options, 'wbc_checkSelected', false, 'Only check selected.', false, false, `Use ${feat.number} ${feat.name} to select the users that you want to check. Then click the button 'Check WL/BL' in the Multi-Manager popout and you will be redirected here.`, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSelected'));
    let checkFromListSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__["ToggleSwitch"](popup.Options, 'wbc_checkFromList', false, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, "Only check these users:", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("input", {
      className: "esgst-switch-input esgst-switch-input-large",
      placeholder: "user1, user2, user3, ...",
      type: "text",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_userList').join(', '),
      onchange: event => {
        _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].set('wbc_userList', Array.from(new Set(event.target.value.split(/,\s*/))));
        _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.setSetting('wbc_userList', _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_userList'));
      }
    })), false, false, 'Enter the usernames of the users that you want to check, separated by a comma.', _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkFromList'));
    if (WBC.B) {
      new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__["ToggleSwitch"](popup.Options, 'wbc_checkBlacklist', false, 'Only check blacklist.', false, false, `If enabled, a blacklist-only check will be performed (faster).`, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkBlacklist'));
    }
    if (!WBC.Update && !window.location.pathname.match(/^\/(discussions|users|archive)/)) {
      checkAllSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__["ToggleSwitch"](popup.Options, 'wbc_checkAll', false, 'Check all pages.', false, false, `If disabled, only the current page will be checked.`, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkAll'));
      checkPagesSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__["ToggleSwitch"](popup.Options, 'wbc_checkPages', false, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, "Check only pages from", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("input", {
        className: "esgst-switch-input",
        min: "1",
        type: "number",
        value: _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_minPage')
      }), ' to ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("input", {
        className: "esgst-switch-input",
        min: "1",
        type: "number",
        value: _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_maxPage')
      }), "."), false, false, null, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkPages'));
      let minPage = checkPagesSwitch.name.firstElementChild;
      let maxPage = minPage.nextElementSibling;
      let lastPage = _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.modules.generalLastPageLink.lpl_getLastPage(document, true);
      if (lastPage !== 999999999) {
        maxPage.setAttribute('max', lastPage);
      }
      observeNumChange(minPage, 'wbc_minPage', true);
      observeNumChange(maxPage, 'wbc_maxPage', true);
    }
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__["ToggleSwitch"](popup.Options, 'wbc_returnWhitelists', false, 'Return whitelists.', false, false, `If enabled, everyone who has whitelisted you will be whitelisted back.`, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_returnWhitelists'));
    if (WBC.B) {
      new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__["ToggleSwitch"](popup.Options, 'wbc_returnBlacklists', false, 'Return blacklists.', false, false, `If enabled, everyone who has blacklisted you will be blacklisted back.`, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_returnBlacklists'));
    }
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__["ToggleSwitch"](popup.Options, 'wbc_checkNew', false, `Only check users who have not whitelisted ${WBC.B ? '/blacklisted' : ''} you.`, false, false, `If enabled, everyone who has whitelisted ${WBC.B ? '/blacklisted' : ''} you will be ignored (might lead to outdated data if someone who had whitelisted ${WBC.B ? '/blacklisted' : ''} you in the past removed you from those lists).`, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkNew'));
    observeNumChange(new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__["ToggleSwitch"](popup.Options, 'wbc_skipUsers', false, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, "Skip users after", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("input", {
      className: "esgst-ugs-difference",
      type: "number",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_pages')
    }), ' ', "pages."), false, false, `If enabled, when a user check passes the number of pages specified, the user will be skipped.`, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_skipUsers')).name.firstElementChild, 'wbc_pages', true);
    new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_16__["ToggleSwitch"](popup.Options, 'wbc_clearCache', false, 'Clear caches.', false, false, `If enabled, the caches of all checked users will be cleared (slower).`, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_clearCache'));
    console.log(_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSingle'), _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSelected'), _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkFromList'), _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkBlacklist'), _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkAll'), _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_returnWhitelists'), _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_returnBlacklists'), _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkNew'), _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_skipUsers'));
    if (checkSingleSwitch || checkAllSwitch || checkPagesSwitch) {
      if (checkSingleSwitch) {
        if (checkAllSwitch) {
          checkSingleSwitch.exclusions.push(checkAllSwitch.container);
        }
        if (checkPagesSwitch) {
          checkSingleSwitch.exclusions.push(checkPagesSwitch.container);
        }
        checkSingleSwitch.exclusions.push(checkSelectedSwitch.container);
        checkSingleSwitch.exclusions.push(checkFromListSwitch.container);
        checkSelectedSwitch.exclusions.push(checkSingleSwitch.container);
        checkFromListSwitch.exclusions.push(checkSingleSwitch.container);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSingle')) {
          if (checkAllSwitch) {
            checkAllSwitch.container.classList.add('esgst-hidden');
          }
          if (checkPagesSwitch) {
            checkPagesSwitch.container.classList.add('esgst-hidden');
          }
          checkSelectedSwitch.container.classList.add('esgst-hidden');
          checkFromListSwitch.container.classList.add('esgst-hidden');
        } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSelected') || _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkFromList')) {
          checkSingleSwitch.container.classList.add('esgst-hidden');
        }
      }
      if (checkAllSwitch) {
        if (checkSingleSwitch) {
          checkAllSwitch.exclusions.push(checkSingleSwitch.container);
        }
        if (checkPagesSwitch) {
          checkAllSwitch.exclusions.push(checkPagesSwitch.container);
        }
        checkSelectedSwitch.exclusions.push(checkAllSwitch.container);
        checkFromListSwitch.exclusions.push(checkAllSwitch.container);
        checkAllSwitch.exclusions.push(checkSelectedSwitch.container);
        checkAllSwitch.exclusions.push(checkFromListSwitch.container);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkAll')) {
          if (checkSingleSwitch) {
            checkSingleSwitch.container.classList.add('esgst-hidden');
          }
          if (checkPagesSwitch) {
            checkPagesSwitch.container.classList.add('esgst-hidden');
          }
          checkSelectedSwitch.container.classList.add('esgst-hidden');
          checkFromListSwitch.container.classList.add('esgst-hidden');
        } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSelected') || _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkFromList')) {
          checkAllSwitch.container.classList.add('esgst-hidden');
        }
      }
      if (checkPagesSwitch) {
        if (checkSingleSwitch) {
          checkPagesSwitch.exclusions.push(checkSingleSwitch.container);
        }
        if (checkAllSwitch) {
          checkPagesSwitch.exclusions.push(checkAllSwitch.container);
        }
        checkSelectedSwitch.exclusions.push(checkPagesSwitch.container);
        checkFromListSwitch.exclusions.push(checkPagesSwitch.container);
        checkPagesSwitch.exclusions.push(checkSelectedSwitch.container);
        checkPagesSwitch.exclusions.push(checkFromListSwitch.container);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkPages')) {
          if (checkSingleSwitch) {
            checkSingleSwitch.container.classList.add('esgst-hidden');
          }
          if (checkAllSwitch) {
            checkAllSwitch.container.classList.add('esgst-hidden');
          }
          checkSelectedSwitch.container.classList.add('esgst-hidden');
          checkFromListSwitch.container.classList.add('esgst-hidden');
        } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSelected') || _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkFromList')) {
          checkPagesSwitch.container.classList.add('esgst-hidden');
        }
      }
    }
    checkSelectedSwitch.exclusions.push(checkFromListSwitch.container);
    checkFromListSwitch.exclusions.push(checkSelectedSwitch.container);
    createElements(popup.Options, 'afterend', [{
      attributes: {
        class: 'esgst-description'
      },
      text: `If an user is highlighted, that means they have been either checked for the first time or updated.`,
      type: 'div'
    }]);
    _components_Button__WEBPACK_IMPORTED_MODULE_17__["Button"].create([{
      color: 'green',
      icons: [WBC.Update ? 'fa-refresh' : 'fa-question-circle'],
      name: WBC.Update ? 'Update' : 'Check',
      onClick: () => {
        return new Promise(resolve => {
          WBC.ShowResults = false;
          WBCButton.classList.add('esgst-busy');
          // noinspection JSIgnoredPromiseFromCall
          this.wbc_setCheck(WBC, () => {
            if (this.skip) {
              this.skip.destroy();
              this.skip = null;
            }
            WBC.progressBar.reset().hide();
            WBC.overallProgressBar.setSuccess();
            WBCButton.classList.remove('esgst-busy');
            resolve();
            WBC.popup.setDone();
          });
        });
      }
    }, {
      template: 'error',
      name: 'Cancel',
      switchTo: {
        onReturn: 0
      },
      onClick: () => {
        if (this.skip) {
          this.skip.destroy();
          this.skip = null;
        }
        window.clearInterval(WBC.Request);
        window.clearInterval(WBC.Save);
        WBC.Canceled = true;
        window.setTimeout(() => {
          WBC.progressBar.reset().hide();
        }, 500);
        WBCButton.classList.remove('esgst-busy');
      }
    }]).insert(this.heading.nodes.outer, 'beforeend');
    WBC.progressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_18__["NotificationBar"].create().insert(popup.description, 'beforeend').hide();
    WBC.overallProgressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_18__["NotificationBar"].create().insert(popup.description, 'beforeend').hide();
    popup.Results = createElements(popup.scrollable, 'beforeend', [{
      type: 'div'
    }]);
    this.table = new _class_Table__WEBPACK_IMPORTED_MODULE_15__["Table"]([[{
      size: 'fill',
      value: _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-heart esgst-whitelist"
      }), ' Whitelisted (', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
        ref: ref => this.whitelistedCount = ref
      }, "0"), ') ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-question-circle",
        title: "Users that have whitelisted you"
      }))
    }, {
      size: 'fill',
      value: _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-ban esgst-blacklist"
      }), ' Blacklisted (', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
        ref: ref => this.blacklistedCount = ref
      }, "0"), ') ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-question-circle",
        title: "Users that have blacklisted you"
      }))
    }, {
      size: 'fill',
      value: _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-check"
      }), ` ${WBC.B ? 'None' : 'Not Blacklisted'} (`, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
        ref: ref => this.noneCount = ref
      }, "0"), ') ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-question-circle",
        title: WBC.B ? 'Users that have neither whitelisted nor blacklisted you' : 'Users that have not whitelisted you'
      }))
    }, {
      size: 'fill',
      value: _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-question"
      }), ' Not Blacklisted (', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
        ref: ref => this.notBlacklistedCount = ref
      }, "0"), ') ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-question-circle",
        title: "Users that have not blacklisted you, but there is not enough information to know if they have whitelisted you"
      }))
    }, {
      size: 'fill',
      value: _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-question"
      }), ' Unknown (', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
        ref: ref => this.unknownCount = ref
      }, "0"), ') ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-question-circle",
        title: WBC.B ? 'There is not enough information to know if these users have whitelisted or blacklisted you' : 'There is not enough information to know if these users have whitelisted you'
      }))
    }, {
      size: 'fill',
      value: _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-times"
      }), ' Not Found (', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
        ref: ref => this.nonexistentCount = ref
      }, "0"), ') ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-question-circle",
        title: "These users were not found (most likely they changed usernames or deleted their account)"
      }))
    }]]);
    if (!WBC.B) {
      this.table.hideColumns(2, 4);
    }
    this.table.table.style.minWidth = '1200px';
    popup.Results.appendChild(this.table.table);
    WBCButton.addEventListener('click', () => {
      if (WBCButton.getAttribute('data-mm')) {
        if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSelected')) {
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSingle') && checkSingleSwitch) {
            let element = createElements(checkSingleSwitch.container, 'afterbegin', [{
              attributes: {
                class: 'esgst-bold esgst-red'
              },
              text: 'Disable this -->',
              type: 'span'
            }]);
            window.setTimeout(() => element.remove(), 5000);
          } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkAll')) {
            let element = createElements(checkAllSwitch.container, 'afterbegin', [{
              attributes: {
                class: 'esgst-bold esgst-red'
              },
              text: 'Disable this -->',
              type: 'span'
            }]);
            window.setTimeout(() => element.remove(), 5000);
          } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkPages')) {
            let element = createElements(checkPagesSwitch.container, 'afterbegin', [{
              attributes: {
                class: 'esgst-bold esgst-red'
              },
              text: 'Disable this -->',
              type: 'span'
            }]);
            window.setTimeout(() => element.remove(), 5000);
          }
          let element = createElements(checkSelectedSwitch.container, 'afterbegin', [{
            attributes: {
              class: 'esgst-bold esgst-red'
            },
            text: 'Enable this -->',
            type: 'span'
          }]);
          window.setTimeout(() => element.remove(), 5000);
        }
        WBCButton.removeAttribute('data-mm');
      }
      WBC.popup = popup;
      popup.open(() => {
        if (WBC.Update) {
          WBC.ShowResults = true;
          // noinspection JSIgnoredPromiseFromCall
          this.wbc_setCheck(WBC, () => {
            WBC.progressBar.reset().hide();
          });
        }
      });
    });
  }

  /**
   * @param WBC
   * @param [Callback]
   * @returns {Promise<void>}
   */
  async wbc_setCheck(WBC, Callback) {
    let SavedUsers, I, N;
    WBC.progressBar.setLoading(null).show();
    WBC.overallProgressBar.reset().show();
    this.whitelistedCount.textContent = '0';
    this.blacklistedCount.textContent = '0';
    this.noneCount.textContent = '0';
    this.notBlacklistedCount.textContent = '0';
    this.unknownCount.textContent = '0';
    this.nonexistentCount.textContent = '0';
    this.whitelistedRow = 0;
    this.whitelistedColumn = 0;
    this.blacklistedRow = 0;
    this.blacklistedColumn = 1;
    this.noneRow = 0;
    this.noneColumn = 2;
    this.notBlacklistedRow = 0;
    this.notBlacklistedColumn = 3;
    this.unknownRow = 0;
    this.unknownColumn = 4;
    this.nonexistentRow = 0;
    this.nonexistentColumn = 5;
    this.table.clear();
    WBC.Users = [];
    WBC.Canceled = false;
    if (WBC.Update) {
      SavedUsers = JSON.parse(getValue('users'));
      for (I in SavedUsers.users) {
        if (SavedUsers.users.hasOwnProperty(I)) {
          if (SavedUsers.users[I].wbc && SavedUsers.users[I].wbc.result) {
            WBC.Users.push(SavedUsers.users[I].username);
            if (!SavedUsers.users[I].username) {
              _class_Logger__WEBPACK_IMPORTED_MODULE_8__["Logger"].info(`Log for #1084: ${I}, ${JSON.stringify(SavedUsers.users[I])}`);
            }
          }
        }
      }
      WBC.Users = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__["Utils"].sortArray(WBC.Users);
      if (WBC.ShowResults) {
        for (I = 0, N = WBC.Users.length; I < N; ++I) {
          if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__["Utils"].isSet(WBC.Users[I]) && !SavedUsers.users[SavedUsers.steamIds[WBC.Users[I]]]) {
            continue;
          }
          let user = {
            steamId: SavedUsers.steamIds[WBC.Users[I]],
            id: SavedUsers.users[SavedUsers.steamIds[WBC.Users[I]]].id,
            username: WBC.Users[I]
          };
          // noinspection JSIgnoredPromiseFromCall
          await this.wbc_setResult(WBC, user, SavedUsers.users[SavedUsers.steamIds[WBC.Users[I]]].wbc, SavedUsers.users[SavedUsers.steamIds[WBC.Users[I]]].notes, SavedUsers.users[SavedUsers.steamIds[WBC.Users[I]]].whitelisted, SavedUsers.users[SavedUsers.steamIds[WBC.Users[I]]].blacklisted, false);
        }
        Callback();
      } else {
        this.skip = _components_Button__WEBPACK_IMPORTED_MODULE_17__["Button"].create({
          color: 'green',
          icons: ['fa-forward'],
          name: 'Skip User',
          onClick: () => {
            WBC.manualSkip = true;
          }
        }).insert(this.heading.nodes.outer, 'beforeend');

        // noinspection JSIgnoredPromiseFromCall
        this.wbc_checkUsers(WBC, 0, WBC.Users.length, Callback);
      }
    } else if (WBC.User && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSingle')) {
      WBC.Users.push(WBC.User.Username);
      // noinspection JSIgnoredPromiseFromCall
      this.wbc_checkUsers(WBC, 0, 1, Callback);
    } else {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkFromList')) {
        WBC.Users = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_userList');
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSelected')) {
        WBC.Users = Array.from(_class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.mmWbcUsers);
      } else if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkPages')) {
        let elements = _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.pageOuterWrap.querySelectorAll(`a[href*="/user/"]`);
        for (let element of elements) {
          let match = element.getAttribute('href').match(/\/user\/(.+)/);
          if (!match) continue;
          let username = match[1];
          if (WBC.Users.indexOf(username) > -1 || username === _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('username') || username !== element.textContent || element.closest('.markdown')) continue;
          WBC.Users.push(username);
        }
      }
      if ((_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkAll') || _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkPages')) && (WBC.User && !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSingle') || !WBC.User) && !WBC.Update && !window.location.pathname.match(/^\/(discussions|users|archive)/)) {
        WBC.lastPage = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkPages') ? `of ${_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_maxPage')}` : '';
        // noinspection JSIgnoredPromiseFromCall
        this.wbc_getUsers(WBC, _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkPages') ? _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_minPage') - 1 : 0, _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.currentPage, _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.searchUrl, () => {
          this.skip = _components_Button__WEBPACK_IMPORTED_MODULE_17__["Button"].create({
            color: 'green',
            icons: ['fa-forward'],
            name: 'Skip User',
            onClick: () => {
              WBC.manualSkip = true;
            }
          }).insert(this.heading.nodes.outer, 'beforeend');
          WBC.Users = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__["Utils"].sortArray(WBC.Users);
          if (window.location.pathname.match(/^\/users/)) {
            WBC.Users = WBC.Users.slice(0, 25);
          }
          // noinspection JSIgnoredPromiseFromCall
          this.wbc_checkUsers(WBC, 0, WBC.Users.length, Callback);
        });
      } else {
        this.skip = _components_Button__WEBPACK_IMPORTED_MODULE_17__["Button"].create({
          color: 'green',
          icons: ['fa-forward'],
          name: 'Skip User',
          onClick: () => {
            WBC.manualSkip = true;
          }
        }).insert(this.heading.nodes.outer, 'beforeend');
        WBC.Users = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_20__["Utils"].sortArray(WBC.Users);
        if (window.location.pathname.match(/^\/users/)) {
          WBC.Users = WBC.Users.slice(0, 25);
        }
        // noinspection JSIgnoredPromiseFromCall
        this.wbc_checkUsers(WBC, 0, WBC.Users.length, Callback);
      }
    }
  }
  async wbc_checkUsers(WBC, I, N, Callback) {
    let User, Result;
    if (!WBC.Canceled) {
      WBC.overallProgressBar.setMessage(`${I} of ${N} users checked`);
      if (I < N) {
        User = WBC.User && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkSingle') ? WBC.User : {
          Username: WBC.Users[I]
        };
        let user = {
          steamId: User.SteamID64,
          id: User.ID,
          username: User.Username
        };
        let notes, whitelisted, blacklisted, wbc;
        const savedUser = await getUser(null, user);
        if (savedUser) {
          notes = savedUser.notes;
          whitelisted = savedUser.whitelisted;
          blacklisted = savedUser.blacklisted;
          wbc = savedUser.wbc;
        }
        if (wbc && wbc.result) {
          Result = wbc.result;
        }
        if (WBC.manualSkip) {
          if (!wbc) {
            wbc = {};
          }
          window.setTimeout(() => this.wbc_setResult(WBC, user, wbc, notes, whitelisted, blacklisted, Result !== wbc.result, I, N, Callback), 0);
        } else if (!wbc || !_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkNew')) {
          if (!wbc) {
            wbc = {};
          }
          await this.wbc_checkUser(wbc, WBC, user);
          window.setTimeout(() => this.wbc_setResult(WBC, user, wbc, notes, whitelisted, blacklisted, Result !== wbc.result, I, N, Callback), 0);
        } else {
          window.setTimeout(() => this.wbc_setResult(WBC, user, wbc, notes, whitelisted, blacklisted, Result !== wbc.result, I, N, Callback), 0);
        }
      } else if (Callback) {
        Callback();
      }
    }
  }
  async wbc_setResult(WBC, user, wbc, notes, whitelisted, blacklisted, New, I, N, Callback) {
    let Key;
    const isSkipped = WBC.manualSkip || WBC.autoSkip;
    WBC.manualSkip = false;
    WBC.autoSkip = false;
    if (!WBC.Canceled) {
      Key = (wbc.result === 'blacklisted' || wbc.result === 'notBlacklisted') && !WBC.B ? 'unknown' : wbc.result;
      const attributes = {
        href: `/user/${user.username}`
      };
      if (New) {
        attributes.className = 'esgst-bold esgst-italic';
      }
      let items = null;
      if (isSkipped && (wbc.result === 'unknown' || wbc.result === 'notBlacklisted')) {
        items = _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", attributes, user.username), ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
          className: "fa fa-forward",
          title: "This user was skipped, so there may actually be enough information available."
        }));
      } else {
        const url = wbc.wl_ga || wbc.g_wl_ga || wbc.ga;
        items = _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", attributes, user.username), wbc.wl_ga || wbc.g_wl_ga || wbc.ga ? _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
          href: `/giveaway/${url.includes('/') ? url : `${url}/`}`,
          target: "_blank"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
          className: "fa fa-external-link",
          title: "Confirm"
        }))) : null);
      }
      this[`${Key}Count`].textContent = parseInt(this[`${Key}Count`].textContent) + 1;
      const cell = this.table.addCell(this[`${Key}Row`], this[`${Key}Column`], {
        size: 'fill',
        value: items
      });
      await _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].common.endless_load(cell);
      this[`${Key}Row`] += 1;
      if (!WBC.ShowResults) {
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_returnWhitelists') && wbc.result === 'whitelisted' && !whitelisted || WBC.B && _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_returnBlacklists') && wbc.result === 'blacklisted' && !blacklisted) {
          if (user.id) {
            // noinspection JSIgnoredPromiseFromCall
            this.wbc_returnWlBl(WBC, wbc, user.username, user.id, notes, async (success, notes) => {
              if (success) {
                user.values = {
                  wbc: wbc,
                  whitelisted: false,
                  blacklisted: false
                };
                if (notes) {
                  user.values.notes = notes;
                }
                user.values[wbc.result] = true;
                user.values[`${wbc.result}Date`] = Date.now();
              }
              await saveUser(null, null, user);
              window.setTimeout(() => this.wbc_checkUsers(WBC, ++I, N, Callback), 0);
            });
          } else {
            await getUserId(user);
            // noinspection JSIgnoredPromiseFromCall
            this.wbc_returnWlBl(WBC, wbc, user.username, user.id, notes, async (success, notes) => {
              if (success) {
                user.values = {
                  wbc: wbc,
                  whitelisted: false,
                  blacklisted: false
                };
                if (notes) {
                  user.values.notes = notes;
                }
                user.values[wbc.result] = true;
                user.values[`${wbc.result}Date`] = Date.now();
              }
              await saveUser(null, null, user);
              window.setTimeout(() => this.wbc_checkUsers(WBC, ++I, N, Callback), 0);
            });
          }
        } else if (wbc.result === 'whitelisted' || wbc.result === 'blacklisted' || whitelisted || blacklisted) {
          user.values = {
            wbc: wbc
          };
          await saveUser(null, null, user);
          window.setTimeout(() => this.wbc_checkUsers(WBC, ++I, N, Callback), 0);
        } else if (New) {
          user.values = {
            wbc: null
          };
          await saveUser(null, null, user);
          window.setTimeout(() => this.wbc_checkUsers(WBC, ++I, N, Callback), 0);
        } else {
          window.setTimeout(() => this.wbc_checkUsers(WBC, ++I, N, Callback), 0);
        }
      }
    }
  }
  async wbc_returnWlBl(WBC, wbc, username, id, notes, Callback) {
    let Key, Type;
    if (!WBC.Canceled) {
      Key = wbc.result;
      Type = Key.match(/(.+)ed/)[1];
      WBC.progressBar.setMessage(`Returning ${Type} for ${username}...`);
      if (window.location.pathname.match(new RegExp(`^/user/${username}`))) {
        document.getElementsByClassName(`sidebar__shortcut__${Type}`)[0].click();
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_n')) {
          let msg = `Returned ${Type}.`;
          if (notes) {
            notes = `${msg}\n\n${notes}`;
          } else {
            notes = msg;
          }
        }
        Callback(true, notes);
      } else {
        var _await$FetchRequest$p;
        let success = false;
        if (((_await$FetchRequest$p = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].post('/ajax.php', {
          data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_12__["Session"].xsrfToken}&do=${Type}&child_user_id=${id}&action=insert`,
          queue: true
        })).json) === null || _await$FetchRequest$p === void 0 ? void 0 : _await$FetchRequest$p.type) === 'success') {
          success = true;
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_n')) {
            let msg = `${Key} in return.`;
            if (notes) {
              notes = `${msg}\n\n${notes}`;
            } else {
              notes = msg;
            }
          }
        }
        Callback(success, notes);
      }
    }
  }
  async wbc_checkUser(data, obj, user) {
    if (obj.Canceled || obj.manualSkip) {
      return;
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_clearCache')) {
      for (const key in data) {
        if (data.hasOwnProperty(key)) {
          delete data[key];
        }
      }
    }
    if (!data.lastCheck) {
      data.lastCheck = 0;
    }
    if (!data.timestamp) {
      data.timestamp = 0;
    }
    if (data.giveaway) {
      const match = data.giveaway.match(/\/giveaway\/(.+?)\//);
      if (match) {
        delete data.giveaway;
        data.ga = match[1];
      }
    }
    if (data.whitelistGiveaway) {
      const match = data.whitelistGiveaway.match(/\/giveaway\/(.+?)\//);
      if (match) {
        delete data.whitelistGiveaway;
        data.wl_ga = match[1];
      }
    }
    if (data.groupGiveaways) {
      for (const key in data.groupGiveaways) {
        const match = key.match(/^(.+?)\//);
        if (match) {
          if (!data.g_wl_gas) {
            data.g_wl_gas = {};
          }
          data.g_wl_gas[match[1]] = data.groupGiveaways[key];
          delete data.groupGiveaways[key];
        }
      }
      if (Object.keys(data.groupGiveaways).length === 0) {
        delete data.groupGiveaways;
      }
    }
    if (Date.now() - data.lastCheck <= 86400000 && !obj.Update) {
      return;
    }
    if ((!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkBlacklist') || !obj.B) && (data.wl_ga || data.g_wl_ga) || _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkBlacklist') && obj.B && data.ga) {
      obj.Timestamp = data.timestamp;
      await this.wbc_checkGiveaway(data, obj, user, true);
    } else {
      obj.Timestamp = 0;
      await this.wbc_getGiveaways(data, obj, user);
    }
  }
  async wbc_checkGiveaway(data, obj, user, cached) {
    if (obj.Canceled) {
      return;
    }
    const url = data.wl_ga || data.g_wl_ga || data.ga;
    let responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].get(`/giveaway/${url.includes('/') ? url : `${url}/`}`, {
      queue: true
    })).html;
    let errorMessage = responseHtml.getElementsByClassName('table--summary')[0];
    let stop;
    if (errorMessage) {
      errorMessage = errorMessage.textContent;
      if (errorMessage.match(/blacklisted the giveaway creator/)) {
        data.result = 'notBlacklisted';
        stop = true;
      } else if (errorMessage.match(/blacklisted by the giveaway creator/)) {
        data.result = 'blacklisted';
      } else if (errorMessage.match(/not a member of the giveaway creator's whitelist/)) {
        data.result = 'none';
      } else {
        data.result = 'notBlacklisted';
      }
      data.lastCheck = Date.now();
      data.timestamp = obj.Timestamp;
    } else if (data.wl_ga) {
      data.result = 'whitelisted';
      data.lastCheck = Date.now();
      data.timestamp = obj.Timestamp;
    } else if (data.g_wl_ga) {
      let found, groups, i, j, n;
      found = false;
      groups = JSON.parse(getValue('groups', '[]'));
      for (i = 0, n = data.g_wl_gas[data.g_wl_ga].length; i < n && !found; ++i) {
        for (j = groups.length - 1; j > -1 && groups[j].code !== data.g_wl_gas[data.g_wl_ga][i]; --j) {}
        if (j > -1 && groups[j].member) {
          found = true;
        }
      }
      if (found) {
        if (cached) {
          data.result = 'notBlacklisted';
          data.lastCheck = Date.now();
          data.timestamp = obj.Timestamp;
        } else {
          obj.Timestamp = 0;
          obj.GroupGiveaways = [];
          await this.wbc_getGiveaways(data, obj, user);
        }
      } else {
        data.result = 'whitelisted';
        data.lastCheck = Date.now();
        data.timestamp = obj.Timestamp;
      }
    } else {
      data.result = 'notBlacklisted';
      data.lastCheck = Date.now();
      data.timestamp = obj.Timestamp;
    }
    return stop;
  }
  async wbc_getGiveaways(data, obj, user) {
    if (obj.Canceled) {
      return;
    }
    let isStopped = false;
    let hasCheckedGa = false;
    let response = null;
    let giveaways = [];
    let nextPage = 1;
    const url = `/user/${user.username}?format=json&page=`;
    do {
      response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].get(`${url}${nextPage}`, {
        queue: true
      });
      if (response.url.includes('/user/') && response.json.success) {
        giveaways = response.json.results;
        user.steamId = response.json.user.steam_id;
        user.id = response.json.user.id;
      } else {
        isStopped = true;
        break;
      }
      obj.progressBar.setMessage(`Retrieving ${user.username}'s giveaways (page ${nextPage})...`);
      const groupGiveaways = [];
      const now = Date.now();
      for (const giveaway of giveaways) {
        if (!giveaway.link) {
          continue;
        }
        if (obj.Timestamp === 0) {
          const timestamp = giveaway.end_timestamp * 1e3;
          if (timestamp < now) {
            obj.Timestamp = timestamp;
          }
        }
        const url = giveaway.link.split('/giveaway/')[1];
        if (!data.ga) {
          data.ga = url;
        }
        if (giveaway.whitelist) {
          if (giveaway.group) {
            groupGiveaways.push(url);
          } else {
            data.wl_ga = url;
          }
        }
      }
      let doStop = false;
      if (data.ga && !hasCheckedGa) {
        hasCheckedGa = true;
        doStop = await this.wbc_checkGiveaway(data, obj, user);
        if (data.result !== 'notBlacklisted' || doStop || _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkBlacklist') && obj.B) {
          break;
        }
      }
      doStop = false;
      if (data.wl_ga) {
        await this.wbc_checkGiveaway(data, obj, user);
        doStop = true;
        break;
      }
      if (data.g_wl_gas && Object.keys(data.g_wl_gas).length || groupGiveaways.length) {
        if (groupGiveaways.length) {
          const result = await this.wbc_getGroupGiveaways(data, groupGiveaways, obj, user);
          if (result) {
            break;
          }
        }
        const groups = JSON.parse(getValue('groups', '[]'));
        let found = false;
        for (const code in data.g_wl_gas) {
          if (data.g_wl_gas.hasOwnProperty(code)) {
            found = false;
            const groupCodes = data.g_wl_gas[code];
            const n = groupCodes.length;
            for (let i = 0; i < n && !found; i++) {
              found = groups.filter(item => item.code === groupCodes[i] && item.member)[0];
            }
            if (!found) {
              data.g_wl_ga = code;
              break;
            }
          }
        }
        if (!found) {
          data.result = 'whitelisted';
          break;
        }
      }
      nextPage += 1;
      obj.autoSkip = _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_skipUsers') && nextPage > _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_pages');
    } while (!obj.Canceled && !obj.manualSkip && !obj.autoSkip && (obj.Timestamp >= data.timestamp || obj.Timestamp === 0) && giveaways.length === response.json.per_page);
    if (isStopped || !data.ga && !data.wl_ga && !data.g_wl_ga) {
      data.lastCheck = Date.now();
      data.result = isStopped ? 'nonexistent' : 'unknown';
      data.timestamp = obj.Timestamp;
    }
  }
  async wbc_getGroupGiveaways(data, groupGiveaways, obj, user) {
    const n = groupGiveaways.length;
    for (let i = 0; i < n; i++) {
      const groupGiveaway = groupGiveaways[i];
      obj.progressBar.setMessage(`Retrieving ${user.username}'s group giveaways (${i + 1} of ${n})...`);
      if (data.groupGiveaways && data.groupGiveaways[groupGiveaway]) {
        continue;
      }
      const result = await this.wbc_getGroups(data, groupGiveaway, obj);
      if (result) {
        return result;
      }
      if (obj.Canceled) {
        break;
      }
    }
    return false;
  }
  async wbc_getGroups(data, groupGiveaway, obj) {
    let nextPage = 1;
    let url = `/giveaway/${groupGiveaway.includes('/') ? groupGiveaway : `${groupGiveaway}/_`}/groups/search?page=`;
    do {
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].get(`${url}${nextPage}`, {
        queue: true
      });
      const context = response.html;
      const groups = context.getElementsByClassName('table__column__heading');
      const n = groups.length;
      if (n < 1) {
        data.result = 'none';
        return true;
      }
      if (!data.g_wl_gas) {
        data.g_wl_gas = {};
      }
      if (!data.g_wl_gas[groupGiveaway]) {
        data.g_wl_gas[groupGiveaway] = [];
      }
      for (let i = 0; i < n; i++) {
        const group = groups[i].getAttribute('href').match(/\/group\/(.+?)\//)[1];
        if (data.g_wl_gas[groupGiveaway].indexOf(group) < 0) {
          data.g_wl_gas[groupGiveaway].push(group);
        }
      }
      const pagination = context.getElementsByClassName('pagination__navigation')[0];
      if (pagination && !pagination.lastElementChild.classList.contains('is-selected')) {
        url = `${response.url}/search?page=`;
      } else {
        return false;
      }
    } while (!obj.Canceled);
    return false;
  }
  async wbc_getUsers(WBC, NextPage, CurrentPage, URL, Callback, Context) {
    let Matches, I, N, Match, Username, Pagination;
    if (WBC.Canceled) return;
    if (Context) {
      if (!WBC.lastPage) {
        WBC.lastPage = _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.modules.generalLastPageLink.lpl_getLastPage(Context, true);
        WBC.lastPage = WBC.lastPage === 999999999 ? '' : ` of ${WBC.lastPage}`;
      }
      WBC.progressBar.setMessage(`Retrieving users (page ${NextPage}${WBC.lastPage})...`);
      Matches = Context.querySelectorAll(`a[href*="/user/"]`);
      for (I = 0, N = Matches.length; I < N; ++I) {
        Match = Matches[I].getAttribute('href').match(/\/user\/(.+)/);
        if (Match) {
          Username = Match[1];
          if (WBC.Users.indexOf(Username) < 0 && Username !== WBC.Username && Username === Matches[I].textContent && !Matches[I].closest('.markdown')) {
            WBC.Users.push(Username);
          }
        }
      }
      Pagination = Context.getElementsByClassName('pagination__navigation')[0];
      if (Pagination && !Pagination.lastElementChild.classList.contains('is-selected')) {
        window.setTimeout(() => this.wbc_getUsers(WBC, NextPage, CurrentPage, URL, Callback), 0);
      } else {
        Callback();
      }
    } else if (!WBC.Canceled) {
      NextPage += 1;
      if (!_class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_checkPages') || NextPage <= _class_Settings__WEBPACK_IMPORTED_MODULE_13__["Settings"].get('wbc_maxPage')) {
        if (CurrentPage !== NextPage) {
          window.setTimeout(async () => this.wbc_getUsers(WBC, NextPage, CurrentPage, URL, Callback, (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_7__["FetchRequest"].get(`${URL}${NextPage}`, {
            queue: true
          })).html), 0);
        } else {
          window.setTimeout(() => this.wbc_getUsers(WBC, NextPage, CurrentPage, URL, Callback, _class_Shared__WEBPACK_IMPORTED_MODULE_14__["Shared"].esgst.pageOuterWrap), 0);
        }
      } else {
        Callback();
      }
    }
  }
}
const usersWhitelistBlacklistChecker = new UsersWhitelistBlacklistChecker();


/***/ }),
/* 366 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersWhitelistBlacklistHighlighter", function() { return usersWhitelistBlacklistHighlighter; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






const createElements = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]),
  getTimestamp = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].getTimestamp.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]);
class UsersWhitelistBlacklistHighlighter extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds an icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-heart esgst-whitelist"
      }), " if the user is whitelisted and ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-ban esgst-blacklist"
      }), " if they are blacklisted) next to the a user's username (in any page) to indicate that they are on your whitelist/blacklist."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "If you hover over the icon, it shows the date when you added the user to your whitelist/blacklist.")),
      features: {
        wbh_b: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a background color of your own preference to the user's username if they are blacklisted, instead of an icon."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "If you hover over the username, it shows the date when you added the user to your whitelist/blacklist.")),
          name: 'Use background colors for blacklisted users instead of icons.',
          sg: true,
          st: true
        },
        wbh_w: {
          colors: true,
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a background color of your own preference to the user's username if they are whitelisted, instead of an icon."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "If you hover over the username, it shows the date when you added the user to your whitelist/blacklist.")),
          name: 'Use background colors for whitelisted users instead of icons.',
          sg: true,
          st: true
        }
      },
      id: 'wbh',
      name: 'Whitelist/Blacklist Highlighter',
      sg: {
        include: [{
          enabled: 1,
          pattern: '.*'
        }],
        exclude: [{
          enabled: 1,
          pattern: '^/account/manage/whitelist'
        }, {
          enabled: 1,
          pattern: '^/account/manage/blacklist'
        }]
      },
      st: true,
      sync: `Blacklist, Whitelist`,
      syncKeys: ['Blacklist', 'Whitelist'],
      type: 'users',
      featureMap: {
        user: this.wbh_getUsers.bind(this)
      }
    };
  }
  wbh_getUsers(users) {
    for (const user of users) {
      if (user.saved && (user.saved.whitelisted || user.saved.blacklisted) && !user.context.parentElement.querySelector(`.esgst-wbh-highlight, .esgst-wbh-icon`)) {
        let [icon, status] = user.saved.whitelisted ? ['fa-heart sidebar__shortcut__whitelist', 'whitelisted'] : ['fa-ban sidebar__shortcut__blacklist', 'blacklisted'];
        let title = `You ${status} ${user.username} on ${getTimestamp(user.saved[`${status}Date`])}`;
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('wbh_w') && user.saved.whitelisted || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('wbh_b') && user.saved.blacklisted) {
          user.element.classList.add('esgst-wbh-highlight', `esgst-wbh-highlight-${status}`);
          user.element.title = getFeatureTooltip('wbh', title);
        } else {
          createElements(user.context, 'beforebegin', [{
            attributes: {
              class: 'esgst-wbh-icon esgst-user-icon',
              title: getFeatureTooltip('wbh', title)
            },
            type: 'span',
            children: [{
              attributes: {
                class: `fa ${icon} esgst-${status.slice(0, -2)}`
              },
              type: 'i'
            }]
          }]);
        }
      }
    }
  }
}
const usersWhitelistBlacklistHighlighter = new UsersWhitelistBlacklistHighlighter();


/***/ }),
/* 367 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersWhitelistBlacklistSorter", function() { return usersWhitelistBlacklistSorter; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(208);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(209);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(211);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(213);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(132);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(144);











const createElements = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  endless_load = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  getTimestamp = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].getTimestamp.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]);
class UsersWhitelistBlacklistSorter extends _class_Module__WEBPACK_IMPORTED_MODULE_5__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds 2 buttons (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-sort-amount-asc"
      }), " to sort in ascending order and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-sort-amount-desc"
      }), " to sort in descending order) to the main page heading of your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/manage/whitelist"
      }, "whitelist"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/manage/blacklist"
      }, "blacklist"), " pages that allow you to view all of the users in your whitelist/blacklist at once sorted by added date.")),
      id: 'wbs',
      name: 'Whitelist/Blacklist Sorter',
      sg: true,
      sync: `Blacklist, Whitelist`,
      syncKeys: ['Blacklist', 'Whitelist'],
      type: 'users'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.whitelistPath && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.blacklistPath) return;
    let [dateKey, mainKey, saveKey] = _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.whitelistPath ? ['whitelistedDate', 'whitelist', 'whitelisted'] : ['blacklistedDate', 'blacklist', 'blacklisted'];

    // add ascending button
    let object = {
      dateKey,
      icon: 'fa-sort-amount-asc',
      key: mainKey,
      saveKey,
      title: `Oldest to newest ${saveKey} users:`
    };
    createHeadingButton({
      featureId: 'wbs',
      id: 'wbsAsc',
      icons: ['fa-sort-amount-asc'],
      title: 'Sort by added date from oldest to newest'
    }).addEventListener('click', this.wbs_sort.bind(this, object));

    // add descending button
    object = {
      dateKey,
      icon: 'fa-sort-amount-desc',
      isDescending: true,
      key: mainKey,
      saveKey,
      title: `Newest to oldest ${saveKey} users:`
    };
    createHeadingButton({
      featureId: 'wbs',
      id: 'wbsDesc',
      icons: ['fa-sort-amount-desc'],
      title: 'Sort by added date from newest to oldest'
    }).addEventListener('click', this.wbs_sort.bind(this, object));
  }
  async wbs_sort(obj) {
    let savedUsers = JSON.parse(getValue('users')).users;
    let users = [];
    for (let steamId in savedUsers) {
      if (savedUsers.hasOwnProperty(steamId)) {
        let savedUser = savedUsers[steamId];
        if (!savedUser[obj.saveKey]) continue;
        savedUser.steamId = steamId;
        users.push(savedUser);
      }
    }
    users = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_9__["Utils"].sortArray(users, obj.isDescending, obj.dateKey);
    let popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_6__["Popup"]({
      addScrollable: true,
      icon: obj.icon,
      isTemp: true,
      title: obj.title
    });
    popup.popup.classList.add('esgst-wbs-popup');
    let table = createElements(popup.scrollable, 'beforeend', [{
      attributes: {
        class: 'esgst-text-left table'
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'table__heading'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'table__column--width-fill'
          },
          text: 'User',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small text-center'
          },
          text: 'Added',
          type: 'div'
        }, {
          attributes: {
            class: 'table__column--width-small text-center'
          },
          text: 'Remove',
          type: 'div'
        }]
      }, {
        attributes: {
          class: 'table__rows'
        },
        type: 'div'
      }]
    }]);
    let rows = table.lastElementChild;
    users.forEach(user => {
      let row = createElements(rows, 'beforeend', [{
        attributes: {
          class: 'table__row-outer-wrap'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'table__row-inner-wrap'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'table__column--width-fill'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'table__column__heading',
                href: `/user/${user.username}`
              },
              text: user.username,
              type: 'a'
            }]
          }, {
            attributes: {
              class: 'table__column--width-small text-center'
            },
            text: getTimestamp(user[obj.dateKey]),
            type: 'div'
          }, {
            attributes: {
              class: 'table__column--width-small text-center'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'table__remove-default esgst-clickable'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'icon-red fa fa-times-circle'
                },
                type: 'i'
              }, {
                attributes: {
                  class: 'table__column__secondary-link'
                },
                text: 'Remove',
                type: 'span'
              }]
            }, {
              attributes: {
                class: 'table__remove-loading esgst-hidden'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'fa fa-refresh fa-spin'
                },
                type: 'i'
              }, {
                text: ' Removing',
                type: 'node'
              }]
            }, {
              attributes: {
                class: 'table__remove-complete esgst-hidden'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'fa fa-times-circle'
                },
                type: 'i'
              }, {
                text: ' Removed',
                type: 'node'
              }]
            }]
          }]
        }]
      }]);
      let object = {
        dateKey: obj.dateKey,
        key: obj.key,
        saveKey: obj.saveKey,
        user
      };
      object.removeButton = row.firstElementChild.lastElementChild.firstElementChild;
      object.removingButton = object.removeButton.nextElementSibling;
      object.removedButton = object.removingButton.nextElementSibling;
      object.removeButton.addEventListener('click', this.wbs_removeMember.bind(this, object));
    });
    popup.open();
    endless_load(table);
  }
  async wbs_removeMember(obj) {
    obj.removeButton.classList.add('esgst-hidden');
    obj.removingButton.classList.remove('esgst-hidden');
    await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__["FetchRequest"].post('/ajax.php', {
      data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].xsrfToken}&do=${obj.key}&action=delete&child_user_id=${obj.user.id}`
    });
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_4__["Lock"]('user', {
      threshold: 300
    });
    await lock.lock();
    let savedUsers = JSON.parse(getValue('users'));
    delete savedUsers.users[obj.user.steamId][obj.dateKey];
    delete savedUsers.users[obj.user.steamId][obj.saveKey];
    await setValue('users', JSON.stringify(savedUsers));
    await lock.unlock();
    obj.removingButton.classList.add('esgst-hidden');
    obj.removedButton.classList.remove('esgst-hidden');
  }
}
const usersWhitelistBlacklistSorter = new UsersWhitelistBlacklistSorter();


/***/ }),
/* 368 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersWhitelistBlacklistManager", function() { return usersWhitelistBlacklistManager; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(211);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(132);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(212);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(144);













const createConfirmation = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].createConfirmation.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]),
  createElements = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]),
  createFadeMessage = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].createFadeMessage.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]),
  downloadFile = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].downloadFile.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]),
  formatTags = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].formatTags.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]),
  setSetting = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].setSetting.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]);
class UsersWhitelistBlacklistManager extends _class_Module__WEBPACK_IMPORTED_MODULE_5__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-arrow-up"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-arrow-down"
      }), ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-trash"
      }), ") to the main page heading of your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/manage/whitelist"
      }, "whitelist"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/manage/blacklist"
      }, "blacklist"), " pages that allows you to import/export/clear your whitelist/blacklist.")),
      id: 'wbm',
      name: 'Whitelist/Blacklist Manager',
      sg: true,
      type: 'users'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.whitelistPath && !_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.blacklistPath) return;
    let wbm = {};
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.whitelistPath) {
      wbm.key = 'whitelist';
      wbm.name = 'Whitelist';
    } else {
      wbm.key = 'blacklist';
      wbm.name = 'Blacklist';
    }
    wbm.button = createHeadingButton({
      id: 'wbm',
      icons: ['fa-arrow-up', 'fa-arrow-down', 'fa-trash'],
      title: `Manage ${wbm.key}`
    });
    wbm.button.addEventListener('click', this.wbm_openPopup.bind(this, wbm));
  }
  wbm_openPopup(wbm) {
    if (!wbm.popup) {
      wbm.popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_6__["Popup"]({
        addScrollable: true,
        icon: 'fa-gear',
        title: `Manage ${wbm.name}:`
      });
      const useCacheSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_10__["ToggleSwitch"](wbm.popup.description, 'wbm_useCache', false, 'Use cache.', false, false, `Uses the cache created the last time you synced your whitelist/blacklist. This speeds up the process, but could lead to incomplete results if your cache isn't up-to-date.`, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_useCache'));
      const exportSteamIdsSwitch = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_10__["ToggleSwitch"](wbm.popup.description, 'wbm_exportSteamIds', false, 'Export Steam IDs.', false, false, `When exporting the whitelist/blacklist, the Steam IDs of the users will be exported instead of their SteamGifts IDs. This is useful, for example, for blocking / unblocking the users on Steam with the Steam IDs.`, _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_exportSteamIds'));
      useCacheSwitch.dependencies.push(exportSteamIdsSwitch.container);
      if (!_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_useCache')) {
        exportSteamIdsSwitch.container.classList.add('esgst-hidden');
      }
      new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_10__["ToggleSwitch"](wbm.popup.description, 'wbm_clearTags', false, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, "Only clear users who are tagged with these specific tags (separate with comma):", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
        className: "esgst-switch-input esgst-switch-input-large",
        type: "text",
        value: _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_tags').join(`, `)
      })), false, false, 'Uses the User Tags database to remove only users with the specified tags.', _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_clearTags')).name.firstElementChild.addEventListener('change', event => {
        const element = event.currentTarget;
        let tags = element.value.replace(/(,\s*)+/g, formatTags).split(`, `);
        setSetting('wbm_tags', tags);
      });
      wbm.input = createElements(wbm.popup.description, 'beforeend', [{
        attributes: {
          type: 'file'
        },
        type: 'input'
      }]);
      wbm.message = createElements(wbm.popup.description, 'beforeend', [{
        attributes: {
          class: 'esgst-description'
        },
        type: 'div'
      }]);
      wbm.warning = createElements(wbm.popup.description, 'beforeend', [{
        attributes: {
          class: 'esgst-description esgst-warning'
        },
        type: 'div'
      }]);
      _components_Button__WEBPACK_IMPORTED_MODULE_11__["Button"].create([{
        color: 'green',
        icons: ['fa-arrow-up'],
        name: 'Import',
        onClick: () => {
          return new Promise(resolve => this.wbm_start(wbm, this.wbm_importList.bind(this, wbm), resolve));
        }
      }, {
        template: 'error',
        name: 'Cancel',
        switchTo: {
          onReturn: 0
        },
        onClick: this.wbm_cancel.bind(this, wbm)
      }]).insert(wbm.popup.description, 'beforeend');
      _components_Button__WEBPACK_IMPORTED_MODULE_11__["Button"].create([{
        color: 'green',
        icons: ['fa-arrow-down'],
        name: 'Export',
        onClick: () => {
          return new Promise(resolve => this.wbm_start(wbm, this.wbm_exportList.bind(this, wbm, [], 1), resolve));
        }
      }, {
        template: 'error',
        name: 'Cancel',
        switchTo: {
          onReturn: 0
        },
        onClick: this.wbm_cancel.bind(this, wbm)
      }]).insert(wbm.popup.description, 'beforeend');
      _components_Button__WEBPACK_IMPORTED_MODULE_11__["Button"].create([{
        color: 'green',
        icons: ['fa-trash'],
        name: 'Clear',
        onClick: () => {
          return new Promise(resolve => this.wbm_start(wbm, this.wbm_clearList.bind(this, wbm, [], 1), resolve));
        }
      }, {
        template: 'error',
        name: 'Cancel',
        switchTo: {
          onReturn: 0
        },
        onClick: this.wbm_cancel.bind(this, wbm)
      }]).insert(wbm.popup.description, 'beforeend');
      wbm.results = createElements(wbm.popup.scrollable, 'beforeend', [{
        type: 'div'
      }]);
    }
    wbm.popup.open();
  }
  wbm_start(wbm, callback, mainCallback) {
    createConfirmation('Are you sure you want to do this?', () => {
      wbm.isCanceled = false;
      wbm.button.classList.add('esgst-busy');
      wbm.usernames = [];
      wbm.results.innerHTML = '';
      callback(this.wbm_complete.bind(this, wbm, mainCallback));
    }, mainCallback);
  }
  wbm_complete(wbm, callback) {
    wbm.button.classList.remove('esgst-busy');
    callback();
  }
  wbm_cancel(wbm) {
    wbm.isCanceled = true;
    wbm.button.classList.remove('esgst-busy');
  }
  wbm_importList(wbm, callback) {
    let file = wbm.input.files[0];
    if (file) {
      let reader = new FileReader();
      reader.onload = () => {
        try {
          // @ts-ignore
          let list = JSON.parse(reader.result);
          // noinspection JSIgnoredPromiseFromCall
          this.wbm_insertUsers(wbm, list, 0, list.length, callback);
        } catch (error) {
          createFadeMessage(wbm.warning, 'Cannot parse file!');
          callback();
        }
      };
      reader.readAsText(file);
    } else {
      createFadeMessage(wbm.warning, 'No file was loaded!');
      callback();
    }
  }
  async wbm_insertUsers(wbm, list, i, n, callback) {
    if (wbm.isCanceled) return;
    createElements(wbm.message, 'atinner', [{
      attributes: {
        class: 'fa fa-circle-o-notch fa-spin'
      },
      type: 'i'
    }, {
      text: `Importing list (${i} of ${n})...`,
      type: 'span'
    }]);
    if (i < n) {
      await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].post('/ajax.php', {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].xsrfToken}&do=${wbm.key}&action=insert&child_user_id=${list[i]}`
      });
      window.setTimeout(() => this.wbm_insertUsers(wbm, list, ++i, n, callback), 0);
    } else {
      createFadeMessage(wbm.message, 'List imported with success!');
      callback();
    }
  }
  async wbm_exportList(wbm, list, nextPage, callback) {
    if (wbm.isCanceled) return;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_useCache')) {
      const exportSteamIds = _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_exportSteamIds');
      for (const steamId in _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.users.users) {
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.users.users.hasOwnProperty(steamId)) {
          if (_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.users.users[steamId][`${wbm.key}ed`]) {
            list.push(exportSteamIds ? steamId : _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.users.users[steamId].id);
          }
        }
      }
      downloadFile(JSON.stringify(list), `esgst_${wbm.key}_${new Date().toISOString()}.json`);
      createFadeMessage(wbm.message, 'List exported with success!');
      callback();
    } else {
      createElements(wbm.message, 'atinner', [{
        attributes: {
          class: 'fa fa-circle-o-notch fa-spin'
        },
        type: 'i'
      }, {
        text: `Retrieving list (page ${nextPage})...`,
        type: 'span'
      }]);
      let elements, i, n, pagination, responseHtml;
      responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].get(`https://www.steamgifts.com/account/manage/${wbm.key}/search?page=${nextPage}`)).html;
      elements = responseHtml.querySelectorAll(`[name="child_user_id"]`);
      for (i = 0, n = elements.length; i < n; ++i) {
        list.push(elements[i].value);
      }
      pagination = responseHtml.getElementsByClassName('pagination__navigation')[0];
      if (pagination && !pagination.lastElementChild.classList.contains('is-selected')) {
        window.setTimeout(() => this.wbm_exportList(wbm, list, ++nextPage, callback), 0);
      } else {
        downloadFile(JSON.stringify(list), `esgst_${wbm.key}_${new Date().toISOString()}.json`);
        createFadeMessage(wbm.message, 'List exported with success!');
        callback();
      }
    }
  }
  async wbm_clearList(wbm, list, nextPage, callback) {
    if (wbm.isCanceled) return;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_useCache')) {
      let steamId;
      for (steamId in _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.users.users) {
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.users.users.hasOwnProperty(steamId)) {
          let user = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.users.users[steamId];
          if (user[`${wbm.key}ed`]) {
            if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_clearTags')) {
              if (user.tags) {
                let i;
                for (i = user.tags.length - 1; i > -1 && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_tags').indexOf(user.tags[i]) < 0; --i) {}
                if (i > -1) {
                  list.push(user.id);
                  wbm.usernames.push(user.username);
                }
              }
            } else {
              list.push(user.id);
            }
          }
        }
      }
      // noinspection JSIgnoredPromiseFromCall
      this.wbm_deleteUsers(wbm, list, 0, list.length, callback);
    } else {
      createElements(wbm.message, 'atinner', [{
        attributes: {
          class: 'fa fa-circle-o-notch fa-spin'
        },
        type: 'i'
      }, {
        text: `Retrieving list (page ${nextPage})...`,
        type: 'span'
      }]);
      let element, elements, i, n, pagination, responseHtml;
      responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].get(`https://www.steamgifts.com/account/manage/${wbm.key}/search?page=${nextPage}`)).html;
      elements = responseHtml.querySelectorAll(`[name="child_user_id"]`);
      for (i = 0, n = elements.length; i < n; ++i) {
        element = elements[i];
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_clearTags')) {
          let steamId, username;
          username = element.closest('.table__row-inner-wrap').getElementsByClassName('table__column__heading')[0].textContent;
          steamId = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.users.steamIds[username];
          if (steamId) {
            let user = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.users.users[steamId];
            if (user.tags) {
              let j;
              for (j = user.tags.length - 1; j > -1 && _class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('wbm_tags').indexOf(user.tags[j]) < 0; --j) {}
              if (j > -1) {
                list.push(element.value);
                wbm.usernames.push(username);
              }
            }
          }
        } else {
          list.push(element.value);
        }
      }
      pagination = responseHtml.getElementsByClassName('pagination__navigation')[0];
      if (pagination && !pagination.lastElementChild.classList.contains('is-selected')) {
        window.setTimeout(() => this.wbm_clearList(wbm, list, ++nextPage, callback), 0);
      } else {
        // noinspection JSIgnoredPromiseFromCall
        this.wbm_deleteUsers(wbm, list, 0, list.length, callback);
      }
    }
  }
  async wbm_deleteUsers(wbm, list, i, n, callback) {
    if (wbm.isCanceled) return;
    createElements(wbm.message, 'atinner', [{
      attributes: {
        class: 'fa fa-circle-o-notch fa-spin'
      },
      type: 'i'
    }, {
      text: `Clearing list (${i} of ${n})...`,
      type: 'span'
    }]);
    if (i < n) {
      await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].post('/ajax.php', {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].xsrfToken}&do=${wbm.key}&action=delete&child_user_id=${list[i]}`
      });
      window.setTimeout(() => this.wbm_deleteUsers(wbm, list, ++i, n, callback), 0);
    } else {
      createFadeMessage(wbm.message, 'List cleared with success!');
      createElements(wbm.results, 'atinner', [{
        attributes: {
          class: 'esgst-bold'
        },
        text: `Users cleared (${wbm.usernames.length}):`,
        type: 'span'
      }, {
        attributes: {
          class: 'esgst-popup-actions'
        },
        type: 'span'
      }]);
      wbm.usernames.forEach(username => {
        createElements(wbm.results.lastElementChild, 'beforeend', [{
          attributes: {
            href: `/user/${username}`
          },
          text: username,
          type: 'a'
        }]);
      });
      callback();
    }
  }
}
const usersWhitelistBlacklistManager = new UsersWhitelistBlacklistManager();


/***/ }),
/* 369 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalURLRedirector", function() { return generalURLRedirector; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);


class GeneralURLRedirector extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Redirects broken URLs to the correct URLs. For example, \"/giveaway/XXXXX\" redirects to \"/giveaway/XXXXX/\".")),
      id: 'urlr',
      name: 'URL Redirector',
      sg: true,
      st: true,
      type: 'general'
    };
  }
}
const generalURLRedirector = new GeneralURLRedirector();


/***/ }),
/* 370 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersUserTags", function() { return usersUserTags; });
/* harmony import */ var _Tags__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(323);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class UsersUserTags extends _Tags__WEBPACK_IMPORTED_MODULE_0__["Tags"] {
  constructor() {
    super('ut');
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-tag"
      }), ") next a user's username (in any page) that allows you to save tags for the user (only visible to you)."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "You can press Enter to save the tags."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Each tag can be colored individually."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "There is a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-list"
      }), ") in the tags popup that allows you to view a list with all of the tags that you have used ordered from most used to least used."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-user"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-tags"
      }), ") to the page heading of this menu that allows you to manage all of the tags that have been saved."), _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "This feature is recommended for cases where you want to associate a short text with a user, since the tags are displayed next to their username.For a long text, check", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("span", {
        "data-esgst-feature-id": "un"
      }), ".")),
      features: {
        ut_s: {
          name: 'Show tag suggestions while typing.',
          sg: true,
          st: true
        }
      },
      id: 'ut',
      name: 'User Tags',
      sg: true,
      st: true,
      type: 'users'
    };
  }
  init() {
    _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.userFeatures.push(this.tags_addButtons.bind(this));
    // noinspection JSIgnoredPromiseFromCall
    this.tags_getTags();
  }
}
const usersUserTags = new UsersUserTags();


/***/ }),
/* 371 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersSteamFriendsIndicator", function() { return usersSteamFriendsIndicator; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






class UsersSteamFriendsIndicator extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds an icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-user"
      }), ") next to the a user's username (in any page) to indicate that they are on your Steam friends list."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "If you hover over the icon, it shows the date when you became friends.")),
      id: 'sfi',
      inputItems: [{
        id: 'sfi_icon',
        prefix: `Icon: `
      }],
      name: 'Steam Friends Indicator',
      sg: true,
      st: true,
      sync: 'Steam Friends',
      syncKeys: ['SteamFriends'],
      type: 'users',
      featureMap: {
        user: this.addIcons.bind(this)
      }
    };
  }
  addIcons(users) {
    for (const user of users) {
      if (user.saved && user.saved.steamFriend && !user.context.parentElement.querySelector('.esgst-sfi-icon')) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(user.context, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
          className: "esgst-sfi-icon esgst-user-icon",
          title: _class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].common.getFeatureTooltip('sfi', `You have been friends with ${user.username} on Steam since ${_class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].common.getTimestamp(user.saved.steamFriend * 1e3)}`)
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
          className: `fa fa-${_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('sfi_icon')}`
        })));
      }
    }
  }
}
const usersSteamFriendsIndicator = new UsersSteamFriendsIndicator();


/***/ }),
/* 372 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalAccurateTimestamp", function() { return generalAccurateTimestamp; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(168);
/* harmony import */ var date_fns_differenceInHours__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(373);
/* harmony import */ var date_fns_isSameYear__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(377);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(206);








class GeneralAccurateTimestamp extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Replaces a timestamp (in any page) with an accurate timestamp. For example, \"2 hours ago\" becomes \"Jan 1, 2017, 0:00:00 - 2 hours ago\"."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Here are some format examples:"), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Jan 1, 2017 - MMM d, yyyy"), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Jan 01, 2017 - MMM dd, yyyy"), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "01/01/2017 - dd/MM/yyyy"), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "2017/01/01 - yyyy/MM/dd"), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "6:00 - H:mm"), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "6:00 AM - h:mm a"), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "06:00 - HH:mm"), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "06:00:00 - HH:mm:ss")), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, `If you don't want the day and month to be shown when the difference is less than 24 hours, delimit them with "DM{}" in the format. For example, let's suppose that it's currently January 1, 2017, 06:00:00, and that the format is "MMM d, HH:mm:ss". Let's use the timestamp "Jan 1, 12:00:00" as an example. That's a less than 24 hours difference, so if the format was changed to "DM{MMM d, }HH:mm:ss", the timestamp would be just "12:00:00".`), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, `If you don't want the year to be shown when it's the current year, delimit it with "Y{}" in the format. For example, let's suppose that it's currently January 1, 2017, 06:00:00, and that the format is "MMM d, yyyy, HH:mm:ss". Let's use the timestamp "Jan 1, 2017, 12:00:00" as an example. That's the current year, so if the format was changed to "MMM d, Y{yyyy }HH:mm:ss", the timestamp would be just "Jan 1, 12:00:00".`), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, `If you don't want the seconds to be shown when they are equal to 0, delimit them with "S{}" in the format. For example, let's suppose that it's currently January 1, 2017, 06:30:00, and that the format is "MMM d, yyyy, HH:mm:ss". The timestamp would be "Jan 1, 2017, 06:30:00". The seconds are equal to 0, so if the format was changed to "MMM d, yyyy HH:mmS{:ss}", the timestamp would be just "Jan 1, 2017, 06:30".`), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, `And of course, you can combine the three, for example: DM{MMM d, }Y{yyyy }HH:mmS{:ss}`)),
      features: {
        at_t: {
          name: "Apply format to SteamGifts' date tooltips.",
          sg: true
        }
      },
      id: 'at',
      name: 'Accurate Timestamp',
      inputItems: [{
        id: 'at_format',
        prefix: `Timestamp format: `,
        tooltip: `For the date templates, ESGST uses date-fns v2.0.0-alpha.25, so check the accepted tokens here: https://date-fns.org/v2.0.0-alpha.25/docs/Getting-Started.`
      }],
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('at_t')) {
      const script = document.createElement('script');
      script.textContent = `
				if (document.readyState === "complete") {
					esgst_at_t();
				} else {
					$(window).on("load", function () {
						esgst_at_t();
					});
				}

				function esgst_at_t() {
					$(document).off("mouseenter", "[data-timestamp]");
					$(document).on("mouseenter", "[data-timestamp]", function() {
						var e = $(this).attr("title");
						if (void 0 === e || !1 === e) {
							$(this).attr("data-ui-tooltip", '{"rows":[{"icon" : [{"class" : "fa-clock-o", "color" : "#84cfda"}], "columns":[{"name" : "' + $(this).attr("data-esgst-timestamp") + '"}]}]}');
						}
					});
				}
			`;
      document.body.appendChild(script);
      script.remove();
    }
    this.esgst.endlessFeatures.push(this.at_getTimestamps.bind(this));
  }
  at_formatTimestamp(seconds) {
    return Object(date_fns_format__WEBPACK_IMPORTED_MODULE_3__["default"])(seconds, (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('at_format') || `MMM dd, yyyy, HH:mm:ss`).replace(/DM\{(.+?)}/, Math.abs(Object(date_fns_differenceInHours__WEBPACK_IMPORTED_MODULE_4__["default"])(Date.now(), seconds)) < 24 ? '' : `$1`).replace(/Y\{(.+?)}/, Object(date_fns_isSameYear__WEBPACK_IMPORTED_MODULE_5__["default"])(Date.now(), seconds) ? '' : `$1`).replace(/S\{(.+?)}/, new Date(seconds).getSeconds() === 0 ? '' : `$1`));
  }

  /**
   * @param context
   * @param [main]
   * @param [source]
   * @param [endless]
   */
  at_getTimestamps(context, main, source, endless) {
    let timestamps, i, n, timestamp, text, edited, seconds, accurateTimestamp;
    timestamps = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} [data-timestamp], .esgst-es-page-${endless}[data-timestamp]` : `[data-timestamp]`}`);
    for (i = 0, n = timestamps.length; i < n; ++i) {
      timestamp = timestamps[i];
      if ((this.esgst.activeDiscussions && (this.esgst.activeDiscussions.contains(timestamp) && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('adots_index') === 0 || !this.esgst.activeDiscussions.contains(timestamp)) || !this.esgst.activeDiscussions) && !timestamp.classList.contains('esgst-at')) {
        text = timestamp.textContent;
        edited = text.match(/\*/);
        seconds = parseInt(timestamp.getAttribute('data-timestamp')) * 1e3;
        accurateTimestamp = this.at_formatTimestamp(seconds);
        timestamp.setAttribute('data-esgst-timestamp', accurateTimestamp);
        if (edited) {
          text = ` (Edited ${accurateTimestamp})`;
        } else {
          text = `${accurateTimestamp} - ${text}`;
        }
        timestamp.classList.add('esgst-at');
        timestamp.textContent = text;
      }
    }
  }
}
const generalAccurateTimestamp = new GeneralAccurateTimestamp();


/***/ }),
/* 373 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return differenceInHours; });
/* harmony import */ var _constants_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(374);
/* harmony import */ var _differenceInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(375);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(172);
/* harmony import */ var _lib_roundingMethods_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(376);




/**
 * @name differenceInHours
 * @category Hour Helpers
 * @summary Get the number of hours between the given dates.
 *
 * @description
 * Get the number of hours between the given dates.
 *
 * @param {Date|Number} dateLeft - the later date
 * @param {Date|Number} dateRight - the earlier date
 * @param {Object} [options] - an object with options.
 * @param {String} [options.roundingMethod='trunc'] - a rounding method (`ceil`, `floor`, `round` or `trunc`)
 * @returns {Number} the number of hours
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // How many hours are between 2 July 2014 06:50:00 and 2 July 2014 19:00:00?
 * const result = differenceInHours(
 *   new Date(2014, 6, 2, 19, 0),
 *   new Date(2014, 6, 2, 6, 50)
 * )
 * //=> 12
 */
function differenceInHours(dateLeft, dateRight, options) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(2, arguments);
  var diff = Object(_differenceInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(dateLeft, dateRight) / _constants_index_js__WEBPACK_IMPORTED_MODULE_0__["millisecondsInHour"];
  return Object(_lib_roundingMethods_index_js__WEBPACK_IMPORTED_MODULE_3__["getRoundingMethod"])(options === null || options === void 0 ? void 0 : options.roundingMethod)(diff);
}

/***/ }),
/* 374 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "daysInWeek", function() { return daysInWeek; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "daysInYear", function() { return daysInYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "maxTime", function() { return maxTime; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "millisecondsInMinute", function() { return millisecondsInMinute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "millisecondsInHour", function() { return millisecondsInHour; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "millisecondsInSecond", function() { return millisecondsInSecond; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "minTime", function() { return minTime; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "minutesInHour", function() { return minutesInHour; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "monthsInQuarter", function() { return monthsInQuarter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "monthsInYear", function() { return monthsInYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "quartersInYear", function() { return quartersInYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "secondsInHour", function() { return secondsInHour; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "secondsInMinute", function() { return secondsInMinute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "secondsInDay", function() { return secondsInDay; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "secondsInWeek", function() { return secondsInWeek; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "secondsInYear", function() { return secondsInYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "secondsInMonth", function() { return secondsInMonth; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "secondsInQuarter", function() { return secondsInQuarter; });
/**
 * Days in 1 week.
 *
 * @name daysInWeek
 * @constant
 * @type {number}
 * @default
 */
var daysInWeek = 7;

/**
 * Days in 1 year
 * One years equals 365.2425 days according to the formula:
 *
 * > Leap year occures every 4 years, except for years that are divisable by 100 and not divisable by 400.
 * > 1 mean year = (365+1/4-1/100+1/400) days = 365.2425 days
 *
 * @name daysInYear
 * @constant
 * @type {number}
 * @default
 */
var daysInYear = 365.2425;

/**
 * Maximum allowed time.
 *
 * @name maxTime
 * @constant
 * @type {number}
 * @default
 */
var maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1000;

/**
 * Milliseconds in 1 minute
 *
 * @name millisecondsInMinute
 * @constant
 * @type {number}
 * @default
 */
var millisecondsInMinute = 60000;

/**
 * Milliseconds in 1 hour
 *
 * @name millisecondsInHour
 * @constant
 * @type {number}
 * @default
 */
var millisecondsInHour = 3600000;

/**
 * Milliseconds in 1 second
 *
 * @name millisecondsInSecond
 * @constant
 * @type {number}
 * @default
 */
var millisecondsInSecond = 1000;

/**
 * Minimum allowed time.
 *
 * @name minTime
 * @constant
 * @type {number}
 * @default
 */
var minTime = -maxTime;

/**
 * Minutes in 1 hour
 *
 * @name minutesInHour
 * @constant
 * @type {number}
 * @default
 */
var minutesInHour = 60;

/**
 * Months in 1 quarter
 *
 * @name monthsInQuarter
 * @constant
 * @type {number}
 * @default
 */
var monthsInQuarter = 3;

/**
 * Months in 1 year
 *
 * @name monthsInYear
 * @constant
 * @type {number}
 * @default
 */
var monthsInYear = 12;

/**
 * Quarters in 1 year
 *
 * @name quartersInYear
 * @constant
 * @type {number}
 * @default
 */
var quartersInYear = 4;

/**
 * Seconds in 1 hour
 *
 * @name secondsInHour
 * @constant
 * @type {number}
 * @default
 */
var secondsInHour = 3600;

/**
 * Seconds in 1 minute
 *
 * @name secondsInMinute
 * @constant
 * @type {number}
 * @default
 */
var secondsInMinute = 60;

/**
 * Seconds in 1 day
 *
 * @name secondsInDay
 * @constant
 * @type {number}
 * @default
 */
var secondsInDay = secondsInHour * 24;

/**
 * Seconds in 1 week
 *
 * @name secondsInWeek
 * @constant
 * @type {number}
 * @default
 */
var secondsInWeek = secondsInDay * 7;

/**
 * Seconds in 1 year
 *
 * @name secondsInYear
 * @constant
 * @type {number}
 * @default
 */
var secondsInYear = secondsInDay * daysInYear;

/**
 * Seconds in 1 month
 *
 * @name secondsInMonth
 * @constant
 * @type {number}
 * @default
 */
var secondsInMonth = secondsInYear / 12;

/**
 * Seconds in 1 quarter
 *
 * @name secondsInQuarter
 * @constant
 * @type {number}
 * @default
 */
var secondsInQuarter = secondsInMonth * 3;

/***/ }),
/* 375 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return differenceInMilliseconds; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);


/**
 * @name differenceInMilliseconds
 * @category Millisecond Helpers
 * @summary Get the number of milliseconds between the given dates.
 *
 * @description
 * Get the number of milliseconds between the given dates.
 *
 * @param {Date|Number} dateLeft - the later date
 * @param {Date|Number} dateRight - the earlier date
 * @returns {Number} the number of milliseconds
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // How many milliseconds are between
 * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?
 * const result = differenceInMilliseconds(
 *   new Date(2014, 6, 2, 12, 30, 21, 700),
 *   new Date(2014, 6, 2, 12, 30, 20, 600)
 * )
 * //=> 1100
 */
function differenceInMilliseconds(dateLeft, dateRight) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(2, arguments);
  return Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dateLeft).getTime() - Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dateRight).getTime();
}

/***/ }),
/* 376 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRoundingMethod", function() { return getRoundingMethod; });
var roundingMap = {
  ceil: Math.ceil,
  round: Math.round,
  floor: Math.floor,
  trunc: function trunc(value) {
    return value < 0 ? Math.ceil(value) : Math.floor(value);
  } // Math.trunc is not supported by IE
};

var defaultRoundingMethod = 'trunc';
function getRoundingMethod(method) {
  return method ? roundingMap[method] : roundingMap[defaultRoundingMethod];
}

/***/ }),
/* 377 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return isSameYear; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);


/**
 * @name isSameYear
 * @category Year Helpers
 * @summary Are the given dates in the same year?
 *
 * @description
 * Are the given dates in the same year?
 *
 * @param {Date|Number} dateLeft - the first date to check
 * @param {Date|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same year
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Are 2 September 2014 and 25 September 2014 in the same year?
 * const result = isSameYear(new Date(2014, 8, 2), new Date(2014, 8, 25))
 * //=> true
 */
function isSameYear(dirtyDateLeft, dirtyDateRight) {
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(2, arguments);
  var dateLeft = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDateLeft);
  var dateRight = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDateRight);
  return dateLeft.getFullYear() === dateRight.getFullYear();
}

/***/ }),
/* 378 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalEmbeddedVideos", function() { return generalEmbeddedVideos; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(144);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




const createElements = _Common__WEBPACK_IMPORTED_MODULE_2__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_2__["common"]);
class GeneralEmbeddedVideos extends _class_Module__WEBPACK_IMPORTED_MODULE_1__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Embeds any YouTube/Vimeo videos found in a comment (in any page) into the comment."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Videos are only embedded if their links are in the[URL](URL) format and are the only content in a line.For example, \"[https://youtu.be/ihd9dKek2gc](https://youtu.be/ihd9dKek2gc)\" gets embedded, but \"[Watch this!](https://youtu.be/ihd9dKek2gc)\" and \"Watch this: [https://youtu.be/ihd9dKek2gc](https://youtu.be/ihd9dKek2gc)\" do not.")),
      id: 'ev',
      name: 'Embedded Videos',
      sg: true,
      st: true,
      type: 'general',
      featureMap: {
        endless: this.ev_getVideos.bind(this)
      }
    };
  }
  ev_getVideos(context, main, source, endless) {
    let types, i, numTypes, type, videos, j, numVideos, video, previous, next, embedUrl, url, text, title;
    types = ['youtube.com', 'youtu.be', 'vimeo.com'];
    for (i = 0, numTypes = types.length; i < numTypes; ++i) {
      type = types[i];
      videos = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} a[href*="${type}"], .esgst-es-page-${endless}a[href*="${type}"]` : `a[href*="${type}"]`}`);
      for (j = 0, numVideos = videos.length; j < numVideos; ++j) {
        video = videos[j];
        previous = video.previousSibling;
        next = video.nextSibling;
        if ((!previous || !previous.textContent.trim()) && (!next || !next.textContent.trim())) {
          // video is the only content in the line
          url = video.getAttribute('href');
          embedUrl = this.ev_getEmbedUrl(i, url);
          if (embedUrl) {
            text = video.textContent;
            if (url !== text) {
              title = `<div>${text}</div>`;
            } else {
              title = '';
            }
            createElements(video, 'atouter', [{
              type: 'div',
              children: [{
                text: title,
                type: 'node'
              }, {
                attributes: {
                  allowfullscreen: '0',
                  frameborder: '0',
                  height: '360',
                  src: embedUrl,
                  width: '640'
                },
                type: 'iframe'
              }]
            }]);
          }
        }
      }
    }
  }
  ev_getEmbedUrl(i, url) {
    let regExps, regExp, match, baseUrls, baseUrl, code;
    regExps = [/youtube.com\/watch\?v=(.+?)(\/.*)?(&.*)?$/, /youtu.be\/(.+?)(\/.*)?$/, /vimeo.com\/(.+?)(\/.*)?$/];
    regExp = regExps[i];
    match = url.match(regExp);
    if (match) {
      baseUrls = [`https://www.youtube.com/embed/`, `https://www.youtube.com/embed/`, `https://player.vimeo.com/video/`];
      baseUrl = baseUrls[i];
      code = match[1];
      return `${baseUrl}${code}`;
    } else {
      return null;
    }
  }
}
const generalEmbeddedVideos = new GeneralEmbeddedVideos();


/***/ }),
/* 379 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalImageBorders", function() { return generalImageBorders; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);


class GeneralImageBorders extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Brings back image borders to SteamGifts.")),
      id: 'ib',
      name: 'Image Borders',
      sg: true,
      type: 'general',
      featureMap: {
        endless: this.ib_addBorders.bind(this)
      }
    };
  }
  ib_addBorders(context, main, source, endless) {
    const userElements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .giveaway_image_avatar, .esgst-es-page-${endless}.giveaway_image_avatar` : '.giveaway_image_avatar'}, ${endless ? `.esgst-es-page-${endless} .featured_giveaway_image_avatar, .esgst-es-page-${endless}.featured_giveaway_image_avatar` : '.featured_giveaway_image_avatar'}, ${endless ? `.esgst-es-page-${endless} :not(.esgst-ggl-panel) .table_image_avatar, .esgst-es-page-${endless}:not(.esgst-ggl-panel) .table_image_avatar` : `:not(.esgst-ggl-panel) .table_image_avatar`}`);
    for (let i = 0, n = userElements.length; i < n; ++i) {
      userElements[i].classList.add('esgst-ib-user');
    }
    const gameElements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .giveaway_image_thumbnail, .esgst-es-page-${endless}.giveaway_image_thumbnail` : '.giveaway_image_thumbnail'}, ${endless ? `.esgst-es-page-${endless} .giveaway_image_thumbnail_missing, .esgst-es-page-${endless}.giveaway_image_thumbnail_missing` : '.giveaway_image_thumbnail_missing'}, ${endless ? `.esgst-es-page-${endless} .table_image_thumbnail, .esgst-es-page-${endless}.table_image_thumbnail` : '.table_image_thumbnail'}, ${endless ? `.esgst-es-page-${endless} .table_image_thumbnail_missing, .esgst-es-page-${endless}.table_image_thumbnail_missing` : '.table_image_thumbnail_missing'}`);
    for (let i = 0, n = gameElements.length; i < n; ++i) {
      gameElements[i].classList.add('esgst-ib-game');
    }
  }
}
const generalImageBorders = new GeneralImageBorders();


/***/ }),
/* 380 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalVisibleAttachedImages", function() { return generalVisibleAttachedImages; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





class GeneralVisibleAttachedImages extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      conflicts: ['ail'],
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Displays all of the attached images (in any page) by default so that you do not need to click on \"View attached image\" to view them.")),
      features: {
        vai_gifv: {
          name: 'Rename .gifv images to .gif so that they are properly attached.',
          sg: true,
          st: true
        }
      },
      id: 'vai',
      name: 'Visible Attached Images',
      sg: true,
      st: true,
      type: 'general',
      featureMap: {
        endless: this.vai_getImages.bind(this)
      }
    };
  }
  vai_getImages(context, main, source, endless) {
    let buttons = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .comment__toggle-attached, .esgst-es-page-${endless}.comment__toggle-attached` : '.comment__toggle-attached'}, ${endless ? `.esgst-es-page-${endless} .view_attached, .esgst-es-page-${endless}.view_attached` : '.view_attached'}`);
    for (let i = 0, n = buttons.length; i < n; i++) {
      let button = buttons[i];
      let image = button.nextElementSibling.firstElementChild;
      let url = image.getAttribute('src');
      if (url && _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('vai_gifv')) {
        url = url.replace(/\.gifv/, '.gif');
        image.setAttribute('src', url);
      }
      image.classList.remove('is_hidden', 'is-hidden');
    }
  }
}
const generalVisibleAttachedImages = new GeneralVisibleAttachedImages();


/***/ }),
/* 381 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalAttachedImageLoader", function() { return generalAttachedImageLoader; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



class GeneralAttachedImageLoader extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      conflicts: ['vai'],
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Only loads an attached image (in any page) when you click on its \"View attached image\" button, instead of loading it on page load, which should speed up page loads.")),
      id: 'ail',
      name: 'Attached Image Loader',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('vai')) return;
    this.esgst.endlessFeatures.push(this.ail_getImages.bind(this));
  }
  ail_getImages(context, main, source, endless) {
    const buttons = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .comment__toggle-attached, .esgst-es-page-${endless}.comment__toggle-attached` : '.comment__toggle-attached'}, ${endless ? `.esgst-es-page-${endless} .view_attached, .esgst-es-page-${endless}.view_attached` : '.view_attached'}`);
    for (let i = 0, n = buttons.length; i < n; i++) {
      const button = buttons[i],
        image = button.nextElementSibling.firstElementChild,
        url = image.getAttribute('src');
      image.removeAttribute('src');
      button.addEventListener('click', image.setAttribute.bind(image, 'src', url));
    }
  }
}
const generalAttachedImageLoader = new GeneralAttachedImageLoader();


/***/ }),
/* 382 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysCreatedEnteredWonGiveawayDetails", function() { return giveawaysCreatedEnteredWonGiveawayDetails; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(208);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(96);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(132);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(122);












class GiveawaysCreatedEnteredWonGiveawayDetails extends _class_Module__WEBPACK_IMPORTED_MODULE_7__["Module"] {
  constructor() {
    super();
    this.currentId = null;
    this.created = null;
    this.entered = null;
    this.won = null;
    this.giveaways = null;
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds more details to each giveaway in your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/created"
      }, "created"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/entered"
      }, "entered"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/won"
      }, "won"), " pages:"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "How many points the giveaway is worth next to the game's name."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "An icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-steam"
      }), ") next to the game's name that links to the game's Steam store page."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "For the entered/won pages only, the creator's username next to the giveaway's end time."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "A column \"Type\" containing the giveaway's type (public, invite only, group, whitelist or region restricted)."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "A column \"Level\" containing the giveaway's level."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "For the created page only, a column \"Winner(s)\" containing the giveaway's winner(s) and how many of them have marked it as received/not received."))),
      features: {
        cewgd_c: {
          name: 'Enable for Created pages.',
          sg: true,
          features: {
            cewgd_c_p: {
              name: 'Points',
              sg: true
            },
            cewgd_c_sl: {
              name: 'Steam Link',
              sg: true
            },
            cewgd_c_t: {
              name: 'Type',
              sg: true
            },
            cewgd_c_l: {
              name: 'Level',
              sg: true
            },
            cewgd_c_w: {
              name: 'Winners',
              sg: true
            }
          }
        },
        cewgd_e: {
          name: 'Enable for Entered pages.',
          sg: true,
          features: {
            cewgd_e_p: {
              name: 'Points',
              sg: true
            },
            cewgd_e_sl: {
              name: 'Steam Link',
              sg: true
            },
            cewgd_e_t: {
              name: 'Type',
              sg: true
            },
            cewgd_e_l: {
              name: 'Level',
              sg: true
            }
          }
        },
        cewgd_w: {
          name: 'Enable for Won pages.',
          sg: true,
          features: {
            cewgd_w_p: {
              name: 'Points',
              sg: true
            },
            cewgd_w_sl: {
              name: 'Steam Link',
              sg: true
            },
            cewgd_w_t: {
              name: 'Type',
              sg: true
            },
            cewgd_w_l: {
              name: 'Level',
              sg: true
            },
            cewgd_w_e: {
              name: 'Entries',
              sg: true
            }
          }
        }
      },
      id: 'cewgd',
      name: 'Created/Entered/Won Giveaway Details',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.isCurrentPath('My Giveaways - Created') && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('cewgd_c')) {
      this.currentId = 'cewgd_c';
      this.created = true;
    } else if (_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.isCurrentPath('My Giveaways - Entered') && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('cewgd_e')) {
      this.currentId = 'cewgd_e';
      this.entered = true;
    } else if (_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.isCurrentPath('My Giveaways - Won') && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('cewgd_w')) {
      this.currentId = 'cewgd_w';
      this.won = true;
    }
    if (!this.currentId) {
      return;
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.endlessFeatures.push(this.addHeading.bind(this));
    _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.giveawayFeatures.push((...args) => this.getGiveaways(...args));
  }
  addHeading(context, main, source, endless) {
    if (!main) {
      return;
    }
    const tableHeading = context.querySelector(_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.getSelectors(endless, ['X.table__heading']));
    if (!tableHeading || tableHeading.querySelector('.esgst-cewgd-heading')) {
      return;
    }
    const items = [];
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`${this.currentId}_t`)) {
      items.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__column--width-small text-center esgst-cewgd-heading"
      }, "Type"));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`${this.currentId}_l`)) {
      items.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__column--width-small text-center esgst-cewgd-heading"
      }, "Level"));
    }
    if (this.created && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`${this.currentId}_w`)) {
      items.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__column--width-small text-center esgst-cewgd-heading"
      }, "Winner(s)"));
    }
    if (this.won && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`${this.currentId}_e`)) {
      items.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__column--width-small text-center esgst-cewgd-heading"
      }, "Entries"));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(tableHeading.firstElementChild, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("fragment", null, items));
  }
  async getGiveaways(giveaways, main) {
    if (!main) {
      return;
    }
    this.giveaways = {};
    const promises = [];
    const now = Date.now();
    for (const giveaway of giveaways) {
      promises.push(this.getGiveaway(giveaway, now));
    }
    await Promise.all(promises);
    await _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.lockAndSaveGiveaways(this.giveaways);
    if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.gf && _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.gf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`gf_enable${_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.gf.type}`)) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.modules.giveawaysGiveawayFilters.filters_filter(_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.gf);
    }
    if (!main && _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.gfPopup && _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.gfPopup.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`gf_enable${_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.gfPopup.type}`)) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.modules.giveawaysGiveawayFilters.filters_filter(_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.gfPopup);
    }
  }
  async getGiveaway(giveaway, now) {
    const details = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.giveaways[giveaway.code];
    let shouldUpdateWinners = false;
    if (!giveaway.deleted && details && details.gameSteamId && Array.isArray(details.winners)) {
      shouldUpdateWinners = details.v !== _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.CURRENT_GIVEAWAY_VERSION || !details.winners.length || details.winners.filter(x => x.status !== 'Received' && x.status !== 'Not Received').length > 0;
    }
    if (this.created && shouldUpdateWinners) {
      await this.fetchWinners(giveaway, now);
    } else if (now - (details && details.lastUpdate || 0) <= 604800000 && (giveaway.deleted || details && details.gameSteamId && (!this.won || details.creator !== _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('username')))) {
      this.addDetails(giveaway, details);
    } else {
      await this.fetchDetails(giveaway, now);
    }
  }
  async fetchDetails(giveaway, now) {
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(giveaway.url);
    const giveaways = await _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.modules.giveaways.giveaways_get(response.html, false, response.url);
    if (giveaways.length > 0) {
      const details = giveaways[0];
      details.lastUpdate = now;
      this.giveaways[giveaway.code] = details;
      this.addDetails(giveaway, details);
    } else {
      this.addDetails(giveaway);
    }
  }
  async fetchWinners(giveaway, now) {
    let nextPage = 1;
    let details = null;
    let pagination = null;
    do {
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`${giveaway.url}/winners/search?page=${nextPage}`);
      const responseHtml = response.html;
      if (!details) {
        const giveaways = await _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.modules.giveaways.giveaways_get(responseHtml, false, response.url);
        if (giveaways.length > 0) {
          details = giveaways[0];
          details.winners = [];
        }
      }
      if (!details) {
        this.addDetails(giveaway);
        return;
      }
      const elements = responseHtml.querySelectorAll('.table__row-inner-wrap');
      for (const element of elements) {
        details.winners.push({
          status: element.lastElementChild.textContent.trim(),
          username: element.firstElementChild.nextElementSibling.firstElementChild.textContent.trim()
        });
      }
      nextPage += 1;
      pagination = responseHtml.querySelector('.pagination__navigation');
    } while (pagination && !pagination.lastElementChild.classList.contains('is-selected'));
    details.lastUpdate = now;
    this.giveaways[giveaway.code] = details;
    this.addDetails(giveaway, details);
  }
  addDetails(giveaway, details) {
    if (!giveaway.id) {
      const steamGiftCard = giveaway.name.match(/^\$(.+?)\sSteam\sGift\sCard$/);
      if (steamGiftCard) {
        giveaway.points = parseInt(steamGiftCard[1].replace(/,/g, ''));
        giveaway.id = `SteamGiftCard${giveaway.points}`;
        giveaway.type = 'apps';
      } else {
        const humbleBundle = giveaway.name.match(/^Humble.+?Bundle/);
        if (humbleBundle) {
          giveaway.id = giveaway.name.replace(/\s/g, '');
          giveaway.type = 'apps';
        } else if (details && details.gameSteamId && details.gameType) {
          giveaway.id = details.gameSteamId;
          giveaway.type = details.gameType;
        }
      }
    }
    if (giveaway.id) {
      const savedGame = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.games[giveaway.type][giveaway.id];
      if (savedGame) {
        const keys = ['hidden', 'ignored', 'noCV', 'owned', 'previouslyEntered', 'previouslyWon', 'reducedCV', 'wishlisted', 'previouslyWishlisted'];
        for (const key of keys) {
          if (savedGame[key === 'previouslyEntered' ? 'entered' : key === 'previouslyWon' ? 'won' : key]) {
            giveaway[key] = true;
          }
        }
      }
    }
    if (!giveaway.points) {
      if (details) {
        giveaway.points = details.points;
      } else if (giveaway.id) {
        const gcCache = JSON.parse(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_6__["LocalStorage"].get('gcCache', '{}'));
        const data = gcCache && gcCache[giveaway.type] && gcCache[giveaway.type][giveaway.id];
        if (data && data.price > -1) {
          giveaway.points = data.price;
        }
      }
    }
    const headingItems = [];
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`${this.currentId}_p`)) {
      headingItems.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("span", null, ` (${details ? giveaway.points || 0 : '?'}P)`));
    }
    if (giveaway.id && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`${this.currentId}_sl`)) {
      headingItems.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        className: "giveaway__icon",
        href: `http://store.steampowered.com/${giveaway.type.slice(0, -1)}/${giveaway.id}`,
        target: "_blank"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-steam"
      })));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(giveaway.headingName, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("fragment", null, headingItems));
    for (const child of giveaway.heading.children) {
      if (child === giveaway.headingName || child.classList.contains('giveaway__heading__name') || child.classList.contains('featured__heading__medium')) {
        child.setAttribute('data-draggable-id', 'name');
        continue;
      }
      if (child.textContent.match(/\(.+?\sCopies\)/)) {
        child.setAttribute('data-draggable-id', 'copies');
        continue;
      }
      if (child.textContent.match(/\(.+?P\)/)) {
        child.setAttribute('data-draggable-id', 'points');
        continue;
      }
      const url = child.getAttribute('href');
      if (url) {
        if (url.match(/store.steampowered.com/)) {
          child.setAttribute('data-draggable-id', 'steam');
          continue;
        }
        if (url.match(/\/giveaways\/search/)) {
          child.setAttribute('data-draggable-id', 'search');
        }
      }
    }
    if (details) {
      giveaway.inviteOnly = details.inviteOnly;
      giveaway.group = details.group;
      giveaway.regionRestricted = details.regionRestricted;
      giveaway.whitelist = details.whitelist;
      giveaway.public = !giveaway.inviteOnly && !giveaway.group && !giveaway.whitelist;
      giveaway.level = details.level;
      if (!giveaway.entries) {
        giveaway.entries = details.entries;
      }
    } else if (giveaway.deleted) {
      giveaway.public = false;
    } else {
      giveaway.blacklist = true;
    }
    giveaway.creator = details && details.creator || '-';
    if (giveaway.creators.indexOf(giveaway.creator.toLowerCase()) < 0) {
      giveaway.creators.push(giveaway.creator.toLowerCase());
    }
    if (this.entered || this.won) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(giveaway.endTimeColumn, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("fragment", null, ' by ', details ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        className: "table__column__secondary-link",
        href: `/user/${giveaway.creator}`
      }, giveaway.creator) : '?'));
    }
    const columnItems = [];
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`${this.currentId}_t`)) {
      let type;
      if (giveaway.deleted) {
        type = 'Deleted';
      } else if (giveaway.blacklist) {
        type = 'Blacklist';
      } else if (giveaway.inviteOnly) {
        if (giveaway.regionRestricted) {
          type = 'Invite + Region';
        } else {
          type = 'Invite';
        }
      } else if (giveaway.group) {
        if (giveaway.whitelist) {
          if (giveaway.regionRestricted) {
            type = 'Group + Whitelist + Region';
          } else {
            type = 'Group + Whitelist';
          }
        } else if (giveaway.regionRestricted) {
          type = 'Group + Region';
        } else {
          type = 'Group';
        }
      } else if (giveaway.whitelist) {
        if (giveaway.regionRestricted) {
          type = 'Whitelist + Region';
        } else {
          type = 'Whitelist';
        }
      } else if (giveaway.regionRestricted) {
        type = 'Region';
      } else if (giveaway.public) {
        type = 'Public';
      } else {
        type = '-';
      }
      columnItems.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__column--width-small text-center"
      }, type));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`${this.currentId}_l`)) {
      columnItems.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__column--width-small text-center"
      }, details && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__["Utils"].isSet(giveaway.level) ? giveaway.level : '-'));
    }
    if (this.created && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`${this.currentId}_w`)) {
      let winners;
      const numWinners = details && details.winners && details.winners.length || 0;
      if (numWinners > 0) {
        winners = [];
        const firstWinner = details.winners[0].username;
        winners.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
          className: "table__column__secondary-link",
          href: `/user/${firstWinner}`
        }, firstWinner));
        if (numWinners > 1) {
          winners.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("span", {
            className: "esgst-clickable table__column__secondary-link",
            onclick: this.openWinnersPopup.bind(this, details)
          }, ' ', "(+", numWinners - 1, " more)"));
          let received = 0;
          for (const winner of details.winners) {
            if (winner.status === 'Received') {
              received += 1;
            }
          }
          giveaway.innerWrap.lastElementChild.insertAdjacentText('beforeend', ` (${received}/${numWinners})`);
        }
      } else {
        winners = '-';
      }
      columnItems.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__column--width-small text-center"
      }, winners));
    }
    if (this.won && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get(`${this.currentId}_e`)) {
      columnItems.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__column--width-small text-center"
      }, details && _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__["Utils"].isSet(giveaway.entries) ? giveaway.entries : '-'));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(giveaway.panel || giveaway.innerWrap.querySelector('.table__column--width-fill'), 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("fragment", null, columnItems));
    if (giveaway.gwcContext) {
      giveaway.chancePerPoint = giveaway.chance / Math.max(1, giveaway.points);
      giveaway.projectedChancePerPoint = giveaway.projectedChance / Math.max(1, giveaway.points);
      giveaway.gwcContext.title = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.getFeatureTooltip('gwc', `Giveaway Winning Chance (${_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.round(giveaway.chancePerPoint, 4)}% per point)`);
    }
    if (giveaway.gptwContext) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.modules.giveawaysGiveawayPointsToWin.gptw_addPoint(giveaway);
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('cgb')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.modules.giveawaysCustomGiveawayBackground.color([giveaway]);
    }
    if (giveaway.group && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('cl') && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('ggl')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.modules.generalContentLoader.loadGiveawayGroups(true, 'ggl', [giveaway]);
    }
  }
  openWinnersPopup(details) {
    const popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_8__["Popup"]({
      icon: 'fa-users',
      title: 'Winners',
      addScrollable: 'left'
    });
    let rows = [];
    for (const winner of details.winners) {
      let className = '';
      switch (winner.status) {
        case 'Received':
          className = 'fa fa-check-circle esgst-green';
          break;
        case 'Not Received':
          className = 'fa fa-times-circle esgst-red';
          break;
        case 'Awaiting Feedback':
          className = 'fa fa-question-circle esgst-grey';
          break;
        default:
          break;
      }
      rows.push(_class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__row-outer-wrap"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__row-inner-wrap"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__column--width-small"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        className: "table__column__secondary-link",
        href: `/user/${winner.username}`
      }, winner.username)), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
        className: "table__column--width-small"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: className
      })))));
    }
    let fragment = _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__heading"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small"
    }, "Winner"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__column--width-small"
    }, "Received")), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      className: "table__rows"
    }, rows));
    popup.open();
    _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].common.endless_load(popup.getScrollable(fragment));
  }
}
const giveawaysCreatedEnteredWonGiveawayDetails = new GiveawaysCreatedEnteredWonGiveawayDetails();


/***/ }),
/* 383 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysDeleteKeyConfirmation", function() { return giveawaysDeleteKeyConfirmation; });
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(213);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(144);





const createConfirmation = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].createConfirmation.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]),
  createElements = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]);
class GiveawaysDeleteKeyConfirmation extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Shows a confirmation popup if you try to delete a giveaway's key(s) (in any", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaway/aeqw7/dead-space/winners"
      }, "winners"), ' ', "page).")),
      id: 'dkc',
      name: 'Delete Key Confirmation',
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (!this.esgst.giveawayPath) return;
    this.esgst.endlessFeatures.push(this.dkc_getLinks.bind(this));
  }
  dkc_getLinks(context, main, source, endless) {
    const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .form__key-btn-delete, .esgst-es-page-${endless}.form__key-btn-delete` : '.form__key-btn-delete'}`);
    for (let i = elements.length - 1; i > -1; --i) {
      const element = elements[i];
      const newElement = createElements(element, 'afterend', [{
        attributes: {
          class: 'table__column__secondary-link esgst-clickable'
        },
        text: 'Delete',
        type: 'span'
      }]);
      element.remove();
      newElement.addEventListener('click', createConfirmation.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"], 'Are you sure you want to delete this key?', this.dkc_deleteKey.bind(createConfirmation, newElement), null));
    }
  }
  async dkc_deleteKey(link) {
    let row = link.closest('.table__row-inner-wrap');
    row.getElementsByClassName('form__key-read')[0].classList.add('is-hidden');
    row.getElementsByClassName('form__key-loading')[0].classList.remove('is-hidden');
    row.querySelector(`[name="key_value"]`).value = '';
    row.getElementsByClassName('form__key-value')[0].textContent = '';
    await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_1__["FetchRequest"].post('/ajax.php', {
      data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_3__["Session"].xsrfToken}&do=set_gift_key&key_value=&winner_id=${row.querySelector(`[name="winner_id"]`).value}`
    });
    row.getElementsByClassName('form__key-loading')[0].classList.add('is-hidden');
    row.getElementsByClassName('form__key-insert')[0].classList.remove('is-hidden');
    row.getElementsByClassName('js__sent-text')[0].textContent = 'Sent Gift';
    row.getElementsByClassName('js__sent-text')[1].textContent = 'Sent Gift';
  }
}
const giveawaysDeleteKeyConfirmation = new GiveawaysDeleteKeyConfirmation();


/***/ }),
/* 384 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayWinningChance", function() { return giveawaysGiveawayWinningChance; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






const createElements = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]);
class GiveawaysGiveawayWinningChance extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds an element (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-area-chart"
      }), " [Chance] %) below a giveaway's start time (in any page) that shows your chance of winning the giveaway."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "The chance is calculated by rounding up (using 2 decimals) the result of the following formula: number_of_copies / number_of_entries * 100"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "You can move the element around by dragging and dropping it.")),
      features: {
        gwc_e: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "The formula changes to: number_of_copies / (number_of_entries + 1) * 100"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "For example, if a giveaway has 5 entries, the current chance of winning it is 20%, but after you enter it, it will have 6 entries, so the chance will decrease to 16.67%.")),
          name: 'Show what the chance will be when you enter the giveaway instead of the current chance.',
          sg: true
        },
        gwc_a: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Uses an advanced formula (number_of_copies / (number_of_entries / time_open_in_milliseconds * duration_in_milliseconds) * 100) to calculate the chance based on how much time the giveaway has been open and the duration of the giveaway. This gives you an estimate of what the chance will be when the giveaway ends.")),
          features: {
            gwc_a_b: {
              name: `Show the basic chance along with the advanced one (the advanced chance will appear in a parenthesis, like "[Basic]% ([Advanced]%)").`,
              sg: true
            }
          },
          name: 'Use advanced formula.',
          sg: true
        },
        gwc_h: {
          conflicts: ['gwr_h'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Changes the color of the giveaway's title to the same color as the chance and adds a border of same color to the giveaway's game image.")),
          inputItems: [{
            id: 'gwc_h_width',
            prefix: `Image Border Width: `
          }],
          name: 'Highlight the giveaway.',
          sg: true
        }
      },
      id: 'gwc',
      name: 'Giveaway Winning Chance',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.gwc_addChances.bind(this)
      }
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gptw') || !this.esgst.enteredPath && (!this.esgst.wonPath || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w_e'))) return;
    this.esgst.endlessFeatures.push(this.gwc_addHeading.bind(this));
  }
  gwc_addChances(giveaways, main, source) {
    giveaways.forEach(giveaway => {
      if (giveaway.sgTools || main && (this.esgst.createdPath || this.esgst.wonPath && (!_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w_e')) || this.esgst.newGiveawayPath || this.esgst.archivePath)) return;
      if ((giveaway.inviteOnly && (main && (this.esgst.giveawayPath || this.esgst.enteredPath || this.esgst.wonPath && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd') && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w') && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w_e')) || !main || giveaway.ended || giveaway.id) || !giveaway.inviteOnly) && !giveaway.innerWrap.getElementsByClassName('esgst-gwc')[0]) {
        if (giveaway.started) {
          giveaway.gwcContext = createElements(giveaway.panel, _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv') && (main && this.esgst.giveawaysPath || source === 'gb' && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv_gb') || source === 'ged' && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv_ged') || source === 'ge' && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv_ge')) ? 'afterbegin' : 'beforeend', [{
            attributes: {
              class: `${this.esgst.giveawayPath ? 'featured__column' : ''} esgst-gwc`,
              ['data-draggable-id']: 'gwc',
              title: getFeatureTooltip('gwc', 'Giveaway Winning Chance')
            },
            type: 'div'
          }]);
          this.gwc_addChance(giveaway);
        } else {
          giveaway.chance = 100;
          giveaway.projectedChance = 100;
          giveaway.chancePerPoint = giveaway.chance / Math.max(1, giveaway.points);
          giveaway.projectedChancePerPoint = giveaway.chancePerPoint;
        }
      }
    });
  }
  gwc_addChance(giveaway) {
    let advancedChance = 0,
      advancedColor,
      basicChance,
      basicColor,
      colors,
      entries,
      i;
    entries = giveaway.entered || giveaway.ended || giveaway.created || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_e') ? giveaway.entries : giveaway.entries + 1;
    basicChance = entries > 0 ? giveaway.copies / entries * 100 : 100;
    basicChance = basicChance > 100 ? 100 : basicChance <= 0 ? 0.01 : basicChance;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_a') && !giveaway.ended && giveaway.startTime) {
      advancedChance = entries > 0 ? giveaway.copies / (entries / (Date.now() - giveaway.startTime) * (giveaway.endTime - giveaway.startTime)) * 100 : 100;
      advancedChance = advancedChance > 100 ? 100 : advancedChance <= 0 ? 0.01 : advancedChance;
    }
    giveaway.chance = basicChance;
    giveaway.projectedChance = advancedChance;
    giveaway.chancePerPoint = giveaway.chance / Math.max(1, giveaway.points);
    giveaway.projectedChancePerPoint = giveaway.projectedChance / Math.max(1, giveaway.points);
    if (giveaway.points) {
      giveaway.gwcContext.title = getFeatureTooltip('gwc', `Giveaway Winning Chance (${_Common__WEBPACK_IMPORTED_MODULE_3__["common"].round(giveaway.chancePerPoint, 4)}% basic and ${_Common__WEBPACK_IMPORTED_MODULE_3__["common"].round(giveaway.projectedChancePerPoint)}% advanced per point)`);
    }
    giveaway.gwcContext.setAttribute('data-chance', giveaway.chance);
    giveaway.gwcContext.setAttribute('data-projectedChance', giveaway.projectedChance);
    for (i = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_colors').length - 1; i > -1; --i) {
      colors = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_colors')[i];
      if (basicChance >= parseFloat(colors.lower) && basicChance <= parseFloat(colors.upper)) {
        basicColor = colors.color;
        break;
      }
    }
    for (i = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_colors').length - 1; i > -1; --i) {
      colors = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_colors')[i];
      if (advancedChance >= parseFloat(colors.lower) && advancedChance <= parseFloat(colors.upper)) {
        advancedColor = colors.color;
        break;
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_h')) {
      giveaway.headingName.classList.add('esgst-gwc-highlight');
      giveaway.headingName.style.color = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_a') && !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_a_b') ? advancedColor : basicColor;
      if (giveaway.image) {
        giveaway.image.classList.add('esgst-gwc-highlight');
        giveaway.image.style.color = `${_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_a') && !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_a_b') ? advancedColor : basicColor}`;
        giveaway.image.style.boxShadow = `${_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_a') && !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_a_b') ? advancedColor : basicColor} 0px 0px 0px var(--esgst-gwc-highlight-width, 3px) inset`;
      }
    }
    if (this.esgst.enteredPath || this.esgst.wonPath) {
      giveaway.gwcContext.style.display = 'inline-block';
    }
    const items = [];
    if (!this.esgst.enteredPath && !this.esgst.wonPath) {
      items.push({
        attributes: {
          class: 'fa fa-area-chart'
        },
        type: 'i'
      });
    }
    const children = [];
    const basicAttributes = {};
    if (basicColor) {
      basicAttributes.style = `color: ${basicColor}; font-weight: bold;`;
    }
    const advancedAttributes = {};
    if (advancedColor) {
      advancedAttributes.style = `color: ${advancedColor}; font-weight: bold;`;
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_a') && advancedChance) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc_a_b')) {
        children.push({
          attributes: basicAttributes,
          text: `${_Common__WEBPACK_IMPORTED_MODULE_3__["common"].round(basicChance)}%`,
          type: 'span'
        }, {
          text: ` (`,
          type: 'node'
        }, {
          attributes: advancedAttributes,
          text: `${_Common__WEBPACK_IMPORTED_MODULE_3__["common"].round(advancedChance)}%`,
          type: 'span'
        }, {
          text: `)`,
          type: 'node'
        });
      } else {
        children.push({
          attributes: advancedAttributes,
          text: `${_Common__WEBPACK_IMPORTED_MODULE_3__["common"].round(advancedChance)}%`,
          type: 'span'
        });
      }
    } else {
      children.push({
        attributes: basicAttributes,
        text: `${_Common__WEBPACK_IMPORTED_MODULE_3__["common"].round(basicChance)}%`,
        type: 'span'
      });
    }
    items.push({
      type: 'span',
      children
    });
    if ((this.esgst.enteredPath || this.esgst.wonPath) && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr')) {
      items.push({
        text: ' / ',
        type: 'node'
      });
    }
    createElements(giveaway.gwcContext, 'atinner', items);
  }
  gwc_addHeading(context, main, source, endless) {
    if (this.esgst.createdPath || this.esgst.wonPath && (!_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w_e')) || !main) return;
    const table = context.querySelector(`${endless ? `.esgst-es-page-${endless} .table__heading, .esgst-es-page-${endless}.table__heading` : '.table__heading'}`);
    if (!table || table.getElementsByClassName('esgst-gwcr-heading')[0]) return;
    let title = '';
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc')) {
      title += 'Chance / ';
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr')) {
      title += 'Ratio / ';
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gptw')) {
      title += 'Points To Win / ';
    }
    title = title.slice(0, -3);
    createElements(table.firstElementChild, 'afterend', [{
      attributes: {
        class: 'table__column--width-small text-center esgst-gwcr-heading'
      },
      text: title,
      type: 'div'
    }]);
  }
}
const giveawaysGiveawayWinningChance = new GiveawaysGiveawayWinningChance();


/***/ }),
/* 385 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayWinningRatio", function() { return giveawaysGiveawayWinningRatio; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






const createElements = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]);
class GiveawaysGiveawayWinningRatio extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds an element (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-pie-chart"
      }), " [Ratio]: 1) below a giveaway's start time (in any page) that shows the ratio (number of entries per copy) of the giveaway."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "The ratio is calculated by rounding up the result of the following formula: number_of_entries / number_of_copies"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "You can move the element around by dragging and dropping it.")),
      features: {
        gwr_e: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "The formula changes to: (number_of_entries + 1) / number_of_copies"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "For example, if a giveaway has 2 copies and 6 entries, the current ratio is 3:1, but after you enter it, it will have 7 entries, so the ratio will increase to 4:1.")),
          name: 'Show what the ratio will be when you enter the giveaway instead of the current ratio.',
          sg: true
        },
        gwr_a: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Uses an advanced formula ((number_of_entries / time_open_in_milliseconds * duration_in_milliseconds) / number_of_copies) to calculate the ratio based on how much time the giveaway has been open and the duration of the giveaway. This gives you an estimate of what the ratio will be when the giveaway ends.")),
          features: {
            gwr_a_b: {
              name: `Show the basic ratio along with the advanced one (the advanced ratio will appear in a parenthesis, like "[Basic]:1 ([Advanced]:1)").`,
              sg: true
            }
          },
          name: 'Use advanced formula.',
          sg: true
        },
        gwr_h: {
          conflicts: ['gwc_h'],
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Changes the color of the giveaway's title to the same color as the ratio and adds a border of same color to the giveaway's game image.")),
          inputItems: [{
            id: 'gwr_h_width',
            prefix: `Image Border Width: `
          }],
          name: 'Highlight the giveaway.',
          sg: true
        }
      },
      id: 'gwr',
      name: 'Giveaway Winning Ratio',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.gwr_addRatios.bind(this)
      }
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gptw') || _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwc') || !this.esgst.enteredPath && (!this.esgst.wonPath || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w_e'))) return;
    this.esgst.endlessFeatures.push(this.esgst.modules.giveawaysGiveawayWinningChance.gwc_addHeading.bind(this.esgst.modules.giveawaysGiveawayWinningChance));
  }
  gwr_addRatios(giveaways, main, source) {
    giveaways.forEach(giveaway => {
      if (giveaway.sgTools || main && (this.esgst.createdPath || this.esgst.wonPath && (!_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w_e')) || this.esgst.newGiveawayPath || this.esgst.archivePath)) return;
      if (giveaway.started && (giveaway.inviteOnly && (main && (this.esgst.giveawayPath || this.esgst.enteredPath || this.esgst.wonPath && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd') && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w') && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w_e')) || !main || giveaway.ended || giveaway.id) || !giveaway.inviteOnly) && !giveaway.innerWrap.getElementsByClassName('esgst-gwr')[0]) {
        let context = createElements(giveaway.panel, _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv') && (main && this.esgst.giveawaysPath || source === 'gb' && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv_gb') || source === 'ged' && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv_ged') || source === 'ge' && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv_ge')) ? 'afterbegin' : 'beforeend', [{
          attributes: {
            class: `${this.esgst.giveawayPath ? 'featured__column' : ''} esgst-gwr`,
            ['data-draggable-id']: 'gwr',
            title: getFeatureTooltip('gwr', 'Giveaway Winning Ratio')
          },
          type: 'div'
        }]);
        this.gwr_addRatio(context, giveaway);
      }
    });
  }
  gwr_addRatio(context, giveaway) {
    let advancedColor,
      advancedRatio = 0,
      basicColor,
      basicRatio,
      colors,
      entries,
      i;
    entries = giveaway.entered || giveaway.ended || giveaway.created || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_e') ? giveaway.entries : giveaway.entries + 1;
    basicRatio = Math.ceil(entries / giveaway.copies);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_a') && !giveaway.ended && giveaway.startTime) {
      advancedRatio = Math.ceil(entries / (Date.now() - giveaway.startTime) * (giveaway.endTime - giveaway.startTime) / giveaway.copies);
    }
    giveaway.ratio = basicRatio;
    giveaway.projectedRatio = advancedRatio;
    context.setAttribute('data-ratio', giveaway.ratio);
    context.setAttribute('data-projectedRatio', giveaway.projectedRatio);
    for (i = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_colors').length - 1; i > -1; --i) {
      colors = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_colors')[i];
      if (basicRatio >= parseInt(colors.lower) && basicRatio <= parseInt(colors.upper)) {
        basicColor = colors.color;
        break;
      }
    }
    for (i = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_colors').length - 1; i > -1; --i) {
      colors = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_colors')[i];
      if (advancedRatio >= parseInt(colors.lower) && advancedRatio <= parseInt(colors.upper)) {
        advancedColor = colors.color;
        break;
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_h')) {
      giveaway.headingName.classList.add('esgst-gwr-highlight');
      giveaway.headingName.style.color = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_a') && !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_a_b') ? advancedColor : basicColor;
      if (giveaway.image) {
        giveaway.image.classList.add('esgst-gwr-highlight');
        giveaway.image.style.color = `${_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_a') && !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_a_b') ? advancedColor : basicColor}`;
        giveaway.image.style.boxShadow = `${_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_a') && !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_a_b') ? advancedColor : basicColor} 0px 0px 0px var(--esgst-gwr-highlight-width, 3px)  inset`;
      }
    }
    if (this.esgst.enteredPath || this.esgst.wonPath) {
      context.style.display = 'inline-block';
    }
    const items = [];
    if (!this.esgst.enteredPath && !this.esgst.wonPath) {
      items.push({
        attributes: {
          class: 'fa fa-pie-chart'
        },
        type: 'i'
      });
    }
    const children = [];
    const basicAttributes = {};
    if (basicColor) {
      basicAttributes.style = `color: ${basicColor}; font-weight: bold;`;
    }
    const advancedAttributes = {};
    if (advancedColor) {
      advancedAttributes.style = `color: ${advancedColor}; font-weight: bold;`;
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_a') && advancedRatio) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gwr_a_b')) {
        children.push({
          attributes: basicAttributes,
          text: `${basicRatio}:1`,
          type: 'span'
        }, {
          text: ` (`,
          type: 'node'
        }, {
          attributes: advancedAttributes,
          text: `${advancedRatio}:1`,
          type: 'span'
        }, {
          text: `)`,
          type: 'node'
        });
      } else {
        children.push({
          attributes: advancedAttributes,
          text: `${advancedRatio}:1`,
          type: 'span'
        });
      }
    } else {
      children.push({
        attributes: basicAttributes,
        text: `${basicRatio}:1`,
        type: 'span'
      });
    }
    items.push({
      type: 'span',
      children
    });
    if ((this.esgst.enteredPath || this.esgst.wonPath) && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gptw')) {
      items.push({
        text: ' / ',
        type: 'node'
      });
    }
    createElements(context, 'atinner', items);
  }
}
const giveawaysGiveawayWinningRatio = new GiveawaysGiveawayWinningRatio();


/***/ }),
/* 386 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayPointsToWin", function() { return giveawaysGiveawayPointsToWin; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






const createElements = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]);
class GiveawaysGiveawayPointsToWin extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds an element (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-rub"
      }), "[Points]) below a giveaway's start time (in any page) that shows how many points you would have to spend to win the giveaway."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "The points are calculated by rounding up (using 2 decimals) the result of the following formula: number_of_points / number_of_copies * number_of_entries"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "You can move the element around by dragging and dropping it.")),
      features: {
        gptw_e: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "The formula changes to: number_of_points / number_of_copies * (number_of_entries + 1)"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "For example, if a giveaway for 2 copies has 5 entries and is worth 10 points, the current points to win are 25, but after you enter it, it will have 6 entries, so the points will increase to 30.")),
          name: 'Show what the points to win will be when you enter the giveaway instead of the current points to win.',
          sg: true
        }
      },
      id: 'gptw',
      name: 'Giveaway Points To Win',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.gptw_addPoints.bind(this)
      }
    };
  }
  init() {
    if (!this.esgst.enteredPath && (!this.esgst.wonPath || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w_e'))) return;
    this.esgst.endlessFeatures.push(this.esgst.modules.giveawaysGiveawayWinningChance.gwc_addHeading.bind(this));
  }
  gptw_addPoints(giveaways, main, source) {
    for (const giveaway of giveaways) {
      if (giveaway.sgTools || main && (this.esgst.createdPath || this.esgst.wonPath && (!_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w_e')) || this.esgst.newGiveawayPath || this.esgst.archivePath)) {
        continue;
      }
      if ((!giveaway.inviteOnly || (!main || !this.esgst.giveawayPath && !this.esgst.enteredPath && (!this.esgst.wonPath || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w') || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cewgd_w_e'))) && main && !giveaway.ended && !giveaway.id) && giveaway.inviteOnly || giveaway.innerWrap.getElementsByClassName('esgst-gptw')[0]) {
        continue;
      }
      if (giveaway.started) {
        giveaway.gptwContext = createElements(giveaway.panel, _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv') && (main && this.esgst.giveawaysPath || source === 'gb' && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv_gb') || source === 'ged' && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv_ged') || source === 'ge' && _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gv_ge')) ? 'afterbegin' : 'beforeend', [{
          attributes: {
            class: `${this.esgst.giveawayPath ? 'featured__column' : ''} esgst-gptw`,
            ['data-draggable-id']: 'gptw',
            title: getFeatureTooltip('gptw', 'Giveaway Points To Win')
          },
          type: 'div'
        }]);
        this.gptw_addPoint(giveaway);
      } else {
        giveaway.pointsToWin = 0;
      }
    }
  }
  gptw_addPoint(giveaway) {
    const entries = giveaway.entered || giveaway.ended || giveaway.created || !_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gptw_e') ? giveaway.entries : giveaway.entries + 1;
    giveaway.pointsToWin = Math.round((giveaway.points || 0) / giveaway.copies * entries * 100) / 100;
    giveaway.gptwContext.setAttribute('data-pointsToWin', giveaway.pointsToWin);
    let color = null;
    for (const colors of _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('gptw_colors')) {
      if (giveaway.pointsToWin >= parseFloat(colors.lower) && giveaway.pointsToWin <= parseFloat(colors.upper)) {
        color = colors.color;
        break;
      }
    }
    if (this.esgst.enteredPath || this.esgst.wonPath) {
      giveaway.gptwContext.style.display = 'inline-block';
    }
    const items = [];
    if (!this.esgst.enteredPath && !this.esgst.wonPath) {
      items.push({
        attributes: {
          class: 'fa fa-rub'
        },
        type: 'i'
      });
    }
    const attributes = {};
    if (color) {
      attributes.style = `color: ${color}; font-weight: bold;`;
    }
    items.push({
      attributes,
      text: giveaway.pointsToWin,
      type: 'span'
    });
    createElements(giveaway.gptwContext, 'atinner', items);
  }
}
const giveawaysGiveawayPointsToWin = new GiveawaysGiveawayPointsToWin();


/***/ }),
/* 387 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayEndTimeHighlighter", function() { return giveawaysGiveawayEndTimeHighlighter; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





class GiveawaysGiveawayEndTimeHighlighter extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Allows you to highlight the end time of a giveaway (in any page) by coloring it based on how many hours there are left.")),
      id: 'geth',
      name: 'Giveaway End Time Highlighter',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.geth_getGiveaways.bind(this)
      }
    };
  }
  geth_getGiveaways(giveaways) {
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('geth_colors').length) {
      return;
    }
    for (const giveaway of giveaways) {
      if (!giveaway.started) {
        continue;
      }
      const hoursLeft = (giveaway.endTime - Date.now()) / 3600000;
      for (let i = _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('geth_colors').length - 1; i > -1; i--) {
        const colors = _class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('geth_colors')[i];
        if (hoursLeft >= parseFloat(colors.lower) && hoursLeft <= parseFloat(colors.upper)) {
          (giveaway.endTimeColumn_gv || giveaway.endTimeColumn).style.color = colors.color;
          break;
        }
      }
    }
  }
}
const giveawaysGiveawayEndTimeHighlighter = new GiveawaysGiveawayEndTimeHighlighter();


/***/ }),
/* 388 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysSteamActivationLinks", function() { return giveawaysSteamActivationLinks; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);







const createElements = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]);
class GiveawaysSteamActivationLinks extends _class_Module__WEBPACK_IMPORTED_MODULE_3__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Adds 2 optional icons (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-steam"
      }), " for the Steam client and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-globe"
      }), " for the browser) next to each key in the \"Key\" column of your ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/won"
      }, "won"), " page that allow you to quickly activate a won game on Steam, either through the client or the browser."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "When you click on the icon, the key is automatically copied to the clipboard.")),
      id: 'sal',
      name: 'Steam Activation Links',
      options: {
        title: `Show links to:`,
        values: ['Steam Client', 'Browser', 'Both']
      },
      sg: true,
      type: 'giveaways'
    };
  }
  init() {
    if (!this.esgst.wonPath) return;
    this.esgst.endlessFeatures.push(this.sal_addLinks.bind(this), this.sal_addObservers.bind(this));
  }
  sal_addObservers(context, main, source, endless) {
    const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .view_key_btn, .esgst-es-page-${endless}.view_key_btn` : '.view_key_btn'}`);
    for (const element of elements) {
      this.sal_addObserver(element);
    }
  }
  sal_addObserver(button) {
    let interval = null;
    const context = button.closest('.table__row-outer-wrap');
    button.addEventListener('click', () => {
      if (interval) {
        return;
      }
      interval = window.setInterval(() => {
        if (!context.contains(button)) {
          window.clearInterval(interval);
          interval = null;
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('sal')) {
            const element = context.querySelector(`[data-clipboard-text]`);
            const match = element.getAttribute('data-clipboard-text').match(/^[\d\w]{5}(-[\d\w]{5}){2,}$/);
            if (match) {
              this.sal_addLink(element, match[0]);
            }
          }
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('ef')) {
            this.esgst.modules.generalElementFilters.ef_hideElements(context);
          }
        }
      }, 100);
    });
  }
  sal_addLinks(context, main, source, endless) {
    const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} [data-clipboard-text], .esgst-es-page-${endless}[data-clipboard-text]` : `[data-clipboard-text]`}`);
    for (const element of elements) {
      if (element.parentElement.getElementsByClassName('esgst-sal')[0]) {
        continue;
      }
      const match = element.getAttribute('data-clipboard-text').match(/^[\d\w]{5}(-[\d\w]{5}){2,}$/);
      if (match) {
        this.sal_addLink(element, match[0]);
      }
    }
  }
  sal_addLink(element, match) {
    let link, textArea;
    if (element.nextElementSibling && !element.nextElementSibling.classList.contains('esgst-sal') || !element.nextElementSibling) {
      link = createElements(element, 'afterend', [{
        type: 'span'
      }]);
      switch (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('sal_index')) {
        case 0:
          createElements(link, 'beforeend', [{
            attributes: {
              class: 'esgst-sal esgst-clickable',
              title: getFeatureTooltip('sal', `Activate on Steam (client)`)
            },
            type: 'span',
            children: [{
              attributes: {
                class: 'fa fa-steam'
              },
              type: 'i'
            }]
          }]).addEventListener('click', () => {
            textArea = createElements(document.body, 'beforeend', [{
              type: 'textarea'
            }]);
            textArea.value = match;
            textArea.select();
            document.execCommand('copy');
            textArea.remove();
            window.location.href = `steam://open/activateproduct`;
          });
          break;
        case 1:
          createElements(link, 'beforeend', [{
            attributes: {
              class: 'esgst-sal esgst-clickable',
              href: `https://store.steampowered.com/account/registerkey?key=${match}`,
              target: '_blank',
              title: getFeatureTooltip('sal', `Activate on Steam (browser)`)
            },
            type: 'a',
            children: [{
              attributes: {
                class: 'fa fa-globe'
              },
              type: 'i'
            }]
          }]);
          break;
        case 2:
          createElements(link, 'beforeend', [{
            attributes: {
              class: 'esgst-sal esgst-clickable',
              title: getFeatureTooltip('sal', `Activate on Steam (client)`)
            },
            type: 'span',
            children: [{
              attributes: {
                class: 'fa fa-steam'
              },
              type: 'i'
            }]
          }, {
            attributes: {
              class: 'esgst-sal esgst-clickable',
              href: `https://store.steampowered.com/account/registerkey?key=${match}`,
              target: '_blank',
              title: getFeatureTooltip('sal', `Activate on Steam (browser)`)
            },
            type: 'a',
            children: [{
              attributes: {
                class: 'fa fa-globe'
              },
              type: 'i'
            }]
          }]).previousElementSibling.addEventListener('click', () => {
            textArea = createElements(document.body, 'beforeend', [{
              type: 'textarea'
            }]);
            textArea.value = match;
            textArea.select();
            document.execCommand('copy');
            textArea.remove();
            window.location.href = `steam://open/activateproduct`;
          });
          break;
      }
    }
  }
}
const giveawaysSteamActivationLinks = new GiveawaysSteamActivationLinks();


/***/ }),
/* 389 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysUnfadedEnteredGiveaway", function() { return giveawaysUnfadedEnteredGiveaway; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);


class GiveawaysUnfadedEnteredGiveaway extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Removes SteamGifts' default fade for entered giveaways.")),
      id: 'ueg',
      name: 'Unfaded Entered Giveaway',
      sg: true,
      type: 'giveaways',
      featureMap: {
        endless: this.ueg_remove.bind(this)
      }
    };
  }
  ueg_remove(context, main, source, endless) {
    const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .giveaway__row-inner-wrap.is-faded, .esgst-es-page-${endless}.giveaway__row-inner-wrap.is-faded` : '.giveaway__row-inner-wrap.is-faded'}`);
    for (let i = 0, n = elements.length; i < n; ++i) {
      elements[i].classList.add('esgst-ueg');
    }
  }
}
const giveawaysUnfadedEnteredGiveaway = new GiveawaysUnfadedEnteredGiveaway();


/***/ }),
/* 390 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysStickiedGiveawayGroups", function() { return giveawaysStickiedGiveawayGroups; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(276);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






const getValue = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]),
  lockAndSaveGroups = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].lockAndSaveGroups.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]);
class GiveawaysStickiedGiveawayGroups extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-thumb-tack"
      }), " if the group is stickied and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-thumb-tack esgst-faded"
      }), " if it is not) next to each group in the ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/new"
      }, "new giveaway"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/steam/groups"
      }, "groups"), " pages that allows you to sticky the group so that it appears at the top of the group list when creating a giveaway for quick use.")),
      id: 'sgg',
      name: 'Stickied Giveaway Groups',
      sg: true,
      type: 'giveaways',
      sync: 'Steam Groups',
      syncKeys: ['Groups']
    };
  }
  init() {
    if (this.esgst.newGiveawayPath && !document.getElementsByClassName('table--summary')[0]) {
      this.sgg_setGiveawayGroups();
    }
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.isCurrentPath('Steam - Groups')) {
      this.esgst.endlessFeatures.push(this.sgg_setGroups.bind(this));
    }
  }
  sgg_setGiveawayGroups() {
    let avatar, code, container, context, elements, i, id, j, n, savedGroups, stickied;
    savedGroups = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.getValue('groups', '[]'));
    container = document.querySelector(`.form_list[data-input="group_item_string"]`);
    elements = container.children;
    const obj = {
      separator: container.firstElementChild.nextElementSibling
    };
    for (i = 1, n = elements.length; i < n; ++i) {
      context = elements[i];
      id = context.getAttribute('data-item-id');
      const avatarContext = context.firstElementChild;
      avatar = avatarContext.style.backgroundImage;
      code = null;
      stickied = false;
      for (j = savedGroups.length - 1; j >= 0; --j) {
        if (avatar.match(savedGroups[j].avatar)) {
          code = savedGroups[j].code;
          if (savedGroups[j].stickied) {
            stickied = true;
          }
          break;
        }
      }
      if (code) {
        if (stickied) {
          if (context === obj.separator) {
            obj.separator = obj.separator.nextElementSibling;
          }
          container.insertBefore(context, obj.separator);
        }
        new _class_Button__WEBPACK_IMPORTED_MODULE_1__["Button"](context, 'afterbegin', {
          callbacks: [this.sgg_stickyGroup.bind(this, obj, code, container, context, id), null, this.sgg_unstickyGroup.bind(this, obj, code, container, context, id), null],
          className: 'esgst-sgg-button',
          icons: ['fa-thumb-tack esgst-clickable esgst-faded', 'fa-circle-o-notch fa-spin', 'fa-thumb-tack esgst-clickable', 'fa-circle-o-notch fa-spin'],
          id: 'sgg',
          index: stickied ? 2 : 0,
          titles: ['Sticky group', 'Stickying...', 'Unsticky group', 'Unstickying...']
        });
      }
    }
  }
  async sgg_setGroups(context, main, source, endless) {
    const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .table__row-inner-wrap, .esgst-es-page-${endless}.table__row-inner-wrap` : '.table__row-inner-wrap'}`);
    if (!elements.length) return;
    const savedGroups = JSON.parse(getValue('groups', '[]'));
    for (let i = 0, n = elements.length; i < n; i++) {
      let element = elements[i];
      let avatar = element.getElementsByClassName('table_image_avatar')[0].style.backgroundImage;
      let stickied = false;
      let code = null;
      for (let j = savedGroups.length - 1; j >= 0; j--) {
        if (!avatar.match(savedGroups[j].avatar)) {
          continue;
        }
        code = savedGroups[j].code;
        if (savedGroups[j].stickied) {
          stickied = true;
        }
        break;
      }
      if (!code) {
        continue;
      }
      new _class_Button__WEBPACK_IMPORTED_MODULE_1__["Button"](element, 'afterbegin', {
        callbacks: [this.sgg_stickyGroup.bind(this, {}, code, null, element, null), null, this.sgg_unstickyGroup.bind(this, {}, code, null, element, null), null],
        className: 'esgst-sgg-button',
        icons: ['fa-thumb-tack esgst-clickable esgst-faded', 'fa-circle-o-notch fa-spin', 'fa-thumb-tack esgst-clickable', 'fa-circle-o-notch fa-spin'],
        id: 'sgg',
        index: stickied ? 2 : 0,
        titles: ['Sticky group', 'Stickying...', 'Unsticky group', 'Unstickying...']
      });
    }
  }
  async sgg_stickyGroup(obj, code, container, context, id, event) {
    event.stopPropagation();
    if (container) {
      if (context === obj.separator) {
        obj.separator = obj.separator.nextElementSibling;
      }
      container.insertBefore(context, obj.separator);
    }
    let groups = {};
    groups[code] = {
      stickied: true
    };
    if (id) {
      groups[code].id = id;
    }
    await lockAndSaveGroups(groups);
    return true;
  }
  async sgg_unstickyGroup(obj, code, container, context, id, event) {
    event.stopPropagation();
    if (container) {
      container.insertBefore(context, obj.separator);
      obj.separator = obj.separator.previousElementSibling;
    }
    let groups = {};
    groups[code] = {
      stickied: false
    };
    if (id) {
      groups[code].id = id;
    }
    await lockAndSaveGroups(groups);
    return true;
  }
}
const giveawaysStickiedGiveawayGroups = new GiveawaysStickiedGiveawayGroups();


/***/ }),
/* 391 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsMultiReply", function() { return commentsMultiReply; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(207);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(132);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(216);









class CommentsMultiReply extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Replaces SteamGifts' native comment box (in any page) with a comment box that allows you to reply to multiple comments at the same time and does not reload the page after submitting a reply (submitting a comment that is not a reply to another comment still reloads the page).")),
      id: 'mr',
      name: 'Multi-Reply',
      sg: true,
      st: true,
      type: 'comments',
      featureMap: {
        endless: this.mr_getButtons.bind(this)
      }
    };
  }
  mr_getButtons(context, main, source, endless) {
    if ((!_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('mr') || _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.isCurrentPath('Messages')) && (!_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('rfi') || !_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.isCurrentPath('Messages') && main)) return;
    const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .comment__actions, .esgst-es-page-${endless}.comment__actions` : '.comment__actions'}, ${endless ? `.esgst-es-page-${endless} .action_list, .esgst-es-page-${endless}.action_list` : '.action_list'}`);
    for (let i = 0, n = elements.length; i < n; ++i) {
      this.mr_addButton(elements[i], main);
    }
  }
  mr_addButton(Context, main) {
    let MR = {};
    MR.Context = Context;
    MR.Comment = Context.closest(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? '.comment' : '.comment_outer');
    let Parent, ReplyButton, Permalink;
    if (MR.Comment) {
      Parent = MR.Comment.closest(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? '.comment' : '.comment_outer');
      MR.Container = /** @type {HTMLElement} */MR.Comment.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'comment__summary' : 'comment_inner')[0];
      MR.Timestamp = /** @type {HTMLElement} */MR.Context.firstElementChild;
      ReplyButton = MR.Context.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'js__comment-reply' : 'js_comment_reply')[0];
      Permalink = MR.Context.querySelectorAll(`[href*="/go/comment/"]`);
      Permalink = Permalink[Permalink.length - 1];
      if (ReplyButton || !main || _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.isCurrentPath('Messages')) {
        if (ReplyButton) {
          ReplyButton.remove();
          MR.ParentID = Parent.getAttribute(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'data-comment-id' : 'data-id');
          if (!main || _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.isCurrentPath('Messages')) {
            MR.URL = Permalink.getAttribute('href');
          }
          MR.url = Permalink.getAttribute('href');
        } else {
          MR.url = MR.URL = Permalink.getAttribute('href');
          _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(MR.Comment, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
            className: "comment__children comment_children"
          }));
        }
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg) {
          MR.TradeCode = '';
          MR.Username = MR.Comment.getElementsByClassName('comment__username')[0].textContent;
        } else {
          if (main && !_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.isCurrentPath('Messages')) {
            MR.TradeCode = window.location.pathname.match(/^\/trade\/(.+?)\//)[1];
          }
          MR.Username = MR.Comment.getElementsByClassName('author_name')[0].textContent;
        }
        _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(MR.Timestamp, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
          className: "comment__actions__button esgst-mr-reply"
        }, "Reply"));
        MR.Timestamp.nextElementSibling.addEventListener('click', () => {
          if (!MR.Box) {
            this.mr_addBox(MR);
          } else {
            MR.Description.focus();
          }
        });
      }
      MR.Children = /** @type {HTMLElement} */MR.Comment.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'comment__children' : 'comment_children')[0];
      this.mr_setEdit(MR);
      this.mr_setDelete(MR);
      this.mr_setUndelete(MR);
    }
  }
  mr_addBox(MR) {
    let Username;
    Username = _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('username');
    const basicFragments = _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("input", {
      name: "trade_code",
      type: "hidden",
      value: MR.TradeCode
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("input", {
      name: "parent_id",
      type: "hidden",
      value: MR.ParentID
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("textarea", {
      className: "esgst-mr-description",
      name: "description",
      placeholder: `Write a reply to ${MR.Username}...`
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
      className: "align-button-container btn_actions"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", null), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
      className: "comment__cancel-button btn_cancel esgst-mr-cancel"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", null, "Cancel"))));
    const fragmentChildren = [];
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg) {
      fragmentChildren.push(_class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
        className: "comment__child"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        className: "global__image-outer-wrap global__image-outer-wrap--avatar-small",
        href: `/user/${Username}`
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
        className: "global__image-inner-wrap",
        style: `background-image: url(${_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('avatar')});`
      })), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
        className: "comment__summary"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
        className: "comment__author"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
        className: "comment__username"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: `/user/${Username}`
      }, Username))), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
        className: "comment__display-state"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
        className: "comment__description"
      }, basicFragments)))));
    } else {
      fragmentChildren.push(basicFragments);
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(MR.Children, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
      className: "comment reply_form MRBox"
    }, fragmentChildren));
    MR.Box = MR.Children.firstElementChild;
    MR.Description = MR.Box.getElementsByClassName('esgst-mr-description')[0];
    MR.Cancel = MR.Box.getElementsByClassName('esgst-mr-cancel')[0];
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('cfh')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.commentsCommentFormattingHelper.cfh_addPanel(MR.Description);
    }
    MR.Description.focus();
    _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.addReplyButton(MR.Box, MR.URL, async (id, Response, DEDStatus) => {
      let Reply;
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg) {
        if (id) {
          Reply = Response.html.getElementById(id).closest('.comment');
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('rfi') && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('rfi_s')) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.commentsReplyFromInbox.rfi_saveReply(id, Reply.outerHTML, MR.url);
          }
          _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.commentsReplyMentionLink.rml_addLink(MR.Container, [Reply]);
          await _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.endless_load(Reply);
          MR.Box.remove();
          MR.Box = null;
          MR.Children.appendChild(Reply);
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('qiv') && (!_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.qiv.comments || !_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.qiv.comments.contains(Reply))) {
            window.location.hash = id;
          }
        } else {
          _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(DEDStatus, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
            className: "fa fa-times"
          }), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", null, "Failed!")));
        }
      } else {
        if (id) {
          Reply = _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].parse(Response.json.html).getElementById(id);
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('rfi') && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('rfi_s')) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.commentsReplyFromInbox.rfi_saveReply(id, Reply.outerHTML, MR.url);
          }
          _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.commentsReplyMentionLink.rml_addLink(MR.Container, [Reply]);
          await _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.endless_load(Reply);
          MR.Box.remove();
          MR.Box = null;
          MR.Children.appendChild(Reply);
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('qiv') && (!_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.qiv.comments || !_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.qiv.comments.contains(Reply))) {
            window.location.hash = id;
          }
        } else {
          _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(DEDStatus, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
            className: "fa fa-times"
          }), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", null, "Failed!")));
        }
      }
    });
    MR.Cancel.addEventListener('click', () => {
      MR.Box.remove();
      MR.Box = null;
    });
  }
  mr_setEdit(MR) {
    let DisplayState, EditState, EditSave, ID, AllowReplies, Description;
    MR.Edit = MR.Context.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'js__comment-edit' : 'js_comment_edit')[0];
    if (MR.Edit) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(MR.Edit, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        className: "comment__actions__button esgst-mr-edit"
      }, "Edit"));
      MR.Edit = MR.Edit.nextElementSibling;
      MR.Edit.previousElementSibling.remove();
      DisplayState = MR.Comment.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'comment__display-state' : 'comment_body_default')[0];
      EditState = MR.Comment.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'comment__edit-state' : 'edit_form')[0];
      EditSave = EditState.querySelector(`.js__comment-edit-save, .js_submit, .EditSave`);
      _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(EditSave, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        className: "comment__submit-button btn_action white EditSave"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-edit"
      }), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", null, "Edit")));
      EditSave = EditSave.nextElementSibling;
      EditSave.previousElementSibling.remove();
      ID = EditState.querySelector(`[name="comment_id"]`).value;
      AllowReplies = _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? EditState.querySelector(`[name="allow_replies"]`).value : '';
      Description = EditState.querySelector(`[name="description"]`);
      MR.Edit.addEventListener('click', () => {
        let Temp;
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg) {
          DisplayState.classList.add('is-hidden');
          MR.Context.classList.add('is-hidden');
        } else {
          MR.Container.classList.add('is_hidden');
        }
        EditState.classList.remove(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'is-hidden' : 'is_hidden');
        Temp = Description.value;
        Description.focus();
        Description.value = '';
        Description.value = Temp;
      });
      EditSave.addEventListener('click', async () => {
        let ResponseJSON, ResponseHTML;
        const obj = {
          comment: Description.value
        };
        await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_2__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_8__["Events"].BEFORE_COMMENT_SUBMIT, obj);
        ResponseJSON = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__["FetchRequest"].post('/ajax.php', {
          data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_5__["Session"].xsrfToken}&do=comment_edit&comment_id=${ID}&allow_replies=${AllowReplies}&description=${encodeURIComponent(obj.comment)}`
        })).json;
        if (ResponseJSON.type === 'success' || ResponseJSON.success) {
          ResponseHTML = _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].parse(ResponseJSON[_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'comment' : 'html']);
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('rfi') && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('rfi_s')) {
            let reply = MR.Comment.cloneNode(true);
            if (_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg) {
              _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(reply, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
                className: "ajax comment__child"
              }, Array.from(ResponseHTML.body.childNodes).map(x => x.cloneNode(true))), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
                className: "comment__children"
              })));
            } else {
              _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(reply, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, Array.from(ResponseHTML.body.childNodes).map(x => x.cloneNode(true)), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
                className: "comment__children"
              })));
            }
            await _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.commentsReplyFromInbox.rfi_saveReply(MR.url.match(/\/comment\/(.+)/)[1], reply.outerHTML, null, true);
          }
          _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(DisplayState, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, Array.from(ResponseHTML.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'comment__display-state' : 'comment_body_default')[0].childNodes)));
          EditState.classList.add(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'is-hidden' : 'is_hidden');
          _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(MR.Timestamp, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, Array.from(ResponseHTML.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'comment__actions' : 'action_list')[0].firstElementChild.childNodes)));
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('at')) {
            _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.generalAccurateTimestamp.at_getTimestamps(MR.Timestamp);
          }
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('ged')) {
            await _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.ged_addIcons([{
              actions: MR.Container.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'comment__actions' : 'action_list')[0],
              displayState: DisplayState,
              comment: MR.Container,
              id: MR.url.match(/\/comment\/(.+)/)[1]
            }]);
          }
          if (_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg) {
            DisplayState.classList.remove('is-hidden');
            MR.Context.classList.remove('is-hidden');
          } else {
            MR.Container.classList.remove('is_hidden');
          }
        }
      });
    }
  }
  mr_setDelete(mr) {
    let allowReplies, data, id;
    mr.delete = mr.Context.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'js__comment-delete' : 'js_comment_delete')[0];
    if (mr.delete) {
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg) {
        allowReplies = mr.delete.parentElement.querySelector(`[name="allow_replies"]`).value;
        id = mr.delete.parentElement.querySelector(`[name="comment_id"]`).value;
        data = `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_5__["Session"].xsrfToken}&do=comment_delete&allow_replies=${allowReplies}&comment_id=${id}`;
      } else {
        data = mr.delete.getAttribute('data-form');
      }
      _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(mr.delete, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        className: "comment__actions__button esgst-mr-delete"
      }, "Delete"));
      mr.delete = mr.delete.nextElementSibling;
      mr.delete.previousElementSibling.remove();
      mr.delete.addEventListener('click', async () => {
        // noinspection JSIgnoredPromiseFromCall
        this.mr_editReply(mr, await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__["FetchRequest"].post('/ajax.php', {
          data
        }));
      });
    }
  }
  mr_setUndelete(mr) {
    let allowReplies, data, id;
    mr.undelete = mr.Context.getElementsByClassName(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'js__comment-undelete' : 'js_comment_undelete')[0];
    if (mr.undelete) {
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg) {
        allowReplies = mr.undelete.parentElement.querySelector(`[name="allow_replies"]`).value;
        id = mr.undelete.parentElement.querySelector(`[name="comment_id"]`).value;
        data = `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_5__["Session"].xsrfToken}&do=comment_undelete&allow_replies=${allowReplies}&comment_id=${id}`;
      } else {
        data = mr.undelete.getAttribute('data-form');
      }
      _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(mr.undelete, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        className: "comment__actions__button esgst-mr-undelete"
      }, "Undelete"));
      mr.undelete = mr.undelete.nextElementSibling;
      mr.undelete.previousElementSibling.remove();
      mr.undelete.addEventListener('click', async () => {
        // noinspection JSIgnoredPromiseFromCall
        this.mr_editReply(mr, await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_3__["FetchRequest"].post('/ajax.php', {
          data
        }));
      });
    }
  }
  async mr_editReply(mr, response) {
    let responseHtml, responseJson;
    responseJson = response.json;
    if (responseJson.type === 'success' || responseJson.success) {
      responseHtml = _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].parse(responseJson[_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg ? 'comment' : 'html']);
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(mr.Container, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, Array.from(responseHtml.getElementsByClassName('comment__summary')[0].childNodes)));
      } else {
        _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(mr.Container, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, Array.from(responseHtml.getElementsByClassName('comment_inner')[0].childNodes)));
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('rfi') && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('rfi_s')) {
        let reply = mr.Comment.cloneNode(true);
        if (_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.sg) {
          _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(reply, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
            className: "ajax comment__child"
          }, Array.from(responseHtml.body.childNodes)), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
            className: "comment__children"
          })));
        } else {
          _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(reply, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, Array.from(responseHtml.body.childNodes), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("div", {
            className: "comment__children"
          })));
        }
        await _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.commentsReplyFromInbox.rfi_saveReply(mr.url.match(/\/comment\/(.+)/)[1], reply.outerHTML, null, true);
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.endless_load(mr.Container);
    }
  }
}
const commentsMultiReply = new CommentsMultiReply();


/***/ }),
/* 392 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsReplyFromInbox", function() { return commentsReplyFromInbox; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





class CommentsReplyFromInbox extends _class_Module__WEBPACK_IMPORTED_MODULE_1__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a \"Reply\" link next to a comment's \"Permalink\" (in your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/messages"
      }, "inbox"), " page) that allows you to reply to the comment directly from your inbox."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "It is essentially ", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("span", {
        "data-esgst-feature-id": "mr"
      }), " for the inbox page.")),
      features: {
        rfi_s: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Caches any replies you submit for 1 week so that they are still in your inbox page when you refresh it."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "If you edit/delete/undelete a saved reply its cache is updated and lasts 1 week longer.")),
          name: 'Cache replies.',
          sg: true,
          st: true
        },
        rfi_c: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Whenever you try to submit a reply to a comment, the feature will check if there are other replies to that comment and show them to you so that you can review your reply before sending it."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "This option is useful if you want to avoid repeating something that another user already said or discard your reply if someone else already said everything that you were going to say.")),
          name: 'Check if there are other replies to a comment before submitting a reply.',
          sg: true,
          st: true
        }
      },
      id: 'rfi',
      name: 'Reply From Inbox',
      sg: true,
      st: true,
      type: 'comments'
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_3__["Settings"].get('mr')) return;
    _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.endlessFeatures.push(_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.modules.commentsMultiReply.mr_getButtons.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.modules.commentsMultiReply));
  }
  async rfi_saveReply(id, reply, url, edit) {
    //Logger.info(id, reply, url, edit);
    let i, n, source, saved;
    if (url) {
      source = url.match(/\/comment\/(.+)/)[1];
    }
    saved = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].common.getValue(`${_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.name}RfiCache`, '{}'));
    if (edit) {
      for (const key in saved) {
        if (saved.hasOwnProperty(key)) {
          for (i = 0, n = saved[key].length; i < n && saved[key][i].id !== id; ++i) {}
          if (i < n) {
            saved[key][i].reply = reply;
            saved[key][i].timestamp = Date.now();
          }
        }
      }
    } else {
      if (!saved[source]) {
        saved[source] = [];
      }
      saved[source].push({
        id: id,
        reply: reply,
        timestamp: Date.now()
      });
    }
    await _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].common.setValue(`${_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.name}RfiCache`, JSON.stringify(saved));
  }
  async rfi_getReplies(comments, endless) {
    let children,
      comment,
      i,
      id,
      j,
      key,
      n,
      numReplies,
      saved,
      edited = false;
    saved = JSON.parse(_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].common.getValue(`${_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.name}RfiCache`, '{}'));
    for (i = 0, n = comments.length; i < n; ++i) {
      comment = comments[i];
      id = comment.id;
      if (id && saved[id]) {
        children = comment.comment.closest(`.comment, .comment_outer`).querySelector(`.comment__children, .comment_children`);
        for (j = 0, numReplies = saved[id].length; j < numReplies; ++j) {
          let dateElementContainer = _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].parse(saved[id][j].reply).body.firstElementChild;
          _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(children, 'beforeend', dateElementContainer);
          const dateElement = dateElementContainer.querySelector(`[data-timestamp]`);
          if (dateElement) {
            dateElement.textContent = _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].common.getTimeSince(saved[id][j].timestamp);
          }
        }
        children.setAttribute('data-rfi', true);
        await _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].common.endless_load(children, false, null, false, endless);
        children.removeAttribute('data-rfi');
      }
    }
    for (key in saved) {
      if (saved.hasOwnProperty(key)) {
        for (i = 0, n = saved[key].length; i < n; ++i) {
          if (Date.now() - saved[key][i].timestamp > 604800000) {
            edited = true;
            saved[key].splice(i, 1);
            i -= 1;
            n -= 1;
          }
        }
        if (!saved[key].length) {
          edited = true;
          delete saved[key];
        }
      }
    }
    if (edited) {
      await _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].common.setValue(`${_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.name}RfiCache`, JSON.stringify(saved));
    }
  }
}
const commentsReplyFromInbox = new CommentsReplyFromInbox();


/***/ }),
/* 393 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsReplyMentionLink", function() { return commentsReplyMentionLink; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




class CommentsReplyMentionLink extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a link (@user) next to a reply's \"Permalink\" (in any page) that mentions the user being replied to and links to their comment."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "This feature is useful for conversations that have very deep nesting levels, which makes it impossible to know who replied to whom.")),
      id: 'rml',
      name: 'Reply Mention Link',
      sg: true,
      st: true,
      type: 'comments',
      featureMap: {
        commentV2: this.addLinks.bind(this)
      }
    };
  }
  addLinks(comments) {
    for (const comment of comments) {
      this.addLink(comment);
      this.addLinks(comment.children);
    }
  }
  addLink(comment) {
    if (comment.parent && !comment.nodes.rmlLink) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(comment.nodes.actions, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: `#${comment.parent.data.code}`,
        className: "comment__actions__button esgst-rml-link",
        ref: ref => comment.nodes.rmlLink = ref
      }, `@${comment.data.isDeleted ? '[Deleted]' : comment.parent.author.data.username}`));
    }
  }
  rml_addLink(parent, children) {
    const authorUsername = parent.querySelector('.comment__username, .author_name').textContent.trim();
    const commentCode = parent.id;
    for (const child of children) {
      const actions = child.querySelector('.comment__actions, .action_list');
      const rmlLink = actions.querySelector('.esgst-rml-link');
      if (rmlLink) {
        rmlLink.textContent = `@${authorUsername}`;
      } else {
        _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(actions, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
          href: `#${commentCode}`,
          className: "comment__actions__button esgst-rml-link"
        }, `@${authorUsername}`));
      }
    }
  }
}
const commentsReplyMentionLink = new CommentsReplyMentionLink();


/***/ }),
/* 394 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersInboxWinnerHighlighter", function() { return usersInboxWinnerHighlighter; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(144);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);







const createElements = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_4__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_4__["common"]);
class UsersInboxWinnerHighlighter extends _class_Module__WEBPACK_IMPORTED_MODULE_3__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Adds an icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-trophy"
      }), ") next to the username of a giveaway comment made by the giveaway's winner(s) (in the", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/messages"
      }, "inbox"), " page)."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "A winner is only highlighted if you sent the gift to them after this feature was enabled.")),
      id: 'iwh',
      name: 'Inbox Winner Highlighter',
      sg: true,
      type: 'users',
      featureMap: {
        endless: this.iwh_getUsers.bind(this)
      }
    };
  }
  async iwh_getUsers(context, main, source, endless) {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.winnersPath && !_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.isCurrentPath('Messages') && (!context.getAttribute || !context.getAttribute('data-esgst-qiv'))) return;
    const [callback, query] = _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.winnersPath ? [this.iwh_setObserver, `${endless ? `.esgst-es-page-${endless} .table__gift-not-sent, .esgst-es-page-${endless}.table__gift-not-sent` : '.table__gift-not-sent'}`] : [this.iwh_highlightWinner, `${endless ? `.esgst-es-page-${endless} .comments__entity, .esgst-es-page-${endless}.comments__entity` : '.comments__entity'}`],
      elements = context.querySelectorAll(query);
    if (!elements.length) return;
    const winners = JSON.parse(getValue('winners', '{}'));
    for (let i = 0, n = elements.length; i < n; ++i) {
      callback(elements[i], winners);
    }
  }
  iwh_setObserver(Context, winners) {
    let Key, Username;
    Key = window.location.pathname.match(/\/giveaway\/(.+?)\//)[1];
    Username = Context.closest('.table__row-inner-wrap').getElementsByClassName('table__column__heading')[0].querySelector(`a[href*="/user/"]`).textContent;
    Context.addEventListener('click', async () => {
      let Winners;
      Winners = JSON.parse(getValue('winners', '{}'));
      if (!Winners[Key]) {
        Winners[Key] = [];
      }
      if (Winners[Key].indexOf(Username) < 0) {
        Winners[Key].push(Username);
      }
      setValue('winners', JSON.stringify(Winners));
    });
  }
  iwh_highlightWinner(Context, Winners) {
    let Match, Key, Matches, I, N, Username;
    Match = Context.firstElementChild.firstElementChild.getAttribute('href').match(/\/giveaway\/(.+?)\//);
    if (Match) {
      Key = Match[1];
      if (Winners[Key]) {
        Matches = Context.nextElementSibling.children;
        for (I = 0, N = Matches.length; I < N; ++I) {
          Context = Matches[I].getElementsByClassName('comment__username')[0];
          Username = Context.textContent;
          if (Winners[Key].indexOf(Username) >= 0) {
            createElements(Context, 'afterend', [{
              attributes: {
                class: 'fa fa-trophy esgst-iwh-icon',
                title: getFeatureTooltip('iwh', 'This is the winner or one of the winners of this giveaway')
              },
              type: 'i'
            }]);
          }
        }
      }
    }
  }
}
const usersInboxWinnerHighlighter = new UsersInboxWinnerHighlighter();


/***/ }),
/* 395 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersUserStats", function() { return usersUserStats; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(132);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(144);









const createElements = _Common__WEBPACK_IMPORTED_MODULE_8__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_8__["common"]);
class UsersUserStats extends _class_Module__WEBPACK_IMPORTED_MODULE_6__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds 5 columns (\"Last Online\", \"Gifts Sent\", \"Gifts Won\", \"Ratio\" and \"Contributor Value\") to your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/manage/whitelist"
      }, "whitelist"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/manage/blacklist"
      }, "blacklist"), " pages and the popup from ", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("span", {
        "data-esgst-feature-id": "wbs"
      }), " that show some stats about each user.")),
      id: 'us',
      name: 'User Stats',
      sg: true,
      type: 'users'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.isCurrentPath(['Manage - Whitelist', 'Manage - Blacklist', 'Giveaway - Entries'])) {
      return;
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.endlessFeatures.push(this.us_get.bind(this));
  }
  async us_get(context, main, source, endless) {
    if (!main && !context.closest('.esgst-wbs-popup')) {
      return;
    }
    if (context === document || !main) {
      createElements(context.getElementsByClassName('table__heading')[0].firstElementChild, 'afterend', [{
        attributes: {
          class: 'table__column--width-small text-center'
        },
        text: 'Last Online',
        type: 'div'
      }, {
        attributes: {
          class: 'table__column--width-small text-center'
        },
        text: 'Gifts Won',
        type: 'div'
      }, {
        attributes: {
          class: 'table__column--width-small text-center'
        },
        text: 'Gifts Sent',
        type: 'div'
      }, {
        attributes: {
          class: 'table__column--width-small text-center'
        },
        text: 'Ratio',
        type: 'div'
      }, {
        attributes: {
          class: 'table__column--width-small text-center'
        },
        text: 'Contributor Level',
        type: 'div'
      }]);
    }
    let users = {};
    let elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .table__row-inner-wrap, .esgst-es-page-${endless}.table__row-inner-wrap` : '.table__row-inner-wrap'}`);
    for (let i = 0, n = elements.length; i < n; ++i) {
      let element = elements[i];
      users[element.getElementsByClassName('table__column__heading')[0].textContent] = main && element.firstElementChild.nextElementSibling || element.firstElementChild;
    }
    let promises = [];
    for (let username in users) {
      if (users.hasOwnProperty(username)) {
        let promise = _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`/user/${username}`);
        promise.then(this.us_load.bind(this, users[username], username));
        promises.push(promise);
      }
      Promise.all(promises).then(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.generalTableSorter.ts_sortTables.bind(_class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.generalTableSorter));
    }
  }
  us_load(context, username, response) {
    let element, elements, html, i, n, cvrow, rows;
    html = [];
    const profile = {};
    elements = response.html.getElementsByClassName('featured__table__row__left');
    for (i = 0, n = elements.length; i < n; ++i) {
      element = elements[i];
      switch (element.textContent) {
        case 'Last Online':
          html.push({
            attributes: {
              class: 'table__column--width-small text-center'
            },
            type: 'div',
            children: Array.from(element.nextElementSibling.childNodes).map(x => {
              return {
                context: x
              };
            })
          });
          break;
        case 'Gifts Won':
          profile.wonRow = element.parentElement;
          profile.wonRowLeft = element;
          profile.wonRowRight = element.nextElementSibling;
          rows = JSON.parse(profile.wonRowRight.firstElementChild.firstElementChild.getAttribute('data-ui-tooltip')).rows;
          profile.wonCount = parseInt(rows[0].columns[1].name.replace(/,/g, ''));
          profile.wonFull = parseInt(rows[1].columns[1].name.replace(/,/g, ''));
          profile.wonReduced = parseInt(rows[2].columns[1].name.replace(/,/g, ''));
          profile.wonZero = parseInt(rows[3].columns[1].name.replace(/,/g, ''));
          cvrow = profile.wonRowRight.firstElementChild.lastElementChild;
          rows = JSON.parse(cvrow.getAttribute('data-ui-tooltip')).rows;
          profile.wonCV = parseFloat(cvrow.textContent.replace(/[$,]/g, ''));
          profile.realWonCV = parseFloat(rows[0].columns[1].name.replace(/[$,]/g, ''));
          element.nextElementSibling.firstElementChild.firstElementChild.firstElementChild.removeAttribute('style');
          html.push({
            attributes: {
              class: 'table__column--width-small text-center'
            },
            type: 'div',
            children: Array.from(element.nextElementSibling.childNodes).map(x => {
              return {
                context: x
              };
            })
          });
          break;
        case 'Gifts Sent':
          profile.sentRow = element.parentElement;
          profile.sentRowLeft = element;
          profile.sentRowRight = element.nextElementSibling;
          rows = JSON.parse(profile.sentRowRight.firstElementChild.firstElementChild.getAttribute('data-ui-tooltip')).rows;
          profile.sentCount = parseInt(rows[0].columns[1].name.replace(/,/g, ''));
          profile.sentFull = parseInt(rows[1].columns[1].name.replace(/,/g, ''));
          profile.sentReduced = parseInt(rows[2].columns[1].name.replace(/,/g, ''));
          profile.sentZero = parseInt(rows[3].columns[1].name.replace(/,/g, ''));
          profile.notSent = parseInt(rows[5].columns[1].name.replace(/,/g, ''));
          cvrow = profile.sentRowRight.firstElementChild.lastElementChild;
          rows = JSON.parse(cvrow.getAttribute('data-ui-tooltip')).rows;
          profile.sentCV = parseFloat(cvrow.textContent.replace(/[$,]/g, ''));
          profile.realSentCV = parseFloat(rows[0].columns[1].name.replace(/[$,]/g, ''));
          element.nextElementSibling.firstElementChild.firstElementChild.firstElementChild.removeAttribute('style');
          html.push({
            attributes: {
              class: 'table__column--width-small text-center'
            },
            type: 'div',
            children: Array.from(element.nextElementSibling.childNodes).map(x => {
              return {
                context: x
              };
            })
          });
          break;
        case 'Contributor Level':
          _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.usersSentWonRatio.swr_add(profile);
          html.push({
            attributes: {
              class: 'table__column--width-small text-center'
            },
            type: 'div',
            children: Array.from(profile.sentRow.nextElementSibling.lastElementChild.childNodes).map(x => {
              return {
                context: x
              };
            })
          }, {
            attributes: {
              class: 'table__column--width-small text-center'
            },
            text: parseFloat(JSON.parse(element.nextElementSibling.firstElementChild.getAttribute('data-ui-tooltip')).rows[0].columns[1].name),
            type: 'div'
          });
          break;
      }
    }
    createElements(context, 'afterend', html);
  }
}
const usersUserStats = new UsersUserStats();


/***/ }),
/* 396 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "groupsGroupHighlighter", function() { return groupsGroupHighlighter; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(144);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





const getValue = _Common__WEBPACK_IMPORTED_MODULE_2__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_2__["common"]);
class GroupsGroupHighlighter extends _class_Module__WEBPACK_IMPORTED_MODULE_1__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a green background to a group that you are a member of (in any page).")),
      id: 'gh',
      name: 'Group Highlighter',
      sg: true,
      sync: 'Steam Groups',
      syncKeys: ['Groups'],
      type: 'groups'
    };
  }
  init() {
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].common.isCurrentPath('Steam - Groups')) return;
    _class_Shared__WEBPACK_IMPORTED_MODULE_3__["Shared"].esgst.endlessFeatures.push(this.gh_highlightGroups.bind(this));
  }
  async gh_highlightGroups(context, main, source, endless) {
    const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .table__column__heading[href*="/group/"], .esgst-es-page-${endless}.table__column__heading[href*="/group/"]` : `.table__column__heading[href*="/group/"]`}`);
    if (!elements.length) return;
    const savedGroups = JSON.parse(getValue('groups', '[]'));
    for (let i = 0, n = elements.length; i < n; ++i) {
      const element = elements[i],
        code = element.getAttribute('href').match(/\/group\/(.+?)\//)[1];
      let j;
      for (j = savedGroups.length - 1; j >= 0 && savedGroups[j].code !== code; --j) {}
      if (j >= 0 && savedGroups[j].member) {
        element.closest('.table__row-outer-wrap').classList.add('esgst-gh-highlight');
      }
    }
  }
}
const groupsGroupHighlighter = new GroupsGroupHighlighter();


/***/ }),
/* 397 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayPopup", function() { return giveawaysGiveawayPopup; });
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(206);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(220);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(212);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);




const getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]);
class GiveawaysGiveawayPopup extends _class_Module__WEBPACK_IMPORTED_MODULE_1__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("i", {
        className: "fa fa-external-link"
      }), " ) below a giveaway's start time (in any page) that allows you to read the description of the giveaway and/or add a comment to it without having to access it."), _class_DOM__WEBPACK_IMPORTED_MODULE_0__["DOM"].element("li", null, "You can move the button around by dragging and dropping it.")),
      id: 'gp',
      name: 'Giveaway Popup',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.gp_addButton.bind(this)
      }
    };
  }
  gp_addButton(giveaways, main, source) {
    giveaways.forEach(giveaway => {
      if (giveaway.sgTools || main && (this.esgst.createdPath || this.esgst.enteredPath || this.esgst.wonPath || this.esgst.giveawayPath || this.esgst.newGiveawayPath)) return;
      if (!giveaway.innerWrap.getElementsByClassName('esgst-gp-button')[0] && (!giveaway.inviteOnly || giveaway.url)) {
        let button;
        const onClick = () => {
          return new Promise(resolve => {
            // noinspection JSIgnoredPromiseFromCall
            this.esgst.modules.giveawaysEnterLeaveGiveawayButton.elgb_openPopup(giveaway, main, source, error => {
              if (error) {
                button.build(3);
              } else {
                button.build(1);
              }
              resolve();
            });
          });
        };
        button = _components_Button__WEBPACK_IMPORTED_MODULE_2__["Button"].create({
          additionalContainerClass: 'esgst-gp-button',
          states: [{
            color: 'white',
            tooltip: getFeatureTooltip('gp', 'View giveaway description / add a comment'),
            icons: ['fa-external-link'],
            name: '',
            switchTo: {
              onReturn: 1
            },
            onClick
          }, {
            template: 'loading',
            isDisabled: true,
            name: ''
          }, {
            template: 'error',
            tooltip: getFeatureTooltip('gp', 'Could not access giveaway'),
            name: '',
            switchTo: {
              onReturn: 3
            },
            onClick
          }, {
            template: 'loading',
            isDisabled: true,
            name: ''
          }]
        }).insert(giveaway.panel, 'beforeend');
        button.nodes.outer.setAttribute('data-draggable-id', 'gp');
      }
    });
  }
}
const giveawaysGiveawayPopup = new GiveawaysGiveawayPopup();


/***/ }),
/* 398 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysEnterLeaveGiveawayButton", function() { return giveawaysEnterLeaveGiveawayButton; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(98);
/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(207);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(208);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(96);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(210);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(211);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(219);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(212);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(224);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(216);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(144);





















const createElements = _Common__WEBPACK_IMPORTED_MODULE_20__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_20__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_20__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_20__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_20__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_20__["common"]),
  setSetting = _Common__WEBPACK_IMPORTED_MODULE_20__["common"].setSetting.bind(_Common__WEBPACK_IMPORTED_MODULE_20__["common"]);
class GiveawaysEnterLeaveGiveawayButton extends _class_Module__WEBPACK_IMPORTED_MODULE_11__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Adds a button (\"", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-plus-circle"
      }), " Enter\" to enter and \"", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-minus-circle"
      }), " Leave\" to leave) below a giveaway's start time (in any page) that allows you to enter/leave the giveaway without having to access it."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "You can move the button around by dragging and dropping it.")),
      features: {
        elgb_b: {
          dependencies: ['gb'],
          name: 'Automatically bookmark giveaways when trying to enter them without enough points .',
          sg: true
        },
        elgb_c: {
          name: 'Cache repeated descriptions from the same creator for 1 hour and only show them once.',
          sg: true
        },
        elgb_f: {
          inputItems: [{
            id: 'elgb_filters',
            prefix: `Filters: `,
            title: `Enter only lowercase letters with no spaces and separate filters with '|'.\n\nFor example, if you want to filter out 'Good luck! No need to thank, unless you're the winner.', use the filter 'goodlucknoneedtothankunlessyourethewinner'.\n\nIf you're familiar with regular expressions, you can also use them. For example, to include a variation of the description above that uses 'you are' instead of 'you're' you could use the filter 'goodlucknoneedtothankunlessyoua?rethewinner'. 'a?' will match or not an 'a' between 'you' and 're'.\n\nThe '.' filter, for example, filters out any descriptions that only have one letter. Generic filters such as '.*' and '.+' will be ignored when applying the filters.`
          }],
          name: 'Filter descriptions.',
          sg: true
        },
        elgb_p: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Only shows the button in popups(", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
            "data-esgst-feature-id": "gb"
          }), ",", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
            "data-esgst-feature-id": "ged"
          }), ", ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
            "data-esgst-feature-id": "ge"
          }), ", etc...), so basically only for any giveaways that are loaded dynamically by ESGST.")),
          name: 'Only enable for popups.',
          sg: true
        },
        elgb_r: {
          features: {
            elgb_r_d: {
              name: 'Only pop up if the giveaway has a description.',
              sg: true
            }
          },
          name: 'Pop up a box to reply to the giveaway when entering it.',
          sg: true
        },
        elgb_fp: {
          name: `Pop up the first page of comments of the giveaway when entering it, if it has any comments.`,
          sg: true
        }
      },
      id: 'elgb',
      name: 'Enter / Leave Giveaway Button',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.elgb_addButtons.bind(this)
      }
    };
  }
  init() {
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_19__["Events"].POINTS_UPDATED, this.elgb_updateButtons.bind(this));
  }
  async elgb_addButtons(giveaways, main, source) {
    giveaways.forEach(giveaway => {
      if (giveaway.sgTools || main && (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_p') || this.esgst.createdPath || this.esgst.wonPath)) return;
      if (giveaway.innerWrap.getElementsByClassName('esgst-elgb-button')[0]) {
        return;
      }
      if (this.esgst.enteredPath && main) {
        this.elgb_setEntryButton(giveaway);
        return;
      }
      if (giveaway.blacklist || giveaway.inviteOnly && !giveaway.url || !giveaway.started || giveaway.ended || giveaway.created || giveaway.level > _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.level.base || giveaway.id && this.esgst.games[giveaway.type][giveaway.id] && (this.esgst.games[giveaway.type][giveaway.id].owned || this.esgst.games[giveaway.type][giveaway.id].won || this.esgst.games[giveaway.type][giveaway.id].hidden && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('hgebd'))) {
        return;
      }
      if (this.esgst.giveawayPath && main) {
        let sidebarButton = document.getElementsByClassName('sidebar__error is-disabled')[0];
        if (!sidebarButton || sidebarButton.textContent.trim() !== 'Not Enough Points') {
          return;
        }
        giveaway.elgbPanel = createElements(sidebarButton.parentElement, 'afterbegin', [{
          type: 'div'
        }]);
        sidebarButton.remove();
        this.elgb_addButton(giveaway, main, source);
      } else {
        this.elgb_addButton(giveaway, main, source);
      }
    });
  }
  elgb_setEntryButton(giveaway) {
    let button = giveaway.outerWrap.getElementsByClassName('table__remove-default')[0];
    if (!button) return;
    let form = button.parentElement;
    let errorButton = createElements(form.parentElement, 'beforeend', [{
      attributes: {
        class: 'esgst-clickable esgst-hidden',
        title: getFeatureTooltip('elgb')
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'fa fa-plus-circle esgst-green'
        },
        type: 'i'
      }, {
        attributes: {
          class: 'table__column__secondary-link'
        },
        text: 'Add',
        type: 'span'
      }]
    }, {
      attributes: {
        class: 'esgst-clickable',
        title: getFeatureTooltip('elgb')
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'fa fa-times-circle esgst-red'
        },
        type: 'i'
      }, {
        attributes: {
          class: 'table__column__secondary-link'
        },
        text: 'Remove',
        type: 'span'
      }]
    }, {
      attributes: {
        class: 'esgst-hidden',
        title: getFeatureTooltip('elgb')
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'fa fa-refresh fa-spin'
        },
        type: 'i'
      }, {
        text: 'Adding...',
        type: 'span'
      }]
    }, {
      attributes: {
        class: 'esgst-hidden',
        title: getFeatureTooltip('elgb')
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'fa fa-refresh fa-spin'
        },
        type: 'i'
      }, {
        text: 'Removing...',
        type: 'span'
      }]
    }, {
      attributes: {
        class: 'esgst-hidden',
        title: getFeatureTooltip('elgb')
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'fa fa-exclamation esgst-red'
        },
        type: 'i'
      }, {
        text: 'Error',
        type: 'span'
      }]
    }]);
    let removingButton = errorButton.previousElementSibling;
    let addingButton = removingButton.previousElementSibling;
    let removeButton = addingButton.previousElementSibling;
    let addButton = removeButton.previousElementSibling;
    addButton.addEventListener('click', this.elgb_addEntry.bind(this, addButton, addingButton, errorButton, giveaway, removeButton));
    removeButton.addEventListener('click', this.elgb_removeEntry.bind(this, addButton, errorButton, giveaway, removeButton, removingButton));
    form.remove();
  }
  async elgb_addEntry(addButton, addingButton, errorButton, giveaway, removeButton) {
    addButton.classList.add('esgst-hidden');
    addingButton.classList.remove('esgst-hidden');
    try {
      let responseJson = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].post('/ajax.php', {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].xsrfToken}&do=entry_insert&code=${giveaway.code}`,
        doNotQueue: true
      })).json;
      if (responseJson.type === 'success') {
        removeButton.classList.remove('esgst-hidden');
      } else {
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_b') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gb') && giveaway.gbButton && giveaway.gbButton.index === 1) {
          // noinspection JSIgnoredPromiseFromCall
          giveaway.gbButton.change(giveaway.gbButton.callbacks[0]);
        }
        errorButton.classList.remove('esgst-hidden');
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].header.updatePoints(responseJson.points);
    } catch (e) {
      errorButton.classList.remove('esgst-hidden');
    }
    addingButton.classList.add('esgst-hidden');
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('et')) {
      // noinspection JSIgnoredPromiseFromCall
      this.esgst.modules.giveawaysEntryTracker.et_setEntry(giveaway.code, true, giveaway.name);
    }
  }
  async elgb_removeEntry(addButton, errorButton, giveaway, removeButton, removingButton) {
    removeButton.classList.add('esgst-hidden');
    removingButton.classList.remove('esgst-hidden');
    try {
      let responseJson = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].post('/ajax.php', {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].xsrfToken}&do=entry_delete&code=${giveaway.code}`,
        doNotQueue: true
      })).json;
      if (responseJson.type === 'success') {
        addButton.classList.remove('esgst-hidden');
      } else {
        errorButton.classList.remove('esgst-hidden');
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].header.updatePoints(responseJson.points);
    } catch (e) {
      errorButton.classList.remove('esgst-hidden');
    }
    removingButton.classList.add('esgst-hidden');
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('et')) {
      // noinspection JSIgnoredPromiseFromCall
      this.esgst.modules.giveawaysEntryTracker.et_setEntry(giveaway.code, false, giveaway.name);
    }
  }
  elgb_addButton(giveaway, main, source) {
    if (!giveaway.elgbButton) {
      giveaway.elgbButton = _components_Button__WEBPACK_IMPORTED_MODULE_17__["Button"].create({
        additionalContainerClass: 'esgst-elgb-button',
        states: [{
          color: 'green',
          icons: ['fa-plus-circle'],
          name: 'Enter',
          onClick: () => {
            return new Promise(resolve => this.elgb_enterGiveaway(giveaway, main, null, source, resolve));
          }
        }, {
          template: 'loading',
          isDisabled: true,
          name: 'Entering...'
        }, {
          color: 'yellow',
          icons: ['fa-minus-circle'],
          name: 'Leave',
          switchTo: {
            onReturn: 1
          },
          onClick: () => {
            return new Promise(resolve => this.elgb_leaveGiveaway(giveaway, main, source, resolve));
          }
        }, {
          template: 'loading',
          isDisabled: true,
          name: 'Leaving...'
        }, {
          color: 'red',
          icons: ['fa-plus-circle'],
          name: 'Enter',
          switchTo: {
            onClick: 2
          },
          onClick: () => {
            return new Promise(resolve => this.elgb_enterGiveaway(giveaway, main, null, source, resolve));
          }
        }]
      });
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gv') && (main && this.esgst.giveawaysPath || source === 'gb' && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gv_gb') || source === 'ged' && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gv_ged') || source === 'ge' && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gv_ge'))) {
        giveaway.elgbButton.insert(giveaway.elgbPanel, 'afterbegin');
      } else {
        giveaway.elgbButton.insert(giveaway.elgbPanel, 'beforeend');
      }
      giveaway.elgbButton.nodes.outer.setAttribute('data-draggable-id', 'elgb');
    }
    const style = giveaway.elgbButton.nodes.outer.getAttribute('style');
    if (giveaway.entered) {
      giveaway.elgbButton.build(3);
      giveaway.elgbButton.setTooltip('');
    } else if (giveaway.error) {
      giveaway.elgbButton.build(5);
      giveaway.elgbButton.setTooltip(giveaway.error);
    } else {
      if (giveaway.points <= _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.points) {
        giveaway.elgbButton.build(1);
        giveaway.elgbButton.setTooltip('');
      } else {
        giveaway.elgbButton.build(5);
        giveaway.elgbButton.setTooltip('Not Enough Points');
      }
    }
    giveaway.elgbButton.nodes.outer.setAttribute('style', style);
  }
  async elgb_openPopup(giveaway, main, source, mainCallback) {
    let headingButton;
    let popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_12__["Popup"]({
      addScrollable: true,
      isTemp: true,
      name: 'elgb'
    });
    const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_18__["PageHeading"].create('elgb', [{
      name: giveaway.creator,
      url: `/user/${giveaway.creator}`
    }, {
      name: giveaway.name,
      url: giveaway.url
    }]).insert(popup.description, 'afterbegin');
    const scope = _class_Scope__WEBPACK_IMPORTED_MODULE_13__["Scope"].find(popup.id);
    if (scope) {
      scope.sourceLink = heading.nodes.breadcrumbs[1];
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cf') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cf_m') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mm')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cf') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cf_m')) {
        heading.nodes.outer.appendChild(this.esgst.modules.commentsCommentFilters.filters_addContainer(heading.nodes.outer, 'Elgb'));
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('mm')) {
        this.esgst.modules.generalMultiManager.mm(heading.nodes.outer);
      }
    }
    if (giveaway.entered) {
      _components_Button__WEBPACK_IMPORTED_MODULE_17__["Button"].create([{
        color: 'yellow',
        icons: ['fa-minus-circle'],
        name: 'Leave Giveaway',
        onClick: () => {
          return new Promise(resolve => {
            // noinspection JSIgnoredPromiseFromCall
            this.elgb_leaveGiveaway(giveaway, main, source, () => {
              resolve();
              popup.close();
            });
          });
        }
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Leaving...'
      }]).insert(heading.nodes.outer, 'beforeend');
    } else {
      let games = JSON.parse(getValue('games'));
      if (giveaway.started && !giveaway.ended && !giveaway.created && giveaway.level <= _class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].counters.level.base && (giveaway.id && (games[giveaway.type][giveaway.id] && !games[giveaway.type][giveaway.id].owned && (!games[giveaway.type][giveaway.id].hidden || !_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('hgebd')) || !games[giveaway.type][giveaway.id]) || !giveaway.id)) {
        _components_Button__WEBPACK_IMPORTED_MODULE_17__["Button"].create([{
          color: 'green',
          icons: ['fa-plus-circle'],
          name: 'Enter Giveaway',
          onClick: () => {
            return new Promise(resolve => {
              // noinspection JSIgnoredPromiseFromCall
              this.elgb_enterGiveaway(giveaway, main, true, source, () => {
                resolve();
                popup.close();
              });
            });
          }
        }, {
          template: 'loading',
          isDisabled: true,
          name: 'Entering...'
        }]).insert(heading.nodes.outer, 'beforeend');
      }
    }
    let description = null;
    let responseHtml = null;
    if (!(_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_c') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_f') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_r') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_r_d') || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_fp')) || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_f') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_filters') === '.*') {
      return;
    }
    responseHtml = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(giveaway.url, {
      doNotQueue: true
    })).html;
    if (mainCallback && !responseHtml.getElementsByClassName('featured__outer-wrap--giveaway')[0]) {
      mainCallback(true);
      return;
    }
    description = responseHtml.getElementsByClassName('page__description')[0];
    if (description && description.textContent.trim() && !mainCallback) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_c')) {
        if (Date.now() - this.esgst.elgbCache.timestamp > 3600000) {
          this.esgst.elgbCache = {
            descriptions: {},
            timestamp: Date.now()
          };
          _class_LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].set('elgbCache', JSON.stringify(this.esgst.elgbCache));
        }
        if (!this.esgst.elgbCache.descriptions[giveaway.creator]) {
          this.esgst.elgbCache.descriptions[giveaway.creator] = [];
        }
        let html = description.innerHTML;
        let i;
        for (i = this.esgst.elgbCache.descriptions[giveaway.creator].length - 1; i > -1 && this.esgst.elgbCache.descriptions[giveaway.creator][i] !== html; --i) {}
        if (i > -1) {
          description = null;
        } else {
          this.esgst.elgbCache.descriptions[giveaway.creator].push(html);
          _class_LocalStorage__WEBPACK_IMPORTED_MODULE_9__["LocalStorage"].set('elgbCache', JSON.stringify(this.esgst.elgbCache));
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_f')) {
            let text = description.textContent.replace(/[^a-zA-Z]/g, '').toLowerCase();
            if (text.match(new RegExp(`^(${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_filters')})$`))) {
              description = null;
            }
          }
        }
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_f')) {
        let text = description.textContent.replace(/[^a-zA-Z]/g, '').toLowerCase();
        if (text.match(new RegExp(`^(${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_filters')})$`))) {
          description = null;
        }
      }
    }
    if (description) {
      description.classList.add('esgst-text-left');
      createElements(popup.scrollable, 'beforeend', [{
        context: description
      }]);
    }
    let box = null;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_r') && (!_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_r_d') || description) || mainCallback) {
      box = createElements(popup.scrollable, 'beforeend', [{
        type: 'textarea'
      }]);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cfh')) {
        this.esgst.modules.commentsCommentFormattingHelper.cfh_addPanel(box);
      }
      _components_Button__WEBPACK_IMPORTED_MODULE_17__["Button"].create([{
        color: 'green',
        icons: ['fa-arrow-circle-right'],
        name: 'Add Comment',
        onClick: async () => {
          if (box.value) {
            await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].post(giveaway.url, {
              data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].xsrfToken}&do=comment_new&description=${box.value}`
            });
          }
          popup.close();
        }
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Saving...'
      }]).insert(popup.scrollable, 'beforeend');
    }
    if (description && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_f')) {
      const button = _components_Button__WEBPACK_IMPORTED_MODULE_17__["Button"].create([{
        color: 'alternate-white',
        tooltip: 'Add Description To Filters',
        icons: ['fa-eye'],
        onClick: async () => {
          await setSetting('elgb_filters', `${_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_filters')}|${description.textContent.replace(/[^a-zA-Z]/g, '').toLowerCase()}`);
          button.destroy();
        }
      }, {
        template: 'loading',
        isDisabled: true,
        name: 'Filtering...'
      }]).insert(heading.nodes.outer.lastElementChild, 'beforebegin');
    }
    let commentsContainer = responseHtml.querySelector('.comments');
    if (commentsContainer && commentsContainer.children.length) {
      let preset = null;
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cf') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cf_m') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cf_enableElgb')) {
        const name = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cf_presetElgb');
        if (name) {
          preset = _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('cf_presets').filter(x => x.name === name)[0];
        }
      }
      if (preset) {
        let filteredComments = 0;
        const filters = _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.commentsCommentFilters.getFilters();
        const comments = await _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.comments.comments_get(commentsContainer.parentElement, responseHtml);
        for (const comment of comments) {
          if (!_class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.modules.commentsCommentFilters.filters_filterItem(filters, comment, preset.rules)) {
            filteredComments += 1;
          }
        }
        if (filteredComments === comments.length) {
          commentsContainer = null;
        }
      }
    }
    if (commentsContainer && commentsContainer.children.length) {
      commentsContainer.classList.add('esgst-text-left', 'esgst-hidden');
      createElements(popup.scrollable, 'beforeend', [{
        context: commentsContainer
      }]);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_fp') || mainCallback) {
        commentsContainer.classList.remove('esgst-hidden');
        _Common__WEBPACK_IMPORTED_MODULE_20__["common"].endless_load(popup.scrollable);
      } else {
        const commentButton = _components_Button__WEBPACK_IMPORTED_MODULE_17__["Button"].create({
          color: 'alternate-white',
          tooltip: 'Show First Page Comments',
          icons: ['fa-comments'],
          onClick: () => {
            commentButton.destroy();
            commentsContainer.classList.remove('esgst-hidden');
            _Common__WEBPACK_IMPORTED_MODULE_20__["common"].endless_load(popup.scrollable);
          }
        }).insert(heading.nodes.outer.lastElementChild, 'beforebegin');
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_fp') && commentsContainer && commentsContainer.children.length || description || _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_r') && (!_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_r_d') || description) || mainCallback) {
      if (mainCallback) {
        popup.onClose = mainCallback;
      }
      popup.open(() => {
        if (box) {
          box.focus();
        }
      });
    }
  }
  async elgb_enterGiveaway(giveaway, main, popup, source, callback) {
    let responseJson = null;
    try {
      responseJson = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].post('/ajax.php', {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].xsrfToken}&do=entry_insert&code=${giveaway.code}`,
        doNotQueue: true
      })).json;
    } catch (e) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_10__["Logger"].warning(e.message, e.stack);
      _class_Logger__WEBPACK_IMPORTED_MODULE_10__["Logger"].info(giveaway.code);
    }
    if (!responseJson) {
      return;
    }
    if (responseJson.type === 'success') {
      if (!this.esgst.giveawayPath || !main) {
        giveaway.innerWrap.classList.add('is-faded');
      }
      giveaway.entered = true;
      _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_19__["Events"].GIVEAWAY_ENTER, giveaway);
      giveaway.error = null;
      this.elgb_addButton(giveaway, main, source);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('et')) {
        // noinspection JSIgnoredPromiseFromCall
        this.esgst.modules.giveawaysEntryTracker.et_setEntry(giveaway.code, true, giveaway.name);
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].header.updatePoints(responseJson.points);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('egh')) {
        // noinspection JSIgnoredPromiseFromCall
        this.esgst.modules.gamesEnteredGameHighlighter.egh_saveGame(giveaway.id, giveaway.type);
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gb') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gb_ue') && giveaway.gbButton) {
        if (giveaway.gbButton.index === 3) {
          // noinspection JSIgnoredPromiseFromCall
          giveaway.gbButton.change(giveaway.gbButton.callbacks[2]);
        }
        if (!_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gb_se')) {
          giveaway.gbButton.button.classList.add('esgst-hidden');
        }
      }
      if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gf && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(`gf_enable${this.esgst.gf.type}`)) {
        this.esgst.modules.giveawaysGiveawayFilters.filters_filter(this.esgst.gf);
      }
      if ((!main || this.esgst.parameters.esgst) && this.esgst.gfPopup && this.esgst.gfPopup.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(`gf_enable${this.esgst.gfPopup.type}`)) {
        this.esgst.modules.giveawaysGiveawayFilters.filters_filter(this.esgst.gfPopup);
      }
      if (callback) {
        callback();
      }
      if (!popup && (!this.esgst.giveawayPath || !main)) {
        // noinspection JSIgnoredPromiseFromCall
        this.elgb_openPopup(giveaway, main, source);
      }
    } else {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('elgb_b') && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gb') && giveaway.gbButton && giveaway.gbButton.index === 1) {
        // noinspection JSIgnoredPromiseFromCall
        giveaway.gbButton.change(giveaway.gbButton.callbacks[0]);
      }
      giveaway.entered = false;
      giveaway.error = responseJson.msg;
      this.elgb_addButton(giveaway, main, source);
      if (callback) {
        callback();
      }
    }
  }
  async elgb_leaveGiveaway(giveaway, main, source, callback) {
    let responseJson = null;
    try {
      responseJson = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].post('/ajax.php', {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_14__["Session"].xsrfToken}&do=entry_delete&code=${giveaway.code}`,
        doNotQueue: true
      })).json;
    } catch (e) {
      _class_Logger__WEBPACK_IMPORTED_MODULE_10__["Logger"].warning(e.message, e.stack);
      _class_Logger__WEBPACK_IMPORTED_MODULE_10__["Logger"].info(giveaway.code);
    }
    if (!responseJson) {
      return;
    }
    if (responseJson.type === 'success') {
      giveaway.innerWrap.classList.remove('is-faded');
      giveaway.entered = false;
      _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_19__["Events"].GIVEAWAY_LEAVE, giveaway);
      giveaway.error = null;
      this.elgb_addButton(giveaway, main, source);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('et')) {
        // noinspection JSIgnoredPromiseFromCall
        this.esgst.modules.giveawaysEntryTracker.et_setEntry(giveaway.code, false, giveaway.name);
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].header.updatePoints(responseJson.points);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('gb') && giveaway.gbButton) {
        giveaway.gbButton.button.classList.remove('esgst-hidden');
      }
      if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_16__["Shared"].esgst.gf && this.esgst.gf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(`gf_enable${this.esgst.gf.type}`)) {
        this.esgst.modules.giveawaysGiveawayFilters.filters_filter(this.esgst.gf);
      }
      if (!main && this.esgst.gfPopup && this.esgst.gfPopup.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get(`gf_enable${this.esgst.gfPopup.type}`)) {
        this.esgst.modules.giveawaysGiveawayFilters.filters_filter(this.esgst.gfPopup);
      }
      if (callback) {
        callback();
      }
    } else if (callback) {
      callback();
    }
  }
  elgb_updateButtons() {
    let giveaway, i, n;
    const giveaways = _class_Scope__WEBPACK_IMPORTED_MODULE_13__["Scope"].findData('main', 'giveaways');
    for (i = 0, n = giveaways.length; i < n; ++i) {
      giveaway = giveaways[i];
      if (giveaway.elgbButton && !giveaway.entered) {
        if (giveaway.error === 'Not Enough Points') {
          giveaway.error = null;
        }
        this.elgb_addButton(giveaway, true);
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_15__["Settings"].get('ttec')) {
      this.esgst.modules.giveawaysTimeToEnterCalculator.ttec_calculateTime(giveaways, true);
    }
  }
}
const giveawaysEnterLeaveGiveawayButton = new GiveawaysEnterLeaveGiveawayButton();


/***/ }),
/* 399 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysIsThereAnyDealInfo", function() { return giveawaysIsThereAnyDealInfo; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(208);
/* harmony import */ var _class_Lock__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(209);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(221);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(144);










const createElements = _Common__WEBPACK_IMPORTED_MODULE_9__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_9__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"]),
  setValue = _Common__WEBPACK_IMPORTED_MODULE_9__["common"].setValue.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"]);
class GiveawaysIsThereAnyDealInfo extends _class_Module__WEBPACK_IMPORTED_MODULE_7__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a box to the sidebar of any", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaway/aeqw7/"
      }, "giveaway"), " page that shows the best current deal for the game, the historical lowest price of the game and a list with all of the bundles that the game has been in. All of this information is retrieved from", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://isthereanydeal.com"
      }, "IsThereAnyDeal"), "."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Results are cached for 24 hours, so if you access a giveaway for the same game again within that timeframe, the information will not change.")),
      id: 'itadi',
      name: 'IsThereAnyDeal Info',
      sg: true,
      type: 'giveaways'
    };
  }
  async init() {
    if (!this.esgst.giveawayPath) {
      return;
    }
    if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_8__["permissions"].contains([['isThereAnyDeal']]))) {
      return;
    }
    this.esgst.giveawayFeatures.push(this.itadi_getGiveaways.bind(this));
  }
  itadi_getGiveaways(giveaways, main) {
    if (!main) {
      return;
    }
    const currentTime = Date.now();
    for (const giveaway of giveaways) {
      // noinspection JSIgnoredPromiseFromCall
      this.itadi_getInfo(currentTime, giveaway);
    }
  }
  async itadi_getInfo(currentTime, giveaway) {
    const game = this.esgst.games[giveaway.type][giveaway.id];
    let itadi = null;
    const plain = this.itadi_getPlain(giveaway.name);
    if (game && game.itadi && game.itadi.version === 2 && currentTime - game.itadi.lastCheck < 86400000) {
      itadi = game.itadi;
    } else {
      const loading = createElements(this.esgst.sidebar, 'beforeend', [{
        attributes: {
          class: 'sidebar__heading'
        },
        type: 'h3',
        children: [{
          attributes: {
            class: 'fa fa-circle-o-notch fa-spin'
          },
          type: 'i'
        }, {
          text: ' Loading IsThereAnyDeal info...',
          type: 'node'
        }]
      }]);
      itadi = await this.itadi_loadInfo(giveaway, plain);
      loading.remove();
    }
    this.itadi_addInfo(itadi, plain);
  }
  async itadi_loadInfo(giveaway, plain) {
    const itadi = {
      bundles: [],
      current: null,
      historical: null,
      lastCheck: Date.now(),
      version: 2
    };
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`https://isthereanydeal.com/game/${plain}/info/`, {
      queue: true
    });
    const deals = response.html.querySelectorAll('#gh-po tr');
    for (const deal of deals) {
      const match = deal.firstElementChild.textContent.trim().match(/(Current\sBest|Historical\sLow)/);
      if (!match) {
        continue;
      }
      itadi[match[1] === 'Current Best' ? 'current' : 'historical'] = {
        cut: deal.querySelector('.gh-po__cut').textContent.trim(),
        date: deal.querySelector('.date').textContent.trim(),
        price: deal.querySelector('.gh-po__price').textContent.trim(),
        source: deal.querySelector('.gh-po__shopTitle').textContent.trim()
      };
    }
    const bundles = response.html.querySelectorAll(`.bundleTable tr:not(:first-child)`);
    for (const bundle of bundles) {
      const link = bundle.querySelector('.t-st3--link');
      itadi.bundles.push({
        expiry: bundle.querySelector('.bundleTable__expiry').textContent.trim(),
        id: link.getAttribute('href').match(/id\/(.+)/)[1],
        name: link.textContent.trim(),
        price: bundle.querySelector('.t-st3__price').textContent.trim(),
        source: bundle.querySelector('.shopTitle').textContent.trim()
      });
    }
    const lock = new _class_Lock__WEBPACK_IMPORTED_MODULE_6__["Lock"]('game', {
      threshold: 300
    });
    await lock.lock();
    const games = JSON.parse(getValue('games'));
    if (!games[giveaway.type][giveaway.id]) {
      games[giveaway.type][giveaway.id] = {};
    }
    games[giveaway.type][giveaway.id].itadi = itadi;
    await setValue('games', JSON.stringify(games));
    await lock.unlock();
    return itadi;
  }
  itadi_template(text) {
    return [{
      attributes: {
        class: 'sidebar__heading'
      },
      text,
      type: 'h3'
    }, {
      attributes: {
        class: 'sidebar__navigation'
      },
      type: 'ul',
      children: []
    }];
  }
  itadi_itemTemplate(text1, text2, url) {
    return {
      attributes: {
        class: 'sidebar__navigation__item'
      },
      type: 'li',
      children: [{
        attributes: {
          class: 'sidebar__navigation__item__link',
          href: url
        },
        type: 'a',
        children: [{
          attributes: {
            class: 'sidebar__navigation__item__name'
          },
          text: text1,
          type: 'div'
        }, {
          attributes: {
            class: 'sidebar__navigation__item__underline'
          },
          type: 'div'
        }, {
          attributes: {
            class: 'sidebar__navigation__item__count'
          },
          text: text2,
          type: 'div'
        }]
      }]
    };
  }
  itadi_noItemTemplate(text) {
    return {
      text,
      type: 'node'
    };
  }
  itadi_addInfo(itadi, plain) {
    const items = [...this.itadi_template('Best Current Deal'), ...this.itadi_template('Historical Lowest Price'), ...this.itadi_template('Bundles')];
    if (itadi.current) {
      items[1].children.push(this.itadi_itemTemplate(`${itadi.current.source} (${itadi.current.date})`, `${itadi.current.price} (${itadi.current.cut})`, `https://isthereanydeal.com/game/${plain}/info/`));
    } else {
      items[1].children.push(this.itadi_noItemTemplate('There are no current deals for this game.'));
    }
    if (itadi.historical) {
      items[3].children.push(this.itadi_itemTemplate(`${itadi.historical.source} (${itadi.historical.date})`, `${itadi.historical.price} (${itadi.historical.cut})`, `https://isthereanydeal.com/game/${plain}/info/`));
    } else {
      items[3].children.push(this.itadi_noItemTemplate('There is no price history for this game.'));
    }
    if (itadi.bundles && itadi.bundles.length) {
      for (const bundle of itadi.bundles) {
        items[5].children.push(this.itadi_itemTemplate(`${bundle.name} (${bundle.source})`, `${bundle.price} (${bundle.expiry})`, `https://isthereanydeal.com/specials/#/filter:id/${bundle.id}`));
      }
    } else {
      items[5].children.push(this.itadi_noItemTemplate('This game has never been in a bundle.'));
    }
    createElements(this.esgst.sidebar, 'beforeend', items);
  }
  itadi_getPlain(name) {
    return name.toLowerCase().replace(/\sthe|the\s/g, '').replace(/\s/g, '').replace(/\d/g, m => {
      return ['0', 'i', 'ii', 'iii', 'iv', 'v', 'vi', 'vii', 'viii', 'ix'][m];
    }).replace(/&/g, 'and').replace(/\+/g, 'plus').replace(/[^\d\w]/g, '');
  }
}
const giveawaysIsThereAnyDealInfo = new GiveawaysIsThereAnyDealInfo();


/***/ }),
/* 400 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysUnhideGiveawayButton", function() { return giveawaysUnhideGiveawayButton; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



const createElements = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  unhideGame = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].unhideGame.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class GiveawaysUnhideGiveawayButton extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("i", {
        className: "fa fa-eye"
      }), ") next to a giveaway's game name (in any page), if you have hidden the game on SteamGifts, that allows you to unhide the game without having to access your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/settings/giveaways/filters"
      }, "giveaway filters"), ' ', "page.")),
      id: 'ugb',
      name: 'Unhide Giveaway Button',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.ugb_add.bind(this)
      }
    };
  }
  ugb_add(giveaways, main) {
    giveaways.forEach(giveaway => {
      let hideButton = giveaway.innerWrap.querySelector(`.giveaway__hide, .featured__giveaway__hide`);
      if (!hideButton && (!main || this.esgst.giveawaysPath || this.esgst.giveawayPath)) {
        if (this.esgst.giveawayPath && main) {
          hideButton = createElements(giveaway.headingName, 'afterend', [{
            type: 'a',
            children: [{
              attributes: {
                class: 'fa fa-eye giveaway__hide',
                title: getFeatureTooltip('ugb', 'Unhide all giveaways for this game')
              },
              type: 'i'
            }]
          }]);
        } else {
          hideButton = createElements(giveaway.headingName, 'afterend', [{
            attributes: {
              class: 'fa fa-eye giveaway__hide giveaway__icon',
              title: getFeatureTooltip('ugb', 'Unhide all giveaways for this game')
            },
            type: 'i'
          }]);
        }
        hideButton.addEventListener('click', unhideGame.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"], hideButton, giveaway.gameId, giveaway.name, giveaway.id, giveaway.type));
      }
    });
  }
}
const giveawaysUnhideGiveawayButton = new GiveawaysUnhideGiveawayButton();


/***/ }),
/* 401 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysOneClickHideGiveawayButton", function() { return giveawaysOneClickHideGiveawayButton; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(276);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(220);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(219);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(144);










class GiveawaysOneClickHideGiveawayButton extends _class_Module__WEBPACK_IMPORTED_MODULE_5__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "When you click on the icon ", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-eye-slash"
      }), " next to a giveaway's game name, the game will be hidden immediately, without any confirmation popup being shown.")),
      features: {
        ochgb_f: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "With this option enabled, when you hide a game, instead of all of the giveaways for the game being removed from the page, they are simply faded out.")),
          name: 'Fade hidden giveaways instead of removing them.',
          sg: true
        }
      },
      id: 'ochgb',
      name: 'One-Click Hide Giveaway Button',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.ochgb_setButton.bind(this)
      }
    };
  }
  ochgb_setButton(giveaways, main) {
    giveaways.forEach(giveaway => {
      let button = giveaway.innerWrap.querySelector(`.giveaway__hide, .featured__giveaway__hide`);
      if (!button) return;
      let unhide = button.classList.contains('fa-eye');
      if (this.esgst.giveawayPath && main) {
        button = button.parentElement;
      }
      giveaway.fade = this.ochgb_fadeGiveaway.bind(this, giveaway, main);
      giveaway.unfade = this.ochgb_unfadeGiveaway.bind(this, giveaway, main);
      giveaway.ochgbButton = new _class_Button__WEBPACK_IMPORTED_MODULE_2__["Button"](button, 'afterend', {
        callbacks: [this.ochgb_hideGiveaway.bind(this, giveaway, main), null, this.ochgb_unhideGiveaway.bind(this, giveaway, main), null],
        className: `esgst-ochgb ${this.esgst.giveawayPath && main ? '' : 'giveaway__icon'}`,
        icons: ['fa-eye-slash esgst-clickable', 'fa-circle-o-notch fa-spin', 'fa-eye esgst-clickable', 'fa-circle-o-notch fa-spin'],
        id: 'ochgb',
        index: unhide ? 2 : 0,
        titles: ['Hide all giveaways for this game', 'Hiding giveaways...', 'Unhide all giveaways for this game', 'Unhiding giveaways...']
      });
      giveaway.ochgbButton.button.setAttribute('data-draggable-id', 'hideGame');
      button.remove();
    });
  }
  ochgb_fadeGiveaway(giveaway, main) {
    if (this.esgst.giveawayPath && !main || !this.esgst.giveawayPath) {
      giveaway.innerWrap.classList.add('esgst-faded');
    }
  }
  ochgb_unfadeGiveaway(giveaway, main) {
    if (this.esgst.giveawayPath && !main || !this.esgst.giveawayPath) {
      giveaway.innerWrap.classList.remove('esgst-faded');
    }
  }
  async ochgb_hideGiveaway(giveaway, main) {
    await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].post('/ajax.php', {
      data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].xsrfToken}&do=hide_giveaways_by_game_id&game_id=${giveaway.gameId}`
    });
    this.ochgb_completeProcess(giveaway, 'fade', main);
    await _Common__WEBPACK_IMPORTED_MODULE_9__["common"].updateHiddenGames(giveaway.id, giveaway.type);
    return true;
  }
  async ochgb_unhideGiveaway(giveaway, main) {
    await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].post('/ajax.php', {
      data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_7__["Session"].xsrfToken}&do=remove_filter&game_id=${giveaway.gameId}`
    });
    this.ochgb_completeProcess(giveaway, 'unfade', main);
    await _Common__WEBPACK_IMPORTED_MODULE_9__["common"].updateHiddenGames(giveaway.id, giveaway.type, true);
    return true;
  }
  ochgb_completeProcess(clickedGiveaway, key, main) {
    if (main && this.esgst.giveawayPath) return;
    const giveaways = _class_Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].findData('current', 'giveaways');
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_8__["Settings"].get('ochgb_f')) {
      for (const giveaway of giveaways) {
        if (giveaway.gameId === clickedGiveaway.gameId) {
          giveaway[key]();
          if (giveaway !== clickedGiveaway && giveaway.ochgbButton) {
            giveaway.ochgbButton.index = key === 'fade' ? 2 : 0;
            // noinspection JSIgnoredPromiseFromCall
            giveaway.ochgbButton.change();
          }
        }
      }
    } else {
      for (const giveaway of giveaways) {
        if (giveaway.gameId === clickedGiveaway.gameId) {
          giveaway.outerWrap.remove();
        }
      }
    }
  }
}
const giveawaysOneClickHideGiveawayButton = new GiveawaysOneClickHideGiveawayButton();


/***/ }),
/* 402 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysVisibleInviteOnlyGiveaways", function() { return giveawaysVisibleInviteOnlyGiveaways; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






class GiveawaysVisibleInviteOnlyGiveaways extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Displays information for open invite-only giveaways in profile pages if the information is available in the storage."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "To add information about a giveaway from someone else to the storage, you must enter the giveaway and visit your entered page with ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
        "data-esgst-feature-id": "cewgd"
      }), ' ', "enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "To add information about your own giveaways to the storage, you must sync your giveaways in the sync menu or check your profile with ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
        "data-esgst-feature-id": "ugd"
      }), ".")),
      id: 'viog',
      name: 'Visible Invite-Only Giveaways',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.viog_display.bind(this)
      }
    };
  }
  viog_display(giveaways) {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.userPath) {
      return;
    }
    for (const giveaway of giveaways) {
      if (!giveaway.inviteOnly || giveaway.id) {
        continue;
      }
      const foundGiveaway = Object.keys(this.esgst.giveaways).map(x => this.esgst.giveaways[x]).filter(savedGiveaway => savedGiveaway.gameSteamId && savedGiveaway.gameType && savedGiveaway.gameName && savedGiveaway.points && savedGiveaway.copies && (savedGiveaway.code && savedGiveaway.code === giveaway.code || savedGiveaway.creator && savedGiveaway.creator.toLowerCase() == giveaway.creator.toLowerCase() && savedGiveaway.startTime && savedGiveaway.startTime === giveaway.startTime && savedGiveaway.endTime && savedGiveaway.endTime === giveaway.endTime))[0];
      if (foundGiveaway) {
        giveaway.id = foundGiveaway.gameSteamId;
        giveaway.type = foundGiveaway.gameType;
        giveaway.name = foundGiveaway.gameName;
        giveaway.points = foundGiveaway.points;
        giveaway.copies = foundGiveaway.copies;
        giveaway.url = `/giveaway/${foundGiveaway.code}/`;
        giveaway.headingName.setAttribute('href', giveaway.url);
        giveaway.headingName.textContent = giveaway.name;
        giveaway.entriesLink.setAttribute('href', `${giveaway.url}_/entries`);
        giveaway.commentsLink.setAttribute('href', giveaway.url);
        giveaway.image.classList.remove('giveaway_image_thumbnail_missing');
        giveaway.image.classList.add('giveaway_image_thumbnail');
        giveaway.image.setAttribute('href', giveaway.url);
        giveaway.image.style.backgroundImage = `url("https://steamcdn-a.akamaihd.net/steam/${giveaway.type}/${giveaway.id}/capsule_184x69.jpg")`;
        giveaway.image.innerHTML = '';
        _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(giveaway.heading, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
          className: "giveaway__heading__thin",
          "data-draggable-id": "points",
          ref: ref => giveaway.pointsContainer = ref
        }, `(${giveaway.points}P)`), giveaway.copies > 1 ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
          className: "giveaway__heading__thin",
          "data-draggable-id": "copies",
          ref: ref => giveaway.copiesContainer = ref
        }, `(${giveaway.copies} Copies)`) : null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
          className: "giveaway__icon",
          "data-draggable-id": "steam",
          href: `https://store.steampowered.com/${giveaway.type.slice(0, -1)}/${giveaway.id}/`,
          rel: "nofollow",
          target: "_blank"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
          className: "fa fa-steam"
        })), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
          className: "giveaway__icon",
          "data-draggable-id": "search",
          href: `/giveaways/search?${giveaway.type.slice(0, -1)}/${giveaway.id}`
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
          className: "fa fa-search"
        }))));
      }
    }
  }
}
const giveawaysVisibleInviteOnlyGiveaways = new GiveawaysVisibleInviteOnlyGiveaways();


/***/ }),
/* 403 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysGiveawayWinnersLink", function() { return giveawaysGiveawayWinnersLink; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);



const createElements = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class GiveawaysGiveawayWinnersLink extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("li", null, "Adds a link next to an ended giveaway's \"Entries\" link (in any page) that shows how many winners the giveaway has and takes you to the giveaway's", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_2__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaway/aeqw7/dead-space/winners"
      }, "winners"), " page.")),
      id: 'gwl',
      name: 'Giveaway Winners Link',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.gwl_addLinks.bind(this)
      }
    };
  }
  gwl_addLinks(giveaways, main) {
    if ((!this.esgst.createdPath && !this.esgst.enteredPath && !this.esgst.wonPath && !this.esgst.giveawayPath && !this.esgst.archivePath || main) && (this.esgst.giveawayPath || this.esgst.createdPath || this.esgst.enteredPath || this.esgst.wonPath || this.esgst.archivePath)) return;
    giveaways.forEach(giveaway => {
      if (giveaway.innerWrap.getElementsByClassName('esgst-gwl')[0] || !giveaway.ended) return;
      const attributes = {
        class: 'esgst-gwl',
        ['data-draggable-id']: 'winners_count'
      };
      if (giveaway.url) {
        attributes.href = `${giveaway.url}/winners`;
      }
      createElements(giveaway.entriesLink, 'afterend', [{
        attributes,
        type: 'a',
        children: [{
          attributes: {
            class: 'fa fa-trophy'
          },
          type: 'i'
        }, {
          text: `${giveaway.numWinners} winners`,
          type: 'span'
        }]
      }]);
    });
  }
}
const giveawaysGiveawayWinnersLink = new GiveawaysGiveawayWinnersLink();


/***/ }),
/* 404 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysTimeToEnterCalculator", function() { return giveawaysTimeToEnterCalculator; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(213);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





const createElements = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class GiveawaysTimeToEnterCalculator extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds an element (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-clock-o"
      }), " [Time]) below the start time of a giveaway that you do not have enough points to enter(in any page) that shows how much time you have to wait until you have enough points to enter the giveaway."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "The time is calculated by rounding up the result (which is in milliseconds) of the following formula: next_refresh_in_milliseconds + (15 * (\u2308(number_of_points_to_enter - number_of_points_you_have) / 6\u2309 - 1), where next_refresh_in_milliseconds = the time that the next point refresh will happen (you get 6 points every 15 minutes of the hour on SteamGifts, so if it is currently 12:10pm, the next refresh will be at 12:15pm)"), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "You can move the element around by dragging and dropping it.")),
      id: 'ttec',
      name: 'Time To Enter Calculator',
      sg: true,
      type: 'giveaways',
      featureMap: {
        giveaway: this.ttec_calculateTime.bind(this)
      }
    };
  }
  ttec_calculateTime(giveaways, main, source) {
    let nextRefresh;
    if (!main || !this.esgst.createdPath && !this.esgst.enteredPath && !this.esgst.wonPath && !this.esgst.newGiveawayPath) {
      nextRefresh = 60 - new Date().getMinutes();
      while (nextRefresh > 15) {
        nextRefresh -= 15;
      }
      giveaways.forEach(giveaway => {
        if (!giveaway.ended && !giveaway.entered && giveaway.points > _class_Session__WEBPACK_IMPORTED_MODULE_3__["Session"].counters.points) {
          if (!giveaway.ttec) {
            giveaway.ttec = createElements(giveaway.panel, _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('gv') && (main && this.esgst.giveawaysPath || source === 'gb' && _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('gv_gb') || source === 'ged' && _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('gv_ged') || source === 'ge' && _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('gv_ge')) ? 'beforeend' : 'afterbegin', [{
              attributes: {
                class: `${this.esgst.giveawayPath ? 'featured__column' : ''} esgst-ttec`,
                ['data-draggable-id']: 'ttec',
                title: getFeatureTooltip('ttec', 'Time to wait until you have enough points to enter this giveaway')
              },
              type: 'div'
            }]);
          }
          giveaway.ttec.classList.remove('esgst-hidden');
          createElements(giveaway.ttec, 'atinner', [{
            attributes: {
              class: 'fa fa-clock-o'
            },
            type: 'i'
          }, {
            text: ` ${this.ttec_getTime(Math.round((nextRefresh + 15 * (Math.ceil((giveaway.points - _class_Session__WEBPACK_IMPORTED_MODULE_3__["Session"].counters.points) / 6) - 1)) * 100) / 100)}`,
            type: 'node'
          }]);
        } else if (giveaway.ttec) {
          giveaway.ttec.classList.add('esgst-hidden');
        }
      });
    }
  }
  ttec_getTime(m) {
    let d, h, w;
    h = Math.round(m / 60 * 10) / 10;
    if (Math.floor(h) > 0) {
      d = Math.round(m / 60 / 24 * 10) / 10;
      if (Math.floor(d) > 0) {
        w = Math.round(d / 60 / 24 / 7 * 10) / 10;
        if (Math.floor(w) > 0) {
          return `${w}w`;
        } else {
          return `${d}d`;
        }
      } else {
        return `${h}h`;
      }
    } else {
      return `${m}m`;
    }
  }
}
const giveawaysTimeToEnterCalculator = new GiveawaysTimeToEnterCalculator();


/***/ }),
/* 405 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalContentLoader", function() { return generalContentLoader; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(208);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(220);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(222);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(211);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(132);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(210);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(206);












const ON_LOAD = 0;
const ON_HOVER_POPOUT = 1;
const ON_CLICK_POPOUT = 2;
const ON_CLICK_POPUP = 3;
class GeneralContentLoader extends _class_Module__WEBPACK_IMPORTED_MODULE_6__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("li", null, "Allows you to load many different content (such as giveaway groups) without leaving the page.")),
      features: {
        cl_gc: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("li", null, "Loads a giveaway's countries when clicking / hovering over (depending on preference) on its region restriction icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("i", {
            className: "fa fa-globe"
          }), ").")),
          name: 'Giveaway Countries',
          options: {
            title: `Load as:`,
            values: [`~Panel (On Page Load)`, `Popout (On Hover)`, `Popout (On Click)`, `Popup (On Click)`]
          },
          sg: true
        },
        cl_ge: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("li", null, "Loads a giveaway's entries when clicking / hovering over (depending on preference) on its \"Entries\" link.")),
          name: 'Giveaway Entries',
          options: {
            title: `Load as:`,
            values: [`~Panel (On Page Load)`, `Popout (On Hover)`, `Popout (On Click)`, `Popup (On Click)`]
          },
          sg: true
        },
        ggl: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("li", null, "Loads a giveaway's groups when clicking / hovering over (depending on preference) on its group icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("i", {
            className: "fa fa-user"
          }), ") or automatically when loading the page (extends to your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
            href: "https://www.steamgifts.com/giveaways/created"
          }, "created"), " /", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
            href: "https://www.steamgifts.com/giveaways/entered"
          }, "entered"), " /", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
            href: "https://www.steamgifts.com/giveaways/won"
          }, "won"), " pages if", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("span", {
            "data-esgst-feature-id": "cewgd"
          }), " is enabled)."), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("li", null, "Has ", _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("span", {
            "data-esgst-feature-id": "gh"
          }), " built-in.")),
          features: {
            ggl_m: {
              name: 'Only show groups that you are a member of.',
              sg: true
            }
          },
          name: 'Giveaway Groups',
          options: {
            title: `Load as:`,
            values: [`Panel (On Page Load)`, `Popout (On Hover)`, `Popout (On Click)`, `Popup (On Click)`]
          },
          sg: true,
          sync: 'Steam Groups',
          syncKeys: ['Groups']
        },
        cl_gi: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("li", null, "Loads a group's info when clicking / hovering over (depending on preference) its avatar.")),
          name: 'Group Info',
          options: {
            title: `Load as:`,
            values: [`~Panel (On Page Load)`, `Popout (On Hover)`, `Popout (On Click)`, `~Popup (On Click)`]
          },
          sg: true
        },
        cl_ui: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("li", null, "Loads a user's info when clicking / hovering over (depending on preference) its avatar.")),
          name: 'User Info',
          options: {
            title: `Load as:`,
            values: [`~Panel (On Page Load)`, `Popout (On Hover)`, `Popout (On Click)`, `~Popup (On Click)`]
          },
          sg: true
        }
      },
      id: 'cl',
      name: 'Content Loader',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cl_gc')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.giveawayFeatures.push(this.setTriggers.bind(this, 'cl_gc'));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cl_ge')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.giveawayFeatures.push(this.setTriggers.bind(this, 'cl_ge'));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('ggl')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.giveawayFeatures.push(this.setTriggers.bind(this, 'ggl'));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cl_gi')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.endlessFeatures.push(this.setTriggers.bind(this, 'cl_gi'));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cl_ui')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.endlessFeatures.push(this.setTriggers.bind(this, 'cl_ui'));
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.userFeatures.push(this.setTriggers.bind(this, 'cl_ui'));
    }
  }
  setTriggers(id, items, main, source, endless) {
    let targetObjs;
    switch (id) {
      case 'cl_gc':
        targetObjs = items.filter(x => x.regionRestricted);
        if (!main || !_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.createdPath && !_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.enteredPath && !_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.wonPath) {
          for (const targetObj of targetObjs) {
            this.setTrigger(main, id, targetObj, targetObj.regionRestricted);
          }
        }
        break;
      case 'cl_ge':
        targetObjs = items.filter(x => x.entriesLink);
        if (!main || !_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.wonPath) {
          for (const targetObj of targetObjs) {
            let entriesLink = targetObj.entriesLink;
            if (_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.createdPath || _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.enteredPath) {
              entriesLink.innerHTML = `
								<a class="table__column__secondary-link" href="${targetObj.url}/entries">${entriesLink.textContent}</a>
							`;
              entriesLink = entriesLink.firstElementChild;
            }
            this.setTrigger(main, id, targetObj, entriesLink);
          }
        }
        break;
      case 'ggl':
        targetObjs = items.filter(x => x.group);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get(`${id}_index`) === ON_LOAD) {
          this.load(main, id, targetObjs);
        } else if (!main || !_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.createdPath && !_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.enteredPath && !_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.wonPath) {
          for (const targetObj of targetObjs) {
            this.setTrigger(main, id, targetObj, targetObj.group);
          }
        }
        break;
      case 'cl_gi':
      case 'cl_ui':
        if (Array.isArray(items)) {
          targetObjs = items.filter(x => x.oldElement && !x.oldElement.classList.contains('esgst-ap-avatar'));
          for (const targetObj of targetObjs) {
            this.setTrigger(main, id, {}, targetObj.oldElement);
          }
        } else {
          const selectors = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.getSelectors(endless, ['X.global__image-outer-wrap--avatar-small', 'X.giveaway_image_avatar', 'X.table_image_avatar', 'X.featured_giveaway_image_avatar', 'X.nav__avatar-outer-wrap']);
          targetObjs = items.querySelectorAll(selectors);
          for (const targetObj of targetObjs) {
            if (!targetObj.classList.contains('esgst-ap-avatar')) {
              this.setTrigger(main, id, {}, targetObj);
            }
          }
        }
    }
  }
  setTrigger(main, id, targetObj, target) {
    let context;
    let delay;
    let enterTimeout;
    let eventType;
    let exitTimeout;
    let onClick;
    let triggerObj;
    if (id === 'cl_gi' || id === 'cl_ui') {
      const url = target.getAttribute('href');
      if (!url) {
        return;
      }
      targetObj.url = url.match(/\/profiles\//) ? `/user/${target.textContent}` : url;
      const match = targetObj.url.match(/\/(user|group)\/(.+?)(\/.*)?$/);
      if (!match || match[1] === 'user' && id !== 'cl_ui' || match[1] === 'group' && id != 'cl_gi') {
        return;
      }
      targetObj.type = match[1];
      targetObj.id = match[2];
      target.classList.add('esgst-ap-avatar');
    }
    switch (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get(`${id}_index`)) {
      case ON_HOVER_POPOUT:
        delay = 1000;
        eventType = 'mouseenter';
        onClick = false;
        target.addEventListener('mouseleave', event => {
          if (enterTimeout) {
            window.clearTimeout(enterTimeout);
            enterTimeout = null;
          }
          exitTimeout = window.setTimeout(() => {
            if (triggerObj && !context.contains(event.relatedTarget)) {
              triggerObj.close();
            }
          }, delay);
        });
        target.addEventListener('click', () => {
          if (enterTimeout) {
            window.clearTimeout(enterTimeout);
            enterTimeout = null;
          }
        });
        break;
      case ON_CLICK_POPOUT:
      case ON_CLICK_POPUP:
        delay = 0;
        eventType = 'click';
        onClick = true;
        if (target.getAttribute('href')) {
          target.dataset.href = target.getAttribute('href');
          target.removeAttribute('href');
        }
        target.classList.add('esgst-clickable');
        break;
    }
    target.addEventListener(eventType, event => {
      event.preventDefault();
      enterTimeout = window.setTimeout(async () => {
        if (id === 'cl_gi' || id === 'cl_ui') {
          triggerObj = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.apPopouts[targetObj.id];
          if (triggerObj) {
            context = triggerObj.popout;
          }
        }
        if (triggerObj) {
          switch (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get(`${id}_index`)) {
            case ON_HOVER_POPOUT:
              triggerObj.open(target);
              break;
            case ON_CLICK_POPOUT:
              if (triggerObj.isOpen) {
                triggerObj.close();
              } else {
                triggerObj.open(target);
              }
              break;
            case ON_CLICK_POPUP:
              triggerObj.open();
              break;
          }
        } else {
          let addSearchBox = false;
          let icon;
          let name;
          let url;
          switch (id) {
            case 'cl_gc':
              addSearchBox = true;
              icon = 'globe';
              name = 'Giveaway Countries';
              url = `${targetObj.url}/region-restrictions`;
              break;
            case 'cl_ge':
              addSearchBox = true;
              icon = 'tag';
              name = 'Giveaway Entries';
              url = `${targetObj.url}/entries`;
              break;
            case 'ggl':
              addSearchBox = true;
              icon = 'user';
              name = 'Giveaway Groups';
              url = `${targetObj.url}/groups`;
              break;
          }
          if (id === 'cl_gi' || id === 'cl_ui') {
            _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.apPopouts[targetObj.id] = triggerObj = new _class_Popout__WEBPACK_IMPORTED_MODULE_7__["Popout"]('esgst-ap-popout', undefined, undefined, onClick);
            context = triggerObj.popout;
            triggerObj.open(target);
          } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get(`${id}_index`) === ON_CLICK_POPUP) {
            triggerObj = new _class_Popup__WEBPACK_IMPORTED_MODULE_8__["Popup"]({
              addScrollable: true,
              icon: `fa-${icon}`,
              title: _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
                href: url
              }, name)
            });
            context = triggerObj.scrollable;
            triggerObj.open();
          } else {
            triggerObj = new _class_Popout__WEBPACK_IMPORTED_MODULE_7__["Popout"](`esgst-${id}-popout`, undefined, undefined, onClick);
            context = triggerObj.popout;
            _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
              className: `esgst-${id}-heading`,
              href: url
            }, name)));
            triggerObj.open(target);
          }
          _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("fragment", null, addSearchBox ? _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("input", {
            placeholder: "Search...",
            type: "text",
            ref: ref => triggerObj.custom.searchBox = ref
          }) : null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", null)));
          if (triggerObj.custom.searchBox) {
            triggerObj.custom.searchBox.addEventListener('input', () => {
              const value = triggerObj.custom.searchBox.value.toLowerCase();
              const elements = triggerObj.custom.rows.children;
              if (value) {
                triggerObj.custom.isSearching = true;
                for (const element of elements) {
                  if (element.textContent.toLowerCase().match(value)) {
                    element.classList.remove('esgst-hidden');
                  } else {
                    element.classList.add('esgst-hidden');
                  }
                }
              } else {
                for (const element of elements) {
                  element.classList.remove('esgst-hidden');
                }
                triggerObj.custom.isSearching = false;
              }
              triggerObj.reposition();
            });
          }
          _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context.lastElementChild, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("i", {
            className: "fa fa-circle-o-notch fa-spin"
          }), ' Loading content...'));
          triggerObj.reposition();
          this.load(main, id, [targetObj], triggerObj, context);
        }
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get(`${id}_index`) === ON_HOVER_POPOUT) {
          context.onmouseenter = () => {
            if (exitTimeout) {
              window.clearTimeout(exitTimeout);
              exitTimeout = null;
            }
          };
        }
      }, delay);
    });
  }
  load(main, id, targetObjs, triggerObj, context) {
    switch (id) {
      case 'cl_gc':
        this.loadGiveawayCountries(main, id, targetObjs, triggerObj, context);
        break;
      case 'cl_ge':
        this.loadGiveawayEntries(main, id, targetObjs, triggerObj, context);
        break;
      case 'ggl':
        this.loadGiveawayGroups(main, id, targetObjs, triggerObj, context);
        break;
      case 'cl_gi':
      case 'cl_ui':
        this.loadInfo(main, id, targetObjs, triggerObj, context);
        break;
    }
  }
  async loadGiveawayCountries(main, id, giveaways, triggerObj, context) {
    for (const giveaway of giveaways) {
      try {
        await this.fetchGiveawayCountries(giveaway, triggerObj, context);
      } catch (e) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_10__["Logger"].warning(e.message, e.stack);
      }
    }
  }
  async fetchGiveawayCountries(giveaway, triggerObj, context) {
    let countries = [];
    const url = `${giveaway.url}/region-restrictions/search?page=`;
    let nextPage = 1;
    let pagination;
    do {
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].get(`${url}${nextPage}`);
      const error = response.html.querySelector('.table--summary');
      if (error) {
        countries = null;
        break;
      }
      const elements = response.html.querySelectorAll('.table__row-inner-wrap');
      for (const element of elements) {
        const hasFlag = !!element.querySelector('.table_image_flag');
        const heading = element.querySelector('.table__column__heading');
        const name = heading.textContent;
        const code = name.match(/\s\((.+?)\)$/)[1].toLowerCase();
        countries.push({
          code,
          hasFlag,
          name
        });
      }
      nextPage += 1;
      pagination = response.html.querySelector('.pagination__navigation');
    } while (pagination && !pagination.lastElementChild.classList.contains('is-selected'));
    if (countries) {
      let table;
      _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context.lastElementChild, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
        className: "esgst-text-left table esgst-hidden",
        ref: ref => table = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
        className: "table__rows",
        ref: ref => triggerObj.custom.rows = ref
      })));
      let numCountries = countries.length;
      for (const country of countries) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(triggerObj.custom.rows, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
          className: "table__row-outer-wrap"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
          className: "table__row-inner-wrap"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", null, country.hasFlag ? _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
          className: "table_image_flag",
          style: {
            backgroundImage: `url(https://cdn.steamgifts.com/img/flags/${country.code}.png)`
          }
        }) : _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
          className: "table_image_flag_missing"
        })), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
          className: "table__column--width-fill"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("p", {
          className: "table__column__heading"
        }, country.name)))));
      }
      if (numCountries === 0) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context.lastElementChild, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("i", {
          className: "fa fa-exclamation-mark"
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("span", null, "You cannot see the countries of this giveaway.")));
      } else if (table) {
        table.classList.remove('esgst-hidden');
        if (triggerObj.custom.searchBox) {
          triggerObj.custom.searchBox.classList.remove('esgst-hidden');
        }
      }
    } else {
      _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context.lastElementChild, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("i", {
        className: "fa fa-times-circle"
      }), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("span", null, "An error occurred.")));
    }
    triggerObj.reposition();
  }
  async loadGiveawayEntries(main, id, giveaways, triggerObj, context) {
    for (const giveaway of giveaways) {
      try {
        await this.fetchGiveawayEntries(giveaway, triggerObj, context);
      } catch (e) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_10__["Logger"].warning(e.message, e.stack);
      }
    }
  }
  async fetchGiveawayEntries(giveaway, triggerObj, context) {
    let isLoading = false;
    let isCanceled = false;
    const url = `${giveaway.url}/entries/search?page=`;
    let nextPage = 1;
    let pagination;
    const loadNextPage = async () => {
      isLoading = true;
      let loadingElement;
      _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
        ref: ref => loadingElement = ref
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("i", {
        className: "fa fa-circle-o-notch fa-spin"
      }), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("span", null, "Loading next page...")));
      const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].get(`${url}${nextPage}`);
      const error = response.html.querySelector('.table--summary');
      if (error) {
        isCanceled = true;
        loadingElement.remove();
        _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context.lastElementChild, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("i", {
          className: "fa fa-exclamation-mark"
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("span", null, "You cannot see the entries of this giveaway.")));
        return;
      } else if (triggerObj.custom.searchBox) {
        triggerObj.custom.searchBox.classList.remove('esgst-hidden');
      }
      const entries = [];
      const elements = response.html.querySelectorAll('.table__row-inner-wrap');
      for (const element of elements) {
        const imageElement = element.querySelector('.table_image_avatar');
        const avatar = imageElement ? imageElement.style.backgroundImage.match(/url\("(.+)"\)/)[1] : null;
        const heading = element.querySelector('.table__column__heading');
        const name = heading.textContent;
        entries.push({
          avatar,
          name
        });
      }
      const currentRows = document.createDocumentFragment();
      for (const entry of entries) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(currentRows, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
          className: "table__row-outer-wrap"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
          className: "table__row-inner-wrap"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", null, entry.avatar ? _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
          className: "table_image_avatar",
          href: `/user/${entry.name}`,
          style: {
            backgroundImage: `url(${entry.avatar})`
          }
        }) : _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
          className: "table_image_avatar_missing"
        })), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
          className: "table__column--width-fill"
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
          className: "table__column__heading",
          href: `/user/${entry.name}`
        }, entry.name)))));
      }
      loadingElement.remove();
      await _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.endless_load(currentRows);
      triggerObj.custom.rows.appendChild(currentRows);
      triggerObj.reposition();
      nextPage += 1;
      pagination = response.html.querySelector('.pagination__navigation');
      if (!pagination || pagination.lastElementChild.classList.contains('is-selected')) {
        isCanceled = true;
      }
      isLoading = false;
    };
    context.addEventListener('scroll', () => {
      if (isLoading || isCanceled || triggerObj.custom.isSearching) {
        return;
      }
      if (context.scrollTop + context.offsetHeight >= context.scrollHeight) {
        loadNextPage();
      }
    });
    _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context.lastElementChild, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
      className: "esgst-text-left table"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
      className: "table__rows",
      ref: ref => triggerObj.custom.rows = ref
    })));
    triggerObj.reposition();
    loadNextPage();
  }
  async loadGiveawayGroups(main, id, giveaways, triggerObj, context) {
    const giveawaysToSave = {};
    const groupsToSave = {};
    for (const giveaway of giveaways) {
      try {
        await this.fetchGiveawayGroups(giveaway, triggerObj, context, giveawaysToSave, groupsToSave);
      } catch (e) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_10__["Logger"].warning(e.message, e.stack);
      }
    }
    if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gf && _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get(`gf_enable${_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gf.type}`)) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.modules.giveawaysGiveawayFilters.filters_filter(_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gf);
    }
    if (!main && _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gfPopup && _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gfPopup.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get(`gf_enable${_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gfPopup.type}`)) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.modules.giveawaysGiveawayFilters.filters_filter(_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.gfPopup);
    }
    await Promise.all([_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.lockAndSaveGiveaways(giveawaysToSave), _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.lockAndSaveGroups(groupsToSave)]);
  }
  async fetchGiveawayGroups(giveaway, triggerObj, context, giveawaysToSave, groupsToSave) {
    let groups;
    const found = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.giveaways[giveaway.code] && Array.isArray(_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.giveaways[giveaway.code].groups) && _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.giveaways[giveaway.code].groups.length && !_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.giveaways[giveaway.code].groups.filter(x => !_class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.groups.filter(y => x === y.code)[0])[0];
    if (found) {
      groups = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.giveaways[giveaway.code].groups;
    } else {
      groups = [];
      const url = `${giveaway.url}/groups/search?page=`;
      let nextPage = 1;
      let pagination;
      do {
        const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].get(`${url}${nextPage}`);
        const error = response.html.querySelector('.table--summary');
        if (error) {
          groups = null;
          break;
        }
        const elements = response.html.querySelectorAll('.table__row-inner-wrap');
        for (const element of elements) {
          const imageElement = element.querySelector('.table_image_avatar');
          const avatar = imageElement ? imageElement.style.backgroundImage.match(/url\("(.+)"\)/)[1] : null;
          const heading = element.querySelector('.table__column__heading');
          const code = heading.getAttribute('href').match(/group\/(.+?)\//)[1];
          const name = heading.textContent || imageElement.href.replace('/group/', '').split('/').pop().replace(/[-_]+/g, ' ') || '';
          groups.push(code);
          groupsToSave[code] = {
            avatar,
            code,
            name
          };
        }
        nextPage += 1;
        pagination = response.html.querySelector('.pagination__navigation');
      } while (pagination && !pagination.lastElementChild.classList.contains('is-selected'));
      if (groups) {
        giveawaysToSave[giveaway.code] = {
          groups
        };
      }
    }
    if (triggerObj) {
      if (groups) {
        let table;
        _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context.lastElementChild, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
          className: "esgst-text-left table esgst-hidden",
          ref: ref => table = ref
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
          className: "table__rows",
          ref: ref => triggerObj.custom.rows = ref
        })));
        let numGroups = 0;
        for (const code of groups) {
          let className;
          const group = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.groups.filter(x => x.code === code)[0] || groupsToSave[code];
          if (group.member) {
            className = 'esgst-ggl-member';
            numGroups += 1;
          } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('ggl_m')) {
            className = 'esgst-hidden';
          } else {
            className = '';
            numGroups += 1;
          }
          if (className !== 'esgst-hidden') {
            _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(triggerObj.custom.rows, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
              className: `table__row-outer-wrap ${className}`
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
              className: "table__row-inner-wrap"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", null, group.avatar ? _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
              className: "table_image_avatar",
              href: `/group/${group.code}`,
              style: {
                backgroundImage: `url(${group.avatar})`
              }
            }) : _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
              className: "table_image_avatar_missing"
            })), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
              className: "table__column--width-fill"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
              className: "table__column__heading",
              href: `/group/${group.code}/`
            }, group.name)))));
          }
        }
        if (numGroups === 0) {
          _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context.lastElementChild, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("i", {
            className: "fa fa-exclamation-mark"
          }), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("span", null, "You are not a member of any group in this giveaway.")));
        } else if (table) {
          table.classList.remove('esgst-hidden');
          if (triggerObj.custom.searchBox) {
            triggerObj.custom.searchBox.classList.remove('esgst-hidden');
          }
          _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].common.endless_load(table);
        }
      } else {
        _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(context.lastElementChild, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("i", {
          className: "fa fa-times-circle"
        }), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("span", null, "An error occurred.")));
      }
      triggerObj.reposition();
    } else if (groups && !giveaway.summary.querySelector('.esgst-ggl-panel')) {
      let panel;
      _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(giveaway.extraPanel || giveaway.summary, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
        className: "esgst-ggl-panel",
        "data-draggable-id": "ggl",
        ref: ref => panel = ref
      }));
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.modules.giveaways.giveaways_reorder(giveaway);
      giveaway.groups = [];
      giveaway.groupNames = [];
      giveaway.nonMemberGroup = false;
      let numVisibleGroups = 0;
      let numMemberGroups = 0;
      for (const code of groups) {
        let className;
        const group = _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.groups.filter(x => x.code === code)[0] || groupsToSave[code];
        if (group.member) {
          className = 'esgst-ggl-member';
          numVisibleGroups += 1;
          numMemberGroups += 1;
        } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('ggl_m')) {
          className = 'esgst-hidden';
        } else {
          className = '';
          numVisibleGroups += 1;
        }
        giveaway.groups.push(group.name.toLowerCase());
        giveaway.groupNames.push(group.name);
        if (className !== 'esgst-hidden') {
          _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(panel, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
            className: className
          }, group.avatar ? _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
            className: "table_image_avatar",
            href: `/group/${group.code}/`,
            style: {
              backgroundImage: `url(${group.avatar})`
            }
          }) : _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
            className: "table_image_avatar_missing"
          }), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
            href: `/group/${group.code}/`
          }, group.name)));
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('cl_gi')) {
            this.setTriggers('cl_gi', panel);
          }
        }
      }
      if (numVisibleGroups === 0) {
        panel.remove();
      }
      if (numMemberGroups === 0) {
        giveaway.nonMemberGroup = true;
      }
    }
  }
  async loadInfo(main, id, targetObjs, triggerObj, context) {
    for (const targetObj of targetObjs) {
      try {
        await this.fetchInfo(targetObj, triggerObj, context);
      } catch (e) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_10__["Logger"].warning(e.message, e.stack);
      }
    }
  }
  async fetchInfo(targetObj, triggerObj, context) {
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].get(targetObj.url);
    const heading = response.html.querySelector('.featured__heading__medium');
    if (heading.textContent.trim() === '') {
      const groupName = response.html.querySelector('head script[type="text/javascript"]').textContent.match(/var baseUrl = "([^"]+)";/)[1].split('/').pop();
      heading.textContent = groupName ? groupName.replace(/[-_]+/g, ' ') : '';
    }
    context.innerHTML = '';
    context.appendChild(response.html.querySelector('.featured__outer-wrap'));
    const avatar = context.querySelector('.global__image-outer-wrap--avatar-large');
    let link;
    _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(avatar, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("a", {
      className: "esgst-ap-link",
      ref: ref => link = ref
    }));
    link.appendChild(avatar);
    link.setAttribute('href', targetObj.url);
    const table = context.querySelector('.featured__table');

    // add sidebar buttons to table
    const sidebarButtons = response.html.querySelector('.sidebar__shortcut-outer-wrap');
    sidebarButtons.lastElementChild.remove();
    table.parentElement.insertBefore(sidebarButtons, table);

    // merge left / right table columns
    const columns = table.children;
    for (let i = 0, n = columns[1].children.length; i < n; i++) {
      columns[0].appendChild(columns[1].firstElementChild);
    }
    columns[1].remove();
    const suspensionElement = response.html.querySelector('.sidebar__suspension');
    if (suspensionElement) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(columns[0], 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
        className: "esgst-ap-suspended featured__table__row"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
        className: "featured__table__row__left"
      }, suspensionElement.textContent), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
        className: "featured__table__row__right"
      }, suspensionElement.nextElementSibling.textContent)));
    }
    const sidebarElements = response.html.querySelectorAll('.sidebar__navigation__item__name');
    for (const element of sidebarElements) {
      const match = element.textContent.match(/^Giveaways|Users$/);
      if (!match) {
        continue;
      }
      _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].insert(columns[0], 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
        className: "featured__table__row"
      }, _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
        className: "featured__table__row__left"
      }, match[0]), _class_DOM__WEBPACK_IMPORTED_MODULE_11__["DOM"].element("div", {
        className: "featured__table__row__right"
      }, element.nextElementSibling.nextElementSibling.textContent)));
    }
    const reportButton = context.querySelector('.js__submit-form-inner');
    if (reportButton) {
      const form = reportButton.querySelector('form');
      reportButton.addEventListener('click', form.submit.bind(form));
    }
    if (targetObj.type === 'user') {
      await _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.modules.profile.profile_load(context);
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('at')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_9__["Shared"].esgst.modules.generalAccurateTimestamp.at_getTimestamps(context);
    }
    triggerObj.reposition();
  }
}
const generalContentLoader = new GeneralContentLoader();


/***/ }),
/* 406 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsReceivedReplyBoxPopup", function() { return commentsReceivedReplyBoxPopup; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(212);







class CommentsReceivedReplyBoxPopup extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Pops up a reply box when you mark a giveaway as received (in your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaways/won"
      }, "won"), " page) so that you can add a comment thanking the creator.")),
      id: 'rrbp',
      name: 'Received Reply Box Popup',
      sg: true,
      type: 'comments'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.wonPath) return;
    _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.giveawayFeatures.push(this.rrbp_addEvent.bind(this));
  }
  rrbp_addEvent(giveaways) {
    giveaways.forEach(giveaway => {
      let feedback = giveaway.outerWrap.getElementsByClassName('table__gift-feedback-awaiting-reply')[0];
      if (feedback) {
        feedback.addEventListener('click', this.rrbp_openPopup.bind(this, giveaway));
      }
    });
  }
  rrbp_openPopup(giveaway) {
    let popup, textArea;
    popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_3__["Popup"]({
      addProgress: true,
      addScrollable: true,
      icon: 'fa-comment',
      title: `Add a comment:`
    });
    _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].insert(popup.scrollable, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("textarea", {
      ref: ref => textArea = ref
    }));
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cfh')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.modules.commentsCommentFormattingHelper.cfh_addPanel(textArea);
    }
    _components_Button__WEBPACK_IMPORTED_MODULE_6__["Button"].create([{
      template: 'success',
      name: 'Save',
      onClick: async () => {
        await _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.saveComment(null, '', '', textArea.value, giveaway.url, popup.progressBar);
        popup.close();
      }
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Saving...'
    }]).insert(popup.description, 'beforeend');
    popup.open(() => {
      textArea.focus();
    });
  }
}
const commentsReceivedReplyBoxPopup = new CommentsReceivedReplyBoxPopup();


/***/ }),
/* 407 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "giveawaysModule", function() { return giveawaysModule; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(220);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(212);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(144);











const createElements = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  getUser = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].getUser.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  hideGame = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].hideGame.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  sortContent = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].sortContent.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]);
class Giveaways extends _class_Module__WEBPACK_IMPORTED_MODULE_5__["Module"] {
  constructor() {
    super();
    this.info = {
      endless: true,
      id: 'giveaways',
      featureMap: {
        endless: this.giveaways_load.bind(this)
      }
    };
  }
  async giveaways_load(context, main, source, endless) {
    if (context.getAttribute && context.getAttribute('data-rfi')) return;
    let giveaways = await this.giveaways_get(context, main, null, false, null, false, endless);
    if (!giveaways.length) return;
    const lightbox = document.querySelector('.lightbox');
    if (!lightbox) {
      document.body.insertAdjacentHTML('afterbegin', '<div class="lightbox hide"><div class="lightbox-header"><div class="lightbox-header-description"><div class="lightbox-header-description-name"></div><div class="lightbox-header-description-count"></div></div><div class="lightbox-header-icons"><i data-category="images" class="lightbox-header-icon fa fa-camera"></i><i data-category="videos" class="lightbox-header-icon fa fa-video-camera"></i><i class="lightbox-header-icon lightbox-header-icon--close fa fa-times"></i></div></div><div class="lightbox-status lightbox-status--loading"><div><div class="lightbox-status-icon"><i class="fa fa-cog fa-spin"></i></div><div class="lightbox-status-text">Please wait</div></div></div><div class="lightbox-status lightbox-status--empty"><div><div class="lightbox-status-icon"><i class="fa fa-picture-o"></i></div><div class="lightbox-status-text">No results</div></div></div><div class="lightbox-content"><div class="lightbox-content-nav"><div class="lightbox-content-nav-btn lightbox-content-nav-btn--prev"><div class="lightbox-content-nav-btn-icon"><i class="fa fa-angle-left"></i></div></div><div class="lightbox-content-nav-btn lightbox-content-nav-btn--next"><div class="lightbox-content-nav-btn-icon"><i class="fa fa-angle-right"></i></div></div></div><div class="lightbox-content-image"></div></div><div class="lightbox-footer-outer"><div class="lightbox-footer-inner"><div class="lightbox-thumbnails"></div></div></div></div>');
    }
    let sortIndex = _class_Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].findData('current', 'giveaways').length;
    for (const giveaway of giveaways) {
      giveaway.sortIndex = sortIndex;
      sortIndex += 1;
    }
    _class_Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].addData('current', 'giveaways', giveaways, endless);
    for (let feature of this.esgst.giveawayFeatures) {
      await feature(giveaways, main, source);
    }
    giveaways.forEach(giveaway => this.giveaways_reorder(giveaway));
    if (this.esgst.gas && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get(this.esgst.gas.autoKey)) {
      sortContent(_class_Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].findData('current', 'giveaways'), _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get(this.esgst.gas.optionKey));
    }
    if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.gf && this.esgst.gf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get(`gf_enable${this.esgst.gf.type}`)) {
      this.esgst.modules.giveawaysGiveawayFilters.filters_filter(this.esgst.gf, false, endless);
    }
    if (!main && this.esgst.gfPopup && this.esgst.gfPopup.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get(`gf_enable${this.esgst.gfPopup.type}`)) {
      this.esgst.modules.giveawaysGiveawayFilters.filters_filter(this.esgst.gfPopup);
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('mm_enableGiveaways') && this.esgst.mm_enable) {
      this.esgst.mm_enable(_class_Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].findData('current', 'giveaways'), 'Giveaways');
    }
  }
  async giveaways_get(context, main, mainUrl, hr, key, ged, endless) {
    let giveaway, giveaways, i, mainContext, matches, query;
    giveaways = [];
    if (!hr && main && (this.esgst.createdPath || this.esgst.enteredPath || this.esgst.wonPath || this.esgst.archivePath)) {
      query = _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.getSelectors(endless, ['X.giveaway__row-outer-wrap', 'X.featured__outer-wrap--giveaway', `.table:not(.table--summary) X.table__row-outer-wrap`]);
    } else if (this.esgst.gamePath) {
      query = _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.getSelectors(endless, ['X.giveaway__row-outer-wrap']);
    } else {
      query = _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.getSelectors(endless, ['X.giveaway__row-outer-wrap', 'X.featured__outer-wrap--giveaway']);
    }
    if (key) {
      mainContext = context;
    } else {
      if (mainUrl) {
        mainContext = context;
        key = 'data';
      } else {
        mainContext = document;
        key = 'giveaway';
      }
    }
    matches = context.querySelectorAll(query);
    for (const match of matches) {
      giveaway = await this.giveaways_getInfo(match, mainContext, null, null, main, mainUrl, ged, endless);
      if (giveaway) {
        giveaways.push(giveaway[key]);
      }
    }
    return giveaways;
  }
  async giveaways_getInfo(context, mainContext, ugd, ugdType, main, mainUrl, ged, endless) {
    let chance, i, info, key, keys, match, n, savedUser, thinHeadings;
    const giveaway = {
      creators: [],
      groups: [],
      winners: []
    };
    giveaway.outerWrap = context;
    giveaway.gameId = giveaway.outerWrap.getAttribute('data-game-id');
    info = await this.esgst.modules.games.games_getInfo(giveaway.outerWrap);
    if (info) {
      giveaway.id = info.id;
      giveaway.type = info.type;
      if (this.esgst.games && this.esgst.games[giveaway.type][giveaway.id]) {
        keys = ['owned', 'wishlisted', 'previouslyWishlisted', 'followed', 'hidden', 'ignored', 'previouslyEntered', 'previouslyWon', 'reducedCV', 'noCV', 'banned', 'removed'];
        for (i = 0, n = keys.length; i < n; ++i) {
          key = keys[i];
          if (key === 'banned' && _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.delistedGames.banned.indexOf(parseInt(giveaway.id)) > -1) {
            giveaway[key] = true;
          } else if (key === 'removed' && (_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.delistedGames.removed.indexOf(parseInt(giveaway.id)) > -1 || _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.games[giveaway.type][giveaway.id].removed)) {
            giveaway[key] = true;
          } else if (_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.games[giveaway.type][giveaway.id][key === 'previouslyEntered' ? 'entered' : key === 'previouslyWon' ? 'won' : key]) {
            giveaway[key] = true;
          }
        }
      }
    }
    const giveawayPath = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].testPath('Giveaway', 'sg', mainUrl || window.location.pathname);
    const createdPath = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].testPath('My Giveaways - Created', 'sg', mainUrl || window.location.pathname);
    const enteredPath = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].testPath('My Giveaways - Entered', 'sg', mainUrl || window.location.pathname);
    const wonPath = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].testPath('My Giveaways - Won', 'sg', mainUrl || window.location.pathname);
    const wishlistPath = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].testPath('Community Wishlist', 'sg', mainUrl || window.location.pathname);
    const archivePath = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].testPath('Archive', 'sg', mainUrl || window.location.pathname);
    const giveawaysPath = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].testPath('Giveaways', 'sg', mainUrl || window.location.pathname);
    const gamePath = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].testPath('Game', 'sg', mainUrl || window.location.pathname);
    const groupPath = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].testPath('Group', 'sg', mainUrl || window.location.pathname);
    const userPath = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].testPath('User - Giveaways - Sent', 'sg', mainUrl || window.location.pathname);
    const userWonPath = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].testPath('User - Giveaways - Won', 'sg', mainUrl || window.location.pathname);
    if (giveaway.outerWrap.classList.contains('table__row-outer-wrap') && giveawayPath) {
      return;
    }
    giveaway.innerWrap = giveaway.outerWrap.querySelector(`.giveaway__row-inner-wrap, .featured__inner-wrap, .table__row-inner-wrap`);
    giveaway.avatar = giveaway.outerWrap.querySelector(`.giveaway_image_avatar, .featured_giveaway_image_avatar`);
    giveaway.image = giveaway.outerWrap.querySelector(`.giveaway_image_thumbnail, .giveaway_image_thumbnail_missing, .global__image-outer-wrap--game-medium`);
    giveaway.summary = giveaway.innerWrap.querySelector(`.giveaway__summary, .featured__summary, .table__column--width-fill`);
    if (giveaway.outerWrap.getAttribute('data-entered')) {
      giveaway.entered = true;
    } else if (giveawayPath && main) {
      let button = mainContext.getElementsByClassName('sidebar__entry-delete')[0];
      if (button) {
        giveaway.entered = !button.classList.contains('is-hidden');
      }
    } else if ((enteredPath || wonPath) && main) {
      giveaway.entered = true;
    } else {
      giveaway.entered = giveaway.innerWrap.classList.contains('is-faded');
    }
    giveaway.headingName = giveaway.innerWrap.querySelector(`.giveaway__heading__name, .featured__heading__medium, .table__column__heading`);
    if (wishlistPath) {
      giveaway.heading = giveaway.headingName;
    } else {
      giveaway.heading = giveaway.headingName.parentElement;
    }
    giveaway.name = giveaway.headingName.textContent;
    match = giveaway.name.match(/\s\((.+) Copies\)/);
    if (match) {
      giveaway.name = giveaway.name.replace(match[0], '');
      giveaway.copies = parseInt(match[1].replace(/,/g, '').match(/\d+/)[0]);
    } else {
      giveaway.copies = 1;
    }
    giveaway.url = giveawayPath && main && !ugd ? mainUrl && _Common__WEBPACK_IMPORTED_MODULE_10__["common"].getPath(mainUrl) || window.location.pathname : mainUrl || giveaway.headingName.getAttribute('href');
    if (giveaway.url) {
      giveaway.url = giveaway.url.replace(/\/(entries|groups|region-restrictions|winners)$/, '');
      match = giveaway.url.match(/\/giveaway\/(.+?)(\/.+?)$/);
      if (match) {
        giveaway.code = match[1];
      } else {
        match = giveaway.url.match(/\/giveaways\/(.+)/);
        if (match) {
          giveaway.code = match[1];
          giveaway.sgTools = true;
        } else {
          return;
        }
      }
    }
    giveaway.pinned = giveaway.outerWrap.closest('.pinned-giveaways__outer-wrap');
    thinHeadings = giveaway.innerWrap.querySelectorAll(`.giveaway__heading__thin:not(.dyegb_playtime):not(.dyegb_achievement), .featured__heading__small`);
    n = thinHeadings.length;
    giveaway.points = 0;
    giveaway.copiesContainer = null;
    if (n > 0) {
      if (n > 1) {
        giveaway.copiesContainer = thinHeadings[0];
        giveaway.copies = parseInt(thinHeadings[0].textContent.replace(/,/g, '').match(/\d+/)[0]);
        giveaway.pointsContainer = thinHeadings[1];
        giveaway.points = parseInt(thinHeadings[1].textContent.match(/\d+/)[0]);
      } else {
        giveaway.copies = 1;
        giveaway.pointsContainer = thinHeadings[0];
        giveaway.points = parseInt(thinHeadings[0].textContent.match(/\d+/)[0]);
      }
    }
    giveaway.columns = giveaway.innerWrap.querySelector(`.giveaway__columns, .featured__columns`);
    if (giveaway.columns && (!archivePath || !main)) {
      giveaway.endTimeColumn = giveaway.columns.firstElementChild;
      if (giveaway.endTimeColumn.classList.contains('esgst-ged-source')) {
        giveaway.sourceColumn = giveaway.endTimeColumn;
        giveaway.endTimeColumn = giveaway.sourceColumn.nextElementSibling;
      }
      giveaway.startTimeColumn = giveaway.columns.querySelector(`.giveaway__column--width-fill.text-right, .featured__column--width-fill.text-right`);
      giveaway.started = !giveaway.endTimeColumn.textContent.match(/Begins/);
      giveaway.endTime = parseInt(giveaway.endTimeColumn.lastElementChild.getAttribute('data-timestamp')) * 1e3;
      giveaway.ended = Boolean(giveaway.deleted || giveaway.endTimeColumn.textContent.match(/Ended/));
      giveaway.startTime = parseInt(giveaway.startTimeColumn.firstElementChild.getAttribute('data-timestamp')) * 1e3;
      giveaway.creatorContainer = giveaway.startTimeColumn.querySelector(`a[href*="/user/"], a[style]`);
    } else {
      giveaway.started = true;
    }
    if (main && archivePath) {
      giveaway.startTimeColumn = giveaway.innerWrap.querySelector(`[data-timestamp]`);
      if (giveaway.startTimeColumn) {
        giveaway.startTime = parseInt(giveaway.startTimeColumn.getAttribute('data-timestamp')) * 1e3;
      } else {
        giveaway.startTime = 0;
      }
      giveaway.creatorContainer = giveaway.innerWrap.querySelector(`a[href*="/user/"]`);
    }
    if (!giveaway.endTime && main && (createdPath || enteredPath || wonPath)) {
      giveaway.endTime = giveaway.innerWrap.querySelector(`[data-timestamp]`);
      if (giveaway.endTime) {
        giveaway.endTimeColumn = giveaway.endTime.parentElement;
        giveaway.started = !giveaway.endTimeColumn.textContent.match(/Begins/);
        giveaway.deleted = giveaway.endTimeColumn.parentElement.textContent.match(/Deleted/);
        giveaway.endTime = parseInt(giveaway.endTime.getAttribute('data-timestamp')) * 1e3;
        giveaway.ended = Boolean(giveaway.deleted || giveaway.endTimeColumn.parentElement.textContent.match(/Ended/));
      } else {
        giveaway.endTime = 0;
        giveaway.ended = true;
      }
    }
    if (giveaway.creatorContainer) {
      giveaway.creator = giveaway.creatorContainer.textContent;
    } else if (ugd) {
      if (ugdType === 'sent') {
        giveaway.creator = ugd;
      }
    } else if (userPath && !userWonPath && main && !ged) {
      giveaway.creator = (mainUrl && _Common__WEBPACK_IMPORTED_MODULE_10__["common"].getPath(mainUrl) || window.location.pathname).match(/^\/user\/(.+?)(\/.*)?$/)[1];
    } else if (createdPath && main) {
      giveaway.creator = _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('username');
    }
    if (giveaway.creator) {
      giveaway.creators.push(giveaway.creator.toLowerCase());
    }
    if (main) {
      if (createdPath) {
        let status = giveaway.outerWrap.querySelector(`.table__column--width-small.text-center:last-of-type`);
        if (status) {
          if (status.textContent.match(/Not\sReceived/)) {
            giveaway.notReceived = true;
          } else if (status.textContent.match(/Received/)) {
            giveaway.received = true;
          } else if (status.textContent.match(/Awaiting\sFeedback/)) {
            giveaway.awaitingFeedback = true;
          }
        }
      } else if (wonPath) {
        giveaway.received = false;
        giveaway.notReceived = false;
        const elements = giveaway.outerWrap.querySelectorAll('.table__column--gift-feedback');
        for (const element of elements) {
          const text = element.textContent.trim();
          if (text.match(/^Received$/) && element.querySelector('.icon-green') || element.querySelector(`.table__gift-feedback-received:not(.is-hidden)`)) {
            giveaway.received = true;
            break;
          }
          if (text.match(/^Not\sReceived$/) && element.querySelector('.icon-red') || element.querySelector(`.table__gift-feedback-not-received:not(.is-hidden)`)) {
            giveaway.notReceived = true;
            break;
          }
        }
        giveaway.awaitingFeedback = !giveaway.received && !giveaway.notReceived;
      }
    }
    giveaway.created = giveaway.creator === _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('username');
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gf') && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gf_s') && main) {
      let savedGiveaway = this.esgst.giveaways[giveaway.code];
      if ((giveawaysPath || gamePath || groupPath) && savedGiveaway && savedGiveaway.hidden && savedGiveaway.code && savedGiveaway.endTime && savedGiveaway.endTime > Date.now()) {
        giveaway.outerWrap.classList.add('esgst-hidden');
        giveaway.outerWrap.setAttribute('data-esgst-not-filterable', 'gf');
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gf_s_s')) {
          _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.modules.giveawaysGiveawayFilters.updateSingleCounter();
        }
      }
    }
    giveaway.links = giveaway.innerWrap.getElementsByClassName('giveaway__links')[0];
    if (giveaway.links) {
      giveaway.links.classList.add('esgst-giveaway-links');
      giveaway.entriesLink = giveaway.links.firstElementChild;
      giveaway.commentsLink = giveaway.entriesLink.nextElementSibling;
    } else if (giveawayPath) {
      giveaway.entriesLink = mainContext.getElementsByClassName('sidebar__navigation__item__count')[1];
      giveaway.commentsLink = mainContext.getElementsByClassName('sidebar__navigation__item__count')[0];
    }
    if (giveaway.entriesLink && giveaway.commentsLink) {
      giveaway.entriesLink.setAttribute('data-draggable-id', 'entries');
      giveaway.commentsLink.setAttribute('data-draggable-id', 'comments');
      giveaway.entries = parseInt(giveaway.entriesLink.textContent.replace(/,/g, '').match(/\d+/)[0]);
      giveaway.comments = parseInt(giveaway.commentsLink.textContent.replace(/,/g, '').match(/\d+/)[0]);
    }
    if (!giveaway.entriesLink && !wonPath) {
      const entriesLink = giveaway.innerWrap.querySelectorAll('.table__column--width-small')[createdPath ? 1 : 0];
      if (entriesLink) {
        giveaway.entriesLink = entriesLink;
        giveaway.entries = parseInt(entriesLink.textContent.replace(/,/g, ''));
      }
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(giveaway.summary, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      ref: ref => giveaway.extraPanel = ref
    }));
    giveaway.panel = giveaway.innerWrap.getElementsByClassName('esgst-giveaway-panel')[0];
    if (!giveaway.panel && (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gwc') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gwr') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gptw') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gp') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('elgb') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('cewgd'))) {
      if (giveaway.links) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(giveaway.links, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
          className: "esgst-panel-flexbox",
          ref: ref => giveaway.panelFlexbox = ref
        }));
        giveaway.panelFlexbox.appendChild(giveaway.links);
        giveaway.panel = createElements(giveaway.panelFlexbox, 'beforeend', [{
          attributes: {
            class: 'giveaway__columns esgst-giveaway-panel'
          },
          type: 'div'
        }]);
      } else if (giveaway.columns) {
        if (archivePath) {
          giveaway.columns.style.justifyContent = 'flex-end';
          giveaway.panel = createElements(giveaway.columns, 'afterend', [{
            attributes: {
              class: 'giveaway__columns esgst-giveaway-panel'
            },
            type: 'div'
          }]);
        } else {
          giveaway.panel = createElements(giveaway.columns, 'afterend', [{
            attributes: {
              class: 'featured__columns esgst-giveaway-panel'
            },
            type: 'div'
          }]);
        }
      } else if ((enteredPath || wonPath && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('cewgd') && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('cewgd_w') && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('cewgd_w_e')) && (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gwc') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gwr') || _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gptw'))) {
        giveaway.panel = createElements(giveaway.innerWrap.firstElementChild.nextElementSibling, 'afterend', [{
          attributes: {
            class: 'table__column--width-small text-center esgst-giveaway-panel'
          },
          type: 'div'
        }]);
      }
    }
    if (giveaway.sgTools && !giveaway.panel.getElementsByClassName('esgst-ge-sgt-button')[0]) {
      createElements(giveaway.panel, 'beforeend', [{
        attributes: {
          class: 'esgst-ge-sgt-button esgst-giveaway-column-button',
          ['data-draggable-id']: 'sgTools',
          href: `https://www.sgtools.info/giveaways/${giveaway.code}`,
          target: '_blank'
        },
        type: 'a',
        children: [{
          attributes: {
            class: 'form__submit-button'
          },
          text: 'SGTools',
          type: 'div'
        }]
      }]);
    }
    giveaway.elgbPanel = giveaway.panel;
    giveaway.levelColumn = giveaway.outerWrap.querySelector(`.giveaway__column--contributor-level, .featured__column--contributor-level`);
    giveaway.level = giveaway.levelColumn ? parseInt(giveaway.levelColumn.textContent.match(/\d+/)[0]) : 0;
    giveaway.inviteOnly = giveaway.outerWrap.querySelector(`.giveaway__column--invite-only, .featured__column--invite-only`);
    giveaway.regionRestricted = giveaway.outerWrap.querySelector(`.giveaway__column--region-restricted:not(.touhou_giveaway_points), .featured__column--region-restricted:not(.touhou_giveaway_points)`);
    giveaway.group = giveaway.outerWrap.querySelector(`.giveaway__column--group, .featured__column--group`);
    giveaway.whitelist = giveaway.outerWrap.querySelector(`.giveaway__column--whitelist, .featured__column--whitelist`);
    giveaway.public = !giveaway.sgTools && !giveaway.inviteOnly && !giveaway.regionRestricted && !giveaway.group && !giveaway.whitelist;
    giveaway.touhouBox = giveaway.outerWrap.querySelector('.touhou_giveaway_points');
    if (!main || !giveawayPath) {
      if (giveaway.inviteOnly) {
        createElements(giveaway.inviteOnly, 'atinner', [{
          attributes: {
            class: 'fa fa-lock'
          },
          type: 'i'
        }]);
      }
      if (giveaway.group) {
        createElements(giveaway.group, 'atinner', [{
          attributes: {
            class: 'fa fa-user'
          },
          type: 'i'
        }]);
      }
      if (giveaway.whitelist) {
        createElements(giveaway.whitelist, 'atinner', [{
          attributes: {
            class: 'fa fa-heart'
          },
          type: 'i'
        }]);
      }
    }
    chance = context.getElementsByClassName('esgst-gwc')[0];
    giveaway.chance = chance ? parseFloat(chance.getAttribute('data-chance')) : 0;
    giveaway.projectedChance = chance ? parseFloat(chance.getAttribute('data-projectedChance')) : 0;
    giveaway.chancePerPoint = giveaway.chance / Math.max(1, giveaway.points);
    giveaway.projectedChancePerPoint = giveaway.projectedChance / Math.max(1, giveaway.points);
    giveaway.blacklist = giveaway.outerWrap.getAttribute('data-blacklist');
    giveaway.error = giveaway.outerWrap.getAttribute('data-error');
    const ratio = context.getElementsByClassName('esgst-gwr')[0];
    giveaway.ratio = ratio ? parseFloat(ratio.getAttribute('data-ratio')) : 0;
    giveaway.projectedRatio = ratio ? parseFloat(ratio.getAttribute('data-projectedRatio')) : 0;
    const pointsToWin = context.getElementsByClassName('esgst-gptw')[0];
    giveaway.pointsToWin = pointsToWin ? parseFloat(pointsToWin.getAttribute('data-pointsToWin')) : 0;
    giveaway.enterable = giveaway.outerWrap.getAttribute('data-enterable');
    giveaway.currentlyEnterable = giveaway.outerWrap.getAttribute('data-currently-enterable');
    if (main) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gr') && giveaway.creator === _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('username') && (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gr_a') || giveaway.ended && (giveaway.entries === 0 || giveaway.entries < giveaway.copies)) && (!_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gr_r') || !this.esgst.giveaways[giveaway.code] || !this.esgst.giveaways[giveaway.code].recreated) && !giveaway.heading.getElementsByClassName('esgst-gr-button')[0]) {
        let button = createElements(giveaway.headingName, 'beforebegin', [{
          attributes: {
            class: 'esgst-gr-button',
            ['data-draggable-id']: 'gr',
            title: `${getFeatureTooltip('gr', 'Recreate giveaway')}`
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'fa fa-rotate-left'
            },
            type: 'i'
          }]
        }]);
        button.firstElementChild.addEventListener('click', this.esgst.modules.giveawaysGiveawayRecreator.gr_recreateGiveaway.bind(this.esgst.modules.giveawaysGiveawayRecreator, button, giveaway), true);
      }
    }
    let hideButton = giveaway.innerWrap.querySelector(`.giveaway__hide, .featured__giveaway__hide`);
    if (hideButton && !hideButton.classList.contains('fa-eye')) {
      if (!main || endless) {
        if (hideButton.classList.contains('featured__giveaway__hide')) {
          hideButton = hideButton.parentElement;
        }
        let temp = hideButton.previousElementSibling;
        createElements(hideButton, 'atouter', [{
          attributes: {
            class: 'fa fa-eye-slash giveaway__hide giveaway__icon',
            title: getFeatureTooltip(null, 'Hide all giveaways for this game')
          },
          type: 'i'
        }]);
        hideButton = temp.nextElementSibling;
        hideButton.addEventListener('click', hideGame.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"], hideButton, giveaway.gameId, giveaway.name, giveaway.id, giveaway.type));
      } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('lastSyncHiddenGames') > 0) {
        hideButton.addEventListener('click', () => {
          this.esgst.hidingGame = {
            id: giveaway.id,
            type: giveaway.type
          };
        });
      }
    }
    if (hideButton) {
      if (hideButton.classList.contains('featured__giveaway__hide')) {
        hideButton.parentElement.setAttribute('data-draggable-id', 'hideGame');
      } else {
        hideButton.setAttribute('data-draggable-id', 'hideGame');
      }
    }
    for (const child of giveaway.heading.children) {
      if (child === giveaway.headingName || child.classList.contains('giveaway__heading__name') || child.classList.contains('featured__heading__medium')) {
        child.setAttribute('data-draggable-id', 'name');
        continue;
      }
      if (child.textContent.match(/\(.+?\sCopies\)/)) {
        child.setAttribute('data-draggable-id', 'copies');
        continue;
      }
      if (child.textContent.match(/\(.+?P\)/)) {
        child.setAttribute('data-draggable-id', 'points');
        continue;
      }
      if (child.getAttribute('href') && child.getAttribute('href').match(/store.steampowered.com/)) {
        child.setAttribute('data-draggable-id', 'steam');
        continue;
      }
      if (child.matches('.giveaway__icon.fa-camera[data-lightbox-id]')) {
        child.setAttribute('data-draggable-id', 'screenshots-videos');
      }
      if (child.getAttribute('href') && child.getAttribute('href').match(/\/giveaways\/search/)) {
        child.setAttribute('data-draggable-id', 'search');
      }
    }
    /**
     * @property {object} winnerColumns.noWinners
     */
    giveaway.winnerColumns = {};
    giveaway.numWinners = Math.min(giveaway.entries || 0, giveaway.copies);
    if (giveaway.startTimeColumn && giveaway.endTimeColumn) {
      let column = giveaway.endTimeColumn.nextElementSibling;
      while (column && column !== giveaway.startTimeColumn) {
        let key = '';
        let status = '';
        if (column.classList.contains('giveaway__column--positive')) {
          [key, status] = ['received', 'Received'];
        } else if (column.classList.contains('giveaway__column--negative')) {
          [key, status] = ['notReceived', 'Not Received'];
        } else if (column.textContent.trim().match(/Awaiting\sfeedback/)) {
          [key, status] = ['awaitingFeedback', 'Awaiting Feedback'];
        } else if (column.textContent.trim().match(/No\swinners/)) {
          [key, status] = ['noWinners', ''];
        } else {
          continue;
        }
        const winners = [];
        if (key === 'received' || key === 'notReceived') {
          winners.push(...column.textContent.trim().split(/,\s/).filter(x => x));
          giveaway.winners.push(...winners.map(x => ({
            status,
            username: x
          })));
          if (key === 'received') {
            giveaway.winnerNames = winners.map(x => x.toLowerCase());
          }
        }
        giveaway.winnerColumns[key] = {
          column,
          status,
          winners
        };
        column.setAttribute('data-draggable-id', 'winners');
        column = column.nextElementSibling;
      }
    }
    if (!giveaway.winners.length || giveaway.numWinners < 4) {
      giveaway.numWinners = giveaway.winners.length;
    }
    if (giveaway.endTimeColumn) {
      giveaway.endTimeColumn.setAttribute('data-draggable-id', 'endTime');
    }
    if (giveaway.startTimeColumn) {
      giveaway.startTimeColumn.setAttribute('data-draggable-id', 'startTime');
    }
    if (giveaway.inviteOnly) {
      giveaway.inviteOnly.setAttribute('data-draggable-id', 'inviteOnly');
    }
    if (giveaway.whitelist) {
      giveaway.whitelist.setAttribute('data-draggable-id', 'whitelist');
    }
    if (giveaway.group) {
      giveaway.group.setAttribute('data-draggable-id', 'group');
    }
    if (giveaway.regionRestricted) {
      giveaway.regionRestricted.setAttribute('data-draggable-id', 'regionRestricted');
    }
    if (giveaway.levelColumn) {
      giveaway.levelColumn.setAttribute('data-draggable-id', 'level');
    }
    if (giveaway.sourceColumn) {
      giveaway.sourceColumn.setAttribute('data-draggable-id', 'ged');
    }
    if (giveaway.touhouBox) {
      giveaway.touhouBox.setAttribute('data-draggable-id', 'touhou');
    }
    return {
      giveaway: giveaway,
      data: {
        gameId: giveaway.gameId,
        gameSteamId: giveaway.id,
        gameType: giveaway.type,
        gameName: giveaway.name,
        code: giveaway.code,
        copies: giveaway.copies,
        points: giveaway.points,
        ended: giveaway.ended,
        endTime: giveaway.endTime,
        startTime: giveaway.startTime,
        started: giveaway.started,
        creator: giveaway.creator,
        winners: giveaway.numWinners > 3 ? [] : giveaway.winners,
        numWinners: giveaway.numWinners,
        entries: giveaway.entries,
        comments: giveaway.comments,
        level: giveaway.level,
        public: giveaway.public,
        inviteOnly: !!(giveaway.inviteOnly || giveaway.sgTools),
        regionRestricted: !!giveaway.regionRestricted,
        group: !!giveaway.group,
        whitelist: !!giveaway.whitelist,
        v: _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.CURRENT_GIVEAWAY_VERSION
      }
    };
  }
  giveaways_reorder(giveaway) {
    if (giveaway.columns && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.isGiveawayColumnsDefault || giveaway.gvIcons && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.isGiveawayColumnsGvDefault) {
      for (const id of giveaway.gvIcons ? _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('giveawayColumns_gv') : _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('giveawayColumns')) {
        if (id === 'startTime' && _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.isCurrentPath('Archive')) {
          continue;
        }
        const elements = giveaway.outerWrap.querySelectorAll(`[data-draggable-id="${id}"]`);
        for (const element of elements) {
          try {
            const button = _components_Button__WEBPACK_IMPORTED_MODULE_9__["Button"].create().parse(element);
            button.insert(giveaway.gvIcons || giveaway.columns, 'beforeend');
          } catch (err) {
            (giveaway.gvIcons || giveaway.columns).appendChild(element);
          }
          if (giveaway.elementOrdering) {
            continue;
          }
          if (element.getAttribute('data-draggable-id').match(/^(elgb|gp)$/)) {
            element.classList.add('esgst-giveaway-column-button');
          }
          if (!this.esgst.giveawayPath && element.getAttribute('data-draggable-id').match(/steam|screenshots-videos|search|hideGame/)) {
            element.classList.remove('giveaway__icon');
          }
          element.classList.add(this.esgst.giveawayPath ? 'featured__column' : 'giveaway__column');
          if (element.getAttribute('data-color')) {
            element.firstElementChild.style.color = element.getAttribute('data-bgColor');
            element.style.color = '';
            element.style.backgroundColor = '';
          }
        }
      }
      if (giveaway.columns && giveaway.avatar && giveaway.columns.contains(giveaway.avatar)) {
        giveaway.columns.appendChild(giveaway.avatar);
      }
    }
    if (giveaway.panel && (!giveaway.gvIcons && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.isGiveawayPanelDefault || giveaway.gvIcons && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.isGiveawayPanelGvDefault)) {
      for (const id of giveaway.gvIcons ? _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('giveawayPanel_gv') : _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('giveawayPanel')) {
        const elements = giveaway.outerWrap.querySelectorAll(`[data-draggable-id="${id}"]`);
        for (const element of elements) {
          try {
            const button = _components_Button__WEBPACK_IMPORTED_MODULE_9__["Button"].create().parse(element);
            button.insert(giveaway.panel, 'beforeend');
          } catch (err) {
            giveaway.panel.appendChild(element);
          }
          if (giveaway.elementOrdering) {
            continue;
          }
          if (element.getAttribute('data-draggable-id').match(/^(elgb|gp)$/)) {
            element.classList.remove('esgst-giveaway-column-button', this.esgst.giveawayPath ? 'featured__column' : 'giveaway__column');
          } else {
            element.classList.add(this.esgst.giveawayPath ? 'featured__column' : 'giveaway__column');
          }
          if (!this.esgst.giveawayPath && element.getAttribute('data-draggable-id').match(/steam|screenshots-videos|search|hideGame/)) {
            element.classList.remove('giveaway__icon');
          }
          if (element.getAttribute('data-color')) {
            element.style.color = element.getAttribute('data-color');
            element.style.backgroundColor = element.getAttribute('data-bgColor');
          }
        }
      }
    }
    if (giveaway.heading && (!giveaway.gvIcons && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.isGiveawayHeadingDefault || giveaway.gvIcons && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.isGiveawayHeadingGvDefault)) {
      for (const id of giveaway.gvIcons ? _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('giveawayHeading_gv') : _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('giveawayHeading')) {
        const elements = giveaway.outerWrap.querySelectorAll(`[data-draggable-id="${id}"]`);
        for (const element of elements) {
          try {
            const button = _components_Button__WEBPACK_IMPORTED_MODULE_9__["Button"].create().parse(element);
            button.insert(giveaway.heading, 'beforeend');
          } catch (err) {
            giveaway.heading.appendChild(element);
          }
          if (giveaway.elementOrdering) {
            continue;
          }
          if (element.getAttribute('data-draggable-id').match(/^(elgb|gp)$/)) {
            element.classList.remove('esgst-giveaway-column-button');
          }
          if (!this.esgst.giveawayPath && element.getAttribute('data-draggable-id').match(/steam|screenshots-videos|search|hideGame/)) {
            element.classList.add('giveaway__icon');
          }
          element.classList.remove(this.esgst.giveawayPath ? 'featured__column' : 'giveaway__column');
          if (element.getAttribute('data-color')) {
            element.style.color = element.getAttribute('data-color');
            element.style.backgroundColor = element.getAttribute('data-bgColor');
          }
        }
      }
    }
    if (giveaway.links && (!giveaway.gvIcons && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.isGiveawayLinksDefault || giveaway.gvIcons && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.isGiveawayLinksGvDefault)) {
      for (const id of giveaway.gvIcons ? _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('giveawayLinks_gv') : _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('giveawayLinks')) {
        const elements = giveaway.outerWrap.querySelectorAll(`[data-draggable-id="${id}"]`);
        for (const element of elements) {
          try {
            const button = _components_Button__WEBPACK_IMPORTED_MODULE_9__["Button"].create().parse(element);
            button.insert(giveaway.links, 'beforeend');
          } catch (err) {
            giveaway.links.appendChild(element);
          }
          if (giveaway.elementOrdering) {
            continue;
          }
          if (element.getAttribute('data-draggable-id').match(/^(elgb|gp)$/)) {
            element.classList.remove('esgst-giveaway-column-button');
          }
          if (!this.esgst.giveawayPath && element.getAttribute('data-draggable-id').match(/steam|screenshots-videos|search|hideGame/)) {
            element.classList.remove('giveaway__icon');
          }
          element.classList.remove(this.esgst.giveawayPath ? 'featured__column' : 'giveaway__column');
          if (element.getAttribute('data-color')) {
            element.style.color = element.getAttribute('data-color');
            element.style.backgroundColor = element.getAttribute('data-bgColor');
          }
        }
      }
    }
    if (giveaway.extraPanel && (!giveaway.gvIcons && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.isGiveawayExtraPanelDefault || giveaway.gvIcons && !_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.isGiveawayExtraPanelGvDefault)) {
      for (const id of giveaway.gvIcons ? _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('giveawayExtraPanel_gv') : _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('giveawayExtraPanel')) {
        const elements = giveaway.outerWrap.querySelectorAll(`[data-draggable-id="${id}"]`);
        for (const element of elements) {
          try {
            const button = _components_Button__WEBPACK_IMPORTED_MODULE_9__["Button"].create().parse(element);
            button.insert(giveaway.extraPanel, 'beforeend');
          } catch (err) {
            giveaway.extraPanel.appendChild(element);
          }
          if (giveaway.elementOrdering) {
            continue;
          }
          if (element.getAttribute('data-draggable-id').match(/^(elgb|gp)$/)) {
            element.classList.remove('esgst-giveaway-column-button');
          }
          if (!this.esgst.giveawayPath && element.getAttribute('data-draggable-id').match(/steam|screenshots-videos|search|hideGame/)) {
            element.classList.remove('giveaway__icon');
          }
          element.classList.remove(this.esgst.giveawayPath ? 'featured__column' : 'giveaway__column');
          if (element.getAttribute('data-color')) {
            element.style.color = element.getAttribute('data-color');
            element.style.backgroundColor = element.getAttribute('data-bgColor');
          }
        }
      }
    }
    if (giveaway.gcPanel) {
      for (const id of giveaway.gvIcons ? _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gc_categories_gv') : _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('gc_categories')) {
        const elements = giveaway.outerWrap.querySelectorAll(`[data-draggable-id="${id}"]`);
        for (const element of elements) {
          try {
            const button = _components_Button__WEBPACK_IMPORTED_MODULE_9__["Button"].create().parse(element);
            button.insert(giveaway.gcPanel, 'beforeend');
          } catch (err) {
            giveaway.gcPanel.appendChild(element);
          }
          if (giveaway.elementOrdering) {
            continue;
          }
          if (element.getAttribute('data-draggable-id').match(/^(elgb|gp)$/)) {
            element.classList.remove('esgst-giveaway-column-button');
          }
          if (!this.esgst.giveawayPath && element.getAttribute('data-draggable-id').match(/steam|screenshots-videos|search|hideGame/)) {
            element.classList.remove('giveaway__icon');
          }
          element.classList.remove(this.esgst.giveawayPath ? 'featured__column' : 'giveaway__column');
          if (element.getAttribute('data-color')) {
            element.style.color = element.getAttribute('data-color');
            element.style.backgroundColor = element.getAttribute('data-bgColor');
          }
        }
      }
      const loading = giveaway.gcPanel.querySelector('.esgst-gc-loading');
      if (loading) {
        giveaway.gcPanel.appendChild(loading);
      }
    }
  }
}
const giveawaysModule = new Giveaways();


/***/ }),
/* 408 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionsModule", function() { return discussionsModule; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(132);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(144);









const getUser = _Common__WEBPACK_IMPORTED_MODULE_8__["common"].getUser.bind(_Common__WEBPACK_IMPORTED_MODULE_8__["common"]),
  sortContent = _Common__WEBPACK_IMPORTED_MODULE_8__["common"].sortContent.bind(_Common__WEBPACK_IMPORTED_MODULE_8__["common"]);
class Discussions extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      endless: true,
      id: 'discussions',
      featureMap: {
        endless: this.discussions_load.bind(this)
      }
    };
  }
  async discussions_load(context, main, source, endless) {
    let discussions = await this.discussions_get(context, main, endless);
    if (!discussions.length) return;
    const discussionsToAdd = [];
    const tradesToAdd = [];
    let sortIndex = _class_Scope__WEBPACK_IMPORTED_MODULE_5__["Scope"].findData('current', 'discussions').length;
    for (let i = discussions.length - 1; i > -1; --i) {
      discussions[i].sortIndex = sortIndex;
      switch (discussions[i].type) {
        case 'discussion':
          discussionsToAdd.push(discussions[i]);
          sortIndex += 1;
          break;
        case 'trade':
          tradesToAdd.push(discussions[i]);
          break;
      }
    }
    _class_Scope__WEBPACK_IMPORTED_MODULE_5__["Scope"].addData('current', 'discussions', discussionsToAdd, endless);
    _class_Scope__WEBPACK_IMPORTED_MODULE_5__["Scope"].addData('current', 'trades', tradesToAdd, endless);
    if (!main || this.esgst.discussionsPath) {
      if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.df && this.esgst.df.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get(`df_enable${this.esgst.df.type}`)) {
        this.esgst.modules.discussionsDiscussionFilters.filters_filter(this.esgst.df, false, endless);
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('ds') && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('ds_auto')) {
        sortContent(_class_Scope__WEBPACK_IMPORTED_MODULE_5__["Scope"].findData('main', 'discussions'), _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('ds_option'));
      }
    }
    if (!main || this.esgst.tradesPath) {
      if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.tf && this.esgst.tf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get(`tf_enable${this.esgst.tf.type}`)) {
        this.esgst.modules.tradesTradeFilters.filters_filter(this.esgst.tf, false, endless);
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('mm_enableDiscussions') && this.esgst.mm_enable) {
      this.esgst.mm_enable(_class_Scope__WEBPACK_IMPORTED_MODULE_5__["Scope"].findData('current', 'discussions'), 'Discussions');
    }
    for (const feature of this.esgst.discussionFeatures) {
      await feature(discussions.filter(x => !x.menu && x.type === 'discussion'), main);
    }
    for (const feature of this.esgst.tradeFeatures) {
      await feature(discussions.filter(x => !x.menu && x.type === 'trade'), main);
    }
  }
  async discussions_get(context, main, endless) {
    let discussions = [];
    let elements = context.querySelectorAll('.esgst-dt-menu');
    for (const element of elements) {
      const id = element.getAttribute('href').match(/\/discussion\/(.+?)\//)[1];
      discussions.push({
        code: id,
        container: element.parentElement,
        context: element,
        id,
        menu: true,
        name: element.textContent.trim(),
        saved: this.esgst.discussions[id],
        tagContext: element,
        tagPosition: 'afterend',
        sortIndex: 0,
        type: ''
      });
    }
    elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .table__row-outer-wrap, .esgst-es-page-${endless} .row_outer_wrap, .esgst-es-page-${endless}.table__row-outer-wrap, .esgst-es-page-${endless}.row_outer_wrap` : `.table__row-outer-wrap, .row_outer_wrap`}`);
    for (let i = elements.length - 1; i > -1; --i) {
      let discussion = await this.discussions_getInfo(elements[i], main);
      if (!discussion) continue;
      discussions.push(discussion);
    }
    if (discussions && this.esgst.commentsPath && !_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('oadd') && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('adots') && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('adots_index') === 1) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('idb')) {
        await this.esgst.modules.discussionsImprovedDiscussionBookmarks.addButtons(discussions);
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('df')) {
        this.esgst.modules.discussionsDiscussionFilters.df_addButtons(discussions);
      }
    }
    if (context === document && main && this.esgst.discussionPath) {
      var _discussion$tagContex, _discussion$tagContex2, _discussion$heading$g, _discussion$heading, _discussion$heading$f, _discussion$heading2;
      let matchPath = window.location.pathname.match(/^\/discussion\/(.+?)\//);
      let discussion = {
        code: matchPath ? matchPath[1] : null,
        heading: document.getElementsByClassName('page__heading__breadcrumbs')[0],
        headingContainer: document.getElementsByClassName('page__heading')[0],
        menu: false,
        sortIndex: 0,
        type: ''
      };
      discussion.id = discussion.code;
      discussion.container = discussion.headingContainer;
      discussion.tagContext = discussion.container.querySelector(`[href*="/discussion/"]`);
      discussion.name = (_discussion$tagContex = (_discussion$tagContex2 = discussion.tagContext) === null || _discussion$tagContex2 === void 0 || (_discussion$tagContex2 = _discussion$tagContex2.textContent) === null || _discussion$tagContex2 === void 0 ? void 0 : _discussion$tagContex2.trim()) !== null && _discussion$tagContex !== void 0 ? _discussion$tagContex : null;
      discussion.tagPosition = 'afterend';
      discussion.saved = this.esgst.discussions[discussion.code];
      discussion.title = (_discussion$heading$g = (_discussion$heading = discussion.heading) === null || _discussion$heading === void 0 || (_discussion$heading = _discussion$heading.getElementsByTagName('H1')[0]) === null || _discussion$heading === void 0 ? void 0 : _discussion$heading.textContent.trim()) !== null && _discussion$heading$g !== void 0 ? _discussion$heading$g : null;
      discussion.category = (_discussion$heading$f = (_discussion$heading2 = discussion.heading) === null || _discussion$heading2 === void 0 || (_discussion$heading2 = _discussion$heading2.firstElementChild) === null || _discussion$heading2 === void 0 || (_discussion$heading2 = _discussion$heading2.nextElementSibling) === null || _discussion$heading2 === void 0 || (_discussion$heading2 = _discussion$heading2.nextElementSibling) === null || _discussion$heading2 === void 0 ? void 0 : _discussion$heading2.textContent) !== null && _discussion$heading$f !== void 0 ? _discussion$heading$f : null;
      discussion.type = 'discussion';
      discussions.push(discussion);
    }
    return discussions;
  }
  async discussions_getInfo(context, main) {
    let match;
    if (context.closest('.poll')) {
      return;
    }
    const discussion = {};
    discussion.menu = false;
    discussion.sortIndex = 0;
    discussion.outerWrap = context;
    discussion.innerWrap = discussion.outerWrap.querySelector(`.table__row-inner-wrap, .row_inner_wrap`);
    if (!discussion.innerWrap) {
      return;
    }
    discussion.avatarColumn = discussion.innerWrap.firstElementChild;
    if (!discussion.avatarColumn) {
      return;
    }
    discussion.avatar = discussion.avatarColumn.firstElementChild;
    if (!discussion.avatar) {
      return;
    }
    discussion.headingColumn = discussion.avatarColumn.nextElementSibling;
    discussion.headingContainer = discussion.headingColumn.firstElementChild;
    if (!discussion.headingContainer) {
      return;
    }
    discussion.bookmarkNode = discussion.headingColumn.querySelector('.icon-heading.fa.fa-bookmark, .icon-heading.fa.fa-bookmark-o');
    discussion.closed = discussion.headingContainer.querySelector('.fa-lock');
    discussion.heading = discussion.headingContainer.lastElementChild;
    discussion.info = discussion.headingContainer.nextElementSibling;
    if (!discussion.heading) {
      return;
    }
    discussion.title = discussion.heading.textContent;
    discussion.url = discussion.heading.getAttribute('href');
    if (!discussion.url) {
      return;
    }
    match = discussion.url.match(/(discussion|trade)\/(.+?)\//);
    if (!match) {
      return;
    }
    discussion.type = match[1];
    discussion.code = match[2];
    switch (discussion.type) {
      case 'discussion':
        discussion.saved = this.esgst.discussions[discussion.code];
        if (main && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('df') && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('df_s') && discussion.saved && discussion.saved.hidden) {
          discussion.outerWrap.classList.add('esgst-hidden');
          discussion.outerWrap.setAttribute('data-esgst-not-filterable', 'df');
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('df_s_s')) {
            _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.discussionsDiscussionFilters.updateSingleCounter();
          }
          return;
        }
        discussion.categoryContainer = discussion.info.firstElementChild;
        if (discussion.headingColumn.nextElementSibling) {
          discussion.category = discussion.categoryContainer.textContent;
          discussion[discussion.category.replace(/\W/g, '').replace(/^(.)/, (m, p1) => {
            return p1.toLowerCase();
          })] = true;
        } else {
          discussion.category = '';
        }
        discussion.createdContainer = discussion.categoryContainer.nextElementSibling;
        break;
      case 'trade':
        discussion.saved = this.esgst.trades[discussion.code];
        if (main && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('tf') && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('tf_s') && discussion.saved && discussion.saved.hidden) {
          discussion.outerWrap.classList.add('esgst-hidden');
          discussion.outerWrap.setAttribute('data-esgst-not-filterable', 'tf');
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('tf_s_s')) {
            _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.modules.tradesTradeFilters.updateSingleCounter();
          }
          return;
        }
        discussion.info = discussion.headingColumn.nextElementSibling;
        discussion.createdContainer = discussion.info.firstElementChild.firstElementChild.nextElementSibling;
        discussion.reputationElement = discussion.info.querySelector('.reputation');
        if (!discussion.reputationElement) {
          break;
        }
        discussion.positiveReputationElement = discussion.reputationElement.querySelector('.is_positive');
        discussion.negativeReputationElement = discussion.reputationElement.querySelector('.is_negative');
        discussion.positiveReputation = parseInt(discussion.positiveReputationElement.textContent.replace(/[^\d]/g, ''));
        if (!discussion.negativeReputationElement) {
          break;
        }
        discussion.negativeReputation = parseInt(discussion.negativeReputationElement.textContent.replace(/[^\d]/g, ''));
        break;
    }
    discussion.bookmarked = !!discussion.bookmarkNode;
    if (discussion.saved) {
      discussion.visited = discussion.saved.visited;
      discussion.subscribed = typeof discussion.saved.subscribed !== 'undefined';
    }
    if (discussion.createdContainer) {
      discussion.createdTime = discussion.createdContainer.textContent;
      discussion.createdTimestamp = parseInt(discussion.createdContainer.getAttribute('data-timestamp')) * 1e3;
      if (this.esgst.giveawaysPath) {
        discussion.author = (discussion.avatar.getAttribute('href') || discussion.avatar.dataset.href).match(/\/user\/(.+)/)[1];
      } else {
        var _discussion$createdCo, _discussion$createdCo2;
        discussion.author = (_discussion$createdCo = (_discussion$createdCo2 = discussion.createdContainer.nextElementSibling) === null || _discussion$createdCo2 === void 0 ? void 0 : _discussion$createdCo2.textContent) !== null && _discussion$createdCo !== void 0 ? _discussion$createdCo : null;
      }
    }
    if (!discussion.author) {
      return;
    }
    discussion.authors = [discussion.author.toLowerCase()];
    discussion.created = discussion.author === _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('username');
    discussion.poll = discussion.outerWrap.querySelector('.fa-align-left');
    discussion.commentsColumn = this.esgst.st ? discussion.headingColumn.nextElementSibling.nextElementSibling : discussion.headingColumn.nextElementSibling || discussion.headingColumn.children[1];
    if (discussion.commentsColumn) {
      discussion.comments = parseInt(discussion.commentsColumn.firstElementChild.textContent.replace(/,/g, ''));
      if ((this.esgst.giveawaysPath || this.esgst.commentsPath) && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('adots') && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('adots_index') === 1 && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('ns')) {
        discussion.commentsColumn.firstElementChild.textContent = discussion.commentsColumn.firstElementChild.textContent.replace(/\sComments/, '');
      }
    }
    discussion.lastPost = discussion.outerWrap.querySelector(`.table__column--last-comment, .row_trade_update_user`);
    if (discussion.lastPost && discussion.lastPost.firstElementChild && this.esgst.st) {
      discussion.lastPostTime = discussion.lastPost.firstElementChild.firstElementChild.nextElementSibling;
      discussion.lastPostAuthor = discussion.lastPostTime.parentNode.nextElementSibling.firstElementChild;
      discussion.lastPostCode = discussion.lastPostAuthor.nextElementSibling.nextElementSibling;
      if (discussion.lastPostCode && discussion.lastPostCode.getAttribute('href').match(/\/comment\/(.+)/)) {
        discussion.lastPostCode = discussion.lastPostCode.getAttribute('href').match(/\/comment\/(.+)/)[1];
        discussion.wasLastPostBump = false;
      } else {
        discussion.lastPostCode = null;
        discussion.wasLastPostBump = true;
      }
      discussion.lastPostAuthor = discussion.lastPostAuthor.textContent;
      discussion.lastPostTimestamp = discussion.lastPostTime.getAttribute('data-timestamp');
      discussion.lastPostTime = discussion.lastPostTime.textContent;
    } else if (discussion.lastPost && discussion.lastPost.firstElementChild) {
      discussion.lastPostTime = discussion.lastPost.firstElementChild.firstElementChild;
      discussion.lastPostAuthor = discussion.lastPostTime.nextElementSibling;
      discussion.lastPostCode = discussion.lastPostAuthor.lastElementChild.getAttribute('href').match(/\/comment\/(.+)/);
      if (discussion.lastPostCode) {
        discussion.lastPostCode = discussion.lastPostCode[1];
      }
      discussion.lastPostAuthor = discussion.lastPostAuthor.firstElementChild.textContent;
      discussion.lastPostTimestamp = discussion.lastPostTime.getAttribute('data-timestamp');
      discussion.lastPostTime = discussion.lastPostTime.firstElementChild.textContent;
    }
    discussion.id = discussion.code;
    discussion.name = discussion.title;
    discussion.container = discussion.headingContainer;
    discussion.tagContext = discussion.headingContainer;
    discussion.tagPosition = 'beforeend';
    return discussion;
  }
}
const discussionsModule = new Discussions();


/***/ }),
/* 409 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "discussionPanelsModule", function() { return discussionPanelsModule; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);


class DiscussionPanels extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      endless: true,
      id: 'discussionPanels'
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('ct') && (this.esgst.giveawaysPath || this.esgst.discussionsPath || this.esgst.commentsPath || this.esgst.tradesPath) || _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('gdttt') && (this.esgst.giveawaysPath || this.esgst.discussionsPath || this.esgst.commentsPath || this.esgst.discussionsTicketsTradesPath)) {
      this.esgst.endlessFeatures.push(this.esgst.modules.commentsCommentTracker.ct_addDiscussionPanels.bind(this.esgst.modules.commentsCommentTracker));
    }
  }
}
const discussionPanelsModule = new DiscussionPanels();


/***/ }),
/* 410 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commentsModule", function() { return commentsModule; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(132);
/* harmony import */ var _models_Comment__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(411);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(144);










const getUser = _Common__WEBPACK_IMPORTED_MODULE_9__["common"].getUser.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_9__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"]);
class Comments extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      endless: true,
      id: 'comments',
      featureMap: {
        endless: this.comments_load.bind(this)
      }
    };
  }
  async comments_load(context, main, source, endless, mainEndless) {
    const commentsV2 = _models_Comment__WEBPACK_IMPORTED_MODULE_8__["Comment"].parseAll(context);
    _class_Scope__WEBPACK_IMPORTED_MODULE_5__["Scope"].addData('current', 'commentsV2', commentsV2, endless);
    for (const feature of _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.commentV2Features) {
      await feature(commentsV2, main);
    }
    let count, comments, i, n;
    comments = await this.comments_get(context, document, main, endless);
    if (!comments.length) return;
    _class_Scope__WEBPACK_IMPORTED_MODULE_5__["Scope"].addData('current', 'comments', comments, endless);
    for (i = 0, n = comments.length; i < n; ++i) {
      comments[i].index = i;
    }
    for (const feature of _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.commentFeatures) {
      await feature(comments, main);
    }
    if (!main || this.esgst.commentsPath || _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.isCurrentPath('Messages')) {
      if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.cf && this.esgst.cf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get(`cf_enable${this.esgst.cf.type}`)) {
        this.esgst.modules.commentsCommentFilters.filters_filter(this.esgst.cf, false, endless);
      }
      if (!main && this.esgst.cfPopup && this.esgst.cfPopup.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get(`cf_enable${this.esgst.cfPopup.type}`)) {
        this.esgst.modules.commentsCommentFilters.filters_filter(this.esgst.cfPopup, false, endless);
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('ct')) {
      if (!main || _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.isCurrentPath('Messages')) {
        count = 0;
      } else {
        const breadcrumbs = context.querySelectorAll('.page__heading:not([data-esgst]) .page__heading__breadcrumbs');
        count = breadcrumbs[1] || breadcrumbs[0];
        if (count) {
          var _count$firstElementCh;
          count = parseInt((_count$firstElementCh = count.firstElementChild.textContent.replace(/,/g, '').match(/\d+/)) === null || _count$firstElementCh === void 0 ? void 0 : _count$firstElementCh[0]);
        } else {
          count = 0;
        }
      }
      // noinspection JSIgnoredPromiseFromCall
      this.esgst.modules.commentsCommentTracker.ct_getComments(count, comments, null, false, false, false, main || endless || mainEndless);
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('rfi')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('rfi_s') && (!main || _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.isCurrentPath('Messages')) && (!context.getAttribute || !context.getAttribute('data-rfi'))) {
        await this.esgst.modules.commentsReplyFromInbox.rfi_getReplies(comments, main || endless || mainEndless);
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('ged')) {
      this.esgst.ged_addIcons(comments);
    }
  }
  async comments_get(context, mainContext, main, endless) {
    let comment, comments, i, matches, sourceLink;
    comments = [];
    matches = context.querySelectorAll(_Common__WEBPACK_IMPORTED_MODULE_9__["common"].getSelectors(endless, [`X:not(.comment--submit) > .comment__parent`, 'X.comment__child', 'X.comment_inner']));
    sourceLink = mainContext.querySelector(`.page__heading__breadcrumbs a[href*="/giveaway/"], .page__heading__breadcrumbs a[href*="/discussion/"], .page__heading__breadcrumbs a[href*="/ticket/"], .page_heading_breadcrumbs a[href*="/trade/"]`);
    for (i = matches.length - 1; i >= 0; --i) {
      var _Scope$current;
      comment = await this.comments_getInfo(matches[i], ((_Scope$current = _class_Scope__WEBPACK_IMPORTED_MODULE_5__["Scope"].current) === null || _Scope$current === void 0 ? void 0 : _Scope$current.sourceLink) || sourceLink, endless ? this.esgst.users : JSON.parse(getValue('users')), main);
      if (comment) {
        comments.push(comment);
      }
    }
    return comments;
  }
  async comments_getInfo(context, sourceLink, savedUsers, main) {
    let matches, n, source;
    const comment = {};
    comment.comment = context;
    comment.outerWrap = comment.comment;
    comment.parent = comment.comment.parentElement;
    const author = comment.comment.querySelector(`.comment__author, .author_name`);
    if (!author) {
      return;
    }
    comment.author = author.textContent.trim();
    comment.summary = comment.comment.querySelector('.comment__summary, .comment_body');
    comment.isOp = (comment.summary && comment.summary.id) === (comment.parent && comment.parent.id);
    comment.displayState = comment.comment.querySelector(`.comment__display-state, .comment_body_default`);
    comment.text = comment.displayState ? comment.displayState.textContent.trim().replace(/View\sattached\simage\./, '') : '';
    comment.bump = comment.text.replace(/[^A-Za-z]/g, '').match(/^(havea|takea|thanksand|thankyou)?bump(ing|ity|o)?$/i);
    comment.length = comment.text.length;
    comment.words = Array.from(new Set(comment.text.split(/\s/)));
    comment.actions = comment.comment.querySelector(`.comment__actions, .action_list`);
    matches = comment.actions.querySelectorAll(`[href*="/comment/"]`);
    n = matches.length;
    if (n > 0) {
      comment.permalink = matches[n - 1];
    }
    comment.id = comment.permalink ? comment.permalink.getAttribute('href').match(/\/comment\/(.+)/)[1] : '';
    comment.timestamp = parseInt(comment.actions.querySelector(`[data-timestamp]`).getAttribute('data-timestamp'));
    if (!main || _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].common.isCurrentPath('Messages')) {
      if (this.esgst.sg) {
        try {
          source = comment.comment.closest('.comments').previousElementSibling.firstElementChild.firstElementChild.getAttribute('href');
        } catch (e) {
          /**/
        }
      } else {
        source = comment.actions.querySelector(`[href*="/trade/"]`).getAttribute('href');
      }
    }
    if (!source && sourceLink) {
      source = sourceLink.getAttribute('href');
    }
    if (source) {
      source = source.match(/(giveaway|discussion|ticket|trade)\/(.+?)(\/.*)?$/);
      comment.type = `${source[1]}s`;
      comment.code = source[2];
      return comment;
    }
  }
}
const commentsModule = new Comments();


/***/ }),
/* 411 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Comment", function() { return Comment; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(213);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _constants_Namespaces__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(214);
/* harmony import */ var _AttachedImage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(412);
/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(250);









class Comment {
  constructor(generation = 0, parent = null) {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "nodes", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "data", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "author", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "attachedImages", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "generation", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "parent", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "children", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "mrBox", void 0);
    this.nodes = Comment.getDefaultNodes();
    this.data = Comment.getDefaultData();
    this.author = null;
    this.attachedImages = [];
    this.generation = generation;
    this.parent = parent;
    this.children = [];
    this.mrBox = null;
  }
  static getDefaultNodes() {
    return {
      outer: null,
      inner: null,
      summary: null,
      author: null,
      collapseButton: null,
      expandButton: null,
      defaultState: null,
      editState: null,
      editTextArea: null,
      editSaveButton: null,
      editCancelButton: null,
      deleteState: null,
      collapseState: null,
      collapseCount: null,
      actions: null,
      createdTimestamp: null,
      editedTimestamp: null,
      deletedTimestamp: null,
      replyButton: null,
      editButton: null,
      deleteButton: null,
      undeleteButton: null,
      source: null,
      sourceComment: null,
      sourceThread: null,
      permalink: null,
      rmlLink: null,
      rating: null,
      children: null
    };
  }
  static getDefaultData() {
    return {
      id: '',
      isDeleted: false,
      markdown: '',
      createdTimestamp: 0,
      editedTimestamp: 0,
      deletedTimestamp: 0,
      isEdited: false,
      canReply: false,
      canEdit: false,
      canDelete: false,
      canUndelete: false,
      sourceCommentUrl: '',
      sourceCommentAuthor: '',
      sourceThreadUrl: '',
      sourceThreadTitle: '',
      url: '',
      code: '',
      isOp: false,
      isReview: false,
      isReviewPositive: false
    };
  }
  static create(generation = 0, parent = null) {
    switch (_class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].namespace) {
      case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_6__["Namespaces"].SG:
        {
          return new SgComment(generation, parent);
        }
      case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_6__["Namespaces"].ST:
        {
          return new StComment(generation, parent);
        }
    }
    return null;
  }
  static parseAll(context, generation = 0, parent = null) {
    switch (_class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].namespace) {
      case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_6__["Namespaces"].SG:
        {
          return SgComment.parseAll(context, generation, parent);
        }
      case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_6__["Namespaces"].ST:
        {
          return StComment.parseAll(context, generation, parent);
        }
    }
    return null;
  }
}
class SgComment extends Comment {
  constructor(generation = 0, parent = null) {
    super(generation, parent);
  }
  static parseAll(context, generation, parent = null) {
    const comments = [];
    const elements = context.querySelectorAll('.comments > .comment:not(.comment--submit):not([data-esgst-parsed]), :scope > .comment:not(.comment--submit):not([data-esgst-parsed])');
    for (const element of elements) {
      const comment = new SgComment(generation, parent);
      comment.parse(element);
      comments.push(comment);
    }
    return comments;
  }
  parse(outer) {
    this.author = _User__WEBPACK_IMPORTED_MODULE_8__["User"].create();
    this.parseNodes(outer);
    this.parseData();
    if (this.nodes.defaultState) {
      this.attachedImages = _AttachedImage__WEBPACK_IMPORTED_MODULE_7__["AttachedImage"].parseAll(this.nodes.defaultState);
    }
    if (this.nodes.children) {
      this.children = SgComment.parseAll(this.nodes.children, this.generation + 1, this);
    }
  }
  parseNodes(outer) {
    const nodes = Comment.getDefaultNodes();
    const authorNodes = _User__WEBPACK_IMPORTED_MODULE_8__["User"].getDefaultNodes();
    nodes.outer = outer;
    authorNodes.outer = outer;
    nodes.inner = nodes.outer.querySelector('.comment__parent, .comment__child');
    authorNodes.avatarOuter = nodes.inner.querySelector('.global__image-outer-wrap');
    authorNodes.avatarInner = authorNodes.avatarOuter.querySelector('.global__image-inner-wrap');
    nodes.summary = nodes.inner.querySelector('.comment__summary');
    nodes.author = nodes.summary.querySelector('.comment__author');
    nodes.collapseButton = nodes.author.querySelector('.comment__collapse-button');
    nodes.expandButton = nodes.author.querySelector('.comment__expand-button');
    authorNodes.usernameOuter = nodes.author.querySelector('.comment__username');
    authorNodes.usernameInner = authorNodes.usernameOuter.querySelector('[href*="/user/"]');
    authorNodes.role = nodes.author.querySelector('.comment__role-name');
    authorNodes.patreon = nodes.author.querySelector('[data-ui-tooltip*="Patron"]');
    nodes.defaultState = nodes.summary.querySelector('.comment__display-state');
    nodes.editState = nodes.summary.querySelector('.comment__edit-state');
    if (nodes.editState) {
      nodes.editTextArea = nodes.editState.querySelector('[name="description"]');
      nodes.editSaveButton = nodes.editState.querySelector('.js__comment-edit-save');
      nodes.editCancelButton = nodes.editState.querySelector('.js__comment-edit-cancel');
    }
    nodes.deleteState = nodes.summary.querySelector('.comment__delete-state');
    if (nodes.deleteState) {
      nodes.deletedTimestamp = nodes.deleteState.querySelector('[data-timestamp]');
    }
    nodes.collapseState = nodes.summary.querySelector('.comment__collapse-state');
    nodes.actions = nodes.summary.querySelector('.comment__actions');
    const timestampNodes = nodes.actions.querySelectorAll('[data-timestamp]');
    nodes.createdTimestamp = timestampNodes[0];
    if (timestampNodes.length === 2) {
      nodes.editedTimestamp = timestampNodes[1];
    }
    nodes.replyButton = nodes.actions.querySelector('.js__comment-reply');
    nodes.editButton = nodes.actions.querySelector('.js__comment-edit');
    nodes.deleteButton = nodes.actions.querySelector('.js__comment-delete');
    nodes.undeleteButton = nodes.actions.querySelector('.js__comment-undelete');
    nodes.permalink = nodes.actions.querySelector('[href*="/go/comment/"]');
    nodes.children = nodes.outer.querySelector('.comment__children');
    nodes.outer.dataset.esgstParsed = '';
    this.nodes = nodes;
    this.author.nodes = authorNodes;
  }
  parseData() {
    const nodes = this.nodes;
    const data = Comment.getDefaultData();
    data.id = nodes.outer.dataset.commentId;
    data.isDeleted = !!nodes.deletedTimestamp;
    if (nodes.editTextArea) {
      data.markdown = nodes.editTextArea.value;
    }
    if (nodes.deletedTimestamp) {
      data.deletedTimestamp = parseInt(nodes.deletedTimestamp.dataset.timestamp);
    }
    data.createdTimestamp = parseInt(nodes.createdTimestamp.dataset.timestamp);
    if (nodes.editedTimestamp) {
      data.editedTimestamp = parseInt(nodes.editedTimestamp.dataset.timestamp);
    }
    data.isEdited = !!data.editedTimestamp;
    data.canReply = !!nodes.replyButton;
    data.canEdit = !!nodes.editButton;
    data.canDelete = !!nodes.deleteButton;
    data.canUndelete = !!nodes.undeleteButton;
    if (nodes.permalink) {
      data.url = nodes.permalink.getAttribute('href');
      data.code = data.url.split('/')[3]; // /go/comment/...
    }
    data.isOp = !nodes.summary.id;
    this.data = data;
    this.author.parseData();
    this.author.parseExtraData();
  }
  build(context, position) {
    if (this.nodes.outer) {
      this.nodes.outer.remove();
    }
    const patron = this.author.data.patron && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      "data-ui-tooltip": "{\"rows\":[{\"icon\" : [{\"class\" : \"fa-star\", \"color\" : \"#84cfda\"}], \"columns\":[{\"name\" : \"Patron\"}]}]}",
      className: "fa fa-star"
    });
    let outer;
    _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      "data-comment-id": this.data.id,
      className: "comment",
      ref: ref => outer = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: `ajax ${this.parent ? 'comment__child' : 'comment__parent'}`
    }, this.data.isDeleted ? _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "global__image-outer-wrap global__image-outer-wrap--avatar-small global__image-outer-wrap--missing-image"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "fa fa-user"
    })) : _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      href: this.author.data.url,
      className: "global__image-outer-wrap global__image-outer-wrap--avatar-small"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "global__image-inner-wrap",
      style: `background-image:url(${this.author.data.avatar});`
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      id: this.data.code,
      className: "comment__summary"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__author"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "comment__collapse-button fa fa-minus-square-o"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "comment__expand-button fa fa-plus-square-o"
    }), this.data.isDeleted ? _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__username comment__username--deleted"
    }, "Deleted") : _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: `comment__username${this.author.data.op ? ' comment__username--op' : ''}`
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      href: this.author.data.url
    }, this.author.data.username)), this.author.data.roleId && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      href: `/roles/${this.author.data.roleId}`,
      className: "comment__role-name"
    }, `(${this.author.data.roleName})`), this.author.data.patron && (_class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].isLoggedIn ? _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      href: "/account/settings/patreon"
    }, patron) : patron)), this.data.canEdit && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__edit-state is-hidden"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__description"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("form", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "xsrf_token",
      value: _class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].xsrfToken
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "do",
      value: "comment_edit"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "allow_replies",
      value: "1"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "comment_id",
      value: this.data.id
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("textarea", {
      name: "description"
    }, this.data.markdown), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "align-button-container"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      href: "",
      className: "comment__submit-button js__comment-edit-save"
    }, "Save Changes"), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__cancel-button js__comment-edit-cancel"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", null, "Cancel")))))), this.data.isDeleted ? _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__delete-state"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__description markdown markdown--resize-body"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("p", null, "This comment was deleted", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
      "data-timestamp": this.data.deletedTimestamp
    }, _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getTimeSince(this.data.deletedTimestamp)), ' ', "ago."))) : _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__display-state"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__description markdown markdown--resize-body"
    }, this.data.markdown ? _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].parse(_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.markdownParser.text(this.data.markdown)).body.children : '')), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__actions"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
      "data-timestamp": this.data.createdTimestamp
    }, _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getTimeSince(this.data.createdTimestamp)), ' ', "ago", this.data.isEdited && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
      "data-timestamp": this.data.editedTimestamp
    }, "*")), this.data.canReply && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__actions__button js__comment-reply"
    }, "Reply"), this.data.canEdit && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__actions__button js__comment-edit"
    }, "Edit"), this.data.canDelete && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("form", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "xsrf_token",
      value: _class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].xsrfToken
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "do",
      value: "comment_delete"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "allow_replies",
      value: "1"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "comment_id",
      value: this.data.id
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__actions__button js__comment-delete"
    }, "Delete")), this.data.canUndelete && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("form", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "xsrf_token",
      value: _class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].xsrfToken
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "do",
      value: "comment_undelete"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "allow_replies",
      value: "1"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "comment_id",
      value: this.data.id
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__actions__button js__comment-undelete"
    }, "Undelete")), !this.data.isOp && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      rel: "nofollow noopener",
      href: this.data.url,
      className: "comment__actions__button"
    }, "Permalink")), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__collapse-state"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__description markdown markdown--resize-body"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("p", null, "Comment has been collapsed."))))), !this.data.isOp && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__children"
    })));
    this.parseNodes(outer);
    for (const child of this.children) {
      child.build(this.nodes.children, 'beforeend');
    }
  }
}
class StComment extends Comment {
  constructor(generation = 0, parent = null) {
    super(generation, parent);
  }
  static parseAll(context, generation, parent = null) {
    const comments = [];
    const elements = context.querySelectorAll('.comments > .comment_outer:not([data-esgst-parsed]), :scope > .comment_outer:not([data-esgst-parsed]), .reviews > .review_outer:not([data-esgst-parsed]), :scope > .review_outer:not([data-esgst-parsed])');
    for (const element of elements) {
      const comment = new StComment(generation, parent);
      comment.parse(element);
      comments.push(comment);
    }
    return comments;
  }
  parse(outer) {
    this.author = _User__WEBPACK_IMPORTED_MODULE_8__["User"].create();
    this.parseNodes(outer);
    this.parseData();
    if (this.nodes.children) {
      this.children = StComment.parseAll(this.nodes.children, this.generation + 1, this);
    }
  }
  parseNodes(outer) {
    const nodes = Comment.getDefaultNodes();
    const authorNodes = _User__WEBPACK_IMPORTED_MODULE_8__["User"].getDefaultNodes();
    nodes.outer = outer;
    authorNodes.outer = outer;
    nodes.editState = nodes.outer.querySelector('.edit_form');
    if (nodes.editState) {
      nodes.editTextArea = nodes.editState.querySelector('[name="description"]');
      nodes.editSaveButton = nodes.editState.querySelector('.btn_action');
      nodes.editCancelButton = nodes.editState.querySelector('.btn_cancel');
    }
    nodes.inner = nodes.outer.querySelector('.comment_inner, .review_inner');
    nodes.author = nodes.inner.querySelector('.author');
    nodes.collapseButton = nodes.author.querySelector('.comment_collapse_btn');
    nodes.expandButton = nodes.author.querySelector('.comment_expand_btn');
    authorNodes.avatarOuter = nodes.author.querySelector('.author_avatar');
    authorNodes.usernameInner = nodes.author.querySelector('.author_name');
    authorNodes.reputation = nodes.author.querySelector('.author_small');
    if (authorNodes.reputation) {
      authorNodes.positiveReputation = authorNodes.reputation.querySelector('.is_positive');
      authorNodes.negativeReputation = authorNodes.reputation.querySelector('.is_negative');
    }
    nodes.summary = nodes.inner.querySelector('.comment_body, .review_body');
    nodes.defaultState = nodes.summary.querySelector('.comment_body_default, .review_description');
    nodes.deleteState = nodes.summary.querySelector('.comment_body_delete');
    if (nodes.deleteState) {
      nodes.deletedTimestamp = nodes.deleteState.querySelector('[data-timestamp]');
    }
    nodes.actions = nodes.summary.querySelector('.action_list');
    const timestampNodes = nodes.actions.querySelectorAll('[data-timestamp]');
    nodes.createdTimestamp = timestampNodes[0];
    if (timestampNodes.length === 2) {
      nodes.editedTimestamp = timestampNodes[1];
    }
    nodes.replyButton = nodes.actions.querySelector('.js_comment_reply');
    nodes.editButton = nodes.actions.querySelector('.js_comment_edit');
    nodes.deleteButton = nodes.actions.querySelector('.js_comment_delete');
    nodes.undeleteButton = nodes.actions.querySelector('.js_comment_undelete');
    nodes.sourceThread = nodes.actions.querySelector('[href*="/trade/"]');
    if (nodes.sourceThread) {
      nodes.source = nodes.sourceThread.parentElement;
      nodes.sourceComment = nodes.source.querySelector('[href*="/go/comment/"]');
    }
    nodes.permalink = nodes.actions.querySelector('[href*="/go/comment/"]:last-child');
    nodes.collapseState = nodes.summary.querySelector('.comment_body_collapse');
    if (nodes.collapseState) {
      nodes.collapseCount = nodes.collapseState.querySelector('.comment_children_count');
    }
    nodes.rating = nodes.inner.querySelector('.review_rating');
    nodes.children = nodes.outer.querySelector('.review_children, .comment_children');
    nodes.outer.dataset.esgstParsed = '';
    this.nodes = nodes;
    this.author.nodes = authorNodes;
  }
  parseData() {
    var _nodes$rating$classLi, _nodes$rating;
    const nodes = this.nodes;
    const data = Comment.getDefaultData();
    data.id = nodes.outer.dataset.id;
    if (nodes.editTextArea) {
      data.markdown = nodes.editTextArea.value;
    }
    data.isDeleted = !!nodes.deletedTimestamp;
    if (nodes.deletedTimestamp) {
      data.deletedTimestamp = parseInt(nodes.deletedTimestamp.dataset.timestamp);
    }
    data.createdTimestamp = parseInt(nodes.createdTimestamp.dataset.timestamp);
    if (nodes.editedTimestamp) {
      data.editedTimestamp = parseInt(nodes.editedTimestamp.dataset.timestamp);
    }
    data.isEdited = !!data.editedTimestamp;
    data.canReply = !!nodes.replyButton;
    data.canEdit = !!nodes.editButton;
    data.canDelete = !!nodes.deleteButton;
    data.canUndelete = !!nodes.undeleteButton;
    if (nodes.source) {
      if (nodes.sourceComment) {
        data.sourceCommentUrl = nodes.sourceComment.getAttribute('href');
        data.sourceCommentAuthor = nodes.sourceComment.textContent.trim().slice(1); // @...
      }
      data.sourceThreadUrl = nodes.sourceThread.getAttribute('href');
      data.sourceThreadTitle = nodes.sourceThread.textContent.trim();
    }
    if (nodes.permalink) {
      data.url = nodes.permalink.getAttribute('href');
      data.code = data.url.split('/')[3]; // /go/comment/...
    }
    data.isReview = !!nodes.rating;
    data.isReviewPositive = (_nodes$rating$classLi = (_nodes$rating = nodes.rating) === null || _nodes$rating === void 0 ? void 0 : _nodes$rating.classList.contains('is_positive')) !== null && _nodes$rating$classLi !== void 0 ? _nodes$rating$classLi : false;
    this.data = data;
    this.author.parseData();
    this.author.parseExtraData();
  }
  build(context, position) {
    if (this.nodes.outer) {
      this.nodes.outer.remove();
    }
    const body = _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "author"
    }, !this.data.isReview && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "comment_collapse_btn fa fa-minus-square-o"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "comment_expand_btn fa fa-plus-square-o"
    })), this.data.isDeleted ? _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "author_avatar is_icon"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "fa fa-close"
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "author_name"
    }, "Deleted")) : _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      href: this.author.data.url,
      className: "author_avatar",
      style: `background-image:url(${this.author.data.avatar});`
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      href: this.author.data.url,
      className: `author_name${this.author.data.op ? ' is_op' : ''}`
    }, this.author.data.username), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      href: this.author.data.url,
      className: "author_small"
    }, "(", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
      className: "is_positive"
    }, "+", this.author.data.positiveReputation), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
      className: "is_negative"
    }, "-", this.author.data.negativeReputation), ")"))), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: this.data.isReview ? 'review_body' : 'comment_body'
    }, this.data.isDeleted ? _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment_body_delete markdown"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("p", null, "This comment was deleted", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
      "data-timestamp": this.data.deletedTimestamp
    }, `${_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getTimeSince(this.data.deletedTimestamp)} ago`), ".")) : _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: `${this.data.isReview ? 'review_description' : 'comment_body_default'} markdown`
    }, this.data.markdown ? _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].parse(_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.markdownParser.text(this.data.markdown)).body.children : ''), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "action_list"
    }, this.data.isReview ? _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
      "data-timestamp": this.data.createdTimestamp
    }, `${_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getTimeSince(this.data.createdTimestamp)} ago`)) : _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
      "data-timestamp": this.data.createdTimestamp
    }, `${_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].common.getTimeSince(this.data.createdTimestamp)} ago`), this.data.isEdited && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
      "data-timestamp": this.data.editedTimestamp
    }, "*")), this.data.canReply && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      className: "js_comment_reply"
    }, "Reply"), this.data.canEdit && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      className: "js_comment_edit"
    }, "Edit"), this.data.canDelete && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      "data-form": `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].xsrfToken}&do=comment_delete&comment_id=${this.data.id}`,
      className: "js_comment_delete"
    }, "Delete"), this.data.canUndelete && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      "data-form": `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].xsrfToken}&do=comment_undelete&comment_id=${this.data.id}`,
      className: "js_comment_undelete"
    }, "Undelete"), this.data.sourceThreadTitle && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", null, this.data.sourceCommentAuthor && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      rel: "nofollow",
      href: this.data.sourceCommentUrl
    }, "@", this.data.sourceCommentAuthor), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "fa fa-fw fa-angle-right"
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      href: this.data.sourceThreadUrl
    }, this.data.sourceThreadTitle)), !this.data.isOp && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      rel: "nofollow",
      href: this.data.url
    }, "Permalink")), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment_body_collapse markdown"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("p", {
      className: "comment_children_count"
    }))));
    let outer;
    _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      id: this.data.code,
      "data-id": this.data.id,
      className: this.data.isReview ? 'review_outer' : 'comment_outer',
      ref: ref => outer = ref
    }, this.data.canEdit && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "edit_form is_hidden"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("form", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "xsrf_token",
      value: _class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].xsrfToken
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "do",
      value: "comment_edit"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("input", {
      type: "hidden",
      name: "comment_id",
      value: this.data.id
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("textarea", {
      name: "description"
    }, this.data.markdown), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "btn_actions"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "btn_action white js_submit"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "fa fa-edit"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", null, "Edit")), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "btn_cancel"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", null, "Cancel"))))), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: this.data.isReview ? 'review_inner' : 'comment_inner',
      "data-username": this.author.data.username
    }, this.data.isReview ? _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "review_flex"
    }, body), this.data.isReviewPositive ? _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "review_rating is_positive"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "fa fa-thumbs-up"
    }))) : _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "review_rating is_negative"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "fa fa-thumbs-down"
    })))) : body), !this.data.isOp && _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: this.data.isReview ? 'review_children' : 'comment_children'
    })));
    this.parseNodes(outer);
    for (const child of this.children) {
      child.build(this.nodes.children, 'beforeend');
    }
  }
}


/***/ }),
/* 412 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttachedImage", function() { return AttachedImage; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(213);
/* harmony import */ var _constants_Namespaces__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(214);






class AttachedImage {
  constructor() {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "nodes", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "data", void 0);
    this.nodes = AttachedImage.getDefaultNodes();
    this.data = AttachedImage.getDefaultData();
  }
  static getDefaultNodes() {
    return {
      outer: null,
      button: null,
      link: null,
      image: null
    };
  }
  static getDefaultData() {
    return {
      title: '',
      url: ''
    };
  }
  static create() {
    switch (_class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].namespace) {
      case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_5__["Namespaces"].SG:
        {
          return new SgAttachedImage();
        }
      case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_5__["Namespaces"].ST:
        {
          return new StAttachedImage();
        }
    }
    return null;
  }
  static parseAll(context) {
    switch (_class_Session__WEBPACK_IMPORTED_MODULE_4__["Session"].namespace) {
      case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_5__["Namespaces"].SG:
        {
          return SgAttachedImage.parseAll(context);
        }
      case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_5__["Namespaces"].ST:
        {
          return StAttachedImage.parseAll(context);
        }
    }
    return null;
  }
}
class SgAttachedImage extends AttachedImage {
  constructor() {
    super();
  }
  static parseAll(context) {
    const images = [];
    const elements = context.querySelectorAll('.comment__toggle-attached');
    for (const element of elements) {
      const image = new SgAttachedImage();
      image.parse(element.parentElement);
      images.push(image);
    }
    return images;
  }
  parse(outer) {
    this.parseNodes(outer);
    this.parseData();
  }
  parseNodes(outer) {
    const nodes = AttachedImage.getDefaultNodes();
    nodes.outer = outer;
    nodes.button = nodes.outer.querySelector('.comment__toggle-attached');
    nodes.link = nodes.outer.querySelector('a');
    nodes.image = nodes.link.querySelector('img');
    this.nodes = nodes;
  }
  parseData() {
    const nodes = this.nodes;
    const data = AttachedImage.getDefaultData();
    data.title = nodes.image.title;
    data.url = nodes.image.src;
    this.data = data;
  }
  build(context, position) {
    if (this.nodes.outer) {
      this.nodes.outer.remove();
    }
    let outer;
    _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      ref: ref => outer = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "comment__toggle-attached"
    }, "View attached image."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      href: this.data.url,
      rel: "nofollow noopener",
      target: "_blank"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("img", {
      alt: this.data.title,
      title: this.data.title,
      className: "is-hidden",
      src: this.data.url
    }))));
    this.parseNodes(outer);
  }
}
class StAttachedImage extends AttachedImage {
  constructor() {
    super();
  }
  static parseAll(context) {
    const images = [];
    const elements = context.querySelectorAll('.view_attached');
    for (const element of elements) {
      const image = new StAttachedImage();
      image.parse(element.parentElement);
      images.push(image);
    }
    return images;
  }
  parse(outer) {
    this.parseNodes(outer);
    this.parseData();
  }
  parseNodes(outer) {
    const nodes = AttachedImage.getDefaultNodes();
    nodes.outer = outer;
    nodes.button = nodes.outer.querySelector('.view_attached');
    nodes.link = nodes.outer.querySelector('a');
    nodes.image = nodes.link.querySelector('img');
    this.nodes = nodes;
  }
  parseData() {
    const nodes = this.nodes;
    const data = AttachedImage.getDefaultData();
    data.title = nodes.image.title;
    data.url = nodes.image.src;
    this.data = data;
  }
  build(context, position) {
    if (this.nodes.outer) {
      this.nodes.outer.remove();
    }
    let outer;
    _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      ref: ref => outer = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "view_attached"
    }, "View attached image."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      href: this.data.url
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("img", {
      alt: this.data.title,
      title: this.data.title,
      className: "is_hidden",
      src: this.data.url
    }))));
    this.parseNodes(outer);
  }
}


/***/ }),
/* 413 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gamesModule", function() { return gamesModule; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(220);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(132);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(144);










const getValue = _Common__WEBPACK_IMPORTED_MODULE_9__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"]),
  lockAndSaveGames = _Common__WEBPACK_IMPORTED_MODULE_9__["common"].lockAndSaveGames.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"]);
const WHITELIST = {
  25657: {
    id: 3970,
    type: 'apps'
  } // Prey (2006)
};
class Games extends _class_Module__WEBPACK_IMPORTED_MODULE_5__["Module"] {
  constructor() {
    super();
    this.info = {
      endless: true,
      id: 'games',
      featureMap: {
        endless: this.games_load.bind(this)
      }
    };
  }
  async games_load(context, main, source, endless) {
    let games = await this.games_get(context, main, endless ? this.esgst.games : JSON.parse(getValue('games')), endless);
    if (!Object.keys(games.apps).length && !Object.keys(games.subs).length) return;
    const gamesToAdd = [];
    ['apps', 'subs'].forEach(type => {
      for (let id in games[type]) {
        if (games[type].hasOwnProperty(id)) {
          games[type][id].forEach(game => {
            gamesToAdd.push({
              game,
              code: id,
              innerWrap: game.headingName,
              name: game.name,
              outerWrap: game.headingName,
              type: type
            });
          });
        }
      }
    });
    _class_Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].addData('current', 'games', gamesToAdd, endless);
    for (const feature of this.esgst.gameFeatures) {
      await feature(games, main, source, endless, 'apps');
    }
    for (const id in games.apps) {
      if (games.apps.hasOwnProperty(id)) {
        games.apps[id].forEach(game => this.esgst.modules.giveaways.giveaways_reorder(game));
      }
    }
    for (const id in games.subs) {
      if (games.subs.hasOwnProperty(id)) {
        games.subs[id].forEach(game => this.esgst.modules.giveaways.giveaways_reorder(game));
      }
    }
    if (main && this.esgst.gmf && this.esgst.gmf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get(`gmf_enable${this.esgst.gmf.type}`)) {
      this.esgst.modules.gamesGameFilters.filters_filter(this.esgst.gmf, false, endless);
    }
  }
  async games_get(context, main, savedGames, endless) {
    let game, games, i, id, info, matches, n, headingNameQuery, matchesQuery, type;
    games = {
      apps: {},
      subs: {},
      all: []
    };
    if (this.esgst.discussionPath && main) {
      matchesQuery = `${endless ? `.esgst-es-page-${endless} .featured__outer-wrap--giveaway, .esgst-es-page-${endless}.featured__outer-wrap--giveaway` : '.featured__outer-wrap--giveaway'}, ${endless ? `.esgst-es-page-${endless} .giveaway__row-outer-wrap, .esgst-es-page-${endless}.giveaway__row-outer-wrap` : '.giveaway__row-outer-wrap'}, ${endless ? `.esgst-es-page-${endless} .table__row-outer-wrap, .esgst-es-page-${endless}.table__row-outer-wrap` : '.table__row-outer-wrap'}, ${endless ? `.esgst-es-page-${endless} .markdown table td, .esgst-es-page-${endless}.markdown table td` : '.markdown table td'}`;
      headingNameQuery = `.giveaway__heading__name, .featured__heading__medium, .table__column__heading, a`;
    } else {
      matchesQuery = `${endless ? `.esgst-es-page-${endless} .featured__outer-wrap--giveaway, .esgst-es-page-${endless}.featured__outer-wrap--giveaway` : '.featured__outer-wrap--giveaway'}, ${endless ? `.esgst-es-page-${endless} .giveaway__row-outer-wrap, .esgst-es-page-${endless}.giveaway__row-outer-wrap` : '.giveaway__row-outer-wrap'}, ${endless ? `.esgst-es-page-${endless} .table__row-outer-wrap, .esgst-es-page-${endless}.table__row-outer-wrap` : '.table__row-outer-wrap'}`;
      headingNameQuery = `.giveaway__heading__name, .featured__heading__medium, .table__column__heading`;
    }
    matches = context.querySelectorAll(matchesQuery);
    for (i = 0, n = matches.length; i < n; ++i) {
      game = _class_Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].findData('main', 'giveaways').filter(x => x.outerWrap === matches[i])[0];
      if (!game) {
        game = {
          isGame: true,
          outerWrap: matches[i]
        };
      }
      game.container = game.outerWrap;
      game.columns = game.container.querySelector(`.giveaway__columns, .featured__columns`);
      game.table = !!game.container.closest('table');
      game.grid = game.container.closest('.esgst-gv-view');
      if (game.grid) {
        game.gvIcons = game.container.getElementsByClassName('esgst-gv-icons')[0];
      }
      game.panel = game.container.querySelector('.esgst-giveaway-panel');
      info = await this.games_getInfo(game.container, main);
      game.headingName = game.container.querySelector(headingNameQuery);
      if (game.headingName) {
        if (game.headingName.getAttribute('href') && game.headingName.getAttribute('href').match(/\/(discussion|\/support\/ticket|trade)\//)) {
          continue;
        }
        if (game.table || this.esgst.wishlistPath) {
          game.heading = game.headingName;
        } else {
          game.heading = game.headingName.parentElement;
        }
        if (!game.name) {
          game.name = game.headingName.textContent;
        }
        const steamGiftCard = game.name.match(/^\$(.+?)\sSteam\sGift\sCard$/);
        if (steamGiftCard) {
          game.points = parseInt(steamGiftCard[1].replace(/,/g, ''));
          info = {
            id: `SteamGiftCard${game.points}`,
            type: 'apps'
          };
        }
        const humbleBundle = game.name.match(/^Humble.+?Bundle/);
        if (humbleBundle) {
          info = {
            id: game.name.replace(/\s/g, ''),
            type: 'apps'
          };
        }
        if (info) {
          id = info.id;
          type = info.type;
          game.id = id;
          game.type = type;
          if (_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.games && _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.games[game.type][game.id]) {
            const keys = ['owned', 'wishlisted', 'previouslyWishlisted', 'followed', 'hidden', 'ignored', 'previouslyEntered', 'previouslyWon', 'reducedCV', 'noCV', 'banned', 'removed'];
            for (const key of keys) {
              if (key === 'banned' && _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.delistedGames.banned.indexOf(parseInt(game.id)) > -1) {
                game[key] = true;
              } else if (key === 'removed' && (_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.delistedGames.removed.indexOf(parseInt(game.id)) > -1 || _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.games[game.type][game.id].removed)) {
                game[key] = true;
              } else if (_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.games[game.type][game.id][key === 'previouslyEntered' ? 'entered' : key === 'previouslyWon' ? 'won' : key]) {
                game[key] = true;
              }
            }
          }
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('lastSyncHiddenGames') > 0 && window.location.pathname.match(/^\/account\/settings\/giveaways\/filters/) && main) {
            const removeButton = game.container.getElementsByClassName('table__remove-default')[0];
            if (removeButton) {
              removeButton.addEventListener('click', _Common__WEBPACK_IMPORTED_MODULE_9__["common"].updateHiddenGames.bind(_Common__WEBPACK_IMPORTED_MODULE_9__["common"], id, type, true));
            }
          }
          if (!games[type][id]) {
            games[type][id] = [];
          }
          game.tagContext = game.container.closest('.poll') && game.container.getElementsByClassName('table__column__heading')[0] || game.headingName;
          game.tagPosition = 'afterend';
          game.saved = this.esgst.games[type][id];
          games[type][id].push(game);
          games.all.push(game);
        }
      }
    }
    return games;
  }
  async games_getInfo(context, main) {
    if (!context) {
      return null;
    }
    const link = context.querySelector(`[href*="store.steampowered.com/app/"], [href*="store.steampowered.com/sub/"], [href*="store.steampowered.com/bundle/"], [href*="steamcommunity.com/app/"], [href*="steamcommunity.com/sub/"], [href*="steamcommunity.com/bundle/"]`);
    const image = context.querySelector(`[style*="/apps/"], [style*="/subs/"], [style*="/bundles/"]`);
    if (link || image) {
      const url = link && link.getAttribute('href') || image && image.getAttribute('style');
      if (!url) {
        return null;
      }
      const info = url.match(/\/(app|sub|bundle)s?\/(\d+)/);
      if (info[1] === 'bundle') {
        return {
          id: `SteamBundle${info[2]}`,
          type: 'subs'
        };
      }
      return {
        id: info[2],
        type: `${info[1]}s`
      };
    }
    const gameId = context.getAttribute('data-game-id');
    if (gameId && WHITELIST[gameId]) {
      return WHITELIST[gameId];
    }
    const missing = context.querySelector('.table_image_thumbnail_missing');
    if (!missing) {
      return null;
    }
    const heading = context.querySelector('.table__column__heading');
    if (!heading) {
      return null;
    }
    const name = heading.textContent.trim();
    for (const type of ['apps', 'subs']) {
      for (const id in this.esgst.games[type]) {
        if (!this.esgst.games[type].hasOwnProperty(id)) {
          continue;
        }
        if (this.esgst.games[type][id].name === name) {
          return {
            id,
            type
          };
        }
      }
    }
    if (!heading.getAttribute('href')) {
      return null;
    }
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].get(heading.getAttribute('href'));
    const giveaway = (await this.esgst.modules.giveaways.giveaways_get(response.html, false, response.url))[0];
    if (!giveaway || !giveaway.gameType || !giveaway.gameSteamId) {
      return null;
    }
    const games = {
      apps: {},
      subs: {}
    };
    games[giveaway.gameType][giveaway.gameSteamId] = {
      name
    };
    _class_Scope__WEBPACK_IMPORTED_MODULE_6__["Scope"].findData('main', 'giveaways').map(x => {
      if (x.name !== name || x.id) {
        return x;
      }
      x.id = giveaway.gameSteamId;
      x.type = giveaway.gameType;
      if (this.esgst.games && this.esgst.games[x.type][x.id]) {
        const keys = ['owned', 'wishlisted', 'previouslyWishlisted', 'followed', 'hidden', 'ignored', 'previouslyEntered', 'previouslyWon', 'reducedCV', 'noCV', 'banned', 'removed'];
        for (const key of keys) {
          if (key === 'banned' && _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.delistedGames.banned.indexOf(parseInt(x.id)) > -1) {
            x[key] = true;
          } else if (key === 'removed' && (_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.delistedGames.removed.indexOf(parseInt(x.id)) > -1 || _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.games[x.type][x.id].removed)) {
            x[key] = true;
          } else if (_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.games[x.type][x.id][key === 'previouslyEntered' ? 'entered' : key === 'previouslyWon' ? 'won' : key]) {
            x[key] = true;
          }
        }
      }
      return x;
    });
    if (main && _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.gf && this.esgst.gf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get(`gf_enable${this.esgst.gf.type}`)) {
      this.esgst.modules.giveawaysGiveawayFilters.filters_filter(this.esgst.gf);
    }
    lockAndSaveGames(games);
    return {
      id: giveaway.gameSteamId,
      type: giveaway.gameType
    };
  }
}
const gamesModule = new Games();


/***/ }),
/* 414 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "groupsModule", function() { return groupsModule; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97);







class Groups extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      endless: true,
      id: 'groups',
      featureMap: {
        endless: this.groups_load.bind(this)
      }
    };
  }
  async groups_load(context, main, source, endless) {
    const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} a[href*="/group/"]:not(.table_image_avatar), .esgst-es-page-${endless}a[href*="/group/"]:not(.table_image_avatar)` : `a[href*="/group/"]:not(.table_image_avatar)`}, .form_list_item_summary_name`);
    if (!elements.length) {
      return;
    }
    const groups = [];
    for (const element of elements) {
      var _element$textContent, _group$url$replace$sp, _group$url, _group$context;
      if (element.children.length || element.closest('.markdown')) {
        continue;
      }
      const group = {
        saved: null,
        url: element.getAttribute('href')
      };
      if (group.url) {
        const match = group.url.match(/\/group\/(.+?)\//);
        if (match) {
          group.id = match[1];
          group.saved = this.esgst.groups.filter(x => x.code === group.id)[0];
        }
      }
      if (!group.id) {
        var _avatarImage$style;
        const avatarImage = element.parentElement.previousElementSibling;
        if (avatarImage !== null && avatarImage !== void 0 && (_avatarImage$style = avatarImage.style) !== null && _avatarImage$style !== void 0 && _avatarImage$style.backgroundImage) {
          const avatar = avatarImage.style.backgroundImage;
          group.saved = this.esgst.groups.filter(x => avatar.match(x.avatar))[0];
          group.id = group.saved && group.saved.code;
        }
      }
      if (!group.id) {
        continue;
      }
      group.code = group.id;
      if (!this.esgst.currentGroups[group.id]) {
        this.esgst.currentGroups[group.id] = {
          elements: [],
          savedGroup: group.saved
        };
      }
      if (this.esgst.currentGroups[group.id].elements.indexOf(element) > -1) {
        continue;
      }
      const hasTextContent = (_element$textContent = element.textContent) === null || _element$textContent === void 0 ? void 0 : _element$textContent.trim();
      const fallbackName = (_group$url$replace$sp = (_group$url = group.url) === null || _group$url === void 0 || (_group$url = _group$url.replace('/group/', '')) === null || _group$url === void 0 || (_group$url = _group$url.split('/')) === null || _group$url === void 0 || (_group$url = _group$url.pop()) === null || _group$url === void 0 ? void 0 : _group$url.replace(/[-_]+/g, ' ')) !== null && _group$url$replace$sp !== void 0 ? _group$url$replace$sp : '';
      if (hasTextContent) {
        group.name = hasTextContent;
      } else {
        group.name = fallbackName || group.id || 'Unknown Group';
      }
      const container = element.parentElement;
      group.oldElement = element;
      if (this.esgst.groupPath && container.classList.contains('page__heading__breadcrumbs')) {
        var _group$element;
        group.element = document.getElementsByClassName('featured__heading__medium')[0];
        group.container = (_group$element = group.element) === null || _group$element === void 0 ? void 0 : _group$element.parentElement;
      } else {
        group.element = element;
        group.container = container;
      }
      if (!hasTextContent) {
        var _element$closest;
        let nameContainer = ((_element$closest = element.closest('.table__row-inner-wrap')) === null || _element$closest === void 0 ? void 0 : _element$closest.querySelector('.table__column--width-fill')) || element.closest('.form_list_item_summary') || element.parentElement;
        group.context = nameContainer;
        group.container = nameContainer;
        const existingHeading = group.context.querySelector('.table__column__heading');
        if (!(existingHeading !== null && existingHeading !== void 0 && existingHeading.textContent.trim()) && group.name && group.url) {
          const nameLink = document.createElement('a');
          nameLink.href = group.url;
          nameLink.className = 'table__column__heading';
          nameLink.textContent = group.name;
          const avatarLink = group.context.querySelector('a.table_image_avatar');
          if (avatarLink && avatarLink.parentElement === group.context) {
            avatarLink.insertAdjacentElement('afterend', nameLink);
          } else {
            group.context.insertBefore(nameLink, group.context.firstChild);
          }
        }
        if (this.esgst.groupPath) {
          const breadcrumbs = document.querySelector('.page__heading__breadcrumbs');
          const breadcrumbLink = breadcrumbs === null || breadcrumbs === void 0 ? void 0 : breadcrumbs.querySelector('a[href*="/group/"]');
          if (breadcrumbLink && breadcrumbLink.textContent.trim().length === 0) {
            breadcrumbLink.textContent = group.name;
          }
          const heading = document.querySelector('.featured__heading__medium');
          if (heading && heading.textContent.trim().length === 0) {
            heading.textContent = group.name;
          }
        }
      } else {
        group.context = group.element;
      }
      this.esgst.currentGroups[group.id].elements.push(group.element);
      group.innerWrap = element.closest('.table__row-inner-wrap') || group.container;
      group.outerWrap = element.closest('.table__row-outer-wrap') || group.container;
      const isHeading = (_group$context = group.context) === null || _group$context === void 0 ? void 0 : _group$context.classList.contains('featured__heading__medium');
      if (isHeading) {
        group.tagContext = group.container;
        group.tagPosition = 'beforeend';
      } else if (hasTextContent) {
        group.tagContext = group.context;
        group.tagPosition = 'afterend';
      } else {
        group.tagContext = group.container.firstElementChild || group.container;
        group.tagPosition = 'afterend';
      }
      groups.push(group);
    }
    _class_Scope__WEBPACK_IMPORTED_MODULE_5__["Scope"].addData('current', 'groups', groups, endless);
    if (main && this.esgst.gpf && this.esgst.gpf.filteredCount && _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get(`gpf_enable${this.esgst.gpf.type}`)) {
      this.esgst.modules.groupsGroupFilters.filters_filter(this.esgst.gpf, false, endless);
    }
    for (const feature of this.esgst.groupFeatures) {
      await feature(groups, main, source, endless);
    }
  }
}
const groupsModule = new Groups();


/***/ }),
/* 415 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersModule", function() { return usersModule; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(220);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(132);







class Users extends _class_Module__WEBPACK_IMPORTED_MODULE_3__["Module"] {
  constructor() {
    super();
    this.info = {
      endless: true,
      id: 'users',
      featureMap: {
        endless: this.users_load.bind(this)
      }
    };
  }
  async users_load(mainContext, main, source, endless) {
    const elements = mainContext.querySelectorAll(_class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.getSelectors(endless, [`Xa[href*='/user/']`, `Xa[href*='/profiles/']`]));
    if (!elements.length) {
      return;
    }
    let found = false;
    const usersToAdd = [];
    const users = [];
    for (let i = elements.length - 1; i > -1; i--) {
      let element = elements[i];
      const sg = this.esgst.sg && !element.getAttribute('data-st') || element.getAttribute('data-sg');
      let isSteamLink = false;
      let match = element.getAttribute('href').match(/\/user\/(.+)/);
      if (!match) {
        match = element.getAttribute('href').match(/\/profiles\/(.+)/);
        isSteamLink = true;
      }
      if (!match) {
        continue;
      }
      const id = isSteamLink ? element.textContent : match[1];
      if (!id) {
        continue;
      }
      if ((!sg || element.textContent !== id) && (sg || !element.textContent || element.children.length) || element.closest('.markdown')) {
        continue;
      }
      if (!this.esgst.currentUsers[id]) {
        this.esgst.currentUsers[id] = {
          elements: []
        };
        const steamId = sg ? this.esgst.users.steamIds[id] : id;
        this.esgst.currentUsers[id].savedUser = this.esgst.users.users[steamId];
        if (this.esgst.currentUsers[id].savedUser) {
          this.esgst.currentUsers[id].steamId = steamId;
        }
      }
      let j;
      for (j = this.esgst.currentUsers[id].elements.length - 1; j > -1 && this.esgst.currentUsers[id].elements[j] !== element; j--) {}
      if (j > -1) {
        continue;
      }
      const savedUser = this.esgst.currentUsers[id].savedUser;
      const container = element.parentElement;
      const oldElement = element;
      if (this.esgst.userPath && container.classList.contains('page__heading__breadcrumbs')) {
        element = document.getElementsByClassName('featured__heading__medium')[0];
      }
      this.esgst.currentUsers[id].elements.push(element);
      const context = container.classList.contains('comment__username') ? container : element;
      const userObj = {
        code: id,
        innerWrap: context,
        outerWrap: context,
        sg
      };
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.groupPath) {
        const userRow = userObj.outerWrap.closest('.table__column--width-fill');
        if (userRow) {
          const sentRow = userRow.nextElementSibling;
          const receivedRow = sentRow.nextElementSibling;
          const giftDifferenceRow = receivedRow.nextElementSibling;
          const valueDifferenceRow = giftDifferenceRow.nextElementSibling;
          const sentMatch = sentRow.textContent.trim().match(/(.+?)\s\((.+?)\)/);
          const receivedMatch = receivedRow.textContent.trim().match(/(.+?)\s\((.+?)\)/);
          userObj.sentCount = sentMatch[1];
          userObj.sentValue = sentMatch[2];
          userObj.receivedCount = receivedMatch[1];
          userObj.receivedValue = receivedMatch[2];
          userObj.giftDifference = giftDifferenceRow.textContent.trim();
          userObj.valueDifference = valueDifferenceRow.textContent.trim();
        }
      }
      usersToAdd.push(userObj);
      if (!found) {
        found = true;
      }
      const isHeading = context.classList.contains('featured__heading__medium');
      const tagContainer = context.parentElement;
      let tagContext = context;
      if (tagContainer.classList.contains('comment__username')) {
        tagContext = tagContainer;
      }
      users.push({
        container: tagContainer,
        context,
        element,
        id,
        oldElement,
        saved: savedUser,
        steamId: sg ? savedUser && savedUser.steamId : id,
        tagContext: isHeading ? tagContainer : tagContext,
        tagPosition: isHeading ? 'beforeend' : 'afterend',
        username: sg ? id : savedUser && savedUser.username
      });
    }
    _class_Scope__WEBPACK_IMPORTED_MODULE_4__["Scope"].addData('current', 'users', usersToAdd, endless);
    for (const feature of this.esgst.userFeatures) {
      await feature(users, main, source, endless);
    }
    if (found) {
      if (this.esgst.wbcButton && mainContext === document && !this.esgst.aboutPath) {
        this.esgst.wbcButton.classList.remove('esgst-hidden');
        this.esgst.wbcButton.parentElement.classList.remove('esgst-hidden');
      }
      if (this.esgst.uscButton && mainContext === document && !this.esgst.aboutPath) {
        this.esgst.uscButton.classList.remove('esgst-hidden');
        this.esgst.uscButton.parentElement.classList.remove('esgst-hidden');
      }
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('mm_enableUsers') && this.esgst.mm_enable) {
        this.esgst.mm_enable(_class_Scope__WEBPACK_IMPORTED_MODULE_4__["Scope"].findData('current', 'users'), 'Users');
      }
    }
  }
}
const usersModule = new Users();


/***/ }),
/* 416 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalTableSorter", function() { return generalTableSorter; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_trim_start_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(417);
/* harmony import */ var core_js_modules_es_string_trim_start_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_trim_start_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(206);
/* harmony import */ var date_fns_parse__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(423);
/* harmony import */ var date_fns_isValid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(169);











const createElements = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  sortContent = _Common__WEBPACK_IMPORTED_MODULE_6__["common"].sortContent.bind(_Common__WEBPACK_IMPORTED_MODULE_6__["common"]),
  dateRegex = /\b(?:\d{4}[-/]\d{1,2}[-/]\d{1,2}|\d{1,2}[-/]\d{1,2}[-/]\d{2,4}|(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\s+\d{1,2},?\s*\d{0,4}|\d{1,2}\s+(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*,?\s*\d{0,4}|(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\s+\d{4}|\d{4}\s+(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\s+\d{1,2}|(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*'\d{2})\b/i;
class GeneralTableSorter extends _class_Module__WEBPACK_IMPORTED_MODULE_5__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("i", {
        className: "fa fa-sort"
      }), " if the table is sorted by the default order, ", _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("i", {
        className: "fa fa-sort-asc"
      }), " if it is sorted by ascending order and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("i", {
        className: "fa fa-sort-desc"
      }), " if it is sorted by descending order) to the heading of each table's column (in any page) that allows you to sort the table by the values of the column.")),
      id: 'ts',
      name: 'Table Sorter',
      sg: true,
      st: true,
      type: 'general',
      featureMap: {
        endless: this.ts_getTables.bind(this)
      }
    };
  }
  ts_getTables(context, main, source, endless) {
    const tables = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} .table, .esgst-es-page-${endless}.table` : '.table'}, ${endless ? `.esgst-es-page-${endless} table, .esgst-es-page-${endless}table` : 'table'}`);
    for (let i = 0, n = tables.length; i < n; ++i) {
      this.ts_setTable(tables[i]);
    }
    if (!endless && !_class_Settings__WEBPACK_IMPORTED_MODULE_7__["Settings"].get('us')) {
      this.ts_sortTables();
    }
  }
  ts_sortTables() {
    let i, tsTable;
    for (i = this.esgst.tsTables.length - 1; i > -1; --i) {
      tsTable = this.esgst.tsTables[i];
      if (tsTable.columnName) {
        sortContent(this.ts_getArray(tsTable.columnName, tsTable.columnIndex, tsTable.table), `${tsTable.key}_${tsTable.name}`);
      }
    }
  }
  ts_setTable(table) {
    let button, columnName, columns, heading, tsTable;
    heading = table.querySelector(`.table__heading, .header, thead`);
    if (!heading) return;
    tsTable = {
      columnName: '',
      key: 'sortIndex',
      name: 'asc',
      outerWrap: table,
      table: table
    };
    this.esgst.tsTables.push(tsTable);
    columns = heading.querySelectorAll(`.table__column--width-fill, .table__column--width-medium, .table__column--width-small, .column_flex, .column_medium, .column_small, th`);
    for (let i = 0, n = columns.length; i < n; ++i) {
      let column = columns[i];
      columnName = column.textContent.trim();
      if (!columnName.match(/^(Keys|Key|Not\sReceived|Remove)$/) && (!this.esgst.wonPath || !columnName.match(/^Received$/)) && !column.getElementsByClassName('esgst-ts-button')[0]) {
        button = createElements(column, 'beforeend', [{
          attributes: {
            class: 'esgst-ts-button esgst-clickable'
          },
          type: 'span'
        }]);
        this.ts_addDescButton(button, columnName, i, table, tsTable);
      }
    }
  }
  ts_addAscButton(button, columnName, i, table, tsTable) {
    createElements(button, 'atinner', [{
      attributes: {
        class: 'fa fa-sort-desc',
        title: `${getFeatureTooltip('ts', 'Currently sorted descending. Click to sort ascending.')}`
      },
      type: 'i'
    }]);
    button.firstElementChild.addEventListener('click', this.ts_sortTable.bind(this, button, columnName, i, 'asc', table, tsTable));
  }
  ts_addDescButton(button, columnName, i, table, tsTable) {
    createElements(button, 'atinner', [{
      attributes: {
        class: 'fa fa-sort',
        title: `${getFeatureTooltip('ts', 'Currently sorted by default. Click to sort descending.')}`
      },
      type: 'i'
    }]);
    button.firstElementChild.addEventListener('click', this.ts_sortTable.bind(this, button, columnName, i, 'desc', table, tsTable));
  }
  ts_addDefButton(button, columnName, i, table, tsTable) {
    createElements(button, 'atinner', [{
      attributes: {
        class: 'fa fa-sort-asc',
        title: `${getFeatureTooltip('ts', 'Currently sorted ascending. Click to sort by default.')}`
      },
      type: 'i'
    }]);
    button.firstElementChild.addEventListener('click', this.ts_sortTable.bind(this, button, columnName, i, 'def', table, tsTable));
  }
  ts_sortTable(button, columnName, i, key, table, tsTable) {
    tsTable.columnName = columnName;
    tsTable.columnIndex = i;
    tsTable.key = key === 'def' ? 'sortIndex' : 'value';
    tsTable.name = key;
    if (key === 'desc') {
      sortContent(this.ts_getArray(columnName, i, table), `value_${key}`);
      this.ts_addAscButton(button, columnName, i, table, tsTable);
    } else if (key === 'asc') {
      sortContent(this.ts_getArray(columnName, i, table), `value_${key}`);
      this.ts_addDefButton(button, columnName, i, table, tsTable);
    } else {
      sortContent(this.ts_getArray(columnName, i, table), 'sortIndex_asc');
      this.ts_addDescButton(button, columnName, i, table, tsTable);
    }
  }
  ts_handleDate(dateString) {
    if (typeof dateString !== 'string') return null;
    const cleanedDate = dateString.replace(/(\d+)(st|nd|rd|th)|,/gi, '$1').replace(/\s+/g, ' ').trim();
    const formats = ['MMM d yyyy', 'MMMM d yyyy', 'd MMM yyyy', 'd MMMM yyyy', 'yyyy MMM d', 'yyyy MMMM d', 'yyyy-MM-dd', 'MM/dd/yyyy', 'dd/MM/yyyy', 'MMM d', 'd MMM', 'MMMM d', 'd MMMM', 'MMMM yyyy', 'MMM yyyy'];
    for (const fmt of formats) {
      const parsed = Object(date_fns_parse__WEBPACK_IMPORTED_MODULE_9__["default"])(cleanedDate, fmt, new Date());
      if (Object(date_fns_isValid__WEBPACK_IMPORTED_MODULE_10__["default"])(parsed)) {
        if (!parsed.getFullYear()) parsed.setFullYear(new Date().getFullYear());
        return parsed;
      }
    }
    return null;
  }
  ts_getDateSubstring(value, regex, threshold = 0.7) {
    const match = value.match(regex);
    if (!match) return null;
    const matchedStr = match[0];
    const ratio = matchedStr.length / value.length;
    return ratio >= threshold ? matchedStr : null;
  }
  ts_parseMiscValue(value, element) {
    let numericMatch = value.match(/^[+-]?\d{1,3}(,\d{3})*(?:\.\d+)?(?!\w)|^[+-]?\d+(\.\d+)?(?!\w)/);
    if (numericMatch) {
      element.value = parseFloat(numericMatch[0].replace(/,/g, ''));
      if (isNaN(element.value)) element.value = 0;
      return true;
    }
    if (/^(from\s*)?[-+]?[A-Z]{0,3}[$€£¥₹]\d[\d,\.]*$/i.test(value)) {
      let cleaned = value.replace(/^from\s*/i, '').replace(/^[+]/, '').replace(/[A-Z]{0,3}[$€£¥₹]/i, '').replace(/,/g, '').trim();
      element.value = parseFloat(cleaned);
      if (isNaN(element.value)) element.value = 0;
      return true;
    }
    element.value = value.replace(/[^\x00-\x7F]/gu, '').trimStart() || value;
    return false;
  }
  ts_getArray(columnName, i, table) {
    let array, column, element, j, n, row, rows, value;
    array = [];
    rows = table.querySelectorAll(`.table__row-outer-wrap, .row_outer_wrap, tbody tr`);
    let isNumeric = false;
    const now = Date.now();
    for (j = 0, n = rows.length; j < n; ++j) {
      row = rows[j];
      column = row.querySelectorAll(`.table__column--width-fill, .table__column--width-medium, .table__column--width-small, .column_flex, .column_medium, .column_small, td`)[i];
      value = column && column.textContent.trim();
      element = {
        outerWrap: row,
        sortIndex: 0,
        value: undefined
      };
      if (row.hasAttribute('data-sort-index')) {
        element.sortIndex = parseInt(row.getAttribute('data-sort-index'));
      } else {
        element.sortIndex = j;
        row.setAttribute('data-sort-index', j);
      }
      if (value && value.length > 0 || columnName === 'Trending') {
        if (column.hasAttribute('data-sort-value')) {
          element.value = parseFloat(column.getAttribute('data-sort-value'));
        } else {
          switch (columnName) {
            case 'Trending':
              element.value = column.getElementsByClassName('fa-caret-up').length - column.getElementsByClassName('fa-caret-down').length;
              break;
            case 'Added':
            case 'Creation Date':
            case 'Date Entered':
            case 'First Giveaway':
            case 'Last Giveaway':
            case 'Last Online':
            case 'Last Post':
            case 'Last Update':
              try {
                element.value = value.match(/Online|Open/) ? now : parseInt(column.querySelector(`[data-timestamp]`).getAttribute('data-timestamp')) * 1e3;
              } catch (e) {
                element.value = 0;
              }
              break;
            case 'Game':
            case 'Giveaway':
            case 'Group':
            case 'Status':
            case 'Summary':
            case 'Type':
            case 'User':
            case `Winner(s)`:
              element.value = value;
              break;
            default:
              {
                if (!value || value === '―' || value === '-') {
                  element.value = '';
                } else {
                  const dateSubstring = this.ts_getDateSubstring(value, dateRegex, 0.7);
                  if (dateSubstring) {
                    const parsedDate = this.ts_handleDate(dateSubstring);
                    isNumeric = parsedDate ? (element.value = parsedDate.getTime(), true) : this.ts_parseMiscValue(value, element);
                  } else {
                    isNumeric = this.ts_parseMiscValue(value, element);
                  }
                }
                break;
              }
          }
        }
      } else {
        element.value = 0;
      }
      array.push(element);
    }
    if (isNumeric) {
      for (let i = array.length - 1; i > -1; i--) {
        let element = array[i];
        if (typeof element.value === 'string') {
          element.value = 0;
        }
      }
    }
    return array;
  }
}
const generalTableSorter = new GeneralTableSorter();


/***/ }),
/* 417 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: Remove this line from `core-js@4`
__webpack_require__(418);
var $ = __webpack_require__(65);
var trimStart = __webpack_require__(419);

// `String.prototype.trimStart` method
// https://tc39.es/ecma262/#sec-string.prototype.trimstart
// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe
$({ target: 'String', proto: true, name: 'trimStart', forced: ''.trimStart !== trimStart }, {
  trimStart: trimStart
});


/***/ }),
/* 418 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(65);
var trimStart = __webpack_require__(419);

// `String.prototype.trimLeft` method
// https://tc39.es/ecma262/#sec-string.prototype.trimleft
// eslint-disable-next-line es/no-string-prototype-trimleft-trimright -- safe
$({ target: 'String', proto: true, name: 'trimStart', forced: ''.trimLeft !== trimStart }, {
  trimLeft: trimStart
});


/***/ }),
/* 419 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $trimStart = __webpack_require__(420).start;
var forcedStringTrimMethod = __webpack_require__(422);

// `String.prototype.{ trimStart, trimLeft }` method
// https://tc39.es/ecma262/#sec-string.prototype.trimstart
// https://tc39.es/ecma262/#String.prototype.trimleft
module.exports = forcedStringTrimMethod('trimStart') ? function trimStart() {
  return $trimStart(this);
// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe
} : ''.trimStart;


/***/ }),
/* 420 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__(6);
var requireObjectCoercible = __webpack_require__(10);
var toString = __webpack_require__(101);
var whitespaces = __webpack_require__(421);

var replace = uncurryThis(''.replace);
var ltrim = RegExp('^[' + whitespaces + ']+');
var rtrim = RegExp('(^|[^' + whitespaces + '])[' + whitespaces + ']+$');

// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation
var createMethod = function (TYPE) {
  return function ($this) {
    var string = toString(requireObjectCoercible($this));
    if (TYPE & 1) string = replace(string, ltrim, '');
    if (TYPE & 2) string = replace(string, rtrim, '$1');
    return string;
  };
};

module.exports = {
  // `String.prototype.{ trimLeft, trimStart }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimstart
  start: createMethod(1),
  // `String.prototype.{ trimRight, trimEnd }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimend
  end: createMethod(2),
  // `String.prototype.trim` method
  // https://tc39.es/ecma262/#sec-string.prototype.trim
  trim: createMethod(3)
};


/***/ }),
/* 421 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// a string of all valid unicode whitespaces
module.exports = '\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u2000\u2001\u2002' +
  '\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';


/***/ }),
/* 422 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var PROPER_FUNCTION_NAME = __webpack_require__(70).PROPER;
var fails = __webpack_require__(8);
var whitespaces = __webpack_require__(421);

var non = '\u200B\u0085\u180E';

// check that a method works with the correct list
// of whitespaces and has a correct name
module.exports = function (METHOD_NAME) {
  return fails(function () {
    return !!whitespaces[METHOD_NAME]()
      || non[METHOD_NAME]() !== non
      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);
  });
};


/***/ }),
/* 423 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return parse; });
/* harmony import */ var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(171);
/* harmony import */ var _babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(424);
/* harmony import */ var _lib_defaultLocale_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(193);
/* harmony import */ var _subMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(174);
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(173);
/* harmony import */ var _lib_assign_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(245);
/* harmony import */ var _lib_format_longFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(190);
/* harmony import */ var _lib_getTimezoneOffsetInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(191);
/* harmony import */ var _lib_protectedTokens_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(192);
/* harmony import */ var _lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(176);
/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(172);
/* harmony import */ var _lib_Setter_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(427);
/* harmony import */ var _lib_parsers_index_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(440);
/* harmony import */ var _lib_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(185);













 // This RegExp consists of three parts separated by `|`:
// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token
//   (one of the certain letters followed by `o`)
// - (\w)\1* matches any sequences of the same letter
// - '' matches two quote characters in a row
// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),
//   except a single quote symbol, which ends the sequence.
//   Two quote characters do not end the sequence.
//   If there is no matching single quote
//   then the sequence will continue until the end of the string.
// - . matches any single character unmatched by previous parts of the RegExps
var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;

// This RegExp catches symbols escaped by quotes, and also
// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`
var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var notWhitespaceRegExp = /\S/;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;

/**
 * @name parse
 * @category Common Helpers
 * @summary Parse the date.
 *
 * @description
 * Return the date parsed from string using the given format string.
 *
 * > ⚠️ Please note that the `format` tokens differ from Moment.js and other libraries.
 * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * The characters in the format string wrapped between two single quotes characters (') are escaped.
 * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.
 *
 * Format of the format string is based on Unicode Technical Standard #35:
 * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table
 * with a few additions (see note 5 below the table).
 *
 * Not all tokens are compatible. Combinations that don't make sense or could lead to bugs are prohibited
 * and will throw `RangeError`. For example usage of 24-hour format token with AM/PM token will throw an exception:
 *
 * ```javascript
 * parse('23 AM', 'HH a', new Date())
 * //=> RangeError: The format string mustn't contain `HH` and `a` at the same time
 * ```
 *
 * See the compatibility table: https://docs.google.com/spreadsheets/d/e/2PACX-1vQOPU3xUhplll6dyoMmVUXHKl_8CRDs6_ueLmex3SoqwhuolkuN3O05l4rqx5h1dKX8eb46Ul-CCSrq/pubhtml?gid=0&single=true
 *
 * Accepted format string patterns:
 * | Unit                            |Prior| Pattern | Result examples                   | Notes |
 * |---------------------------------|-----|---------|-----------------------------------|-------|
 * | Era                             | 140 | G..GGG  | AD, BC                            |       |
 * |                                 |     | GGGG    | Anno Domini, Before Christ        | 2     |
 * |                                 |     | GGGGG   | A, B                              |       |
 * | Calendar year                   | 130 | y       | 44, 1, 1900, 2017, 9999           | 4     |
 * |                                 |     | yo      | 44th, 1st, 1900th, 9999999th      | 4,5   |
 * |                                 |     | yy      | 44, 01, 00, 17                    | 4     |
 * |                                 |     | yyy     | 044, 001, 123, 999                | 4     |
 * |                                 |     | yyyy    | 0044, 0001, 1900, 2017            | 4     |
 * |                                 |     | yyyyy   | ...                               | 2,4   |
 * | Local week-numbering year       | 130 | Y       | 44, 1, 1900, 2017, 9000           | 4     |
 * |                                 |     | Yo      | 44th, 1st, 1900th, 9999999th      | 4,5   |
 * |                                 |     | YY      | 44, 01, 00, 17                    | 4,6   |
 * |                                 |     | YYY     | 044, 001, 123, 999                | 4     |
 * |                                 |     | YYYY    | 0044, 0001, 1900, 2017            | 4,6   |
 * |                                 |     | YYYYY   | ...                               | 2,4   |
 * | ISO week-numbering year         | 130 | R       | -43, 1, 1900, 2017, 9999, -9999   | 4,5   |
 * |                                 |     | RR      | -43, 01, 00, 17                   | 4,5   |
 * |                                 |     | RRR     | -043, 001, 123, 999, -999         | 4,5   |
 * |                                 |     | RRRR    | -0043, 0001, 2017, 9999, -9999    | 4,5   |
 * |                                 |     | RRRRR   | ...                               | 2,4,5 |
 * | Extended year                   | 130 | u       | -43, 1, 1900, 2017, 9999, -999    | 4     |
 * |                                 |     | uu      | -43, 01, 99, -99                  | 4     |
 * |                                 |     | uuu     | -043, 001, 123, 999, -999         | 4     |
 * |                                 |     | uuuu    | -0043, 0001, 2017, 9999, -9999    | 4     |
 * |                                 |     | uuuuu   | ...                               | 2,4   |
 * | Quarter (formatting)            | 120 | Q       | 1, 2, 3, 4                        |       |
 * |                                 |     | Qo      | 1st, 2nd, 3rd, 4th                | 5     |
 * |                                 |     | QQ      | 01, 02, 03, 04                    |       |
 * |                                 |     | QQQ     | Q1, Q2, Q3, Q4                    |       |
 * |                                 |     | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 |     | QQQQQ   | 1, 2, 3, 4                        | 4     |
 * | Quarter (stand-alone)           | 120 | q       | 1, 2, 3, 4                        |       |
 * |                                 |     | qo      | 1st, 2nd, 3rd, 4th                | 5     |
 * |                                 |     | qq      | 01, 02, 03, 04                    |       |
 * |                                 |     | qqq     | Q1, Q2, Q3, Q4                    |       |
 * |                                 |     | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 |     | qqqqq   | 1, 2, 3, 4                        | 3     |
 * | Month (formatting)              | 110 | M       | 1, 2, ..., 12                     |       |
 * |                                 |     | Mo      | 1st, 2nd, ..., 12th               | 5     |
 * |                                 |     | MM      | 01, 02, ..., 12                   |       |
 * |                                 |     | MMM     | Jan, Feb, ..., Dec                |       |
 * |                                 |     | MMMM    | January, February, ..., December  | 2     |
 * |                                 |     | MMMMM   | J, F, ..., D                      |       |
 * | Month (stand-alone)             | 110 | L       | 1, 2, ..., 12                     |       |
 * |                                 |     | Lo      | 1st, 2nd, ..., 12th               | 5     |
 * |                                 |     | LL      | 01, 02, ..., 12                   |       |
 * |                                 |     | LLL     | Jan, Feb, ..., Dec                |       |
 * |                                 |     | LLLL    | January, February, ..., December  | 2     |
 * |                                 |     | LLLLL   | J, F, ..., D                      |       |
 * | Local week of year              | 100 | w       | 1, 2, ..., 53                     |       |
 * |                                 |     | wo      | 1st, 2nd, ..., 53th               | 5     |
 * |                                 |     | ww      | 01, 02, ..., 53                   |       |
 * | ISO week of year                | 100 | I       | 1, 2, ..., 53                     | 5     |
 * |                                 |     | Io      | 1st, 2nd, ..., 53th               | 5     |
 * |                                 |     | II      | 01, 02, ..., 53                   | 5     |
 * | Day of month                    |  90 | d       | 1, 2, ..., 31                     |       |
 * |                                 |     | do      | 1st, 2nd, ..., 31st               | 5     |
 * |                                 |     | dd      | 01, 02, ..., 31                   |       |
 * | Day of year                     |  90 | D       | 1, 2, ..., 365, 366               | 7     |
 * |                                 |     | Do      | 1st, 2nd, ..., 365th, 366th       | 5     |
 * |                                 |     | DD      | 01, 02, ..., 365, 366             | 7     |
 * |                                 |     | DDD     | 001, 002, ..., 365, 366           |       |
 * |                                 |     | DDDD    | ...                               | 2     |
 * | Day of week (formatting)        |  90 | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 |     | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 |     | EEEEE   | M, T, W, T, F, S, S               |       |
 * |                                 |     | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | ISO day of week (formatting)    |  90 | i       | 1, 2, 3, ..., 7                   | 5     |
 * |                                 |     | io      | 1st, 2nd, ..., 7th                | 5     |
 * |                                 |     | ii      | 01, 02, ..., 07                   | 5     |
 * |                                 |     | iii     | Mon, Tue, Wed, ..., Sun           | 5     |
 * |                                 |     | iiii    | Monday, Tuesday, ..., Sunday      | 2,5   |
 * |                                 |     | iiiii   | M, T, W, T, F, S, S               | 5     |
 * |                                 |     | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 5     |
 * | Local day of week (formatting)  |  90 | e       | 2, 3, 4, ..., 1                   |       |
 * |                                 |     | eo      | 2nd, 3rd, ..., 1st                | 5     |
 * |                                 |     | ee      | 02, 03, ..., 01                   |       |
 * |                                 |     | eee     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 |     | eeee    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 |     | eeeee   | M, T, W, T, F, S, S               |       |
 * |                                 |     | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | Local day of week (stand-alone) |  90 | c       | 2, 3, 4, ..., 1                   |       |
 * |                                 |     | co      | 2nd, 3rd, ..., 1st                | 5     |
 * |                                 |     | cc      | 02, 03, ..., 01                   |       |
 * |                                 |     | ccc     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 |     | cccc    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 |     | ccccc   | M, T, W, T, F, S, S               |       |
 * |                                 |     | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | AM, PM                          |  80 | a..aaa  | AM, PM                            |       |
 * |                                 |     | aaaa    | a.m., p.m.                        | 2     |
 * |                                 |     | aaaaa   | a, p                              |       |
 * | AM, PM, noon, midnight          |  80 | b..bbb  | AM, PM, noon, midnight            |       |
 * |                                 |     | bbbb    | a.m., p.m., noon, midnight        | 2     |
 * |                                 |     | bbbbb   | a, p, n, mi                       |       |
 * | Flexible day period             |  80 | B..BBB  | at night, in the morning, ...     |       |
 * |                                 |     | BBBB    | at night, in the morning, ...     | 2     |
 * |                                 |     | BBBBB   | at night, in the morning, ...     |       |
 * | Hour [1-12]                     |  70 | h       | 1, 2, ..., 11, 12                 |       |
 * |                                 |     | ho      | 1st, 2nd, ..., 11th, 12th         | 5     |
 * |                                 |     | hh      | 01, 02, ..., 11, 12               |       |
 * | Hour [0-23]                     |  70 | H       | 0, 1, 2, ..., 23                  |       |
 * |                                 |     | Ho      | 0th, 1st, 2nd, ..., 23rd          | 5     |
 * |                                 |     | HH      | 00, 01, 02, ..., 23               |       |
 * | Hour [0-11]                     |  70 | K       | 1, 2, ..., 11, 0                  |       |
 * |                                 |     | Ko      | 1st, 2nd, ..., 11th, 0th          | 5     |
 * |                                 |     | KK      | 01, 02, ..., 11, 00               |       |
 * | Hour [1-24]                     |  70 | k       | 24, 1, 2, ..., 23                 |       |
 * |                                 |     | ko      | 24th, 1st, 2nd, ..., 23rd         | 5     |
 * |                                 |     | kk      | 24, 01, 02, ..., 23               |       |
 * | Minute                          |  60 | m       | 0, 1, ..., 59                     |       |
 * |                                 |     | mo      | 0th, 1st, ..., 59th               | 5     |
 * |                                 |     | mm      | 00, 01, ..., 59                   |       |
 * | Second                          |  50 | s       | 0, 1, ..., 59                     |       |
 * |                                 |     | so      | 0th, 1st, ..., 59th               | 5     |
 * |                                 |     | ss      | 00, 01, ..., 59                   |       |
 * | Seconds timestamp               |  40 | t       | 512969520                         |       |
 * |                                 |     | tt      | ...                               | 2     |
 * | Fraction of second              |  30 | S       | 0, 1, ..., 9                      |       |
 * |                                 |     | SS      | 00, 01, ..., 99                   |       |
 * |                                 |     | SSS     | 000, 001, ..., 999                |       |
 * |                                 |     | SSSS    | ...                               | 2     |
 * | Milliseconds timestamp          |  20 | T       | 512969520900                      |       |
 * |                                 |     | TT      | ...                               | 2     |
 * | Timezone (ISO-8601 w/ Z)        |  10 | X       | -08, +0530, Z                     |       |
 * |                                 |     | XX      | -0800, +0530, Z                   |       |
 * |                                 |     | XXX     | -08:00, +05:30, Z                 |       |
 * |                                 |     | XXXX    | -0800, +0530, Z, +123456          | 2     |
 * |                                 |     | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |
 * | Timezone (ISO-8601 w/o Z)       |  10 | x       | -08, +0530, +00                   |       |
 * |                                 |     | xx      | -0800, +0530, +0000               |       |
 * |                                 |     | xxx     | -08:00, +05:30, +00:00            | 2     |
 * |                                 |     | xxxx    | -0800, +0530, +0000, +123456      |       |
 * |                                 |     | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |
 * | Long localized date             |  NA | P       | 05/29/1453                        | 5,8   |
 * |                                 |     | PP      | May 29, 1453                      |       |
 * |                                 |     | PPP     | May 29th, 1453                    |       |
 * |                                 |     | PPPP    | Sunday, May 29th, 1453            | 2,5,8 |
 * | Long localized time             |  NA | p       | 12:00 AM                          | 5,8   |
 * |                                 |     | pp      | 12:00:00 AM                       |       |
 * | Combination of date and time    |  NA | Pp      | 05/29/1453, 12:00 AM              |       |
 * |                                 |     | PPpp    | May 29, 1453, 12:00:00 AM         |       |
 * |                                 |     | PPPpp   | May 29th, 1453 at ...             |       |
 * |                                 |     | PPPPpp  | Sunday, May 29th, 1453 at ...     | 2,5,8 |
 * Notes:
 * 1. "Formatting" units (e.g. formatting quarter) in the default en-US locale
 *    are the same as "stand-alone" units, but are different in some languages.
 *    "Formatting" units are declined according to the rules of the language
 *    in the context of a date. "Stand-alone" units are always nominative singular.
 *    In `format` function, they will produce different result:
 *
 *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`
 *
 *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`
 *
 *    `parse` will try to match both formatting and stand-alone units interchangably.
 *
 * 2. Any sequence of the identical letters is a pattern, unless it is escaped by
 *    the single quote characters (see below).
 *    If the sequence is longer than listed in table:
 *    - for numerical units (`yyyyyyyy`) `parse` will try to match a number
 *      as wide as the sequence
 *    - for text units (`MMMMMMMM`) `parse` will try to match the widest variation of the unit.
 *      These variations are marked with "2" in the last column of the table.
 *
 * 3. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.
 *    These tokens represent the shortest form of the quarter.
 *
 * 4. The main difference between `y` and `u` patterns are B.C. years:
 *
 *    | Year | `y` | `u` |
 *    |------|-----|-----|
 *    | AC 1 |   1 |   1 |
 *    | BC 1 |   1 |   0 |
 *    | BC 2 |   2 |  -1 |
 *
 *    Also `yy` will try to guess the century of two digit year by proximity with `referenceDate`:
 *
 *    `parse('50', 'yy', new Date(2018, 0, 1)) //=> Sat Jan 01 2050 00:00:00`
 *
 *    `parse('75', 'yy', new Date(2018, 0, 1)) //=> Wed Jan 01 1975 00:00:00`
 *
 *    while `uu` will just assign the year as is:
 *
 *    `parse('50', 'uu', new Date(2018, 0, 1)) //=> Sat Jan 01 0050 00:00:00`
 *
 *    `parse('75', 'uu', new Date(2018, 0, 1)) //=> Tue Jan 01 0075 00:00:00`
 *
 *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),
 *    except local week-numbering years are dependent on `options.weekStartsOn`
 *    and `options.firstWeekContainsDate` (compare [setISOWeekYear]{@link https://date-fns.org/docs/setISOWeekYear}
 *    and [setWeekYear]{@link https://date-fns.org/docs/setWeekYear}).
 *
 * 5. These patterns are not in the Unicode Technical Standard #35:
 *    - `i`: ISO day of week
 *    - `I`: ISO week of year
 *    - `R`: ISO week-numbering year
 *    - `o`: ordinal number modifier
 *    - `P`: long localized date
 *    - `p`: long localized time
 *
 * 6. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.
 *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * 7. `D` and `DD` tokens represent days of the year but they are ofthen confused with days of the month.
 *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * 8. `P+` tokens do not have a defined priority since they are merely aliases to other tokens based
 *    on the given locale.
 *
 *    using `en-US` locale: `P` => `MM/dd/yyyy`
 *    using `en-US` locale: `p` => `hh:mm a`
 *    using `pt-BR` locale: `P` => `dd/MM/yyyy`
 *    using `pt-BR` locale: `p` => `HH:mm`
 *
 * Values will be assigned to the date in the descending order of its unit's priority.
 * Units of an equal priority overwrite each other in the order of appearance.
 *
 * If no values of higher priority are parsed (e.g. when parsing string 'January 1st' without a year),
 * the values will be taken from 3rd argument `referenceDate` which works as a context of parsing.
 *
 * `referenceDate` must be passed for correct work of the function.
 * If you're not sure which `referenceDate` to supply, create a new instance of Date:
 * `parse('02/11/2014', 'MM/dd/yyyy', new Date())`
 * In this case parsing will be done in the context of the current date.
 * If `referenceDate` is `Invalid Date` or a value not convertible to valid `Date`,
 * then `Invalid Date` will be returned.
 *
 * The result may vary by locale.
 *
 * If `formatString` matches with `dateString` but does not provides tokens, `referenceDate` will be returned.
 *
 * If parsing failed, `Invalid Date` will be returned.
 * Invalid Date is a Date, whose time value is NaN.
 * Time value of Date: http://es5.github.io/#x15.9.1.1
 *
 * @param {String} dateString - the string to parse
 * @param {String} formatString - the string of tokens
 * @param {Date|Number} referenceDate - defines values missing from the parsed dateString
 * @param {Object} [options] - an object with options.
 * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}
 * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @param {1|2|3|4|5|6|7} [options.firstWeekContainsDate=1] - the day of January, which is always in the first week of the year
 * @param {Boolean} [options.useAdditionalWeekYearTokens=false] - if true, allows usage of the week-numbering year tokens `YY` and `YYYY`;
 *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @param {Boolean} [options.useAdditionalDayOfYearTokens=false] - if true, allows usage of the day of year tokens `D` and `DD`;
 *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @returns {Date} the parsed date
 * @throws {TypeError} 3 arguments required
 * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6
 * @throws {RangeError} `options.firstWeekContainsDate` must be between 1 and 7
 * @throws {RangeError} `options.locale` must contain `match` property
 * @throws {RangeError} use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} format string contains an unescaped latin alphabet character
 *
 * @example
 * // Parse 11 February 2014 from middle-endian format:
 * var result = parse('02/11/2014', 'MM/dd/yyyy', new Date())
 * //=> Tue Feb 11 2014 00:00:00
 *
 * @example
 * // Parse 28th of February in Esperanto locale in the context of 2010 year:
 * import eo from 'date-fns/locale/eo'
 * var result = parse('28-a de februaro', "do 'de' MMMM", new Date(2010, 0, 1), {
 *   locale: eo
 * })
 * //=> Sun Feb 28 2010 00:00:00
 */
function parse(dirtyDateString, dirtyFormatString, dirtyReferenceDate, options) {
  var _ref, _options$locale, _ref2, _ref3, _ref4, _options$firstWeekCon, _options$locale2, _options$locale2$opti, _defaultOptions$local, _defaultOptions$local2, _ref5, _ref6, _ref7, _options$weekStartsOn, _options$locale3, _options$locale3$opti, _defaultOptions$local3, _defaultOptions$local4;
  Object(_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_10__["default"])(3, arguments);
  var dateString = String(dirtyDateString);
  var formatString = String(dirtyFormatString);
  var defaultOptions = Object(_lib_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_13__["getDefaultOptions"])();
  var locale = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions.locale) !== null && _ref !== void 0 ? _ref : _lib_defaultLocale_index_js__WEBPACK_IMPORTED_MODULE_2__["default"];
  if (!locale.match) {
    throw new RangeError('locale must contain match property');
  }
  var firstWeekContainsDate = Object(_lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_9__["default"])((_ref2 = (_ref3 = (_ref4 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale2 = options.locale) === null || _options$locale2 === void 0 ? void 0 : (_options$locale2$opti = _options$locale2.options) === null || _options$locale2$opti === void 0 ? void 0 : _options$locale2$opti.firstWeekContainsDate) !== null && _ref4 !== void 0 ? _ref4 : defaultOptions.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : 1);

  // Test if weekStartsOn is between 1 and 7 _and_ is not NaN
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }
  var weekStartsOn = Object(_lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_9__["default"])((_ref5 = (_ref6 = (_ref7 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale3 = options.locale) === null || _options$locale3 === void 0 ? void 0 : (_options$locale3$opti = _options$locale3.options) === null || _options$locale3$opti === void 0 ? void 0 : _options$locale3$opti.weekStartsOn) !== null && _ref7 !== void 0 ? _ref7 : defaultOptions.weekStartsOn) !== null && _ref6 !== void 0 ? _ref6 : (_defaultOptions$local3 = defaultOptions.locale) === null || _defaultOptions$local3 === void 0 ? void 0 : (_defaultOptions$local4 = _defaultOptions$local3.options) === null || _defaultOptions$local4 === void 0 ? void 0 : _defaultOptions$local4.weekStartsOn) !== null && _ref5 !== void 0 ? _ref5 : 0);

  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }
  if (formatString === '') {
    if (dateString === '') {
      return Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_4__["default"])(dirtyReferenceDate);
    } else {
      return new Date(NaN);
    }
  }
  var subFnOptions = {
    firstWeekContainsDate: firstWeekContainsDate,
    weekStartsOn: weekStartsOn,
    locale: locale
  };

  // If timezone isn't specified, it will be set to the system timezone
  var setters = [new _lib_Setter_js__WEBPACK_IMPORTED_MODULE_11__["DateToSystemTimezoneSetter"]()];
  var tokens = formatString.match(longFormattingTokensRegExp).map(function (substring) {
    var firstCharacter = substring[0];
    if (firstCharacter in _lib_format_longFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
      var longFormatter = _lib_format_longFormatters_index_js__WEBPACK_IMPORTED_MODULE_6__["default"][firstCharacter];
      return longFormatter(substring, locale.formatLong);
    }
    return substring;
  }).join('').match(formattingTokensRegExp);
  var usedTokens = [];
  var _iterator = Object(_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__["default"])(tokens),
    _step;
  try {
    var _loop = function _loop() {
      var token = _step.value;
      if (!(options !== null && options !== void 0 && options.useAdditionalWeekYearTokens) && Object(_lib_protectedTokens_index_js__WEBPACK_IMPORTED_MODULE_8__["isProtectedWeekYearToken"])(token)) {
        Object(_lib_protectedTokens_index_js__WEBPACK_IMPORTED_MODULE_8__["throwProtectedError"])(token, formatString, dirtyDateString);
      }
      if (!(options !== null && options !== void 0 && options.useAdditionalDayOfYearTokens) && Object(_lib_protectedTokens_index_js__WEBPACK_IMPORTED_MODULE_8__["isProtectedDayOfYearToken"])(token)) {
        Object(_lib_protectedTokens_index_js__WEBPACK_IMPORTED_MODULE_8__["throwProtectedError"])(token, formatString, dirtyDateString);
      }
      var firstCharacter = token[0];
      var parser = _lib_parsers_index_js__WEBPACK_IMPORTED_MODULE_12__["parsers"][firstCharacter];
      if (parser) {
        var incompatibleTokens = parser.incompatibleTokens;
        if (Array.isArray(incompatibleTokens)) {
          var incompatibleToken = usedTokens.find(function (usedToken) {
            return incompatibleTokens.includes(usedToken.token) || usedToken.token === firstCharacter;
          });
          if (incompatibleToken) {
            throw new RangeError("The format string mustn't contain `".concat(incompatibleToken.fullToken, "` and `").concat(token, "` at the same time"));
          }
        } else if (parser.incompatibleTokens === '*' && usedTokens.length > 0) {
          throw new RangeError("The format string mustn't contain `".concat(token, "` and any other token at the same time"));
        }
        usedTokens.push({
          token: firstCharacter,
          fullToken: token
        });
        var parseResult = parser.run(dateString, token, locale.match, subFnOptions);
        if (!parseResult) {
          return {
            v: new Date(NaN)
          };
        }
        setters.push(parseResult.setter);
        dateString = parseResult.rest;
      } else {
        if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
          throw new RangeError('Format string contains an unescaped latin alphabet character `' + firstCharacter + '`');
        }

        // Replace two single quote characters with one single quote character
        if (token === "''") {
          token = "'";
        } else if (firstCharacter === "'") {
          token = cleanEscapedString(token);
        }

        // Cut token from string, or, if string doesn't match the token, return Invalid Date
        if (dateString.indexOf(token) === 0) {
          dateString = dateString.slice(token.length);
        } else {
          return {
            v: new Date(NaN)
          };
        }
      }
    };
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var _ret = _loop();
      if (Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__["default"])(_ret) === "object") return _ret.v;
    }

    // Check if the remaining input contains something other than whitespace
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  if (dateString.length > 0 && notWhitespaceRegExp.test(dateString)) {
    return new Date(NaN);
  }
  var uniquePrioritySetters = setters.map(function (setter) {
    return setter.priority;
  }).sort(function (a, b) {
    return b - a;
  }).filter(function (priority, index, array) {
    return array.indexOf(priority) === index;
  }).map(function (priority) {
    return setters.filter(function (setter) {
      return setter.priority === priority;
    }).sort(function (a, b) {
      return b.subPriority - a.subPriority;
    });
  }).map(function (setterArray) {
    return setterArray[0];
  });
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_4__["default"])(dirtyReferenceDate);
  if (isNaN(date.getTime())) {
    return new Date(NaN);
  }

  // Convert the date in system timezone to the same date in UTC+00:00 timezone.
  var utcDate = Object(_subMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])(date, Object(_lib_getTimezoneOffsetInMilliseconds_index_js__WEBPACK_IMPORTED_MODULE_7__["default"])(date));
  var flags = {};
  var _iterator2 = Object(_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__["default"])(uniquePrioritySetters),
    _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      var setter = _step2.value;
      if (!setter.validate(utcDate, subFnOptions)) {
        return new Date(NaN);
      }
      var result = setter.set(utcDate, flags, subFnOptions);
      // Result is tuple (date, flags)
      if (Array.isArray(result)) {
        utcDate = result[0];
        Object(_lib_assign_index_js__WEBPACK_IMPORTED_MODULE_5__["default"])(flags, result[1]);
        // Result is date
      } else {
        utcDate = result;
      }
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  return utcDate;
}
function cleanEscapedString(input) {
  return input.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp, "'");
}

/***/ }),
/* 424 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _createForOfIteratorHelper; });
/* harmony import */ var _unsupportedIterableToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(425);

function _createForOfIteratorHelper(r, e) {
  var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"];
  if (!t) {
    if (Array.isArray(r) || (t = Object(_unsupportedIterableToArray_js__WEBPACK_IMPORTED_MODULE_0__["default"])(r)) || e && r && "number" == typeof r.length) {
      t && (r = t);
      var _n = 0,
        F = function F() {};
      return {
        s: F,
        n: function n() {
          return _n >= r.length ? {
            done: !0
          } : {
            done: !1,
            value: r[_n++]
          };
        },
        e: function e(r) {
          throw r;
        },
        f: F
      };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var o,
    a = !0,
    u = !1;
  return {
    s: function s() {
      t = t.call(r);
    },
    n: function n() {
      var r = t.next();
      return a = r.done, r;
    },
    e: function e(r) {
      u = !0, o = r;
    },
    f: function f() {
      try {
        a || null == t["return"] || t["return"]();
      } finally {
        if (u) throw o;
      }
    }
  };
}


/***/ }),
/* 425 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _unsupportedIterableToArray; });
/* harmony import */ var _arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(426);

function _unsupportedIterableToArray(r, a) {
  if (r) {
    if ("string" == typeof r) return Object(_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__["default"])(r, a);
    var t = {}.toString.call(r).slice(8, -1);
    return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? Object(_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__["default"])(r, a) : void 0;
  }
}


/***/ }),
/* 426 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _arrayLikeToArray; });
function _arrayLikeToArray(r, a) {
  (null == a || a > r.length) && (a = r.length);
  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];
  return n;
}


/***/ }),
/* 427 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Setter", function() { return Setter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValueSetter", function() { return ValueSetter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DateToSystemTimezoneSetter", function() { return DateToSystemTimezoneSetter; });
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);






var TIMEZONE_UNIT_PRIORITY = 10;
var Setter = /*#__PURE__*/function () {
  function Setter() {
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__["default"])(this, Setter);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(this, "priority", void 0);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(this, "subPriority", 0);
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__["default"])(Setter, [{
    key: "validate",
    value: function validate(_utcDate, _options) {
      return true;
    }
  }]);
  return Setter;
}();
var ValueSetter = /*#__PURE__*/function (_Setter) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__["default"])(ValueSetter, _Setter);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__["default"])(ValueSetter);
  function ValueSetter(value, validateValue, setValue, priority, subPriority) {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__["default"])(this, ValueSetter);
    _this = _super.call(this);
    _this.value = value;
    _this.validateValue = validateValue;
    _this.setValue = setValue;
    _this.priority = priority;
    if (subPriority) {
      _this.subPriority = subPriority;
    }
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__["default"])(ValueSetter, [{
    key: "validate",
    value: function validate(utcDate, options) {
      return this.validateValue(utcDate, this.value, options);
    }
  }, {
    key: "set",
    value: function set(utcDate, flags, options) {
      return this.setValue(utcDate, flags, this.value, options);
    }
  }]);
  return ValueSetter;
}(Setter);
var DateToSystemTimezoneSetter = /*#__PURE__*/function (_Setter2) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__["default"])(DateToSystemTimezoneSetter, _Setter2);
  var _super2 = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__["default"])(DateToSystemTimezoneSetter);
  function DateToSystemTimezoneSetter() {
    var _this2;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__["default"])(this, DateToSystemTimezoneSetter);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this2 = _super2.call.apply(_super2, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__["default"])(_this2), "priority", TIMEZONE_UNIT_PRIORITY);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__["default"])(_this2), "subPriority", -1);
    return _this2;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__["default"])(DateToSystemTimezoneSetter, [{
    key: "set",
    value: function set(date, flags) {
      if (flags.timestampIsSet) {
        return date;
      }
      var convertedDate = new Date(0);
      convertedDate.setFullYear(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate());
      convertedDate.setHours(date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.getUTCMilliseconds());
      return convertedDate;
    }
  }]);
  return DateToSystemTimezoneSetter;
}(Setter);

/***/ }),
/* 428 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _assertThisInitialized; });
function _assertThisInitialized(e) {
  if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e;
}


/***/ }),
/* 429 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _inherits; });
/* harmony import */ var _setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(430);

function _inherits(t, e) {
  if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
  t.prototype = Object.create(e && e.prototype, {
    constructor: {
      value: t,
      writable: !0,
      configurable: !0
    }
  }), Object.defineProperty(t, "prototype", {
    writable: !1
  }), e && Object(_setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(t, e);
}


/***/ }),
/* 430 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _setPrototypeOf; });
function _setPrototypeOf(t, e) {
  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {
    return t.__proto__ = e, t;
  }, _setPrototypeOf(t, e);
}


/***/ }),
/* 431 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _createSuper; });
/* harmony import */ var _getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(432);
/* harmony import */ var _isNativeReflectConstruct_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(433);
/* harmony import */ var _possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(434);



function _createSuper(t) {
  var r = Object(_isNativeReflectConstruct_js__WEBPACK_IMPORTED_MODULE_1__["default"])();
  return function () {
    var e,
      o = Object(_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(t);
    if (r) {
      var s = Object(_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(this).constructor;
      e = Reflect.construct(o, arguments, s);
    } else e = o.apply(this, arguments);
    return Object(_possibleConstructorReturn_js__WEBPACK_IMPORTED_MODULE_2__["default"])(this, e);
  };
}


/***/ }),
/* 432 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _getPrototypeOf; });
function _getPrototypeOf(t) {
  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {
    return t.__proto__ || Object.getPrototypeOf(t);
  }, _getPrototypeOf(t);
}


/***/ }),
/* 433 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _isNativeReflectConstruct; });
function _isNativeReflectConstruct() {
  try {
    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
  } catch (t) {}
  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {
    return !!t;
  })();
}


/***/ }),
/* 434 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _possibleConstructorReturn; });
/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(171);
/* harmony import */ var _assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(428);


function _possibleConstructorReturn(t, e) {
  if (e && ("object" == Object(_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(e) || "function" == typeof e)) return e;
  if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
  return Object(_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_1__["default"])(t);
}


/***/ }),
/* 435 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _classCallCheck; });
function _classCallCheck(a, n) {
  if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function");
}


/***/ }),
/* 436 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _createClass; });
/* harmony import */ var _toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(437);

function _defineProperties(e, r) {
  for (var t = 0; t < r.length; t++) {
    var o = r[t];
    o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, Object(_toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__["default"])(o.key), o);
  }
}
function _createClass(e, r, t) {
  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", {
    writable: !1
  }), e;
}


/***/ }),
/* 437 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return toPropertyKey; });
/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(171);
/* harmony import */ var _toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(438);


function toPropertyKey(t) {
  var i = Object(_toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__["default"])(t, "string");
  return "symbol" == Object(_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(i) ? i : i + "";
}


/***/ }),
/* 438 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return toPrimitive; });
/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(171);

function toPrimitive(t, r) {
  if ("object" != Object(_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(t) || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r || "default");
    if ("object" != Object(_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(i)) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r ? String : Number)(t);
}


/***/ }),
/* 439 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _defineProperty; });
/* harmony import */ var _toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(437);

function _defineProperty(e, r, t) {
  return (r = Object(_toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__["default"])(r)) in e ? Object.defineProperty(e, r, {
    value: t,
    enumerable: !0,
    configurable: !0,
    writable: !0
  }) : e[r] = t, e;
}


/***/ }),
/* 440 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parsers", function() { return parsers; });
/* harmony import */ var _EraParser_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(441);
/* harmony import */ var _YearParser_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(443);
/* harmony import */ var _LocalWeekYearParser_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(446);
/* harmony import */ var _ISOWeekYearParser_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(447);
/* harmony import */ var _ExtendedYearParser_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(448);
/* harmony import */ var _QuarterParser_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(449);
/* harmony import */ var _StandAloneQuarterParser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(450);
/* harmony import */ var _MonthParser_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(451);
/* harmony import */ var _StandAloneMonthParser_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(452);
/* harmony import */ var _LocalWeekParser_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(453);
/* harmony import */ var _ISOWeekParser_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(455);
/* harmony import */ var _DateParser_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(457);
/* harmony import */ var _DayOfYearParser_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(458);
/* harmony import */ var _DayParser_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(459);
/* harmony import */ var _LocalDayParser_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(461);
/* harmony import */ var _StandAloneLocalDayParser_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(462);
/* harmony import */ var _ISODayParser_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(463);
/* harmony import */ var _AMPMParser_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(465);
/* harmony import */ var _AMPMMidnightParser_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(466);
/* harmony import */ var _DayPeriodParser_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(467);
/* harmony import */ var _Hour1to12Parser_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(468);
/* harmony import */ var _Hour0to23Parser_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(469);
/* harmony import */ var _Hour0To11Parser_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(470);
/* harmony import */ var _Hour1To24Parser_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(471);
/* harmony import */ var _MinuteParser_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(472);
/* harmony import */ var _SecondParser_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(473);
/* harmony import */ var _FractionOfSecondParser_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(474);
/* harmony import */ var _ISOTimezoneWithZParser_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(475);
/* harmony import */ var _ISOTimezoneParser_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(476);
/* harmony import */ var _TimestampSecondsParser_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(477);
/* harmony import */ var _TimestampMillisecondsParser_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(478);































/*
 * |     | Unit                           |     | Unit                           |
 * |-----|--------------------------------|-----|--------------------------------|
 * |  a  | AM, PM                         |  A* | Milliseconds in day            |
 * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |
 * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |
 * |  d  | Day of month                   |  D  | Day of year                    |
 * |  e  | Local day of week              |  E  | Day of week                    |
 * |  f  |                                |  F* | Day of week in month           |
 * |  g* | Modified Julian day            |  G  | Era                            |
 * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |
 * |  i! | ISO day of week                |  I! | ISO week of year               |
 * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |
 * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |
 * |  l* | (deprecated)                   |  L  | Stand-alone month              |
 * |  m  | Minute                         |  M  | Month                          |
 * |  n  |                                |  N  |                                |
 * |  o! | Ordinal number modifier        |  O* | Timezone (GMT)                 |
 * |  p  |                                |  P  |                                |
 * |  q  | Stand-alone quarter            |  Q  | Quarter                        |
 * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |
 * |  s  | Second                         |  S  | Fraction of second             |
 * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |
 * |  u  | Extended year                  |  U* | Cyclic year                    |
 * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |
 * |  w  | Local week of year             |  W* | Week of month                  |
 * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |
 * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |
 * |  z* | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |
 *
 * Letters marked by * are not implemented but reserved by Unicode standard.
 *
 * Letters marked by ! are non-standard, but implemented by date-fns:
 * - `o` modifies the previous token to turn it into an ordinal (see `parse` docs)
 * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,
 *   i.e. 7 for Sunday, 1 for Monday, etc.
 * - `I` is ISO week of year, as opposed to `w` which is local week of year.
 * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.
 *   `R` is supposed to be used in conjunction with `I` and `i`
 *   for universal ISO week-numbering date, whereas
 *   `Y` is supposed to be used in conjunction with `w` and `e`
 *   for week-numbering date specific to the locale.
 */
var parsers = {
  G: new _EraParser_js__WEBPACK_IMPORTED_MODULE_0__["EraParser"](),
  y: new _YearParser_js__WEBPACK_IMPORTED_MODULE_1__["YearParser"](),
  Y: new _LocalWeekYearParser_js__WEBPACK_IMPORTED_MODULE_2__["LocalWeekYearParser"](),
  R: new _ISOWeekYearParser_js__WEBPACK_IMPORTED_MODULE_3__["ISOWeekYearParser"](),
  u: new _ExtendedYearParser_js__WEBPACK_IMPORTED_MODULE_4__["ExtendedYearParser"](),
  Q: new _QuarterParser_js__WEBPACK_IMPORTED_MODULE_5__["QuarterParser"](),
  q: new _StandAloneQuarterParser_js__WEBPACK_IMPORTED_MODULE_6__["StandAloneQuarterParser"](),
  M: new _MonthParser_js__WEBPACK_IMPORTED_MODULE_7__["MonthParser"](),
  L: new _StandAloneMonthParser_js__WEBPACK_IMPORTED_MODULE_8__["StandAloneMonthParser"](),
  w: new _LocalWeekParser_js__WEBPACK_IMPORTED_MODULE_9__["LocalWeekParser"](),
  I: new _ISOWeekParser_js__WEBPACK_IMPORTED_MODULE_10__["ISOWeekParser"](),
  d: new _DateParser_js__WEBPACK_IMPORTED_MODULE_11__["DateParser"](),
  D: new _DayOfYearParser_js__WEBPACK_IMPORTED_MODULE_12__["DayOfYearParser"](),
  E: new _DayParser_js__WEBPACK_IMPORTED_MODULE_13__["DayParser"](),
  e: new _LocalDayParser_js__WEBPACK_IMPORTED_MODULE_14__["LocalDayParser"](),
  c: new _StandAloneLocalDayParser_js__WEBPACK_IMPORTED_MODULE_15__["StandAloneLocalDayParser"](),
  i: new _ISODayParser_js__WEBPACK_IMPORTED_MODULE_16__["ISODayParser"](),
  a: new _AMPMParser_js__WEBPACK_IMPORTED_MODULE_17__["AMPMParser"](),
  b: new _AMPMMidnightParser_js__WEBPACK_IMPORTED_MODULE_18__["AMPMMidnightParser"](),
  B: new _DayPeriodParser_js__WEBPACK_IMPORTED_MODULE_19__["DayPeriodParser"](),
  h: new _Hour1to12Parser_js__WEBPACK_IMPORTED_MODULE_20__["Hour1to12Parser"](),
  H: new _Hour0to23Parser_js__WEBPACK_IMPORTED_MODULE_21__["Hour0to23Parser"](),
  K: new _Hour0To11Parser_js__WEBPACK_IMPORTED_MODULE_22__["Hour0To11Parser"](),
  k: new _Hour1To24Parser_js__WEBPACK_IMPORTED_MODULE_23__["Hour1To24Parser"](),
  m: new _MinuteParser_js__WEBPACK_IMPORTED_MODULE_24__["MinuteParser"](),
  s: new _SecondParser_js__WEBPACK_IMPORTED_MODULE_25__["SecondParser"](),
  S: new _FractionOfSecondParser_js__WEBPACK_IMPORTED_MODULE_26__["FractionOfSecondParser"](),
  X: new _ISOTimezoneWithZParser_js__WEBPACK_IMPORTED_MODULE_27__["ISOTimezoneWithZParser"](),
  x: new _ISOTimezoneParser_js__WEBPACK_IMPORTED_MODULE_28__["ISOTimezoneParser"](),
  t: new _TimestampSecondsParser_js__WEBPACK_IMPORTED_MODULE_29__["TimestampSecondsParser"](),
  T: new _TimestampMillisecondsParser_js__WEBPACK_IMPORTED_MODULE_30__["TimestampMillisecondsParser"]()
};

/***/ }),
/* 441 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EraParser", function() { return EraParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);







var EraParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(EraParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(EraParser);
  function EraParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, EraParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 140);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['R', 'u', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(EraParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        // AD, BC
        case 'G':
        case 'GG':
        case 'GGG':
          return match.era(dateString, {
            width: 'abbreviated'
          }) || match.era(dateString, {
            width: 'narrow'
          });
        // A, B
        case 'GGGGG':
          return match.era(dateString, {
            width: 'narrow'
          });
        // Anno Domini, Before Christ
        case 'GGGG':
        default:
          return match.era(dateString, {
            width: 'wide'
          }) || match.era(dateString, {
            width: 'abbreviated'
          }) || match.era(dateString, {
            width: 'narrow'
          });
      }
    }
  }, {
    key: "set",
    value: function set(date, flags, value) {
      flags.era = value;
      date.setUTCFullYear(value, 0, 1);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return EraParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 442 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Parser", function() { return Parser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(439);
/* harmony import */ var _Setter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(427);




var Parser = /*#__PURE__*/function () {
  function Parser() {
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Parser);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "incompatibleTokens", void 0);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "priority", void 0);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__["default"])(this, "subPriority", void 0);
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Parser, [{
    key: "run",
    value: function run(dateString, token, match, options) {
      var result = this.parse(dateString, token, match, options);
      if (!result) {
        return null;
      }
      return {
        setter: new _Setter_js__WEBPACK_IMPORTED_MODULE_3__["ValueSetter"](result.value, this.validate, this.set, this.priority, this.subPriority),
        rest: result.rest
      };
    }
  }, {
    key: "validate",
    value: function validate(_utcDate, _value, _options) {
      return true;
    }
  }]);
  return Parser;
}();

/***/ }),
/* 443 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "YearParser", function() { return YearParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);








// From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_Patterns
// | Year     |     y | yy |   yyy |  yyyy | yyyyy |
// |----------|-------|----|-------|-------|-------|
// | AD 1     |     1 | 01 |   001 |  0001 | 00001 |
// | AD 12    |    12 | 12 |   012 |  0012 | 00012 |
// | AD 123   |   123 | 23 |   123 |  0123 | 00123 |
// | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |
// | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |
var YearParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(YearParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(YearParser);
  function YearParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, YearParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 130);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['Y', 'R', 'u', 'w', 'I', 'i', 'e', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(YearParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      var valueCallback = function valueCallback(year) {
        return {
          year: year,
          isTwoDigitYear: token === 'yy'
        };
      };
      switch (token) {
        case 'y':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigits"])(4, dateString), valueCallback);
        case 'yo':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(match.ordinalNumber(dateString, {
            unit: 'year'
          }), valueCallback);
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigits"])(token.length, dateString), valueCallback);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value.isTwoDigitYear || value.year > 0;
    }
  }, {
    key: "set",
    value: function set(date, flags, value) {
      var currentYear = date.getUTCFullYear();
      if (value.isTwoDigitYear) {
        var normalizedTwoDigitYear = Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["normalizeTwoDigitYear"])(value.year, currentYear);
        date.setUTCFullYear(normalizedTwoDigitYear, 0, 1);
        date.setUTCHours(0, 0, 0, 0);
        return date;
      }
      var year = !('era' in flags) || flags.era === 1 ? value.year : 1 - value.year;
      date.setUTCFullYear(year, 0, 1);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return YearParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 444 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapValue", function() { return mapValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseNumericPattern", function() { return parseNumericPattern; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseTimezonePattern", function() { return parseTimezonePattern; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseAnyDigitsSigned", function() { return parseAnyDigitsSigned; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseNDigits", function() { return parseNDigits; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseNDigitsSigned", function() { return parseNDigitsSigned; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dayPeriodEnumToHours", function() { return dayPeriodEnumToHours; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalizeTwoDigitYear", function() { return normalizeTwoDigitYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isLeapYearIndex", function() { return isLeapYearIndex; });
/* harmony import */ var _constants_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(374);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(445);


function mapValue(parseFnResult, mapFn) {
  if (!parseFnResult) {
    return parseFnResult;
  }
  return {
    value: mapFn(parseFnResult.value),
    rest: parseFnResult.rest
  };
}
function parseNumericPattern(pattern, dateString) {
  var matchResult = dateString.match(pattern);
  if (!matchResult) {
    return null;
  }
  return {
    value: parseInt(matchResult[0], 10),
    rest: dateString.slice(matchResult[0].length)
  };
}
function parseTimezonePattern(pattern, dateString) {
  var matchResult = dateString.match(pattern);
  if (!matchResult) {
    return null;
  }

  // Input is 'Z'
  if (matchResult[0] === 'Z') {
    return {
      value: 0,
      rest: dateString.slice(1)
    };
  }
  var sign = matchResult[1] === '+' ? 1 : -1;
  var hours = matchResult[2] ? parseInt(matchResult[2], 10) : 0;
  var minutes = matchResult[3] ? parseInt(matchResult[3], 10) : 0;
  var seconds = matchResult[5] ? parseInt(matchResult[5], 10) : 0;
  return {
    value: sign * (hours * _constants_index_js__WEBPACK_IMPORTED_MODULE_0__["millisecondsInHour"] + minutes * _constants_index_js__WEBPACK_IMPORTED_MODULE_0__["millisecondsInMinute"] + seconds * _constants_index_js__WEBPACK_IMPORTED_MODULE_0__["millisecondsInSecond"]),
    rest: dateString.slice(matchResult[0].length)
  };
}
function parseAnyDigitsSigned(dateString) {
  return parseNumericPattern(_constants_js__WEBPACK_IMPORTED_MODULE_1__["numericPatterns"].anyDigitsSigned, dateString);
}
function parseNDigits(n, dateString) {
  switch (n) {
    case 1:
      return parseNumericPattern(_constants_js__WEBPACK_IMPORTED_MODULE_1__["numericPatterns"].singleDigit, dateString);
    case 2:
      return parseNumericPattern(_constants_js__WEBPACK_IMPORTED_MODULE_1__["numericPatterns"].twoDigits, dateString);
    case 3:
      return parseNumericPattern(_constants_js__WEBPACK_IMPORTED_MODULE_1__["numericPatterns"].threeDigits, dateString);
    case 4:
      return parseNumericPattern(_constants_js__WEBPACK_IMPORTED_MODULE_1__["numericPatterns"].fourDigits, dateString);
    default:
      return parseNumericPattern(new RegExp('^\\d{1,' + n + '}'), dateString);
  }
}
function parseNDigitsSigned(n, dateString) {
  switch (n) {
    case 1:
      return parseNumericPattern(_constants_js__WEBPACK_IMPORTED_MODULE_1__["numericPatterns"].singleDigitSigned, dateString);
    case 2:
      return parseNumericPattern(_constants_js__WEBPACK_IMPORTED_MODULE_1__["numericPatterns"].twoDigitsSigned, dateString);
    case 3:
      return parseNumericPattern(_constants_js__WEBPACK_IMPORTED_MODULE_1__["numericPatterns"].threeDigitsSigned, dateString);
    case 4:
      return parseNumericPattern(_constants_js__WEBPACK_IMPORTED_MODULE_1__["numericPatterns"].fourDigitsSigned, dateString);
    default:
      return parseNumericPattern(new RegExp('^-?\\d{1,' + n + '}'), dateString);
  }
}
function dayPeriodEnumToHours(dayPeriod) {
  switch (dayPeriod) {
    case 'morning':
      return 4;
    case 'evening':
      return 17;
    case 'pm':
    case 'noon':
    case 'afternoon':
      return 12;
    case 'am':
    case 'midnight':
    case 'night':
    default:
      return 0;
  }
}
function normalizeTwoDigitYear(twoDigitYear, currentYear) {
  var isCommonEra = currentYear > 0;
  // Absolute number of the current year:
  // 1 -> 1 AC
  // 0 -> 1 BC
  // -1 -> 2 BC
  var absCurrentYear = isCommonEra ? currentYear : 1 - currentYear;
  var result;
  if (absCurrentYear <= 50) {
    result = twoDigitYear || 100;
  } else {
    var rangeEnd = absCurrentYear + 50;
    var rangeEndCentury = Math.floor(rangeEnd / 100) * 100;
    var isPreviousCentury = twoDigitYear >= rangeEnd % 100;
    result = twoDigitYear + rangeEndCentury - (isPreviousCentury ? 100 : 0);
  }
  return isCommonEra ? result : 1 - result;
}
function isLeapYearIndex(year) {
  return year % 400 === 0 || year % 4 === 0 && year % 100 !== 0;
}

/***/ }),
/* 445 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "numericPatterns", function() { return numericPatterns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timezonePatterns", function() { return timezonePatterns; });
var numericPatterns = {
  month: /^(1[0-2]|0?\d)/,
  // 0 to 12
  date: /^(3[0-1]|[0-2]?\d)/,
  // 0 to 31
  dayOfYear: /^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,
  // 0 to 366
  week: /^(5[0-3]|[0-4]?\d)/,
  // 0 to 53
  hour23h: /^(2[0-3]|[0-1]?\d)/,
  // 0 to 23
  hour24h: /^(2[0-4]|[0-1]?\d)/,
  // 0 to 24
  hour11h: /^(1[0-1]|0?\d)/,
  // 0 to 11
  hour12h: /^(1[0-2]|0?\d)/,
  // 0 to 12
  minute: /^[0-5]?\d/,
  // 0 to 59
  second: /^[0-5]?\d/,
  // 0 to 59

  singleDigit: /^\d/,
  // 0 to 9
  twoDigits: /^\d{1,2}/,
  // 0 to 99
  threeDigits: /^\d{1,3}/,
  // 0 to 999
  fourDigits: /^\d{1,4}/,
  // 0 to 9999

  anyDigitsSigned: /^-?\d+/,
  singleDigitSigned: /^-?\d/,
  // 0 to 9, -0 to -9
  twoDigitsSigned: /^-?\d{1,2}/,
  // 0 to 99, -0 to -99
  threeDigitsSigned: /^-?\d{1,3}/,
  // 0 to 999, -0 to -999
  fourDigitsSigned: /^-?\d{1,4}/ // 0 to 9999, -0 to -9999
};

var timezonePatterns = {
  basicOptionalMinutes: /^([+-])(\d{2})(\d{2})?|Z/,
  basic: /^([+-])(\d{2})(\d{2})|Z/,
  basicOptionalSeconds: /^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,
  extended: /^([+-])(\d{2}):(\d{2})|Z/,
  extendedOptionalSeconds: /^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/
};

/***/ }),
/* 446 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocalWeekYearParser", function() { return LocalWeekYearParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);
/* harmony import */ var _lib_getUTCWeekYear_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(187);
/* harmony import */ var _lib_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(184);










// Local week-numbering year
var LocalWeekYearParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(LocalWeekYearParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(LocalWeekYearParser);
  function LocalWeekYearParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LocalWeekYearParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 130);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['y', 'R', 'u', 'Q', 'q', 'M', 'L', 'I', 'd', 'D', 'i', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LocalWeekYearParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      var valueCallback = function valueCallback(year) {
        return {
          year: year,
          isTwoDigitYear: token === 'YY'
        };
      };
      switch (token) {
        case 'Y':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigits"])(4, dateString), valueCallback);
        case 'Yo':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(match.ordinalNumber(dateString, {
            unit: 'year'
          }), valueCallback);
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigits"])(token.length, dateString), valueCallback);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value.isTwoDigitYear || value.year > 0;
    }
  }, {
    key: "set",
    value: function set(date, flags, value, options) {
      var currentYear = Object(_lib_getUTCWeekYear_index_js__WEBPACK_IMPORTED_MODULE_8__["default"])(date, options);
      if (value.isTwoDigitYear) {
        var normalizedTwoDigitYear = Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["normalizeTwoDigitYear"])(value.year, currentYear);
        date.setUTCFullYear(normalizedTwoDigitYear, 0, options.firstWeekContainsDate);
        date.setUTCHours(0, 0, 0, 0);
        return Object(_lib_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_9__["default"])(date, options);
      }
      var year = !('era' in flags) || flags.era === 1 ? value.year : 1 - value.year;
      date.setUTCFullYear(year, 0, options.firstWeekContainsDate);
      date.setUTCHours(0, 0, 0, 0);
      return Object(_lib_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_9__["default"])(date, options);
    }
  }]);
  return LocalWeekYearParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 447 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ISOWeekYearParser", function() { return ISOWeekYearParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);
/* harmony import */ var _lib_startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(180);








 // ISO week-numbering year
var ISOWeekYearParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ISOWeekYearParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(ISOWeekYearParser);
  function ISOWeekYearParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ISOWeekYearParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 130);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['G', 'y', 'Y', 'u', 'Q', 'q', 'M', 'L', 'w', 'd', 'D', 'e', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ISOWeekYearParser, [{
    key: "parse",
    value: function parse(dateString, token) {
      if (token === 'R') {
        return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigitsSigned"])(4, dateString);
      }
      return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigitsSigned"])(token.length, dateString);
    }
  }, {
    key: "set",
    value: function set(_date, _flags, value) {
      var firstWeekOfYear = new Date(0);
      firstWeekOfYear.setUTCFullYear(value, 0, 4);
      firstWeekOfYear.setUTCHours(0, 0, 0, 0);
      return Object(_lib_startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_8__["default"])(firstWeekOfYear);
    }
  }]);
  return ISOWeekYearParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 448 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExtendedYearParser", function() { return ExtendedYearParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);








var ExtendedYearParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ExtendedYearParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(ExtendedYearParser);
  function ExtendedYearParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ExtendedYearParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 130);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['G', 'y', 'Y', 'R', 'w', 'I', 'i', 'e', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ExtendedYearParser, [{
    key: "parse",
    value: function parse(dateString, token) {
      if (token === 'u') {
        return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigitsSigned"])(4, dateString);
      }
      return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigitsSigned"])(token.length, dateString);
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCFullYear(value, 0, 1);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return ExtendedYearParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 449 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QuarterParser", function() { return QuarterParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);








var QuarterParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(QuarterParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(QuarterParser);
  function QuarterParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, QuarterParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 120);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['Y', 'R', 'q', 'M', 'L', 'w', 'I', 'd', 'D', 'i', 'e', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(QuarterParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        // 1, 2, 3, 4
        case 'Q':
        case 'QQ':
          // 01, 02, 03, 04
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigits"])(token.length, dateString);
        // 1st, 2nd, 3rd, 4th
        case 'Qo':
          return match.ordinalNumber(dateString, {
            unit: 'quarter'
          });
        // Q1, Q2, Q3, Q4
        case 'QQQ':
          return match.quarter(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.quarter(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        // 1, 2, 3, 4 (narrow quarter; could be not numerical)
        case 'QQQQQ':
          return match.quarter(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        // 1st quarter, 2nd quarter, ...
        case 'QQQQ':
        default:
          return match.quarter(dateString, {
            width: 'wide',
            context: 'formatting'
          }) || match.quarter(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.quarter(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 4;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCMonth((value - 1) * 3, 1);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return QuarterParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 450 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StandAloneQuarterParser", function() { return StandAloneQuarterParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);








var StandAloneQuarterParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(StandAloneQuarterParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(StandAloneQuarterParser);
  function StandAloneQuarterParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, StandAloneQuarterParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 120);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['Y', 'R', 'Q', 'M', 'L', 'w', 'I', 'd', 'D', 'i', 'e', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(StandAloneQuarterParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        // 1, 2, 3, 4
        case 'q':
        case 'qq':
          // 01, 02, 03, 04
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigits"])(token.length, dateString);
        // 1st, 2nd, 3rd, 4th
        case 'qo':
          return match.ordinalNumber(dateString, {
            unit: 'quarter'
          });
        // Q1, Q2, Q3, Q4
        case 'qqq':
          return match.quarter(dateString, {
            width: 'abbreviated',
            context: 'standalone'
          }) || match.quarter(dateString, {
            width: 'narrow',
            context: 'standalone'
          });
        // 1, 2, 3, 4 (narrow quarter; could be not numerical)
        case 'qqqqq':
          return match.quarter(dateString, {
            width: 'narrow',
            context: 'standalone'
          });
        // 1st quarter, 2nd quarter, ...
        case 'qqqq':
        default:
          return match.quarter(dateString, {
            width: 'wide',
            context: 'standalone'
          }) || match.quarter(dateString, {
            width: 'abbreviated',
            context: 'standalone'
          }) || match.quarter(dateString, {
            width: 'narrow',
            context: 'standalone'
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 4;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCMonth((value - 1) * 3, 1);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return StandAloneQuarterParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 451 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MonthParser", function() { return MonthParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(444);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(445);









var MonthParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(MonthParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(MonthParser);
  function MonthParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, MonthParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['Y', 'R', 'q', 'Q', 'L', 'w', 'I', 'D', 'i', 'e', 'c', 't', 'T']);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 110);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(MonthParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      var valueCallback = function valueCallback(value) {
        return value - 1;
      };
      switch (token) {
        // 1, 2, ..., 12
        case 'M':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_6__["mapValue"])(Object(_utils_js__WEBPACK_IMPORTED_MODULE_6__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_8__["numericPatterns"].month, dateString), valueCallback);
        // 01, 02, ..., 12
        case 'MM':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_6__["mapValue"])(Object(_utils_js__WEBPACK_IMPORTED_MODULE_6__["parseNDigits"])(2, dateString), valueCallback);
        // 1st, 2nd, ..., 12th
        case 'Mo':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_6__["mapValue"])(match.ordinalNumber(dateString, {
            unit: 'month'
          }), valueCallback);
        // Jan, Feb, ..., Dec
        case 'MMM':
          return match.month(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.month(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        // J, F, ..., D
        case 'MMMMM':
          return match.month(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        // January, February, ..., December
        case 'MMMM':
        default:
          return match.month(dateString, {
            width: 'wide',
            context: 'formatting'
          }) || match.month(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.month(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 11;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCMonth(value, 1);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return MonthParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_7__["Parser"]);

/***/ }),
/* 452 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StandAloneMonthParser", function() { return StandAloneMonthParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);









var StandAloneMonthParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(StandAloneMonthParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(StandAloneMonthParser);
  function StandAloneMonthParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, StandAloneMonthParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 110);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['Y', 'R', 'q', 'Q', 'M', 'w', 'I', 'D', 'i', 'e', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(StandAloneMonthParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      var valueCallback = function valueCallback(value) {
        return value - 1;
      };
      switch (token) {
        // 1, 2, ..., 12
        case 'L':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["mapValue"])(Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["numericPatterns"].month, dateString), valueCallback);
        // 01, 02, ..., 12
        case 'LL':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["mapValue"])(Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNDigits"])(2, dateString), valueCallback);
        // 1st, 2nd, ..., 12th
        case 'Lo':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["mapValue"])(match.ordinalNumber(dateString, {
            unit: 'month'
          }), valueCallback);
        // Jan, Feb, ..., Dec
        case 'LLL':
          return match.month(dateString, {
            width: 'abbreviated',
            context: 'standalone'
          }) || match.month(dateString, {
            width: 'narrow',
            context: 'standalone'
          });
        // J, F, ..., D
        case 'LLLLL':
          return match.month(dateString, {
            width: 'narrow',
            context: 'standalone'
          });
        // January, February, ..., December
        case 'LLLL':
        default:
          return match.month(dateString, {
            width: 'wide',
            context: 'standalone'
          }) || match.month(dateString, {
            width: 'abbreviated',
            context: 'standalone'
          }) || match.month(dateString, {
            width: 'narrow',
            context: 'standalone'
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 11;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCMonth(value, 1);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return StandAloneMonthParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 453 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocalWeekParser", function() { return LocalWeekParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);
/* harmony import */ var _lib_setUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(454);
/* harmony import */ var _lib_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(184);










 // Local week of year
var LocalWeekParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(LocalWeekParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(LocalWeekParser);
  function LocalWeekParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LocalWeekParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 100);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['y', 'R', 'u', 'q', 'Q', 'M', 'L', 'I', 'd', 'D', 'i', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LocalWeekParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'w':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["numericPatterns"].week, dateString);
        case 'wo':
          return match.ordinalNumber(dateString, {
            unit: 'week'
          });
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNDigits"])(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 53;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value, options) {
      return Object(_lib_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_10__["default"])(Object(_lib_setUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_9__["default"])(date, value, options), options);
    }
  }]);
  return LocalWeekParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 454 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setUTCWeek; });
/* harmony import */ var _toInteger_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(176);
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(173);
/* harmony import */ var _getUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(183);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(172);




function setUTCWeek(dirtyDate, dirtyWeek, options) {
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])(2, arguments);
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(dirtyDate);
  var week = Object(_toInteger_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyWeek);
  var diff = Object(_getUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(date, options) - week;
  date.setUTCDate(date.getUTCDate() - diff * 7);
  return date;
}

/***/ }),
/* 455 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ISOWeekParser", function() { return ISOWeekParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);
/* harmony import */ var _lib_setUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(456);
/* harmony import */ var _lib_startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(180);










 // ISO week of year
var ISOWeekParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ISOWeekParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(ISOWeekParser);
  function ISOWeekParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ISOWeekParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 100);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['y', 'Y', 'u', 'q', 'Q', 'M', 'L', 'w', 'd', 'D', 'e', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ISOWeekParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'I':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["numericPatterns"].week, dateString);
        case 'Io':
          return match.ordinalNumber(dateString, {
            unit: 'week'
          });
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNDigits"])(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 53;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      return Object(_lib_startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_10__["default"])(Object(_lib_setUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_9__["default"])(date, value));
    }
  }]);
  return ISOWeekParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 456 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setUTCISOWeek; });
/* harmony import */ var _toInteger_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(176);
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(173);
/* harmony import */ var _getUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(179);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(172);




function setUTCISOWeek(dirtyDate, dirtyISOWeek) {
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_3__["default"])(2, arguments);
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(dirtyDate);
  var isoWeek = Object(_toInteger_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyISOWeek);
  var diff = Object(_getUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(date) - isoWeek;
  date.setUTCDate(date.getUTCDate() - diff * 7);
  return date;
}

/***/ }),
/* 457 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DateParser", function() { return DateParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(444);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(445);









var DAYS_IN_MONTH = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
var DAYS_IN_MONTH_LEAP_YEAR = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

// Day of the month
var DateParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(DateParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(DateParser);
  function DateParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, DateParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 90);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "subPriority", 1);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['Y', 'R', 'q', 'Q', 'w', 'I', 'D', 'i', 'e', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(DateParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'd':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_6__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_8__["numericPatterns"].date, dateString);
        case 'do':
          return match.ordinalNumber(dateString, {
            unit: 'date'
          });
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_6__["parseNDigits"])(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(date, value) {
      var year = date.getUTCFullYear();
      var isLeapYear = Object(_utils_js__WEBPACK_IMPORTED_MODULE_6__["isLeapYearIndex"])(year);
      var month = date.getUTCMonth();
      if (isLeapYear) {
        return value >= 1 && value <= DAYS_IN_MONTH_LEAP_YEAR[month];
      } else {
        return value >= 1 && value <= DAYS_IN_MONTH[month];
      }
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCDate(value);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return DateParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_7__["Parser"]);

/***/ }),
/* 458 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DayOfYearParser", function() { return DayOfYearParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);









var DayOfYearParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(DayOfYearParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(DayOfYearParser);
  function DayOfYearParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, DayOfYearParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 90);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "subpriority", 1);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['Y', 'R', 'q', 'Q', 'M', 'L', 'w', 'I', 'd', 'E', 'i', 'e', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(DayOfYearParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'D':
        case 'DD':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["numericPatterns"].dayOfYear, dateString);
        case 'Do':
          return match.ordinalNumber(dateString, {
            unit: 'date'
          });
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNDigits"])(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(date, value) {
      var year = date.getUTCFullYear();
      var isLeapYear = Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["isLeapYearIndex"])(year);
      if (isLeapYear) {
        return value >= 1 && value <= 366;
      } else {
        return value >= 1 && value <= 365;
      }
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCMonth(0, value);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return DayOfYearParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 459 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DayParser", function() { return DayParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _lib_setUTCDay_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(460);







 // Day of week
var DayParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(DayParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(DayParser);
  function DayParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, DayParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 90);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['D', 'i', 'e', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(DayParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        // Tue
        case 'E':
        case 'EE':
        case 'EEE':
          return match.day(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'short',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        // T
        case 'EEEEE':
          return match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        // Tu
        case 'EEEEEE':
          return match.day(dateString, {
            width: 'short',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        // Tuesday
        case 'EEEE':
        default:
          return match.day(dateString, {
            width: 'wide',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'short',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 6;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value, options) {
      date = Object(_lib_setUTCDay_index_js__WEBPACK_IMPORTED_MODULE_7__["default"])(date, value, options);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return DayParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 460 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setUTCDay; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);
/* harmony import */ var _toInteger_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(176);
/* harmony import */ var _defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(185);




function setUTCDay(dirtyDate, dirtyDay, options) {
  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(2, arguments);
  var defaultOptions = Object(_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_3__["getDefaultOptions"])();
  var weekStartsOn = Object(_toInteger_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0);

  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  var day = Object(_toInteger_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(dirtyDay);
  var currentDay = date.getUTCDay();
  var remainder = day % 7;
  var dayIndex = (remainder + 7) % 7;
  var diff = (dayIndex < weekStartsOn ? 7 : 0) + day - currentDay;
  date.setUTCDate(date.getUTCDate() + diff);
  return date;
}

/***/ }),
/* 461 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocalDayParser", function() { return LocalDayParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);
/* harmony import */ var _lib_setUTCDay_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(460);








 // Local day of week
var LocalDayParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(LocalDayParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(LocalDayParser);
  function LocalDayParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, LocalDayParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 90);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['y', 'R', 'u', 'q', 'Q', 'M', 'L', 'I', 'd', 'D', 'E', 'i', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LocalDayParser, [{
    key: "parse",
    value: function parse(dateString, token, match, options) {
      var valueCallback = function valueCallback(value) {
        var wholeWeekDays = Math.floor((value - 1) / 7) * 7;
        return (value + options.weekStartsOn + 6) % 7 + wholeWeekDays;
      };
      switch (token) {
        // 3
        case 'e':
        case 'ee':
          // 03
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigits"])(token.length, dateString), valueCallback);
        // 3rd
        case 'eo':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(match.ordinalNumber(dateString, {
            unit: 'day'
          }), valueCallback);
        // Tue
        case 'eee':
          return match.day(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'short',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        // T
        case 'eeeee':
          return match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        // Tu
        case 'eeeeee':
          return match.day(dateString, {
            width: 'short',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        // Tuesday
        case 'eeee':
        default:
          return match.day(dateString, {
            width: 'wide',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'short',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 6;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value, options) {
      date = Object(_lib_setUTCDay_index_js__WEBPACK_IMPORTED_MODULE_8__["default"])(date, value, options);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return LocalDayParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 462 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StandAloneLocalDayParser", function() { return StandAloneLocalDayParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);
/* harmony import */ var _lib_setUTCDay_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(460);








 // Stand-alone local day of week
var StandAloneLocalDayParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(StandAloneLocalDayParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(StandAloneLocalDayParser);
  function StandAloneLocalDayParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, StandAloneLocalDayParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 90);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['y', 'R', 'u', 'q', 'Q', 'M', 'L', 'I', 'd', 'D', 'E', 'i', 'e', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(StandAloneLocalDayParser, [{
    key: "parse",
    value: function parse(dateString, token, match, options) {
      var valueCallback = function valueCallback(value) {
        var wholeWeekDays = Math.floor((value - 1) / 7) * 7;
        return (value + options.weekStartsOn + 6) % 7 + wholeWeekDays;
      };
      switch (token) {
        // 3
        case 'c':
        case 'cc':
          // 03
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigits"])(token.length, dateString), valueCallback);
        // 3rd
        case 'co':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(match.ordinalNumber(dateString, {
            unit: 'day'
          }), valueCallback);
        // Tue
        case 'ccc':
          return match.day(dateString, {
            width: 'abbreviated',
            context: 'standalone'
          }) || match.day(dateString, {
            width: 'short',
            context: 'standalone'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'standalone'
          });
        // T
        case 'ccccc':
          return match.day(dateString, {
            width: 'narrow',
            context: 'standalone'
          });
        // Tu
        case 'cccccc':
          return match.day(dateString, {
            width: 'short',
            context: 'standalone'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'standalone'
          });
        // Tuesday
        case 'cccc':
        default:
          return match.day(dateString, {
            width: 'wide',
            context: 'standalone'
          }) || match.day(dateString, {
            width: 'abbreviated',
            context: 'standalone'
          }) || match.day(dateString, {
            width: 'short',
            context: 'standalone'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'standalone'
          });
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 6;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value, options) {
      date = Object(_lib_setUTCDay_index_js__WEBPACK_IMPORTED_MODULE_8__["default"])(date, value, options);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return StandAloneLocalDayParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 463 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ISODayParser", function() { return ISODayParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);
/* harmony import */ var _lib_setUTCISODay_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(464);








 // ISO day of week
var ISODayParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ISODayParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(ISODayParser);
  function ISODayParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ISODayParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 90);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['y', 'Y', 'u', 'q', 'Q', 'M', 'L', 'w', 'd', 'D', 'E', 'e', 'c', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ISODayParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      var valueCallback = function valueCallback(value) {
        if (value === 0) {
          return 7;
        }
        return value;
      };
      switch (token) {
        // 2
        case 'i':
        case 'ii':
          // 02
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigits"])(token.length, dateString);
        // 2nd
        case 'io':
          return match.ordinalNumber(dateString, {
            unit: 'day'
          });
        // Tue
        case 'iii':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(match.day(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'short',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          }), valueCallback);
        // T
        case 'iiiii':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          }), valueCallback);
        // Tu
        case 'iiiiii':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(match.day(dateString, {
            width: 'short',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          }), valueCallback);
        // Tuesday
        case 'iiii':
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(match.day(dateString, {
            width: 'wide',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'short',
            context: 'formatting'
          }) || match.day(dateString, {
            width: 'narrow',
            context: 'formatting'
          }), valueCallback);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 7;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date = Object(_lib_setUTCISODay_index_js__WEBPACK_IMPORTED_MODULE_8__["default"])(date, value);
      date.setUTCHours(0, 0, 0, 0);
      return date;
    }
  }]);
  return ISODayParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 464 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return setUTCISODay; });
/* harmony import */ var _toDate_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(173);
/* harmony import */ var _requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);
/* harmony import */ var _toInteger_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(176);



function setUTCISODay(dirtyDate, dirtyDay) {
  Object(_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_1__["default"])(2, arguments);
  var day = Object(_toInteger_index_js__WEBPACK_IMPORTED_MODULE_2__["default"])(dirtyDay);
  if (day % 7 === 0) {
    day = day - 7;
  }
  var weekStartsOn = 1;
  var date = Object(_toDate_index_js__WEBPACK_IMPORTED_MODULE_0__["default"])(dirtyDate);
  var currentDay = date.getUTCDay();
  var remainder = day % 7;
  var dayIndex = (remainder + 7) % 7;
  var diff = (dayIndex < weekStartsOn ? 7 : 0) + day - currentDay;
  date.setUTCDate(date.getUTCDate() + diff);
  return date;
}

/***/ }),
/* 465 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AMPMParser", function() { return AMPMParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);








var AMPMParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(AMPMParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(AMPMParser);
  function AMPMParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, AMPMParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 80);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['b', 'B', 'H', 'k', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(AMPMParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'a':
        case 'aa':
        case 'aaa':
          return match.dayPeriod(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.dayPeriod(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        case 'aaaaa':
          return match.dayPeriod(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        case 'aaaa':
        default:
          return match.dayPeriod(dateString, {
            width: 'wide',
            context: 'formatting'
          }) || match.dayPeriod(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.dayPeriod(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
      }
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCHours(Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["dayPeriodEnumToHours"])(value), 0, 0, 0);
      return date;
    }
  }]);
  return AMPMParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 466 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AMPMMidnightParser", function() { return AMPMMidnightParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);








var AMPMMidnightParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(AMPMMidnightParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(AMPMMidnightParser);
  function AMPMMidnightParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, AMPMMidnightParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 80);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['a', 'B', 'H', 'k', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(AMPMMidnightParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'b':
        case 'bb':
        case 'bbb':
          return match.dayPeriod(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.dayPeriod(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        case 'bbbbb':
          return match.dayPeriod(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        case 'bbbb':
        default:
          return match.dayPeriod(dateString, {
            width: 'wide',
            context: 'formatting'
          }) || match.dayPeriod(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.dayPeriod(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
      }
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCHours(Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["dayPeriodEnumToHours"])(value), 0, 0, 0);
      return date;
    }
  }]);
  return AMPMMidnightParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 467 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DayPeriodParser", function() { return DayPeriodParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);







 // in the morning, in the afternoon, in the evening, at night
var DayPeriodParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(DayPeriodParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(DayPeriodParser);
  function DayPeriodParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, DayPeriodParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 80);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['a', 'b', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(DayPeriodParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'B':
        case 'BB':
        case 'BBB':
          return match.dayPeriod(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.dayPeriod(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        case 'BBBBB':
          return match.dayPeriod(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
        case 'BBBB':
        default:
          return match.dayPeriod(dateString, {
            width: 'wide',
            context: 'formatting'
          }) || match.dayPeriod(dateString, {
            width: 'abbreviated',
            context: 'formatting'
          }) || match.dayPeriod(dateString, {
            width: 'narrow',
            context: 'formatting'
          });
      }
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCHours(Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["dayPeriodEnumToHours"])(value), 0, 0, 0);
      return date;
    }
  }]);
  return DayPeriodParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 468 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Hour1to12Parser", function() { return Hour1to12Parser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);









var Hour1to12Parser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(Hour1to12Parser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(Hour1to12Parser);
  function Hour1to12Parser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Hour1to12Parser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 70);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['H', 'K', 'k', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Hour1to12Parser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'h':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["numericPatterns"].hour12h, dateString);
        case 'ho':
          return match.ordinalNumber(dateString, {
            unit: 'hour'
          });
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNDigits"])(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 12;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      var isPM = date.getUTCHours() >= 12;
      if (isPM && value < 12) {
        date.setUTCHours(value + 12, 0, 0, 0);
      } else if (!isPM && value === 12) {
        date.setUTCHours(0, 0, 0, 0);
      } else {
        date.setUTCHours(value, 0, 0, 0);
      }
      return date;
    }
  }]);
  return Hour1to12Parser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 469 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Hour0to23Parser", function() { return Hour0to23Parser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);









var Hour0to23Parser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(Hour0to23Parser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(Hour0to23Parser);
  function Hour0to23Parser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Hour0to23Parser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 70);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['a', 'b', 'h', 'K', 'k', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Hour0to23Parser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'H':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["numericPatterns"].hour23h, dateString);
        case 'Ho':
          return match.ordinalNumber(dateString, {
            unit: 'hour'
          });
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNDigits"])(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 23;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCHours(value, 0, 0, 0);
      return date;
    }
  }]);
  return Hour0to23Parser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 470 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Hour0To11Parser", function() { return Hour0To11Parser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);









var Hour0To11Parser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(Hour0To11Parser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(Hour0To11Parser);
  function Hour0To11Parser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Hour0To11Parser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 70);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['h', 'H', 'k', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Hour0To11Parser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'K':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["numericPatterns"].hour11h, dateString);
        case 'Ko':
          return match.ordinalNumber(dateString, {
            unit: 'hour'
          });
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNDigits"])(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 11;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      var isPM = date.getUTCHours() >= 12;
      if (isPM && value < 12) {
        date.setUTCHours(value + 12, 0, 0, 0);
      } else {
        date.setUTCHours(value, 0, 0, 0);
      }
      return date;
    }
  }]);
  return Hour0To11Parser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 471 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Hour1To24Parser", function() { return Hour1To24Parser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);









var Hour1To24Parser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(Hour1To24Parser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(Hour1To24Parser);
  function Hour1To24Parser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, Hour1To24Parser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 70);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['a', 'b', 'h', 'H', 'K', 't', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Hour1To24Parser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'k':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["numericPatterns"].hour24h, dateString);
        case 'ko':
          return match.ordinalNumber(dateString, {
            unit: 'hour'
          });
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNDigits"])(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 1 && value <= 24;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      var hours = value <= 24 ? value % 24 : value;
      date.setUTCHours(hours, 0, 0, 0);
      return date;
    }
  }]);
  return Hour1To24Parser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 472 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MinuteParser", function() { return MinuteParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);









var MinuteParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(MinuteParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(MinuteParser);
  function MinuteParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, MinuteParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 60);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['t', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(MinuteParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 'm':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["numericPatterns"].minute, dateString);
        case 'mo':
          return match.ordinalNumber(dateString, {
            unit: 'minute'
          });
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNDigits"])(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 59;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCMinutes(value, 0, 0);
      return date;
    }
  }]);
  return MinuteParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 473 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SecondParser", function() { return SecondParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);









var SecondParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(SecondParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(SecondParser);
  function SecondParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, SecondParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 50);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['t', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(SecondParser, [{
    key: "parse",
    value: function parse(dateString, token, match) {
      switch (token) {
        case 's':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNumericPattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["numericPatterns"].second, dateString);
        case 'so':
          return match.ordinalNumber(dateString, {
            unit: 'second'
          });
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseNDigits"])(token.length, dateString);
      }
    }
  }, {
    key: "validate",
    value: function validate(_date, value) {
      return value >= 0 && value <= 59;
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCSeconds(value, 0);
      return date;
    }
  }]);
  return SecondParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 474 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FractionOfSecondParser", function() { return FractionOfSecondParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);








var FractionOfSecondParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(FractionOfSecondParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(FractionOfSecondParser);
  function FractionOfSecondParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, FractionOfSecondParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 30);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['t', 'T']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(FractionOfSecondParser, [{
    key: "parse",
    value: function parse(dateString, token) {
      var valueCallback = function valueCallback(value) {
        return Math.floor(value * Math.pow(10, -token.length + 3));
      };
      return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["mapValue"])(Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseNDigits"])(token.length, dateString), valueCallback);
    }
  }, {
    key: "set",
    value: function set(date, _flags, value) {
      date.setUTCMilliseconds(value);
      return date;
    }
  }]);
  return FractionOfSecondParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 475 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ISOTimezoneWithZParser", function() { return ISOTimezoneWithZParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);








 // Timezone (ISO-8601. +00:00 is `'Z'`)
var ISOTimezoneWithZParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ISOTimezoneWithZParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(ISOTimezoneWithZParser);
  function ISOTimezoneWithZParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ISOTimezoneWithZParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 10);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['t', 'T', 'x']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ISOTimezoneWithZParser, [{
    key: "parse",
    value: function parse(dateString, token) {
      switch (token) {
        case 'X':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseTimezonePattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["timezonePatterns"].basicOptionalMinutes, dateString);
        case 'XX':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseTimezonePattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["timezonePatterns"].basic, dateString);
        case 'XXXX':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseTimezonePattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["timezonePatterns"].basicOptionalSeconds, dateString);
        case 'XXXXX':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseTimezonePattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["timezonePatterns"].extendedOptionalSeconds, dateString);
        case 'XXX':
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseTimezonePattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["timezonePatterns"].extended, dateString);
      }
    }
  }, {
    key: "set",
    value: function set(date, flags, value) {
      if (flags.timestampIsSet) {
        return date;
      }
      return new Date(date.getTime() - value);
    }
  }]);
  return ISOTimezoneWithZParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 476 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ISOTimezoneParser", function() { return ISOTimezoneParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(445);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(444);








 // Timezone (ISO-8601)
var ISOTimezoneParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ISOTimezoneParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(ISOTimezoneParser);
  function ISOTimezoneParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ISOTimezoneParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 10);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", ['t', 'T', 'X']);
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ISOTimezoneParser, [{
    key: "parse",
    value: function parse(dateString, token) {
      switch (token) {
        case 'x':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseTimezonePattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["timezonePatterns"].basicOptionalMinutes, dateString);
        case 'xx':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseTimezonePattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["timezonePatterns"].basic, dateString);
        case 'xxxx':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseTimezonePattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["timezonePatterns"].basicOptionalSeconds, dateString);
        case 'xxxxx':
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseTimezonePattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["timezonePatterns"].extendedOptionalSeconds, dateString);
        case 'xxx':
        default:
          return Object(_utils_js__WEBPACK_IMPORTED_MODULE_8__["parseTimezonePattern"])(_constants_js__WEBPACK_IMPORTED_MODULE_7__["timezonePatterns"].extended, dateString);
      }
    }
  }, {
    key: "set",
    value: function set(date, flags, value) {
      if (flags.timestampIsSet) {
        return date;
      }
      return new Date(date.getTime() - value);
    }
  }]);
  return ISOTimezoneParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 477 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimestampSecondsParser", function() { return TimestampSecondsParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);








var TimestampSecondsParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TimestampSecondsParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(TimestampSecondsParser);
  function TimestampSecondsParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TimestampSecondsParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 40);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", '*');
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TimestampSecondsParser, [{
    key: "parse",
    value: function parse(dateString) {
      return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseAnyDigitsSigned"])(dateString);
    }
  }, {
    key: "set",
    value: function set(_date, _flags, value) {
      return [new Date(value * 1000), {
        timestampIsSet: true
      }];
    }
  }]);
  return TimestampSecondsParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 478 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimestampMillisecondsParser", function() { return TimestampMillisecondsParser; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(435);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(436);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(428);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(429);
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(431);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(439);
/* harmony import */ var _Parser_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(442);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(444);








var TimestampMillisecondsParser = /*#__PURE__*/function (_Parser) {
  Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(TimestampMillisecondsParser, _Parser);
  var _super = Object(_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(TimestampMillisecondsParser);
  function TimestampMillisecondsParser() {
    var _this;
    Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, TimestampMillisecondsParser);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "priority", 20);
    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["default"])(Object(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this), "incompatibleTokens", '*');
    return _this;
  }
  Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(TimestampMillisecondsParser, [{
    key: "parse",
    value: function parse(dateString) {
      return Object(_utils_js__WEBPACK_IMPORTED_MODULE_7__["parseAnyDigitsSigned"])(dateString);
    }
  }, {
    key: "set",
    value: function set(_date, _flags, value) {
      return [new Date(value), {
        timestampIsSet: true
      }];
    }
  }]);
  return TimestampMillisecondsParser;
}(_Parser_js__WEBPACK_IMPORTED_MODULE_6__["Parser"]);

/***/ }),
/* 479 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalSameTabOpener", function() { return generalSameTabOpener; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);


class GeneralSameTabOpener extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Opens any link in the page in the same tab.")),
      id: 'sto',
      name: 'Same Tab Opener',
      sg: true,
      st: true,
      type: 'general',
      featureMap: {
        endless: this.sto_setLinks.bind(this)
      }
    };
  }
  sto_setLinks(context, main, source, endless) {
    const elements = context.querySelectorAll(`${endless ? `.esgst-es-page-${endless} [target="_blank"], .esgst-es-page-${endless}[target="_blank"]` : `[target="_blank"]`}`);
    for (let i = 0, n = elements.length; i < n; ++i) {
      elements[i].removeAttribute('target');
    }
  }
}
const generalSameTabOpener = new GeneralSameTabOpener();


/***/ }),
/* 480 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersUsernameHistory", function() { return usersUsernameHistory; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(132);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(221);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(208);





class UsersUsernameHistory extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-caret-down"
      }), ") next to a user's username (in their", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "profile"), " page) that allows you to view their username history ever since they started being tracked."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "It is impossible to keep track of every SteamGifts user due to a database capacity limitation (and that would also be impractical), so instead the feature keeps track of a limited number of users (currently around 9000). A user starts being tracked when anyone using ESGST clicks on the button to view their username history."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Username changes are detected in two instances:"), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Every 30 days the usernames of all of the users in the database are updated and if any changes are detected they are added to the history."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Every time anyone using ESGST clicks on the button to view the username history of a user the username of that user is updated and if a change is detected it is added to the history.")), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "The database is kept in a server, which means that everyone using ESGST interacts with the same database and views the same history."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-user"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-history"
      }), ") to the page heading of this menu that allows you to view all of the recent username changes detected.")),
      id: 'uh',
      name: 'Username History',
      sg: true,
      type: 'users',
      featureMap: {
        profile: this.addButton.bind(this)
      }
    };
  }
  addButton(profile) {
    let container;
    _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(profile.heading, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "esgst-uh-container",
      ref: ref => container = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
      className: "esgst-uh-button",
      title: _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].common.getFeatureTooltip('uh', 'View username history')
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "fa fa-caret-down"
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "esgst-uh-box esgst-hidden"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", {
      className: "esgst-uh-title"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", null, "Username History")), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", {
      className: "esgst-uh-list"
    }))));
    const button = container.querySelector('.esgst-uh-button');
    const box = container.querySelector('.esgst-uh-box');
    const list = box.querySelector('.esgst-uh-list');
    button.addEventListener('click', this.toggleBox.bind(this, profile, box, list));
    _class_Shared__WEBPACK_IMPORTED_MODULE_1__["Shared"].esgst.documentEvents.click.add(this.closeBox.bind(this, container, box));
  }
  async toggleBox(profile, box, list) {
    box.classList.toggle('esgst-hidden');
    if (list.innerHTML) {
      return;
    }
    const hasPermissions = await _class_Permissions__WEBPACK_IMPORTED_MODULE_2__["permissions"].contains([['server']]);
    if (!hasPermissions) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(list, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-times"
      }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", null, "No permissions granted for https://esgst.rafaelgomes.xyz. Please grant the permissions on the settings menu so that the data can be retrieved from the ESGST API.")));
      return;
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(list, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
      className: "fa fa-circle-o-notch fa-spin"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", null, "Loading username history...")));
    try {
      const response = await this.getUserNames(profile.steamId, profile.username);
      _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(list, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, response.result.usernames.map(username => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, username))));
    } catch (err) {
      Logger.warning(err);
      _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].insert(list, 'atinner', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("div", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-times"
      }), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", null, "Failed to load history. Please try again later.")));
    }
  }
  closeBox(container, box, event) {
    if (!box.classList.contains('esgst-hidden') && !container.contains(event.target)) {
      box.classList.add('esgst-hidden');
    }
  }

  /**
   * @param steamId
   * @param username
   */
  async getUserNames(steamId, username) {
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_4__["FetchRequest"].get(`https://esgst.rafaelgomes.xyz/api/user/+${steamId}/uh?username=${username}`);
    return response.json;
  }
}
const usersUsernameHistory = new UsersUsernameHistory();


/***/ }),
/* 481 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersUserNotes", function() { return usersUserNotes; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(212);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(144);








const createElements = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  removeDuplicateNotes = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].removeDuplicateNotes.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]),
  saveUser = _Common__WEBPACK_IMPORTED_MODULE_7__["common"].saveUser.bind(_Common__WEBPACK_IMPORTED_MODULE_7__["common"]);
class UsersUserNotes extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-sticky-note"
      }), " if there are notes saved and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("i", {
        className: "fa fa-sticky-note-o"
      }), " if there are not) next to a user's username (in their ", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "profile"), " page) that allows you to save notes for them (only visible to you)."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "You can press Ctrl + Enter to save the notes."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "This feature is recommended for cases where you want to associate a long text with a user, since the notes are not displayed in the page.For a short text, check", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
        "data-esgst-feature-id": "ut"
      }), ".")),
      features: {
        un_p: {
          name: 'Pop up when whitelisting/blacklisting a user.',
          sg: true
        }
      },
      id: 'un',
      name: 'User Notes',
      sg: true,
      st: true,
      type: 'users',
      featureMap: {
        profile: this.un_add.bind(this)
      }
    };
  }
  un_add(profile, savedUser) {
    let blacklistButton, position, whitelistButton;
    if (_class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.sg) {
      position = 'beforeend';
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('un_p')) {
        whitelistButton = profile.steamButtonContainer.getElementsByClassName('sidebar__shortcut__whitelist')[0];
        if (whitelistButton) {
          whitelistButton.addEventListener('click', this.un_open.bind(this, profile));
        }
        blacklistButton = profile.steamButtonContainer.getElementsByClassName('sidebar__shortcut__blacklist')[0];
        if (blacklistButton) {
          blacklistButton.addEventListener('click', this.un_open.bind(this, profile));
        }
      }
    } else {
      position = 'afterbegin';
    }
    profile.unButton = createElements(profile.heading, position, [{
      attributes: {
        class: 'esgst-un-button',
        title: getFeatureTooltip('un', 'Edit user notes')
      },
      type: 'a',
      children: [{
        attributes: {
          class: 'fa'
        },
        type: 'i'
      }]
    }]);
    profile.unIcon = profile.unButton.firstElementChild;
    if (savedUser && savedUser.notes) {
      profile.unIcon.classList.add('fa-sticky-note');
    } else {
      profile.unIcon.classList.add('fa-sticky-note-o');
    }
    profile.unButton.addEventListener('click', this.un_open.bind(this, profile));
  }
  un_open(profile) {
    profile.unPopup = new _class_Popup__WEBPACK_IMPORTED_MODULE_3__["Popup"]({
      addScrollable: true,
      icon: 'fa-sticky-note',
      isTemp: true,
      title: _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("fragment", null, "Edit user notes for ", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", null, profile.name), ":")
    });
    profile.unTextArea = createElements(profile.unPopup.scrollable, 'beforeend', [{
      type: 'textarea'
    }]);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('cfh')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_5__["Shared"].esgst.modules.commentsCommentFormattingHelper.cfh_addPanel(profile.unTextArea);
    }
    const button = _components_Button__WEBPACK_IMPORTED_MODULE_6__["Button"].create([{
      template: 'success',
      name: 'Save',
      onClick: this.un_save.bind(this, profile)
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Saving...'
    }]).insert(profile.unPopup.description, 'beforeend');
    profile.unTextArea.addEventListener('keydown', event => {
      if (event.ctrlKey && event.key === 'Enter') {
        button.onClick();
      }
    });
    profile.unPopup.open(this.un_get.bind(this, profile));
  }
  async un_save(profile) {
    let notes = removeDuplicateNotes(profile.unTextArea.value.trim());
    let user = {
      steamId: profile.steamId,
      id: profile.id,
      username: profile.username,
      values: {
        notes: notes
      }
    };
    if (notes) {
      profile.unIcon.classList.remove('fa-sticky-note-o');
      profile.unIcon.classList.add('fa-sticky-note');
    } else {
      profile.unIcon.classList.remove('fa-sticky-note');
      profile.unIcon.classList.add('fa-sticky-note-o');
    }
    await saveUser(null, null, user);
    profile.unPopup.close();
  }
  async un_get(profile) {
    profile.unTextArea.focus();
    let savedUsers = JSON.parse(getValue('users'));
    let savedUser = savedUsers.users[profile.steamId];
    if (savedUser) {
      let notes = savedUser.notes;
      if (notes) {
        profile.unTextArea.value = notes;
      }
    }
  }
}
const usersUserNotes = new UsersUserNotes();


/***/ }),
/* 482 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersUserFilters", function() { return usersUserFilters; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(132);
/* harmony import */ var _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(232);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(212);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(144);
/* harmony import */ var _Filters__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(311);












const createElements = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]),
  saveUser = _Common__WEBPACK_IMPORTED_MODULE_10__["common"].saveUser.bind(_Common__WEBPACK_IMPORTED_MODULE_10__["common"]);
class UsersUserFilters extends _Filters__WEBPACK_IMPORTED_MODULE_11__["Filters"] {
  constructor() {
    super('uf');
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-eye-slash"
      }), " if the user is being filtered and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-eye"
      }), " if they are not) next to a user's username (in their", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "profile"), " page) that allows you to hide their discussions, giveaways and posts (each one can be hidden separately)."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-user"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-eye-slash"
      }), ") to the page heading of this menu that allows you to view all of the users that have been filtered.")),
      features: {
        uf_d: {
          name: 'Automatically hide discussions from blacklisted users.',
          sg: true
        },
        uf_g: {
          name: 'Automatically hide giveaways from blacklisted users.',
          sg: true
        },
        uf_dp: {
          name: 'Automatically hide discussion posts from blacklisted users.',
          sg: true
        },
        uf_gp: {
          name: 'Automatically hide giveaway posts from blacklisted users.',
          sg: true
        },
        uf_s_s: {
          name: `Show switch to temporarily hide / unhide users filtered by the filters in the main page heading, along with a counter.`,
          sg: true
        }
      },
      id: 'uf',
      name: 'User Filters',
      sg: true,
      type: 'users',
      featureMap: {
        profile: this.uf_add.bind(this),
        comment: this.filterComments.bind(this),
        discussion: this.filterDiscussions.bind(this),
        giveaway: this.filterGiveaways.bind(this)
      }
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('uf_s_s')) {
      this.addSingleButton('fa-user');
    }
  }
  uf_add(profile, savedUser) {
    if (profile.username !== _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('username')) {
      profile.ufButton = createElements(profile.heading, 'beforeend', [{
        attributes: {
          class: 'esgst-uf-button',
          title: getFeatureTooltip('uf', 'Edit user filters')
        },
        type: 'a',
        children: [{
          attributes: {
            class: 'fa'
          },
          type: 'i'
        }]
      }]);
      profile.ufIcon = profile.ufButton.firstElementChild;
      if (savedUser) {
        profile.ufValues = this.fixData(savedUser.uf);
        if (profile.ufValues && (profile.ufValues.giveaways || profile.ufValues.discussions || profile.ufValues.discussionPosts || profile.ufValues.giveawayPosts)) {
          profile.ufIcon.classList.add('fa-eye-slash');
        } else {
          profile.ufIcon.classList.add('fa-eye');
          profile.ufValues = {
            giveaways: false,
            discussions: false,
            giveawayPosts: false,
            discussionPosts: false
          };
        }
      } else {
        profile.ufIcon.classList.add('fa-eye');
        profile.ufValues = {
          giveaways: false,
          discussions: false,
          giveawayPosts: false,
          discussionPosts: false
        };
      }
      profile.ufButton.addEventListener('click', this.uf_open.bind(this, profile));
    }
  }
  uf_open(profile) {
    profile.ufPopup = new _class_Popup__WEBPACK_IMPORTED_MODULE_4__["Popup"]({
      addScrollable: true,
      icon: 'fa-eye',
      isTemp: true,
      title: _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("fragment", null, "Apply user filters for ", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", null, profile.name), ":")
    });
    profile.ufOptions = createElements(profile.ufPopup.description, 'beforeend', [{
      type: 'div'
    }]);
    profile.ufGiveawaysOption = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_7__["ToggleSwitch"](profile.ufOptions, null, false, "Filter this user's giveaways.", false, false, "Hides the user's giveaways from the main pages.", profile.ufValues.giveaways);
    profile.ufDiscussionsOption = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_7__["ToggleSwitch"](profile.ufOptions, null, false, "Filter this user's discussions.", false, false, "Hides the user's discussions from the main pages.", profile.ufValues.discussions);
    profile.ufGiveawayPostsOption = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_7__["ToggleSwitch"](profile.ufOptions, null, false, "Filter this user's giveaway posts.", false, false, "Hides the user's posts made on giveaways.", profile.ufValues.giveawayPosts);
    profile.ufDiscussionPostsOption = new _class_ToggleSwitch__WEBPACK_IMPORTED_MODULE_7__["ToggleSwitch"](profile.ufOptions, null, false, "Filter this user's discussion posts.", false, false, "Hides the user's posts made on discussions.", profile.ufValues.discussionPosts);
    const saveButton = _components_Button__WEBPACK_IMPORTED_MODULE_8__["Button"].create([{
      template: 'success',
      name: 'Save Settings',
      onClick: this.uf_save.bind(this, profile, false)
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Saving...'
    }]).insert(profile.ufPopup.description, 'beforeend');
    const resetButton = _components_Button__WEBPACK_IMPORTED_MODULE_8__["Button"].create([{
      color: 'green',
      icons: ['fa-rotate-left'],
      name: 'Reset Settings',
      onClick: this.uf_save.bind(this, profile, true)
    }, {
      template: 'loading',
      isDisabled: true,
      name: 'Resetting...'
    }]).insert(profile.ufPopup.description, 'beforeend');
    saveButton.addConflict(resetButton);
    resetButton.addConflict(saveButton);
    profile.ufPopup.open();
  }
  async uf_save(profile, reset) {
    let user;
    if (reset) {
      profile.ufGiveawaysOption.input.checked = false;
      profile.ufDiscussionsOption.input.checked = false;
      profile.ufGiveawayPostsOption.input.checked = false;
      profile.ufDiscussionPostsOption.input.checked = false;
      profile.ufValues = {
        giveaways: false,
        discussions: false,
        giveawayPosts: false,
        discussionPosts: false
      };
    } else {
      profile.ufValues = {
        giveaways: profile.ufGiveawaysOption.input.checked,
        discussions: profile.ufDiscussionsOption.input.checked,
        giveawayPosts: profile.ufGiveawayPostsOption.input.checked,
        discussionPosts: profile.ufDiscussionPostsOption.input.checked
      };
    }
    user = {
      steamId: profile.steamId,
      id: profile.id,
      username: profile.username,
      values: {
        uf: profile.ufValues
      }
    };
    if (profile.ufValues && (profile.ufValues.giveaways || profile.ufValues.discussions || profile.ufValues.giveawayPosts || profile.ufValues.discussionPosts)) {
      profile.ufIcon.classList.remove('fa-eye');
      profile.ufIcon.classList.add('fa-eye-slash');
    } else {
      profile.ufIcon.classList.remove('fa-eye-slash');
      profile.ufIcon.classList.add('fa-eye');
    }
    await saveUser(null, null, user);
    profile.ufPopup.close();
  }
  fixData(data) {
    if (!data) {
      return;
    }
    if (_lib_jsUtils__WEBPACK_IMPORTED_MODULE_9__["Utils"].isSet(data.posts)) {
      data.giveawayPosts = data.posts;
      data.discussionPosts = data.posts;
      delete data.posts;
    }
    return data;
  }
  async filterDiscussions(discussions) {
    for (const discussion of discussions) {
      const savedUser = await _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.getUser(_class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.users, {
        username: discussion.author
      });
      if (!savedUser) {
        continue;
      }
      const uf = this.fixData(savedUser.uf);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('uf_d') && savedUser.blacklisted && !uf || uf && uf.discussions) {
        discussion.outerWrap.classList.add('esgst-hidden');
        discussion.outerWrap.setAttribute('data-esgst-not-filterable', 'uf');
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('uf_s_s')) {
          this.updateSingleCounter();
        }
      }
    }
  }
  async filterGiveaways(giveaways, main) {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.giveawaysPath || !main) {
      return;
    }
    for (const giveaway of giveaways) {
      const savedUser = await _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.getUser(_class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.users, {
        username: giveaway.creator
      });
      if (!savedUser) {
        continue;
      }
      const uf = this.fixData(savedUser.uf);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('uf_g') && savedUser.blacklisted && !uf || uf && uf.giveaways) {
        giveaway.outerWrap.classList.add('esgst-hidden');
        giveaway.outerWrap.setAttribute('data-esgst-not-filterable', 'uf');
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('uf_s_s')) {
          this.updateSingleCounter();
        }
      }
    }
  }
  async filterComments(comments, main) {
    for (const comment of comments) {
      const savedUser = await _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.getUser(_class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].esgst.users, {
        username: comment.author
      });
      if (!savedUser) {
        continue;
      }
      const uf = this.fixData(savedUser.uf);
      if ((comment.type === 'giveaways' && _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('uf_gp') || comment.type !== 'giveaways' && _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('uf_dp')) && savedUser.blacklisted && !uf || uf && (comment.type === 'giveaways' && uf.giveawayPosts || comment.type !== 'giveaways' && uf.discussionPosts)) {
        let numDescendants;
        if (comment.comment.nextElementSibling) {
          numDescendants = comment.comment.nextElementSibling.querySelectorAll(`:not(.comment--submit) > .comment__parent, .comment__child, .comment_inner`).length;
        } else {
          numDescendants = 0;
        }
        comment.comment.parentElement.classList.add('esgst-hidden');
        comment.comment.parentElement.setAttribute('data-esgst-not-filterable', 'uf');
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('uf_s_s')) {
          this.updateSingleCounter(numDescendants + 1);
        }
        if (!main || _class_Shared__WEBPACK_IMPORTED_MODULE_6__["Shared"].common.isCurrentPath('Messages')) {
          const commentsContainer = comment.comment.closest('.comments');
          if (!commentsContainer.querySelectorAll(`.comment:not([data-esgst-not-filterable])`).length) {
            commentsContainer.previousElementSibling.classList.add('esgst-hidden');
            commentsContainer.previousElementSibling.setAttribute('data-esgst-not-filterable', 'uf');
            commentsContainer.classList.add('esgst-hidden');
            commentsContainer.setAttribute('data-esgst-not-filterable', 'uf');
          }
        }
      }
    }
  }
}
const usersUserFilters = new UsersUserFilters();


/***/ }),
/* 483 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersSharedGroupChecker", function() { return usersSharedGroupChecker; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(221);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(132);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(144);













const createElements = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]),
  endless_load = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]);
class UsersSharedGroupChecker extends _class_Module__WEBPACK_IMPORTED_MODULE_6__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-users"
      }), ") next to a user's username (in their", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "profile"), " page) that allows you to check which groups you are both members of.")),
      id: 'sgc',
      name: 'Shared Group Checker',
      sg: true,
      type: 'users',
      featureMap: {
        profile: this.sgc_add.bind(this)
      }
    };
  }
  sgc_add(profile) {
    if (profile.username === _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('username')) {
      // no point in checking which groups a user shares with themselves
      return;
    }
    profile.sgcButton = createElements(profile.heading, 'beforeend', [{
      attributes: {
        class: 'esgst-sgc-button',
        title: getFeatureTooltip('sgc', 'Check shared groups')
      },
      type: 'a',
      children: [{
        attributes: {
          class: 'fa fa-users'
        },
        type: 'i'
      }]
    }]);
    profile.sgcButton.addEventListener('click', this.sgc_open.bind(this, profile));
  }
  async sgc_open(profile) {
    if (profile.sgcPopup) {
      profile.sgcPopup.open();
    } else {
      if (!(await _class_Permissions__WEBPACK_IMPORTED_MODULE_7__["permissions"].contains([['steamCommunity']]))) {
        return;
      }
      profile.sgcPopup = new _class_Popup__WEBPACK_IMPORTED_MODULE_8__["Popup"]({
        addScrollable: true,
        icon: 'fa-users',
        title: 'Shared Groups'
      });
      profile.sgcProgress = createElements(profile.sgcPopup.description, 'beforeend', [{
        type: 'div',
        children: [{
          attributes: {
            class: 'fa fa-circle-o-notch fa-spin'
          },
          type: 'i'
        }, {
          text: 'Checking shared groups...',
          type: 'span'
        }]
      }]);
      profile.sgcResults = createElements(profile.sgcPopup.scrollable, 'beforeend', [{
        attributes: {
          class: 'esgst-sgc-results esgst-glwc-results esgst-text-left'
        },
        type: 'div',
        children: [{
          type: 'div',
          children: [{
            attributes: {
              class: 'esgst-glwc-heading'
            },
            text: 'Public',
            type: 'div'
          }, {
            attributes: {
              class: 'table esgst-hidden'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'table__heading'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'table__column--width-fill'
                },
                text: 'Group',
                type: 'div'
              }]
            }, {
              attributes: {
                class: 'table__rows'
              },
              type: 'div'
            }]
          }]
        }, {
          type: 'div',
          children: [{
            attributes: {
              class: 'esgst-glwc-heading'
            },
            text: 'Private',
            type: 'div'
          }, {
            attributes: {
              class: 'table esgst-hidden'
            },
            type: 'div',
            children: [{
              attributes: {
                class: 'table__heading'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'table__column--width-fill'
                },
                text: 'Group',
                type: 'div'
              }]
            }, {
              attributes: {
                class: 'table__rows'
              },
              type: 'div'
            }]
          }]
        }]
      }]);
      profile.sgcPublic = profile.sgcResults.firstElementChild.lastElementChild;
      profile.sgcPublicResults = profile.sgcPublic.lastElementChild;
      profile.sgcPrivate = profile.sgcResults.lastElementChild.lastElementChild;
      profile.sgcPrivateResults = profile.sgcPrivate.lastElementChild;
      profile.sgcPopup.open();
      // noinspection JSIgnoredPromiseFromCall
      this.sgc_load(profile);
    }
  }
  async sgc_load(profile) {
    const publicGroups = [];
    const privateGroups = [];
    let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`http://steamcommunity.com/profiles/${profile.steamId}/groups/common`);
    let isLoggedIn = true;
    if (!response.html.getElementById('groups_list')) {
      response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`http://steamcommunity.com/profiles/${profile.steamId}/groups`);
      isLoggedIn = false;
    }
    const elements = response.html.getElementsByClassName('group_block');
    for (const element of elements) {
      const name = element.getElementsByClassName('linkTitle')[0].textContent;
      const avatar = element.getElementsByClassName('avatarMedium')[0].firstElementChild.firstElementChild.getAttribute('src');
      const steamId = element.querySelector('.steamLink').getAttribute('href').match(/\d+/)[0];
      let i;
      for (i = _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.groups.length - 1; i > -1 && _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.groups[i].steamId !== steamId; i--) {}
      if (!isLoggedIn && (i < 0 || !_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].esgst.groups[i].member)) {
        continue;
      }
      (element.getElementsByClassName('pubGroup')[0] ? publicGroups : privateGroups).push({
        name: name,
        html: [{
          attributes: {
            class: 'table__row-outer-wrap'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'table__row-inner-wrap'
            },
            type: 'div',
            children: [{
              type: 'div',
              children: [{
                attributes: {
                  class: 'table_image_avatar',
                  href: `/go/group/${steamId}`,
                  style: `background-image:url(${avatar})`
                },
                type: 'a'
              }]
            }, {
              attributes: {
                class: 'table__column--width-fill'
              },
              type: 'div',
              children: [{
                attributes: {
                  class: 'table__column__heading',
                  href: `/go/group/${steamId}`
                },
                type: 'a'
              }]
            }]
          }]
        }]
      });
    }
    const n1 = publicGroups.length;
    const n2 = privateGroups.length;
    if (n1 || n2) {
      if (n1 > 0) {
        _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__["Utils"].sortArray(publicGroups, false, 'name').map(x => {
          createElements(profile.sgcPublicResults, 'beforeend', x.html).getElementsByClassName('table__column__heading')[0].textContent = x.name;
        });
        profile.sgcPublic.classList.remove('esgst-hidden');
      } else {
        createElements(profile.sgcPublic, 'atouter', [{
          text: 'No shared public groups found.',
          type: 'div'
        }]);
      }
      if (n2 > 0) {
        _lib_jsUtils__WEBPACK_IMPORTED_MODULE_11__["Utils"].sortArray(privateGroups, false, 'name').map(x => {
          createElements(profile.sgcPrivateResults, 'beforeend', x.html).getElementsByClassName('table__column__heading')[0].textContent = x.name;
        });
        profile.sgcPrivate.classList.remove('esgst-hidden');
      } else {
        createElements(profile.sgcPrivate, 'atouter', [{
          text: 'No shared private groups found.',
          type: 'div'
        }]);
      }
      profile.sgcProgress.remove();
      profile.sgcProgress = null;
    } else {
      createElements(profile.sgcProgress, 'atinner', [{
        text: 'No shared groups found.',
        type: 'node'
      }]);
    }
    endless_load(profile.sgcResults);
  }
}
const usersSharedGroupChecker = new UsersSharedGroupChecker();


/***/ }),
/* 484 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersUserLinks", function() { return usersUserLinks; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(206);








class UsersUserLinks extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Allows you to add custom links next to a user's username in their profile page."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Can be used in other pages through ", _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("span", {
        "data-esgst-feature-id": "cl_ui"
      }), "."), _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("li", null, "Comes by default with 5 links to BLAEO, Playing Appreciated, Touhou Giveaways, AStats and SteamRep.")),
      id: 'ul',
      name: 'User Links',
      sg: true,
      type: 'users',
      featureMap: {
        profile: this.ul_add.bind(this)
      }
    };
  }
  ul_add(profile) {
    const items = [];
    const iconRegex = /^(fa-.+?)($|\s)/;
    const imageRegex = /^(https?:\/\/.+?)($|\s)/;
    const textRegex = /^(.+?)($|\s(fa-|https?:\/\/))/;
    for (const link of _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('ul_links')) {
      const children = [];
      let label = link.label;
      while (label) {
        const icon = label.match(iconRegex);
        if (icon) {
          label = label.replace(iconRegex, '');
          children.push(_class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("i", {
            className: `fa ${icon[1]}`
          }));
          continue;
        }
        const image = label.match(imageRegex);
        if (image) {
          label = label.replace(imageRegex, '');
          children.push(_class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("img", {
            height: 16,
            src: image[1],
            style: `vertical-align: middle;`,
            width: 16
          }));
          continue;
        }
        const text = label.match(textRegex);
        if (text) {
          label = label.replace(textRegex, `$3`);
          children.push(text[1]);
        }
      }
      items.push(_class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("a", {
        href: link.url.replace(/%username%/g, profile.username).replace(/%steamid%/g, profile.steamId),
        target: "_blank"
      }, children));
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].insert(profile.heading, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_7__["DOM"].element("fragment", null, items));
  }
}
const usersUserLinks = new UsersUserLinks();


/***/ }),
/* 485 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersRealWonSentCVLink", function() { return usersRealWonSentCVLink; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




const createElements = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class UsersRealWonSentCVLink extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Turns \"Gifts Won\" and \"Gifts Sent\" in a user's", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "profile"), " page into links that take you to their real won/sent CV pages on ", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: "https://www.sgtools.info/"
      }, "SGTools"), ".")),
      features: {
        rwscvl_r: {
          name: `Link SGTools' reverse pages (from newest to oldest).`,
          sg: true
        }
      },
      id: 'rwscvl',
      name: 'Real Won/Sent CV Link',
      sg: true,
      type: 'users',
      featureMap: {
        profile: this.rwscvl_add.bind(this)
      }
    };
  }
  rwscvl_add(profile) {
    let sentUrl, wonUrl;
    wonUrl = `http://www.sgtools.info/won/${profile.username}`;
    sentUrl = `http://www.sgtools.info/sent/${profile.username}`;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('rwscvl_r')) {
      wonUrl += '/newestfirst';
      sentUrl += '/newestfirst';
    }
    createElements(profile.wonRowLeft, 'atinner', [{
      attributes: {
        class: 'esgst-rwscvl-link',
        href: wonUrl,
        target: '_blank',
        title: getFeatureTooltip('rwscvl')
      },
      text: 'Gifts Won',
      type: 'a'
    }]);
    createElements(profile.sentRowLeft, 'atinner', [{
      attributes: {
        class: 'esgst-rwscvl-link',
        href: sentUrl,
        target: '_blank',
        title: getFeatureTooltip('rwscvl')
      },
      text: 'Gifts Sent',
      type: 'a'
    }]);
  }
}
const usersRealWonSentCVLink = new UsersRealWonSentCVLink();


/***/ }),
/* 486 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersUserGiveawayData", function() { return usersUserGiveawayData; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(168);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(208);
/* harmony import */ var _class_LocalStorage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(96);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(210);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(220);
/* harmony import */ var _class_Process__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(279);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(132);
/* harmony import */ var _class_Table__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(272);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(224);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(144);

















const createElements = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  endless_load = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  getPlayerAchievements = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].getPlayerAchievements.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  getUser = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].getUser.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  lockAndSaveGiveaways = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].lockAndSaveGiveaways.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  saveUser = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].saveUser.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]),
  setSetting = _Common__WEBPACK_IMPORTED_MODULE_16__["common"].setSetting.bind(_Common__WEBPACK_IMPORTED_MODULE_16__["common"]);
class UsersUserGiveawayData extends _class_Module__WEBPACK_IMPORTED_MODULE_9__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Adds 2 identical buttons (", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
        className: "fa fa-bar-chart"
      }), ") to the \"Gifts Won\" and \"Gifts Sent\" rows of a user's ", _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "profile"), ' ', "page that allow you to gather data about their giveaways:"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "The won data contains a table with the number and percentage of won giveaways per type/level, a list with the creators that the user has most won from and (optionally) 2 other tables with the user's playtime/achievement stats for the games (DLCs cannot be counted, but packages will be listed with playtime > 0 and achievements > 0 if one or more of the games in the package have playtime/achievements)."), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "The sent data contains a table with the number and percentage of sent giveaways per type/level and a list with the games that the user has most given away.")), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Results are cached forever, so every time you check the same user again the feature will only retrieve the giveaways that they have created/won since the last check, unless you check them with the option to clear the cache enabled, in which case all of their giveaways will be retrieved again as if they were being checked for the first time.")),
      features: {
        ugd_s: {
          name: "Display playtime/achievement stats in the user's profile page.",
          sg: true
        },
        ugd_g: {
          name: 'Display how many gifts you have won from / sent to the user to their profile page.',
          sg: true,
          sync: 'Won Giveaways',
          syncKeys: ['WonGiveaways']
        }
      },
      id: 'ugd',
      name: 'User Giveaway Data',
      sg: true,
      type: 'users',
      featureMap: {
        profile: this.ugd_addButtons.bind(this)
      }
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_s')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.profileFeatures.push(this.ugd_addStats.bind(this));
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_g')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.profileFeatures.push(this.ugd_addGifts.bind(this));
    }
  }
  async ugd_addButtons(profile) {
    const user = {
      steamId: profile.steamId,
      id: profile.id,
      username: profile.username
    };
    await this.ugd_add(profile.wonRowLeft, 'won', user);
    await this.ugd_add(profile.sentRowLeft, 'sent', user);
  }
  ugd_addStats(profile, savedUser) {
    if (!savedUser) {
      return;
    }
    const ugdCache = savedUser.ugdCache;
    if (!ugdCache) {
      return;
    }
    let context;
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(profile.commentsRow, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-ugd featured__table__row",
      title: getFeatureTooltip('ugd'),
      ref: ref => context = ref
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "featured__table__row__left"
    }, 'Won Games Playtime > ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
      className: "esgst-ugd-input",
      min: "0",
      step: "0.1",
      type: "number",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_playtime')
    }), ' hours'), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "featured__table__row__right"
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-ugd featured__table__row",
      title: getFeatureTooltip('ugd')
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "featured__table__row__left"
    }, 'Won Games Achievements > ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("input", {
      className: "esgst-ugd-input",
      max: "100",
      min: "0",
      step: "0.1",
      type: "number",
      value: _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_achievements')
    }), ' %'), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "featured__table__row__right"
    })), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-ugd featured__table__row",
      title: getFeatureTooltip('ugd')
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "featured__table__row__left"
    }), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "featured__table__row__right"
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
      className: "esgst-italic"
    }, `Last checked ${Object(date_fns_format__WEBPACK_IMPORTED_MODULE_4__["default"])(ugdCache.lastCheck, `MMM dd, yyyy, HH:mm:ss`)}.`)))));
    const playtimeInput = context.firstElementChild.lastElementChild;
    const playtimeDisplay = context.lastElementChild;
    const achievementsInput = context.nextElementSibling.firstElementChild.lastElementChild;
    const achievementsDisplay = context.nextElementSibling.lastElementChild;
    playtimeInput.addEventListener('change', this.ugd_calculatePlaytime.bind(this, playtimeDisplay, playtimeInput, ugdCache, false));
    achievementsInput.addEventListener('change', this.ugd_calculateAchievements.bind(this, achievementsDisplay, achievementsInput, ugdCache, false));
    this.ugd_calculatePlaytime(playtimeDisplay, playtimeInput, ugdCache, true);
    this.ugd_calculateAchievements(achievementsDisplay, achievementsInput, ugdCache, true);
  }
  ugd_calculatePlaytime(playtimeDisplay, playtimeInput, ugdCache, firstRun) {
    _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].set('ugd_playtime', parseFloat(playtimeInput.value));
    let playtimes = 0;
    for (const key in ugdCache.playtimes) {
      if (ugdCache.playtimes.hasOwnProperty(key)) {
        const playtime = ugdCache.playtimes[key];
        if (playtime[1] / 60 > _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_playtime')) {
          playtimes += 1;
        }
      }
    }
    const totalPlaytimes = Object.keys(ugdCache.playtimes).length;
    playtimeDisplay.textContent = `${playtimes}/${totalPlaytimes} (${totalPlaytimes > 0 ? Math.round(playtimes / totalPlaytimes * 10000) / 100 : 0}%)`;
    if (!firstRun) {
      setSetting('ugd_playtime', _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_playtime'));
    }
  }
  ugd_calculateAchievements(achievementsDisplay, achievementsInput, ugdCache, firstRun) {
    _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].set('ugd_achievements', parseFloat(achievementsInput.value));
    let achievements = 0;
    for (const key in ugdCache.achievements) {
      if (ugdCache.achievements.hasOwnProperty(key)) {
        const achievement = ugdCache.achievements[key];
        if (parseFloat(achievement.match(/\((.+?)%\)/)[1]) > _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_achievements')) {
          achievements += 1;
        }
      }
    }
    const totalAchievements = Object.keys(ugdCache.achievements).length;
    achievementsDisplay.textContent = `${achievements}/${totalAchievements} (${totalAchievements > 0 ? Math.round(achievements / totalAchievements * 10000) / 100 : 0}%)`;
    if (!firstRun) {
      setSetting('ugd_achievements', _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_achievements'));
    }
  }
  ugd_addGifts(profile) {
    if (profile.username === _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('username')) {
      return;
    }
    const savedUser = _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.users.users[_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('steamId')];
    if (!savedUser) {
      return;
    }
    const giveaways = savedUser.giveaways;
    if (!giveaways) {
      return;
    }
    const won = [];
    const sent = [];
    for (const type of ['apps', 'subs']) {
      for (const id in giveaways.won[type]) {
        for (const code of giveaways.won[type][id]) {
          const giveaway = _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.giveaways[code];
          if (!giveaway || !giveaway.creator || giveaway.creator.toLowerCase() !== profile.username.toLowerCase()) {
            continue;
          }
          won.push(giveaway.gameName);
        }
      }
      for (const id in giveaways.sent[type]) {
        for (const code of giveaways.sent[type][id]) {
          const giveaway = _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.giveaways[code];
          if (!giveaway) {
            continue;
          }
          for (const winner of giveaway.winners) {
            if (winner.username.toLowerCase() !== profile.username.toLowerCase() || winner.status !== 'Received') {
              continue;
            }
            sent.push(giveaway.gameName);
          }
        }
      }
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(profile.levelRow, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-ugd featured__table__row",
      title: getFeatureTooltip('ugd')
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "featured__table__row__left"
    }, "Gifts Won From This User"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "featured__table__row__right",
      title: won.join(`, `)
    }, won.length)), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-ugd featured__table__row",
      title: getFeatureTooltip('ugd')
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "featured__table__row__left"
    }, "Gifts Sent To This User"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "featured__table__row__right",
      title: sent.join(`, `)
    }, sent.length))));
  }
  async ugd_add(context, key, user, mainPopup) {
    let button = null;
    if (context) {
      button = createElements(context, 'beforeend', [{
        attributes: {
          class: 'esgst-ugd-button',
          title: getFeatureTooltip('ugd', `Get ${key} giveaway data`)
        },
        type: 'span',
        children: [{
          attributes: {
            class: 'fa fa-bar-chart'
          },
          type: 'i'
        }]
      }]);
    }
    const savedUser = await getUser(null, user);
    const ugdCache = savedUser && savedUser.ugdCache;
    const details = {
      button: button,
      popup: {
        icon: 'fa-bar-chart',
        title: `Get ${user.username}'s ${key} giveaway data:`,
        options: [{
          check: key === 'won',
          dependencies: ['ugd_forceUpdate'],
          description: 'Get playtime stats.',
          id: 'ugd_getPlaytime',
          tooltip: `Get playtime stats for each won game by this user (requires a Steam API Key inserted into the settings menu - does not check DLCs/packages).`
        }, {
          check: key === 'won',
          dependencies: ['ugd_forceUpdate'],
          description: 'Get achievements stats.',
          id: 'ugd_getAchievements',
          tooltip: `Get achievements stats for each won game by this user (slower - does not check DLCs/packages).`
        }, {
          check: key === 'won',
          description: 'Force-update playtime/achievements stats.',
          id: 'ugd_forceUpdate',
          tooltip: `Playtime/achievements stats are updated automatically if you re-check the user after a week. With this option enabled, they are force-updated.`
        }, {
          check: true,
          description: 'Clear cache.',
          id: 'ugd_clearCache',
          tooltip: `If enabled, the cache will be cleared and all giveaways will be retrieved again (slower).`
        }],
        addProgress: true,
        addScrollable: 'left',
        scrollableContent: !mainPopup && ugdCache ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", {
          className: "esgst-italic"
        }, `Last checked ${Object(date_fns_format__WEBPACK_IMPORTED_MODULE_4__["default"])(ugdCache.lastCheck, `MMM dd, yyyy, HH:mm:ss`)}.`) : null
      },
      mainPopup: mainPopup,
      init: this.ugd_init.bind(this, key, user),
      requests: [{
        url: `/user/${user.username}${key === 'won' ? '/giveaways/won' : ''}/search?page=`,
        request: this.ugd_requestGiveaways.bind(this)
      }, this.ugd_requestGiveawaysDone.bind(this)],
      id: 'ugd',
      permissions: {
        steamApi: () => key === 'won' && (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getPlaytime') || _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getAchievements')),
        steamStore: () => true
      }
    };
    return new _class_Process__WEBPACK_IMPORTED_MODULE_10__["Process"](details);
  }
  async ugd_init(key, user, obj) {
    obj.giveaways = {};
    obj.key = key;
    obj.requests = obj.requests.slice(0, 2);
    obj.user = user;
    const savedUser = await getUser(null, obj.user);
    obj.ugdCache = savedUser && savedUser.ugdCache;
    obj.userGiveaways = await this.ugd_getUserGiveaways(savedUser);
    if (obj.popup && _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_clearCache')) {
      obj.userGiveaways[obj.key] = null;
      if (obj.key === 'won') {
        obj.ugdCache = null;
      }
    }
    if (!obj.userGiveaways.sent || obj.key === 'sent' && obj.userGiveaways.version !== '7.13.0') {
      obj.userGiveaways.sent = {
        apps: {},
        subs: {}
      };
      obj.userGiveaways.sentTimestamp = 0;
      obj.userGiveaways.version = '7.13.0';
    }
    if (!obj.userGiveaways.won) {
      obj.userGiveaways.won = {
        apps: {},
        subs: {}
      };
      obj.userGiveaways.wonTimestamp = 0;
    }
  }
  async ugd_getUserGiveaways(savedUser) {
    let userGiveaways = savedUser && savedUser.giveaways;
    if (userGiveaways) {
      return userGiveaways;
    }
    userGiveaways = {
      sent: {
        apps: {},
        subs: {}
      },
      won: {
        apps: {},
        subs: {}
      },
      sentTimestamp: 0,
      wonTimestamp: 0,
      version: '7.13.0'
    };
    if (!savedUser) {
      return userGiveaways;
    }
    const ugd = savedUser.ugd;
    if (!ugd) {
      return userGiveaways;
    }
    let newGiveaways = {};
    const keys = ['sent', 'won'];
    const types = ['apps', 'subs'];
    for (const key of keys) {
      if (!ugd[key]) {
        continue;
      }
      for (const type of types) {
        const ids = ugd[key][type];
        for (const id of ids) {
          userGiveaways[key][type][id] = [];
          const giveaways = ugd[key][type][id];
          const n = giveaways.length;
          for (let i = 0; i < n; i++) {
            const giveaway = giveaways[i];
            const code = giveaway.code;
            newGiveaways[code] = giveaway;
            userGiveaways[key][type][id].push(code);
          }
        }
      }
      userGiveaways[`${key}Timestamp`] = ugd[`${key}Timestamp`];
    }
    if (Object.keys(newGiveaways).length) {
      await lockAndSaveGiveaways(newGiveaways);
    }
    return userGiveaways;
  }
  async ugd_requestGiveaways(obj, details, response, responseHtml) {
    const msg = `Retrieving giveaways (page ${details.nextPage}${details.lastPage})...`;
    if (obj.popup) {
      obj.popup.progressBar.setLoading(msg).show();
    } else if (!obj.mainPopup.isSilent) {
      obj.mainPopup.progressBar.setMessage(msg);
    }
    let found = false;
    const currentTime = Date.now();
    const elements = responseHtml.getElementsByClassName('giveaway__row-outer-wrap');
    const n = elements.length;
    for (let i = 0; i < n; i++) {
      const giveawayObj = await _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.modules.giveaways.giveaways_getInfo(elements[i], document, obj.user.username, obj.key);
      const giveawayRaw = giveawayObj.giveaway;
      let giveaway = giveawayObj.data;
      const endTime = giveaway.endTime;

      // giveaway has not ended yet or does not have winners, so cannot store it
      if ((endTime >= currentTime || giveaway.numWinners < 1) && (obj.user.username !== _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('username') || obj.key !== 'sent')) {
        continue;
      }

      // giveaway has already been stored previously
      if (endTime < obj.userGiveaways[`${obj.key}Timestamp`]) {
        found = true;
        break;
      }
      if (!obj.timestamp && endTime < currentTime) {
        obj.timestamp = endTime;
      }
      let id = giveaway.gameSteamId;
      if (!id) {
        if (obj.user.username === _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('username') && obj.key === 'sent') {
          const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`/giveaway/${giveaway.code}/`);
          giveaway = (await _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.modules.giveaways.giveaways_get(response.html, false, response.url))[0];
          id = giveaway && giveaway.gameSteamId;
          if (!id) {
            continue;
          }
        } else {
          continue;
        }
      }
      const games = obj.userGiveaways[obj.key][giveaway.gameType];
      const code = giveaway.code;
      if (!games[id]) {
        games[id] = [];
      }
      if (code) {
        if (games[id].indexOf(code) < 0) {
          games[id].push(code);
        }
        const savedGiveaway = _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.giveaways[code];
        if (!savedGiveaway || !Array.isArray(savedGiveaway.winners)) {
          if (obj.key === 'sent') {
            giveaway.winners = [];
            if ((giveawayRaw.winners.length || giveawayRaw.numWinners) > 3) {
              obj.requests.push({
                giveaway: giveaway,
                request: this.ugd_requestGiveaway,
                url: `/giveaway/${code}/_/winners/search?page=`
              });
            } else {
              for (const key in giveawayRaw.winnerColumns) {
                if (giveawayRaw.winnerColumns.hasOwnProperty(key)) {
                  const column = giveawayRaw.winnerColumns[key];
                  if (!column.status || column.status === 'Awaiting Feedback') {
                    continue;
                  }
                  for (const winner of column.winners) {
                    giveaway.winners.push({
                      status: column.status,
                      username: winner
                    });
                  }
                }
              }
            }
          }
        }
        obj.giveaways[code] = giveaway;
      } else {
        games[id].push(giveaway);
      }
    }
    if (found) {
      return true;
    }
  }
  async ugd_requestGiveawaysDone(obj) {
    if (obj.key !== 'sent') {
      await this.ugd_requestGiveawaysDone_2(obj);
      return;
    }

    // check if there are winners of a giveaway in the 'awaiting feedback' status so they can be updated
    const types = ['apps', 'subs'];
    for (const type of types) {
      const games = obj.userGiveaways.sent[type];
      for (const id in games) {
        if (games.hasOwnProperty(id)) {
          const game = games[id];
          for (const item of game) {
            const giveaway = typeof item === 'string' ? obj.giveaways[item] || _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.giveaways[item] : item;
            if (!giveaway || !Array.isArray(giveaway.winners)) {
              break;
            }
            let i;
            for (i = giveaway.winners.length - 1; i > -1; i--) {
              const winner = giveaway.winners[i];
              if (winner.status !== 'Received' && winner.status !== 'Not Received') {
                break;
              }
            }
            if (i > -1) {
              const code = giveaway.code;
              if (code) {
                obj.giveaways[code] = giveaway;
              }
              obj.requests.push({
                giveaway: giveaway,
                request: this.ugd_requestGiveaway,
                url: `/giveaway/${code}/_/winners/search?page=`
              });
            }
          }
        }
      }
    }
    obj.requests.push(this.ugd_requestGiveawaysDone_2.bind(this));
  }
  async ugd_requestGiveawaysDone_2(obj) {
    obj.userGiveaways[`${obj.key}Timestamp`] = obj.timestamp;
    await lockAndSaveGiveaways(obj.giveaways);
    obj.user.values = {
      giveaways: obj.userGiveaways,
      ugd: null
    };
    if (!obj.popup) {
      await saveUser(null, null, obj.user);
      return;
    }
    obj.popup.progressBar.setLoading('Calculating results...').show();
    obj.games = obj.userGiveaways[obj.key];
    obj.perType = {};
    obj.typeTotal = {};
    obj.levelTotal = new Array(11).fill(0);
    obj.total = 0;
    obj.lists = {};
    if (obj.key === 'sent') {
      obj.lists.gameName = {
        name: 'Games',
        values: []
      };
      obj.lists.username = {
        name: _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, "Winners", ' ', obj.user.username === _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('username') ? null : _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
          className: "fa fa-question-circle",
          title: "This list might not be 100% accurate if the user has giveaways for more than 3 copies that you cannot access."
        })),
        values: []
      };
    } else {
      obj.lists.creator = {
        name: 'Creators',
        values: []
      };
    }
    const types = {
      public: 'Everyone',
      regionRestricted: {
        name: 'Region',
        combo: ['inviteOnly', 'group', 'whitelist']
      },
      inviteOnly: 'Invite',
      group: {
        name: 'Group',
        combo: ['whitelist']
      },
      whitelist: 'Whitelist'
    };
    const selectors = [];
    for (const key in types) {
      const type = types[key];
      if (typeof type === 'string') {
        selectors.push(type);
      } else {
        selectors.push(type.name);
        for (const combo of type.combo) {
          const comboType = types[combo];
          selectors.push(`${type.name}_${typeof comboType === 'string' ? comboType : comboType.name}`);
          if (comboType.combo) {
            for (const subCombo of comboType.combo) {
              const subComboType = types[subCombo];
              selectors.push(`${type.name}_${typeof comboType === 'string' ? comboType : comboType.name}_${typeof subComboType === 'string' ? subComboType : subComboType.name}`);
            }
          }
        }
      }
    }
    for (const selector of selectors) {
      obj.perType[selector] = new Array(11).fill(0);
      obj.typeTotal[selector] = 0;
    }
    obj.savedGiveaways = JSON.parse(getValue('giveaways'));
    await this.ugd_count(obj, obj.games.apps, obj.savedGiveaways, types);
    await this.ugd_count(obj, obj.games.subs, obj.savedGiveaways, types);
    const results = obj.popup.getScrollable();
    const heading = ['Type'];
    for (let i = 0; i < 11; i++) {
      heading.push(`Level ${i}`);
    }
    heading.push('Total');
    const table = new _class_Table__WEBPACK_IMPORTED_MODULE_13__["Table"]([heading]);
    for (const key in obj.perType) {
      if (obj.perType.hasOwnProperty(key)) {
        const item = obj.perType[key];
        const columns = [key.replace(/_/g, ' + ')];
        for (let i = 0; i < 11; i++) {
          const value = item[i];
          columns.push(value);
        }
        const typeTotal = obj.typeTotal[key];
        const total = obj.total > 0 ? Math.round(typeTotal / obj.total * 10000) / 100 : 0;
        columns.push(`${typeTotal} (${total}%)`);
        table.addRow(columns);
      }
    }
    const columns = ['Total'];
    for (let i = 0; i < 11; i++) {
      const levelTotal = obj.levelTotal[i];
      const total = obj.total > 0 ? Math.round(levelTotal / obj.total * 10000) / 100 : 0;
      columns.push(`${levelTotal} (${total}%)`);
    }
    columns.push(obj.total);
    table.addRow(columns);
    results.appendChild(table.table);
    for (const key in obj.lists) {
      if (obj.lists.hasOwnProperty(key)) {
        const array = [];
        const list = obj.lists[key];
        const values = list.values;
        for (const selector in values) {
          if (values.hasOwnProperty(selector)) {
            const item = values[selector];
            item.name = selector;
            array.push(item);
          }
        }
        list.values = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_15__["Utils"].sortArray(array, true, 'value');
      }
    }
    if (obj.key !== 'won' || !_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getPlaytime') && !_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getAchievements') || !_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('steamApiKey')) {
      await this.ugd_complete(obj, results);
      await saveUser(null, null, obj.user);
      return;
    }
    obj.playtimeTable = new _class_Table__WEBPACK_IMPORTED_MODULE_13__["Table"]([[{
      alignment: 'left',
      size: 'fill',
      value: 'Game'
    }, `Playtime (Last 2 Weeks)`, `Playtime (Forever)`, 'Achievements', 'Gifter']]);
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getPlaytime')) {
      obj.playtimeTable.hideColumns(2, 3);
    }
    if (!_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getAchievements')) {
      obj.playtimeTable.hideColumns(4);
    }
    obj.isUpdating = false;
    const currentTime = Date.now();
    if (!obj.ugdCache || currentTime - obj.ugdCache.lastCheck > 604800000 || _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getPlaytime') && !Object.keys(obj.ugdCache.playtimes).length || _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getAchievements') && !Object.keys(obj.ugdCache.achievements).length || _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_forceUpdate')) {
      obj.isUpdating = true;
      if (!obj.ugdCache) {
        obj.ugdCache = {
          achievements: {},
          playtimes: {}
        };
      }
      obj.ugdCache.lastCheck = currentTime;
    }
    obj.playtimes = null;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getPlaytime') && obj.isUpdating) {
      obj.popup.progressBar.setLoading('Retrieving playtime stats...').show();
      obj.ugdCache.playtimes = {};
      try {
        const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`https://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/?key=${_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('steamApiKey')}&steamid=${obj.user.steamId}&format=json`);
        obj.playtimes = response.json.response.games;
      } catch (e) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_8__["Logger"].warning(e.message, e.stack);
        window.alert('An error occurred when retrieving playtime stats. Please check your Steam API key in the settings menu or try again later.');
        await this.ugd_complete(obj, results);
        await saveUser(null, null, obj.user);
        return;
      }
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getAchievements') && obj.isUpdating) {
      obj.ugdCache.achievements = {};
    }
    obj.playedCount = 0;
    obj.achievementCount = 0;
    obj.achievementTotal = 0;
    obj.appsTotal = Object.keys(obj.games.apps).length;
    obj.subsTotal = Object.keys(obj.games.subs).length;
    const total = obj.appsTotal + obj.subsTotal;
    for (const id in obj.games.apps) {
      if (obj.games.apps.hasOwnProperty(id)) {
        await this.ugd_addGame(obj, id);
        obj.appsTotal--;
      }
    }
    let gcCache = JSON.parse(_class_LocalStorage__WEBPACK_IMPORTED_MODULE_7__["LocalStorage"].get('gcCache', `{ "apps": {}, "subs": {}, "hltb": {}, "timestamp": 0, "version": 7 }`));
    if (gcCache.version !== 7) {
      gcCache = {
        apps: {},
        subs: {},
        hltb: gcCache.hltb,
        timestamp: 0,
        version: 7
      };
    }
    if (!gcCache.hltb) {
      gcCache.hltb = {};
    }
    for (const id in obj.games.subs) {
      if (obj.games.subs.hasOwnProperty(id)) {
        let apps = gcCache.subs[id] && gcCache.subs[id].apps;
        if (!apps) {
          try {
            const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_6__["FetchRequest"].get(`http://store.steampowered.com/api/packagedetails?packageids=${id}&filters=basic`);
            apps = response.json[id].data.apps;
            if (!gcCache.subs[id]) {
              gcCache.subs[id] = {};
            }
            gcCache.subs[id].apps = apps.map(x => parseInt(x.id));
          } catch (e) {
            /**/
          }
        }
        if (apps) {
          for (const app of apps) {
            obj.packagePlayed = false;
            obj.packageAchieved = false;
            await this.ugd_addGame(obj, app.id, id, app.name);
          }
        }
        obj.subsTotal--;
      }
    }
    _class_LocalStorage__WEBPACK_IMPORTED_MODULE_7__["LocalStorage"].set('gcCache', JSON.stringify(gcCache));
    results.appendChild(obj.playtimeTable.table);
    const items = [];
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getPlaytime')) {
      items.push({
        attributes: {
          class: 'esgst-bold'
        },
        text: `${obj.playedCount} out of ${total} games with more than 0 hours playtime (${total > 0 ? Math.round(obj.playedCount / total * 10000) / 100 : 0}%)`,
        type: 'div'
      });
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getAchievements')) {
      items.push({
        attributes: {
          class: 'esgst-bold'
        },
        text: `${obj.achievementCount} out of ${obj.achievementTotal} games with more than 0 achievements (${Math.round(obj.achievementCount / Math.max(1, obj.achievementTotal) * 10000) / 100}%)`,
        type: 'div'
      });
    }
    createElements(results, 'beforeend', items);
    await this.ugd_complete(obj, results);
    obj.user.values.ugdCache = obj.ugdCache;
    await saveUser(null, null, obj.user);
  }
  async ugd_addGame(obj, id, packageId, name) {
    /**
     * @property {Playtime[]} obj.playtimes
     */

    const appId = id;
    let i;
    if (obj.playtimes) {
      for (i = obj.playtimes.length - 1; i > -1 && obj.playtimes[i].appid != appId; i--) {}
    }
    const giveaways = obj.games[packageId ? 'subs' : 'apps'][packageId || id];
    const item = giveaways[0];
    const giveaway = typeof item === 'string' ? obj.savedGiveaways[item] : item;
    let timestamp2Weeks = 0;
    let timestampForever = 0;
    let time2Weeks = '0';
    let timeForever = '0';
    let achievementsAttributes = null;
    let achievements = '?';
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getPlaytime') && (i > -1 || obj.ugdCache.playtimes[appId])) {
      if (obj.isUpdating) {
        const game = obj.playtimes[i];
        timestamp2Weeks = game.playtime_2weeks || 0;
        timestampForever = game.playtime_forever;
        obj.ugdCache.playtimes[appId] = [timestamp2Weeks, timestampForever];
      } else {
        [timestamp2Weeks, timestampForever] = obj.ugdCache.playtimes[appId];
      }
      if (timestampForever > 0 && (!packageId || !obj.packagePlayed)) {
        obj.playedCount += 1;
        obj.packagePlayed = true;
      }
      time2Weeks = timestamp2Weeks && timestamp2Weeks > 0 ? timestamp2Weeks > 60 ? `${Math.round(timestamp2Weeks / 60 * 100) / 100}h` : `${timestamp2Weeks}m` : '0';
      timeForever = timestampForever > 0 ? timestampForever > 60 ? `${Math.round(timestampForever / 60 * 100) / 100}h` : `${timestampForever}m` : '0';
    }
    let count = 0;
    let total = 0;
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ugd_getAchievements')) {
      let achievementsData = obj.ugdCache && obj.ugdCache.achievements[appId];
      if (obj.isUpdating) {
        obj.popup.progressBar.setLoading(`Retrieving achievement stats for ${giveaway.gameName || packageId} (${packageId ? `${obj.subsTotal} packages` : obj.appsTotal} left)...`).show();
        try {
          const responseJson = (await getPlayerAchievements(appId, obj.user.steamId)).playerstats;
          if (responseJson.success) {
            achievementsData = responseJson.achievements;
          }
        } catch (error) {
          _class_Logger__WEBPACK_IMPORTED_MODULE_8__["Logger"].warning(error.message, error.stack);
        }
      }
      achievements = '0/0';
      if (achievementsData) {
        if (obj.isUpdating) {
          for (const achievement of achievementsData) {
            if (achievement.achieved) {
              count += 1;
            }
            total += 1;
          }
          achievementsAttributes = total > 0 ? Math.round(count / total * 10000) / 100 : 0;
          achievements = `${count}/${total} (${achievementsAttributes}%)`;
          obj.ugdCache.achievements[appId] = achievements;
        } else {
          // TODO: if/else should have identical achievementsData
          // noinspection JSUnresolvedFunction
          const parts = achievementsData.match(/(.+?)\/(.+?)\s\((.+?)%\)/);
          count = parseInt(parts[1]);
          total = parseInt(parts[2]);
          achievementsAttributes = parseFloat(parts[3]);
          achievements = achievementsData;
        }
        if (!packageId || !obj.packageAchieved) {
          if (count > 0) {
            obj.achievementCount += 1;
          }
          obj.achievementTotal += 1;
          obj.packageAchieved = true;
        }
      }
    }
    let group = null;
    if (packageId) {
      group = obj.playtimeTable.getRowGroup(packageId);
      if (!group) {
        obj.playtimeTable.addRow([{
          alignment: 'left',
          size: 'fill',
          value: giveaway.gameName
        }, {
          attributes: [`data-sort-value="0"`],
          value: '0'
        }, {
          attributes: [`data-sort-value="0"`],
          value: '0'
        }, {
          attributes: [`data-sort-value="0"`],
          value: `0/0 (0%)`
        }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
          className: "table__column__secondary-link",
          href: `/user/${giveaway.creator}`
        }, giveaway.creator)], packageId, true, false, 'Hide contents of the package', 'Show contents of the package');
      }
      group = obj.playtimeTable.getRowGroup(packageId);
      const packageTimestamp2Weeks = parseFloat(group.columns[1].textContent) * 60 + timestamp2Weeks;
      group.columns[1].textContent = packageTimestamp2Weeks && packageTimestamp2Weeks > 0 ? packageTimestamp2Weeks > 60 ? `${Math.round(packageTimestamp2Weeks / 60 * 100) / 100}h` : `${packageTimestamp2Weeks}m` : '0';
      group.columns[1].setAttribute('data-sort-value', packageTimestamp2Weeks);
      const packageTimestampForever = parseFloat(group.columns[2].textContent) * 60 + timestampForever;
      group.columns[2].textContent = packageTimestampForever && packageTimestampForever > 0 ? packageTimestampForever > 60 ? `${Math.round(packageTimestampForever / 60 * 100) / 100}h` : `${packageTimestampForever}m` : '0';
      group.columns[2].setAttribute('data-sort-value', packageTimestampForever);
      const packageParts = group.columns[3].textContent.match(/(.+?)\/(.+?)\s\((.+?)%\)/);
      const packageCount = parseInt(packageParts[1]) + count;
      const packageTotal = parseInt(packageParts[2]) + total;
      const packageAchievementsAttributes = packageTotal > 0 ? Math.round(packageCount / packageTotal * 10000) / 100 : 0;
      group.columns[3].textContent = `${packageCount}/${packageTotal} (${packageAchievementsAttributes}%)`;
      group.columns[3].setAttribute('data-sort-value', packageAchievementsAttributes);
    }
    obj.playtimeTable.addRow([{
      alignment: 'left',
      size: 'fill',
      value: packageId ? name : giveaway.gameName
    }, {
      attributes: [`data-sort-value="${timestamp2Weeks}"`],
      value: time2Weeks
    }, {
      attributes: [`data-sort-value="${timestampForever}"`],
      value: timeForever
    }, {
      attributes: [`data-sort-value="${achievementsAttributes}"`],
      value: achievements
    }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
      className: "table__column__secondary-link",
      href: `/user/${giveaway.creator}`
    }, giveaway.creator)], packageId, false, true);
  }
  async ugd_count(obj, games, savedGiveaways, types) {
    for (const id in games) {
      if (games.hasOwnProperty(id)) {
        const giveaways = games[id];
        for (const item of giveaways) {
          const giveaway = typeof item === 'string' ? savedGiveaways[item] : item;
          if (!giveaway || !giveaway.code) {
            _class_Logger__WEBPACK_IMPORTED_MODULE_8__["Logger"].info(`[UGD] Giveaway not found:`, item);
            continue;
          }
          let selector = '';
          for (const key in types) {
            if (types.hasOwnProperty(key)) {
              const type = types[key];
              if (giveaway[key]) {
                selector += typeof type === 'string' ? type : type.name;
                selector += '_';
              }
            }
          }
          selector = selector.slice(0, -1);
          if (!selector) {
            selector = 'Everyone';
          }
          const level = giveaway.level;
          const isArrayWinners = Array.isArray(giveaway.winners);
          const winners = isArrayWinners ? giveaway.winners.filter(x => x.status === 'Received') : giveaway.winners;
          const copies = obj.key === 'sent' ? winners.length || (isArrayWinners ? Math.min(giveaway.copies, giveaway.entries) : Math.min(giveaway.copies, giveaway.entries, winners)) : 1;
          obj.perType[selector][level] += copies;
          obj.typeTotal[selector] += copies;
          obj.levelTotal[level] += copies;
          obj.total += copies;
          for (const key in obj.lists) {
            if (obj.lists.hasOwnProperty(key)) {
              const list = obj.lists[key];
              const values = list.values;
              const selectors = key === 'username' ? winners : [giveaway];
              if (!Array.isArray(selectors)) {
                continue;
              }
              for (const selector of selectors) {
                const value = selector[key];
                if (!values[value]) {
                  values[value] = {
                    code: key === 'gameName' ? null : giveaway.code,
                    gameSteamId: giveaway.gameSteamId,
                    gameType: giveaway.gameType,
                    value: 0,
                    values: []
                  };
                }
                values[value].value += key === 'username' ? 1 : copies || 1;
                if (key === 'gameName') {
                  if (isArrayWinners) {
                    for (const winner of winners) {
                      values[value].values.push({
                        code: giveaway.code,
                        name: winner.username
                      }, null);
                    }
                  }
                } else {
                  values[value].values.push({
                    code: giveaway.code,
                    gameSteamId: giveaway.gameSteamId,
                    gameType: giveaway.gameType,
                    name: giveaway.gameName
                  }, null);
                }
              }
            }
          }
        }
      }
    }
  }
  async ugd_requestGiveaway(obj, details, response, responseHtml) {
    const msg = `Retrieving giveaway winners (${details.giveaway.gameName})...`;
    if (obj.popup) {
      obj.popup.progressBar.setLoading(msg).show();
    } else if (!obj.mainPopup.isSilent) {
      obj.mainPopup.progressBar.setMessage(msg);
    }
    if (responseHtml.getElementsByClassName('table--summary')[0]) {
      return true;
    }
    const elements = responseHtml.getElementsByClassName('table__row-inner-wrap');
    const n = elements.length;
    for (let i = 0; i < n; i++) {
      const element = elements[i];
      details.giveaway.winners.push({
        status: element.lastElementChild.textContent.trim(),
        username: element.firstElementChild.nextElementSibling.firstElementChild.textContent.trim()
      });
    }
    if (details.nextPage === 1) {
      details.url = `${response.url}/search?page=`;
    }
  }
  async ugd_complete(obj, results) {
    const items = [];
    for (const key in obj.lists) {
      if (obj.lists.hasOwnProperty(key)) {
        const list = obj.lists[key];
        const values = list.values;
        const listItems = [];
        for (const item of values) {
          listItems.push([{
            alignment: 'left',
            size: 'fill',
            value: _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
              className: "table__column__secondary-link",
              href: key === 'gameName' ? `https://store.steampowered.com/${item.gameType.slice(0, -1)}/${item.gameSteamId}` : `/user/${item.name}`
            }, item.name)
          }, {
            alignment: 'center',
            size: 'small',
            value: item.value
          }, {
            alignment: 'left',
            size: 'fill',
            value: item.values.map(x => x ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("span", null, x.code ? _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
              className: "table__column__secondary-link",
              href: `/giveaway/${x.code}/`,
              title: "Go to the giveaway"
            }, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("i", {
              className: "fa fa-gift"
            })) : null, ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("a", {
              className: "table__column__secondary-link",
              href: key === 'gameName' ? `/user/${x.name}` : `https://store.steampowered.com/${x.gameType.slice(0, -1)}/${x.gameSteamId}`
            }, x.name)) : _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null))
          }]);
        }
        const listTable = new _class_Table__WEBPACK_IMPORTED_MODULE_13__["Table"]([[{
          alignment: 'left',
          size: 'fill',
          value: key === 'gameName' ? 'Game' : obj.key === 'sent' ? 'Winner' : 'Creator'
        }, {
          alignment: 'center',
          size: 'small',
          value: 'Count'
        }, {
          alignment: 'left',
          size: 'fill',
          value: key === 'gameName' ? 'Winners' : 'Games'
        }], ...listItems]);
        const listHeading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_14__["PageHeading"].create('ugd', [list.name]).build();
        items.push(listHeading.nodes.outer, listTable.table, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("br", null));
      }
    }
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(results, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("div", {
      className: "esgst-ugd-lists"
    }, items));
    await endless_load(results);
  }
}
const usersUserGiveawayData = new UsersUserGiveawayData();


/***/ }),
/* 487 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersNotActivatedMultipleWinChecker", function() { return usersNotActivatedMultipleWinChecker; });
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(220);
/* harmony import */ var _class_Permissions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(221);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(222);
/* harmony import */ var _class_Popup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(211);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(132);
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(212);
/* harmony import */ var _components_PageHeading__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(224);
/* harmony import */ var _lib_jsUtils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(122);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(144);
















const createElements = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  createOptions = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].createOptions.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  createResults = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].createResults.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  getTimestamp = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].getTimestamp.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  getUser = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].getUser.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  getValue = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].getValue.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  saveUser = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].saveUser.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  saveUsers = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].saveUsers.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]);
class UsersNotActivatedMultipleWinChecker extends _class_Module__WEBPACK_IMPORTED_MODULE_6__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-question-circle"
      }), ") to the \"Gifts Won\" row of a user's ", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "profile"), " page that allows you to check if they have any not activated/multiple wins (using", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.sgtools.info/"
      }, "SGTools"), ")."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-trophy"
      }), ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-question-circle"
      }), ") to the main page heading of any", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
        href: "https://www.steamgifts.com/giveaway/aeqw7/dead-space/winners"
      }, "winners"), " page that allows you to check all of the winners in the page at once. You cannot check more than that at once due to certain limitations when requesting the data to SGTools."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-trophy"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-gear"
      }), ") to the page heading of this menu that allows you to view all of the users that have been checked."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Results are cached for 1 week, so if you check the same user again within that timeframe, their status will not change.")),
      features: {
        namwc_h: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Changes the color (to green if the user passed the check, red if they failed and grey if their profile is private) of a checked user's username (in any page)."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "If you hover over the username, it shows how many not activated/multiple wins the user has and the date when they were checked for the last time.")),
          features: {
            namwc_h_m: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Multiple wins are not the winner's fault sometimes. For example, if they tried to contact the giveaway creator to ask for a reroll and were unable to."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "With this option enabled, multiple wins are ignored when highlighting the user. So if the user has 0 not activated wins and 1 or more multiple wins, they will be considered as having passed the check.")),
              name: 'Ignore multiple wins.',
              sg: true,
              st: true
            },
            namwc_h_f: {
              name: 'Only highlight users who failed to pass the check.',
              sg: true,
              st: true
            },
            namwc_h_i: {
              description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds an icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
                className: "fa fa-thumbs-up esgst-green"
              }), " if the user passed the check, ", _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
                className: "fa fa-thumbs-down esgst-red"
              }), " if they failed and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
                className: "fa fa-warning esgst-grey"
              }), " if their profile is private) next to the user's username instead of coloring it."), _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "If you hover over the icon, it shows how many not activated/multiple wins the user has and the date when they were checked for the last time.")),
              name: 'Use icons instead of colors.',
              sg: true,
              st: true
            }
          },
          name: 'Highlight checked users.',
          sg: true,
          st: true
        }
      },
      id: 'namwc',
      name: 'Not Activated/Multiple Win Checker',
      sg: true,
      type: 'users',
      featureMap: {
        profile: this.namwc_addUser.bind(this)
      }
    };
  }
  init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('namwc_h')) {
      _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.userFeatures.push(this.namwc_getUsers.bind(this));
    }
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.winnersPath) return;
    this.namwc_setPopup({
      button: createHeadingButton({
        id: 'namwc',
        icons: ['fa-trophy', 'fa-question-circle'],
        title: 'Check for not activated/multiple wins'
      })
    });
  }
  namwc_getUsers(users) {
    for (const user of users) {
      if (user.saved && user.saved.namwc && user.saved.namwc.results && !user.context.parentElement.querySelector(`.esgst-namwc-highlight, .esgst-namwc-icon`)) {
        let results = user.saved.namwc.results;
        let highlight = null;
        let icon = null;
        if (results.activated && (results.notMultiple || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('namwc_h_m'))) {
          highlight = 'positive';
          icon = 'fa-thumbs-up';
        } else if (results.unknown) {
          highlight = 'unknown';
          icon = 'fa-warning';
        } else {
          highlight = 'negative';
          icon = 'fa-thumbs-down';
        }
        if ((highlight === 'positive' || highlight === 'unknown') && !_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('namwc_h_f') || highlight === 'negative') {
          let title = `${user.username} has ${results.unknown ? '?' : Array.isArray(results.notActivated) ? results.notActivated.length : results.notActivated} not activated wins and ${Array.isArray(results.multiple) ? results.multiple.length : results.multiple} multiple wins (last checked ${getTimestamp(user.saved.namwc.lastCheck)})`;
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('namwc_h_i') || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('wbh') && (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('wbh_w') || _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('wbh_b'))) {
            createElements(user.context, 'beforebegin', [{
              attributes: {
                class: 'esgst-namwc-icon esgst-user-icon',
                title: getFeatureTooltip('namwc', title)
              },
              type: 'span',
              children: [{
                attributes: {
                  class: `fa ${icon} esgst-${highlight}`
                },
                type: 'i'
              }]
            }]);
          } else {
            user.element.classList.add('esgst-namwc-highlight', `esgst-${highlight}`);
            user.element.title = getFeatureTooltip('namwc', title);
          }
        }
      }
    }
  }
  namwc_addUser(profile) {
    this.namwc_setPopup({
      button: createElements(profile.wonRowLeft, 'beforeend', [{
        attributes: {
          class: 'esgst-namwc-button'
        },
        type: 'span',
        children: [{
          attributes: {
            class: 'fa fa-question-circle',
            title: getFeatureTooltip('namwc', 'Check for not activated/multiple wins')
          },
          type: 'i'
        }]
      }]),
      user: {
        id: profile.id,
        steamId: profile.steamId,
        username: profile.username
      }
    });
  }
  namwc_setPopup(obj) {
    obj = obj.button ? obj : {
      button: obj,
      isMenu: true
    };
    obj.popup = new _class_Popup__WEBPACK_IMPORTED_MODULE_9__["Popup"]({
      addProgress: true,
      addScrollable: true
    });
    const heading = _components_PageHeading__WEBPACK_IMPORTED_MODULE_13__["PageHeading"].create('namwc', [obj.isMenu ? `Manage Not Activated / Multiple Wins Checker caches` : `Check for ${obj.user ? `${obj.user.username}'s ` : ''} not activated / multiple wins:`]).insert(obj.popup.description, 'afterbegin');
    if (!obj.isMenu) {
      const optionsButton = _components_Button__WEBPACK_IMPORTED_MODULE_12__["Button"].create({
        color: 'alternate-white',
        tooltip: 'Options',
        icons: ['fa-gear']
      }).insert(heading.nodes.outer, 'beforeend');
      const popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_8__["Popout"]('', optionsButton.nodes.outer, 0, true);
      popout.popout.appendChild(createOptions([{
        check: true,
        description: 'Only check for not activated wins.',
        exclusions: ['namwc_checkMultiple'],
        id: 'namwc_checkNotActivated',
        tooltip: `If enabled, multiple wins will not be checked (faster).`
      }, {
        check: true,
        description: 'Only check for multiple wins.',
        exclusions: ['namwc_checkNotActivated'],
        id: 'namwc_checkMultiple',
        tooltip: `If enabled, not activated wins will not be checked (faster).`
      }, {
        check: true,
        description: 'Clear cache.',
        id: 'namwc_clearCache',
        tooltip: `If enabled, the user will be checked with SGTools again (slower).`
      }]));
      createElements(popout.popout, 'beforeend', [{
        attributes: {
          class: 'esgst-description'
        },
        text: `If a user is highlighted, that means that they have been either checked for the first time or updated`,
        type: 'div'
      }]);
      _components_Button__WEBPACK_IMPORTED_MODULE_12__["Button"].create([{
        color: 'green',
        icons: ['fa-question-circle'],
        name: 'Check',
        onClick: this.namwc_start.bind(this, obj)
      }, {
        template: 'error',
        name: 'Cancel',
        switchTo: {
          onReturn: 0
        },
        onClick: this.namwc_stop.bind(this, obj)
      }]).insert(heading.nodes.outer, 'beforeend');
    }
    obj.popup.results = createElements(obj.popup.scrollable, 'beforeend', [{
      type: 'div'
    }]);
    createResults(obj.popup.results, obj.popup, [{
      Icon: 'fa fa-check-circle esgst-positive',
      Description: 'Users with 0 not activated wins',
      Key: 'activated'
    }, {
      Icon: 'fa fa-check-circle esgst-positive',
      Description: 'Users with 0 multiple wins',
      Key: 'notMultiple'
    }, {
      Icon: 'fa fa-times-circle esgst-negative',
      Description: 'Users with not activated wins',
      Key: 'notActivated'
    }, {
      Icon: 'fa fa-times-circle esgst-negative',
      Description: 'Users with multiple wins',
      Key: 'multiple'
    }, {
      Icon: 'fa fa-question-circle',
      Description: 'Users who cannot be checked for not activated wins either because they have a private profile or SteamCommunity is down',
      Key: 'unknown'
    }]);
    obj.button.addEventListener('click', obj.popup.open.bind(obj.popup, obj.isMenu ? this.namwc_start.bind(this, obj) : null));
  }
  async namwc_start(obj) {
    obj.isCanceled = false;
    obj.button.classList.add('esgst-busy');
    obj.popup.progressBar.setLoading(null).show();
    obj.popup.overallProgressBar.reset().show();
    obj.popup.activated.classList.add('esgst-hidden');
    obj.popup.notMultiple.classList.add('esgst-hidden');
    obj.popup.notActivated.classList.add('esgst-hidden');
    obj.popup.multiple.classList.add('esgst-hidden');
    obj.popup.unknown.classList.add('esgst-hidden');
    obj.popup.activatedCount.textContent = obj.popup.notMultipleCount.textContent = obj.popup.notActivatedCount.textContent = obj.popup.multipleCount.textContent = obj.popup.unknownCount.textContent = '0';
    obj.popup.activatedUsers.innerHTML = '';
    obj.popup.notMultipleUsers.textContent = '';
    obj.popup.notActivatedUsers.innerHTML = '';
    obj.popup.multipleUsers.innerHTML = '';
    obj.popup.unknownUsers.innerHTML = '';

    // get users
    let users = [];
    if (obj.isMenu) {
      let savedUsers = JSON.parse(getValue('users'));
      for (let id in savedUsers.users) {
        if (savedUsers.users.hasOwnProperty(id)) {
          let savedUser = savedUsers.users[id];
          if (!savedUser.namwc || !savedUser.namwc.results) continue;
          users.push(savedUser.username);
        }
      }
    } else if (obj.user) {
      users.push(obj.user.username);
    } else {
      let elements = _class_Shared__WEBPACK_IMPORTED_MODULE_11__["Shared"].esgst.pageOuterWrap.querySelectorAll(`a[href*="/user/"]`);
      for (let element of elements) {
        let match = element.getAttribute('href').match(/\/user\/(.+)/);
        if (!match) continue;
        let username = match[1];
        if (users.indexOf(username) > -1 || username === _class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('username') || username !== element.textContent || element.closest('.markdown')) continue;
        users.push(username);
        if (users.length > 25) break;
      }
    }
    if (users.length === 0) {
      obj.popup.setDone();
      return;
    }

    // check users
    users = _lib_jsUtils__WEBPACK_IMPORTED_MODULE_14__["Utils"].sortArray(users);
    let steamIds = [];
    let userElements = {
      activated: {},
      notMultiple: {},
      notActivated: {},
      multiple: {},
      unknown: {}
    };
    for (let i = 0, n = users.length; !obj.isCanceled && i < n; i++) {
      obj.popup.progressBar.removeMessage();
      obj.popup.overallProgressBar.setMessage(`${i} of ${n} users checked`);
      let user = obj.user || {
        username: users[i]
      };
      let savedUser = await getUser(null, user);
      user.values = {
        namwc: savedUser && savedUser.namwc
      };
      let isNew = false;
      if (!obj.isMenu) {
        let resultsBackup = user.values.namwc && user.values.namwc.results;
        if (!user.values.namwc) {
          user.values.namwc = {
            lastCheck: 0,
            results: {}
          };
        }
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('namwc_clearCache')) {
          user.values.namwc.lastCheck = 0;
        }
        if (Date.now() - user.values.namwc.lastCheck > 6.048 * 1e8) {
          if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('namwc_checkNotActivated')) {
            await this.namwc_checkNotActivated(obj, user);
          } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_10__["Settings"].get('namwc_checkMultiple')) {
            await this.namwc_checkMultiple(obj, user);
          } else {
            await this.namwc_checkNotActivated(obj, user);
            await this.namwc_checkMultiple(obj, user);
          }
        }
        if (resultsBackup) {
          for (let key in resultsBackup) {
            if (resultsBackup.hasOwnProperty(key)) {
              if ((Array.isArray(resultsBackup[key]) && resultsBackup[key].length || !Array.isArray(resultsBackup[key]) && resultsBackup[key]) === (Array.isArray(user.values.namwc.results[key]) && user.values.namwc.results[key].length || !Array.isArray(user.values.namwc.results[key]) && user.values.namwc.results[key])) continue;
              isNew = true;
              break;
            }
          }
        } else {
          isNew = true;
        }
      }
      let elements = [];
      for (let key in user.values.namwc.results) {
        if (user.values.namwc.results.hasOwnProperty(key)) {
          let value = Array.isArray(user.values.namwc.results[key]) && user.values.namwc.results[key].length || !Array.isArray(user.values.namwc.results[key]) && user.values.namwc.results[key];
          if (!value) continue;
          obj.popup[key].classList.remove('esgst-hidden');
          let count = obj.popup[`${key}Count`];
          count.textContent = parseInt(count.textContent) + 1;
          const attributes = {
            href: `http://www.sgtools.info/${key.match(/multiple/i) ? 'multiple' : 'nonactivated'}/${user.username}`,
            target: '_blank'
          };
          if (isNew) {
            attributes.class = 'esgst-bold esgst-italic';
          }
          elements[key] = createElements(obj.popup[`${key}Users`], 'beforeend', [{
            attributes,
            text: `${user.username}${key.match(/^(notActivated|multiple)$/) ? ` (${value})` : ''}`,
            type: 'a'
          }]);
        }
      }
      if (!obj.isMenu) {
        await saveUser(null, null, user);
        steamIds.push(user.steamId);
        userElements[user.steamId] = elements;
      }
      obj.popup.overallProgressBar.setMessage(`${i} of ${n} users checked`);
    }
    if (obj.isCanceled) {
      obj.popup.setDone();
      return;
    }
    obj.button.classList.remove('esgst-busy');
    obj.popup.progressBar.reset().hide();
    obj.popup.overallProgressBar.setSuccess('All users checked!');
    obj.popup.setDone();
  }
  namwc_stop(obj) {
    obj.button.classList.remove('esgst-busy');
    obj.popup.progressBar.reset().hide();
    obj.isCanceled = true;
  }
  async namwc_checkNotActivated(obj, user) {
    if (obj.isCanceled) return;
    if (obj.popup.progressBar) {
      obj.popup.progressBar.setMessage(`Retrieving ${user.username}'s not activated wins...`);
    }
    const response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`http://www.sgtools.info/nonactivated/${user.username}`, {
      queue: true
    });
    if (response.text.match(/has a private profile/)) {
      user.values.namwc.results.activated = 0;
      user.values.namwc.results.notActivated = [];
      user.values.namwc.results.unknown = 1;
    } else {
      user.values.namwc.results.notActivated = [];
      let elements = response.html.getElementsByClassName('notActivatedGame');
      let n = elements.length;
      for (let i = 0; i < n; ++i) {
        user.values.namwc.results.notActivated.push(new Date(elements[i].textContent.match(/\((\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2})\)/)[1]).getTime());
      }
      user.values.namwc.results.activated = n === 0 ? 1 : 0;
      user.values.namwc.results.unknown = 0;
    }
    user.values.namwc.lastCheck = Date.now();
  }
  async namwc_checkMultiple(obj, user) {
    var _await$FetchRequest$g;
    if (obj.isCanceled) return;
    if (obj.popup.progressBar) {
      obj.popup.progressBar.setMessage(`Retrieving ${user.username}'s multiple wins...`);
    }
    user.values.namwc.results.multiple = [];
    let elements = (_await$FetchRequest$g = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`http://www.sgtools.info/multiple/${user.username}`, {
      queue: true
    })).html) === null || _await$FetchRequest$g === void 0 ? void 0 : _await$FetchRequest$g.getElementsByClassName('multiplewins');
    let n = elements.length;
    for (let i = 0; i < n; ++i) {
      user.values.namwc.results.multiple.push(new Date(elements[i].textContent.match(/,\s(\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2})\)/)[1]).getTime());
    }
    user.values.namwc.results.notMultiple = n === 0 ? 1 : 0;
    user.values.namwc.lastCheck = Date.now();
  }
}
const usersNotActivatedMultipleWinChecker = new UsersNotActivatedMultipleWinChecker();


/***/ }),
/* 488 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersNotReceivedFinder", function() { return usersNotReceivedFinder; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(220);
/* harmony import */ var _class_Process__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(279);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(206);









const createElements = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]),
  endless_load = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]),
  getUser = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].getUser.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]),
  saveUser = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].saveUser.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]);
class UsersNotReceivedFinder extends _class_Module__WEBPACK_IMPORTED_MODULE_3__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Adds a button (", _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("i", {
        className: "fa fa-times-circle"
      }), ") to the \"Gifts Won\" and \"Gifts Sent\" rows of a user's ", _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "profile"), " page that allows you to find all of their won/created giveaways that were marked as not received."), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Giveaways for more than 3 copies that were marked as not received can only be found if the winner(s) that marked it as not received is(are) visible in the creator's profile page or if you can access the giveaway and the option to search inside of giveaways is enabled. If they are not found, a list with all of the creator's giveaways for more than 3 copies will be shown."), _class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].element("li", null, "Results are cached for 1 week, so if you check the same user again within that timeframe, their status will not change.")),
      id: 'nrf',
      name: 'Not Received Finder',
      sg: true,
      type: 'users'
    };
  }
  init() {
    _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.profileFeatures.push(this.nrf_add.bind(this, 'won'));
    _class_Shared__WEBPACK_IMPORTED_MODULE_7__["Shared"].esgst.profileFeatures.push(this.nrf_add.bind(this, 'sent'));
  }
  nrf_add(key, profile) {
    if (profile[`${key}NotReceived`] < 1) {
      return;
    }
    const button = createElements(profile[`${key}RowLeft`], 'beforeend', [{
      attributes: {
        class: 'esgst-nrf-button'
      },
      type: 'span',
      children: [{
        attributes: {
          class: 'fa fa-times-circle',
          title: getFeatureTooltip('nrf', 'Find not received giveaways')
        },
        type: 'i'
      }]
    }]);
    new _class_Process__WEBPACK_IMPORTED_MODULE_4__["Process"]({
      button,
      init: this.nrf_init.bind(this, key, profile),
      popup: {
        addProgress: true,
        addScrollable: 'left',
        icon: 'fa-times',
        options: [{
          check: key === 'sent',
          description: 'Also search inside giveaways with multiple copies.',
          id: 'nrf_searchMultiple',
          tooltip: `If disabled, only giveaways with visible not received copies will be found (faster).`
        }, {
          check: true,
          description: 'Clear cache.',
          id: 'nrf_clearCache',
          tooltip: `If enabled, the cache for this user will be cleared (slower).`
        }],
        title: `Find ${profile.username}'s not received giveaways:`
      },
      requests: [{
        url: key === 'sent' ? `/user/${profile.username}/search?page=` : `/user/${profile.username}/giveaways/won/search?page=`,
        onDone: this.nrf_onRequestDone.bind(this),
        request: this.nrf_request.bind(this),
        user: true,
        [key === 'sent' ? 'sourceUser' : 'sourceUserWon']: true
      }]
    });
  }
  async nrf_init(key, profile, obj) {
    if (profile.username !== _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('username') && !obj.nrfMessage) {
      obj.nrfMessage = createElements(obj.popup.scrollable, 'beforebegin', [{
        attributes: {
          class: 'esgst-description'
        },
        text: `If you're blacklisted / not whitelisted / not a member of the same Steam groups, not all giveaways will be found.`,
        type: 'div'
      }]);
    }
    obj.nrfUser = {
      steamId: profile.steamId,
      id: profile.id,
      username: profile.username
    };
    const savedUser = await getUser(null, obj.nrfUser);
    if (savedUser) {
      obj.nrfData = savedUser[`nrf${key === 'sent' ? '' : 'Won'}`];
    }
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('nrf_clearCache') || !obj.nrfData) {
      obj.nrfData = {
        lastCheck: 0,
        found: 0,
        total: 0,
        results: ''
      };
    }
    obj.nrfResults = obj.popup.getScrollable();
    if (Date.now() - obj.nrfData.lastCheck > 604800000) {
      obj.nrfFound = 0;
      obj.nrfKey = key;
      obj.nrfMultiple = 0;
      obj.nrfResultsRaw = '';
      obj.nrfUsername = obj.nrfUser.username;
      obj.nrfTotal = profile[`${key}NotReceived`];
      obj.onDone = this.nrf_onDone;
      /**
       * @property {object[]} obj.requestsBackup
       */
      obj.requests = obj.requestsBackup;
    } else {
      obj.onDone = null;
      obj.requests = [];
      createElements(obj.nrfResults, 'atinner', [...Array.from(_class_DOM__WEBPACK_IMPORTED_MODULE_8__["DOM"].parse(obj.nrfData.results).body.childNodes).map(x => {
        return {
          context: x
        };
      })]);
      obj.popup.overallProgressBar.setMessage(`${obj.nrfData.found} of ${obj.nrfData.total} not received giveaways found...`).show();
      await endless_load(obj.nrfResults);
    }
  }
  nrf_request(obj, details, response, responseHtml) {
    obj.popup.progressBar.setLoading(`Searching ${obj.nrfUsername}'s giveaways (page ${details.nextPage}${details.lastPage})...`).show();
    const elements = responseHtml.querySelectorAll('div.giveaway__column--negative');
    for (const element of elements) {
      obj.nrfFound += element.querySelectorAll(`a[href*="/user/"]`).length;
      const giveaway = element.closest('.giveaway__row-outer-wrap').cloneNode(true);
      obj.nrfResults.appendChild(giveaway);
      obj.nrfResultsRaw += giveaway.outerHTML;
    }
    obj.popup.overallProgressBar.setMessage(`${obj.nrfFound} of ${obj.nrfTotal} not received giveaways found...`).show();
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('nrf_searchMultiple') && obj.nrfKey === 'sent' && obj.nrfFound < obj.nrfTotal) {
      const elements = responseHtml.getElementsByClassName('giveaway__heading__thin');
      for (const element of elements) {
        const match = element.textContent.match(/\((.+) Copies\)/);
        if (match && parseInt(match[1]) > 3) {
          const giveaway = element.closest('.giveaway__row-outer-wrap');
          const url = giveaway.getElementsByClassName('giveaway__heading__name')[0].getAttribute('href');
          if (url) {
            obj.nrfMultiple += 1;
            obj.requests.push({
              giveaway: giveaway.cloneNode(true),
              onDone: this.nrf_onRequestGiveawayDone,
              request: this.nrf_requestGiveaway,
              url: `${url}/winners/search?page=`
            });
          }
        }
      }
    }
    if (obj.nrfFound >= obj.nrfTotal) {
      return true;
    }
  }
  nrf_onRequestDone(obj) {
    if (obj.nrfFound >= obj.nrfTotal) {
      obj.requests = [];
    }
  }
  nrf_requestGiveaway(obj, details, response, responseHtml) {
    obj.popup.progressBar.setLoading(`Searching inside giveaways with multiple copies (${obj.nrfMultiple} left)...`).show();
    const elements = responseHtml.getElementsByClassName('table__column--width-small');
    details.nrfFound = false;
    for (const element of elements) {
      if (!element.textContent.match(/Not Received/)) {
        continue;
      }
      details.nrfFound = true;
      obj.nrfFound += 1;
      if (obj.nrfFound >= obj.nrfTotal) {
        break;
      }
    }
    obj.popup.overallProgressBar.setMessage(`${obj.nrfFound} of ${obj.nrfTotal} not received giveaways found...`).show();
  }
  nrf_onRequestGiveawayDone(obj, details) {
    if (!details.nrfFound) {
      return;
    }
    obj.nrfResults.appendChild(details.giveaway);
    obj.nrfResultsRaw += details.giveaway.outerHTML;
  }
  async nrf_onDone(obj) {
    obj.nrfData.lastCheck = Date.now();
    obj.nrfData.found = obj.nrfFound;
    obj.nrfData.total = obj.nrfTotal;
    obj.nrfData.results = obj.nrfResultsRaw;
    obj.nrfUser.values = {
      [`nrf${obj.nrfKey === 'sent' ? '' : 'Won'}`]: obj.nrfData
    };
    await saveUser(null, null, obj.nrfUser);
    await endless_load(obj.nrfResults);
  }
}
const usersNotReceivedFinder = new UsersNotReceivedFinder();


/***/ }),
/* 489 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersSentWonRatio", function() { return usersSentWonRatio; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




const createElements = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class UsersSentWonRatio extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a \"Ratio\" row containing a user's sent/won ratio (which is their number of gifts sent divided by their number of gifts won) below the \"Gifts Sent\" row of their", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "profile"), " page.")),
      id: 'swr',
      name: 'Sent/Won Ratio',
      sg: true,
      type: 'users',
      featureMap: {
        profile: this.swr_add.bind(this)
      }
    };
  }
  swr_add(profile) {
    let ratio, fullRatio, reducedRatio, zeroRatio, cvRatio, realCVRatio;
    ratio = profile.wonCount > 0 ? Math.round(profile.sentCount / profile.wonCount * 100) / 100 : 0;
    fullRatio = profile.wonFull > 0 ? Math.round(profile.sentFull / profile.wonFull * 100) / 100 : 0;
    reducedRatio = profile.wonReduced > 0 ? Math.round(profile.sentReduced / profile.wonReduced * 100) / 100 : 0;
    zeroRatio = profile.wonZero > 0 ? Math.round(profile.sentZero / profile.wonZero * 100) / 100 : 0;
    cvRatio = profile.wonCV > 0 ? Math.round(profile.sentCV / profile.wonCV * 100) / 100 : 0;
    realCVRatio = profile.realWonCV > 0 ? Math.round(profile.realSentCV / profile.realWonCV * 100) / 100 : 0;
    let ratioTooltip = {
      rows: [{
        columns: [{
          name: 'Ratio'
        }, {
          color: '#8f96a6',
          name: ratio
        }],
        icon: [{
          class: 'fa-pie-chart',
          color: '#77899a'
        }]
      }, {
        columns: [{
          color: '#8f96a6',
          name: 'Full Value'
        }, {
          color: '#8f96a6',
          name: fullRatio
        }],
        indent: '80px'
      }, {
        columns: [{
          color: '#8f96a6',
          name: 'Reduced Value'
        }, {
          color: '#8f96a6',
          name: reducedRatio
        }],
        indent: '80px'
      }, {
        columns: [{
          color: '#8f96a6',
          name: 'No Value'
        }, {
          color: '#8f96a6',
          name: zeroRatio
        }],
        indent: '80px;'
      }]
    };
    let cvTooltip = {
      rows: [{
        columns: [{
          name: 'Real Value'
        }, {
          color: '#8f96a6',
          name: `${realCVRatio}`
        }],
        icon: [{
          class: 'fa-dollar',
          color: '#84cfda'
        }]
      }]
    };
    createElements(profile.sentRow, 'afterend', [{
      attributes: {
        class: 'esgst-swr-ratio featured__table__row',
        title: getFeatureTooltip('swr')
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'featured__table__row__left'
        },
        text: 'Ratio',
        type: 'div'
      }, {
        attributes: {
          class: 'featured__table__row__right'
        },
        type: 'div',
        children: [{
          attributes: {
            ['data-ui-tooltip']: JSON.stringify(ratioTooltip)
          },
          text: ratio,
          type: 'span'
        }, {
          text: ` (`,
          type: 'node'
        }, {
          attributes: {
            ['data-ui-tooltip']: JSON.stringify(cvTooltip)
          },
          text: _class_Settings__WEBPACK_IMPORTED_MODULE_2__["Settings"].get('vrcv') ? `${cvRatio} / ${realCVRatio.toLocaleString('en')}` : cvRatio,
          type: 'span'
        }, {
          text: `)`,
          type: 'node'
        }]
      }]
    }]);
  }
}
const usersSentWonRatio = new UsersSentWonRatio();


/***/ }),
/* 490 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersVisibleGiftsBreakdown", function() { return usersVisibleGiftsBreakdown; });
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(206);






class UsersVisibleGiftsBreakdown extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "Shows the gifts breakdown of a user in their profile page, with the following initials:"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "FCV - Full CV"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "RCV - Reduced CV"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "NCV - No CV"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "A - Awaiting Feedback"), _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("li", null, "NR - Not Received"))),
      id: 'vgb',
      inputItems: [{
        id: 'vgb_wonFormat',
        prefix: `Won Format: `,
        tooltip: `[FCV], [RCV], [NCV] and [NR] will be replaced with their respective values.`
      }, {
        id: 'vgb_sentFormat',
        prefix: `Sent Format: `,
        tooltip: `[FCV], [RCV], [NCV], [A] and [NR] will be replaced with their respective values.`
      }],
      name: 'Visible Gifts Breakdown',
      options: {
        title: `Position: `,
        values: ['Left', 'Right']
      },
      sg: true,
      type: 'users',
      featureMap: {
        profile: this.vgb_add.bind(this)
      }
    };
  }
  vgb_add(profile) {
    const position = _class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('vgb_index') === 0 ? 'afterbegin' : 'beforeend';
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(profile.wonRowRight.firstElementChild.firstElementChild, position, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, ` ${_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('vgb_wonFormat').replace(/\[FCV]/, profile.wonFull).replace(/\[RCV]/, profile.wonReduced).replace(/\[NCV]/, profile.wonZero).replace(/\[NR]/, profile.wonNotReceived)} `));
    _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].insert(profile.sentRowRight.firstElementChild.firstElementChild, position, _class_DOM__WEBPACK_IMPORTED_MODULE_5__["DOM"].element("fragment", null, ` ${_class_Settings__WEBPACK_IMPORTED_MODULE_4__["Settings"].get('vgb_sentFormat').replace(/\[FCV]/, profile.sentFull).replace(/\[RCV]/, profile.sentReduced).replace(/\[NCV]/, profile.sentZero).replace(/\[A]/, profile.sentAwaiting).replace(/\[NR]/, profile.sentNotReceived)} `));
  }
}
const usersVisibleGiftsBreakdown = new UsersVisibleGiftsBreakdown();


/***/ }),
/* 491 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersVisibleRealCV", function() { return usersVisibleRealCV; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);


class UsersVisibleRealCV extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "Displays the real sent/won CV next to the raw value in a user's", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/cg"
      }, "profile"), " page."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "This also extends to ", _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("span", {
        "data-esgst-feature-id": "swr"
      }), ", if you have that feature enabled."), _class_DOM__WEBPACK_IMPORTED_MODULE_1__["DOM"].element("li", null, "With this feature disabled, you can still view the real CV, as provided by SteamGifts, by hovering over the raw value.")),
      id: 'vrcv',
      name: 'Visible Real CV',
      sg: true,
      type: 'users',
      featureMap: {
        profile: this.vrcv_add.bind(this)
      }
    };
  }
  vrcv_add(profile) {
    /**
     * @property realSentCV.toLocaleString
     * @property realWonCV.toLocaleString
     */
    profile.sentCvContainer.insertAdjacentText('beforeend', ` / $${profile.realSentCV.toLocaleString('en')}`);
    profile.wonCvContainer.insertAdjacentText('beforeend', ` / $${profile.realWonCV.toLocaleString('en')}`);
  }
}
const usersVisibleRealCV = new UsersVisibleRealCV();


/***/ }),
/* 492 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersLevelUpCalculator", function() { return usersLevelUpCalculator; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);







class UsersLevelUpCalculator extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Shows how much real CV a user needs to level up in their profile page."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Uses the values mentioned on", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/discussion/XaCbA/"
      }, "this discussion"), " for the calculation.")),
      features: {
        luc_c: {
          name: 'Display current user level.',
          sg: true
        }
      },
      id: 'luc',
      name: 'Level Up Calculator',
      sg: true,
      type: 'users',
      featureMap: {
        profile: this.luc_calculate.bind(this)
      }
    };
  }
  luc_calculate(profile) {
    for (const [index, value] of _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.cvLevels.entries()) {
      const cvRounded = Math.round(profile.realSentCV);
      if (cvRounded < value) {
        _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(profile.levelRowRight, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("span", {
          className: "esgst-luc-value",
          title: _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.getFeatureTooltip('luc')
        }, `(${_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('luc_c') ? `${profile.level} / ` : ''}~$${_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].common.round(value - cvRounded)} real CV to level ${index})`));
        break;
      }
    }
  }
}
const usersLevelUpCalculator = new UsersLevelUpCalculator();


/***/ }),
/* 493 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersSteamGiftsProfileButton", function() { return usersSteamGiftsProfileButton; });
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(144);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(132);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);




const createElements = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_1__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_1__["common"]);
class UsersSteamGiftsProfileButton extends _class_Module__WEBPACK_IMPORTED_MODULE_0__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Adds a button next to the \"Visit Steam Profile\" button of a user's", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("a", {
        href: "https://www.steamtrades.com/user/76561198020696458"
      }, "profile"), " page that allows you to go to their SteamGifts profile page.")),
      id: 'sgpb',
      name: 'SteamGifts Profile Button',
      st: true,
      type: 'users'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.userPath) return;
    _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.profileFeatures.push(this.sgpb_add.bind(this));
  }
  sgpb_add(profile) {
    let button;
    button = createElements(profile.steamButtonContainer, 'beforeend', [{
      attributes: {
        class: 'esgst-sgpb-container',
        title: getFeatureTooltip('sgpb')
      },
      type: 'div',
      children: [{
        attributes: {
          class: 'esgst-sgpb-button',
          href: `https://www.steamgifts.com/go/user/${profile.steamId}`,
          rel: 'nofollow',
          target: '_blank'
        },
        type: 'a',
        children: [{
          attributes: {
            class: 'fa'
          },
          type: 'i',
          children: [{
            attributes: {
              src: _class_Shared__WEBPACK_IMPORTED_MODULE_2__["Shared"].esgst.sgIcon
            },
            type: 'img'
          }]
        }, {
          text: 'Visit SteamGifts Profile',
          type: 'span'
        }]
      }]
    }]);
    button.insertBefore(profile.steamButton, button.firstElementChild);
  }
}
const usersSteamGiftsProfileButton = new UsersSteamGiftsProfileButton();


/***/ }),
/* 494 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usersProfileLinks", function() { return usersProfileLinks; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);







const createElements = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]),
  getFeatureTooltip = _Common__WEBPACK_IMPORTED_MODULE_3__["common"].getFeatureTooltip.bind(_Common__WEBPACK_IMPORTED_MODULE_3__["common"]);
class UsersProfileLinks extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Allows you to add links to your", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/manage/whitelist"
      }, "whitelist"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/manage/blacklist"
      }, "blacklist"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/steam/games"
      }, "games"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/steam/groups"
      }, "groups"), "/", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/account/steam/wishlist"
      }, "wishlist"), " pages to the sidebar of your ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("a", {
        href: "https://www.steamgifts.com/user/your-username"
      }, "profile"), ' ', "page."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "The count for each link might be off if you do not have your whitelist/blacklist/owned games/groups/wishlisted games synced through ESGST (first button in the page heading of this menu). The count for games might be always off, since the method ESGST uses to sync your owned games includes DLCs.")),
      features: {
        pl_w: {
          name: 'Show whitelist link.',
          sg: true
        },
        pl_b: {
          name: 'Show blacklist link.',
          sg: true
        },
        pl_g: {
          name: 'Show games link.',
          sg: true
        },
        pl_gs: {
          name: 'Show groups link.',
          sg: true
        },
        pl_wl: {
          name: 'Show wishlist link.',
          sg: true
        }
      },
      id: 'pl',
      name: 'Profile Links',
      sg: true,
      type: 'users'
    };
  }
  init() {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.userPath) return;
    _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.profileFeatures.push(this.pl_add.bind(this));
  }
  pl_add(profile) {
    if (profile.username !== _class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get('username')) {
      return;
    }
    const items = [];
    const sections = [{
      items: [{
        count: 0,
        id: 'pl_w',
        name: 'Whitelist',
        url: '/account/manage/whitelist'
      }, {
        count: 0,
        id: 'pl_b',
        name: 'Blacklist',
        url: '/account/manage/blacklist'
      }],
      name: 'Manage'
    }, {
      items: [{
        count: 0,
        id: 'pl_g',
        name: 'Games',
        url: '/account/steam/games'
      }, {
        count: 0,
        id: 'pl_gs',
        name: 'Groups',
        url: '/account/steam/groups'
      }, {
        count: 0,
        id: 'pl_wl',
        name: 'Wishlist',
        url: '/account/steam/wishlist'
      }],
      name: 'Steam'
    }];
    for (const id in _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.users.users) {
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.users.users.hasOwnProperty(id)) {
        const user = _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.users.users[id];
        if (user.whitelisted) {
          sections[0].items[0].count += 1;
        } else if (user.blacklisted) {
          sections[0].items[1].count += 1;
        }
      }
    }
    for (const id in _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.games.apps) {
      if (_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.games.apps.hasOwnProperty(id)) {
        const game = _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.games.apps[id];
        if (game.owned) {
          sections[1].items[0].count += 1;
        } else if (game.wishlisted) {
          sections[1].items[2].count += 1;
        }
      }
    }
    for (const group of _class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.groups) {
      if (group.member) {
        sections[1].items[1].count += 1;
      }
    }
    for (const section of sections) {
      let enabled = false;
      const list = [];
      for (const item of section.items) {
        if (!_class_Settings__WEBPACK_IMPORTED_MODULE_5__["Settings"].get(item.id)) {
          continue;
        }
        list.push({
          attributes: {
            class: 'sidebar__navigation__item'
          },
          type: 'li',
          children: [{
            attributes: {
              class: 'sidebar__navigation__item__link',
              href: item.url
            },
            type: 'a',
            children: [{
              attributes: {
                class: 'sidebar__navigation__item__name'
              },
              text: item.name,
              type: 'div'
            }, {
              attributes: {
                class: 'sidebar__navigation__item__underline'
              },
              type: 'div'
            }, {
              attributes: {
                class: 'sidebar__navigation__item__count'
              },
              text: item.count,
              type: 'div'
            }]
          }]
        });
        enabled = true;
      }
      if (!enabled) {
        continue;
      }
      items.push({
        attributes: {
          class: 'sidebar__heading'
        },
        text: section.name,
        type: 'h3'
      }, {
        attributes: {
          class: 'sidebar__navigation',
          title: getFeatureTooltip('pl')
        },
        type: 'ul',
        children: list
      });
    }
    createElements(_class_Shared__WEBPACK_IMPORTED_MODULE_4__["Shared"].esgst.sidebar.getElementsByClassName('sidebar__navigation')[0], 'afterend', items);
  }
}
const usersProfileLinks = new UsersProfileLinks();


/***/ }),
/* 495 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalSearchClearButton", function() { return generalSearchClearButton; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(144);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);





class GeneralSearchClearButton extends _class_Module__WEBPACK_IMPORTED_MODULE_2__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("li", null, "Adds a clear button to each search input in the page.")),
      id: 'scb',
      name: 'Search Clear Button',
      sg: true,
      type: 'general'
    };
  }
  init() {
    this.getInputs(document);
  }
  getInputs(context) {
    const inputs = context.querySelectorAll('.sidebar__search-input');
    for (const input of inputs) {
      input.parentElement.classList.add('esgst-scb');
      _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(input.parentElement, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
        className: "fa fa-times",
        title: "Clear search",
        onclick: () => {
          input.value = '';
          input.dispatchEvent(new Event('change'));
          input.focus();
        }
      }));
    }
  }
}
const generalSearchClearButton = new GeneralSearchClearButton();


/***/ }),
/* 496 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "profileModule", function() { return profileModule; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(220);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(144);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97);
/* harmony import */ var _class_Logger__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(210);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(132);









const checkUsernameChange = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].checkUsernameChange.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]),
  saveUser = _Common__WEBPACK_IMPORTED_MODULE_5__["common"].saveUser.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"]);
class Profile extends _class_Module__WEBPACK_IMPORTED_MODULE_4__["Module"] {
  constructor() {
    super();
    this.info = {
      endless: true,
      id: 'profile'
    };
  }
  async init() {
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('lastSyncWhitelist') > 0 && _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.whitelistPath || _class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('lastSyncBlacklist') > 0 && _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.blacklistPath) {
      const key = _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.whitelistPath ? 'whitelisted' : 'blacklisted';
      _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].esgst.endlessFeatures.push(this.getUsers.bind(this, key));
    }
    if (this.esgst.userPath) {
      await this.profile_load(document);
    }
  }
  getUsers(key, context, main, source, endless) {
    const elements = context.querySelectorAll(_class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.getSelectors(endless, [`X.table__remove-default:not(.is-hidden)`]));
    for (const element of elements) {
      const container = element.closest('.table__row-inner-wrap');
      const heading = container.querySelector('.table__column__heading');
      const username = heading.textContent.trim();
      element.addEventListener('click', () => _class_Shared__WEBPACK_IMPORTED_MODULE_8__["Shared"].common.updateWhitelistBlacklist(key, {
        username
      }, null));
    }
  }
  async profile_load(context) {
    let element, elements, i, input, key, match, rows;
    const profile = {};
    if (this.esgst.sg) {
      profile.heading = context.getElementsByClassName('featured__heading')[0];
      input = context.querySelector(`[name="child_user_id"]`);
      if (input) {
        profile.id = input.value;
      } else {
        profile.id = '';
      }
      profile.username = profile.heading.querySelector('.featured__heading__medium').textContent.replace(/\s[\s\S]*/, '');
      profile.steamButtonContainer = context.getElementsByClassName('sidebar__shortcut-outer-wrap')[0];
      profile.steamButton = profile.steamButtonContainer.querySelector(`[href*="/profiles/"]`);
      profile.steamId = profile.steamButton.getAttribute('href').match(/\d+/)[0];
      profile.name = profile.username;
    } else {
      profile.heading = this.esgst.mainPageHeading;
      profile.id = '';
      profile.username = '';
      profile.steamButtonContainer = context.getElementsByClassName('profile_links')[0];
      profile.steamButton = profile.steamButtonContainer.querySelector(`[href*="/profiles/"]`);
      profile.steamId = profile.steamButton.getAttribute('href').match(/\d+/)[0];
      profile.name = profile.steamId;
    }
    elements = context.getElementsByClassName('featured__table__row__left');
    for (i = elements.length - 1; i >= 0; --i) {
      element = elements[i];
      match = element.textContent.match(/(Comments|Gifts\s(Won|Sent)|Contributor\sLevel|Registered)/);
      if (match) {
        key = match[2];
        if (key) {
          if (key === 'Won') {
            profile.wonRow = element.parentElement;
            profile.wonRowLeft = element;
            profile.wonRowRight = element.nextElementSibling;
            rows = JSON.parse(profile.wonRowRight.firstElementChild.firstElementChild.getAttribute('data-ui-tooltip')).rows;
            profile.wonCount = parseInt(rows[0].columns[1].name.replace(/,/g, ''));
            profile.wonFull = parseInt(rows[1].columns[1].name.replace(/,/g, ''));
            profile.wonReduced = parseInt(rows[2].columns[1].name.replace(/,/g, ''));
            profile.wonZero = parseInt(rows[3].columns[1].name.replace(/,/g, ''));
            profile.notWon = parseInt(rows[4].columns[1].name.replace(/,/g, ''));
            profile.wonNotReceived = profile.notWon;
            profile.wonCvContainer = profile.wonRowRight.firstElementChild.lastElementChild;
            rows = JSON.parse(profile.wonCvContainer.getAttribute('data-ui-tooltip')).rows;
            profile.wonCV = parseFloat(profile.wonCvContainer.textContent.replace(/[$,]/g, ''));
            profile.realWonCV = parseFloat(rows[0].columns[1].name.replace(/[$,]/g, ''));
          } else if (key === 'Sent') {
            profile.sentRow = element.parentElement;
            profile.sentRowLeft = element;
            profile.sentRowRight = element.nextElementSibling;
            rows = JSON.parse(profile.sentRowRight.firstElementChild.firstElementChild.getAttribute('data-ui-tooltip')).rows;
            profile.sentCount = parseInt(rows[0].columns[1].name.replace(/,/g, ''));
            profile.sentFull = parseInt(rows[1].columns[1].name.replace(/,/g, ''));
            profile.sentReduced = parseInt(rows[2].columns[1].name.replace(/,/g, ''));
            profile.sentZero = parseInt(rows[3].columns[1].name.replace(/,/g, ''));
            profile.sentAwaiting = parseInt(rows[4].columns[1].name.replace(/,/g, ''));
            profile.notSent = parseInt(rows[5].columns[1].name.replace(/,/g, ''));
            profile.sentNotReceived = profile.notSent;
            profile.sentCvContainer = profile.sentRowRight.firstElementChild.lastElementChild;
            rows = JSON.parse(profile.sentCvContainer.getAttribute('data-ui-tooltip')).rows;
            profile.sentCV = parseFloat(profile.sentCvContainer.textContent.replace(/[$,]/g, ''));
            profile.realSentCV = parseFloat(rows[0].columns[1].name.replace(/[$,]/g, ''));
          }
        } else if (match[1] === 'Comments') {
          profile.commentsRow = element.parentElement;
        } else if (match[1] === 'Contributor Level') {
          profile.levelRow = element.parentElement;
          profile.levelRowLeft = element;
          profile.levelRowRight = element.nextElementSibling;
          rows = JSON.parse(profile.levelRowRight.firstElementChild.getAttribute('data-ui-tooltip')).rows;
          profile.level = parseFloat(rows[0].columns[1].name);
        } else if (match[1] === 'Registered') {
          profile.registrationDate = parseInt(element.nextElementSibling.firstElementChild.getAttribute('data-timestamp'));
        }
      }
    }
    profile.whitelistButton = profile.steamButtonContainer.getElementsByClassName('sidebar__shortcut__whitelist')[0];
    profile.blacklistButton = profile.steamButtonContainer.getElementsByClassName('sidebar__shortcut__blacklist')[0];
    if (profile.whitelistButton) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('lastSyncWhitelist') > 0) {
        profile.whitelistButton.addEventListener('click', _Common__WEBPACK_IMPORTED_MODULE_5__["common"].updateWhitelistBlacklist.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"], 'whitelisted', profile));
      }
    }
    if (profile.blacklistButton) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_6__["Settings"].get('lastSyncBlacklist') > 0) {
        profile.blacklistButton.addEventListener('click', _Common__WEBPACK_IMPORTED_MODULE_5__["common"].updateWhitelistBlacklist.bind(_Common__WEBPACK_IMPORTED_MODULE_5__["common"], 'blacklisted', profile));
      }
    }
    let savedUser = this.esgst.users.users[profile.steamId];
    if (savedUser) {
      const user = {
        steamId: profile.steamId,
        username: profile.username,
        values: {}
      };
      if (checkUsernameChange(this.esgst.users, user)) {
        await saveUser(null, this.esgst.users, user);
        savedUser = this.esgst.users.users[profile.steamId];
      }
    }
    for (const feature of this.esgst.profileFeatures) {
      try {
        await feature(profile, savedUser);
      } catch (error) {
        _class_Logger__WEBPACK_IMPORTED_MODULE_7__["Logger"].error(error.message, error.stack);
      }
    }
  }
}
const profileModule = new Profile();


/***/ }),
/* 497 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalQuickInboxView", function() { return generalQuickInboxView; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(207);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(220);
/* harmony import */ var _class_Popout__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(222);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(213);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(132);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(216);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(144);













const createElements = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]),
  endless_load = _Common__WEBPACK_IMPORTED_MODULE_12__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_12__["common"]);
class GeneralQuickInboxView extends _class_Module__WEBPACK_IMPORTED_MODULE_6__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "If you hover over the inbox icon (", _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("i", {
        className: "fa fa-envelope"
      }), ") at the header, it shows a popout with your messages so that you do not need to access your inbox page to read them."), _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "You can also mark the messages as read from the popout and reply to them if", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("span", {
        "data-esgst-feature-id": "rfi"
      }), " is enabled.")),
      features: {
        qiv_p: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_3__["DOM"].element("li", null, "Preloads the first page so that you do not have to wait for it to load after hovering over the inbox icon (this can slow down the page load though).")),
          name: 'Preload the first page.',
          sg: true,
          st: true
        }
      },
      id: 'qiv',
      name: 'Quick Inbox View',
      sg: true,
      st: true,
      type: 'general'
    };
  }
  init() {
    _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_4__["EventDispatcher"].subscribe(_constants_Events__WEBPACK_IMPORTED_MODULE_11__["Events"].HEADER_REFRESHED, () => {
      this.qiv();
      if (this.esgst.qiv.popout && _class_Session__WEBPACK_IMPORTED_MODULE_8__["Session"].counters.messages > 0 && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('qiv_p')) {
        this.esgst.qiv.nextPage = 1;
        this.qiv_addMarkReadButton();
        this.qiv_scroll(false, true);
      }
    });
    this.qiv(true);
  }
  qiv(first) {
    if (!_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].header || !_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].header.buttonContainers['messages']) {
      return;
    }
    if (typeof this.esgst.qiv !== 'object') {
      this.esgst.qiv = {
        nextPage: 1
      };
    }
    if (first && _class_Settings__WEBPACK_IMPORTED_MODULE_9__["Settings"].get('qiv_p')) {
      this.esgst.qiv.popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_7__["Popout"]('esgst-qiv-popout', null, 1000);
      this.esgst.qiv.popout.onClose = this.qiv_removeNew.bind(this);
      if (_class_Session__WEBPACK_IMPORTED_MODULE_8__["Session"].counters.messages > 0) {
        this.qiv_addMarkReadButton();
      }
      this.esgst.qiv.comments = createElements(this.esgst.qiv.popout.popout, 'beforeend', [{
        attributes: {
          class: 'esgst-qiv-comments'
        },
        type: 'div'
      }]);
      this.esgst.qiv.comments.addEventListener('scroll', this.qiv_scroll.bind(this, false, false));
      // noinspection JSIgnoredPromiseFromCall
      this.qiv_scroll(true);
    }
    _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].header.buttonContainers['messages'].nodes.outer.addEventListener('mouseenter', this.qiv_openPopout.bind(this));
    _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].header.buttonContainers['messages'].nodes.outer.addEventListener('mouseleave', event => {
      if (this.esgst.qiv.timeout) {
        window.clearTimeout(this.esgst.qiv.timeout);
        this.esgst.qiv.timeout = null;
      }
      this.esgst.qiv.exitTimeout = window.setTimeout(() => {
        if (this.esgst.qiv.popout && !this.esgst.qiv.popout.popout.contains(event.relatedTarget)) {
          this.esgst.qiv.popout.close();
        }
      }, 1000);
    });
  }
  qiv_openPopout() {
    this.esgst.qiv.timeout = window.setTimeout(() => {
      if (this.esgst.qiv.popout) {
        this.esgst.qiv.popout.open(_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].header.buttonContainers['messages'].nodes.outer);
      } else {
        this.esgst.qiv.popout = new _class_Popout__WEBPACK_IMPORTED_MODULE_7__["Popout"]('esgst-qiv-popout', null, 1000);
        this.esgst.qiv.popout.onClose = this.qiv_removeNew.bind(this);
        if (_class_Session__WEBPACK_IMPORTED_MODULE_8__["Session"].counters.messages > 0) {
          this.qiv_addMarkReadButton();
        }
        this.esgst.qiv.comments = createElements(this.esgst.qiv.popout.popout, 'beforeend', [{
          attributes: {
            class: 'esgst-qiv-comments'
          },
          type: 'div'
        }]);
        this.esgst.qiv.popout.open(_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].header.buttonContainers['messages'].nodes.outer);
        this.esgst.qiv.comments.addEventListener('scroll', this.qiv_scroll.bind(this, false, false));
        // noinspection JSIgnoredPromiseFromCall
        this.qiv_scroll(true);
      }
      this.esgst.qiv.popout.popout.onmouseenter = () => {
        if (this.esgst.qiv.exitTimeout) {
          window.clearTimeout(this.esgst.qiv.exitTimeout);
          this.esgst.qiv.exitTimeout = null;
        }
      };
    }, 1000);
  }
  qiv_removeNew() {
    const elements = this.esgst.qiv.popout.popout.getElementsByClassName('esgst-qiv-new');
    for (let i = elements.length - 1; i > -1; i--) {
      elements[i].remove();
    }
  }
  async qiv_scroll(first, preload) {
    if ((first || preload || this.esgst.qiv.comments.scrollTop + this.esgst.qiv.comments.offsetHeight >= this.esgst.qiv.comments.scrollHeight) && !this.esgst.qiv.busy) {
      this.esgst.qiv.busy = true;
      const firstPage = this.esgst.qiv.comments.firstElementChild;
      let doContinue = false;
      do {
        const loading = createElements(this.esgst.qiv.popout.popout, first || preload ? 'afterbegin' : 'beforeend', [{
          type: 'span',
          children: [{
            attributes: {
              class: 'fa fa-circle-o-notch fa-spin'
            },
            type: 'i'
          }, {
            text: ' Loading...',
            type: 'node'
          }]
        }]);
        this.esgst.qiv.popout.reposition(_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].header.buttonContainers['messages'].nodes.outer);
        const context = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].get(`/messages/search?page=${this.esgst.qiv.nextPage}`)).html.querySelector(`.page__heading, .page_heading`).nextElementSibling;
        loading.remove();
        if (preload) {
          const currentId = this.esgst.qiv.comments.querySelector(`[href*="/go/comment/"]`).getAttribute('href').match(/\/go\/comment\/(.+)/)[1],
            comments = context.querySelectorAll(`.comment, .comment_outer`);
          let i = comments.length - 1;
          while (i > -1 && comments[i].querySelector(`[href*="/go/comment/"]`).getAttribute('href').match(/\/go\/comment\/(.+)/)[1] !== currentId) i--;
          if (i > -1) {
            doContinue = false;
            i--;
            for (let j = comments.length - 1; j > i; j--) {
              const container = comments[j].parentElement;
              comments[j].remove();
              if (!container.children.length) {
                container.previousElementSibling.remove();
                container.remove();
              }
            }
          } else {
            doContinue = true;
          }
          if (context.children.length) {
            for (const element of comments) {
              createElements(element, 'afterbegin', [{
                attributes: {
                  class: 'esgst-qiv-new esgst-warning'
                },
                text: `[NEW]`,
                type: 'div'
              }]);
            }
            this.esgst.qiv.comments.insertBefore(context, firstPage);
          }
        } else {
          const comments = context.querySelectorAll(`.comment, .comment_outer`);
          let i = comments.length - 1;
          while (i > -1 && !this.esgst.qiv.comments.querySelector(`[href*="/go/comment/${comments[i].querySelector(`[href*="/go/comment/"]`).getAttribute('href').match(/\/go\/comment\/(.+)/)[1]}"]`)) i--;
          if (i > -1) {
            while (i > -1) {
              const container = comments[i].parentElement;
              comments[i].remove();
              if (!container.children.length) {
                container.previousElementSibling.remove();
                container.remove();
              }
              i--;
            }
            doContinue = !context.children.length;
          } else {
            doContinue = false;
          }
          if (context.children.length) {
            this.esgst.qiv.comments.appendChild(context);
          }
        }
        if (context.children.length) {
          context.setAttribute('data-esgst-qiv', 'true');
          await endless_load(context);
        }
        if (this.esgst.qiv.popout.isOpen) {
          this.esgst.qiv.popout.reposition(_class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].header.buttonContainers['messages'].nodes.outer);
        }
        this.esgst.qiv.nextPage += 1;
      } while (doContinue);
      this.esgst.qiv.busy = false;
    }
  }
  qiv_addMarkReadButton() {
    let key, url;
    if (this.esgst.qiv.markReadButton) return;
    if (this.esgst.sg) {
      this.esgst.qiv.markReadButton = createElements(this.esgst.qiv.popout.popout, 'afterbegin', [{
        attributes: {
          class: 'sidebar__action-button'
        },
        type: 'div',
        children: [{
          attributes: {
            class: 'fa fa-check-circle'
          },
          type: 'i'
        }, {
          text: ' Mark as Read',
          type: 'node'
        }]
      }]);
      key = 'read_messages';
      url = '/messages';
    } else {
      this.esgst.qiv.markReadButton = createElements(this.esgst.qiv.popout.popout, 'afterbegin', [{
        attributes: {
          class: 'page_heading_btn green'
        },
        type: 'a',
        children: [{
          attributes: {
            class: 'fa fa-check-square-o'
          },
          type: 'i'
        }, {
          text: 'Mark as Read',
          type: 'span'
        }]
      }]);
      key = 'mark_as_read';
      url = '/ajax.php';
    }
    this.esgst.qiv.markReadButton.addEventListener('click', async () => {
      await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_5__["FetchRequest"].post(url, {
        data: `xsrf_token=${_class_Session__WEBPACK_IMPORTED_MODULE_8__["Session"].xsrfToken}&do=${key}`
      });
      this.esgst.qiv.markReadButton.remove();
      this.esgst.qiv.markReadButton = null;
      let elements = this.esgst.qiv.comments.querySelectorAll('.comment__envelope');
      for (let i = elements.length - 1; i > -1; i--) {
        elements[i].remove();
      }
      await _class_Shared__WEBPACK_IMPORTED_MODULE_10__["Shared"].header.updateCounter('messages', 0);
    });
  }
}
const generalQuickInboxView = new GeneralQuickInboxView();


/***/ }),
/* 498 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generalEndlessScrolling", function() { return generalEndlessScrolling; });
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(146);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var intersection_observer_polyfill__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(499);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(206);
/* harmony import */ var _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(207);
/* harmony import */ var _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(208);
/* harmony import */ var _class_Module__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(220);
/* harmony import */ var _class_Scope__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(219);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97);
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(132);
/* harmony import */ var _components_NotificationBar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(218);
/* harmony import */ var _constants_Events__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(216);
/* harmony import */ var _Common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(144);
















const animateScroll = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].animateScroll.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  checkMissingDiscussions = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].checkMissingDiscussions.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  createElements = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].createElements.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  createHeadingButton = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].createHeadingButton.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  endless_load = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].endless_load.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  reverseComments = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].reverseComments.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]),
  setSetting = _Common__WEBPACK_IMPORTED_MODULE_15__["common"].setSetting.bind(_Common__WEBPACK_IMPORTED_MODULE_15__["common"]);
class GeneralEndlessScrolling extends _class_Module__WEBPACK_IMPORTED_MODULE_9__["Module"] {
  constructor() {
    super();
    this.info = {
      description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Loads the next page when you scroll down to the end of any page, allowing you to endlessly scroll through pages."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Adds multiple buttons to the main page heading of the page:"), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-play"
      }), " if the endless scrolling is paused and", ' ', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-pause"
      }), " if it is not, which allows you to pause/resume the endless scrolling."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-step-forward"
      }), ", which allows you to load the next page without having to scroll down."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-fast-forward"
      }), ", which allows you continuously load the next pages until either the last page is reached or you pause the endless scrolling."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-refresh"
      }), " ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-map-marker"
      }), ", which allows you to refresh the page currently visible in the window."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("i", {
        className: "fa fa-refresh"
      }), ", which allows you to refresh all of the pages that have been loaded.")), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "You can choose whether or not to show page dividers (page headings separating each loaded page)."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "As you scroll through the page, the pagination navigation of the page changes according to the page currently visible in the window."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "If you use the pagination navigation of the page to try to go to a page that has been loaded, it scrolls to the page instead of opening it."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "There is a reverse scrolling option for discussions that loads the pages in descending order and loads the last page instead of the first one when visiting a discussion from the main/inbox page.")),
      features: {
        es_murl: {
          name: "Modify URL when changing pages to reflect the current page that you're on.",
          sg: true,
          st: true
        },
        es_ch: {
          name: 'Enable for Comment History.',
          sg: true
        },
        es_df: {
          name: 'Enable for Discussion Filters.',
          sg: true
        },
        es_tf: {
          name: 'Enable for Trade Filters.',
          st: true
        },
        es_gb: {
          name: 'Enable for Giveaway Bookmarks.',
          sg: true
        },
        es_ged: {
          name: 'Enable for Giveaway Encrypter/Decrypter.',
          sg: true
        },
        es_ge: {
          name: 'Enable for Giveaway Extractor.',
          sg: true
        },
        es_gf: {
          name: 'Enable for Giveaway Filters.',
          sg: true
        },
        es_cl: {
          inputItems: [{
            attributes: {
              max: 10,
              min: 0,
              type: 'number'
            },
            id: 'es_pages',
            prefix: `Pages (Max 10): `
          }],
          name: 'Continuously load X more pages automatically when visiting any page.',
          sg: true
        },
        es_r: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Loads the pages of a discussion in descending order."), _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "Loads the last page instead of the first one when visiting a discussion from the main/inbox page.")),
          name: 'Enable reverse scrolling.',
          sg: true
        },
        es_rd: {
          name: 'Refresh active discussions/deals when refreshing the main page.',
          sg: true
        },
        es_pd: {
          description: () => _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("ul", null, _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("li", null, "With this option enabled, each loaded page is separated by a page heading, which makes it very clear where a page ends and another begins. With it disabled, there is no such distinction, so it looks like the entire page is a single page, giving a true endless feeling.")),
          name: 'Show page dividers.',
          sg: true,
          st: true
        }
      },
      id: 'es',
      name: 'Endless Scrolling',
      sg: true,
      st: true,
      includeOptions: [{
        id: 'pause',
        name: 'Paused'
      }],
      type: 'general'
    };
  }
  async init() {
    if (!this.esgst.mainPageHeading || !this.esgst.pagination) return;
    if (this.esgst.pagination.classList.contains('pagination--no-results')) {
      this.esgst.itemsPerPage = 50;
    } else {
      this.esgst.itemsPerPage = parseInt(this.esgst.pagination.firstElementChild.firstElementChild.nextElementSibling.textContent.replace(/,/g, '')) - parseInt(this.esgst.pagination.firstElementChild.firstElementChild.textContent.replace(/,/g, '')) + 1;
    }
    let es = {};
    this.esgst.es = es;
    es.dividers = _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es_pd');
    es.mainContext = this.esgst.pagination.previousElementSibling;
    if (this.esgst.commentsPath && !es.mainContext.classList.contains('comments')) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(es.mainContext, 'afterend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("div", {
        className: "comments",
        ref: ref => es.mainContext = ref
      }));
    }
    let rows = es.mainContext.getElementsByClassName('table__rows')[0];
    if (rows) {
      es.mainContext = rows;
    }
    es.paginations = [this.esgst.paginationNavigation ? this.esgst.paginationNavigation.innerHTML : ''];
    es.reverseScrolling = _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es_r') && this.esgst.discussionPath;
    if (es.reverseScrolling) {
      if (this.esgst.currentPage === 1 && this.esgst.paginationNavigation && !this.esgst.parameters.page) {
        var _Scope$find;
        for (let i = 0, n = es.mainContext.children.length; i < n; ++i) {
          es.mainContext.children[0].remove();
        }
        (_Scope$find = _class_Scope__WEBPACK_IMPORTED_MODULE_10__["Scope"].find('main')) === null || _Scope$find === void 0 || _Scope$find.resetData('comments');
        this.esgst.pagination.firstElementChild.firstElementChild.nextElementSibling.textContent = '0';
        let lastLink = this.esgst.paginationNavigation.lastElementChild;
        if (lastLink.classList.contains('is-selected') && lastLink.querySelector('.fa-angle-double-right') && !this.esgst.lastPageLink) {
          es.currentPage = parseInt(lastLink.getAttribute('data-page-number'));
        } else {
          let LastPage = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(`${this.esgst.searchUrl}last`)).html;
          this.esgst.pagination.firstElementChild.firstElementChild.textContent = LastPage.body.getElementsByClassName('pagination__results')[0].firstElementChild.innerHTML;
          this.esgst.pagination.firstElementChild.firstElementChild.nextElementSibling.textContent = LastPage.body.getElementsByClassName('pagination__results')[0].firstElementChild.nextElementSibling.innerHTML;
          es.currentPage = Math.ceil(parseInt(this.esgst.pagination.firstElementChild.firstElementChild.textContent.replace(/,/g, '')) / 25);
          es.pageBase = es.currentPage + 1;
        }
        es.nextPage = es.currentPage;
        es.reversePages = true;
        es.ended = false;
      } else {
        es.currentPage = this.esgst.currentPage;
        es.nextPage = es.currentPage - 1;
        es.pageBase = es.currentPage + 1;
        es.ended = es.nextPage === 0;
      }
    } else {
      es.currentPage = this.esgst.currentPage;
      es.nextPage = es.currentPage + 1;
      es.pageBase = es.currentPage - 1;
      es.ended = !this.esgst.paginationNavigation || this.esgst.paginationNavigation.lastElementChild.classList.contains(this.esgst.selectedClass);
    }
    const options = {
      rootMargin: `-${this.esgst.commentsTop + 1}px 0px 0px 0px`
    };
    es.observer = new intersection_observer_polyfill__WEBPACK_IMPORTED_MODULE_5__["default"](this.es_observe.bind(this, es), options);
    // noinspection JSIgnoredPromiseFromCall
    this.es_activate(es);
    if (window.location.href.includes('happy-holidays')) {
      _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(document.head, 'beforeend', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("script", null, `
					  const boxList = document.querySelector(".giveaway_box_list");
					  var holidayBoxes = new MutationObserver(function() {
						giveaway_box_redraw();
					  });
					  holidayBoxes.observe(boxList, { childList: true });
					`));
    }
  }
  es_observe(es, entries) {
    for (const entry of entries) {
      if (!entry.boundingClientRect || !entry.rootBounds) {
        continue;
      }
      if (!entry.target.getAttribute('data-esgst-intersection')) {
        // So it doesn't get fired when starting to observe an element.
        entry.target.setAttribute('data-esgst-intersection', true);
        if (!entry.isIntersecting) {
          continue;
        }
      }
      if (entry.target.classList.contains('pagination')) {
        if (entry.isIntersecting) {
          this.esgst.pagination.setAttribute('data-esgst-intersecting', 'true');
          this.esgst.es_loadNext(null, true);
        } else {
          this.esgst.pagination.removeAttribute('data-esgst-intersecting');
        }
      } else {
        const index = parseInt(entry.target.className.match(/es-page-(\d+)/)[1]);
        if (entry.isIntersecting) {
          this.es_changePagination(es, index);
        } else if (entry.boundingClientRect.y <= entry.rootBounds.y) {
          // The intersection element is no longer visible, but was scrolled upwards,
          // so we can now change the pagination.
          this.es_changePagination(es, es.reverseScrolling ? index - 1 : index + 1);
        }
      }
    }
  }
  async es_activate(es) {
    for (let i = 0, n = es.mainContext.children.length; i < n; ++i) {
      if (i === n - 1) {
        es.observer.observe(es.mainContext.children[i]);
      }
      es.mainContext.children[i].classList.add(`esgst-es-page-${es.currentPage}`);
    }
    es.nextButton = createHeadingButton({
      featureId: 'es',
      id: 'esNext',
      icons: ['fa-step-forward'],
      title: 'Load next page'
    });
    es.continuousButton = createHeadingButton({
      featureId: 'es',
      id: 'esContinuous',
      icons: ['fa-fast-forward'],
      title: 'Continuously load pages'
    });
    if (es.ended) {
      es.continuousButton.classList.add('esgst-hidden');
    }
    es.pauseButton = createHeadingButton({
      featureId: 'es',
      id: 'esPause',
      icons: ['fa-pause'],
      title: 'Pause the endless scrolling'
    });
    es.resumeButton = createHeadingButton({
      featureId: 'es',
      id: 'esResume',
      orderId: 'esPause',
      icons: ['fa-play'],
      title: 'Resume the endless scrolling'
    });
    es.refreshButton = createHeadingButton({
      featureId: 'es',
      id: 'esRefresh',
      icons: ['fa-refresh', 'fa-map-marker'],
      title: 'Refresh current page'
    });
    es.refreshAllButton = createHeadingButton({
      featureId: 'es',
      id: 'esRefreshAll',
      icons: ['fa-refresh'],
      title: 'Refresh all pages'
    });
    this.esgst.es_refresh = this.es_refresh.bind(this, es);
    es.refreshButton.addEventListener('click', this.esgst.es_refresh.bind(this));
    this.esgst.es_refreshAll = this.es_refreshAll.bind(this, es);
    es.refreshAllButton.addEventListener('click', this.esgst.es_refreshAll.bind(this));
    es.continuousButton.addEventListener('click', this.es_continuouslyLoad.bind(this, es));
    es.nextButton.addEventListener('click', this.es_stepNext.bind(this, es));
    es.pauseButton.addEventListener('click', this.es_pause.bind(this, es, false));
    es.resumeButton.addEventListener('click', this.es_resume.bind(this, es, false));
    if (this.esgst.paginationNavigation) {
      this.esgst.modules.generalPaginationNavigationOnTop.pnot_simplify();
      this.es_fixFirstPageLinks();
      let lastLink = this.esgst.paginationNavigation.lastElementChild;
      if (this.esgst.lastPageLink && this.esgst.lastPage !== es.pageIndex && !lastLink.classList.contains('is-selected') && !lastLink.querySelector('.fa-angle-double-right')) {
        createElements(this.esgst.paginationNavigation, 'beforeend', this.esgst.lastPageLink);
      }
      this.es_setPagination(es);
    }
    es.isLimited = false;
    es.limitCount = 0;
    es.busy = false;
    es.paused = _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es') && _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es').options && _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es').options.pause;
    this.esgst.es_loadNext = this.es_loadNext.bind(this, es);
    if (es.paused) {
      // noinspection JSIgnoredPromiseFromCall
      this.es_pause(es, true);
    } else {
      // noinspection JSIgnoredPromiseFromCall
      this.es_resume(es, true);
    }
    es.pageIndex = es.currentPage;
    const options = {
      rootMargin: `0px 0px ${window.innerHeight}px 0px`
    };
    const observer = new intersection_observer_polyfill__WEBPACK_IMPORTED_MODULE_5__["default"](this.es_observe.bind(this, es), options);
    observer.observe(this.esgst.pagination);
    if (es.paused && es.reversePages) {
      this.esgst.es_loadNext();
    } else if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es_cl')) {
      // noinspection JSIgnoredPromiseFromCall
      this.es_continuouslyLoad(es);
    }
    _Common__WEBPACK_IMPORTED_MODULE_15__["common"].moveAdsDown(es);
  }
  async es_loadNext(es, callback, force) {
    if (!this.esgst.pagination.classList.contains('pagination--no-results') && !this.esgst.stopEs && !es.busy && (!es.paused || es.reversePages) && !es.ended && (force && !es.continuous && !es.step || !force && (es.continuous || es.step)) && (!es.isLimited || es.limitCount > 0)) {
      es.limitCount -= 1;
      es.busy = true;
      if (!es.progressBar) {
        es.progressBar = _components_NotificationBar__WEBPACK_IMPORTED_MODULE_13__["NotificationBar"].create().build().setLoading('Loading next page...');
      }
      es.progressBar.insert(this.esgst.pagination, 'afterend').show();
      // noinspection JSIgnoredPromiseFromCall
      this.es_getNext(es, false, false, callback, await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(`${this.esgst.searchUrl}${es.nextPage}`));
    } else if (callback && typeof callback === 'function') {
      callback();
    }
  }
  async es_getNext(es, refresh, refreshAll, callback, response) {
    let pagination = response.html.getElementsByClassName('pagination')[0],
      context = pagination.previousElementSibling,
      rows = context.getElementsByClassName('table__rows')[0];
    if (this.esgst.commentsPath && !context.classList.contains('comments')) {
      if (!refreshAll) {
        es.refreshButton.addEventListener('click', this.esgst.es_refresh.bind(this));
        createElements(es.refreshButton, 'atinner', [{
          attributes: {
            class: 'fa fa-refresh'
          },
          type: 'i'
        }, {
          attributes: {
            class: 'fa fa-map-marker'
          },
          type: 'i'
        }]);
      }
      return;
    }
    if (rows) {
      context = rows;
    }
    let paginationNavigation = pagination.getElementsByClassName(this.esgst.paginationNavigationClass)[0];
    if (es.reversePages) {
      es.paginations[0] = paginationNavigation.innerHTML;
      createElements(this.esgst.paginationNavigation, 'atinner', [...Array.from(_class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].parse(es.paginations[0]).body.childNodes).map(x => {
        return {
          context: x
        };
      })]);
      if (this.esgst.paginationNavigation) {
        this.esgst.modules.generalPaginationNavigationOnTop.pnot_simplify();
        this.es_fixFirstPageLinks();
        let lastLink = this.esgst.paginationNavigation.lastElementChild;
        if (this.esgst.lastPageLink && this.esgst.lastPage !== es.pageIndex && !lastLink.classList.contains('is-selected') && !lastLink.querySelector('.fa-angle-double-right')) {
          createElements(this.esgst.paginationNavigation, 'beforeend', this.esgst.lastPageLink);
        }
        this.es_setPagination(es);
      }
      es.reversePages = false;
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es_murl')) {
        this.updateUrl(es.currentPage);
      }
      this.esgst.pagination.firstElementChild.firstElementChild.textContent = (parseInt(this.esgst.pagination.firstElementChild.firstElementChild.nextElementSibling.textContent.replace(/,/g, '')) + 1).toString().replace(/\B(?=(\d{3})+(?!\d))/g, `,`);
      this.esgst.pagination.firstElementChild.firstElementChild.textContent = this.esgst.pagination.firstElementChild.firstElementChild.nextElementSibling.textContent;
    } else if (refresh) {
      pagination = es.paginations[(es.reverseScrolling ? es.pageBase - (refreshAll || es.pageIndex) : (refreshAll || es.pageIndex) - es.pageBase) - 1];
      if (paginationNavigation && pagination !== paginationNavigation.innerHTML) {
        es.paginations[(es.reverseScrolling ? es.pageBase - (refreshAll || es.pageIndex) : (refreshAll || es.pageIndex) - es.pageBase) - 1] = paginationNavigation.innerHTML;
        es.ended = false;
      }
    } else {
      es.paginations.push(paginationNavigation.innerHTML);
    }
    let fragment = document.createDocumentFragment();
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('cr') && this.esgst.discussionPath) {
      reverseComments(context);
    }
    let n = context.children.length;
    const currentPage = refresh ? refreshAll || es.pageIndex : es.nextPage;
    for (let i = 0; i < n; ++i) {
      let child = context.children[0];
      child.classList.add(`esgst-es-page-${currentPage}`);
      fragment.appendChild(child);
    }
    let oldN = 0;
    if (refresh) {
      let elements = document.getElementsByClassName(`esgst-es-page-${currentPage}`);
      oldN = elements.length;
      for (let i = 1; i < oldN; ++i) {
        elements[0].remove();
      }
      let element = elements[0];
      if (element) {
        es.mainContext.insertBefore(fragment, element);
        es.observer.observe(element.previousElementSibling);
        element.remove();
      } else {
        es.mainContext.appendChild(fragment);
        es.observer.observe(es.mainContext.lastElementChild);
      }
      if (!refreshAll) {
        _Common__WEBPACK_IMPORTED_MODULE_15__["common"].moveAdsDown(es);
        await endless_load(es.mainContext, true, null, currentPage);
        this.es_setRemoveEntry(es.mainContext);
        if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ts') && !_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('us')) {
          this.esgst.modules.generalTableSorter.ts_sortTables();
        }
        es.refreshButton.addEventListener('click', this.esgst.es_refresh.bind(this));
        createElements(es.refreshButton, 'atinner', [{
          attributes: {
            class: 'fa fa-refresh'
          },
          type: 'i'
        }, {
          attributes: {
            class: 'fa fa-map-marker'
          },
          type: 'i'
        }]);
      }
    } else {
      if (es.dividers) {
        createElements(es.mainContext, 'beforeend', [{
          attributes: {
            class: 'esgst-page-heading esgst-es-page-divider'
          },
          type: 'div',
          children: [{
            attributes: {
              class: 'page__heading__breadcrumbs page_heading_breadcrumbs'
            },
            type: 'div',
            children: [{
              attributes: {
                href: `${this.esgst.searchUrl}${es.nextPage}`
              },
              text: `Page ${es.nextPage}`,
              type: 'a'
            }]
          }]
        }]);
      }
      es.mainContext.appendChild(fragment);
      es.observer.observe(es.mainContext.lastElementChild);
      _Common__WEBPACK_IMPORTED_MODULE_15__["common"].moveAdsDown(es);
      await endless_load(es.mainContext, true, null, currentPage);
      this.es_setRemoveEntry(es.mainContext);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ts') && !_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('us')) {
        this.esgst.modules.generalTableSorter.ts_sortTables();
      }
      es.progressBar.hide();
      if (es.reverseScrolling) {
        --es.nextPage;
        es.busy = false;
        if (es.nextPage <= 0) {
          es.ended = true;
          if (callback && typeof callback === 'function') {
            callback();
          }
        } else if (!es.paused && !es.step) {
          if (es.continuous) {
            this.esgst.es_loadNext(callback);
          } else if (callback && typeof callback === 'function') {
            callback();
          } else if (this.esgst.pagination.getAttribute('data-esgst-intersecting')) {
            this.esgst.es_loadNext(null, true);
          }
        } else if (callback && typeof callback === 'function') {
          callback();
        }
      } else {
        ++es.nextPage;
        es.busy = false;
        if (paginationNavigation.lastElementChild.classList.contains(this.esgst.selectedClass)) {
          es.ended = true;
          if (callback && typeof callback === 'function') {
            callback();
          }
        } else if (!es.paused && !es.step) {
          if (es.continuous) {
            this.esgst.es_loadNext(callback);
          } else if (callback && typeof callback === 'function') {
            callback();
          } else if (this.esgst.pagination.getAttribute('data-esgst-intersecting')) {
            this.esgst.es_loadNext(null, true);
          }
        } else if (callback && typeof callback === 'function') {
          callback();
        }
      }
    }
    let paginationCount = null;
    if (this.esgst.pagination.textContent.match(/No\sresults\swere\sfound\./)) {
      this.esgst.pagination.firstElementChild.firstChild.remove();
      _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].insert(this.esgst.pagination.firstElementChild, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("fragment", null, "Displaying ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("strong", null, "1"), " to ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("strong", null, n), " of ", _class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].element("strong", null, n), ` result${n > 1 ? 's' : ''}`));
    } else {
      if (es.reverseScrolling && !refresh) {
        paginationCount = this.esgst.pagination.firstElementChild.firstElementChild;
      } else {
        paginationCount = this.esgst.pagination.firstElementChild.firstElementChild.nextElementSibling;
      }
      paginationCount.textContent = (parseInt(paginationCount.textContent.replace(/,/g, '')) - oldN + (es.reverseScrolling && !refresh ? -n : n)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, `,`);
    }
  }
  es_changePagination(es, index) {
    const correctedIndex = es.reverseScrolling ? es.pageBase - index : index - es.pageBase;
    const pagination = es.paginations[correctedIndex - 1];
    if (pagination && this.esgst.paginationNavigation.innerHTML !== pagination) {
      createElements(this.esgst.paginationNavigation, 'atinner', [...Array.from(_class_DOM__WEBPACK_IMPORTED_MODULE_6__["DOM"].parse(pagination).body.childNodes).map(x => {
        return {
          context: x
        };
      })]);
      this.esgst.modules.generalPaginationNavigationOnTop.pnot_simplify();
      this.es_fixFirstPageLinks();
      let lastLink = this.esgst.paginationNavigation.lastElementChild;
      if (this.esgst.lastPageLink && this.esgst.lastPage !== es.pageIndex && !lastLink.classList.contains('is-selected') && !lastLink.querySelector('.fa-angle-double-right')) {
        createElements(this.esgst.paginationNavigation, 'beforeend', this.esgst.lastPageLink);
      }
      this.es_setPagination(es);
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es_murl')) {
        this.updateUrl(index);
      }
    }
  }
  es_fixFirstPageLinks() {
    const firstPageLinks = this.esgst.paginationNavigation.querySelectorAll(`[data-page-number="1"]`);
    // @ts-ignore
    for (const firstPageLink of firstPageLinks) {
      firstPageLink.setAttribute('href', `${firstPageLink.getAttribute('href')}/search?page=1`);
    }
  }
  async es_stepNext(es) {
    if (es.step) return;
    createElements(es.nextButton, 'atinner', [{
      attributes: {
        class: 'fa fa-circle-o-notch fa-spin'
      },
      type: 'i'
    }]);
    es.step = true;
    const wasPaused = es.paused;
    await this.es_resume(es);
    this.esgst.es_loadNext(async () => {
      es.step = false;
      if (wasPaused) {
        await this.es_pause(es);
      } else {
        await this.es_resume(es);
      }
      createElements(es.nextButton, 'atinner', [{
        attributes: {
          class: 'fa fa-step-forward'
        },
        type: 'i'
      }]);
    });
  }
  async es_continuouslyLoad(es) {
    if (es.continuous) return;
    createElements(es.continuousButton, 'atinner', [{
      attributes: {
        class: 'fa fa-circle-o-notch fa-spin'
      },
      type: 'i'
    }]);
    es.continuous = true;
    const wasPaused = es.paused;
    await this.es_resume(es);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es_cl')) {
      es.isLimited = true;
      es.limitCount = Math.min(10, parseInt(_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es_pages')));
    }
    this.esgst.es_loadNext(async () => {
      es.isLimited = false;
      es.limitCount = 0;
      es.continuous = false;
      if (wasPaused) {
        await this.es_pause(es);
      } else {
        await this.es_resume(es);
      }
      createElements(es.continuousButton, 'atinner', [{
        attributes: {
          class: 'fa fa-fast-forward'
        },
        type: 'i'
      }]);
    });
  }
  async es_pause(es, firstRun) {
    es.paused = true;
    es.pauseButton.classList.add('esgst-hidden');
    es.resumeButton.classList.remove('esgst-hidden');
    if (!firstRun) {
      const setting = _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].getFull('es');
      setting.include = setting.include.map(item => {
        if (item !== _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es')) {
          return item;
        }
        if (!item.options) {
          item.options = {};
        }
        item.options.pause = es.paused;
        _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].set('es', item);
        return item;
      });
      await setSetting(`es_${_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.name}`, setting);
    }
    es.continuous = false;
    createElements(es.continuousButton, 'atinner', [{
      attributes: {
        class: 'fa fa-fast-forward'
      },
      type: 'i'
    }]);
  }
  async es_resume(es, firstRun) {
    es.paused = false;
    es.resumeButton.classList.add('esgst-hidden');
    es.pauseButton.classList.remove('esgst-hidden');
    if (!firstRun) {
      const setting = _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].getFull('es');
      setting.include = setting.include.map(item => {
        if (item !== _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es')) {
          return item;
        }
        if (!item.options) {
          item.options = {};
        }
        item.options.pause = es.paused;
        _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].set('es', item);
        return item;
      });
      await setSetting(`es_${_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.name}`, setting);
    }
    if (this.esgst.pagination.getAttribute('data-esgst-intersecting')) {
      this.esgst.es_loadNext(null, true);
    }
  }
  async es_refresh(es) {
    es.refreshButton.removeEventListener('click', this.esgst.es_refresh);
    createElements(es.refreshButton, 'atinner', [{
      attributes: {
        class: 'fa fa-circle-o-notch fa-spin'
      },
      type: 'i'
    }]);
    let response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(`${this.esgst.searchUrl}${es.pageIndex}`);
    // noinspection JSIgnoredPromiseFromCall
    this.es_getNext(es, true, false, null, response);
    if (this.esgst.giveawaysPath && _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es_rd')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('oadd')) {
        // noinspection JSIgnoredPromiseFromCall
        this.esgst.modules.discussionsOldActiveDiscussionsDesign.oadd_load(true);
      } else {
        checkMissingDiscussions(true);
      }
    }
    if (this.esgst.pinnedGiveaways) {
      createElements(this.esgst.pinnedGiveaways, 'atinner', [...Array.from(response.html.getElementsByClassName('pinned-giveaways__outer-wrap')[0].childNodes).map(x => {
        return {
          context: x
        };
      })]);
      await endless_load(this.esgst.pinnedGiveaways, true);
      this.esgst.modules.giveawaysPinnedGiveawaysButton.init();
    }
    await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_14__["Events"].PAGE_REFRESHED, (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.sg ? '/giveaways/search?type=wishlist' : '/')).html);
  }
  async es_refreshAll(es) {
    es.refreshAllButton.removeEventListener('click', this.esgst.es_refreshAll);
    createElements(es.refreshAllButton, 'atinner', [{
      attributes: {
        class: 'fa fa-circle-o-notch fa-spin'
      },
      type: 'i'
    }]);
    let page = es.reverseScrolling ? es.pageBase - 1 : es.pageBase + 1,
      response = await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(`${this.esgst.searchUrl}${page}`);
    // noinspection JSIgnoredPromiseFromCall
    this.es_getNext(es, true, page, null, response);
    const promises = [];
    for (let i = 1, n = es.paginations.length; i < n; ++i) {
      page = es.reverseScrolling ? es.pageBase - (i + 1) : es.pageBase + (i + 1);
      // noinspection JSIgnoredPromiseFromCall
      promises.push(this.es_getNext(es, true, page, null, await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(`${this.esgst.searchUrl}${page}`)));
    }
    await _class_EventDispatcher__WEBPACK_IMPORTED_MODULE_7__["EventDispatcher"].dispatch(_constants_Events__WEBPACK_IMPORTED_MODULE_14__["Events"].PAGE_REFRESHED, (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].get(_class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.sg ? '/giveaways/search?type=wishlist' : '/')).html);
    await Promise.all(promises);
    _Common__WEBPACK_IMPORTED_MODULE_15__["common"].moveAdsDown(es);
    await endless_load(es.mainContext, true);
    this.es_setRemoveEntry(es.mainContext);
    es.refreshAllButton.addEventListener('click', this.esgst.es_refreshAll.bind(this));
    createElements(es.refreshAllButton, 'atinner', [{
      attributes: {
        class: 'fa fa-refresh'
      },
      type: 'i'
    }]);
    if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('ts') && !_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('us')) {
      this.esgst.modules.generalTableSorter.ts_sortTables();
    }
    if (this.esgst.giveawaysPath && _class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('es_rd')) {
      if (_class_Settings__WEBPACK_IMPORTED_MODULE_11__["Settings"].get('oadd')) {
        // noinspection JSIgnoredPromiseFromCall
        this.esgst.modules.discussionsOldActiveDiscussionsDesign.oadd_load(true);
      } else {
        checkMissingDiscussions(true);
      }
    }
    if (this.esgst.pinnedGiveaways) {
      createElements(this.esgst.pinnedGiveaways, 'atinner', [...Array.from(response.html.getElementsByClassName('pinned-giveaways__outer-wrap')[0].childNodes).map(x => {
        return {
          context: x
        };
      })]);
      await endless_load(this.esgst.pinnedGiveaways, true);
      this.esgst.modules.giveawaysPinnedGiveawaysButton.init();
    }
  }
  es_setPagination(es) {
    let matches = this.esgst.paginationNavigation.children;
    for (let i = 0, n = matches.length; i < n; ++i) {
      matches[i].addEventListener('click', this.es_setPaginationItem.bind(this, es));
    }
  }
  es_setPaginationItem(es, event) {
    event.preventDefault();
    let page = parseInt(event.currentTarget.getAttribute('data-page-number')),
      element = document.querySelector(`.esgst-es-page-${page}:not(.esgst-hidden)`);
    if (element) {
      animateScroll(element.offsetTop, () => {
        this.es_changePagination(es, page);
      });
    } else {
      window.location.href = event.currentTarget.getAttribute('href');
    }
  }
  es_setRemoveEntry(Context) {
    let Matches = Context.getElementsByClassName('table__row-inner-wrap');
    for (let I = 0, N = Matches.length; I < N; ++I) {
      this.es_removeEntry(Matches[I]);
    }
  }
  es_removeEntry(Context) {
    let Default, Loading, Complete, Data;
    Default = Context.getElementsByClassName('table__remove-default')[0];
    if (Default) {
      Loading = Default.nextElementSibling;
      Complete = Loading.nextElementSibling;
      Default.addEventListener('click', async () => {
        let Values, I, N;
        Default.classList.toggle('is-hidden');
        Loading.classList.toggle('is-hidden');
        Values = Context.getElementsByTagName('input');
        Data = '';
        for (I = 0, N = Values.length; I < N; ++I) {
          Data += `${Values[I].getAttribute('name')}=${Values[I].value}${I < N - 1 ? '&' : ''}`;
        }
        Loading.classList.toggle('is-hidden');
        let responseJson = (await _class_FetchRequest__WEBPACK_IMPORTED_MODULE_8__["FetchRequest"].post('/ajax.php', {
          data: Data
        })).json;
        if (responseJson.type === 'success') {
          Context.classList.add('is-faded');
          Complete.classList.toggle('is-hidden');
          if (responseJson.points) {
            _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].header.updatePoints(responseJson.points);
          }
        } else {
          Default.classList.toggle('is-hidden');
        }
      });
    }
  }
  updateUrl(page) {
    const isFirstPage = page === 1;
    const queryParams = window.location.search.replace(/\?|&page=(\d+)|page=(\d+)&|page=(\d+)/g, '');
    let path = '';
    if (window.location.pathname === '/') {
      path = _class_Shared__WEBPACK_IMPORTED_MODULE_12__["Shared"].esgst.sg ? 'giveaways' : 'trades';
    }
    let search = '';
    if (queryParams) {
      search = `${path}/search?${queryParams}${isFirstPage ? '' : `&page=${page}`}`;
    } else if (!isFirstPage) {
      search = `${path}/search?page=${page}`;
    }
    window.history.replaceState(null, '', `${window.location.origin}${window.location.pathname.replace('/search', '')}${search}${window.location.hash}`);
  }
}
const generalEndlessScrolling = new GeneralEndlessScrolling();


/***/ }),
/* 499 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _src_IntersectionObserver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(500);


let IntersectionObserver;

// Define what implementation of IntersectionObserver
// needs to be exported: existing or polyfilled.
if (typeof window.IntersectionObserver === 'function') {
    // Export existing IntersectionObservers' implementation.
    IntersectionObserver = window.IntersectionObserver;
} else {
    // Export polyfill.
    IntersectionObserver = _src_IntersectionObserver__WEBPACK_IMPORTED_MODULE_0__["default"];
}

/* harmony default export */ __webpack_exports__["default"] = (IntersectionObserver);

/***/ }),
/* 500 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _shims_es6_collections__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(501);
/* harmony import */ var _IntersectionObserverController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(502);
/* harmony import */ var _IntersectionObserver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(504);




// This controllers' instance will be assigned to all IntersectionObservers
const controller = new _IntersectionObserverController__WEBPACK_IMPORTED_MODULE_1__["default"]();

// Registry of internal observers.
const observers = new _shims_es6_collections__WEBPACK_IMPORTED_MODULE_0__["WeakMap"]();

/**
 * IntersectionObservers' "Proxy" class which is meant to hide private
 * properties and methods from IntersectionObserver instances.
 *
 * Additionally it implements "idleTimeout" and "trackHovers" static property
 * accessors to give a control over the behavior of IntersectionObserverController
 * instance. Changes made to these properties will affect both future and
 * existing instances of IntersectionObserver.
 */
class IntersectionObserver {
    /**
     * Creates instance of public IntersectionObserver.
     *
     * @param {Function} callback
     * @param {Object} options
     */
    constructor(callback, options) {
        if (!arguments.length) {
            throw new TypeError("1 argument required, but only 0 present.");
        }

        const observer = new _IntersectionObserver__WEBPACK_IMPORTED_MODULE_2__["default"](callback, options, controller, this);

        // Due to the spec following properties are non-writable
        // and in native implementation they are also not enumerable.
        Object.defineProperties(this, {
            root:       {value: observer.root},
            thresholds: {value: observer.thresholds},
            rootMargin: {value: observer.rootMargin}
        });

        // Register internal observer.
        observers.set(this, observer);
    }

    /**
     * Extracts controllers' idle timeout value.
     *
     * @returns {Number}
     */
    static get idleTimeout() {
        return controller.idleTimeout;
    }

    /**
     * Sets up new idle timeout.
     *
     * @param {Number} value - New timeout value.
     */
    static set idleTimeout(value) {
        if (typeof value !== 'number') {
            throw new TypeError('type of "idleTimeout" value must be a number.');
        }

        if (typeof value < 0) {
            throw new TypeError('"idleTimeout" value must be greater than 0.');
        }

        controller.idleTimeout = value;
    }

    /**
     * Tells whether controller tracks "hover" events.
     *
     * @returns {Boolean}
     */
    static get trackHovers() {
        return controller.isHoverEnabled();
    }

    /**
     * Enables or disables tracking of "hover" event.
     *
     * @param {Boolean} value - Whether to disable or enable tracking.
     */
    static set trackHovers(value) {
        if (typeof value !== 'boolean') {
            throw new TypeError('type of "trackHovers" value must be a boolean.');
        }

        value ?
            controller.enableHover() :
            controller.disableHover();
    }
}

// Expose public methods of IntersectionObserver.
[
    'observe',
    'unobserve',
    'disconnect',
    'takeRecords'
].forEach(method => {
    IntersectionObserver.prototype[method] = function () {
        return observers.get(this)[method](...arguments);
    };
});

/* harmony default export */ __webpack_exports__["default"] = (IntersectionObserver);


/***/ }),
/* 501 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Map", function() { return Map; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeakMap", function() { return WeakMap; });
/**
 * Simple shims for WeakMap and Map classes.
 * This implementation is not meant to be used outside of IntersectionObserver modules
 * because it covers only limited range of use cases.
 */

const hasNativeCollections =
    typeof window.WeakMap === 'function' &&
    typeof window.Map === 'function';

const WeakMap = (function () {
    if (hasNativeCollections) {
        return window.WeakMap;
    }

    /**
     *
     * @param {Array<Array>} arr
     * @param {Object} key
     * @returns {Number}
     */
    function getIndex(arr, key) {
        let result = -1;

        arr.some((entry, index) => {
            let matches = entry[0] === key;

            if (matches) {
                result = index;
            }

            return matches;
        });

        return result;
    }

    return class {
        constructor() {
            this.__entries__ = [];
        }

        /**
         *
         * @param {Object} key
         * @returns {*}
         */
        get(key) {
            let index = getIndex(this.__entries__, key);

            return this.__entries__[index][1];
        }

        /**
         *
         * @param {Object} key
         * @param {*} value
         */
        set(key, value) {
            let index = getIndex(this.__entries__, key);

            if (~index) {
                this.__entries__[index][1] = value;
            } else {
                this.__entries__.push([key, value]);
            }
        }

        /**
         *
         * @param {Object} key
         */
        delete(key) {
            let entries = this.__entries__,
                index = getIndex(entries, key);

            if (~index) {
                entries.splice(index, 1);
            }
        }

        /**
         *
         * @param {Object} key
         * @returns {Boolean}
         */
        has(key) {
            return !!~getIndex(this.__entries__, key);
        }
    };
})();

const Map = (function () {
    if (hasNativeCollections) {
        return window.Map;
    }

    return class extends WeakMap {
        /**
         *
         * @returns {Number}
         */
        get size() {
            return this.__entries__.length;
        }

        clear() {
            this.__entries__.splice(0, this.__entries__.length);
        }

        /**
         *
         * @returns {Array<Array>}
         */
        entries() {
            return this.__entries__.slice();
        }

        /**
         *
         * @returns {Array}
         */
        keys() {
            return this.__entries__.map(entry => entry[0]);
        }

        /**
         *
         * @returns {Array}
         */
        values() {
            return this.__entries__.map(entry => entry[1]);
        }

        /**
         *
         * @param {Function} callback
         * @param {Object} [ctx = null]
         */
        forEach(callback, ctx = null) {
            for (const entry of this.__entries__) {
                callback.call(ctx, entry[1], entry[0]);
            }
        }
    };
})();



/***/ }),
/* 502 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IntersectionObserverController; });
/* harmony import */ var _shims_performance_now__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(503);


const mutationsSupported = typeof window.MutationObserver === 'function';

/**
 * A shim for requestAnimationFrame which falls back
 * to setTimeout if the first one is not supported.
 *
 * @returns {Number} Request identifier.
 */
const requestAnimFrame = (function () {
    if (window.requestAnimationFrame) {
        return window.requestAnimationFrame;
    }

    return callback => {
        return setTimeout(() => callback(Object(_shims_performance_now__WEBPACK_IMPORTED_MODULE_0__["default"])()), 1000 / 60);
    };
})();

/**
 * Creates a wrapper function that ensures that
 * provided callback will be invoked only after
 * the specified delay.
 *
 * @param {Function} callback
 * @param {Number} [delay = 0]
 * @returns {Function}
 */
function debounce(callback, delay = 0) {
    let timeoutID = false;

    return function (...args) {
        if (timeoutID !== false) {
            clearTimeout(timeoutID);
        }

        timeoutID = setTimeout(() => {
            timeoutID = false;

            callback.apply(this, args);
        }, delay);
    };
}

/**
 * Controller class that is used to handle updates of registered IntersectionObservers.
 * It controls when and for how long it's necessary to run updates of observations
 * by listening to various events on window along with DOM mutations
 * (nodes removal, changes of attributes, etc.).
  *
 * CSS transitions and animations are handled by running the update cycle
 * until position of DOM elements, added to connected observers, keeps changing
 * or until the idle timeout is reached (default timeout is 50 milliseconds).
 * Timeout value can be manually increased if transitions have a delay.
 *
 * Tracking of changes made by ":hover" class is optional and can be
 * enabled by invoking the "enableHover" method.
 *
 * Infinite update cycle along with a listener of "click" event will be used in case when
 * MutatioObserver is not supported.
 */
class IntersectionObserverController {
    /**
     * Creates new IntersectionObserverController instance.
     *
     * @param {Number} [idleTimeout = 50]
     * @pram {Boolean} [trackHovers = false] - Whether to track "mouseover"
     *      events or not. Disabled be default.
     */
    constructor(idleTimeout = 50, trackHovers = false) {
        this._idleTimeout = idleTimeout;
        this._trackHovers = trackHovers;
        this._cycleStartTime = -1;

        // Indicates whether the update of observers is scheduled.
        this._isUpdateScheduled = false;

        // Indicates whether infinite cycles are enabled.
        this._repeatCycle = false;

        // Indicates whether "mouseover" event handler was added.
        this._hoverInitiated = false;

        // Keeps reference to the instance of MutationObserver.
        this._mutationsObserver = null;

        // Indicates whether DOM listeners were initiated.
        this._isListening = false;

        // A list of connected observers.
        this._observers = [];

        // Fix value of "this" binding for the following methods.
        this.startUpdateCycle = this.startUpdateCycle.bind(this);
        this.scheduleUpdate = this.scheduleUpdate.bind(this);
        this._onMutation = this._onMutation.bind(this);

        // Function that will be invoked to re-rerun the update cycle
        // if repeatable cycles are enabled.
        this._repeatHandler = debounce(this.scheduleUpdate, 200);

        // "mouseover" event handler.
        this._onMouseOver = debounce(this.startUpdateCycle, 200);
    }

    /**
     * Returns current idle timeout value.
     *
     * @returns {Number}
     */
    get idleTimeout() {
        return this._idleTimeout;
    }

    /**
     * Sets up new idle timeout value.
     *
     * @param {Number} value - New timeout value.
     */
    set idleTimeout(value) {
        this._idleTimeout = value;
    }

    /**
     * Adds observer to observers list.
     *
     * @param {IntersectionObserver} observer - Observer to be added.
     */
    connect(observer) {
        if (!this.isConnected(observer)) {
            this._observers.push(observer);
        }

        // Instantiate listeners if they
        // weren't instantiated yet.
        if (!this._isListening) {
            this._initListeners();
        }
    }

    /**
     * Removes observer from observers list.
     *
     * @param {IntersectionObserver} observer - Observer to be removed.
     */
    disconnect(observer) {
        let observers = this._observers,
            index = observers.indexOf(observer);

        if (~index) {
            observers.splice(index, 1);
        }

        // Remove listeners if controller
        // has no connected observers.
        if (!observers.length && this._isListening) {
            this._removeListeners();
        }
    }

    /**
     * Tells whether provided observer is connected to controller.
     *
     * @param {IntersectionObserver} observer - Observer to be checked.
     * @returns {Boolean}
     */
    isConnected(observer) {
        return !!~this._observers.indexOf(observer);
    }

    /**
     * Updates every observer from observers list and
     * notifies them of queued entries.
     *
     * @private
     * @returns {Boolean} Returns "true" if any observer
     *      has detected changes in position of its elements.
     */
    _updateObservers() {
        let hasChanges = false;

        for (const observer of this._observers) {
            if (observer.updateObservations()) {
                hasChanges = true;
            }

            if (observer.hasEntries()) {
                observer.notifySubscriber();
            }
        }

        return hasChanges;
    }

    /**
     * Schedules new update cycle.
     */
    startUpdateCycle() {
        this._cycleStartTime = Object(_shims_performance_now__WEBPACK_IMPORTED_MODULE_0__["default"])();

        this.scheduleUpdate();
    }

    /**
     * Controls invocation of "_updateObservers" method.
     * It will re-invoke itself in the following cases:
     *      - Update of observers detected changes in elements position.
     *        In this case we need to postpone cycle end time in order to ensure
     *        that we won't miss next iteration of animations.
     *
     *      - Idle timeout wasn't reached yet.
     *        In this case we need to schedule new single update
     *        because changes may be delayed.
     *
     * @param {Number} [timestamp] - Internal parameter
     *      that is used to define whether method was invoked
     *      as a callback of requestAnimationFrame.
     */
    scheduleUpdate(timestamp) {
        let calledFromRAF = typeof timestamp === 'number';

        // Invoke the update of observers only if function
        // was called as a requestAnimationFrame callback.
        if (calledFromRAF) {
            const hasChanges = this._updateObservers();

            this._isUpdateScheduled = false;

            // Do nothing if cycle wasn't started.
            if (!this._wasCycleStarted()) {
                return;
            }

            if (hasChanges) {
                // Postpone cycle end time if changes were detected.
                this.startUpdateCycle();
            } else if (!this._hasIdleTimeEnded()) {
                // Schedule new single update if cycle timeout wasn't reached yet.
                this.scheduleUpdate();
            } else {
                // Finish cycle.
                this._onCycleEnded();
            }
        } else if (!this._isUpdateScheduled) {
            // Request new update if it wasn't requested already.
            requestAnimFrame(this.scheduleUpdate);

            this._isUpdateScheduled = true;
        }
    }

    /**
     * Tells whether cycle has reached its idle timeout.
     *
     * @private
     * @returns {Boolean}
     */
    _hasIdleTimeEnded() {
        return Object(_shims_performance_now__WEBPACK_IMPORTED_MODULE_0__["default"])() - this._cycleStartTime > this._idleTimeout;
    }

    /**
     * Tells whether the update cycle is currently running.
     *
     * @private
     * @returns {Boolean}
     */
    _wasCycleStarted() {
        return this._cycleStartTime !== -1;
    }

    /**
     * Callback that will be invoked after the update cycle is finished.
     *
     * @private
     */
    _onCycleEnded() {
        // Mark that update cycle is not running.
        this._cycleStartTime = -1;

        if (this._repeatCycle) {
            // Time is set to '0' because we want to automatically
            // start update cycle when single update detects changes.
            this._cycleStartTime = 0;

            this._repeatHandler();
        }
    }

    /**
     * Initializes DOM listeners.
     *
     * @private
     */
    _initListeners() {
        // Do nothing if listeners are already initiated.
        if (this._isListening) {
            return;
        }

        this._isListening = true;

        // Use update cycle here instead of a single update because we may encounter
        // with delayed changes, e.g. when width or height of an
        // element are changed by CSS transitions.
        window.addEventListener('resize', this.startUpdateCycle, true);

        window.addEventListener('scroll', this.scheduleUpdate, true);

        // Listen to possible changes made by ":hover" class.
        if (this._trackHovers) {
            this._addHoverListener();
        }

        // Fall back to repeatable cycle with additional tracking of
        // "click" event if MutationObserver is not supported.
        if (!mutationsSupported) {
            this._repeatCycle = true;

            // Listen to clicks as they may cause changes in elements position.
            window.addEventListener('click', this.startUpdateCycle, true);

            // Manually start cycle.
            this.startUpdateCycle();
        } else {
            // Subscribe to DOM mutations as they may lead to changes in position of elements.
            this._mutationsObserver = new MutationObserver(this._onMutation);

            this._mutationsObserver.observe(document, {
                attributes: true,
                childList: true,
                characterData: true,
                subtree: true
            });
        }
    }

    /**
     * Removes all DOM listeners.
     *
     * @private
     */
    _removeListeners() {
        // Do nothing if listeners were already removed.
        if (!this._isListening) {
            return;
        }

        window.removeEventListener('resize', this.startUpdateCycle, true);
        window.removeEventListener('scroll', this.scheduleUpdate, true);

        this._removeHoverListener();

        if (!mutationsSupported) {
            this._repeatCycle = false;

            window.removeEventListener('click', this.startUpdateCycle, true);
        } else if (this._mutationsObserver) {
            this._mutationsObserver.disconnect();
            this._mutationsObserver = null;
        }

        this._isListening = false;
    }

    /**
     * Enables hover listener.
     */
    enableHover() {
        this._trackHovers = true;

        // Manually add hover listener
        // if listeners were already initiated.
        if (this._isListening) {
            this._addHoverListener();
        }
    }

    /**
     * Disables hover listener.
     */
    disableHover() {
        this._trackHovers = false;

        this._removeHoverListener();
    }

    /**
     * Tells whether hover listener is enabled.
     *
     * @returns {Boolean}
     */
    isHoverEnabled() {
        return this._trackHovers;
    }

    /**
     * Adds "mouseover" listener if it wasn't already added.
     *
     * @private
     */
    _addHoverListener() {
        if (this._hoverInitiated) {
            return;
        }

        window.addEventListener('mouseover', this._onMouseOver, true);

        this._hoverInitiated = true;
    }

    /**
     * Removes "mouseover" listener if it was added previously.
     *
     * @private
     */
    _removeHoverListener() {
        if (!this._hoverInitiated) {
            return;
        }

        window.removeEventListener('mouseover', this._onMouseOver, true);

        this._hoverInitiated = false;
    }

    /**
     * DOM mutations handler.
     *
     * @private
     * @param {Array<MutationRecord>} entries
     */
    _onMutation(entries) {
        const runSingleUpdate = entries.every(entry => {
            return entry.type !== 'attributes';
        });

        // Schedule single update if attributes (class, style, etc.)
        // were not changed. Otherwise run update cycle because
        // animations are expected to appear only in this case.
        runSingleUpdate ?
            this.scheduleUpdate() :
            this.startUpdateCycle();
    }
}


/***/ }),
/* 503 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * A shim for performance.now method which falls back
 * to Date.now if the first one is not supported.
 *
 * @returns {Timestamp}
 */
/* harmony default export */ __webpack_exports__["default"] = ((function () {
    if (window.performance && window.performance.now) {
        return () => window.performance.now();
    }

    return () => Date.now();
})());

/***/ }),
/* 504 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IntersectionObserver; });
/* harmony import */ var _shims_es6_collections__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(501);
/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(505);
/* harmony import */ var _IntersectionObservation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(506);




/**
 * Validates and parses threshold values.
 * Throws an error if one of the thresholds
 * is non-finite or not in range of 0 and 1.
 *
 * @param {(Array<Number>|Number)} [thresholds = 0]
 * @returns {Array<Number>} An array of thresholds in ascending order.
 */
function parseThresholds(thresholds = 0) {
    let result = thresholds;

    if (!Array.isArray(thresholds)) {
        result = [thresholds];
    } else if (!thresholds.length) {
        result = [0];
    }

    return result.map(threshold => {
        // We use Number function instead of parseFloat
        // to convert boolean values and null to theirs
        // numeric representation. This is done to act
        // in the same manner as a native implementation.
        threshold = Number(threshold);

        if (!window.isFinite(threshold)) {
            throw new TypeError('The provided double value is non-finite.');
        } else if (threshold < 0 || threshold > 1) {
            throw new RangeError('Threshold values must be between 0 and 1.');
        }

        return threshold;
    }).sort();
}

/**
 * Validates and converts margins value (defined in a form of
 * CSS 'margin' property) to a list of tokens, e.g:
 * 1. '0px' = [['0px'], ['0px'], ['0px'], ['0px']]
 * 2. '5px 11px' = [['5px'], ['11px'], ['5px'], ['11px']]
 *
 * @param {String} [margins = '0px'] - Margins value to be processed.
 * @returns {Array<Array>} Object that contains both: a list of
 *      tokens and its string representation.
 */
function parseMargins(margins = '0px') {
    // Use regular expression in order to properly
    // handle multiple spaces in-between of tokens: '0px     2px   5px'.
    //
    // Casting to a string is required to keep the behavior
    // closer to the native implementation which converts
    // an array like [[['2px 3px']]] to '2px 3px';
    margins = (margins + '').split(/\s+/);

    // Chrome validates tokens length starting from version 53.
    if (margins.length > 4) {
        throw new Error('Extra text found at the end of rootMargin.');
    }

    margins[0] = margins[0] || '0px';
    margins[1] = margins[1] || margins[0];
    margins[2] = margins[2] || margins[0];
    margins[3] = margins[3] || margins[1];

    const rawData = margins.join(' ');

    const parsedData = margins.map(token => {
        let [,value, unit] = /^(-?\d*\.?\d+)(px|%)$/.exec(token) || [];
        const pixels = unit === 'px';

        value = parseFloat(value);

        if (!window.isFinite(value)) {
            throw new Error('rootMargin must be specified in pixels or percent.');
        }

        if (!pixels) {
            value /= 100;
        }

        return {value, pixels};
    });

    return {rawData, parsedData};
}

/**
 * Creates new rectangle from provided one whose
 * dimensions will be modified by applying margins
 * defined in a form of [[value: Number, pixels: Boolean], ...].
 *
 * @param {ClientRect} targetRect - Initial rectangle.
 * @param {Array<Array>} margins - Margins data.
 * @returns {ClientRect} Modified rectangle.
 */
function applyMargins(targetRect, margins) {
    margins = margins.map((margin, index) => {
        let value = margin.value;

        if (!margin.pixels) {
            value *= index % 2 ? targetRect.width : targetRect.height;
        }

        return value;
    });

    const result = {
        top: targetRect.top - margins[0],
        right: targetRect.right + margins[1],
        bottom: targetRect.bottom + margins[2],
        left: targetRect.left - margins[3]
    };

    result.width = result.right - result.left;
    result.height = result.bottom - result.top;

    return result;
}

class IntersectionObserver {
    /**
     * Creates new IntersectionObserver instance.
     *
     * @param {Function} callback - Callback function that will be invoked
     *      whenever one of the observed targets reaches new ratio value defined in "options.threshold".
     * @param {Object} [options = {}] - Optional configuration.
     * @param {IntersectionObserverController} controller - Associated controller instance.
     * @param {IntersectionObserver} publicObserver - This value will be used as
     *      a value of "this" binding for the callback function.
     */
    constructor(callback, options = {}, controller, publicObserver) {
        if (typeof callback !== 'function') {
            throw new TypeError("The callback provided as parameter 1 is not a function.");
        }

        if (typeof options !== 'object') {
            throw new TypeError("parameter 2 is not an object.");
        }

        if ('root' in options && !(options.root instanceof Element)) {
            throw new TypeError("member root is not of type Element.");
        }


        const thresholds = parseThresholds(options.threshold);
        const rootMargin = parseMargins(options.rootMargin);

        this.root = options.root || null;
        this.rootMargin = rootMargin.rawData;

        // Thresholds array needs to be immutable
        // according to the native implementation.
        this.thresholds = Object.freeze(thresholds);

        this._root = options.root || document.documentElement;
        this._callback = callback;
        this._rootMargin = rootMargin.parsedData;

        // Registry of observed elements and
        // corresponding IntersectionObservation instances.
        this._targets = new _shims_es6_collections__WEBPACK_IMPORTED_MODULE_0__["Map"]();

        // A list of queued IntersectionObserverEntry
        // items that will passed to the callback function.
        this._quedEntries = [];

        this._publicObserver = publicObserver || this;

        this.controller = controller;
    }

    /**
     * Adds provided target to observations list.
     *
     * @param {Element} target - DOM element to be observed.
     */
    observe(target) {
        if (!arguments.length) {
            throw new TypeError('1 argument required, but only 0 present.');
        }

        if (!(target instanceof Element)) {
            throw new TypeError('parameter 1 is not of type "Element".');
        }

        let targets = this._targets;

        // Do nothing if target is already observed.
        if (targets.has(target)) {
            return;
        }

        // Create new IntersectionObservation instance and assign it
        // to provided target.
        targets.set(target, new _IntersectionObservation__WEBPACK_IMPORTED_MODULE_2__["default"](target, this));

        // Connect current observer to controller
        // if it wasn't connected yet.
        if (!this.controller.isConnected(this)) {
            this.controller.connect(this);
        }

        // Request the update of observers.
        this.controller.startUpdateCycle();
    }

    /**
     * Removes provided target from observations list.
     *
     * @param {Element} target - DOM element to stop observing.
     */
    unobserve(target) {
        if (!arguments.length) {
            throw new TypeError('1 argument required, but only 0 present.');
        }

        if (!(target instanceof Element)) {
            throw new TypeError('parameter 1 is not of type "Element".');
        }

        let targets = this._targets;

        if (targets.has(target)) {
            targets.delete(target);
        }

        // Disconnect observer if the list of observed targets is empty.
        if (!targets.size) {
            this.disconnect();
        }
    }

    /**
     * Removes all targets from observations list
     * and disconnects observer from associated controller, i.e.
     * no updates will be invoked for it.
     */
    disconnect() {
        this._targets.clear();
        this.controller.disconnect(this);
    }

    /**
     * Returns a list of queued observation entries and
     * clears the queue.
     *
     * @returns {Array}
     */
    takeRecords() {
        return this._quedEntries.splice(0);
    }

    /**
     * Invokes callback function with a list
     * of queued entries if the last one is not empty.
     *
     * @private
     */
    notifySubscriber() {
        const entries = this.takeRecords();
        const publicObserver = this._publicObserver;

        if (entries.length) {
            this._callback.call(publicObserver, entries, publicObserver);
        }
    }

    /**
     * Adds entry to the queue.
     *
     * @param {IntersectionObserverEntry} entry
     */
    queueEntry(entry) {
        this._quedEntries.push(entry);
    }

    /**
     * Tells whether observer has queued entries.
     *
     * @returns {Boolean}
     */
    hasEntries() {
        return !!this._quedEntries.length;
    }

    /**
     * Updates intersection data of each observed target.
     *
     * @returns {Boolean} Returns "true" if intersection ratio or the rectangle of one of the
     *      observed targets has changed. This information is required for
     *      controller to decide whether to continue running the update cycle.
     */
    updateObservations() {
        let root     = this._root,
            rootRect = this.getRootRect(),
            hasChanges = false;

        this._targets.forEach(observation => {
            const changes = observation.updateIntersection(root, rootRect);

            if (changes.ratioChanged || changes.targetRectChanged) {
                hasChanges = true;
            }
        });

        return hasChanges;
    }

    /**
     * Finds index of the first threshold whose value is greater than provided ratio.
     * In case if there is no such value the amount of thresholds will be returned.
     *
     * @param {Number} ratio
     * @returns {Number}
     */
    getThresholdGreaterThan(ratio) {
        let thresholds = this.thresholds,
            thresholdsLen = thresholds.length,
            index = 0;

        while (index < thresholdsLen && thresholds[index] <= ratio) {
            ++index;
        }

        return index;
    }

    /**
     * Calculates rectangle of root node with applied margins.
     *
     * @returns {ClientRect}
     */
    getRootRect() {
        let rootRect = Object(_geometry__WEBPACK_IMPORTED_MODULE_1__["getRectangle"])(this._root);

        return applyMargins(rootRect, this._rootMargin);
    }
}


/***/ }),
/* 505 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapToClientRect", function() { return mapToClientRect; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createRectangle", function() { return createRectangle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRectangle", function() { return getRectangle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getArea", function() { return getArea; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEmpty", function() { return isEmpty; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEqual", function() { return isEqual; });
/**
 * From provided rectangle creates a new one whose
 * properties are not enumerable, configurable or writable.
 *
 * @param {ClientRect} rect - Initial rectangle.
 * @returns {ClientRect}
 */
function mapToClientRect(rect) {
    const descriptors = {};

    for (const key of Object.keys(rect)) {
        descriptors[key] = {value: rect[key]};
    }

    return Object.defineProperties({}, descriptors);
}

/**
 * Creates rectangle based on provided arguments.
 * If called without arguments then an empty rectangle
 * will be created.
 *
 * @param {Number} [left = 0] - Left position of rectangle.
 * @param {Number} [top = 0] - Top position of rectangle.
 * @param {Number} [width = 0] - Rectangles' width.
 * @param {Number} [height = 0] - Rectangles' height.
 * @returns {ClientRect}
 */
function createRectangle(left = 0, top = 0, width = 0, height = 0) {
    return {
        left, top, width, height,
        bottom: top + height,
        right: left + width
    };
}

/**
 * Returns client rectangle of provided element.
 * If element represents documentElement then returns
 * main viewport rectangle.
 *
 * @param {Element} target
 * @returns {ClientRect}
 */
function getRectangle(target) {
    if (target === document.documentElement) {
        return createRectangle(0, 0, target.clientWidth, target.clientHeight);
    }

    return target.getBoundingClientRect();
}

/**
 * Calculates area of rectangle.
 *
 * @param {ClientRect} rect - Rectangle whose area needs to be calculated.
 * @returns {Number} Rectangles' area.
 */
function getArea(rect) {
    return rect.width * rect.height;
}

/**
 * Tells whether rectangle is empty.
 *
 * @param {ClientRect} rect - Rectangle to be checked.
 * @returns {Boolean}
 */
function isEmpty(rect) {
    return rect.height === 0 && rect.width === 0;
}

/**
 * Compares rectangles to each other.
 *
 * @param {ClientRect} first
 * @param {ClientRect} second
 * @returns {Boolean}
 */
function isEqual(first, second) {
    return (
        first.top === second.top &&
        first.left === second.left &&
        first.right === second.right &&
        first.bottom === second.bottom
    );
}


/***/ }),
/* 506 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IntersectionObservation; });
/* harmony import */ var _shims_performance_now__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(503);
/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(505);
/* harmony import */ var _IntersectionObserverEntry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(507);




const emptyRect = Object(_geometry__WEBPACK_IMPORTED_MODULE_1__["createRectangle"])();

/**
 * Tells whether target is a descendant of container element
 * and that both of them are present in DOM.
 *
 * @param {Element} container - Container element.
 * @param {Element} target - Target element.
 * @returns {Boolean}
 */
function isDetached(container, target) {
    const docElement = document.documentElement;

    return (
        container !== docElement && !docElement.contains(container) ||
        !container.contains(target)
    );
}

/**
 * Computes intersection rectangle between two rectangles.
 *
 * @param {ClientRect} rootRect - Rectangle of container element.
 * @param {ClientRect} targetRect - Rectangle of target element.
 * @returns {ClientRect} Intersection rectangle.
 */
function computeIntersection(rootRect, targetRect) {
    const left      = Math.max(targetRect.left, rootRect.left);
    const right     = Math.min(targetRect.right, rootRect.right);
    const top       = Math.max(targetRect.top, rootRect.top);
    const bottom    = Math.min(targetRect.bottom, rootRect.bottom);

    const width = right - left;
    const height = bottom - top;

    return Object(_geometry__WEBPACK_IMPORTED_MODULE_1__["createRectangle"])(left, top, width, height);
}

/**
 * Finds intersection rectangle of provided elements.
 *
 * @param {Element} container - Container element.
 * @param {Element} target - Target element.
 * @param {ClientRect} targetRect - Rectangle of target element.
 * @param {ClientRect} containterRect - Rectangle of container element.
 */
function getIntersection(container, target, containterRect, targetRect) {
    let intersecRect    = targetRect,
        parent          = target.parentNode,
        rootReached     = false;

    while (!rootReached) {
        let parentRect = null;

        if (parent === container || parent.nodeType !== 1) {
            rootReached = true;
            parentRect = containterRect;
        } else if (window.getComputedStyle(parent).overflow !== 'visible') {
            parentRect = Object(_geometry__WEBPACK_IMPORTED_MODULE_1__["getRectangle"])(parent);
        }

        if (parentRect) {
            intersecRect = computeIntersection(intersecRect, parentRect);
        }

        parent = parent.parentNode;
    }

    return intersecRect;
}

/**
 * This class is responsible for computing and keeping track of intersections
 * between target element and its container. It will create and queue for notification
 * new IntersectionObserverEntry when intersection ratio reaches new thresholded value.
 */
class IntersectionObservation {
    /**
     * Creates instance of IntersectionObservation.
     *
     * @param {Element} target - Element being observed.
     * @param {IntersectionObserver} observer - Associated IntersectionObserver.
     */
    constructor(target, observer) {
        this.target = target;
        this.observer = observer;

        this.prevTargetRect = emptyRect;
        this.prevThreshold = 0;
        this.prevRatio = 0;
    }

    /**
     * Updates intersection data. Creates and queues new
     * IntersectionObserverEntry if intersection threshold has changed.
     *
     * @param {Object} root - Element for which to compute intersection.
     * @param {ClientRect} rootRect - Rectangle of root element.
     * @returns {Object} An object with information about detected changes:
     *  {
     *      ratioChanged: boolean,
     *      targetRectChanged: boolean,
     *      thresholdChanged: boolean
     *  }
     */
    updateIntersection(root, rootRect) {
        let targetRect          = Object(_geometry__WEBPACK_IMPORTED_MODULE_1__["getRectangle"])(this.target),
            intersection        = this.getIntersectionData(root, rootRect, targetRect),
            threshold           = +intersection.exists,
            ratioChanged        = intersection.ratio !== this.prevRatio,
            targetRectChanged   = !Object(_geometry__WEBPACK_IMPORTED_MODULE_1__["isEqual"])(targetRect, this.prevTargetRect),
            thresholdChanged;

        // Find thresholds' index if intersection
        // and target rectangles are not empty.
        if (intersection.exists && !Object(_geometry__WEBPACK_IMPORTED_MODULE_1__["isEmpty"])(targetRect)) {
            threshold = this.observer.getThresholdGreaterThan(intersection.ratio);
        }

        thresholdChanged = threshold !== this.prevThreshold;

        // Update cached properties.
        this.prevTargetRect = targetRect;
        this.prevThreshold = threshold;
        this.prevRatio = intersection.ratio;

        // Create an empty rectangle if there is no intersection.
        if (!intersection.exists) {
            intersection.ratio = 0;
            intersection.rect = emptyRect;
        }

        // Create and queue new entry if threshold has changed.
        if (thresholdChanged) {
            const entry = new _IntersectionObserverEntry__WEBPACK_IMPORTED_MODULE_2__["default"](
                this.target,
                targetRect,
                intersection.rect,
                intersection.ratio,
                rootRect,
                Object(_shims_performance_now__WEBPACK_IMPORTED_MODULE_0__["default"])()
            );

            this.observer.queueEntry(entry);
        }

        return {ratioChanged, thresholdChanged, targetRectChanged};
    }

    /**
     * Computes intersection data.
     *
     * @param {Element} container - Container element.
     * @param {ClientRect} [containterRect]
     * @param {ClientRect} [targetRect]
     * @returns {Object}
     */
    getIntersectionData(container, containterRect, targetRect) {
        const target = this.target;

        if (!targetRect) {
            targetRect = Object(_geometry__WEBPACK_IMPORTED_MODULE_1__["getRectangle"])(this.target);
        }

        if (!containterRect) {
            containterRect = Object(_geometry__WEBPACK_IMPORTED_MODULE_1__["getRectangle"])(container);
        }

        let detached        = isDetached(container, target),
            intersecRect    = !detached ? getIntersection(container, target, containterRect, targetRect) : emptyRect,
            intersects      = !detached && intersecRect.width >= 0 && intersecRect.height >= 0,
            intersecRatio   = Object(_geometry__WEBPACK_IMPORTED_MODULE_1__["getArea"])(intersecRect) / Object(_geometry__WEBPACK_IMPORTED_MODULE_1__["getArea"])(targetRect) || 0;

        return {
            rect: intersecRect,
            ratio: intersecRatio,
            exists: intersects
        };
    }
}


/***/ }),
/* 507 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IntersectionObserverEntry; });
/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(505);


class IntersectionObserverEntry {
    /**
     * Creates new instance of IntersectionObserverEntry.
     *
     * @param {Element} target
     * @param {ClientRect} targetRect
     * @param {ClientRect} intersecRect
     * @param {Number} intersecRatio
     * @param {ClientRect} rootBounds
     * @param {Timestamp} time
     */
    constructor(target, targetRect, intersecRect, intersecRatio, rootBounds, time) {

        // According to the spec following properties are not writable and
        // in native implementation they are also not enumerable.
        Object.defineProperties(this, {
            boundingClientRect: {value: targetRect},
            intersectionRatio:  {value: intersecRatio},
            intersectionRect:   {value: Object(_geometry__WEBPACK_IMPORTED_MODULE_0__["mapToClientRect"])(intersecRect)},
            rootBounds:         {value: Object(_geometry__WEBPACK_IMPORTED_MODULE_0__["mapToClientRect"])(rootBounds)},
            target:             {value: target},
            time:               {value: time}
        });
    }
}


/***/ }),
/* 508 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IFooter", function() { return IFooter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Footer", function() { return Footer; });
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(115);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _class_DOM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(206);
/* harmony import */ var _constants_Namespaces__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(214);
/* harmony import */ var _class_Session__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(213);







class IFooter {
  constructor() {
    /** @type {IFooterNodes} */
    this.nodes = {
      inner: null,
      leftNav: null,
      nav: null,
      outer: null,
      rightNav: null
    };

    /** @type {Object<string, IFooterLinkContainer>} */
    this.linkContainers = {};
  }

  /**
   * @param {string} string
   * @returns {string}
   */
  static generateId(name) {
    return name.replace(/[^A-Za-z\s].*/, '') // Only gets the name until a non-letter character
    .trim().split(' ').filter(word => word).map(word => `${word[0].toUpperCase()}${word.slice(1).toLowerCase()}`) // Applies CamelCase format
    .join('').replace(/^(.)/, (fullMatch, group1) => group1.toLowerCase()); // Applies camelCase format
  }
}
class SgFooter extends IFooter {
  constructor() {
    super();
  }

  /**
   * @param {IFooterLinkContainerParams} params
   */
  addLinkContainer(params) {
    const [context, position] = params.context ? [params.context, params.position] : params.side === 'left' ? [this.nodes.leftNav, params.position || 'beforeend'] : [this.nodes.rightNav, params.position || 'afterbegin'];
    let linkContainerNode;
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      ref: ref => linkContainerNode = ref
    }, params.icon ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
      className: params.icon
    }) : null, ' ', params.url ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
      href: params.url
    }, params.name) : params.name));
    return this.parseLinkContainer(linkContainerNode);
  }

  /**
   * @param {HTMLElement} context
   */
  parse(context) {
    const outerNode = context.querySelector('footer');
    if (!outerNode) {
      throw 'No footer present.';
    }
    if (outerNode.dataset.esgstParsed) {
      throw 'Footer already parsed.';
    }
    this.nodes.outer = outerNode;
    this.nodes.inner = this.nodes.outer.querySelector('.footer_lower');
    this.nodes.nav = this.nodes.inner;
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(this.nodes.nav, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      ref: ref => this.nodes.leftNav = ref,
      style: "flex: 1;"
    }));
    this.nodes.leftNav.appendChild(this.nodes.nav.querySelector('.footer_steam'));
    this.nodes.rightNav = this.nodes.nav.querySelector('.footer_sites');
    const linkContainerNodes = [...Array.from(this.nodes.leftNav.querySelectorAll(':scope > a')), ...Array.from(this.nodes.rightNav.querySelectorAll(':scope > a'))];
    for (const linkContainerNode of linkContainerNodes) {
      this.parseLinkContainer(linkContainerNode);
    }
    this.nodes.outer.dataset.esgstParsed = 'true';
  }

  /**
   * @param {HTMLElement} linkContainerNode
   * @returns {IFooterLinkContainer}
   */
  parseLinkContainer(linkContainerNode) {
    /** @type {IFooterLinkContainer} */
    const linkContainer = {
      nodes: {
        outer: linkContainerNode
      },
      data: {
        id: '',
        name: ''
      }
    };
    const iconNode = linkContainer.nodes.outer.querySelector('.fa');
    if (iconNode) {
      linkContainer.nodes.icon = iconNode;
      linkContainer.data.icon = linkContainer.nodes.icon.className;
    }
    const linkNode = linkContainer.nodes.outer.querySelector('a');
    if (linkNode) {
      linkContainer.nodes.link = linkContainer.nodes.outer.querySelector('a');
      linkContainer.data.name = linkContainer.nodes.link.textContent.trim() || linkContainer.nodes.outer.title;
      linkContainer.data.url = linkContainer.nodes.link.getAttribute('href');
    } else {
      linkContainer.data.name = linkContainer.nodes.outer.textContent.trim() || linkContainer.nodes.outer.title;
    }
    linkContainer.data.id = IFooter.generateId(linkContainer.data.name);
    this.linkContainers[linkContainer.data.id] = linkContainer;
    return linkContainer;
  }
}
class StFooter extends IFooter {
  constructor() {
    super();
  }

  /**
   * @param {IFooterLinkContainerParams} params
   */
  addLinkContainer(params) {
    const [context, position] = params.context ? [params.context, params.position] : params.side === 'left' ? [this.nodes.leftNav, params.position || 'beforeend'] : [this.nodes.rightNav, params.position || 'afterbegin'];
    let linkContainerNode;
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(context, position, _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      ref: ref => linkContainerNode = ref
    }, params.icon ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("i", {
      className: params.icon
    }) : null, ' ', params.url ? _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("a", {
      href: params.url
    }, params.name) : params.name));
    return this.parseLinkContainer(linkContainerNode);
  }

  /**
   * @param {HTMLElement} context
   */
  parse(context) {
    const outerNode = context.querySelector('footer');
    if (!outerNode) {
      throw 'No footer present.';
    }
    if (outerNode.dataset.esgstParsed) {
      throw 'Footer already parsed.';
    }
    this.nodes.outer = outerNode;
    this.nodes.inner = this.nodes.outer.querySelector('.footer_lower .footer_inner_wrap');
    this.nodes.nav = this.nodes.inner;
    _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].insert(this.nodes.nav, 'afterbegin', _class_DOM__WEBPACK_IMPORTED_MODULE_4__["DOM"].element("div", {
      ref: ref => this.nodes.leftNav = ref,
      style: "display: flex; gap: 15px;"
    }));
    this.nodes.leftNav.appendChild(this.nodes.nav.querySelector('.footer_steam'));
    this.nodes.rightNav = this.nodes.nav.querySelector('.footer_sites');
    const linkContainerNodes = [...Array.from(this.nodes.leftNav.querySelectorAll(':scope > a')), ...Array.from(this.nodes.rightNav.querySelectorAll(':scope > a'))];
    for (const linkContainerNode of linkContainerNodes) {
      this.parseLinkContainer(linkContainerNode);
    }
    this.nodes.outer.dataset.esgstParsed = 'true';
  }

  /**
   * @param {HTMLElement} linkContainerNode
   * @returns {IFooterLinkContainer}
   */
  parseLinkContainer(linkContainerNode) {
    /** @type {IFooterLinkContainer} */
    const linkContainer = {
      nodes: {
        outer: linkContainerNode
      },
      data: {
        id: '',
        name: ''
      }
    };
    const iconNode = linkContainer.nodes.outer.querySelector('.fa');
    if (iconNode) {
      linkContainer.nodes.icon = iconNode;
      linkContainer.data.icon = linkContainer.nodes.icon.className;
    }
    const linkNode = linkContainer.nodes.outer;
    if (linkNode) {
      linkContainer.nodes.link = linkContainer.nodes.outer;
      linkContainer.data.name = linkContainer.nodes.link.textContent.trim() || linkContainer.nodes.outer.title;
      linkContainer.data.url = linkContainer.nodes.link.getAttribute('href');
    } else {
      linkContainer.data.name = linkContainer.nodes.outer.textContent.trim() || linkContainer.nodes.outer.title;
    }
    linkContainer.data.id = IFooter.generateId(linkContainer.data.name);
    this.linkContainers[linkContainer.data.id] = linkContainer;
    return linkContainer;
  }
}

/**
 * @param {number} namespace
 * @returns {IFooter}
 */
function Footer(namespace = _class_Session__WEBPACK_IMPORTED_MODULE_6__["Session"].namespace) {
  switch (namespace) {
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_5__["Namespaces"].SG:
      {
        return new SgFooter();
      }
    case _constants_Namespaces__WEBPACK_IMPORTED_MODULE_5__["Namespaces"].ST:
      {
        return new StFooter();
      }
    default:
      {
        throw 'Invalid namespace.';
      }
  }
}


/***/ }),
/* 509 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addStyle", function() { return addStyle; });
/* harmony import */ var _class_Shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(132);
/* harmony import */ var _class_Settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97);


function addStyle() {
  let backgroundColor, color, colors, i, n, style;
  style = `
	:root {
		--esgst-gwc-highlight-width: ${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('gwc_h_width')};
		--esgst-gwr-highlight-width: ${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('gwr_h_width')};
	}
`;
  colors = [{
    id: 'gc_h',
    key: 'hidden',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_gi',
    key: 'giveawayInfo',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_ocv_fcv',
    key: 'originalCV-fcv',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_ocv_rcv',
    key: 'originalCV-rcv',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_fcv',
    key: 'fullCV',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_rcv',
    key: 'reducedCV',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_ncv',
    key: 'noCV',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_hltb',
    key: 'hltb',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_w',
    key: 'wishlisted',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_f',
    key: 'followed',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_o',
    key: 'owned',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_pw',
    key: 'won',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_i',
    key: 'ignored',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_lg',
    key: 'learning',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_rm',
    key: 'removed',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_ea',
    key: 'earlyAccess',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_tc',
    key: 'tradingCards',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_a',
    key: 'achievements',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_bd',
    key: 'banned',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_bvg',
    key: 'bartervg',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_sp',
    key: 'singleplayer',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_mp',
    key: 'multiplayer',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_sc',
    key: 'steamCloud',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_l',
    key: 'linux',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_m',
    key: 'mac',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_dlc',
    key: 'dlc',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_p',
    key: 'package',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_rd',
    key: 'releaseDate',
    mainKey: 'esgst-gc'
  }, {
    id: 'gc_g',
    key: 'genres',
    mainKey: 'esgst-gc'
  }];
  for (i = 0, n = colors.length; i < n; ++i) {
    color = _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get(`${colors[i].id}_color`);
    backgroundColor = _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get(`${colors[i].id}_bgColor`);
    style += `
		${colors[i].key === 'genres' ? 'a' : ''}.${colors[i].mainKey}-${colors[i].key}:not(.giveaway__column):not(.featured__column) {
			background-color: ${backgroundColor};
			${color ? `color: ${color};` : ''}
		}
		.${colors[i].mainKey}-${colors[i].key}.giveaway__column, .${colors[i].mainKey}-${colors[i].key}.featured__column {
			color: ${backgroundColor};
		}
	`;
  }
  colors = [{
    id: 'wbh_w',
    key: 'whitelisted',
    mainKey: 'esgst-wbh-highlight'
  }, {
    id: 'wbh_b',
    key: 'blacklisted',
    mainKey: 'esgst-wbh-highlight'
  }];
  for (i = 0, n = colors.length; i < n; ++i) {
    color = _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get(`${colors[i].id}_color`);
    backgroundColor = _class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get(`${colors[i].id}_bgColor`);
    style += `
		.${colors[i].mainKey}-${colors[i].key} {
			background-color: ${backgroundColor} !important;
			${color ? `color: ${color} !important;` : ''}
		}
	`;
  }
  style += `
	.esgst-button.sidebar__error {
		margin-bottom: 0;
	}

	.form__saving-button--gray {
		background-image: linear-gradient(#dadde4 0%, #c8ccd7 50%, #b2b7c2 100%);
		border-color: #bcc1cc #9da4b2 #7e8797 #a5adbc;
		color: #5d636f;
		text-shadow: 1px 1px 1px rgba(233, 236, 245, 0.5);
	}

	.form__saving-button--gray:not(.is-disabled):hover {
    background-image: linear-gradient(#dcdfe6 0%, #caced9 50%, #b4b9c4 100%);
	}

	.btn-action.yellow {
		background-image: linear-gradient(#f6f6ec 0%, #e9e9ca 100%);
		border-color: #e0e0a8 #dbdba0 #d6d68b #dedea4;
		color: #a59d7c;
		text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.7);
	}

	.btn_action.yellow:hover:not(.is_saving):not(.is_disabled):not(:active) {
		background-image: linear-gradient(#fcfcec 0%, #e9e9ca 100%);
	}

	.btn_action.yellow:active:not(.is_saving):not(.is_disabled) {
		background-image: linear-gradient(#e6e6c9 0%, #e2e2b8 100%)
		box-shadow: 2px 2px 5px #a59d7c inset;
		text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.5);
	}

	.notification--info, .notification.blue {
		background-image: linear-gradient(#eafef7 0%, #d9edf7 100%);
		border-color: #bce8f1;
		color: #53928f;
	}

	.notification--danger, .notification.red {
		background-image: linear-gradient(#f2efef 0%, #f2dede 100%);
		border-color: #ebccd1;
		color: #a96664;
	}

	.notification--default, .notification.gray {
		background-image: linear-gradient(#f3f4f6 0%, #e2e3e5 100%);
		border-color: #d6d8db;
		color: #5a5f63;
	}

	.esgst-sm-feature-container {
		display: flex;
		flex-direction: column;
	}

	.esgst-sm-feature, .esgst-sm-feature-name {
		align-items: center;
		display: flex;
	}

	.form-control {
		font-size: 12px !important;
		height: 22px !important;
		padding: 2px !important;
	}

	.form-control.has-error {
		border-color: #a94442;
		box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
	}

	.footer_inner_wrap {
		justify-content: space-between;
	}

	.footer_inner_wrap > ul > :not(last-child) {
		margin-right: 15px;
	}

	.nav__button img, .nav_btn img {
		vertical-align: middle;
	}

	.nav_btn img {
		margin-right: 10px;
	}

	.esgst-tds-sidebar-item {
		align-items: center;
		display: flex;
		justify-content: space-between;
	}

	.esgst-tds-sidebar-item .sidebar__navigation__item__link {
		flex: 1;
	}

	.ui-datepicker:not([style]) {
		display: none;
	}

	.esgst-tds-popout {
		max-height: 600px;
		max-width: 300px;
	}

	.esgst-tds-item {
		align-items: center;
		border: 1px solid #ccc;
		border-radius: 5px;
		display: flex;
		justify-content: space-between;
		margin-bottom: 2px;
		padding: 5px;
	}

	.esgst-tds-item-active {
		background-color: #eee;
	}

	.esgst-tds-item-name {
		font-size: 14px;
		font-weight: bold;
	}

	.esgst-tds-item-count {
		opacity: 0.75;
	}

	.esgst-tds-item-active .esgst-tds-item-count {
		font-weight: bold;
	}

	.esgst-tds-item-actions {
		display: flex;
	}

	.esgst-tds-item-actions >* {
		cursor: pointer;
		margin-right: 5px;
	}

	.esgst-cdr-highlight {
		color: #ff0000;
		font-weight: bold;
	}

	.esgst-logs-error i {
		color: #d9534f;
	}

	.esgst-log-error {
		background-color: #d9534f;
		color: #ffffff;
		text-shadow: none;
	}

	.esgst-logs-warning i {
		color: #f0ad4e;
	}

	.esgst-log-warning {
		background-color: #f0ad4e;
		color: #ffffff;
		text-shadow: none;
	}

	#esgst_permissions .esgst-ugd-table {
		min-width: unset;
	}

	.tour-backdrop {
		opacity: 0.5;
		z-index: 9999991100;
	}

	.tour-prevent {
		background: none;
		opacity: 0;
		z-index: 9999991102;
	}

	.popover[class*="tour-"] {
		color: #000;
		z-index: 9999991110;
	}

	.giveaway__links .esgst-button {
		background: none;
		border: none;
		font: inherit;
		margin: 0;
		padding: 0;
	}

	.giveaway__links .esgst-button:hover, .giveaway__links .esgst-button:active {
		background: none;
		border: none;
		box-shadow: none;
		text-shadow: none;
	}

	.esgst-restore-entry {
		display: flex;
		justify-content: space-between;
	}

	.esgst-restore-entry >* {
		margin: 0 5px 0;
	}

	.esgst-gv-popout .esgst-panel-flexbox {
		flex-direction: column;
	}

	.esgst-gv-popout .esgst-panel-flexbox .esgst-giveaway-panel {
		text-align: center;
	}

	.esgst-panel-flexbox {
		display: flex;
		justify-content: space-between;
	}

	.esgst-panel-flexbox .esgst-giveaway-panel {
		align-items: center;
		text-align: right;
	}

	.esgst-panel-flexbox .esgst-giveaway-links >* {
		white-space: nowrap;
	}

	.esgst-gesl >* {
		margin-right: 5px;
	}

	.esgst-scb input {
		min-width: 0;
	}

	.esgst-scb i.fa-times {
		cursor: pointer;
		margin-left: 5px;
	}

	.page__heading .esgst-button-container,  .page_heading .esgst-button-container, .esgst-page-heading .esgst-button-container {
		border: none;
		line-height: inherit;
		padding: 0;
		text-shadow: none;
	}

	.page__heading__button.esgst-button, .page_heading_btn.esgst-button {
		border: 1px solid #d2d6e0;
		border-radius: 4px;
		color: #4b72d4;
		cursor: pointer;
		display: block;
		font: 700 14px / 22px "Open Sans", sans-serif;
		padding: 5px 10px;
	}

	.page__heading__button.esgst-button i, .page_heading_btn.esgst-button i {
		margin: 0;
	}

	.esgst-element-ordering-box {
		border: 2px solid #ccc;
		border-radius: 5px;
		padding: 5px;
	}

	.esgst-element-ordering-box >* {
		border: 1px solid #ccc;
		border-radius: 5px;
		cursor: move;
		display: inline-block;
		margin: 5px;
		padding: 5px;
	}

	.esgst-page-heading-buttons {
		background: none;
		border: none;
		margin: 0 !important;
		padding: 0;
	}

		.esgst-page-heading-buttons >* {
		margin-right: 5px;
	}

	.esgst-inline-list >*:not(:last-child) {
		margin-right: 15px;
	}

	.form_list_item_summary_name {
		display: inline-block;
	}

	.esgst-tag-suggestions {
		background-color: #fff;
		border: 1px solid #ccc;
		border-radius: 5px;
		max-height: 200px;
		overflow: auto;
		position: absolute;
		width: 300px;
	}

	.esgst-tag-suggestion {
		cursor: pointer;
		font-weight: bold;
		padding: 5px;
		text-shadow: none;
	}

	.esgst-tag-suggestion:not(:last-child) {
		border-bottom: 1px solid #ccc;
	}

	.esgst-tag-suggestion.esgst-selected {
		background-color: #465670;
		color: #fff;
	}

	.table__row-inner-wrap .esgst-heading-button, .table__row-inner-wrap .esgst-ct-count, .table__row-inner-wrap .esgst-gdttt-button, .table__row-inner-wrap .esgst-tds-button, .row_trade_comments .esgst-heading-button, .row_trade_comments .esgst-ct-count, .row_trade_comments .esgst-gdttt-button, .row_trade_comments .esgst-tds-button {
		margin-left: 3px !important;
	}

	.esgst-gc-panel >*, .esgst-toggle-switch {
		margin-right: 3px !important;
	}

	.esgst-ugd-input {
		background-color: inherit !important;
		border-color: inherit !important;
		color: inherit;
		display: inline-block;
		margin: 0 5px;
		padding: 0 2px !important;
		width: 50px;
	}

	.esgst-hwlc-panel {
		display: flex;
		justify-items: space-between;
	}

	.esgst-hwlc-section {
		margin: 25px;
		width: 300px;
	}

	.esgst-hwlc-section textarea {
		min-height: 200px;
	}

	@keyframes border-blink {
		50% {
			border-color: transparent;
		}
	}

	.esgst-minimize-panel {
		left: -198px;
		position: fixed;
		top: 0;
		width: 200px;
		z-index: 999999999;
	}

	.esgst-minimize-panel:hover {
		padding-left: 198px;
	}

	.esgst-minimize-container {
		background-color: #fff;
		height: 100vh;
		overflow-y: auto;
		padding: 5px;
		width: 188px;
	}

	.esgst-minimize-panel.alert {
		animation: border-blink 1s ease-in-out infinite;
		border-right: 10px solid #ff0000;
		left: -200px;
	}

	.esgst-minimize-panel.alert:hover {
		border: none;
		left: -198px;
	}

	.esgst-minimize-item.alert {
		animation: border-blink 1s ease-in-out infinite;
		border: 2px solid #ff0000;
	}

	:root {
		--esgst-body-bg-color: ${_class_Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].esgst.sg ? '#f0f2f5' : '#ebedf0'};
	}

	.sticky_sentinel {
		left: 0;
		position: absolute;
		right: 0;
		visibility: hidden;
	}

	.esgst-gf-basic-filters {
		display: flex;
		justify-content: space-between;
	}

	.esgst-gf-basic-filters input {
		display: inline-block;
		padding: 2px;
		width: 100px;
	}

	.esgst-gf-basic-filters >* {
		margin: 5px;
	}

	.esgst-gf-number-filters {
		flex: 1;
	}

	.esgst-gf-number-filters >*, .esgst-gf-string-filters >* {
		align-items: center;
		display: flex;
		justify-content: space-between;
	}

	.esgst-gf-boolean-filters {
		column-count: 2;
		flex: 1;
	}

	.esgst-gf-basic-filters + div {
		font-size: 14px;
		font-weight: bold;
	}

	.esgst-gf-legend-panel {
		display: block;
		float: right;
		text-align: right;
		margin-top: 50px;
	}

	.esgst-ns, .esgst-ns * {
		max-width: 206px;
	}

	.esgst-clear-container {
		display: flex;
	}

	.esgst-clear-button {
		align-self: center;
		cursor: pointer;
		padding: 5px 10px;
	}

	.esgst-draggable-trash {
		background-color: #C11B17;
		border-radius: 5px;
		color: #E77471;
		position: absolute;
		text-align: center;
		text-shadow: none;
	}

	.esgst-draggable-trash i {
		font-size: 25px;
		margin: 5px;
	}

	.esgst-qiv-new {
		float: right;
		font-weight: bold;
		margin-right: 10px;
	}

	.esgst-mm-checkbox {
		display: inline-block;
		margin-right: 5px;
	}

	.esgst-mm-checkbox i {
		margin: 0;
	}

	.esgst-mm-popout {
		width: 550px;
	}

	.esgst-textarea-large {
		height: 400px !important;
		overflow-y: auto !important;
	}

	.esgst-mm-popout textarea, .esgst-textarea-small {
		height: 150px !important;
		overflow-y: auto !important;
	}

	.esgst-mm-button-group {
		align-items: center;
		display: flex;
	}

	.esgst-mm-button-group .esgst-button-container {
		display: inline-flex;
	}

	.esgst-mm-button-group .esgst-button {
		flex: 1;
		line-height: 25px;
		margin: 2px;
		padding-bottom: 0;
		padding-top: 0;
	}

	.esgst-mm-headings {
		display: flex;
		font-size: 0;
	}

	.esgst-mm-headings >* {
		background-color: #eee;
		border: 1px solid #ccc;
		cursor: pointer;
		flex: 1;
		font-size: 12px;
		font-weight: bold;
		padding: 5px;
		width: 150px;
	}

	.esgst-mm-headings .esgst-selected {
		background-color: #fff;
		border-bottom: 0;
	}

	.esgst-mm-sections {
		border-bottom: 1px solid #ccc;
		border-left: 1px solid #ccc;
		border-right: 1px solid #ccc;
		padding: 5px;
	}

	.esgst-mm-sections >* {
		display: none;
	}

	.esgst-mm-sections .esgst-selected {
		display: block;
	}

	.esgst-rotate-90 {
		transform: rotate(90deg);
	}

	.esgst-rotate-270 {
		transform: rotate(270deg);
	}

	.esgst-chfl-compact {
		padding: 8px 15px !important;
	}

	.footer__outer-wrap .esgst-chfl-panel, footer .esgst-chfl-panel {
		position: static !important;
	}

	.esgst-chfl-panel {
		position: absolute;
		right: 10px;
	}

	.esgst-chfl-panel i {
		background-color: #fff;
		border: 1px solid #ccc;
		border-radius: 5px;
		color: #555 !important;
		cursor: pointer;
		font-size: 18px !important;
		margin: 0 !important;
		padding: 5px;
		width: auto !important;
	}

	.esgst-chfl-small i {
		font-size: 18px !important;
		width: 36px;
	}

	.esgst-mgc-table * {
		text-align: left;
	}

	.esgst-ochgb {
		display: inline-block;
	}

	.featured__heading .esgst-ochgb i, .featured__heading .esgst-gf-hide-button i, .featured__heading .esgst-gf-unhide-button i, .featured__heading .esgst-gb-button i {
		opacity: .6;
		transition: opacity .2s;
	}

	.featured__heading .esgst-ochgb i:hover, .featured__heading .esgst-gf-hide-button i:hover, .featured__heading .esgst-gf-unhide-button i:hover, .featured__heading .esgst-gb-button i:hover {
		opacity: 1;
	}

	@keyframes esgst-blinker {
		50% { opacity: 0; }
	}

	.esgst-blinking {
		animation: esgst-blinker 1s linear infinite;
	}

	.esgst-qiv-popout {
		max-height: 600px !important;
		overflow: hidden !important;
		width: 600px;
	}

	.esgst-qiv-comments {
		overflow-y: auto;
	}

	.esgst-elgb-button .sidebar__error {
		margin-bottom: 0;
	}

	.esgst-mgc-preview {
		border: 1px solid #ccc;
		padding: 25px;
		width: 600px;
	}

	.esgst-mgc-input {
		display: inline-block;
		text-align: center;
		width: 75px;
	}

	.esgst-relative {
		position: relative;
	}

	.esgst-nm-icon {
		color: #ff0000 !important;
	}

	.esgst-disabled {
		cursor: default !important;
		opacity: 0.5;
	}

	.esgst-changelog img {
		max-width: 98%;
	}

	.esgst-radb-button {
		cursor: pointer;
		display: inline-block;
	}

	.esgst-radb-button.block_header {
		float: right;
		line-height: 33px;
		margin: 0 0 0 5px;
	}

	.esgst-radb-button.block_header > i {
		color: #bbb;
	}

	:not(.page__heading) > .esgst-radb-button:not(.block_header) {
		margin-left: 5px;
	}

	.esgst-cfh-preview {
		margin: 5px 0;
		text-align: left;
	}

	.esgst-qgs-container i {
		color: #AAB5C6;
	}

	.esgst-qgs-container {
		align-items: center;
		background-color: #fff;
		border-color: #c5cad7 #dee0e8 #dee0e8 #d2d4e0;
		border-radius: 4px;
		border-style: solid;
		border-width: 1px;
		display: flex;
		margin-right: 5px;
		padding: 5px 10px;
	}

	.esgst-qgs-container-expanded {
		position: ${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('qgs_index') === '0' ? 'absolute' : 'static'};
	}

	.esgst-qgs-container-expanded .esgst-qgs-input {
		width: 300px;
	}

	.esgst-qgs-container-expanded + .nav__button-container {
		margin-left: 40px;
	}

	.esgst-qgs-input {
		border: 0 !important;
		height: 100%;
		line-height: normal !important;
		padding: 0 !important;
		width: 0;
	}

	.esgst-sgc-results .table__row-outer-wrap {
		padding: 10px 5px;
	}

	.esgst-glwc-results {
		display: flex;
	}

	.esgst-glwc-results >* {
		flex: 1;
		margin: 10px;
	}

	.esgst-glwc-heading {
		font-family: "Open Sans";
		font-size: 25px;
		margin: 5px;
		text-align: center;
	}

	.esgst-stbb-button, .esgst-sttb-button {
		cursor: pointer;
	}

	.esgst-stbb-button-fixed, .esgst-sttb-button-fixed {
		bottom: ${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('ff') ? 49 : 5}px;
		background-color: #fff;
		border: 1px solid #d2d6e0;
		border-radius: 4px;
		color: #4B72D4;
		padding: 5px 15px;
		position: fixed;
		right: 5px;
	}

	.esgst-stbb-button:not(.esgst-hidden) + .esgst-sttb-button {
		bottom: 79px;
	}

	.esgst-bold {
		font-weight: bold;
	}

	.esgst-italic {
		font-style: italic;
	}

	.esgst-es-page-divider {
		margin: 5px 0;
	}

	.comment__parent .esgst-cerb-reply-button, .comment__child .esgst-cerb-reply-button {
		margin-top: 54px;
		position: absolute;
		text-align: center;
		width: 44px;
	}

	.comment_outer .esgst-cerb-reply-button, .comment_inner .esgst-cerb-reply-button {
		margin-left: 21px;
		margin-top: 34px;
		position: absolute;
		text-align: center;
		width: 24px;
	}

	.esgst-page-heading {
		display: flex;
		align-items: flex-start;
		word-wrap: break-word;
	}

	.esgst-page-heading >* {
		background-image: linear-gradient(#fff 0%, rgba(255,255,255,0.4) 100%);
		display: flex;
		padding: 5px 10px;
		border: 1px solid #d2d6e0;
		border-radius: 4px;
		color: #4B72D4;
		font: 700 14px/22px "Open Sans", sans-serif;
	}

	.esgst-page-heading i {
		line-height: 22px;
	}

	.esgst-page-heading >*:not(.page__heading__breadcrumbs) {
		align-items: center;
	}

	.esgst-page-heading >*:not(:last-child) {
		margin-right: 5px;
	}

	.esgst-form-row {
		margin-bottom: 20px;
	}

	.esgst-form-row:first-of-type {
		margin-top: 14px;
	}

	.esgst-form-heading {
		align-items: center;
		display: flex;
		margin-bottom: 5px;
	}

	.esgst-form-heading > div:not(:last-child) {
		margin-right: 10px;
	}

	.esgst-form-heading-number {
		font: 300 14px "Open Sans", sans-serif;
		color:#6b7a8c;
	}

	.esgst-form-heading-text {
		font: 700 14px "Open Sans", sans-serif;
		color: #4B72D4;
	}

	.esgst-form-row-indent {
		padding: 3px 0 3px 20px;
		margin-left: 5px;
		border-left: 1px solid #d2d6e0;
		box-shadow: 1px 0 0 rgba(255,255,255,0.3) inset;
	}

	.esgst-form-sync {
		display: flex;
	}

	.esgst-form-sync-data {
		flex: 1;
	}

	.esgst-notification {
		border: 1px solid;
		border-radius: 4px;
		padding: 0 15px;
		font-size: 11px;
		line-height: 32px;
		overflow: hidden;
	}

	.esgst-notification a {
		text-decoration: underline;
	}

	.esgst-notification-success {
		background-image: linear-gradient(#f7fcf2 0%, #e7f6da 100%);
		border-color: #C5E9A5;
		color:#8fa47b;
	}

	.esgst-notification-warning {
		background-image: linear-gradient(#F6F6E6 0px, #F5F5DF 20px);
		border-color: #EDE5B2;
		color: #a59d7c;
	}

	.esgst-user-icon {
		display: inline-block;
		line-height: normal;
		margin: 0 5px 0 0;
	}

	.esgst-user-icon i {
		border: 0;
		line-height: normal;
		margin: 0;
		text-shadow: none !important;
	}

	.esgst-whitelist {
		color: #556da9 !important;
	}

	.esgst-blacklist {
		color: #a95570 !important;
	}

	.esgst-positive {
		color: #96c468 !important;
	}

	.esgst-negative {
		color: #ec8583 !important;
	}

	.esgst-unknown {
		color: #77899a !important;
	}

	.esgst-ugd-table .table__rows .table__row-outer-wrap:hover {
		background-color: rgba(119, 137, 154, 0.1);
	}

	.esgst-ugd-table .table__column--width-small {
		min-width: 0;
		width: 12%;
	}

	.markdown {
		word-break: break-word;
	}

	.esgst-busy >* {
		opacity: 0.2;
	}

	.comment__actions .esgst-rml-link {
		margin: 0 0 0 10px;
	}

	.esgst-settings-menu .form__sync-default {
		margin: 0 5px;
	}

	.esgst-uh-popup a {
		border-bottom: 1px dotted;
	}

	.esgst-auto-sync {
		display: inline-block;
		margin: 0 5px 2px;
		padding: 0 2px;
		width: 50px;
	}

	.esgst-ap-popout .featured__table__row__left:not(.esgst-uh-title), .esgst-mr-reply, .esgst-mr-edit, .esgst-mr-delete, .esgst-mr-undelete {
		margin: 0 10px 0 0;
	}

	.esgst-ugd-button {
		cursor: pointer;
		display: inline-block;
	}

	.esgst-cfh-popout {
		font: 700 12px "Open Sans", sans-serif;
	}

	.esgst-cfh-panel span >:first-child >* {
		margin: 0 !important;
	}

	.esgst-cfh-popout input {
		width: auto;
	}

	.esgst-namwc-highlight {
		font-weight: bold;
	}

	.esgst-iwh-icon {
		margin: 0 0 0 5px;
	}

	.esgst-ap-suspended >* {
		color: #e9202a;
	}

	.esgst-ap-popout {
		border: none !important;
		border-radius: 5px;
		box-shadow: 0 0 10px 2px hsla(0, 0%, 0%, 0.8);
		min-width: 400px;
		padding: 0 !important;
		text-shadow: none;
	}

	.ui-tooltip {
		z-index: 99999;
	}

	.esgst-ap-popout .featured__outer-wrap:not(.esgst-uh-box) {
		border-radius: 5px;
		padding: 5px;
		width: auto;
		white-space: normal;
	}

	.esgst-ap-popout .featured__inner-wrap {
		align-items: flex-start;
		padding: 0 5px 0 0;
	}

	.esgst-ap-popout .featured__heading {
		margin: 0;
	}

	.esgst-ap-popout .featured__heading__medium {
		font-size: 18px;
	}

	.esgst-ap-link {
		width: 100px;
	}

	.esgst-ap-link .global__image-outer-wrap--avatar-large {
		box-sizing: content-box !important;
		height: 64px !important;
		margin: 5px;
		width: 64px !important;
	}

	.esgst-ap-popout .global__image-outer-wrap--avatar-large:hover {
		background-color: hsla(0, 0%, 25%, 0.2) !important;
	}

	.esgst-ap-link .global__image-inner-wrap {
		background-size: cover !important;
	}

	.esgst-ap-popout .sidebar__shortcut-outer-wrap {
		margin: 10px 0;
	}

	.esgst-ap-popout .sidebar__shortcut-inner-wrap i {
		height: 18px;
		font-size: 12px;
	}

	.esgst-ap-popout .sidebar__shortcut-inner-wrap * {
		line-height: 18px;
		vertical-align: middle;
	}

	.esgst-ap-popout .sidebar__shortcut-inner-wrap img {
		height: 16px;
		vertical-align: baseline !important;
		width: 16px;
	}

	.esgst-ap-popout .featured__table {
		display: inline-block;
		width: 100%;
	}

	.esgst-ap-popout .featured__table__row {
		padding: 2px;
	}

	.esgst-ap-popout .featured__table__row:nth-child(n + 3) {
		margin-left: -95px;
	}

	.esgst-ap-popout .featured__table__row:last-of-type .featured__table__row__right * {
		font-size: 11px;
	}

	.esgst-ct-comment-button {
		cursor: pointer;
	}

	.popup__keys__list .esgst-ggl-member, .esgst-dh-highlighted, .esgst-dh-highlighted.table__row-outer-wrap, .esgst-idb-highlight, .esgst-idb-highlight.table__row-outer-wrap {
		background-color: rgba(150, 196, 104, 0.2) !important;
		padding: 5px !important;
	}

	.esgst-error-button, .esgst-error-button >*:hover {
		background-color: rgba(236, 133, 131, 0.8) !important;
		background-image: none !important;
	}

	.esgst-gb-highlighted.ending i {
		color: rgba(236, 133, 131, 0.8) !important;
	}

	.esgst-gb-highlighted.started i {
		color: rgba(150, 196, 104, 0.8) !important;
	}

	.esgst-gb-highlighted.ending.started i {
		color: rgba(193, 165, 118, 0.8) !important;
	}

	.esgst-ct-visited {
		opacity: 0.5;
	}

	.esgst-ct-visited:hover {
		opacity: 1;
	}

	.esgst-ct-comment-read {
		opacity: 0.5;
	}

	.esgst-ct-comment-read:hover {
		opacity: 1;
	}

	.esgst-ct-comment-read:hover, .esgst-ct-visited:hover {
		background-color: rgba(119, 137, 154, 0.1) !important;
	}

	.esgst-gf-hide-button, .esgst-gf-unhide-button, .esgst-gb-button, .esgst-gdttt-button, .esgst-tds-button {
		cursor: pointer;
		display: inline-block;
		margin: 0 5px 0 0;
	}

	.esgst-codb-button, .esgst-dh-button, .esgst-idb-button, .esgst-df-button {
		display: inline-block;
		margin: 0 5px 0 0;
		padding: 0;
	}

	.page__heading .esgst-codb-button >*, .page__heading .esgst-dh-button >*, .page__heading .esgst-idb-button >*, .page__heading .esgst-df-button >* {
		padding: 5px 10px;
	}

	.esgst-pm-button {
		margin-left: -17px;
		position: absolute;
		top: calc(50% - 7px);
	}

	.esgst-dh-highlighted .esgst-pm-button, .esgst-idb-highlight .esgst-pm-button {
		margin-left: -22px;
	}

	.page__heading .esgst-pm-button {
		display: inline-block;
		margin: 0 5px 0 0;
		padding: 0;
		position: static;
	}

	.page__heading .esgst-pm-button >* {
		padding: 5px 10px;
	}

	.esgst-adots .esgst-pm-button {
		margin-left: -58px;
	}

	.comment__actions .esgst-ct-comment-button {
		margin: 0 0 0 10px;
	}

	.comment__actions >:first-child + .esgst-ct-comment-button {
		margin: 0;
	}

	.esgst-ct-comment-button >:not(:last-child) {
		margin: 0 10px 0 0;
	}

	.esgst-cfh-panel {
		margin: 0 0 2px;
		position: sticky;
		text-align: left;
	}

	.esgst-cfh-panel >* {
		background-color: #fff;
		border: 1px solid #ccc;
		border-radius: 5px;
		cursor: pointer;
		display: inline-block;
		margin: 1px;
		opacity: 0.5;
		padding: 5px;
	}

	.esgst-cfh-panel >*:hover {
		opacity: 1;
	}

	.esgst-cfh-panel span >:not(:first-child), .esgst-ded-status {
		display: block;
	}

	.esgst-cfh-panel span i {
		line-height: 22px;
	}

	.esgst-cfh-panel .form__saving-button {
		display: inline-block;
		margin: 5px;
		min-width:0;
	}

	.esgst-cfh-panel table {
		display: block;
		max-height: 200px;
		max-width: 375px;
		overflow: auto;
	}

	.esgst-cfh-panel table td:first-child {
		min-width: 25px;
		text-align: center;
	}

	.esgst-cfh-panel table td:not(:first-child) {
		min-width: 75px;
		text-align: center;
	}

	.esgst-cfh-emojis {
		display: block !important;
		font-size: 18px;
		max-height: 200px;
		min-height: 30px;
		overflow: auto;
		text-align: center;
	}

	.esgst-cfh-emojis >* {
		cursor: pointer;
		display: inline-block;
		margin: 2px;
	}

	.esgst-cfh-popout {
		white-space: normal;
		width: 300px;
	}

	.esgst-mpp-popup {
		position: fixed !important;
	}

	.esgst-mpp-visible {
		padding: 0;
	}

	.esgst-mpp-hidden {
		display: none;
		max-height: 75%;
		overflow: auto;
		padding: 15px;
		position: absolute;
		width: 75%;
	}

	.esgst-ueg {
		opacity: 1 !important;
	}

	.esgst-fh {
		height: auto !important;
		position: sticky;
		top: 0;
		z-index: 1000 !important;
	}

	.esgst-fs {
		overflow-y: auto;
		position: sticky;
	}

	.esgst-fs .sidebar__mpu {
		display: none !important;
	}

	.esgst-fmph {
		background-color: var(--esgst-body-bg-color);
		padding: 5px 0;
		position: sticky;
		z-index: 998;
	}

	.esgst-ff {
		background-color: inherit;
		bottom: 0;
		padding: 0;
		position: sticky;
		z-index: 999;
	}

	.esgst-ff.esgst-thin .footer_upper, .esgst-ff.esgst-thin .footer_columns {
		display: none;
	}

	.esgst-ff.esgst-thin .footer_lower, .esgst-ff.esgst-thin .footer_lower .footer_inner_wrap {
		border-top: none;
		box-shadow: none;
		padding: 12px 25px;
	}

	.esgst-ff.esgst-thin .footer_upper + .footer_lower .footer_inner_wrap {
		padding: 0px;
	}

	footer .footer_sites {
		gap: 15px;
	}

	.esgst-sgac-button, .esgst-sgg-button {
		margin: 0 5px 0 0;
	}

	.esgst-ct-count {
		color: #e9202a;
		font-weight: bold;
	}

	.esgst-uh-box {
		background: linear-gradient(to bottom, #555, #222);
		border: 1px solid #888;
		margin: 5px 0 0;
		padding: 15px;
		position: absolute;
		text-align: center;
	}

	.esgst-uh-title {
		color: rgba(255, 255, 255, 0.6);
		font-weight: bold;
		margin: 0 0 15px;
	}

	.esgst-uh-list {
		color: rgba(255, 255, 255, 0.4);
	}

	.esgst-ugd-button, .esgst-wbc-button, .esgst-namwc-button, .esgst-nrf-button {
		cursor: pointer;
		margin: 0 0 0 5px;
	}

	.esgst-luc-value {
		margin: 0 0 0 5px;
	}

	.esgst-sgpb-container {
		display: flex;
	}

	.esgst-sgpb-container >* {
		flex: 1;
	}

	.esgst-sgpb-button {
		background-image: linear-gradient(rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.3) 100%);
		border-color: #dde2ea #cdd4df #cbd1dc #d6dbe7;
		color: #6e7585;
		text-shadow: 1px 1px 1px #fff;
		transition: opacity 0.5s;
		border-radius: 3px;
		font: 700 13px 'Open Sans', sans-serif;
		margin: 0 0 0 5px;
		padding: 7px 15px;
		display: flex;
		align-items: center;
		border-width: 1px;
		border-style: solid;
		text-decoration: none;
	}

	.esgst-sgpb-button:active {
		background-image: linear-gradient(#e1e7eb 0%, #e6ebf0 50%, #ebeff2 100%) !important;
		box-shadow: 2px 2px 5px #ccd4db inset;
		text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.6);
		margin: 2px 0 0 7px !important;
		border: 0;
	}

	.esgst-sgpb-button:hover {
		background-image: linear-gradient(rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.3) 100%);
	}

	.esgst-sgpb-button i {
		height: 14px;
		margin: 0 10px 0;
		width: 14px;
	}

	.esgst-sgpb-button img {
		height: 14px;
		vertical-align: baseline;
		width: 14px;
	}

	.esgst-stpb-button img {
		vertical-align: top;
	}

	.esgst-gh-highlight, .esgst-green-highlight {
		background-color: rgba(150, 196, 104, 0.2);
	}

	.esgst-pgb-button, .esgst-gf-button {
		border: 1px solid #d2d6e0;
		border-top: none;
		background-color: #e1e6ef;
		background-image: linear-gradient(rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0) 100%);color: #6b7a8c;
		cursor: pointer;
		margin-bottom: 15px;
		padding: 3px;
		text-align: center;
		border-radius: 0 0 4px 4px;
	}

	.esgst-gf-button {
		margin-bottom: 0 !important;
	}

	.esgst-pgb-button:hover, .esgst-gf-button:hover {
		background-image:linear-gradient(rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0) 100%);
	}

	.esgst-gm-giveaway {
		background-color: #fff;
		border: 1px solid;
		border-radius: 4px;
		cursor: pointer;
		display: inline-block;
		margin: 5px 2px;
		padding: 2px 5px;
	}

	.esgst-feature-description {
		background-color: #fff;
		color: #465670;
		padding: 10px;
		width: 420px;
		border-radius: 4px;
	}

	.esgst-feature-description img {
		max-width: 400px;
	}

	.esgst-feature-description.esgst-popout > a {
	    line-height: 18px;
		margin: 2px;
	}

	.esgst-gm-giveaway.error {
		background-color: rgba(236, 133, 131, 0.5);
	}

	.esgst-gm-giveaway.success {
		background-color: rgba(150, 196, 104, 0.5);
	}

	.esgst-gm-giveaway.connected {
		text-decoration: line-through;
	}

	.esgst-gm-giveaway.selected {
		background-color: rgba(104, 150, 196, 0.5)
	}

	.esgst-gts-section >*, .esgst-gm-section >* {
		margin: 5px 0;
	}

	.esgst-gm-section .esgst-button {
		margin: 5px;
	}

	.esgst-button.sidebar__entry-delete, .esgst-button.sidebar__error {
		display: inline-block;
	}

	.sidebar .esgst-button {
		margin-bottom: 5px;
		display:block;
	}

	.sidebar__search-container {
		background-color: #fff;
		border-radius: 4px;
		border-width: 1px;
		border-style: solid;
		border-color: #c5cad7 #dee0e8 #dee0e8 #d2d4e0;
		line-height: 1.5em;
		padding: 5px 10px;
	}

	.esgst-button-group {
		display: block;
	}

	.esgst-button-group >* {
		display: inline-block;
	}

	.esgst-button-group >*:not(:first-child) {
		margin-left: 5px;
	}

	.esgst-ggl-panel {
		background: none;
		border: none;
		box-shadow: none !important;
		color: #6b7a8c;
		font-size: 12px;
		padding: 5px;
		white-space: unset;
	}

	.esgst-ggl-panel >* {
		display: inline-block;
	}

	.esgst-ggl-panel >*:not(:last-child) {
		margin-right: 10px;
	}

	.esgst-ggl-panel a:last-child {
		border-bottom: 1px dotted;
	}

	.esgst-ggl-panel .table_image_avatar {
		cursor: pointer;
		display: inline-block;
		height: 12px;
		width: 12px;
		vertical-align: middle;
	}

	.esgst-ggl-member {
		font-weight: bold;
	}

	.esgst-ggl-heading {
		font-weight: bold;
		line-weight: 22px;
		margin: 10px;
	}

	.esgst-gcl-popout, .esgst-ggl-popout {
		padding: 0 !important;
	}

	.esgst-gcl-popout .table__row-outer-wrap, .esgst-ggl-popout .table__row-outer-wrap {
		padding: 10px 5px;
	}

	.esgst-hidden-buttons {
		padding: 2px !important;
	}

	.esgst-popout {
		background-color: #fff;
		border: 1px solid #d2d6e0;
		border-radius: 4px;
		color: #465670;
		left: 0;
		overflow: auto;
		padding: 10px;
		position: absolute;
		top: 0;
		z-index: 999;
	}

	.esgst-aic-carousel {
		align-items: center;
		cursor: default !important;
		display: flex;
		justify-content: center;
	}

	.esgst-aic-carousel >:last-child {
		border: 5px solid #fff;
		border-radius: 5px;
		max-width: 90%;
	}

	.esgst-aic-carousel img {
		display: block;
	}

	.esgst-aic-panel {
		color: #fff;
		position: absolute;
		text-align: center;
		top: 25px;
	}

	.esgst-aic-left-button, .esgst-aic-right-button {
		cursor: pointer;
		display: inline-block;
		margin: 10px;
		text-align: center;
		width: 25px;
	}

	.esgst-aic-left-button i, .esgst-aic-right-button i {
		font-size: 25px;
	}

	.esgst-aic-source {
		font-weight: bold;
		margin-top: 10px;
		text-decoration: underline;
	}

	.esgst-popup-modal {
		background-color: rgba(60, 66, 77, 0.7);
		bottom: 0;
		cursor: pointer;
		left: 0;
		position: fixed;
		right: 0;
		top: 0;
	}

	.esgst-popup-large {
		width: 75%;
	}

	.esgst-popup-layer {
		align-items: ${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('static_popups') ? 'baseline' : 'center'};
		bottom: 0;
		display: flex;
		justify-content: ${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('static_popups') ? 'left' : 'center'};
		left: 0;
		padding: 50px;
		position: fixed;
		right: 0;
		top: 0;
	}

	.esgst-popup {
		background-color: var(--esgst-body-bg-color);
		border-radius: 4px;
		color: #465670;
		display: flex;
		flex-direction: column;
		padding: 25px;
		position: relative;
		text-align: center;
		text-shadow: 1px 1px rgba(255,255,255,0.94);
		transition: 500ms ease;
		z-index: 1;
	}

	.esgst-popout li:before, .esgst-popup li:before {
		margin-left: 0;
		padding-right: 10px;
		position: static;
		width: auto;
		text-align: left;
	}

	.esgst-popup-description .page__heading, .esgst-popup-description .page_heading {
		padding: 0;
	}

	.esgst-popup-description .page__heading, .esgst-popup-description .page_heading, .esgst-popup-description .esgst-notification-bar, .esgst-popup-description .esgst-gf-container {
		margin: 0 0 5px 0 !important;
	}

	.esgst-popup-description >*:not(.esgst-tag-suggestions):not(.page__heading):not(.page_heading):not(.esgst-notification-bar):not(.esgst-gf-container), .esgst-popup-scrollable >* {
		margin: 10px 0 0 !important;
	}

	.esgst-popup-description >*:not(.esgst-tag-suggestions):not(.page__heading):not(.page_heading):not(.esgst-notification-bar):not(.esgst-gf-container).esgst-button.form__submit-button, .esgst-popup-description >*:not(.esgst-tag-suggestions):not(.page__heading):not(.page_heading):not(.esgst-notification-bar):not(.esgst-gf-container).esgst-button.btn_action {
		margin-right: 8px !important;
	}

	.esgst-popup-actions {
		color: #4b72d4;
		margin-top: 15px;
	}

	.esgst-popup-actions a {
		border-bottom: 1px dotted;
		box-shadow: 0 1px 0 #fff;
		display: inline-block;
		cursor: pointer;
	}

	.esgst-popup-actions >*, .esgst-popup .esgst-button {
		display: inline-block;
	}

	.esgst-popup-actions >*:not(:last-child) {
		margin-right: 15px;
	}

	.esgst-popup-scrollable {
		overflow: auto;
	}

	.esgst-popup .popup__keys__list {
		max-height: none;
	}

	.esgst-heading-button {
		display: inline-block;
		cursor: pointer;
	}

	.esgst-popup-heading {
		display: flex;
		align-items: center;
		margin-bottom: 5px;
	}

	.esgst-popup-icon {
		font-size: 25px;
		margin-right: 10px;
	}

	.esgst-popup-title {
		font: 300 18px 'Open Sans', sans-serif;
	}

	.esgst-popup-title span {
		font-weight: bold;
	}

	.esgst-text-left {
		text-align: left;
	}

	.esgst-text-center {
		text-align: center;
	}

	.esgst-hidden {
		display: none !important;
	}

	.esgst-clickable {
		cursor: pointer;
	}

	.fa img {
		height: 14px;
		width: 14px;
		vertical-align: middle;
	}

	.nav__left-container .fa img {
		vertical-align: baseline;
	}

	.nav__left-container .nav__button-container--notification .nav__button {
		padding: 0 0 0 20px;
	}

	.esgst-checkbox, .esgst-hb-update, .esgst-hb-changelog {
		cursor: pointer;
	}

	.esgst-sm-small-number {
		font-size: 12px;
		display: inline-block;
	}

	.esgst-toggle-switch-container {
		align-items: center;
		display: flex;
		margin: 2px;
	}

	.esgst-toggle-switch-container.inline {
		display: inline-flex;
	}

	.esgst-toggle-switch-container i {
		margin: 0 5px;
	}

	.page__heading .esgst-toggle-switch-container.inline, .page_heading .esgst-toggle-switch-container.inline, .esgst-page-heading .esgst-toggle-switch-container.inline {
		height: 16px;
		margin: 0 2px;
		line-height: normal;
		vertical-align: middle;
	}

	.esgst-toggle-switch {
		position: relative;
		width: 26px;
		height: 14px;
	}

	.esgst-toggle-switch input {
		display: none !important;
	}

	.esgst-toggle-switch-slider {
		border-radius: 20px;
		position: absolute;
		cursor: pointer;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background-color: #ccc;
		-webkit-transition: .4s;
		transition: .4s;
	}

	.esgst-toggle-switch-slider:before {
		border-radius: 50%;
		position: absolute;
		content: "";
		height: 12px;
		width: 12px;
		left: 1px;
		bottom: 1px;
		background-color: white;
		-webkit-transition: .4s;
		transition: .4s;
	}

	input:checked + .esgst-toggle-switch-slider {
		background-color: #4B72D4;
	}

	input:focus + .esgst-toggle-switch-slider {
		box-shadow: 0 0 1px #4B72D4;
	}

	input:checked + .esgst-toggle-switch-slider:before {
		-webkit-transform: translateX(12px);
		-ms-transform: translateX(12px);
		transform: translateX(12px);
	}

	.esgst-adots, .esgst-rbot {
		margin-bottom: 25px;
	}

	.esgst-float-left {
		float: left;
	}

	.esgst-float-right {
		float: right;
	}

	.esgst-clear {
		clear: both;
	}

	.esgst-rbot .reply_form .btn_cancel {
		display: none;
	}

	.esgst-aas-button {
		cursor: pointer;
		display: inline-block;
	}

	.esgst-es-page-heading {
		margin-top: 25px;
	}

	.esgst-gc-border {
		display: flex;
		height: 5px;
		margin-left: 5px;
		width: ${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('ib') ? '186px' : '174px'};
	}

	.esgst-gc-border >* {
		flex: 1;
	}

	.esgst-gc-panel {
		text-align: left;
	}

	.esgst-gc-panel a {
		text-decoration: none;
	}

	.esgst-gc-panel-inline {
		display: inline-block;
		margin: 0 0 0 5px;
	}

	.esgst-gch-highlight, .esgst-gc:not(.giveaway__column):not(.featured__column) {
		border-radius: 4px;
		display: inline-block;
		font-size: 10px;
		line-height: 10px;
		margin: 5px 0;
		padding: 2px 3px;
		text-shadow: none;
	}

	.esgst-gch-highlight {
		font-size: 14px;
		line-height: 14px;
		margin: 0 5px;
	}

	.esgst-glh-highlight {
		background-image: none !important;
		text-shadow: none;
	}

	a.esgst-gc-genres {
		max-width: 150px;
		overflow: hidden;
		text-overflow: ellipsis;
		vertical-align: middle;
		white-space: nowrap;
	}

	.esgst-popup .esgst-gf-container {
		top: 0;
	}

	.esgst-gf-container {
		text-align: left;
		z-index: 998;
	}

	.esgst-gf-container:not(.esgst-popup-scrollable) {
		background-color: #E8EAEF;
		border-radius: 4px;
	}

	.esgst-gf-Shared.esgst-popup-scrollable {
		min-width: 650px;
	}

	.esgst-gf-filters {
		display: flex;
		justify-content: space-between;
		overflow: auto;
		position: relative;
	}

	.esgst-gf-left-panel {
		flex: 1;
		max-height: 400px;
		overflow-y: auto;
	}

	.esgst-gf-right-panel .form__input-small {
		width: 100px !important;
	}

	.esgst-gf-filters >* {
		margin: 5px;
	}

	.esgst-gf-preset-panel {
		margin: 5px;
		text-align: right;
	}

	.esgst-gf-preset-panel >* {
		margin: 5px;
	}

	.esgst-gf-filter-count {
		background-color: #ddd;
		border-radius: 5px;
		font-size: 10px;
		padding: 2px;
		vertical-align: middle;
	}

	.esgst-gf-button {
		border-top: 1px;
	}

	.esgst-wbh-highlight {
		border: none !important;
		border-radius: 4px;
		padding: 2px 5px;
		text-shadow: none;
	}

	.page__heading__breadcrumbs .esgst-wbh-highlight {
		padding: 0 2px;
	}

	.esgst-sm-additional-option >*:not(.esgst-sm-additional-option) {
		align-items: center;
		display: flex;
		margin: 5px 0;
	}

	.esgst-sm-additional-option >* input, .esgst-sm-additional-option >* select, .esgst-sm-additional-option >* textarea {
		flex: 1;
	}

	.esgst-sm-additional-option >* >* {
		margin: 0 5px;
	}

	.esgst-ged-icon {
		margin: 0 0 0 10px;
	}

	.esgst-pgb-container {
		border-radius: 0 !important;
		margin: 0! important;
	}

	.esgst-gf-box {
		background-color: #E8EAEF;
		border: 1px solid #d2d6e0;
		border-radius: 0 !important;
		margin: 0! important;
		padding: 0 15px;
	}

	.esgst-gf-box.warning, .esgst-gf-button.warning {
		background-color: #FF0000;
		color: #FFFFFF;
		font-weight: bold;
		text-shadow: none;
	}

	.esgst-gf-box.warning .markdown li:before {
		color: #FFFFFF;
	}

	.esgst-gr-button {
		cursor: pointer;
		display: inline-block;
	}

	.esgst-egh-icon {
		cursor: pointer;
	}

	.giveaway__row-outer-wrap .esgst-egh-button, .giveaway__row-outer-wrap .esgst-gr-button, .table__row-outer-wrap .esgst-egh-button, .table__row-outer-wrap .esgst-egh-button, .table__row-outer-wrap .esgst-gr-button {
		margin-right: 5px;
	}

	p.table__column__heading {
		display: inline-block;
	}

	.esgst-giveaway-links {
		margin: 2px;
	}

	.esgst-gv-box .esgst-giveaway-panel:empty {
		height: 0;
		width: 0;
	}

	.esgst-giveaway-panel:empty {
		height: 25px;
		width: 250px;
	}

	.esgst-giveaway-panel.giveaway__columns {
		margin: 2px;
	}

	.giveaway__row-outer-wrap .esgst-button-container {
		border: 0;
		padding: 0;
	}

	.giveaway__row-outer-wrap .esgst-button {
		line-height: inherit;
		margin: 0;
	}

	.esgst-giveaway-panel >:first-child {
		margin: 0;
	}

	.esgst-giveaway-panel >*:not(:first-child) {
		margin: 0 0 0 5px;
	}

	.esgst-gv-popout .esgst-gwc, .esgst-gv-popout .esgst-gwr, .esgst-gv-popout .esgst-gptw, .esgst-gv-popout .esgst-ttec {
		display: inline-block;
		margin: 0 !important;
		padding: 0 5px !important;
		width: 67px !important;
		vertical-align: top;
	}

	.esgst-gv-popout .esgst-gp-button {
		display: inline-block;
		margin: 0 !important;
		width: auto !important;
		vertical-align: top;
	}

	.esgst-gv-popout .esgst-gp-button >* {
		padding: 0 5px !important;
		width: 67px !important;
	}

	.esgst-giveaway-panel .form__submit-button, .esgst-giveaway-panel .form__saving-button {
		margin-bottom: 0;
		min-width: 0;
	}

	.esgst-ged-source {
		font-weight: bold;
		margin: 5px 0;
	}

	.table__column--width-small {
		width: 8%;
	}

	.sidebar .table__row-outer-wrap {
		padding: 5px 0;
	}

	.esgst-adots-tab-heading {
		background-color: #2f3540;
		border-top-left-radius: 5px;
		border-top-right-radius: 5px;
		color: #fff;
		cursor: pointer;
		display: inline-block;
		opacity: 0.5;
		padding: 5px 10px;
		text-shadow: none;
	}

	.esgst-adots-tab-heading.esgst-selected {
		opacity: 1;
	}

	.sidebar .esgst-adots {
		margin-bottom: 15px;
		max-height: 300px;
		max-width: 336px;
		overflow: auto;
	}

	.sidebar .esgst-adots .esgst-dh-highlighted, .sidebar .esgst-adots .esgst-idb-highlighted {
		padding: 0 !important;
		padding-bottom: 5px !important;
	}

	.sidebar .esgst-adots .table__column__heading, .esgst-adots .homepage_table_column_heading {
		display: inline-block;
		max-width: 225px;
		overflow: hidden;
		text-overflow: ellipsis;
		vertical-align: middle;
		white-space: nowrap;
	}

	.esgst-ns .esgst-adots .table__column__heading, .esgst-ns .esgst-adots .homepage_table_column_heading {
		max-width: 100px;
	}

	.sidebar .esgst-adots .table__row-outer-wrap {
		padding: 3px 0 !important;
		border: 0;
		box-shadow: none;
	}

	.sidebar .esgst-adots .table__row-inner-wrap {
		display: block;
	}

	.sidebar .esgst-adots .table__row-inner-wrap >*:not(:last-child) {
		display: inline-block;
	}

	.table__column__secondary-link {
		border-bottom: 1px dotted;
		box-shadow: 0 1px 0 rgba(255, 255, 255, .3);
		color: #4b72d4;
	}

	.form__row:first-of-type {
		margin-top: 14px;
	}

	.form__row {
		margin-bottom: 20px;
	}

	.form__heading {
		align-items: center;
		display: flex;
		margin-bottom: 5px;
	}

	.form__heading>div:not(:last-child) {
		margin-right: 10px;
	}

	.form__heading__number, .form__heading__optional {
		font: 300 14px "Open Sans", sans-serif;
		color: #6b7a8c;
	}

	.form__heading__text {
		color: #4b72d4;
		font: 700 14px "Open Sans", sans-serif;
	}

	.form__row__indent {
		border-left: 1px solid #d2d6e0;
		box-shadow: 1px 0 0 rgba(255, 255, 255, .3) inset;
		margin-left: 5px;
		padding: 3px 0 3px 20px;
	}

	.icon_to_clipboard {
		color: #4b72d4;
		cursor: pointer;
		margin-right: 5px;
	}

	.esgst-gv-icons [data-draggable-id="elgb"]:not(.esgst-button-set):not(.esgst-button-container) {
		font-size: 12px;
		line-height: 16px;
		padding: 0 8px;
	}

	.esgst-gv-icons [data-draggable-id="elgb"]:not(.esgst-button-set):not(.esgst-button-container).form__saving-button.is-disabled {
		margin-bottom: -2px;
		max-width: 8.5ch;
		overflow: hidden;
		padding: 0 4px;
		text-overflow: ellipsis;
		white-space: nowrap;
	}

	.esgst-gv-icons [data-draggable-id="elgb"]:not(.esgst-button-set):not(.esgst-button-container) i {
		font-size: 12px;
		vertical-align: baseline;
	}

	.esgst-popup .esgst-idb-button {
		display: none;
	}

	.esgst-popup .esgst-df-button + .esgst-idb-button {
		display: inline-block !important;
	}

	.fanatical_container, .bundle_container {
		font-size: 12px;
		text-align: left;
	}

	.esgst-fmph .page_heading_btn_container {
		z-index: 1000;
	}

	.esgst-fmph .page_heading_btn_dropdown.is_selected + .dropdown .dropdown_btn {
		padding: 4px 15px;
	}

	.esgst-popup-description.esgst-text-left select, .esgst-popup-description.esgst-text-left input, .esgst-popup select, .esgst-auto-sync, .esgst-cfh-popout input, .esgst-switch-input {
		border-radius: 4px;
		border: 1px solid #d2d6e0;
		font: inherit;
		line-height: 1.5em;
	}

	header.large ~ .esgst-popup-layer .esgst-popup .esgst-button i, header.small ~ .esgst-popup-layer .esgst-popup .esgst-button i {
		margin-right: 3px;
		vertical-align: baseline;
	}

	.page_heading .esgst-button-container > .page_heading_btn.esgst-button i {
		line-height: 22px;
		margin: 0 !important;
	} 

	header ~ .esgst-popup-layer .esgst-popup .page_heading .esgst-button-container > .page_heading_btn.esgst-button i:nth-of-type(2), header ~ .esgst-popup-layer .esgst-popup .page_heading .esgst-button-container > .page_heading_btn.esgst-button i:nth-of-type(2) {
		margin-left: 3px !important;
	}

	.esgst-gv-box .esgst-gv-icons .esgst-button-container [data-draggable-id] {
		line-height: 16px;
		font-size: 12px;
		padding: 0 4px;
	}

	.esgst-sync-warning ~ .esgst-text-left hr {
		border-top: 1px solid #ccd6de; 
		border-bottom: 1px solid rgba(255, 255, 255, .3);
		margin: 0.5em 0;
	}

	.esgst-faded {
		opacity: 0.5;
	}

	.esgst-sm-faded >*:not(.SMFeatures) {
		opacity: 0.5;
	}

	.esgst-blue {
		color: #9dd9e1 !important;
	}

	.esgst-green {
		color: #96c468 !important;
	}

	.esgst-grey {
		color: #77899a !important;
	}

	.esgst-orange {
		color: #c1a576 !important;
	}

	.esgst-red {
		color: #ec8583 !important;
	}

	.esgst-yellow {
		color: #fecc66 !important;
	}

	.esgst-warning {
		color: #e9202a !important;
		font-weight: bold;
	}

	.esgst-sync-warning {
		font-size: 20px;
		font-weight: bold;
	}

	.esgst-toggle-switch-container .esgst-description, .esgst-button-group .esgst-description {
		display: inline-block;
		margin: 0;
	}

	.esgst-description {
		color: #6b7a8c;
		font-size: 11px;
		font-style: italic;
		margin-top: 10px;
	}

	.esgst-progress-bar {
		height: 10px;
		overflow: hidden;
		text-align: left;
	}

	.esgst-progress-bar .ui-progressbar-value {
		background-color: #96c468;
		height: 100%;
		margin: -1px;
	}

	.esgst-ib-user {
		background-color: #fff;
		background-position: 5px 5px;
		background-size: 32px;
		border: 1px solid #d2d6e0;
		border-radius: 4px;
		height: 44px;
		padding: 5px;
		width: 44px;
	}

	.featured__outer-wrap .esgst-ib-user {
		background-color: transparent;
		border: 1px solid rgba(255, 255, 255, 0.1);
	}

	.esgst-ib-game {
		background-color: #fff;
		background-position: 5px 5px;
		border: 1px solid #d2d6e0;
		border-radius: 4px;
		padding: 5px;
	}

	.giveaway__row-outer-wrap .esgst-ib-game {
		background-size: 184px 69px;
		height: 81px;
		width: 196px;
	}

	.table__row-outer-wrap .esgst-ib-game {
		background-size: 85px 32px;
		height: 44px;
		width: 97px;
	}

	.esgst-oadd >* {
		padding-left: 0 !important;
		margin-left: 0 !important;
		border-left: none !important;
		box-shadow: none !important;
	}

	.esgst-gv-spacing {
		font-weight: bold;
		padding: 10px;
		text-align: center;
		width: 100px;
	}

	.esgst-gv-view {
		font-size: 0;
		padding: 5px 0;
		text-align: center;
	}

	.esgst-gv-view.pinned-giveaways__inner-wrap--minimized .giveaway__row-outer-wrap:nth-child(-n + 10) {
		display: inline-block;
	}

	.esgst-gv-container {
		border: 0 !important;
		box-shadow: none !important;
		display: inline-block;
		font-size: 12px;
		padding: 0;
		text-align: center;
		vertical-align: top;
		width: ${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('ib') ? '196px' : '184px'};
	}

	.esgst-gv-box {
		display: block;
	}

	.esgst-gv-box >*:not(.giveaway__summary):not(.esgst-gv-icons) {
		margin: 0 !important;
	}

	.esgst-gv-box.is-faded:hover, .esgst-gv-box.esgst-faded:hover {
		opacity: 1;
	}

	.esgst-gv-icons {
		float: right;
		height: 18px;
		margin: -18px 0 0 !important;
	}

	.esgst-gv-icons .esgst-gc, .esgst-gv-icons .esgst-gwc, .esgst-gv-icons .esgst-gwr, .esgst-gv-icons .esgst-gptw, .esgst-gv-icons .esgst-ttec, .esgst-gv-time, .esgst-gv-icons .esgst-ged-source {
		background-color: #fff;
		padding: 2px !important;
	}

	.esgst-gv-icons .esgst-gp-button, .esgst-elgb-button > .form__saving-button {
		background-color: #fff;
	}

	.esgst-ged-source {
		font-weight: bold;
	}

	.esgst-gv-time i {
		font-size: 12px;
		vertical-align: baseline;
	}

	.esgst-gv-icons >* {
		line-height: normal;
		margin: 0 !important;
	}

	.esgst-gv-icons >*:not(.esgst-giveaway-column-button):not(.esgst-button-container) {
		padding: 1px 3px;
	}

	.esgst-gv-icons .giveaway__column--contributor-level {
		padding: 2px 5px !important;
	}

	.esgst-gv-popout {
		font-size: 11px;
		max-width: ${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('ib') ? '174px' : '162px'};
		overflow-x: hidden;
		overflow-y: auto;
		position: absolute;
		width: ${_class_Settings__WEBPACK_IMPORTED_MODULE_1__["Settings"].get('ib') ? '174px' : '162px'};
		z-index: 1;
	}

	.esgst-gv-popout .giveaway__heading {
		display: flex;
		flex-wrap: wrap;
		height: auto;
	}

	.esgst-gv-popout .giveaway__heading__name {
		display: inline-block;
		font-size: 12px;
		max-width: 150px;
		overflow: hidden;
		text-overflow: ellipsis;
		vertical-align: middle;
	}

	.esgst-gv-popout .giveaway__heading__thin {
		font-size: 11px;
	}

	.esgst-gv-popout .esgst-gc-panel {
		font-size: 11px;
		text-align: center;
	}

	.esgst-gv-popout .esgst-gc-panel i, .esgst-gv-popout .giveaway__links i, .esgst-gv-popout .esgst-gwc i, .esgst-gv-popout .esgst-gwr i, .esgst-gv-popout .esgst-gptw i, .esgst-gv-popout .esgst-ggl-panel, .esgst-gv-popout .esgst-ggl-panel i {
		font-size: 11px;
	}

	.esgst-gv-popout .giveaway__columns:not(.esgst-giveaway-panel):not(.esgst-gv-icons) {
		display: block;
		float: left;
		width: calc(100% - 37px);
	}

	.esgst-gv-popout .giveaway__columns:not(.esgst-giveaway-panel):not(.esgst-gv-icons) >* {
		margin: 0;
		text-align: left;
	}

	.esgst-gv-popout .esgst-giveaway-panel {
		display: block;
		font-size: 11px;
	}

	.esgst-gv-popout .esgst-giveaway-panel >* {
		margin: 0;
		overflow: hidden;
	}

	.esgst-gv-popout .esgst-button-container {
		width: 100%;
	}

	.esgst-gv-popout .esgst-button {
		padding: 0;
		width: 100%;
	}
	.esgst-gv-popout .giveaway__links a:last-child {
		margin: 0 !important;
	}

	.esgst-gv-popout .giveaway_image_avatar, .esgst-gv-popout .featured_giveaway_image_avatar {
		margin: 5px;
	}

	.esgst-gv-popout .esgst-giveaway-links, .esgst-gv-popout .esgst-giveaway-panel {
		float: none;
	}

	.esgst-gv-popout [data-draggable-id="winners"] {
		margin: 5px 0 0;
	}

	.esgst-ags-panel {
		margin: 0 0 15px 0;
		max-width: 316px;
		text-align: center;
	}

	.esgst-ags-panel >* {
		display: inline-block;
	}

	.esgst-ags-filter {
		display: block;
		margin: 5px;
	}

	.esgst-ags-filter >* {
		padding: 0 5px !important;
		width: 125px;
	}

	.esgst-ags-checkbox-filter {
		margin: 5px;
	}

	.esgst-ugs-difference, .esgst-switch-input {
		display: inline-block;
		padding: 0 !important;
		width: 50px;
	}

	.esgst-switch-input-large {
		width: 150px;
	}

	.esgst-gas-popout {
		background-color: #fff;
		border: 1px solid #d2d6e0;
		border-radius: 4px;
		color: #465670;
		padding: 10px;
	}

	.esgst-ds-popout {
		background-color: #fff;
		border: 1px solid #d2d6e0;
		border-radius: 4px;
		color: #465670;
		padding: 10px;
	}

	.esgst-cfh-sr-container {
		max-height: 234px;
		overflow-y: auto;
	}

	.esgst-cfh-sr-box {
		position: relative;
	}

	.esgst-cfh-sr-summary {
		border-radius: 5px;
		cursor: pointer;
		padding: 5px;
		width: 200px;
	}

	.esgst-cfh-sr-box:not(:first-child) {
		border-top: 1px solid #ccc;
	}

	.esgst-cfh-sr-box:last-child) {
		border-bottom: 1px solid #ccc;
	}

	.esgst-cfh-sr-summary:hover {
		background-color: #465670;
		color: #fff;
	}

	.esgst-cfh-sr-name {
		font-size: 14px;
		overflow: hidden;
		text-overflow: ellipsis;
		width: 200px;
		white-space: nowrap;
	}

	.esgst-cfh-sr-description {
		opacity: 0.75;
		overflow: hidden;
		text-overflow: ellipsis;
		width: 200px;
		white-space: nowrap;
	}

	.esgst-cfh-sr-controls {
		position: absolute;
		right: 5px;
		top: 10px;
	}

	.esgst-cfh-sr-controls >* {
		margin: 2px;
	}

	.giveaway__row-outer-wrap .esgst-tag-button, .table__row-outer-wrap .esgst-tag-button {
		margin-left: 5px;
	}

	.esgst-tag-list-button {
		padding: 8px;
		right: 25px;
		position: absolute;
	}

	.esgst-tag-list {
		font-weight: bold;
		text-align: left;
		text-shadow: none;
	}

	.esgst-tag-preview .esgst-tags {
		display: inline-block;
	}

	.esgst-tag-preview input[type=text] {
		display: inline-block;
		width: 100px;
		height: 15px;
	}

	.esgst-tag-preview input[type=color] {
		box-sizing: unset;
		height: 13px;
		line-height: normal;
		margin: 0;
		padding: 0;
		vertical-align: top;
		width: 15px;
	}

	.esgst-tag-button {
		border: 0! important;
		cursor: pointer;
		display: inline-block;
		line-height: normal;
		margin: 0 0 0 5px;
		text-decoration: none !important;
		transition: opacity 0.2s;
	}

	.esgst-tag-button:hover {
		opacity: 1;
	}

	.author_name + .esgst-tag-button {
		margin: 0 5px 0 0;
	}

	.esgst-tag-button i {
		margin: 0 !important;
	}

	.esgst-tags {
		font-size: 10px;
		font-weight: bold;
	}

	.esgst-tag {
		display: inline-block !important;
		height: auto;
		margin: 0;
		padding: 1px 2px;
		text-shadow: none;
		width: auto;
	}

	.esgst-tag:not(:first-child) {
		margin: 0 0 0 5px;
	}

	.esgst-gv-popout .esgst-tags, .esgst-adots .esgst-tags {
		display: none;
	}

	.esgst-settings-menu-feature {
		align-self: flex-start;
		margin-top: 14px;
		min-height: 400px;
		overflow: auto;
		position: sticky;
		top: 24px;
	}

	.esgst-menu-split {
		display: flex;
	}

	.esgst-menu-split >* {
		flex: 1;
		overflow: auto;
		word-wrap: break-word;
	}
`;
  if (!_class_Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].esgst.sg) {
    style += `
			.esgst-un-button, .page_heading .esgst-heading-button {
				background-image: linear-gradient(#fff 0%, rgba(255, 255, 255, 0.4) 100%);
				border: 1px solid #d2d6e0;
				border-radius: 3px;
				color: #4b72d4;
				cursor: pointer;
				display: inline-block;
				font: 700 14px/22px "Open Sans", sans-serif;
				padding: 5px 15px;
			}
		`;
  }
  _class_Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].esgst.style = _class_Shared__WEBPACK_IMPORTED_MODULE_0__["Shared"].common.createElements(document.head, 'beforeend', [{
    attributes: {
      id: 'esgst-style'
    },
    text: style,
    type: 'style'
  }]);
}


/***/ })
/******/ ]);